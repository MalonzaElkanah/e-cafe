//>>built
(function(a){"object"===typeof module&&"object"===typeof module.exports?(a=a(require,exports),void 0!==a&&(module.exports=a)):"function"===typeof define&&define.amd&&define("require exports tslib ./../Injector ./../decorators/inject ./../decorators/handleDecorator ./../decorators/diffProperty ./../diff".split(" "),a)})(function(a,d){function k(a){return a.reduce(function(a,b){Object.keys(b).forEach(function(c){a[b[c]]=c});return a},{})}function f(a){return function(a){function b(){var c=null!==a&&
a.apply(this,arguments)||this;c._registeredBaseThemeKeys=[];c._recalculateClasses=!0;c._theme={};return c}e.__extends(b,a);b.prototype.theme=function(a){var c=this;this._recalculateClasses&&this._recalculateThemeClasses();return Array.isArray(a)?a.map(function(a){return c._getThemeClass(a)}):this._getThemeClass(a)};b.prototype.onPropertiesChanged=function(){this._recalculateClasses=!0};b.prototype._getThemeClass=function(a){if(void 0===a||null===a)return a;var b=this.properties.extraClasses||{},c=
this._baseThemeClassesReverseLookup[a],d=[];if(!c)return console.warn("Class name: '"+a+"' not found in theme"),null;b[c]&&d.push(b[c]);this._theme[c]?d.push(this._theme[c]):d.push(this._registeredBaseTheme[c]);return d.join(" ")};b.prototype._recalculateThemeClasses=function(){var a=this,b=this.properties.theme,d=void 0===b?{}:b;this._registeredBaseTheme||(b=this.getDecorator("baseThemeClasses"),0===b.length&&console.warn("A base theme has not been provided to this widget. Please use the @theme decorator to add a theme."),
this._registeredBaseTheme=b.reduce(function(b,c){var d=c[" _key"];c=e.__rest(c,[" _key"]);a._registeredBaseThemeKeys.push(d);return e.__assign({},b,c)},{}),this._baseThemeClassesReverseLookup=k(b));this._theme=this._registeredBaseThemeKeys.reduce(function(a,b){return e.__assign({},a,d[b])},{});this._recalculateClasses=!1};e.__decorate([g.diffProperty("theme",h.shallow),g.diffProperty("extraClasses",h.shallow)],b.prototype,"onPropertiesChanged",null);return b=e.__decorate([l.inject({name:d.INJECTED_THEME_KEY,
getProperties:function(a,b){return b.theme?{}:{theme:a}}})],b)}(a)}Object.defineProperty(d,"__esModule",{value:!0});var e=a("tslib"),m=a("./../Injector"),l=a("./../decorators/inject"),n=a("./../decorators/handleDecorator"),g=a("./../decorators/diffProperty"),h=a("./../diff");d.INJECTED_THEME_KEY="__theme_injector";d.theme=function(a){return n.handleDecorator(function(d){d.addDecorator("baseThemeClasses",a)})};d.registerThemeInjector=function(a,e){var b=new m.Injector(a);e.defineInjector(d.INJECTED_THEME_KEY,
function(a){b.setInvalidator(a);return function(){return b.get()}});return b};d.ThemedMixin=f;d.default=f});