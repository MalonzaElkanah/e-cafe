// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
(function(h,d){var n,f=function(){return"undefined"!==typeof t&&"function"!==typeof t?t:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this}(),l=function(){},g=function(a){for(var b in a)return 0;return 1},e={}.toString,c=function(a){return"[object Function]"==e.call(a)},p=function(a){return"[object String]"==e.call(a)},b=function(a){return"[object Array]"==e.call(a)},a=function(a,b){if(a)for(var k=0;k<a.length;)b(a[k++])},m=function(a,b){for(var k in b)a[k]=b[k];return a},k=function(a,
b){return m(Error(a),{src:"dojoLoader",info:b})},q=1,v=function(){return"_"+q++},u=function(a,b,k){return na(a,b,k,0,u)},t=f,r=t.document,w=r&&r.createElement("DiV"),z=u.has=function(a){return c(B[a])?B[a]=B[a](t,r,w):B[a]},B=z.cache=d.hasCache;c(h)&&(h=h(f));z.add=function(a,b,k,c){(void 0===B[a]||c)&&(B[a]=b);return k&&z(a)};z.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);z("host-webworker")&&(m(d.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,
"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),d.loaderPatch={injectUrl:function(a,b){try{importScripts(a),b()}catch(mb){console.info("failed to load resource ("+a+")"),console.error(mb)}}});for(var A in h.has)z.add(A,h.has[A],0,1);u.async=1;var x=z("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");u.eval=function(a,b){return x(a+"\r\n//# sourceURL\x3d"+b)};var C={},y=u.signal=function(k,c){k=C[k];a(k&&k.slice(0),function(a){a.apply(null,
b(c)?c:[c])})};A=u.on=function(a,b){var k=C[a]||(C[a]=[]);k.push(b);return{remove:function(){for(var a=0;a<k.length;a++)if(k[a]===b){k.splice(a,1);break}}}};var E=[],D={},F=[],L={},P=u.map={},M=[],I={},ba="",K={},S={},f={},Q=0;if(!z("foreign-loader"))var J=function(a,b){b=!1!==b;var k,c,q,m;for(k in S)c=S[k],(q=k.match(/^url\:(.+)/))?K["url:"+Xa(q[1],a)]=c:"*now"==k?m=c:"*noref"!=k&&(q=Ka(k,a,!0),K[q.mid]=K["url:"+q.url]=c);m&&m(ya(a));b&&(S={})};var R=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,
function(a){return"\\"+a})},H=function(a,b){b.splice(0,b.length);for(var k in a)b.push([k,a[k],new RegExp("^"+R(k)+"(/|$)"),k.length]);b.sort(function(a,b){return b[3]-a[3]});return b},W=function(b,k){a(b,function(a){k.push([p(a[0])?new RegExp("^"+R(a[0])+"$"):a[0],a[1]])})},aa=function(a){var b=a.name;b||(b=a,a={name:b});a=m({main:"main"},a);a.location=a.location?a.location:b;a.packageMap&&(P[b]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));L[b]=a},ia=[],V=function(b,k,c){for(var q in b){"waitSeconds"==
q&&(u.waitms=1E3*(b[q]||0));"cacheBust"==q&&(ba=b[q]?p(b[q])?b[q]:(new Date).getTime()+"":"");if("baseUrl"==q||"combo"==q)u[q]=b[q];b[q]!==B&&(u.rawConfig[q]=b[q],"has"!=q&&z.add("config-"+q,b[q],0,k))}u.baseUrl||(u.baseUrl="./");/\/$/.test(u.baseUrl)||(u.baseUrl+="/");for(q in b.has)z.add(q,b.has[q],0,k);a(b.packages,aa);for(var e in b.packagePaths)a(b.packagePaths[e],function(a){var b=e+"/"+a;p(a)&&(a={name:a});a.location=b;aa(a)});H(m(P,b.map),M);a(M,function(a){a[1]=H(a[1],[]);"*"==a[0]&&(M.star=
a)});H(m(D,b.paths),F);W(b.aliases,E);if(!z("foreign-loader")){if(k)ia.push({config:b.config});else for(q in b.config)k=Ha(q,c),k.config=m(k.config||{},b.config[q]);b.cache&&(J(),S=b.cache,J(0,!!b.cache["*noref"]))}y("config",[b,u.rawConfig])};if(z("dojo-cdn")){var Z=r.getElementsByTagName("script");n=0;for(var ga,da,ja,pa;n<Z.length;)if(ga=Z[n++],(ja=ga.getAttribute("src"))&&(pa=ja.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(da=pa[3]||"",d.baseUrl=d.baseUrl||da,Q=ga),ja=ga.getAttribute("data-dojo-config")||
ga.getAttribute("djConfig"))f=u.eval("({ "+ja+" })","data-dojo-config"),Q=ga}u.rawConfig={};V(d,1);z("dojo-cdn")&&((L.dojo.location=da)&&(da+="/"),L.dijit.location=da+"../dijit/",L.dojox.location=da+"../dojox/");V(h,1);V(f,1);if(!z("foreign-loader"))var sa=function(b){G(function(){a(b.deps,O)})},na=function(a,c,q,e,g){var r;if(p(a)){if((r=Ha(a,e,!0))&&r.executed)return r.result;throw k("undefinedModule",a);}b(a)||(V(a,0,e),a=c,c=q);if(b(a))if(a.length){q="require*"+v();for(var f,t=[],d=0;d<a.length;)f=
a[d++],t.push(Ha(f,e));r=m(Ia("",q,0,""),{injected:2,deps:t,def:c||l,require:e?e.require:u,gc:1});I[r.mid]=r;sa(r);var h=la&&!0;G(function(){N(r,h)});r.executed||qa.push(r);Y()}else c&&c();return g},ya=function(a){if(!a)return u;var b=a.require;b||(b=function(k,c,q){return na(k,c,q,a,b)},a.require=m(b,u),b.module=a,b.toUrl=function(b){return Xa(b,a)},b.toAbsMid=function(b){return Fa(b,a)});return b},qa=[],ta=[],ra={},Da=function(a){a.injected=1;ra[a.mid]=1;a.url&&(ra[a.url]=a.pack||1);wb()},Aa=function(a){a.injected=
2;delete ra[a.mid];a.url&&delete ra[a.url];g(ra)&&Ya()},fa=u.idle=function(){return!ta.length&&g(ra)&&!qa.length&&!la};var wa=function(a,b){if(b)for(var k=0;k<b.length;k++)if(b[k][2].test(a))return b[k];return 0},ua=function(a){var b=[],k,c;for(a=a.replace(/\\/g,"/").split("/");a.length;)k=a.shift(),".."==k&&b.length&&".."!=c?(b.pop(),c=b[b.length-1]):"."!=k&&b.push(c=k);return b.join("/")},Ia=function(a,b,k,c){return{pid:a,mid:b,pack:k,url:c,executed:0,def:0}},hb=function(b,q,m,e,p,g,r,f,v,t){var d,
u,h,l;l=/^\./.test(b);if(/(^\/)|(\:)|(\.js$)/.test(b)||l&&!q)return Ia(0,b,0,b);b=ua(l?q.mid+"/../"+b:b);if(/^\./.test(b))throw k("irrationalPath",b);t||l||!g.star||(h=wa(b,g.star[1]));!h&&q&&(h=(h=wa(q.mid,g))&&wa(b,h[1]));h&&(b=h[1]+b.substring(h[3]));q=(pa=b.match(/^([^\/]+)(\/(.+))?$/))?pa[1]:"";(d=m[q])?b=q+"/"+(u=pa[3]||d.main):q="";var w=0;a(f,function(a){var k=b.match(a[0]);k&&0<k.length&&(w=c(a[1])?b.replace(a[0],a[1]):a[1])});if(w)return hb(w,0,m,e,p,g,r,f,v);if(m=e[b])return v?Ia(m.pid,
m.mid,m.pack,m.url):e[b];e=(h=wa(b,r))?h[1]+b.substring(h[3]):q?("/"===d.location.slice(-1)?d.location.slice(0,-1):d.location)+"/"+u:b;/(^\/)|(\:)/.test(e)||(e=p+e);return Ia(q,b,d,ua(e+".js"))},Ka=function(a,b,k){return hb(a,b,L,I,u.baseUrl,M,F,E,void 0,k)};if(!z("foreign-loader"))var La=function(a,b,k){return a.normalize?a.normalize(b,function(a){return Fa(a,k)}):Fa(b,k)},Ma=0,Ha=function(a,b,k){var c,q;(c=a.match(/^(.+?)\!(.*)$/))?(q=Ha(c[1],b,k),5!==q.executed||q.load||Qa(q),q.load?(c=La(q,c[2],
b),a=q.mid+"!"+(q.dynamic?++Ma+"!":"")+c):(c=c[2],a=q.mid+"!"+ ++Ma+"!waitingForPlugin"),a={plugin:q,mid:a,req:ya(b),prid:c}):a=Ka(a,b);return I[a.mid]||!k&&(I[a.mid]=a)};var Fa=u.toAbsMid=function(a,b){return Ka(a,b).mid},Xa=u.toUrl=function(a,b){b=Ka(a+"/x",b);var k=b.url;return ha(0===b.pid?a:k.substring(0,k.length-5))};if(!z("foreign-loader")){var Ja={injected:2,executed:5,def:3,result:3};da=function(a){return I[a]=m({mid:a},Ja)};var Ra=da("require"),T=da("exports"),Ga=da("module"),Za={},ea=0,
Qa=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},Na=function(b){var k={};a(b.loadQ,function(a){var c=La(b,a.prid,a.req.module),q=b.dynamic?a.mid.replace(/waitingForPlugin$/,c):b.mid+"!"+c,c=m(m({},a),{mid:q,prid:c,injected:0});I[q]&&I[q].injected||ma(I[q]=c);k[a.mid]=I[q];Aa(a);delete I[a.mid]});b.loadQ=0;var c=function(a){for(var b=a.deps||[],c=0;c<b.length;c++)(a=k[b[c].mid])&&(b[c]=a)},q;for(q in I)c(I[q]);a(qa,c)},ka=function(a){u.trace("loader-finish-exec",
[a.mid]);a.executed=5;a.defOrder=ea++;a.loadQ&&(Qa(a),Na(a));for(n=0;n<qa.length;)qa[n]===a?qa.splice(n,1):n++;/^require\*/.test(a.mid)&&delete I[a.mid]},db=[],N=function(a,b){if(4===a.executed)return u.trace("loader-circular-dependency",[db.concat(a.mid).join("-\x3e")]),!a.def||b?Za:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return Za;var k=a.mid,q=a.deps||[],m,e=[],p=0;for(a.executed=4;m=q[p++];){m=m===Ra?ya(a):m===T?a.cjs.exports:m===Ga?a.cjs:N(m,b);if(m===Za)return a.executed=0,u.trace("loader-exec-module",
["abort",k]),Za;e.push(m)}u.trace("loader-run-factory",[a.mid]);b=a.def;e=c(b)?b.apply(null,e):b;a.result=void 0===e&&a.cjs?a.cjs.exports:e;ka(a)}return a.result},la=0,G=function(a){try{la++,a()}catch(ub){throw ub;}finally{la--}fa()&&y("idle",[])},Y=function(){la||G(function(){for(var a,b,k=0;k<qa.length;)a=ea,b=qa[k],N(b),a!=ea?k=0:k++})}}var ha="function"==typeof h.fixupUrl?h.fixupUrl:function(a){a+="";return a+(ba?(/\?/.test(a)?"\x26":"?")+ba:"")};void 0===z("dojo-loader-eval-hint-url")&&z.add("dojo-loader-eval-hint-url",
1);var ma=function(a){var b=a.plugin;5!==b.executed||b.load||Qa(b);var k=function(b){a.result=b;Aa(a);ka(a);Y()};b.load?b.load(a.prid,a.req,k):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],qa.unshift(b),O(b))},X=0,ca=function(a,b){z("config-stripStrict")&&(a=a.replace(/(["'])use strict\1/g,""));a===X?X.call(null):u.eval(a,z("dojo-loader-eval-hint-url")?b.url:b.mid)},O=function(a){var b=a.mid,c=a.url;if(!(a.executed||a.injected||ra[b]||a.url&&(a.pack&&ra[a.url]===a.pack||1==ra[a.url])))if(Da(a),a.plugin)ma(a);
else{var q=function(){Oa(a);if(2!==a.injected){if(z("dojo-enforceDefine")){y("error",k("noDefine",a));return}Aa(a);m(a,Ja);u.trace("loader-define-nonmodule",[a.url])}Y()};(X=K[b]||K["url:"+a.url])?(u.trace("loader-inject",["cache",a.mid,c]),ca(X,a),q()):(u.trace("loader-inject",["script",a.mid,c]),u.injectUrl(ha(c),q,a))}},nb=function(a,b,q){u.trace("loader-define-module",[a.mid,b]);if(2===a.injected)return y("error",k("multipleDefine",a)),a;m(a,{deps:b,def:q,cjs:{id:a.mid,uri:a.url,exports:a.result=
{},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var e=0;b[e];e++)b[e]=Ha(b[e],a);Aa(a);c(q)||b.length||(a.result=q,ka(a));return a},Oa=function(b,k){for(var c=[],q,m;ta.length;)m=ta.shift(),k&&(m[0]=k.shift()),q=m[0]&&Ha(m[0])||b,c.push([q,m[1],m[2]]);J(b);a(c,function(a){sa(nb.apply(null,a))})},Ya=l,wb=l;z("dom");if(z("dom")){var Sa=function(a,b,k,c){a.addEventListener(b,c,!1);return function(){a.removeEventListener(b,c,!1)}},yb=Sa(window,"load","onload",function(){u.pageLoaded=
1;try{"complete"!=r.readyState&&(r.readyState="complete")}catch(tb){}yb()}),Z=r.getElementsByTagName("script");for(n=0;!Q;)/^dojo/.test((ga=Z[n++])&&ga.type)||(Q=ga);u.injectUrl=function(a,b,c){c=c.node=r.createElement("script");var q=Sa(c,"load","onreadystatechange",function(a){a=a||window.event;var k=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(k.readyState))q(),m(),b&&b()}),m=Sa(c,"error","onerror",function(b){q();m();y("error",k("scriptError",[a,b]))});c.type="text/javascript";
c.charset="utf-8";c.src=a;Q.parentNode.insertBefore(c,Q);return c}}u.log=l;u.trace=l;z("foreign-loader")?ga=l:(ga=function(a,b,k){var q=arguments.length,m=["require","exports","module"],e=[0,a,b];1==q?e=[0,c(a)?m:[],a]:2==q&&p(a)?e=[a,c(b)?m:[],b]:3==q&&(e=[a,b,k]);u.trace("loader-define",e.slice(0,2));(q=e[0]&&Ha(e[0]))&&!ra[q.mid]?sa(nb(q,e[1],e[2])):ta.push(e)},ga.amd={vendor:"dojotoolkit.org"});m(m(u,d.loaderPatch),h.loaderPatch);A("error",function(a){try{if(console.error(a),a instanceof Error){for(var b in a)console.log(b+
":",a[b]);console.log(".")}}catch(mb){}});m(u,{uid:v,cache:K,packs:L});t.define||(t.define=ga,t.require=u,z("foreign-loader")||(a(ia,function(a){V(a)}),ga=f.deps||h.deps||d.deps,h=f.callback||h.callback||d.callback,u.boot=ga||h?[ga||[],h]:0))})(function(h){return h.dojoConfig||h.djConfig||h.require||{}},{aliases:[[/^webgl-engine/,function(){return"esri/views/3d/webgl-engine"}],[/^engine/,function(){return"esri/views/3d/webgl-engine"}],[/^esri-hydra/,function(){return"esri"}]],async:1,baseUrl:"http://localhost/e-cafe/assets/arcgis_js_api/library/4.10/dojo",
hasCache:{"config-deferredInstrumentation":0,"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"esri-built":1,"host-browser":1},map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",
main:"OnDemandGrid",name:"dgrid"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../esri",name:"esri"},{location:"../moment",main:"moment",name:"moment"},{location:"../@dojo",name:"@dojo"},{location:"../cldrjs",main:"dist/cldr",name:"cldrjs"},{location:"../globalize",main:"dist/globalize",name:"globalize"},{location:"../maquette",main:"dist/maquette.umd",name:"maquette"},{location:"../maquette-css-transitions",main:"dist/maquette-css-transitions.umd",name:"maquette-css-transitions"},
{location:"../maquette-jsx",main:"dist/maquette-jsx.umd",name:"maquette-jsx"},{location:"../tslib",main:"tslib",name:"tslib"}]});
require({cache:{"dojo/domReady":function(){define(["./global","./has"],function(h,d){function n(a){p.push(a);c&&f()}function f(){if(!b){for(b=!0;p.length;)try{p.shift()(l)}catch(q){console.error(q,"in domReady callback",q.stack)}b=!1;n._onQEmpty()}}var l=document,g={loaded:1,complete:1},e="string"!=typeof l.readyState,c=!!g[l.readyState],p=[],b;n.load=function(a,b,k){n(k)};n._Q=p;n._onQEmpty=function(){};e&&(l.readyState="loading");if(!c){var a=[],m=function(a){a=a||h.event;c||"readystatechange"==
a.type&&!g[l.readyState]||(e&&(l.readyState="complete"),c=1,f())};d=function(a,b){a.addEventListener(b,m,!1);p.push(function(){a.removeEventListener(b,m,!1)})};d(l,"DOMContentLoaded");d(h,"load");"onreadystatechange"in l?d(l,"readystatechange"):e||a.push(function(){return g[l.readyState]});if(a.length){var k=function(){if(!c){for(var b=a.length;b--;)if(a[b]()){m("poller");return}setTimeout(k,30)}};k()}}return n})},"dojo/global":function(){define(function(){return"undefined"!==typeof global&&"function"!==
typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this})},"dojo/has":function(){define(["./global","require","module"],function(h,d,n){var f=d.has||function(){};if(!f("dojo-has-api")){var l=(d="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document)&&document,g=l&&l.createElement("DiV"),e=n.config&&n.config()||{},f=function(c){return"function"==typeof e[c]?e[c]=e[c](h,l,g):e[c]};
f.cache=e;f.add=function(c,p,b,a){("undefined"==typeof e[c]||a)&&(e[c]=p);return b&&f(c)};f.add("host-browser",d);f.add("dom",d)}f("host-browser")&&(f.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),f.add("touch-events","ontouchstart"in document),f.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window),f.add("device-width",screen.availWidth||innerWidth),n=document.createElement("form"),
f.add("dom-attributes-specified-flag",0<n.attributes.length&&40>n.attributes.length));f.clearElement=function(c){c.innerHTML="";return c};f.normalize=function(c,e){var b=c.match(/[\?:]|[^:\?]*/g),a=0,m=function(k){var c=b[a++];if(":"==c)return 0;if("?"==b[a++]){if(!k&&f(c))return m();m(!0);return m(k)}return c||0};return(c=m())&&e(c)};f.load=function(c,e,b){c?e([c],b):b()};return f})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),
function(h){return h})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(h,d,n,f,l){var g=0,e=[],c=0;d=function(){g=1;h._postLoad=h.config.afterOnLoad=!0;p()};var p=function(){if(!c){for(c=1;g&&(!f||0==f._Q.length)&&(n.idle?n.idle():1)&&e.length;){var a=e.shift();try{a()}catch(k){if(k.info=k.message,n.signal)n.signal("error",k);else throw k;}}c=0}};n.on&&n.on("idle",p);f&&(f._onQEmpty=p);var b=h.ready=h.addOnLoad=function(a,
b,c){var k=l._toArray(arguments);"number"!=typeof a?(c=b,b=a,a=1E3):k.shift();c=c?l.hitch.apply(h,k):function(){b()};c.priority=a;for(k=0;k<e.length&&a>=e[k].priority;k++);e.splice(k,0,c);p()},a=h.config.addOnLoad;if(a)b[l.isArray(a)?"apply":"call"](h,a);f?f(d):d();return b})},"dojo/_base/kernel":function(){define(["../global","../has","./config","require","module"],function(h,d,n,f,l){var g,e={},c={},p={config:n,global:h,dijit:e,dojox:c},e={dojo:["dojo",p],dijit:["dijit",e],dojox:["dojox",c]};l=
f.map&&f.map[l.id.match(/[^\/]+/)[0]];for(g in l)e[g]?e[g][0]=l[g]:e[g]=[l[g],{}];for(g in e)l=e[g],l[1]._scopeName=l[0],n.noGlobals||(h[l[0]]=l[1]);p.scopeMap=e;p.baseUrl=p.config.baseUrl=f.baseUrl;p.isAsync=f.async;p.locale=n.locale;h="$Rev: b27d4da $".match(/[0-9a-f]{7,}/);p.version={major:1,minor:14,patch:0,flag:"",revision:h?h[0]:NaN,toString:function(){var a=p.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};d("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(p);
p.exit=function(){};d("host-webworker");"undefined"!=typeof console||(console={});h="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var b;for(d=0;b=h[d++];)console[b]?console[b]=Function.prototype.bind.call(console[b],console):function(){var a=b+"";console[a]="log"in console?function(){var b=Array.prototype.slice.call(arguments);b.unshift(a+":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();p.deprecated=p.experimental=
function(){};p._hasResource={};return p})},"dojo/_base/config":function(){define(["../global","../has","require"],function(h,d,n){h={};n=n.rawConfig;for(var f in n)h[f]=n[f];!h.locale&&"undefined"!=typeof navigator&&(f=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(h.locale=f.toLowerCase());return h})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(h,d){var n=function(c,e,b){b||(b=c[0]&&h.scopeMap[c[0]]?
h.scopeMap[c.shift()][1]:h.global);try{for(var a=0;a<c.length;a++){var m=c[a];if(!(m in b))if(e)b[m]={};else return;b=b[m]}return b}catch(k){}},f=Object.prototype.toString,l=function(c,e,b){return(b||[]).concat(Array.prototype.slice.call(c,e||0))},g=/\{([^\}]+)\}/g,e={_extraNames:[],_mixin:function(c,e,b){var a,m,k={};for(a in e)m=e[a],a in c&&(c[a]===m||a in k&&k[a]===m)||(c[a]=b?b(m):m);return c},mixin:function(c,p){c||(c={});for(var b=1,a=arguments.length;b<a;b++)e._mixin(c,arguments[b]);return c},
setObject:function(c,e,b){var a=c.split(".");c=a.pop();return(b=n(a,!0,b))&&c?b[c]=e:void 0},getObject:function(c,e,b){return c?n(c.split("."),e,b):b},exists:function(c,g){return void 0!==e.getObject(c,!1,g)},isString:function(c){return"string"==typeof c||c instanceof String},isArray:Array.isArray||function(c){return"[object Array]"==f.call(c)},isFunction:function(c){return"[object Function]"===f.call(c)},isObject:function(c){return void 0!==c&&(null===c||"object"==typeof c||e.isArray(c)||e.isFunction(c))},
isArrayLike:function(c){return!!c&&!e.isString(c)&&!e.isFunction(c)&&!(c.tagName&&"form"==c.tagName.toLowerCase())&&(e.isArray(c)||isFinite(c.length))},isAlien:function(c){return c&&!e.isFunction(c)&&/\{\s*\[native code\]\s*\}/.test(String(c))},extend:function(c,g){for(var b=1,a=arguments.length;b<a;b++)e._mixin(c.prototype,arguments[b]);return c},_hitchArgs:function(c,g){var b=e._toArray(arguments,2),a=e.isString(g);return function(){var m=e._toArray(arguments),k=a?(c||h.global)[g]:g;return k&&k.apply(c||
this,b.concat(m))}},hitch:function(c,g){if(2<arguments.length)return e._hitchArgs.apply(h,arguments);g||(g=c,c=null);if(e.isString(g)){c=c||h.global;if(!c[g])throw['lang.hitch: scope["',g,'"] is null (scope\x3d"',c,'")'].join("");return function(){return c[g].apply(c,arguments||[])}}return c?function(){return g.apply(c,arguments||[])}:g},delegate:function(){function c(){}return function(g,b){c.prototype=g;g=new c;c.prototype=null;b&&e._mixin(g,b);return g}}(),_toArray:d("ie")?function(){function c(c,
b,a){a=a||[];for(b=b||0;b<c.length;b++)a.push(c[b]);return a}return function(e){return(e.item?c:l).apply(this,arguments)}}():l,partial:function(c){return e.hitch.apply(h,[null].concat(e._toArray(arguments)))},clone:function(c){if(!c||"object"!=typeof c||e.isFunction(c))return c;if(c.nodeType&&"cloneNode"in c)return c.cloneNode(!0);if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp)return new RegExp(c);var g,b,a;if(e.isArray(c))for(g=[],b=0,a=c.length;b<a;++b)b in c&&(g[b]=e.clone(c[b]));
else g=c.constructor?new c.constructor:{};return e._mixin(g,c,e.clone)},trim:String.prototype.trim?function(c){return c.trim()}:function(c){return c.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(c,p,b){return c.replace(b||g,e.isFunction(p)?p:function(a,b){return e.getObject(b,!1,p)})}};e.mixin(h,e);return e})},"dojo/sniff":function(){define(["./has"],function(h){if(h("host-browser")){var d=navigator,n=d.userAgent,d=d.appVersion,f=parseFloat(d);h.add("edge",parseFloat(n.split("Edge/")[1])||
void 0);h.add("webkit",!h("edge")&&parseFloat(n.split("WebKit/")[1])||void 0);h.add("chrome",!h("edge")&&!0&&parseFloat(n.split("Chrome/")[1])||void 0);h.add("safari",0<=d.indexOf("Safari")&&!h("chrome")&&!h("edge")?parseFloat(d.split("Version/")[1]):void 0);h.add("mac",0<=d.indexOf("Macintosh"));if(n.match(/(iPhone|iPod|iPad)/)){var l=RegExp.$1.replace(/P/,"p"),g=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",g=parseFloat(g.replace(/_/,".").replace(/_/g,""));h.add(l,g);h.add("ios",g)}h.add("trident",parseFloat(d.split("Trident/")[1])||
void 0);h("webkit")||(0<=n.indexOf("Opera")&&h.add("opera",9.8<=f?parseFloat(n.split("Version/")[1])||f:f),0<=n.indexOf("Gecko")&&!h("trident")&&!h("edge")&&h.add("mozilla",f),h("mozilla")&&h.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0),document.all&&!h("opera")&&(n=parseFloat(d.split("MSIE ")[1])||void 0,(d=document.documentMode)&&5!=d&&Math.floor(n)!=d&&(n=d),h.add("ie",n)))}return h})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),
function(h,d,n,f,l,g,e,c){function p(a,b,k,m,e){m=c.hitch(k,m);if(!a||!a.addEventListener&&!a.attachEvent)return f.after(a||h.global,b,m,!0);"string"==typeof b&&"on"==b.substring(0,2)&&(b=b.substring(2));a||(a=h.global);if(!e)switch(b){case "keypress":b=q;break;case "mouseenter":b=g.enter;break;case "mouseleave":b=g.leave}return d(a,b,m,e)}function b(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}e.add("events-keypress-typed",function(){var a={charCode:0};
try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(t){}return 0==a.charCode&&!e("opera")});var a={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},m=e("mac")?"metaKey":"ctrlKey",k=function(a,k){k=c.mixin({},a,k);b(k);k.preventDefault=function(){a.preventDefault()};k.stopPropagation=function(){a.stopPropagation()};return k},q;q=e("events-keypress-typed")?function(b,
c){var q=d(b,"keydown",function(b){var q=b.keyCode,m=13!=q&&32!=q&&(27!=q||!e("ie"))&&(48>q||90<q)&&(96>q||111<q)&&(186>q||192<q)&&(219>q||222<q)&&229!=q;if(m||b.ctrlKey){m=m?0:q;if(b.ctrlKey){if(3==q||13==q)return c.call(b.currentTarget,b);m=95<m&&106>m?m-48:!b.shiftKey&&65<=m&&90>=m?m+32:a[m]||m}q=k(b,{type:"keypress",faux:!0,charCode:m});c.call(b.currentTarget,q);if(e("ie"))try{b.keyCode=q.keyCode}catch(x){}}}),m=d(b,"keypress",function(a){var b=a.charCode;a=k(a,{charCode:32<=b?b:0,faux:!0});return c.call(this,
a)});return{remove:function(){q.remove();m.remove()}}}:e("opera")?function(a,b){return d(a,"keypress",function(a){var c=a.which;3==c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&!a.shiftKey&&65<=c&&90>=c&&(c+=32);return b.call(this,k(a,{charCode:c}))})}:function(a,k){return d(a,"keypress",function(a){b(a);return k.call(this,a)})};var v={_keypress:q,connect:function(a,b,k,c,q){var m=arguments,e=[],g=0;e.push("string"==typeof m[0]?null:m[g++],m[g++]);var r=m[g+1];e.push("string"==typeof r||"function"==
typeof r?m[g++]:null,m[g++]);for(r=m.length;g<r;g++)e.push(m[g]);return p.apply(this,e)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,k){return n.subscribe(a,c.hitch(b,k))},publish:function(a,b){return n.publish.apply(n,[a].concat(b))},connectPublisher:function(a,b,k){var c=function(){v.publish(a,arguments)};return k?v.connect(b,k,c):v.connect(b,c)},isCopyKey:function(a){return a[m]}};v.unsubscribe=v.disconnect;c.mixin(h,v);return v})},"dojo/on":function(){define(["require","./_base/kernel",
"./sniff"],function(h,d,n){function f(b,m,g,p,r){if(p=m.match(/(.*):(.*)/))return m=p[2],p=p[1],e.selector(p,m).call(r,b,g);n("touch")&&c.test(m)&&(g=k(g));if(b.addEventListener){var q=m in a,f=q?a[m]:m;b.addEventListener(f,g,q);return{remove:function(){b.removeEventListener(f,g,q)}}}throw Error("Target must be an event emitter");}function l(){this.cancelable=!1;this.defaultPrevented=!0}function g(){this.bubbles=!1}n("dom")&&n("touch");var e=function(a,b,k,c){return"function"!=typeof a.on||"function"==
typeof b||a.nodeType?e.parse(a,b,k,f,c,this):a.on(b,k)};e.pausable=function(a,b,k,c){var q;a=e(a,b,function(){if(!q)return k.apply(this,arguments)},c);a.pause=function(){q=!0};a.resume=function(){q=!1};return a};e.once=function(a,b,k,c){var q=e(a,b,function(){q.remove();return k.apply(this,arguments)});return q};e.parse=function(a,b,k,c,m,g){var q;if(b.call)return b.call(g,a,k);b instanceof Array?q=b:-1<b.indexOf(",")&&(q=b.split(/\s*,\s*/));if(q){var p=[];b=0;for(var r;r=q[b++];)p.push(e.parse(a,
r,k,c,m,g));p.remove=function(){for(var a=0;a<p.length;a++)p[a].remove()};return p}return c(a,b,k,m,g)};var c=/^touch/;e.matches=function(a,b,k,c,m){m=m&&"function"==typeof m.matches?m:d.query;c=!1!==c;1!=a.nodeType&&(a=a.parentNode);for(;!m.matches(a,b,k);)if(a==k||!1===c||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};e.selector=function(a,b,k){return function(c,q){function m(b){return e.matches(b,a,c,k,g)}var g="function"==typeof a?{matches:a}:this,p=b.bubble;return p?e(c,p(m),q):e(c,b,function(a){var b=
m(a.target);if(b)return a.selectorTarget=b,q.call(b,a)})}};var p=[].slice,b=e.emit=function(a,b,k){var c=p.call(arguments,2),q="on"+b;if("parentNode"in a){var m=c[0]={},e;for(e in k)m[e]=k[e];m.preventDefault=l;m.stopPropagation=g;m.target=a;m.type=b;k=m}do a[q]&&a[q].apply(a,c);while(k&&k.bubbles&&(a=a.parentNode));return k&&k.cancelable&&k},a={};e.emit=function(a,k,c){if(a.dispatchEvent&&document.createEvent){var q=(a.ownerDocument||document).createEvent("HTMLEvents");q.initEvent(k,!!c.bubbles,
!!c.cancelable);for(var m in c)m in q||(q[m]=c[m]);return a.dispatchEvent(q)&&q}return b.apply(e,arguments)};if(n("touch"))var m=window.orientation,k=function(a){return function(b){var k=b.corrected;if(!k){var c=b.type;try{delete b.type}catch(z){}if(b.type){var k={},q;for(q in b)k[q]=b[q];k.preventDefault=function(){b.preventDefault()};k.stopPropagation=function(){b.stopPropagation()}}else k=b,k.type=c;b.corrected=k;if("resize"==c){if(m==window.orientation)return null;m=window.orientation;k.type=
"orientationchange";return a.call(this,k)}"rotation"in k||(k.rotation=0,k.scale=1);if(window.TouchEvent&&b instanceof TouchEvent){var c=k.changedTouches[0],e;for(e in c)delete k[e],k[e]=c[e]}}return a.call(this,k)}};return e})},"dojo/topic":function(){define(["./Evented"],function(h){var d=new h;return{publish:function(h,f){return d.emit.apply(d,arguments)},subscribe:function(h,f){return d.on.apply(d,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(h,d){function n(){}
var f=h.after;n.prototype={on:function(h,g){return d.parse(this,h,g,function(e,c){return f(e,"on"+c,g,!0)})},emit:function(f,g){var e=[this];e.push.apply(e,arguments);return d.emit.apply(d,e)}};return n})},"dojo/aspect":function(){define([],function(){function h(e,c,g,b){var a=e[c],m="around"==c,k;if(m){var q=g(function(){return a.advice(this,arguments)});k={remove:function(){q&&(q=e=g=null)},advice:function(b,k){return q?q.apply(b,k):a.advice(b,k)}}}else k={remove:function(){if(k.advice){var a=k.previous,
b=k.next;b||a?(a?a.next=b:e[c]=b,b&&(b.previous=a)):delete e[c];e=g=k.advice=null}},id:e.nextId++,advice:g,receiveArguments:b};if(a&&!m)if("after"==c){for(;a.next&&(a=a.next););a.next=k;k.previous=a}else"before"==c&&(e[c]=k,k.next=a,a.previous=k);else e[c]=k;return k}function d(e){return function(c,g,b,a){var m=c[g],k;m&&m.target==c||(c[g]=k=function(){for(var a=k.nextId,b=arguments,c=k.before;c;)c.advice&&(b=c.advice.apply(this,b)||b),c=c.next;if(k.around)var m=k.around.advice(this,b);for(c=k.after;c&&
c.id<a;){if(c.advice)if(c.receiveArguments)var e=c.advice.apply(this,b),m=e===n?m:e;else m=c.advice.call(this,m,b);c=c.next}return m},m&&(k.around={advice:function(a,b){return m.apply(a,b)}}),k.target=c,k.nextId=k.nextId||0);c=h(k||m,e,b,a);b=null;return c}}var n,f=d("after"),l=d("before"),g=d("around");return{before:l,around:g,after:f}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(h,d,n,f){if(d._fixEvent){var l=d._fixEvent;d._fixEvent=function(g,
e){(g=l(g,e))&&f.normalizeEvent(g);return g}}n={fix:function(g,e){return d._fixEvent?d._fixEvent(g,e):g},stop:function(g){g.preventDefault();g.stopPropagation()}};h.fixEvent=n.fix;h.stopEvent=n.stop;return n})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(h,d,n,f){function l(b,a,c,k,q,e){e=e||"px";b=b.style;isNaN(a)||(b.left=a+e);isNaN(c)||(b.top=c+e);0<=k&&(b.width=k+e);0<=q&&(b.height=q+e)}function g(b){return"button"==b.tagName.toLowerCase()||
"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function e(b){return"border-box"==c.boxModel||"table"==b.tagName.toLowerCase()||g(b)}var c={boxModel:"content-box"};h("ie")&&(c.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");c.getPadExtents=function(b,a){b=n.byId(b);var c=a||f.getComputedStyle(b),k=f.toPixelValue;a=k(b,c.paddingLeft);var q=k(b,c.paddingTop),e=k(b,c.paddingRight);b=k(b,c.paddingBottom);return{l:a,t:q,r:e,b:b,w:a+e,h:q+b}};
c.getBorderExtents=function(b,a){b=n.byId(b);var c=f.toPixelValue,k=a||f.getComputedStyle(b);a="none"!=k.borderLeftStyle?c(b,k.borderLeftWidth):0;var q="none"!=k.borderTopStyle?c(b,k.borderTopWidth):0,e="none"!=k.borderRightStyle?c(b,k.borderRightWidth):0;b="none"!=k.borderBottomStyle?c(b,k.borderBottomWidth):0;return{l:a,t:q,r:e,b:b,w:a+e,h:q+b}};c.getPadBorderExtents=function(b,a){b=n.byId(b);var m=a||f.getComputedStyle(b);a=c.getPadExtents(b,m);b=c.getBorderExtents(b,m);return{l:a.l+b.l,t:a.t+
b.t,r:a.r+b.r,b:a.b+b.b,w:a.w+b.w,h:a.h+b.h}};c.getMarginExtents=function(b,a){b=n.byId(b);var c=a||f.getComputedStyle(b),k=f.toPixelValue;a=k(b,c.marginLeft);var q=k(b,c.marginTop),e=k(b,c.marginRight);b=k(b,c.marginBottom);return{l:a,t:q,r:e,b:b,w:a+e,h:q+b}};c.getMarginBox=function(b,a){b=n.byId(b);a=a||f.getComputedStyle(b);a=c.getMarginExtents(b,a);var m=b.offsetLeft-a.l,k=b.offsetTop-a.t,q=b.parentNode,e=f.toPixelValue;8==h("ie")&&q&&(q=f.getComputedStyle(q),m-="none"!=q.borderLeftStyle?e(b,
q.borderLeftWidth):0,k-="none"!=q.borderTopStyle?e(b,q.borderTopWidth):0);return{l:m,t:k,w:b.offsetWidth+a.w,h:b.offsetHeight+a.h}};c.getContentBox=function(b,a){b=n.byId(b);var m=a||f.getComputedStyle(b);a=b.clientWidth;var k,q=c.getPadExtents(b,m);k=c.getBorderExtents(b,m);var m=b.offsetLeft+q.l+k.l,e=b.offsetTop+q.t+k.t;a?k=b.clientHeight:(a=b.offsetWidth-k.w,k=b.offsetHeight-k.h);if(8==h("ie")){var g=b.parentNode,p=f.toPixelValue;g&&(g=f.getComputedStyle(g),m-="none"!=g.borderLeftStyle?p(b,g.borderLeftWidth):
0,e-="none"!=g.borderTopStyle?p(b,g.borderTopWidth):0)}return{l:m,t:e,w:a-q.w,h:k-q.h}};c.setContentSize=function(b,a,m){b=n.byId(b);var k=a.w;a=a.h;e(b)&&(m=c.getPadBorderExtents(b,m),0<=k&&(k+=m.w),0<=a&&(a+=m.h));l(b,NaN,NaN,k,a)};var p={l:0,t:0,w:0,h:0};c.setMarginBox=function(b,a,m){b=n.byId(b);var k=m||f.getComputedStyle(b);m=a.w;var q=a.h,d=e(b)?p:c.getPadBorderExtents(b,k),k=c.getMarginExtents(b,k);if(h("webkit")&&g(b)){var u=b.style;0<=m&&!u.width&&(u.width="4px");0<=q&&!u.height&&(u.height=
"4px")}0<=m&&(m=Math.max(m-d.w-k.w,0));0<=q&&(q=Math.max(q-d.h-k.h,0));l(b,a.l,a.t,m,q)};c.isBodyLtr=function(b){b=b||d.doc;return"ltr"==(d.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};c.docScroll=function(b){b=b||d.doc;var a=d.doc.parentWindow||d.doc.defaultView;return"pageXOffset"in a?{x:a.pageXOffset,y:a.pageYOffset}:(a=b.documentElement)&&{x:c.fixIeBiDiScrollLeft(a.scrollLeft||0,b),y:a.scrollTop||0}};c.getIeDocumentElementOffset=function(b){return{x:0,y:0}};c.fixIeBiDiScrollLeft=
function(b,a){a=a||d.doc;var m=h("ie");if(m&&!c.isBodyLtr(a)){a=a.documentElement;var k=d.global;6==m&&k.frameElement&&a.scrollHeight>a.clientHeight&&(b+=a.clientLeft);return 8>m?b+a.clientWidth-a.scrollWidth:-b}return b};c.position=function(b,a){b=n.byId(b);d.body(b.ownerDocument);var m=b.getBoundingClientRect(),m={x:m.left,y:m.top,w:m.right-m.left,h:m.bottom-m.top};9>h("ie")&&(m.x-=0,m.y-=0);a&&(b=c.docScroll(b.ownerDocument),m.x+=b.x,m.y+=b.y);return m};c.getMarginSize=function(b,a){b=n.byId(b);
a=c.getMarginExtents(b,a||f.getComputedStyle(b));b=b.getBoundingClientRect();return{w:b.right-b.left+a.w,h:b.bottom-b.top+a.h}};c.normalizeEvent=function(b){"layerX"in b||(b.layerX=b.offsetX,b.layerY=b.offsetY);if(!("pageX"in b)){var a=b.target,a=a&&a.ownerDocument||document,m=a.documentElement;b.pageX=b.clientX+c.fixIeBiDiScrollLeft(m.scrollLeft||0,a);b.pageY=b.clientY+(m.scrollTop||0)}};return c})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(h,d,n){var f={global:h.global,
doc:h.global.document||null,body:function(f){f=f||h.doc;return f.body||f.getElementsByTagName("body")[0]},setContext:function(d,g){h.global=f.global=d;h.doc=f.doc=g},withGlobal:function(d,g,e,c){var p=h.global;try{return h.global=f.global=d,f.withDoc.call(null,d.document,g,e,c)}finally{h.global=f.global=p}},withDoc:function(d,g,e,c){var p=f.doc,b=n("ie"),a,m,k;try{return h.doc=f.doc=d,h.isQuirks=0,n("ie")&&(k=d.parentWindow)&&k.navigator&&(a=parseFloat(k.navigator.appVersion.split("MSIE ")[1])||void 0,
(m=d.documentMode)&&5!=m&&Math.floor(a)!=m&&(a=m),h.isIE=n.add("ie",a,!0,!0)),e&&"string"==typeof g&&(g=e[g]),g.apply(e,c||[])}finally{h.doc=f.doc=p,h.isQuirks=0,h.isIE=n.add("ie",b,!0,!0)}}};d.mixin(h,f);return f})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(h,d,n){if(7>=h("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}var f={};h("ie")?f.byId=function(g,e){if("string"!=typeof g)return g;var c=e||d.doc;e=g&&c.getElementById(g);if(!e||
e.attributes.id.value!=g&&e.id!=g){c=c.all[g];if(!c||c.nodeName)c=[c];for(var p=0;e=c[p++];)if(e.attributes&&e.attributes.id&&e.attributes.id.value==g||e.id==g)return e}else return e}:f.byId=function(g,e){return("string"==typeof g?(e||d.doc).getElementById(g):g)||null};n=n.global.document||null;h.add("dom-contains",!(!n||!n.contains));f.isDescendant=h("dom-contains")?function(g,e){return!(!(e=f.byId(e))||!e.contains(f.byId(g)))}:function(g,e){try{for(g=f.byId(g),e=f.byId(e);g;){if(g==e)return!0;g=
g.parentNode}}catch(c){}return!1};h.add("css-user-select",function(g,e,c){if(!c)return!1;g=c.style;e=["Khtml","O","Moz","Webkit"];c=e.length;var p="userSelect";do if("undefined"!==typeof g[p])return p;while(c--&&(p=e[c]+"UserSelect"));return!1});var l=h("css-user-select");f.setSelectable=l?function(g,e){f.byId(g).style[l]=e?"":"none"}:function(g,e){g=f.byId(g);var c=g.getElementsByTagName("*"),p=c.length;if(e)for(g.removeAttribute("unselectable");p--;)c[p].removeAttribute("unselectable");else for(g.setAttribute("unselectable",
"on");p--;)c[p].setAttribute("unselectable","on")};return f})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(h,d,n){function f(b,k,c){k=k.toLowerCase();if("auto"==c){if("height"==k)return b.offsetHeight;if("width"==k)return b.offsetWidth}if("fontweight"==k)switch(c){case 700:return"bold";default:return"normal"}k in a||(a[k]=m.test(k));return a[k]?e(b,c):c}var l,g={};l=h("webkit")?function(a){var b;if(1==a.nodeType){var k=a.ownerDocument.defaultView;b=k.getComputedStyle(a,
null);!b&&a.style&&(a.style.display="",b=k.getComputedStyle(a,null))}return b||{}}:h("ie")&&9>h("ie")?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){if(1===a.nodeType){var b=a.ownerDocument.defaultView;return(b.opener?b:n.global.window).getComputedStyle(a,null)}return{}};g.getComputedStyle=l;var e;e=h("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var k=a.style,c=a.runtimeStyle,q=k.left,m=c.left;c.left=
a.currentStyle.left;try{k.left=b,b=k.pixelLeft}catch(z){b=0}k.left=q;c.left=m;return b}:function(a,b){return parseFloat(b)||0};g.toPixelValue=e;var c=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(u){return b?{}:null}},p=9>h("ie")||(h("ie"),0)?function(a){try{return c(a).Opacity/100}catch(v){return 1}}:function(a){return l(a).opacity},b=9>h("ie")||(h("ie"),0)?function(a,k){""===k&&(k=1);var m=100*k;1===k?(a.style.zoom="",c(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,
""))):(a.style.zoom=1,c(a)?c(a,1).Opacity=m:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+m+")",c(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(a=a.firstChild;a;a=a.nextSibling)"td"==a.tagName.toLowerCase()&&b(a,k);return k}:function(a,b){return a.style.opacity=b},a={left:!0,top:!0},m=/margin|padding|width|height|max|min|offset/,k={cssFloat:1,styleFloat:1,"float":1};g.get=function(a,b){var c=d.byId(a),m=arguments.length;if(2==m&&"opacity"==b)return p(c);b=k[b]?"cssFloat"in
c.style?"cssFloat":"styleFloat":b;var q=g.getComputedStyle(c);return 1==m?q:f(c,b,q[b]||c.style[b])};g.set=function(a,c,m){var q=d.byId(a),e=arguments.length,p="opacity"==c;c=k[c]?"cssFloat"in q.style?"cssFloat":"styleFloat":c;if(3==e)return p?b(q,m):q.style[c]=m;for(var f in c)g.set(a,f,c[f]);return g.getComputedStyle(q)};return g})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(h,d,n,f,l){function g(e,c){var p=function(b,a){return d(b,e,function(m){if(c)return c(m,
a);if(!f.isDescendant(m.relatedTarget,b))return a.call(this,m)})};p.bubble=function(b){return g(e,function(a,c){var k=b(a.target),m=a.relatedTarget;if(k&&k!=(m&&1==m.nodeType&&b(m)))return c.call(k,a)})};return p}n={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,c){return e.button==c},isLeft:function(e){return 0==e.button},isMiddle:function(e){return 1==e.button},isRight:function(e){return 2==e.button}};h.mouseButtons=n;return{_eventHandler:g,enter:g("mouseover"),leave:g("mouseout"),wheel:"mousewheel",
isLeft:n.isLeft,isMiddle:n.isMiddle,isRight:n.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(h,d,n){if(!n("host-browser"))return n;h._name="browser";d.mixin(h,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:0,isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:0,isWii:0,isQuirks:0,isAir:0});return n})},"dojo/keys":function(){define(["./_base/kernel",
"./sniff"],function(h,d){return h.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:d("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,
NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:d("mac")?d("safari")?91:224:17}})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(h,d,n){var f=window,l={addOnWindowUnload:function(g,e){h.windowUnloaded||n(f,"unload",h.windowUnloaded=function(){});n(f,"unload",d.hitch(g,
e))},addOnUnload:function(g,e){n(f,"beforeunload",d.hitch(g,e))}};h.addOnWindowUnload=l.addOnWindowUnload;h.addOnUnload=l.addOnUnload;return l})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(h,d,n,f,l,g,e,c){h.byId=d.byId;h.isDescendant=d.isDescendant;h.setSelectable=d.setSelectable;h.getAttr=f.get;h.setAttr=f.set;h.hasAttr=f.has;h.removeAttr=f.remove;h.getNodeProp=f.getNodeProp;h.attr=
function(c,b,a){return 2==arguments.length?f["string"==typeof b?"get":"set"](c,b):f.set(c,b,a)};h.hasClass=g.contains;h.addClass=g.add;h.removeClass=g.remove;h.toggleClass=g.toggle;h.replaceClass=g.replace;h._toDom=h.toDom=e.toDom;h.place=e.place;h.create=e.create;h.empty=function(c){e.empty(c)};h._destroyElement=h.destroy=function(c){e.destroy(c)};h._getPadExtents=h.getPadExtents=c.getPadExtents;h._getBorderExtents=h.getBorderExtents=c.getBorderExtents;h._getPadBorderExtents=h.getPadBorderExtents=
c.getPadBorderExtents;h._getMarginExtents=h.getMarginExtents=c.getMarginExtents;h._getMarginSize=h.getMarginSize=c.getMarginSize;h._getMarginBox=h.getMarginBox=c.getMarginBox;h.setMarginBox=c.setMarginBox;h._getContentBox=h.getContentBox=c.getContentBox;h.setContentSize=c.setContentSize;h._isBodyLtr=h.isBodyLtr=c.isBodyLtr;h._docScroll=h.docScroll=c.docScroll;h._getIeDocumentElementOffset=h.getIeDocumentElementOffset=c.getIeDocumentElementOffset;h._fixIeBiDiScrollLeft=h.fixIeBiDiScrollLeft=c.fixIeBiDiScrollLeft;
h.position=c.position;h.marginBox=function(e,b){return b?c.setMarginBox(e,b):c.getMarginBox(e)};h.contentBox=function(e,b){return b?c.setContentSize(e,b):c.getContentBox(e)};h.coords=function(e,b){h.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");e=d.byId(e);var a=n.getComputedStyle(e),a=c.getMarginBox(e,a);e=c.position(e,b);a.x=e.x;a.y=e.y;return a};h.getProp=l.get;h.setProp=l.set;h.prop=function(c,b,a){return 2==arguments.length?l["string"==typeof b?"get":"set"](c,b):l.set(c,
b,a)};h.getStyle=n.get;h.setStyle=n.set;h.getComputedStyle=n.getComputedStyle;h.__toPixelValue=h.toPixelValue=n.toPixelValue;h.style=function(c,b,a){switch(arguments.length){case 1:return n.get(c);case 2:return n["string"==typeof b?"get":"set"](c,b)}return n.set(c,b,a)};return h})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(h,d,n,f,l,g){function e(b,a){b=b.getAttributeNode&&b.getAttributeNode(a);return!!b&&b.specified}var c={innerHTML:1,
textContent:1,className:1,htmlFor:d("ie"),value:1},p={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};h.has=function(b,a){var m=a.toLowerCase();return c[g.names[m]||a]||e(f.byId(b),p[m]||a)};h.get=function(b,a){b=f.byId(b);var m=a.toLowerCase(),k=g.names[m]||a,q=b[k];if(c[k]&&"undefined"!=typeof q)return q;if("textContent"==k)return g.get(b,k);if("href"!=k&&("boolean"==typeof q||n.isFunction(q)))return q;a=p[m]||a;return e(b,a)?b.getAttribute(a):null};h.set=function(b,a,m){b=
f.byId(b);if(2==arguments.length){for(var k in a)h.set(b,k,a[k]);return b}k=a.toLowerCase();var q=g.names[k]||a,e=c[q];if("style"==q&&"string"!=typeof m)return l.set(b,m),b;if(e||"boolean"==typeof m||n.isFunction(m))return g.set(b,a,m);b.setAttribute(p[k]||a,m);return b};h.remove=function(b,a){f.byId(b).removeAttribute(p[a.toLowerCase()]||a)};h.getNodeProp=function(b,a){b=f.byId(b);var c=a.toLowerCase(),k=g.names[c]||a;if(k in b&&"href"!=k)return b[k];a=p[c]||a;return e(b,a)?b.getAttribute(a):null}})},
"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(h,d,n,f,l,g,e,c){var p={},b=1,a=d._scopeName+"attrid";h.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};h.get=function(a,b){a=l.byId(a);var k=b.toLowerCase();return a[h.names[k]||b]};h.set=function(m,k,q){m=
l.byId(m);if(2==arguments.length&&"string"!=typeof k){for(var d in k)h.set(m,d,k[d]);return m}d=k.toLowerCase();d=h.names[d]||k;if("style"==d&&"string"!=typeof q)return g.set(m,q),m;if("innerHTML"==d)return n("ie")&&m.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(e.empty(m),m.appendChild(e.toDom(q,m.ownerDocument))):m[d]=q,m;if(f.isFunction(q)){var u=m[a];u||(u=b++,m[a]=u);p[u]||(p[u]={});var t=p[u][d];if(t)c.disconnect(t);else try{delete m[d]}catch(r){}q?
p[u][d]=c.connect(m,d,q):m[d]=null;return m}m[d]=q;return m}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(h,d,n,f,l,g){function e(a,b){var k=b.parentNode;k&&k.insertBefore(a,b)}function c(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(z){}for(var b;b=a.lastChild;)a.removeChild(b)}var p={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table",
"thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},b=/<\s*([\w\:]+)/,a={},m=0,k="__"+d._scopeName+"ToDomId",q;for(q in p)p.hasOwnProperty(q)&&(d=p[q],d.pre="option"==q?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+d.join("\x3e\x3c")+"\x3e",d.post="\x3c/"+d.reverse().join("\x3e\x3c/")+"\x3e");var v;8>=n("ie")&&(v=function(a){a.__dojo_html5_tested="yes";var b=u("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==
b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(b){a.createElement(b)});t(b)});h.toDom=function(c,q){q=q||f.doc;var e=q[k];e||(q[k]=e=++m+"",a[e]=q.createElement("div"));8>=n("ie")&&!q.__dojo_html5_tested&&q.body&&v(q);c+="";var g=c.match(b),r=g?g[1].toLowerCase():"",e=a[e];if(g&&p[r])for(g=p[r],e.innerHTML=g.pre+c+g.post,c=g.length;c;--c)e=e.firstChild;else e.innerHTML=
c;if(1==e.childNodes.length)return e.removeChild(e.firstChild);for(c=q.createDocumentFragment();q=e.firstChild;)c.appendChild(q);return c};h.place=function(a,b,k){b=l.byId(b);"string"==typeof a&&(a=/^\s*</.test(a)?h.toDom(a,b.ownerDocument):l.byId(a));if("number"==typeof k){var c=b.childNodes;!c.length||c.length<=k?b.appendChild(a):e(a,c[0>k?0:k])}else switch(k){case "before":e(a,b);break;case "after":k=a;(c=b.parentNode)&&(c.lastChild==b?c.appendChild(k):c.insertBefore(k,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,
b);break;case "only":h.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){e(a,b.firstChild);break}default:b.appendChild(a)}return a};var u=h.create=function(a,b,k,c){var m=f.doc;k&&(k=l.byId(k),m=k.ownerDocument);"string"==typeof a&&(a=m.createElement(a));b&&g.set(a,b);k&&h.place(a,k,c);return a};h.empty=function(a){c(l.byId(a))};var t=h.destroy=function(a){if(a=l.byId(a)){var b=a;a=a.parentNode;b.firstChild&&c(b);a&&(n("ie")&&a.canHaveChildren&&"removeNode"in b?b.removeNode(!1):a.removeChild(b))}}})},
"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(h,d,n){function f(c){if("string"==typeof c||c instanceof String){if(c&&!g.test(c))return e[0]=c,e;c=c.split(g);c.length&&!c[0]&&c.shift();c.length&&!c[c.length-1]&&c.pop();return c}return c?d.filter(c,function(b){return b}):[]}var l,g=/\s+/,e=[""],c={};return l={contains:function(c,b){return 0<=(" "+n.byId(c).className+" ").indexOf(" "+b+" ")},add:function(c,b){c=n.byId(c);b=f(b);var a=c.className,m,a=a?" "+a+" ":
" ";m=a.length;for(var k=0,q=b.length,e;k<q;++k)(e=b[k])&&0>a.indexOf(" "+e+" ")&&(a+=e+" ");m<a.length&&(c.className=a.substr(1,a.length-2))},remove:function(c,b){c=n.byId(c);var a;if(void 0!==b){b=f(b);a=" "+c.className+" ";for(var m=0,k=b.length;m<k;++m)a=a.replace(" "+b[m]+" "," ");a=h.trim(a)}else a="";c.className!=a&&(c.className=a)},replace:function(e,b,a){e=n.byId(e);c.className=e.className;l.remove(c,a);l.add(c,b);e.className!==c.className&&(e.className=c.className)},toggle:function(c,b,
a){c=n.byId(c);if(void 0===a){b=f(b);for(var m=0,k=b.length,q;m<k;++m)q=b[m],l[l.contains(c,q)?"remove":"add"](c,q)}else l[a?"add":"remove"](c,b);return a}}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(h,d,n){function f(b){return e[b]=new Function("item","index","array",b)}function l(b){var a=!b;return function(c,k,q){var m=0,g=c&&c.length||0,p;g&&"string"==typeof c&&(c=c.split(""));"string"==typeof k&&(k=e[k]||f(k));if(q)for(;m<g;++m){if(p=!k.call(q,c[m],m,c),b^
p)return!p}else for(;m<g;++m)if(p=!k(c[m],m,c),b^p)return!p;return a}}function g(b){var a=1,m=0,k=0;b||(a=m=k=-1);return function(q,e,g,f){if(f&&0<a)return p.lastIndexOf(q,e,g);f=q&&q.length||0;var r=b?f+k:m;g===c?g=b?m:f+k:0>g?(g=f+g,0>g&&(g=m)):g=g>=f?f+k:g;for(f&&"string"==typeof q&&(q=q.split(""));g!=r;g+=a)if(q[g]==e)return g;return-1}}var e={},c,p={every:l(!1),some:l(!0),indexOf:g(!0),lastIndexOf:g(!1),forEach:function(b,a,c){var k=0,m=b&&b.length||0;m&&"string"==typeof b&&(b=b.split(""));"string"==
typeof a&&(a=e[a]||f(a));if(c)for(;k<m;++k)a.call(c,b[k],k,b);else for(;k<m;++k)a(b[k],k,b)},map:function(b,a,c,k){var m=0,g=b&&b.length||0;k=new (k||Array)(g);g&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=e[a]||f(a));if(c)for(;m<g;++m)k[m]=a.call(c,b[m],m,b);else for(;m<g;++m)k[m]=a(b[m],m,b);return k},filter:function(b,a,c){var k=0,m=b&&b.length||0,g=[],p;m&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=e[a]||f(a));if(c)for(;k<m;++k)p=b[k],a.call(c,p,k,b)&&g.push(p);
else for(;k<m;++k)p=b[k],a(p,k,b)&&g.push(p);return g},clearCache:function(){e={}}};n.mixin(h,p);return p})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(h,d,n){d=d.NodeList;var f=d.prototype;f.connect=d._adaptAsForEach(function(){return h.connect.apply(this,arguments)});f.coords=d._adaptAsMap(h.coords);d.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");
n.forEach(d.events,function(d){var g="on"+d;f[g]=function(e,c){return this.connect(g,e,c)}});return h.NodeList=d})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(h,d,n,f,l,g,e,c){function p(a,b){var k=function(k,c){if("string"==typeof c&&(c=n.byId(c),!c))return new b([]);k="string"==typeof k?a(k,c):k?k.end&&k.on?k:[k]:[];return k.end&&k.on?k:new b(k)};k.matches=a.match||function(a,b,c){return 0<
k.filter([a],b,c).length};k.filter=a.filter||function(a,b,c){return k(b,c).filter(function(b){return-1<l.indexOf(a,b)})};if("function"!=typeof a){var c=a.search;a=function(a,b){return c(b||document,a)}}return k}var b=Array.prototype,a=b.slice,m=b.concat,k=l.forEach,q=function(b,k,c){k=[0].concat(a.call(k,0));c=c||h.global;return function(a){k[0]=a;return b.apply(c,k)}},v=function(a){var b=this instanceof u&&1;"number"==typeof a&&(a=Array(a));var k=a&&"length"in a?a:arguments;if(b||!k.sort){for(var c=
b?this:[],m=c.length=k.length,e=0;e<m;e++)c[e]=k[e];if(b)return c;k=c}g._mixin(k,t);k._NodeListCtor=function(a){return u(a)};return k},u=v,t=u.prototype=[];u._wrap=t._wrap=function(a,b,k){a=new (k||this._NodeListCtor||u)(a);return b?a._stash(b):a};u._adaptAsMap=function(a,b){return function(){return this.map(q(a,arguments,b))}};u._adaptAsForEach=function(a,b){return function(){this.forEach(q(a,arguments,b));return this}};u._adaptAsFilter=function(a,b){return function(){return this.filter(q(a,arguments,
b))}};u._adaptWithCondition=function(a,b,k){return function(){var c=arguments,m=q(a,c,k);if(b.call(k||h.global,c))return this.map(m);this.forEach(m);return this}};k(["slice","splice"],function(a){var k=b[a];t[a]=function(){return this._wrap(k.apply(this,arguments),"slice"==a?this:null)}});k(["indexOf","lastIndexOf","every","some"],function(b){var k=l[b];t[b]=function(){return k.apply(h,[this].concat(a.call(arguments,0)))}});g.extend(v,{constructor:u,_NodeListCtor:u,toString:function(){return this.join(",")},
_stash:function(a){this._parent=a;return this},on:function(a,b){var k=this.map(function(k){return f(k,a,b)});k.remove=function(){for(var a=0;a<k.length;a++)k[a].remove()};return k},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(b){var k=a.call(this,0),c=l.map(arguments,function(b){return a.call(b,0)});return this._wrap(m.apply(k,c),this)},map:function(a,b){return this._wrap(l.map(this,a,b),this)},forEach:function(a,b){k(this,a,b);return this},filter:function(a){var b=
arguments,k=this,c=0;if("string"==typeof a){k=r._filterResult(this,b[0]);if(1==b.length)return k._stash(this);c=1}return this._wrap(l.filter(k,b[c],b[c+1]),this)},instantiate:function(a,b){var k=g.isFunction(a)?a:g.getObject(a);b=b||{};return this.forEach(function(a){new k(b,a)})},at:function(){var a=new this._NodeListCtor(0);k(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var r=p(c,v);h.query=p(c,function(a){return v(a)});r.load=function(a,
b,k){e.load(a,b,function(a){k(p(a,v))})};h._filterQueryResult=r._filterResult=function(a,b,k){return new v(r.filter(a,b,k))};h.NodeList=r.NodeList=v;return r})},"dojo/selector/_loader":function(){define(["../has","require"],function(h,d){"undefined"!==typeof document&&document.createElement("div");var n;return{load:function(f,l,g,e){if(e&&e.isBuild)g();else{e=d;f="default"==f?h("config-selectorEngine")||"css3":f;f="css2"==f||"lite"==f?"./lite":"css2.1"==f?"./lite":"css3"==f?"./lite":"acme"==f?"./acme":
(e=l)&&f;if("?"==f.charAt(f.length-1)){f=f.substring(0,f.length-1);var c=!0}if(c&&(h("dom-compliant-qsa")||n))return g(n);e([f],function(c){"./lite"!=f&&(n=c);g(c)})}}}})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(h,d){var n=document.createElement("div"),f=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector,l=n.querySelectorAll,g=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g,e=function(g,b){var a=b?b.ownerDocument||
b:d.doc||document,m=(l?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(g);b=b||a;if(m){var k=(h("ie"),null!==b.parentNode&&9!==b.nodeType&&b.parentNode===a);if(m[2]&&k){var q=d.byId?d.byId(m[2],a):a.getElementById(m[2]);if(!q||m[1]&&m[1]!=q.tagName.toLowerCase())return[];if(b!=a)for(g=q;g!=b;)if(g=g.parentNode,!g)return[];return m[3]?e(m[3],q):[q]}if(m[3]&&b.getElementsByClassName)return b.getElementsByClassName(m[4]);if(m[5])if(q=
b.getElementsByTagName(m[5]),m[4]||m[6])g=(m[4]||"")+m[6];else return q}if(l)return 1===b.nodeType&&"object"!==b.nodeName.toLowerCase()?c(b,g,b.querySelectorAll):b.querySelectorAll(g);q||(q=b.getElementsByTagName("*"));m=[];a=0;for(k=q.length;a<k;a++){var f=q[a];1==f.nodeType&&(void 0)(f,g,b)&&m.push(f)}return m},c=function(c,b,a){var m=c,k=c.getAttribute("id"),e=k||"__dojo__",f=c.parentNode,p=/^\s*[+~]/.test(b);if(p&&!f)return[];k?e=e.replace(/'/g,"\\$\x26"):c.setAttribute("id",e);p&&f&&(c=c.parentNode);
b=b.match(g);for(f=0;f<b.length;f++)b[f]="[id\x3d'"+e+"'] "+b[f];b=b.join(",");try{return a.call(c,b)}finally{k||m.removeAttribute("id")}};e.match=f?function(e,b,a){return a&&9!=a.nodeType?c(a,b,function(a){return f.call(e,a)}):f.call(e,b)}:void 0;return e})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(h,d,n,f,l,g,e,c,p){function b(a){return function(b,k,c){return 2==
arguments.length?a["string"==typeof k?"get":"set"](b,k):a.set(b,k,c)}}var a=function(a){return 1==a.length&&"string"==typeof a[0]},m=function(a){var b=a.parentNode;b&&b.removeChild(a)},k=d.NodeList,q=k._adaptWithCondition,v=k._adaptAsForEach,u=k._adaptAsMap;f.extend(k,{_normalize:function(a,b){var k=!0===a.parse;if("string"==typeof a.template){var c=a.templateFunc||h.string&&h.string.substitute;a=c?c(a.template,a):a}c=typeof a;"string"==c||"number"==c?(a=g.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?
f._toArray(a.childNodes):[a]):f.isArrayLike(a)?f.isArray(a)||(a=f._toArray(a)):a=[a];k&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,k,c){if(1==b.nodeType||"only"!=k)for(var m,e=a.length,q=e-1;0<=q;q--){var f=c?this._cloneNode(a[q]):a[q];if(a._runParse&&h.parser&&h.parser.parse)for(m||(m=b.ownerDocument.createElement("div")),m.appendChild(f),h.parser.parse(m),f=m.firstChild;m.firstChild;)m.removeChild(m.firstChild);q==e-1?g.place(f,b,k):b.parentNode.insertBefore(f,
b);b=f}},position:u(e.position),attr:q(b(c),a),style:q(b(p),a),addClass:v(l.add),removeClass:v(l.remove),toggleClass:v(l.toggle),replaceClass:v(l.replace),empty:v(g.empty),removeAttr:v(c.remove),marginBox:u(e.getMarginBox),place:function(a,b){var k=d(a)[0];return this.forEach(function(a){g.place(a,k,b)})},orphan:function(a){return(a?d._filterResult(this,a):this).forEach(m)},adopt:function(a,b){return d(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new k;this.map(function(k){d(a,
k).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,k=this,c=0;if("string"==typeof a){k=d._filterResult(this,b[0]);if(1==b.length)return k._stash(this);c=1}return this._wrap(n.filter(k,b[c],b[c+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var k=0,c;c=this[k];k++)a.length?this._place(a,c,b,0<k):g.empty(c);return this}});return k})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u){h._xhrObj=v._create;var t=h.config;h.objectToQuery=f.objectToQuery;h.queryToObject=f.queryToObject;h.fieldToObject=g.fieldToObject;h.formToObject=g.toObject;h.formToQuery=g.toQuery;h.formToJson=g.toJson;h._blockAsync=!1;var r=h._contentHandlers=h.contentHandlers={text:function(a){return a.responseText},json:function(a){return p.fromJson(a.responseText||null)},"json-comment-filtered":function(a){c.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");
a=a.responseText;var b=a.indexOf("/*"),k=a.lastIndexOf("*/");if(-1==b||-1==k)throw Error("JSON was not comment filtered");return p.fromJson(a.substring(b+2,k))},javascript:function(a){return h.eval(a.responseText)},xml:function(b){var k=b.responseXML;k&&!k.querySelectorAll&&(k=(new DOMParser).parseFromString(b.responseText,"application/xml"));if(d("ie")&&(!k||!k.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];a.some(c,function(a){try{var c=
new ActiveXObject(a);c.async=!1;c.loadXML(b.responseText);k=c}catch(F){return!1}return!0})}return k},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?r["json-comment-filtered"](a):r.json(a)}};r.arraybuffer=r.blob=r.document=function(a,b){return a.response};h._ioSetArgs=function(a,k,c,m){var q={args:a,url:a.url},p=null;if(a.form){var p=l.byId(a.form),d=p.getAttributeNode("action");q.url=q.url||(d?d.value:h.doc?h.doc.URL:null);p=g.toObject(p)}d={};p&&b.mixin(d,
p);a.content&&b.mixin(d,a.content);a.preventCache&&(d["dojo.preventCache"]=(new Date).valueOf());q.query=f.objectToQuery(d);q.handleAs=a.handleAs||"text";var r=new e(function(a){a.canceled=!0;k&&k(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});r.addCallback(c);var v=a.load;v&&b.isFunction(v)&&r.addCallback(function(b){return v.call(a,b,q)});var u=a.error;u&&b.isFunction(u)&&r.addErrback(function(b){return u.call(a,b,q)});var w=a.handle;w&&
b.isFunction(w)&&r.addBoth(function(b){return w.call(a,b,q)});r.addErrback(function(a){return m(a,r)});t.ioPublish&&h.publish&&!1!==q.args.ioPublish&&(r.addCallbacks(function(a){h.publish("/dojo/io/load",[r,a]);return a},function(a){h.publish("/dojo/io/error",[r,a]);return a}),r.addBoth(function(a){h.publish("/dojo/io/done",[r,a]);return a}));r.ioArgs=q;return r};var w=function(a){a=r[a.ioArgs.handleAs](a.ioArgs.xhr,a.ioArgs);return void 0===a?null:a},z=function(a,b){b.ioArgs.args.failOk||console.error(a);
return a},B=function(a){0>=A&&(A=0,t.ioPublish&&h.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&h.publish("/dojo/io/stop"))},A=0;k.after(q,"_onAction",function(){--A});k.after(q,"_onInFlight",B);h._ioCancelAll=q.cancelAll;h._ioNotifyStart=function(a){t.ioPublish&&h.publish&&!1!==a.ioArgs.args.ioPublish&&(A||h.publish("/dojo/io/start"),A+=1,h.publish("/dojo/io/send",[a]))};h._ioWatch=function(a,k,c,m){a.ioArgs.options=a.ioArgs.args;b.mixin(a,{response:a.ioArgs,isValid:function(b){return k(a)},isReady:function(b){return c(a)},
handleResponse:function(b){return m(a)}});q(a);B(a)};h._ioAddQueryToUrl=function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};h.xhr=function(a,b,k){var c,m=h._ioSetArgs(b,function(a){c&&c.cancel()},w,z),e=m.ioArgs;"postData"in b?e.query=b.postData:"putData"in b?e.query=b.putData:"rawBody"in b?e.query=b.rawBody:(2<arguments.length&&!k||-1==="POST|PUT".indexOf(a.toUpperCase()))&&h._ioAddQueryToUrl(e);var q={method:a,handleAs:{arraybuffer:1,blob:1,document:1}[b.handleAs]?
b.handleAs:"text",responseType:b.responseType,timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:e};"undefined"!==typeof b.headers&&(q.headers=b.headers);"undefined"!==typeof b.contentType&&(q.headers||(q.headers={}),q.headers["Content-Type"]=b.contentType);"undefined"!==typeof e.query&&(q.data=e.query);"undefined"!==typeof b.sync&&(q.sync=b.sync);h._ioNotifyStart(m);try{c=v(e.url,q,!0)}catch(P){return m.cancel(),m}m.ioArgs.xhr=c.response.xhr;c.then(function(){m.resolve(m)}).otherwise(function(a){e.error=
a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);m.reject(a)});return m};h.xhrGet=function(a){return h.xhr("GET",a)};h.rawXhrPost=h.xhrPost=function(a){return h.xhr("POST",a,!0)};h.rawXhrPut=h.xhrPut=function(a){return h.xhr("PUT",a,!0)};h.xhrDelete=function(a){return h.xhr("DELETE",a)};h._isDocumentOk=function(a){return u.checkStatus(a.status)};h._getText=function(a){var b;h.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};b.mixin(h.xhr,{_xhrObj:h._xhrObj,
fieldToObject:g.fieldToObject,formToObject:g.toObject,objectToQuery:f.objectToQuery,formToQuery:g.toQuery,formToJson:g.toJson,queryToObject:f.queryToObject,contentHandlers:r,_ioSetArgs:h._ioSetArgs,_ioCancelAll:h._ioCancelAll,_ioNotifyStart:h._ioNotifyStart,_ioWatch:h._ioWatch,_ioAddQueryToUrl:h._ioAddQueryToUrl,_isDocumentOk:h._isDocumentOk,_getText:h._getText,get:h.xhrGet,post:h.xhrPost,put:h.xhrPut,del:h.xhrDelete});return h.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(h){var d=
{};return{objectToQuery:function(n){var f=encodeURIComponent,l=[],g;for(g in n){var e=n[g];if(e!=d[g]){var c=f(g)+"\x3d";if(h.isArray(e))for(var p=0,b=e.length;p<b;++p)l.push(c+f(e[p]));else l.push(c+f(e))}}return l.join("\x26")},queryToObject:function(d){var f=decodeURIComponent;d=d.split("\x26");for(var l={},g,e,c=0,p=d.length;c<p;++c)if(e=d[c],e.length){var b=e.indexOf("\x3d");0>b?(g=f(e),e=""):(g=f(e.slice(0,b)),e=f(e.slice(b+1)));"string"==typeof l[g]&&(l[g]=[l[g]]);h.isArray(l[g])?l[g].push(e):
l[g]=e}return l}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(h,d,n,f){var l={fieldToObject:function(g){var e=null;if(g=d.byId(g)){var c=g.name,f=(g.type||"").toLowerCase();if(c&&f&&!g.disabled)if("radio"==f||"checkbox"==f)g.checked&&(e=g.value);else if(g.multiple)for(e=[],g=[g.firstChild];g.length;)for(c=g.pop();c;c=c.nextSibling)if(1==c.nodeType&&"option"==c.tagName.toLowerCase())c.selected&&e.push(c.value);else{c.nextSibling&&g.push(c.nextSibling);
c.firstChild&&g.push(c.firstChild);break}else e=g.value}return e},toObject:function(g){var e={};g=d.byId(g).elements;for(var c=0,f=g.length;c<f;++c){var b=g[c],a=b.name,m=(b.type||"").toLowerCase();if(a&&m&&0>"file|submit|image|reset|button".indexOf(m)&&!b.disabled){var k=e,q=a,b=l.fieldToObject(b);if(null!==b){var v=k[q];"string"==typeof v?k[q]=[v,b]:h.isArray(v)?v.push(b):k[q]=b}"image"==m&&(e[a+".x"]=e[a+".y"]=e[a].x=e[a].y=0)}}return e},toQuery:function(g){return n.objectToQuery(l.toObject(g))},
toJson:function(g,e){return f.stringify(l.toObject(g),null,e?4:0)}};return l})},"dojo/json":function(){define(["./has"],function(h){return JSON})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(h,d,n,f,l,g,e){var c=function(){},p=Object.freeze||function(){},b=h.Deferred=function(a){function m(a){if(v)throw Error("This deferred has already been resolved");e=a;v=!0;k()}function k(){for(var a;!a&&z;){var b=
z;z=z.next;if(a=b.progress==c)v=!1;var k=r?b.error:b.resolved;l("config-useDeferredInstrumentation")&&r&&d.instrumentRejected&&d.instrumentRejected(e,!!k);if(k)try{var m=k(e);m&&"function"===typeof m.then?m.then(g.hitch(b.deferred,"resolve"),g.hitch(b.deferred,"reject"),g.hitch(b.deferred,"progress")):(k=a&&void 0===m,a&&!k&&(r=m instanceof Error),b.deferred[k&&r?"reject":"resolve"](k?e:m))}catch(D){b.deferred.reject(D)}else r?b.deferred.reject(e):b.deferred.resolve(e)}}var e,v,h,t,r,w,z,B=this.promise=
new n;this.isResolved=B.isResolved=function(){return 0==t};this.isRejected=B.isRejected=function(){return 1==t};this.isFulfilled=B.isFulfilled=function(){return 0<=t};this.isCanceled=B.isCanceled=function(){return h};this.resolve=this.callback=function(a){this.fired=t=0;this.results=[a,null];m(a)};this.reject=this.errback=function(a){r=!0;this.fired=t=1;l("config-useDeferredInstrumentation")&&d.instrumentRejected&&d.instrumentRejected(a,!!z);m(a);this.results=[null,a]};this.progress=function(a){for(var b=
z;b;){var k=b.progress;k&&k(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,c);return this};B.then=this.then=function(a,m,e){var q=e==c?this:new b(B.cancel);a={resolved:a,error:m,progress:e,deferred:q};z?w=w.next=a:z=w=a;v&&k();return q.promise};var A=this;B.cancel=this.cancel=function(){if(!v){var b=a&&a(A);v||(b instanceof Error||(b=new f(b)),b.log=!1,A.reject(b))}h=!0};p(B)};g.extend(b,{addCallback:function(a){return this.addCallbacks(g.hitch.apply(h,arguments))},addErrback:function(a){return this.addCallbacks(null,
g.hitch.apply(h,arguments))},addBoth:function(a){var b=g.hitch.apply(h,arguments);return this.addCallbacks(b,b)},fired:-1});b.when=h.when=e;return b})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./has!config-deferredInstrumentation?./promise/instrumentation"],function(h,d,n,f,l){var g=Object.freeze||function(){},e=function(b,k,e,g,f){h("config-deferredInstrumentation")&&2===k&&a.instrumentRejected&&0===b.length&&a.instrumentRejected(e,!1,
g,f);for(f=0;f<b.length;f++)c(b[f],k,e,g)},c=function(c,k,e,g){var m=c[k],q=c.deferred;if(m)try{var f=m(e);if(0===k)"undefined"!==typeof f&&b(q,k,f);else{if(f&&"function"===typeof f.then){c.cancel=f.cancel;f.then(p(q,1),p(q,2),p(q,0));return}b(q,1,f)}}catch(w){b(q,2,w)}else b(q,k,e);h("config-deferredInstrumentation")&&2===k&&a.instrumentRejected&&a.instrumentRejected(e,!!m,g,q.promise)},p=function(a,k){return function(c){b(a,k,c)}},b=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);
break;case 1:a.resolve(c);break;case 2:a.reject(c)}},a=function(b){var k=this.promise=new f,m=this,p,d,t,r=!1,l=[];h("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(m,a),Error.captureStackTrace(k,a));this.isResolved=k.isResolved=function(){return 1===p};this.isRejected=k.isRejected=function(){return 2===p};this.isFulfilled=k.isFulfilled=function(){return!!p};this.isCanceled=k.isCanceled=function(){return r};this.progress=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");
return k}e(l,0,a,null,m);return k};this.resolve=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");return k}e(l,p=1,d=a,null,m);l=null;return k};var z=this.reject=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");return k}h("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(t={},z);e(l,p=2,d=a,t,m);l=null;return k};this.then=k.then=function(b,m,e){var q=[e,b,m];q.cancel=k.cancel;q.deferred=new a(function(a){return q.cancel&&
q.cancel(a)});p&&!l?c(q,p,d,t):l.push(q);return q.deferred.promise};this.cancel=k.cancel=function(a,k){if(!p){b&&(k=b(a),a="undefined"===typeof k?a:k);r=!0;if(!p)return"undefined"===typeof a&&(a=new n),z(a),a;if(2===p&&d===a)return a}else if(!0===k)throw Error("This deferred has already been fulfilled.");};g(k)};a.prototype.toString=function(){return"[object Deferred]"};l&&l(a);return a})},"dojo/errors/CancelError":function(){define(["./create"],function(h){return h("CancelError",null,null,{dojoType:"cancel",
log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(h){return function(d,n,f,l){f=f||Error;var g=function(e){if(f===Error){Error.captureStackTrace&&Error.captureStackTrace(this,g);var c=Error.call(this,e),p;for(p in c)c.hasOwnProperty(p)&&(this[p]=c[p]);this.message=e;this.stack=c.stack}else f.apply(this,arguments);n&&n.apply(this,arguments)};g.prototype=h.delegate(f.prototype,l);g.prototype.name=d;return g.prototype.constructor=g}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(h){function d(){throw new TypeError("abstract");}return h.extend(function(){},{then:function(h,f,l){d()},cancel:function(h,f){d()},isResolved:function(){d()},isRejected:function(){d()},isFulfilled:function(){d()},isCanceled:function(){d()},always:function(d){return this.then(d,d)},"catch":function(d){return this.then(null,d)},otherwise:function(d){return this.then(null,d)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},
"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(h,d){return function(n,f,l,g){var e=n&&"function"===typeof n.then,c=e&&n instanceof d;if(!e)return 1<arguments.length?f?f(n):n:(new h).resolve(n);c||(e=new h(n.cancel),n.then(e.resolve,e.reject,e.progress),n=e.promise);return f||l||g?n.then(f,l,g):n}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(h,d){h.fromJson=function(d){return eval("("+d+")")};h._escapeString=d.stringify;h.toJsonIndentStr="\t";h.toJson=
function(n,f){return d.stringify(n,function(f,g){return g&&(f=g.__json__||g.json,"function"==typeof f)?f.call(g):g},f&&h.toJsonIndentStr)};return h})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../has!host-browser?../_base/window: ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(h,d,n,f,l,g){function e(){for(var a=+new Date,m=0,k;m<b.length&&(k=b[m]);m++){var e=k.response,g=e.options;k.isCanceled&&k.isCanceled()||
k.isValid&&!k.isValid(e)?(b.splice(m--,1),c._onAction&&c._onAction()):k.isReady&&k.isReady(e)?(b.splice(m--,1),k.handleResponse(e),c._onAction&&c._onAction()):k.startTime&&k.startTime+(g.timeout||0)<a&&(b.splice(m--,1),k.cancel(new d("Timeout exceeded",e)),c._onAction&&c._onAction())}c._onInFlight&&c._onInFlight(k);b.length||(clearInterval(p),p=null)}function c(a){a.response.options.timeout&&(a.startTime=+new Date);a.isFulfilled()||(b.push(a),p||(p=setInterval(e,50)),a.response.options.sync&&e())}
var p=null,b=[];c.cancelAll=function(){try{f.forEach(b,function(a){try{a.cancel(new n("All requests canceled."))}catch(m){}})}catch(a){}};l&&g&&l.doc.attachEvent&&g(l.global,"unload",function(){c.cancelAll()});return c})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(h,d,n,f,l,g,e,c,p){function b(a){return m(a)}function a(a){return void 0!==a.data?a.data:
a.text}h.deepCopy=function(a,b){for(var k in b){var c=a[k],m=b[k];c!==m&&(c&&"object"===typeof c&&m&&"object"===typeof m?m instanceof Date?a[k]=new Date(m):h.deepCopy(c,m):a[k]=m)}return a};h.deepCreate=function(a,b){b=b||{};var k=e.delegate(a),c,m;for(c in a)(m=a[c])&&"object"===typeof m&&(k[c]=h.deepCreate(m,b[c]));return h.deepCopy(k,b)};var m=Object.freeze||function(a){return a};h.deferred=function(k,q,g,p,t,r){var v=new f(function(a){q&&q(v,k);return a&&(a instanceof d||a instanceof n)?a:new n("Request canceled",
k)});v.response=k;v.isValid=g;v.isReady=p;v.handleResponse=t;g=v.then(b).otherwise(function(a){a.response=k;throw a;});h.notify&&g.then(e.hitch(h.notify,"emit","load"),e.hitch(h.notify,"emit","error"));p=g.then(a);t=new c;for(var u in p)p.hasOwnProperty(u)&&(t[u]=p[u]);t.response=g;m(t);r&&v.then(function(a){r.call(v,a)},function(a){r.call(v,k,a)});v.promise=t;v.then=t.then;return v};h.addCommonMethods=function(a,b){g.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=
function(k,c){c=e.delegate(c||{});c.method=b;return a(k,c)}})};h.parseArgs=function(a,b,c){var k=b.data,m=b.query;!k||c||"object"!==typeof k||k instanceof ArrayBuffer||k instanceof Blob||(b.data=l.objectToQuery(k));m?("object"===typeof m&&(m=l.objectToQuery(m)),b.preventCache&&(m+=(m?"\x26":"")+"request.preventCache\x3d"+ +new Date)):b.preventCache&&(m="request.preventCache\x3d"+ +new Date);a&&m&&(a+=(~a.indexOf("?")?"\x26":"?")+m);return{url:a,options:b,getHeader:function(a){return null}}};h.checkStatus=
function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(h){return h("RequestError",function(d,h){this.response=h})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(h,d){return h("RequestTimeoutError",null,d,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(h,d,n,f,l){function g(a,b){var k=
a.xhr;a.status=a.xhr.status;try{a.text=k.responseText}catch(z){}"xml"===a.options.handleAs&&(a.data=k.responseXML);var c;if(b)this.reject(b);else{try{n(a)}catch(z){c=z}f.checkStatus(k.status)?c?this.reject(c):this.resolve(a):(b=c?new h("Unable to load "+a.url+" status: "+k.status+" and an error in handleAs: transformation of response",a):new h("Unable to load "+a.url+" status: "+k.status,a),this.reject(b))}}function e(a){return this.xhr.getResponseHeader(a)}function c(u,t,r){var w=t&&t.data&&t.data instanceof
FormData,z=f.parseArgs(u,f.deepCreate(v,t),w);u=z.url;t=z.options;var n=!t.data&&"POST"!==t.method&&"PUT"!==t.method;10>=l("ie")&&(u=u.split("#")[0]);var A,x=f.deferred(z,k,b,a,g,function(){A&&A()}),C=z.xhr=c._create();if(!C)return x.cancel(new h("XHR was not created")),r?x:x.promise;z.getHeader=e;m&&(A=m(C,x,z,t.uploadProgress));var y="undefined"===typeof t.data?null:t.data,E=!t.sync,D=t.method;try{C.open(D,u,E,t.user||q,t.password||q);t.withCredentials&&(C.withCredentials=t.withCredentials);t.handleAs in
p&&(C.responseType=p[t.handleAs]);var F=t.headers;u=w||n?!1:"application/x-www-form-urlencoded";if(F)for(var L in F)"content-type"===L.toLowerCase()?u=F[L]:F[L]&&C.setRequestHeader(L,F[L]);u&&!1!==u&&C.setRequestHeader("Content-Type",u);F&&"X-Requested-With"in F||C.setRequestHeader("X-Requested-With","XMLHttpRequest");f.notify&&f.notify.emit("send",z,x.promise.cancel);C.send(y)}catch(P){x.reject(P)}d(x);C=null;return r?x:x.promise}l.add("dojo-force-activex-xhr",function(){return 0});var p={blob:"blob",
document:"document",arraybuffer:"arraybuffer"},b,a,m,k;b=function(a){return!this.isFulfilled()};k=function(a,b){b.xhr.abort()};m=function(a,b,k,c){function m(a){b.handleResponse(k)}function e(a){a=new h("Unable to load "+k.url+" status: "+a.target.status,k);b.handleResponse(k,a)}function q(a,c){k.transferType=a;c.lengthComputable?(k.loaded=c.loaded,k.total=c.total,b.progress(k)):3===k.xhr.readyState&&(k.loaded="loaded"in c?c.loaded:c.position,b.progress(k))}function g(a){return q("download",a)}function f(a){return q("upload",
a)}a.addEventListener("load",m,!1);a.addEventListener("error",e,!1);a.addEventListener("progress",g,!1);c&&a.upload&&a.upload.addEventListener("progress",f,!1);return function(){a.removeEventListener("load",m,!1);a.removeEventListener("error",e,!1);a.removeEventListener("progress",g,!1);a.upload.removeEventListener("progress",f,!1);a=null}};var q,v={data:null,query:null,sync:!1,method:"GET"};c._create=function(){throw Error("XMLHTTP not available");};l("dojo-force-activex-xhr")||(c._create=function(){return new XMLHttpRequest});
f.addCommonMethods(c);return c})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../has!dom?../selector/_loader"],function(h,d,n,f){function l(e){var c=g[e.options.handleAs];e.data=c?c(e):e.data||e.text;return e}n=function(e){return e.xhr.response};var g={javascript:function(e){return d.eval(e.text||"")},json:function(e){return h.parse(e.text||null)},xml:void 0,blob:n,arraybuffer:n,document:n};l.register=function(e,c){g[e]=c};return l})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),
function(h,d,n,f,l,g,e,c,p){var b=n.mixin,a={},m=a._Line=function(a,b){this.start=a;this.end=b};m.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var k=a.Animation=function(a){b(this,a);n.isArray(this.curve)&&(this.curve=new m(this.curve[0],this.curve[1]))};k.prototype=new f;n.extend(k,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){b=b||[];if(this[a])if(d.debugAtAllCosts)this[a].apply(this,
b);else try{this[a].apply(this,b)}catch(B){console.error("exception in animation handler for:",a),console.error(B)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);a=a||this.delay;b=n.hitch(this,"_play",b);if(0<a)return this._delayTimer=setTimeout(b,a),this;b();return this},_play:function(a){this._delayTimer&&this._clearTimer();
this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);
return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=
(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},
_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var q=0,v=null,u={run:function(){}};n.extend(k,{_startTimer:function(){this._timer||(this._timer=g.after(u,"run",n.hitch(this,"_cycle"),!0),q++);v||(v=setInterval(n.hitch(u,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,q--);0>=q&&(clearInterval(v),v=null,q=0)}});var t=e("ie")?function(a){var b=a.style;b.width.length||"auto"!=p.get(a,"width")||(b.width="auto")}:function(){};
a._fade=function(k){k.node=c.byId(k.node);var m=b({properties:{}},k);k=m.properties.opacity={};k.start="start"in m?m.start:function(){return+p.get(m.node,"opacity")||0};k.end=m.end;k=a.animateProperty(m);g.after(k,"beforeBegin",n.partial(t,m.node),!0);return k};a.fadeIn=function(k){return a._fade(b({end:1},k))};a.fadeOut=function(k){return a._fade(b({end:0},k))};a._defaultEasing=function(a){return.5+Math.sin((a+1.5)*Math.PI)/2};var r=function(a){this._properties=a;for(var b in a){var k=a[b];k.start instanceof
l&&(k.tempColor=new l)}};r.prototype.getValue=function(a){var b={},k;for(k in this._properties){var c=this._properties[k],m=c.start;m instanceof l?b[k]=l.blendColors(m,c.end,a,c.tempColor).toCss():n.isArray(m)||(b[k]=(c.end-m)*a+m+("opacity"!=k?c.units||"px":0))}return b};a.animateProperty=function(a){var m=a.node=c.byId(a.node);a.easing||(a.easing=h._defaultEasing);a=new k(a);g.after(a,"beforeBegin",n.hitch(a,function(){var a={},k;for(k in this.properties){var c=function(a,b){var k={height:a.offsetHeight,
width:a.offsetWidth}[b];if(void 0!==k)return k;k=p.get(a,b);return"opacity"==b?+k:q?k:parseFloat(k)};if("width"==k||"height"==k)this.node.display="block";var e=this.properties[k];n.isFunction(e)&&(e=e(m));e=a[k]=b({},n.isObject(e)?e:{end:e});n.isFunction(e.start)&&(e.start=e.start(m));n.isFunction(e.end)&&(e.end=e.end(m));var q=0<=k.toLowerCase().indexOf("color");"end"in e?"start"in e||(e.start=c(m,k)):e.end=c(m,k);q?(e.start=new l(e.start),e.end=new l(e.end)):e.start="opacity"==k?+e.start:parseFloat(e.start)}this.curve=
new r(a)}),!0);g.after(a,"onAnimate",n.hitch(p,"set",a.node),!0);return a};a.anim=function(b,c,m,e,q,g){return a.animateProperty({node:b,duration:m||k.prototype.duration,properties:c,easing:e,onEnd:q}).play(g||0)};b(h,a);h._Animation=k;return a})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(h,d,n,f){var l=h.Color=function(g){g&&this.setColor(g)};l.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,
0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:f.transparentColor||[0,0,0,0]};d.extend(l,{r:255,g:255,b:255,a:1,_set:function(g,e,c,f){this.r=g;this.g=e;this.b=c;this.a=f},setColor:function(g){d.isString(g)?l.fromString(g,this):d.isArray(g)?l.fromArray(g,this):(this._set(g.r,g.g,g.b,g.a),g instanceof l||this.sanitize());return this},sanitize:function(){return this},
toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+n.map(["r","g","b"],function(g){g=this[g].toString(16);return 2>g.length?"0"+g:g},this).join("")},toCss:function(g){var e=this.r+", "+this.g+", "+this.b;return(g?"rgba("+e+", "+this.a:"rgb("+e)+")"},toString:function(){return this.toCss(!0)}});l.blendColors=h.blendColors=function(g,e,c,f){f=f||new l;f.r=Math.round(g.r+(e.r-g.r)*c);f.g=Math.round(g.g+(e.g-g.g)*c);f.b=Math.round(g.b+
(e.b-g.b)*c);f.a=g.a+(e.a-g.a)*c;return f.sanitize()};l.fromRgb=h.colorFromRgb=function(g,e){return(g=g.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&l.fromArray(g[1].split(/\s*,\s*/),e)};l.fromHex=h.colorFromHex=function(g,e){var c=e||new l,f=4==g.length?4:8,b=(1<<f)-1;g=Number("0x"+g.substr(1));if(isNaN(g))return null;n.forEach(["b","g","r"],function(a){var m=g&b;g>>=f;c[a]=4==f?17*m:m});c.a=1;return c};l.fromArray=h.colorFromArray=function(g,e){e=e||new l;e._set(Number(g[0]),Number(g[1]),Number(g[2]),
Number(g[3]));isNaN(e.a)&&(e.a=1);return e.sanitize()};l.fromString=h.colorFromString=function(g,e){var c=l.named[g];return c&&l.fromArray(c,e)||l.fromRgb(g,e)||l.fromHex(g,e)};return l})},"dojo/request":function(){define(["./request/default!"],function(h){return h})},"dojo/request/default":function(){define(["exports","require","../has"],function(h,d,n){var f=n("config-requestProvider"),l;if(n("host-browser")||n("host-webworker"))l="./xhr";f||(f=l);h.getPlatformDefaultId=function(){return l};h.load=
function(g,e,c,p){d(["platform"==g?l:f],function(b){c(b)})}})},"esri/Map":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Basemap ./Ground ./core/Accessor ./core/CollectionFlattener ./core/Evented ./core/Logger ./core/accessorSupport/decorators ./support/basemapUtils ./support/groundUtils ./support/LayersMixin".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k,q){var v=b.getLogger("esri.Map");return function(b){function e(a){a=b.call(this)||this;
a.basemap=null;a.ground=new g;a._basemapCache=m.createCache();return a}n(e,b);Object.defineProperty(e.prototype,"allLayers",{get:function(){return new c({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(a){return a.layers}})},enumerable:!0,configurable:!0});e.prototype.castBasemap=function(a){return m.ensureType(a,this._basemapCache)};e.prototype.castGround=function(a){a=k.ensureType(a);return a?a:(v.error("Map.ground may not be set to null or undefined"),
this._get("ground"))};f([a.property({readOnly:!0})],e.prototype,"allLayers",null);f([a.property({type:l})],e.prototype,"basemap",void 0);f([a.cast("basemap")],e.prototype,"castBasemap",null);f([a.property({type:g})],e.prototype,"ground",void 0);f([a.cast("ground")],e.prototype,"castGround",null);return e=f([a.subclass("esri.Map")],e)}(a.declared(e,p,q))})},"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(h,d){return function(d,f){d.__bases__=f.__bases__}})},
"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(h,d,n,f){var l=arguments.length,g=3>l?d:null===f?f=Object.getOwnPropertyDescriptor(d,n):f,e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(h,d,n,f);else for(var c=h.length-1;0<=c;c--)if(e=h[c])g=(3>l?e(g):3<l?e(d,n,g):e(d,n))||g;return 3<l&&g&&Object.defineProperty(d,n,g),g}})},"esri/Basemap":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/asyncUtils ./core/Collection ./core/collectionUtils ./core/Evented ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators ./layers/Layer ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B){var A=0,x=e.ofType(r),C=q.getLogger("esri.Basemap");return function(b){function m(a){var k=b.call(this)||this;k.id=null;k.portalItem=null;k.thumbnailUrl=null;k.title="Basemap";k.id=Date.now().toString(16)+"-basemap-"+A++;k.baseLayers=new x;k.referenceLayers=new x;var c=function(a){a.parent&&a.parent!==k&&"remove"in a.parent&&a.parent.remove(a);a.parent=k;"elevation"===a.type&&C.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as a basemap layer and will therefore be ignored.")};
k.baseLayers.on("after-add",function(a){return c(a.item)});k.referenceLayers.on("after-add",function(a){return c(a.item)});k.baseLayers.on("after-remove",function(a){a.item.parent=null});k.referenceLayers.on("after-remove",function(a){a.item.parent=null});return k}f(m,b);e=m;m.prototype.initialize=function(){var a=this;this.when().catch(function(b){C.error("#load()","Failed to load basemap (title: '"+a.title+"', id: '"+a.id+"')",b)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};
m.prototype.normalizeCtorArgs=function(a){a&&"resourceInfo"in a&&(this._set("resourceInfo",a.resourceInfo),a=n({},a),delete a.resourceInfo);return a};Object.defineProperty(m.prototype,"baseLayers",{set:function(a){this._set("baseLayers",c.referenceSetter(a,this._get("baseLayers"),x))},enumerable:!0,configurable:!0});m.prototype.writeBaseLayers=function(a,b,k,c){var m=[];a&&(c=n({},c,{layerContainerType:"basemap"}),this.baseLayers.forEach(function(a){if(a.write){var b={};a.write(b,c)&&m.push(b)}}),
this.referenceLayers.forEach(function(a){if(a.write){var b={isReference:!0};a.write(b,c)&&m.push(b)}}));b[k]=m};Object.defineProperty(m.prototype,"referenceLayers",{set:function(a){this._set("referenceLayers",c.referenceSetter(a,this._get("referenceLayers"),x))},enumerable:!0,configurable:!0});m.prototype.writeTitle=function(a,b){b.title=a||"Basemap"};m.prototype.load=function(){this.addResolvingPromise(this._loadFromSource());return this.when()};m.prototype.loadAll=function(){var a=this;return g.safeCast(k.loadAll(this,
function(b){b(a.baseLayers,a.referenceLayers)}))};m.prototype.clone=function(){var a={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};this.loaded&&(a.loadStatus="loaded");return(new e({resourceInfo:this.resourceInfo})).set(a)};m.prototype.read=function(a,b){this.resourceInfo||this._set("resourceInfo",{data:a,context:b});return this.inherited(arguments)};m.prototype.write=function(b,k){b=b||{};k&&k.origin||(k=n({origin:"web-map"},
k));this.inherited(arguments,[b,k]);!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(b.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(function(b){b=a.clone(b);b.url&&u.isProtocolRelative(b.url)&&(b.url="https:"+b.url);b.templateUrl&&u.isProtocolRelative(b.templateUrl)&&(b.templateUrl="https:"+b.templateUrl);return b}));return b};m.prototype._loadFromSource=function(){var a=this.resourceInfo,b=this.portalItem;return a?this._loadLayersFromJSON(a.data,a.context?a.context.url:
null):b?this._loadFromItem(b):v.resolve(null)};m.prototype._loadLayersFromJSON=function(a,b){var k=this,c=this.resourceInfo&&this.resourceInfo.context,m=this.portalItem&&this.portalItem.portal||c&&c.portal||null,e=c&&"web-scene"===c.origin?"web-scene":"web-map";return v.create(function(a){return h(["./portal/support/layersCreator"],a)}).then(function(c){var q=[];if(a.baseMapLayers&&Array.isArray(a.baseMapLayers)){var g={context:{origin:e,url:b,portal:m,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},
f=c.populateOperationalLayers(k.baseLayers,a.baseMapLayers.filter(function(a){return!a.isReference}),g);q.push.apply(q,f);c=c.populateOperationalLayers(k.referenceLayers,a.baseMapLayers.filter(function(a){return a.isReference}),g);q.push.apply(q,c)}return v.eachAlways(q)}).then(function(){})};m.prototype._loadFromItem=function(a){var b=this;return a.load().then(function(a){return a.fetchData()}).then(function(k){var c=u.urlToObject(a.itemUrl);b._set("resourceInfo",{data:k.baseMap,context:{origin:"web-map",
portal:a.portal||w.getDefault(),url:c}});b.read(b.resourceInfo.data,b.resourceInfo.context);b.read({title:a.title,thumbnailUrl:a.thumbnailUrl},{origin:"portal-item",portal:a.portal||w.getDefault(),url:c});return b._loadLayersFromJSON(b.resourceInfo.data,c)})};m.fromId=function(a){return(a=B[a])?e.fromJSON(a):null};var e;l([t.property({type:x,json:{write:{ignoreOrigin:!0,target:"baseMapLayers"}}}),t.cast(c.castForReferenceSetter)],m.prototype,"baseLayers",null);l([t.writer("baseLayers")],m.prototype,
"writeBaseLayers",null);l([t.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],m.prototype,"id",void 0);l([t.property({type:z})],m.prototype,"portalItem",void 0);l([t.property({type:x}),t.cast(c.castForReferenceSetter)],m.prototype,"referenceLayers",null);l([t.property({readOnly:!0})],m.prototype,"resourceInfo",void 0);l([t.property()],m.prototype,"thumbnailUrl",void 0);l([t.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],m.prototype,"title",void 0);l([t.writer("title")],
m.prototype,"writeTitle",null);return m=e=l([t.subclass("esri.Basemap")],m)}(t.declared(b,p,m))})},"esri/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(h){for(var d,n=1,f=arguments.length;n<f;n++){d=arguments[n];for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&(h[l]=d[l])}return h}})},"esri/core/asyncUtils":function(){define(["require","exports","./tsSupport/generatorHelper","./tsSupport/awaiterHelper","./promiseUtils"],function(h,d,n,f,l){Object.defineProperty(d,
"__esModule",{value:!0});d.forEach=function(g,e,c){return l.eachAlways(g.map(function(g,b){return e.apply(c,[g,b])}))};d.map=function(g,e,c){return l.eachAlways(g.map(function(g,b){return e.apply(c,[g,b])})).then(function(c){return c.map(function(b){return b.value})})};d.result=function(g){return g.then(function(e){return{ok:!0,value:e}}).catch(function(e){return{ok:!1,error:e}})};d.assertResult=function(g){if(!0===g.ok)return g.value;throw g.error;};d.safeCast=function(g){return g};d.safeCastCall=
function(g){return g()};d.safeCastReturn=function(g){return g}})},"esri/core/tsSupport/generatorHelper":function(){define([],function(){return function(h,d){function n(b){return function(a){return f([b,a])}}function f(b){if(g)throw new TypeError("Generator is already executing.");for(;l;)try{if(g=1,e&&(c=b[0]&2?e["return"]:b[0]?e["throw"]||((c=e["return"])&&c.call(e),0):e.next)&&!(c=c.call(e,b[1])).done)return c;if(e=0,c)b=[b[0]&2,c.value];switch(b[0]){case 0:case 1:c=b;break;case 4:return l.label++,
{value:b[1],done:!1};case 5:l.label++;e=b[1];b=[0];continue;case 7:b=l.ops.pop();l.trys.pop();continue;default:if(!(c=l.trys,c=0<c.length&&c[c.length-1])&&(6===b[0]||2===b[0])){l=0;continue}if(3===b[0]&&(!c||b[1]>c[0]&&b[1]<c[3]))l.label=b[1];else if(6===b[0]&&l.label<c[1])l.label=c[1],c=b;else if(c&&l.label<c[2])l.label=c[2],l.ops.push(b);else{c[2]&&l.ops.pop();l.trys.pop();continue}}b=d.call(h,l)}catch(a){b=[6,a],e=0}finally{g=c=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}var l=
{label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},g,e,c,p;return p={next:n(0),"throw":n(1),"return":n(2)},"function"===typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p}})},"esri/core/tsSupport/awaiterHelper":function(){define(["../promiseUtils"],function(h){function d(d){return d&&"function"===typeof d.then?d:h.resolve(d)}return function(n,f,l,g){var e=null;return h.create(function(c,p){function b(a){try{m(g.next(a))}catch(q){p(q)}}function a(a){try{m(g["throw"](a))}catch(q){p(q)}}
function m(k){k.done?(e=d(k.value),e.then(c,p)):(e=d(k.value),e.then(b,a))}m((g=g.apply(n,f||[])).next())},function(c){e&&e.cancel(c)})}})},"esri/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all","./Error"],function(h,d,n,f,l){function g(a,c){var k=new n(c);a(function(a){return b(a).then(k.resolve)},k.reject);return k.promise}function e(a){if(a){if("function"!==typeof a.forEach){var b=Object.keys(a),k=b.map(function(b){return a[b]});return e(k).then(function(a){var k=
{};b.forEach(function(b,c){return k[b]=a[c]});return k})}var c=null;return g(function(b,k){var m=[],e=a.length;0===e&&b(m);a.forEach(function(a){var q={promise:a};m.push(q);a.then(function(a){q.value=a}).catch(function(a){q.error=a}).then(function(){--e;0===e&&(c?k(new l("AbortError",c)):b(m))})})},function(b){c=b||"Invocation cancellation";a.forEach(function(a){return a.cancel(b)})})}}function c(a){void 0===a&&(a=void 0);var b=new n;b.resolve(a);return b.promise}function p(a){return a&&"function"===
typeof a.then}function b(a){return p(a)?a:c(a)}Object.defineProperty(d,"__esModule",{value:!0});d.all=function(a){return f(a)};d.filter=function(a,b){var k=a.slice();return f(a.map(function(a,k){return b(a,k)})).then(function(a){return k.filter(function(b,k){return a[k]})})};d.create=g;d.createDeferred=function(a){var b=null;a=g(function(a,c){b={resolve:a,reject:c}},a);b.promise=a;b.cancel=function(){var a=new l("AbortError","AbortError");a.dojoType="cancel";b.reject(a)};return b};d.eachAlways=e;
d.eachAlwaysValues=function(a){return e(a).then(function(a){return a.filter(function(a){return!!a.value}).map(function(a){return a.value})})};d.first=function(a){return a&&a.length?g(function(b,k){for(var c=0;c<a.length;c++)a[c].then(b,k)}):c()};d.reject=function(a){var b=new n;b.reject(a);return b.promise};d.resolve=c;d.after=function(a,b){void 0===b&&(b=void 0);var k=0;return g(function(c){k=setTimeout(function(){c(b)},a)},function(){k&&(clearTimeout(k),k=0)})};d.timeout=function(a,b,k){var c=0,
m=new n(a.cancel);a.then(function(a){m.isFulfilled()||(m.resolve(a),c&&(clearTimeout(c),c=0))});a.catch(function(a){m.isFulfilled()||(m.reject(a),c&&(clearTimeout(c),c=0))});c=setTimeout(function(){var a=k||new l("promiseUtils:timeout","The wrapped promise did not resolve within "+b+" ms");m.reject(a)},b);return m.promise};d.wrapCallback=function(a){var b=!1;return g(function(){a(function(a){b||c(a)})},function(){return b=!0})};d.isThenable=p;d.when=b;d.createResolver=function(a){var b,k;a=g(function(a,
c){b=a;k=c},a);var c=function(a){b(a)};c.resolve=function(a){return b(a)};c.reject=function(a){return k(a)};c.promise=a;return c}})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(h,d,n,f){var l=h.some;return function(g){var e,c;d.isArray(g)?c=g:g&&"object"===typeof g&&(e=g);var p,b=[];if(e){c=[];for(var a in e)Object.hasOwnProperty.call(e,a)&&(b.push(a),c.push(e[a]));p={}}else c&&(p=[]);if(!c||!c.length)return(new n).resolve(p);var m=new n;
m.promise.always(function(){p=b=null});var k=c.length;l(c,function(a,c){e||b.push(c);f(a,function(a){m.isFulfilled()||(p[b[c]]=a,0===--k&&m.resolve(p))},m.reject);return m.isFulfilled()});return m.promise}})},"esri/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(h,d,n,f,l){h=function(g){function e(c,f,b){var a=g.call(this,c,f,b)||this;return a instanceof e?a:new e(c,f,b)}n(e,g);e.prototype.toJSON=function(){return{name:this.name,message:this.message,
details:f.clone(this.details),dojoType:this.dojoType}};e.fromJSON=function(c){var g=new e(c.name,c.message,c.details);null!=c.dojoType&&(g.dojoType=c.dojoType);return g};return e}(l);h.prototype.type="error";return h})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,n){function f(){this.constructor=
d}h(d,n);d.prototype=null===n?Object.create(n):(f.prototype=n.prototype,new f)}}()})},"esri/core/lang":function(){define(["./global","dojo/date","dojo/number","dojo/date/locale","dojo/i18n!../nls/common"],function(h,d,n,f,l){function g(a,b,c){var k,m,e={};for(k in b){m=b[k];var q=!(k in e)||e[k]!==m;if(!(k in a)||a[k]!==m&&q)a[k]=c?c(m):m}return a}function e(a,c,e){var k=e.match(/([^\(]+)(\([^\)]+\))?/i),q=k[1].trim();e=c[a];var k=JSON.parse((k[2]?k[2].trim():"{}").replace(/^\(/,"{").replace(/\)$/,
"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),g=k.utcOffset;if(-1===b.indexOf(q)){var p;a:{q=q.split(".");g=void 0;g=h;try{for(var v=0;v<q.length;v++){var l=q[v];if(!(l in g)){p=void 0;break a}g=g[l]}p=g;break a}catch(A){}p=void 0}"function"===typeof p&&(e=p(e,a,c,k))}else if("number"===typeof e||"string"===typeof e&&e&&!isNaN(Number(e)))switch(e=Number(e),q){case "NumberFormat":a=m.mixin({},k);c=parseFloat(a.places);if(isNaN(c)||
0>c)a.places=Infinity;return n.format(e,a);case "DateString":e=new Date(e);if(k.local||k.systemLocale)return k.systemLocale?e.toLocaleDateString()+(k.hideTime?"":" "+e.toLocaleTimeString()):e.toDateString()+(k.hideTime?"":" "+e.toTimeString());e=e.toUTCString();k.hideTime&&(e=e.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return e;case "DateFormat":return e=new Date(e),null!=g&&(e=d.add(e,"minute",e.getTimezoneOffset()-g)),f.format(e,k)}return null!=e?e:""}function c(a,b){var k;if(b)for(k in a)a.hasOwnProperty(k)&&
(void 0===a[k]?delete a[k]:a[k]instanceof Object&&c(a[k],!0));else for(k in a)a.hasOwnProperty(k)&&void 0===a[k]&&delete a[k];return a}function p(a){return a&&"object"==typeof a&&"function"!==typeof a?a instanceof Int8Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Date?new a.constructor(a):a instanceof ArrayBuffer?
a.slice(0,a.byteLength):"function"===typeof a.clone?a.clone():"function"===typeof a.map&&"function"===typeof a.forEach?a.map(p):"function"===typeof a.notifyChange&&"function"===typeof a.watch?a.clone():g({},a,p):a}var b=["NumberFormat","DateString","DateFormat"],a=/<\/?[^>]+>/g,m={equals:function(a,b){return a===b||"number"===typeof a&&isNaN(a)&&"number"===typeof b&&isNaN(b)||"function"===typeof(a||{}).getTime&&"function"===typeof(b||{}).getTime&&a.getTime()==b.getTime()||"function"===typeof(a||{}).equals&&
a.equals(b)||"function"===typeof(b||{}).equals&&b.equals(a)||!1},mixin:function(a){a||(a={});for(var b=1,c=arguments.length;b<c;b++)g(a,arguments[b]);return a},valueOf:function(a,b){for(var c in a)if(a[c]==b)return c;return null},stripTags:function(b){if(b){var c=typeof b;if("string"===c)b=b.replace(a,"");else if("object"===c)for(var k in b)(c=b[k])&&"string"===typeof c&&(c=c.replace(a,"")),b[k]=c}return b},substitute:function(a,b,c){var k,m,q;null!=c&&("object"===typeof c?(k=c.first,m=c.dateFormat,
q=c.numberFormat):k=c);if(b&&"{*}"!==b)return b.replace(/\{([^\}]+)\}/g,function(a,b){a=b.split(":");if(1<a.length)return b=a[0],a.shift(),e(b,this.obj,a.join(":"));if(m&&-1!==(m.properties||[]).indexOf(b))return e(b,this.obj,m.formatter||"DateString");if(q&&-1!==(q.properties||[]).indexOf(b))return e(b,this.obj,q.formatter||"NumberFormat");b=this.obj[b];return null!=b?b:""}.bind({obj:a}));b=[];var g;b.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+l.fieldsSummary+'"\x3e\x3ctbody\x3e');
for(g in a)if(c=a[g],m&&-1!==(m.properties||[]).indexOf(g)?c=e(g,a,m.formatter||"DateString"):q&&-1!==(q.properties||[]).indexOf(g)&&(c=e(g,a,q.formatter||"NumberFormat")),b.push("\x3ctr\x3e\x3cth\x3e"+g+"\x3c/th\x3e\x3ctd\x3e"+(null!=c?c:"")+"\x3c/td\x3e\x3c/tr\x3e"),k)break;b.push("\x3c/tbody\x3e\x3c/table\x3e");return b.join("")},filter:function(a,b,c){b=["string"===typeof a?a.split(""):a,c||h,"string"===typeof b?new Function("item","index","array",b):b];c={};var k;a=b[0];for(k in a)b[2].call(b[k],
a[k],k,a)&&(c[k]=a[k]);return c},startsWith:function(a,b,c){c=c||0;return a.indexOf(b,c)===c},endsWith:function(a,b,c){if("number"!==typeof c||!isFinite(c)||Math.floor(c)!==c||c>a.length)c=a.length;c-=b.length;a=a.indexOf(b,c);return-1!==a&&a===c},fixJson:c,clone:p};return m})},"esri/core/global":function(){define(["require","exports"],function(h,d){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global}()})},
"dojo/date":function(){define(["./has","./_base/lang"],function(h,d){var n={getDaysInMonth:function(f){var d=f.getMonth();return 1==d&&n.isLeapYear(f)?29:[31,28,31,30,31,30,31,31,30,31,30,31][d]},isLeapYear:function(f){f=f.getFullYear();return!(f%400)||!(f%4)&&!!(f%100)},getTimezoneName:function(f){var d=f.toString(),g="",e=d.indexOf("(");if(-1<e)g=d.substring(++e,d.indexOf(")"));else if(e=/([A-Z\/]+) \d{4}$/,d=d.match(e))g=d[1];else if(d=f.toLocaleString(),e=/ ([A-Z\/]+)$/,d=d.match(e))g=d[1];return"AM"==
g||"PM"==g?"":g},compare:function(f,d,g){f=new Date(+f);d=new Date(+(d||new Date));"date"==g?(f.setHours(0,0,0,0),d.setHours(0,0,0,0)):"time"==g&&(f.setFullYear(0,0,0),d.setFullYear(0,0,0));return f>d?1:f<d?-1:0},add:function(f,d,g){var e=new Date(+f),c=!1,p="Date";switch(d){case "day":break;case "weekday":var b;(d=g%5)?b=parseInt(g/5):(d=0<g?5:-5,b=0<g?(g-5)/5:(g+5)/5);var a=f.getDay(),m=0;6==a&&0<g?m=1:0==a&&0>g&&(m=-1);a+=d;if(0==a||6==a)m=0<g?2:-2;g=7*b+d+m;break;case "year":p="FullYear";c=!0;
break;case "week":g*=7;break;case "quarter":g*=3;case "month":c=!0;p="Month";break;default:p="UTC"+d.charAt(0).toUpperCase()+d.substring(1)+"s"}if(p)e["set"+p](e["get"+p]()+g);c&&e.getDate()<f.getDate()&&e.setDate(0);return e},difference:function(f,d,g){d=d||new Date;g=g||"day";var e=d.getFullYear()-f.getFullYear(),c=1;switch(g){case "quarter":f=f.getMonth();d=d.getMonth();c=Math.floor(d/3)+1+4*e-(Math.floor(f/3)+1);break;case "weekday":e=Math.round(n.difference(f,d,"day"));g=parseInt(n.difference(f,
d,"week"));if(0==e%7)e=5*g;else{var c=0,p=f.getDay(),b=d.getDay();g=parseInt(e/7);d=e%7;f=new Date(f);f.setDate(f.getDate()+7*g);f=f.getDay();if(0<e)switch(!0){case 6==p:c=-1;break;case 0==p:c=0;break;case 6==b:c=-1;break;case 0==b:c=-2;break;case 5<f+d:c=-2}else if(0>e)switch(!0){case 6==p:c=0;break;case 0==p:c=1;break;case 6==b:c=2;break;case 0==b:c=1;break;case 0>f+d:c=2}e=e+c-2*g}c=e;break;case "year":c=e;break;case "month":c=d.getMonth()-f.getMonth()+12*e;break;case "week":c=parseInt(n.difference(f,
d,"day")/7);break;case "day":c/=24;case "hour":c/=60;case "minute":c/=60;case "second":c/=1E3;case "millisecond":c*=d.getTime()-f.getTime()}return Math.round(c)}};d.mixin(d.getObject("dojo.date",!0),n);return n})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(h,d,n,f,l){var g={};h.setObject("dojo.number",g);g.format=function(c,e){e=h.mixin({},e||{});var b=d.normalizeLocale(e.locale),b=d.getLocalization("dojo.cldr","number",b);e.customs=
b;b=e.pattern||b[(e.type||"decimal")+"Format"];return isNaN(c)||Infinity==Math.abs(c)?null:g._applyPattern(c,b,e)};g._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;g._applyPattern=function(c,e,b){b=b||{};var a=b.customs.group,m=b.customs.decimal;e=e.split(";");var k=e[0];e=e[0>c?1:0]||"-"+k;if(-1!=e.indexOf("%"))c*=100;else if(-1!=e.indexOf("\u2030"))c*=1E3;else if(-1!=e.indexOf("\u00a4"))a=b.customs.currencyGroup||a,m=b.customs.currencyDecimal||m,e=e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(a,
c,k,e){return(a=b[["symbol","currency","displayName"][k.length-1]]||b.currency||"")?c+a+e:""});else if(-1!=e.indexOf("E"))throw Error("exponential notation not supported");var q=g._numberPatternRE,k=k.match(q);if(!k)throw Error("unable to find a number expression in pattern: "+e);!1===b.fractional&&(b.places=0);return e.replace(q,g._formatAbsolute(c,k[0],{decimal:m,group:a,places:b.places,round:b.round}))};g.round=function(c,e,b){b=10/(b||10);return(b*+c).toFixed(e)/b};if(0==(.9).toFixed()){var e=
g.round;g.round=function(c,g,b){var a=Math.pow(10,-g||0),m=Math.abs(c);if(!c||m>=a)a=0;else if(m/=a,.5>m||.95<=m)a=0;return e(c,g,b)+(0<c?a:-a)}}g._formatAbsolute=function(c,e,b){b=b||{};!0===b.places&&(b.places=0);Infinity===b.places&&(b.places=6);e=e.split(".");var a="string"==typeof b.places&&b.places.indexOf(","),m=b.places;a?m=b.places.substring(a+1):0<=m||(m=(e[1]||[]).length);0>b.round||(c=g.round(c,m,b.round));c=String(Math.abs(c)).split(".");var k=c[1]||"";e[1]||b.places?(a&&(b.places=b.places.substring(0,
a)),a=void 0!==b.places?b.places:e[1]&&e[1].lastIndexOf("0")+1,a>k.length&&(c[1]=f.pad(k,a,"0",!0)),m<k.length&&(c[1]=k.substr(0,m))):c[1]&&c.pop();m=e[0].replace(",","");a=m.indexOf("0");-1!=a&&(a=m.length-a,a>c[0].length&&(c[0]=f.pad(c[0],a)),-1==m.indexOf("#")&&(c[0]=c[0].substr(c[0].length-a)));var m=e[0].lastIndexOf(","),q,d;-1!=m&&(q=e[0].length-m-1,e=e[0].substr(0,m),m=e.lastIndexOf(","),-1!=m&&(d=e.length-m-1));e=[];for(m=c[0];m;)a=m.length-q,e.push(0<a?m.substr(a):m),m=0<a?m.slice(0,a):"",
d&&(q=d,d=void 0);c[0]=e.reverse().join(b.group||",");return c.join(b.decimal||".")};g.regexp=function(c){return g._parseInfo(c).regexp};g._parseInfo=function(c){c=c||{};var e=d.normalizeLocale(c.locale),e=d.getLocalization("dojo.cldr","number",e),b=c.pattern||e[(c.type||"decimal")+"Format"],a=e.group,m=e.decimal,k=1;if(-1!=b.indexOf("%"))k/=100;else if(-1!=b.indexOf("\u2030"))k/=1E3;else{var q=-1!=b.indexOf("\u00a4");q&&(a=e.currencyGroup||a,m=e.currencyDecimal||m)}e=b.split(";");1==e.length&&e.push("-"+
e[0]);e=l.buildGroupRE(e,function(b){b="(?:"+l.escapeString(b,".")+")";return b.replace(g._numberPatternRE,function(b){var e={signed:!1,separator:c.strict?a:[a,""],fractional:c.fractional,decimal:m,exponent:!1};b=b.split(".");var q=c.places;1==b.length&&1!=k&&(b[1]="###");1==b.length||0===q?e.fractional=!1:(void 0===q&&(q=c.pattern?b[1].lastIndexOf("0")+1:Infinity),q&&void 0==c.fractional&&(e.fractional=!0),!c.places&&q<b[1].length&&(q+=","+b[1].length),e.places=q);b=b[0].split(",");1<b.length&&(e.groupSize=
b.pop().length,1<b.length&&(e.groupSize2=b.pop().length));return"("+g._realNumberRegexp(e)+")"})},!0);q&&(e=e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,b,k,e){a=l.escapeString(c[["symbol","currency","displayName"][k.length-1]]||c.currency||"");if(!a)return"";b=b?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return c.strict?b+a+e:(b&&(b+="*"),e&&(e+="*"),"(?:"+b+a+e+")?")}));return{regexp:e.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:a,decimal:m,factor:k}};g.parse=function(c,e){e=g._parseInfo(e);
c=(new RegExp("^"+e.regexp+"$")).exec(c);if(!c)return NaN;var b=c[1];if(!c[1]){if(!c[2])return NaN;b=c[2];e.factor*=-1}b=b.replace(new RegExp("["+e.group+"\\s\\xa0]","g"),"").replace(e.decimal,".");return b*e.factor};g._realNumberRegexp=function(c){c=c||{};"places"in c||(c.places=Infinity);"string"!=typeof c.decimal&&(c.decimal=".");"fractional"in c&&!/^0/.test(c.places)||(c.fractional=[!0,!1]);"exponent"in c||(c.exponent=[!0,!1]);"eSigned"in c||(c.eSigned=[!0,!1]);var e=g._integerRegexp(c),b=l.buildGroupRE(c.fractional,
function(a){var b="";a&&0!==c.places&&(b="\\"+c.decimal,b=Infinity==c.places?"(?:"+b+"\\d+)?":b+("\\d{"+c.places+"}"));return b},!0),a=l.buildGroupRE(c.exponent,function(a){return a?"([eE]"+g._integerRegexp({signed:c.eSigned})+")":""}),e=e+b;b&&(e="(?:(?:"+e+")|(?:"+b+"))");return e+a};g._integerRegexp=function(c){c=c||{};"signed"in c||(c.signed=[!0,!1]);"separator"in c?"groupSize"in c||(c.groupSize=3):c.separator="";var e=l.buildGroupRE(c.signed,function(a){return a?"[-+]":""},!0),b=l.buildGroupRE(c.separator,
function(a){if(!a)return"(?:\\d+)";a=l.escapeString(a);" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var b=c.groupSize,k=c.groupSize2;return k?(a="(?:0|[1-9]\\d{0,"+(k-1)+"}(?:["+a+"]\\d{"+k+"})*["+a+"]\\d{"+b+"})",0<b-k?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(b-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+a+"]\\d{"+b+"})*)"},!0);return e+b};return g})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./has!host-browser?./_base/xhr ./json module".split(" "),
function(h,d,n,f,l,g,e,c,p){n.add("dojo-preload-i18n-Api",1);e=h.i18n={};var b=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,a=function(a,b,c,k){var e=[c+k];b=b.split("-");for(var m="",q=0;q<b.length;q++)if(m+=(m?"-":"")+b[q],!a||a[m])e.push(c+m+"/"+k),e.specificity=m;return e},m={},k=function(a,b,c){c=c?c.toLowerCase():h.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b},q=h.getL10nName=function(a,b,c){return a=p.id+"!"+k(a,b,c)},v=function(b,c,
k,e,q,f){b([c],function(d){var p=g.clone(d.root||d.ROOT),r=a(!d._v1x&&d,q,k,e);b(r,function(){for(var a=1;a<r.length;a++)p=g.mixin(g.clone(p),arguments[a]);m[c+"/"+q]=p;p.$locale=r.specificity;f()})})},u=function(a){var b=l.extraLocale||[],b=g.isArray(b)?b:[b];b.push(a);return b},t=function(a,k,e){var q=b.exec(a),d=q[1]+"/",p=q[5]||q[4],r=d+p,t=(q=q[5]&&q[4])||h.locale||"",l=r+"/"+t,q=q?[t]:u(t),x=q.length,y=function(){--x||e(g.delegate(m[l]))},t=a.split("*"),C="preload"==t[1];if(n("dojo-preload-i18n-Api")){if(C&&
(m[a]||(m[a]=1,B(t[2],c.parse(t[3]),1,k)),e(1)),(t=C)||(w&&z.push([a,k,e]),t=w&&!m[l]),t)return}else if(C){e(1);return}f.forEach(q,function(a){var b=r+"/"+a;n("dojo-preload-i18n-Api")&&A(b);m[b]?y():v(k,r,d,p,a,y)})};n("dojo-preload-i18n-Api");var r=e.normalizeLocale=function(a){a=a?a.toLowerCase():h.locale;return"root"==a?"ROOT":a},w=0,z=[],B=e._preloadLocalizations=function(a,b,c,k){function e(a,b){k([a],b)}function q(a,b){for(a=a.split("-");a.length;){if(b(a.join("-")))return;a.pop()}b("ROOT")}
function p(){for(--w;!w&&z.length;)t.apply(null,z.shift())}function v(c){c=r(c);q(c,function(r){if(0<=f.indexOf(b,r)){var h=a.replace(/\./g,"/")+"_"+r;w++;e(h,function(a){for(var b in a){var e=a[b],f=b.match(/(.+)\/([^\/]+)$/),h;if(f&&(h=f[2],f=f[1]+"/",e._localized)){var t;if("ROOT"===r){var v=t=e._localized;delete e._localized;v.root=e;m[d.toAbsMid(b)]=v}else t=e._localized,m[d.toAbsMid(f+h+"/"+r)]=e;r!==c&&function(a,b,e,f){var r=[],h=[];q(c,function(c){f[c]&&(r.push(d.toAbsMid(a+c+"/"+b)),h.push(d.toAbsMid(a+
b+"/"+c)))});r.length?(w++,k(r,function(){for(var k=r.length-1;0<=k;k--)e=g.mixin(g.clone(e),arguments[k]),m[h[k]]=e;m[d.toAbsMid(a+b+"/"+c)]=g.clone(e);p()})):m[d.toAbsMid(a+b+"/"+c)]=e}(f,h,e,t)}}p()});return!0}return!1})}k=k||d;v();f.forEach(h.config.extraLocale,v)},A=function(){},A=function(a){for(var b,c=a.split("/"),k=h.global[c[0]],e=1;k&&e<c.length-1;k=k[c[e++]]);k&&((b=k[c[e]])||(b=k[c[e].replace(/-/g,"_")]),b&&(m[a]=b));return b};e.getLocalization=function(a,b,c){var e;a=k(a,b,c);t(a,d,
function(a){e=a});return e};return g.mixin(e,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:t,cache:m,getL10nName:q})})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(h,d){var n=/[&<>'"\/]/g,f={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},l={};d.setObject("dojo.string",l);l.escape=function(g){return g?g.replace(n,function(e){return f[e]}):""};l.rep=function(g,e){if(0>=e||!g)return"";for(var c=
[];;){e&1&&c.push(g);if(!(e>>=1))break;g+=g}return c.join("")};l.pad=function(g,e,c,f){c||(c="0");g=String(g);e=l.rep(c,Math.ceil((e-g.length)/c.length));return f?g+e:e+g};l.substitute=function(g,e,c,f){f=f||h.global;c=c?d.hitch(f,c):function(b){return b};return g.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(b,a,m){if(""==a)return"$";b=d.getObject(a,!1,e);m&&(b=d.getObject(m,!1,f).call(f,b,a));m=c(b,a);if("undefined"===typeof m)throw Error('string.substitute could not find key "'+a+'" in template');
return m.toString()})};l.trim=String.prototype.trim?d.trim:function(g){g=g.replace(/^\s+/,"");for(var e=g.length-1;0<=e;e--)if(/\S/.test(g.charAt(e))){g=g.substring(0,e+1);break}return g};return l})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(h,d){var n={};d.setObject("dojo.regexp",n);n.escapeString=function(f,d){return f.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(g){return d&&-1!=d.indexOf(g)?g:"\\"+g})};n.buildGroupRE=function(f,d,g){if(!(f instanceof Array))return d(f);
for(var e=[],c=0;c<f.length;c++)e.push(d(f[c]));return n.group(e.join("|"),g)};n.group=function(f,d){return"("+(d?"?:":"")+f+")"};return n})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(h,d,n,f,l,g,e,c,p){function b(a,b,c,m){return m.replace(/([a-z])\1*/ig,function(q){var g,d,p=q.charAt(0);q=q.length;var r=["abbr","wide","narrow"];switch(p){case "G":g=b[4>q?"eraAbbr":
"eraNames"][0>a.getFullYear()?0:1];break;case "y":g=a.getFullYear();switch(q){case 1:break;case 2:if(!c.fullYear){g=String(g);g=g.substr(g.length-2);break}default:d=!0}break;case "Q":case "q":g=Math.ceil((a.getMonth()+1)/3);d=!0;break;case "M":case "L":g=a.getMonth();3>q?(g+=1,d=!0):(p=["months","L"==p?"standAlone":"format",r[q-3]].join("-"),g=b[p][g]);break;case "w":g=k._getWeekOfYear(a,0);d=!0;break;case "d":g=a.getDate();d=!0;break;case "D":g=k._getDayOfYear(a);d=!0;break;case "e":case "c":if(g=
a.getDay(),2>q){g=(g-f.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":g=a.getDay();3>q?(g+=1,d=!0):(p=["days","c"==p?"standAlone":"format",r[q-3]].join("-"),g=b[p][g]);break;case "a":p=12>a.getHours()?"am":"pm";g=c[p]||b["dayPeriods-format-wide-"+p];break;case "h":case "H":case "K":case "k":d=a.getHours();switch(p){case "h":g=d%12||12;break;case "H":g=d;break;case "K":g=d%12;break;case "k":g=d||24}d=!0;break;case "m":g=a.getMinutes();d=!0;break;case "s":g=a.getSeconds();d=!0;break;case "S":g=Math.round(a.getMilliseconds()*
Math.pow(10,q-3));d=!0;break;case "v":case "z":if(g=k._getZone(a,!0,c))break;q=4;case "Z":p=k._getZone(a,!1,c);p=[0>=p?"+":"-",e.pad(Math.floor(Math.abs(p)/60),2),e.pad(Math.abs(p)%60,2)];4==q&&(p.splice(0,0,"GMT"),p.splice(3,0,":"));g=p.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+m);}d&&(g=e.pad(g,q));return g})}function a(a,b,c,k){var e=function(a){return a};b=b||e;c=c||e;k=k||e;var m=a.match(/(''|[^'])+/g),q="'"==a.charAt(0);d.forEach(m,function(a,k){a?
(m[k]=(q?c:b)(a.replace(/''/g,"'")),q=!q):m[k]=""});return k(m.join(""))}function m(a,b,c,k){k=g.escapeString(k);c.strict||(k=k.replace(" a"," ?a"));return k.replace(/([a-z])\1*/ig,function(k){var e;e=k.charAt(0);var m=k.length,g="",f="";c.strict?(1<m&&(g="0{"+(m-1)+"}"),2<m&&(f="0{"+(m-2)+"}")):(g="0?",f="0{0,2}");switch(e){case "y":e="\\d{2,4}";break;case "M":case "L":2<m?(e=b["months-"+("L"==e?"standAlone":"format")+"-"+q[m-3]].slice(0).join("|"),c.strict||(e=e.replace(/\./g,""),e="(?:"+e+")\\.?")):
e="1[0-2]|"+g+"[1-9]";break;case "D":e="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+g+"[1-9][0-9]|"+f+"[1-9]";break;case "d":e="3[01]|[12]\\d|"+g+"[1-9]";break;case "w":e="[1-4][0-9]|5[0-3]|"+g+"[1-9]";break;case "E":case "e":case "c":e=".+?";break;case "h":e="1[0-2]|"+g+"[1-9]";break;case "k":e="1[01]|"+g+"\\d";break;case "H":e="1\\d|2[0-3]|"+g+"\\d";break;case "K":e="1\\d|2[0-4]|"+g+"[1-9]";break;case "m":case "s":e="[0-5]\\d";break;case "S":e="\\d{"+m+"}";break;case "a":m=c.am||b["dayPeriods-format-wide-am"];
g=c.pm||b["dayPeriods-format-wide-pm"];e=m+"|"+g;c.strict||(m!=m.toLowerCase()&&(e+="|"+m.toLowerCase()),g!=g.toLowerCase()&&(e+="|"+g.toLowerCase()),-1!=e.indexOf(".")&&(e+="|"+e.replace(/\./g,"")));e=e.replace(/\./g,"\\.");break;default:e=".*"}a&&a.push(k);return"("+e+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var k={};h.setObject(p.id.replace(/\//g,"."),k);k._getZone=function(a,b,c){return b?n.getTimezoneName(a):a.getTimezoneOffset()};k.format=function(c,e){e=e||{};var m=l.normalizeLocale(e.locale),
q=e.formatLength||"short",m=k._getGregorianBundle(m),g=[];c=h.hitch(this,b,c,m,e);if("year"==e.selector)return a(m["dateFormatItem-yyyy"]||"yyyy",c);var f;"date"!=e.selector&&(f=e.timePattern||m["timeFormat-"+q])&&g.push(a(f,c));"time"!=e.selector&&(f=e.datePattern||m["dateFormat-"+q])&&g.push(a(f,c));return 1==g.length?g[0]:m["dateTimeFormat-"+q].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return g[b]})};k.regexp=function(a){return k._parseInfo(a).regexp};k._parseInfo=function(b){b=b||{};
var c=l.normalizeLocale(b.locale),c=k._getGregorianBundle(c),e=b.formatLength||"short",q=b.datePattern||c["dateFormat-"+e],g=b.timePattern||c["timeFormat-"+e],e="date"==b.selector?q:"time"==b.selector?g:c["dateTimeFormat-"+e].replace(/\{(\d+)\}/g,function(a,b){return[g,q][b]}),f=[];return{regexp:a(e,h.hitch(this,m,f,c,b)),tokens:f,bundle:c}};k.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,e=k._parseInfo(b),m=e.tokens,q=e.bundle;a=(new RegExp("^"+e.regexp.replace(c,"")+"$",e.strict?"":"i")).exec(a&&
a.replace(c,""));if(!a)return null;var g=["abbr","wide","narrow"],f=[1970,0,1,0,0,0,0],p="";a=d.every(a,function(a,c){if(!c)return!0;var k=m[c-1];c=k.length;k=k.charAt(0);switch(k){case "y":if(2!=c&&b.strict)f[0]=a;else if(100>a)a=Number(a),k=""+(new Date).getFullYear(),c=100*k.substring(0,2),k=Math.min(Number(k.substring(2,4))+20,99),f[0]=a<k?c+a:c-100+a;else{if(b.strict)return!1;f[0]=a}break;case "M":case "L":if(2<c){if(c=q["months-"+("L"==k?"standAlone":"format")+"-"+g[c-3]].concat(),b.strict||
(a=a.replace(".","").toLowerCase(),c=d.map(c,function(a){return a.replace(".","").toLowerCase()})),a=d.indexOf(c,a),-1==a)return!1}else a--;f[1]=a;break;case "E":case "e":case "c":c=q["days-"+("c"==k?"standAlone":"format")+"-"+g[c-3]].concat();b.strict||(a=a.toLowerCase(),c=d.map(c,function(a){return a.toLowerCase()}));a=d.indexOf(c,a);if(-1==a)return!1;break;case "D":f[1]=0;case "d":f[2]=a;break;case "a":c=b.am||q["dayPeriods-format-wide-am"];k=b.pm||q["dayPeriods-format-wide-pm"];if(!b.strict){var e=
/\./g;a=a.replace(e,"").toLowerCase();c=c.replace(e,"").toLowerCase();k=k.replace(e,"").toLowerCase()}if(b.strict&&a!=c&&a!=k)return!1;p=a==k?"p":a==c?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;f[3]=a;break;case "m":f[4]=a;break;case "s":f[5]=a;break;case "S":f[6]=a}return!0});c=+f[3];"p"===p&&12>c?f[3]=c+12:"a"===p&&12==c&&(f[3]=0);c=new Date(f[0],f[1],f[2],f[3],f[4],f[5],f[6]);b.strict&&c.setFullYear(f[0]);var r=m.join(""),e=-1!=r.indexOf("d"),r=-1!=r.indexOf("M");
if(!a||r&&c.getMonth()>f[1]||e&&c.getDate()>f[2])return null;if(r&&c.getMonth()<f[1]||e&&c.getDate()<f[2])c=n.add(c,"hour",1);return c};var q=["abbr","wide","narrow"],v=[],u={};k.addCustomFormats=function(a,b){v.push({pkg:a,name:b});u={}};k._getGregorianBundle=function(a){if(u[a])return u[a];var b={};d.forEach(v,function(c){c=l.getLocalization(c.pkg,c.name,a);b=h.mixin(b,c)},this);return u[a]=b};k.addCustomFormats(p.id.replace(/\/date\/locale$/,".cldr"),"gregorian");k.getNames=function(a,b,c,e){var m;
e=k._getGregorianBundle(e);a=[a,c,b];"standAlone"==c&&(c=a.join("-"),m=e[c],1==m[0]&&(m=void 0));a[1]="format";return(m||e[a.join("-")]).concat()};k.isWeekend=function(a,b){b=f.getWeekend(b);a=(a||new Date).getDay();b.end<b.start&&(b.end+=7,a<b.start&&(a+=7));return a>=b.start&&a<=b.end};k._getDayOfYear=function(a){return n.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};k._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),e=(c-b+7)%
7,e=Math.floor((k._getDayOfYear(a)+e-1)/7);c==b&&e++;return e};return k})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(h,d){var n={};h.setObject("dojo.cldr.supplemental",n);n.getFirstDayOfWeek=function(f){f={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,
mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[n._region(f)];return void 0===f?1:f};n._region=function(f){f=d.normalizeLocale(f);f=f.split("-");var h=f[1];h?4==h.length&&(h=f[2]):h={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",
dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",
lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",
tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",
chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",
kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",
mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",
swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[f[0]];return h};n.getWeekend=function(f){var d=n._region(f);f={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,
tn:5}[d];d={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[d];void 0===f&&(f=6);void 0===d&&(d=0);return{start:f,end:d}};return n})},"esri/core/Message":function(){define(["require","exports","dojo/string"],function(h,d,n){return function(){function f(d,g,e){this instanceof f&&(this.name=d,this.message=g&&n.substitute(g,e,function(c){return null==c?"":c})||"",this.details=e)}f.prototype.toString=function(){return"["+this.name+"]: "+this.message};return f}()})},
"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k){function q(a){return a?a.isInstanceOf&&a.isInstanceOf(y):!1}function v(a){return a?q(a)?a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function u(a){if(a&&a.length)return a[0]}function t(a,
b,c,k){b&&b.forEach(function(b,e,m){a.push(b);t(a,c.call(k,b,e,m),c,k)})}h=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a};return a}();var r=function(){},w=new b(h,!0,function(a){a.item=null;a.target=null}),z=new Set,B=new Set,A=new Set,x=new Map,C=0,y=function(b){function c(a){a=b.call(this,a)||this;a._boundDispatch=
a._dispatchColChange.bind(a);a._chgListeners=[];a._notifications=null;a._timer=null;a.length=0;a._items=[];Object.defineProperty(a,"uid",{value:C++});return a}n(c,b);g=c;c.ofType=function(a){if(!a)return g;if(x.has(a))return x.get(a);var b;if("function"===typeof a)b=a.prototype.declaredClass;else if(a.base)b=a.base.prototype.declaredClass;else for(var c in a.typeMap){var e=a.typeMap[c].prototype.declaredClass;b=b?b+(" | "+e):e}b=g.createSubclass({declaredClass:"esri.core.Collection\x3c"+b+"\x3e"});
b.isCollection=q;c={Type:a,ensureType:"function"===typeof a?k.ensureType(a):k.ensureOneOfType(a)};Object.defineProperty(b.prototype,"itemType",{value:c});x.set(a,b);return b};c.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||q(a)?{items:a}:a:{}};Object.defineProperty(c.prototype,"items",{get:function(){return this._items},set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(v(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0});c.prototype.on=
function(a,b){var c;Array.isArray(a)?c=a:-1<a.indexOf(",")&&(c=a.split(/\s*,\s*/));if(c){var k=[];for(a=0;a<c.length;a++)k.push(this.on(c[a],b));k.remove=function(){for(var a=0;a<k.length;a++)k[a].remove()};return k}if("change"===a){var e=this._chgListeners,m={removed:!1,callback:b};e.push(m);this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]});return{remove:function(){this.remove=r;m.removed=!0;e.splice(e.indexOf(m),1)}}}return l.after(this,"on"+
a,b,!0)};c.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)};c.prototype.add=function(a,b){if(this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice(b,0,a);this._emitAfterChanges();return this};c.prototype.addMany=function(a,b){void 0===b&&(b=this._items.length);if(!a||!a.length||this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice.apply(this,[b,0].concat(v(a)));this._emitAfterChanges();return this};
c.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];this._emitAfterChanges();return a};c.prototype.clone=function(){return this._createNewInstance({items:this._items.map(p.clone)})};c.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c,a=a.map(v);return this._createNewInstance({items:(c=this._items).concat.apply(c,a)})};c.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges()){for(var c=
this._splice(0,this.length),k=c.length,e=0;e<k;e++)a.call(b,c[e],e,c);this._emitAfterChanges()}};c.prototype.every=function(a,b){return this._items.every(a,b)};c.prototype.filter=function(a,b){var c;c=2===arguments.length?this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:c})};c.prototype.find=function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,k=c.length,e=0;e<k;e++){var m=c[e];if(a.call(b,m,e,c))return m}};c.prototype.findIndex=
function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,k=c.length,e=0;e<k;e++)if(a.call(b,c[e],e,c))return e;return-1};c.prototype.flatten=function(a,b){var c=[];t(c,this,a,b);return new g(c)};c.prototype.forEach=function(a,b){for(var c=this._items,k=c.length,e=0;e<k;e++)a.call(b,c[e],e,c)};c.prototype.getItemAt=function(a){return this._items[a]};c.prototype.getNextIndex=function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a};c.prototype.includes=
function(a,b){void 0===b&&(b=0);return arguments.length?-1!==this._items.indexOf(a,b):!1};c.prototype.indexOf=function(a,b){void 0===b&&(b=0);return this._items.indexOf(a,b)};c.prototype.join=function(a){void 0===a&&(a=",");return this._items.join(a)};c.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(a,b)};c.prototype.map=function(a,b){a=this._items.map(a,b);return new g({items:a})};c.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var c=
this.indexOf(a);if(-1!==c){0>b?b=0:b>=this.length&&(b=this.length-1);if(c!==b){if(this._emitBeforeChanges())return a;this._splice(c,1);this._splice(b,0,a);this._emitAfterChanges()}return a}};c.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=u(this._splice(this.length-1,1));this._emitAfterChanges();return a}};c.prototype.push=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,
0].concat(a));this._emitAfterChanges();return this.length};c.prototype.reduce=function(a,b){var c=this._items;return 2===arguments.length?c.reduce(a,b):c.reduce(a)};c.prototype.reduceRight=function(a,b){var c=this._items;return 2===arguments.length?c.reduceRight(a,b):c.reduceRight(a)};c.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};c.prototype.removeAt=function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=u(this._splice(a,1)),this._emitAfterChanges(),a};c.prototype.removeMany=
function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=q(a)?a.toArray():a;for(var b=this._items,c=[],k=a.length,e=0;e<k;e++){var m=b.indexOf(a[e]);if(-1<m){for(var g=e+1,f=m+1,d=Math.min(a.length-g,b.length-f),p=0;p<d&&a[g+p]===b[f+p];)p++;g=1+p;(m=this._splice(m,g))&&0<m.length&&c.push.apply(c,m);e+=g-1}}this._emitAfterChanges();return c};c.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);a&&(a.reverse(),this._splice.apply(this,[0,
0].concat(a)));this._emitAfterChanges();return this};c.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=u(this._splice(0,1));this._emitAfterChanges();return a}};c.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(a,b)})};c.prototype.some=function(a,b){return this._items.some(a,b)};c.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);
arguments.length?b.sort(a):b.sort();this._splice.apply(this,[0,0].concat(b));return this};c.prototype.splice=function(a,b){for(var c=[],k=2;k<arguments.length;k++)c[k-2]=arguments[k];if(this._emitBeforeChanges())return[];c=this._splice.apply(this,[a,b].concat(c))||[];this._emitAfterChanges();return c};c.prototype.toArray=function(){return this._items.slice()};c.prototype.toJSON=function(){return this.toArray()};c.prototype.toLocaleString=function(){return this._items.toLocaleString()};c.prototype.toString=
function(){return this._items.toString()};c.prototype.unshift=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(a));this._emitAfterChanges();return this.length};c.prototype._createNewInstance=function(a){return new this.constructor(a)};c.prototype._splice=function(b,c){for(var k=[],e=2;e<arguments.length;e++)k[e-2]=arguments[e];var e=this._items,m=this.constructor.prototype.itemType,q,g;!this._notifications&&
this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=a.schedule(this._boundDispatch));if(c){g=e.splice(b,c);if(this.hasEventListener("before-remove")){var f=w.acquire();f.target=this;f.cancellable=!0;for(var d=0,p=g.length;d<p;d++)q=g[d],f.reset(q),this.emit("before-remove",f),f.defaultPrevented&&(g.splice(d,1),e.splice(b,0,q),b+=1,--d,--p);w.release(f)}this.length=this._items.length;
if(this.hasEventListener("after-remove")){q=w.acquire();q.target=this;q.cancellable=!1;p=g.length;for(d=0;d<p;d++)q.reset(g[d]),this.emit("after-remove",q);w.release(q)}}if(k&&k.length){if(m){d=[];for(p=0;p<k.length;p++)q=k[p],f=m.ensureType(q),null==f&&null!=q||d.push(f);k=d}m=this.hasEventListener("before-add");d=this.hasEventListener("after-add");p=b===this.length;if(m||d){q=w.acquire();q.target=this;q.cancellable=!0;f=w.acquire();f.target=this;f.cancellable=!1;for(var r=0,h=k;r<h.length;r++){var v=
h[r];m?(q.reset(v),this.emit("before-add",q),q.defaultPrevented||(p?e.push(v):e.splice(b++,0,v),this._set("length",e.length),d&&(f.reset(v),this.emit("after-add",f)))):(p?e.push(v):e.splice(b++,0,v),this._set("length",e.length),f.reset(v),this.emit("after-add",f))}w.release(q)}else p?e.push.apply(e,k):e.splice.apply(e,[b,0].concat(k)),this._set("length",e.length)}(k&&k.length||g&&g.length)&&this._notifyChangeEvent(k,g);return g};c.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=
w.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;w.release(b)}return a};c.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=w.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);w.release(a)}};c.prototype._notifyChangeEvent=function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})};c.prototype._dispatchColChange=function(){this._timer&&
(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;z.clear();B.clear();A.clear();for(var k=0;k<b.length;k++){var m=b[k],q=m.added,m=m.removed;if(q)if(0===A.size&&0===B.size)for(var g=0,f=q;g<f.length;g++)q=f[g],z.add(q);else for(g=0,f=q;g<f.length;g++)q=f[g],B.has(q)?(A.add(q),B.delete(q)):A.has(q)||z.add(q);if(m)if(0===A.size&&0===z.size)for(g=0;g<m.length;g++)q=m[g],B.add(q);else for(g=0;g<m.length;g++)q=
m[g],z.has(q)?z.delete(q):(A.delete(q),B.add(q))}var d=e.acquire();z.forEach(function(a){d.push(a)});var p=e.acquire();B.forEach(function(a){p.push(a)});var r=c._items,h=a.items,v=e.acquire();A.forEach(function(a){h.indexOf(a)!==r.indexOf(a)&&v.push(a)});if(a.listeners&&(d.length||p.length||v.length))for(b={target:c,added:d,removed:p,moved:v},k=a.listeners.length,q=0;q<k;q++)m=a.listeners[q],m.removed||m.callback.call(c,b);e.release(d);e.release(p);e.release(v)},c=this,k=0;k<a.length;k++)b(a[k]);
z.clear();B.clear();A.clear()}};var g;c.isCollection=q;f([m.property()],c.prototype,"length",void 0);f([m.property()],c.prototype,"items",null);return c=g=f([m.subclass("esri.core.Collection")],c)}(m.declared(g,c));return y})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(h,d,n,f,l,g){d=d.default;h.before(function(c,g){h.hasMixin(c,e)&&f.processPrototype(g)});
h.after(function(c){h.hasMixin(c,e)&&(f.processClass(c),Object.defineProperties(c.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var e=h(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===
e)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{value:new d(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var c=[],g=0;g<arguments.length;g++)c.push(arguments[g]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,c)}},__accessor__:null,postscript:function(c){var e=this.__accessor__;c=e.ctorArgs||c;var b;null!=this.getDefaults&&(b=this.getDefaults(c||{}),this.set(b));e.initialize();
c&&(this.set(c),e.ctorArgs=null);e.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");}catch(c){console.warn(c.stack)}else g.removeTarget(this),this.__accessor__.destroy()},get:function(c){return n.get(this,c)},hasOwnProperty:function(c){return this.__accessor__?this.__accessor__.has(c):Object.prototype.hasOwnProperty.call(this,c)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(c,
e){l.set(this,c,e);return this},watch:function(c,e,b){return g.watch(this,c,e,b)},_clearOverride:function(c){return this.__accessor__.clearOverride(c)},_override:function(c,e){return this.__accessor__.override(c,e)},_isOverridden:function(c){return this.__accessor__.isOverridden(c)},notifyChange:function(c){this.__accessor__.propertyInvalidated(c)},_get:function(c){return this.__accessor__.internalGet(c)},_set:function(c,e){return this.__accessor__.internalSet(c,e)}});return e})},"esri/core/declare":function(){define(["require",
"exports","dojo/_base/declare"],function(h,d,n){function f(c,e){c&&!Array.isArray(c)&&"function"!==typeof c&&(e=c,c=null);c=c||[];e=e||{};return l([this].concat(c),e)}function l(c,d){c&&!Array.isArray(c)&&"function"!==typeof c&&(d=c,c=null);"function"===typeof c?c=[c]:c||(c=[]);d=d||{};var b,a;b=0;for(a=g.length;b<a;b++)g[b](c,d);c=n(c,d);c.createSubclass=f;b=0;for(a=e.length;b<a;b++)e[b](c);return c}var g=[],e=[];(function(c){c.hasMixin=function(c,b){c=Array.isArray(c)?c.reduce(function(a,b){return b._meta?
a.concat(b._meta.bases):a},[]):c._meta?c._meta.bases:c;if(!c)return!1;if("string"===typeof b)for(var a=c.length-1;0<=a;a--)if(c[a].prototype.declaredClass===b)return!0;return-1!==c.indexOf(b)};c.safeMixin=function(c,b){return n.safeMixin(c,b)};c.before=function(c){g.push(c)};c.after=function(c){e.push(c)}})(l||(l={}));return l})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(h,d,n){function f(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function l(a,b){for(var c=
[],k=[{cls:0,refs:[]}],e={},m=1,q=a.length,g=0,d,p,r,h,v;g<q;++g){(d=a[g])?"[object Function]"!=A.call(d)&&f("mixin #"+g+" is not a callable constructor.",b):f("mixin #"+g+" is unknown. Did you use dojo.require to pull it in?",b);p=d._meta?d._meta.bases:[d];r=0;for(d=p.length-1;0<=d;--d)h=p[d].prototype,h.hasOwnProperty("declaredClass")||(h.declaredClass="uniqName_"+C++),h=h.declaredClass,e.hasOwnProperty(h)||(e[h]={count:0,refs:[],cls:p[d]},++m),h=e[h],r&&r!==h&&(h.refs.push(r),++r.count),r=h;++r.count;
k[0].refs.push(r)}for(;k.length;){r=k.pop();c.push(r.cls);for(--m;v=r.refs,1==v.length;){r=v[0];if(!r||--r.count){r=0;break}c.push(r.cls);--m}if(r)for(g=0,q=v.length;g<q;++g)r=v[g],--r.count||k.push(r)}m&&f("can't build consistent linearization",b);d=a[0];c[0]=d?d._meta&&d===c[c.length-d._meta.bases.length]?d._meta.bases.length:1:0;return c}function g(a,b,c,k){var e,m,q,g,d,p,r=this._inherited=this._inherited||{};"string"===typeof a&&(e=a,a=b,b=c,c=k);if("function"===typeof a)q=a,a=b,b=c;else try{q=
a.callee}catch(J){if(J instanceof TypeError)f("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);else throw J;}(e=e||q.nom)||f("can't deduce a name to call inherited()",this.declaredClass);c=k=0;g=this.constructor._meta;k=g.bases;p=r.p;if("constructor"!=e){if(r.c!==q&&(p=0,d=k[0],g=d._meta,g.hidden[e]!==q)){(m=g.chains)&&"string"==typeof m[e]&&f("calling chained method with inherited: "+e,this.declaredClass);do if(g=d._meta,m=d.prototype,g&&(m[e]===
q&&m.hasOwnProperty(e)||g.hidden[e]===q))break;while(d=k[++p]);p=d?p:-1}if(d=k[++p])if(m=d.prototype,d._meta&&m.hasOwnProperty(e))c=m[e];else{q=B[e];do if(m=d.prototype,(c=m[e])&&(d._meta?m.hasOwnProperty(e):c!==q))break;while(d=k[++p])}c=d&&c||B[e]}else{if(r.c!==q&&(p=0,(g=k[0]._meta)&&g.ctor!==q)){for((m=g.chains)&&"manual"===m.constructor||f("calling chained constructor with inherited",this.declaredClass);(d=k[++p])&&(!(g=d._meta)||g.ctor!==q););p=d?p:-1}for(;(d=k[++p])&&!(c=(g=d._meta)?g.ctor:
d););c=d&&c}r.c=c;r.p=p;if(c)return!0===b?c:c.apply(this,b||a)}function e(a,b,c){return"string"===typeof a?"function"===typeof b?this.__inherited(a,b,c,!0):this.__inherited(a,b,!0):"function"===typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function c(a,b,c,k){var e=this.getInherited(a,b,c);if(e)return e.apply(this,k||c||b||a)}function p(a){for(var b=this.constructor._meta.bases,c=0,k=b.length;c<k;++c)if(b[c]===a)return!0;return this instanceof a}function b(a,b){for(var c in b)"constructor"!=
c&&b.hasOwnProperty(c)&&(a[c]=b[c])}function a(a){w.safeMixin(this.prototype,a);return this}function m(a,b){a instanceof Array||"function"===typeof a||(b=a,a=void 0);b=b||{};a=a||[];return w([this].concat(a),b)}function k(a,b){return function(){var c=arguments,k=c,e=c[0],m,q;q=a.length;var g;if(!(this instanceof c.callee))return r(c);if(b&&(e&&e.preamble||this.preamble))for(g=Array(a.length),g[0]=c,m=0;;){(e=c[0])&&(e=e.preamble)&&(c=e.apply(this,c)||c);e=a[m].prototype;(e=e.hasOwnProperty("preamble")&&
e.preamble)&&(c=e.apply(this,c)||c);if(++m==q)break;g[m]=c}for(m=q-1;0<=m;--m)e=a[m],(e=(q=e._meta)?q.ctor:e)&&e.apply(this,g?g[m]:c);(e=this.postscript)&&e.apply(this,k)}}function q(a,b){return function(){var c=arguments,k=c,e=c[0];if(!(this instanceof c.callee))return r(c);b&&(e&&(e=e.preamble)&&(k=e.apply(this,k)||k),(e=this.preamble)&&e.apply(this,k));a&&a.apply(this,c);(e=this.postscript)&&e.apply(this,c)}}function v(a){return function(){var b=arguments,c=0,k,e;if(!(this instanceof b.callee))return r(b);
for(;k=a[c];++c)if(k=(e=k._meta)?e.ctor:k){k.apply(this,b);break}(k=this.postscript)&&k.apply(this,b)}}function u(a,b,c){return function(){var k,e,m=0,q=1;c&&(m=b.length-1,q=-1);for(;k=b[m];m+=q)e=k._meta,(k=(e?e.hidden:k.prototype)[a])&&k.apply(this,arguments)}}function t(a){x.prototype=a.prototype;a=new x;x.prototype=null;return a}function r(a){var b=a.callee,c=t(b);b.apply(c,a);return c}function w(c,r,h){"string"!=typeof c&&(h=r,r=c,c="");h=h||{};var x,C,E,F,D,K,S,Q=1,J=r;"[object Array]"==A.call(r)?
(K=l(r,c),E=K[0],Q=K.length-E,r=K[Q]):(K=[0],r?"[object Function]"==A.call(r)?(E=r._meta,K=K.concat(E?E.bases:r)):f("base class is not a callable constructor.",c):null!==r&&f("unknown base class. Did you use dojo.require to pull it in?",c));if(r)for(C=Q-1;;--C){x=t(r);if(!C)break;E=K[C];(E._meta?b:z)(x,E.prototype);F=d("csp-restrictions")?function(){}:new Function;F.superclass=r;F.prototype=x;r=x.constructor=F}else x={};w.safeMixin(x,h);E=h.constructor;E!==B.constructor&&(E.nom="constructor",x.constructor=
E);for(C=Q-1;C;--C)(E=K[C]._meta)&&E.chains&&(S=z(S||{},E.chains));x["-chains-"]&&(S=z(S||{},x["-chains-"]));r&&r.prototype&&r.prototype["-chains-"]&&(S=z(S||{},r.prototype["-chains-"]));E=!S||!S.hasOwnProperty("constructor");K[0]=F=S&&"manual"===S.constructor?v(K):1==K.length?q(h.constructor,E):k(K,E);F._meta={bases:K,hidden:h,chains:S,parents:J,ctor:h.constructor};F.superclass=r&&r.prototype;F.extend=a;F.createSubclass=m;F.prototype=x;x.constructor=F;x.getInherited=e;x.isInstanceOf=p;x.inherited=
y;x.__inherited=g;c&&(x.declaredClass=c,n.setObject(c,F));if(S)for(D in S)x[D]&&"string"==typeof S[D]&&"constructor"!=D&&(E=x[D]=u(D,K,"after"===S[D]),E.nom=D);return F}var z=n.mixin,B=Object.prototype,A=B.toString,x,C=0;x=d("csp-restrictions")?function(){}:new Function;var y=h.config.isDebug?c:g;h.safeMixin=w.safeMixin=function(a,b){var c,k;for(c in b)k=b[c],k===B[c]&&c in B||"constructor"==c||("[object Function]"==A.call(k)&&(k.nom=c),a[c]=k);return a};return h.declare=w})},"esri/core/accessorSupport/Properties":function(){define("require exports ../has ../Logger ../ObjectPool ./extensions ./PropertyOrigin ./Store".split(" "),
function(h,d,n,f,l,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});f.getLogger("esri.core.accessorSupport.Properties");h=function(){function b(a){this.host=a;this._origin=e.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new c.default;a=this.host.constructor.__accessorMetadata__;this.metadatas=a.properties;this.autoDestroy=a.autoDestroy}b.prototype.initialize=function(){this.lifecycle=1;g.instanceCreated(this.host,
this.metadatas)};b.prototype.constructed=function(){this.lifecycle=2};b.prototype.destroy=function(){this.destroyed=!0;var a=this.cursors;if(this.cursors)for(var b=0,c=Object.getOwnPropertyNames(a);b<c.length;b++){var e=c[b],g=a[e];if(g){for(;0<g.length;)g.pop().propertyDestroyed(this,e);a[e]=null}}if(this.autoDestroy)for(e in this.metadatas)(a=this.internalGet(e))&&a&&"function"===typeof a.destroy&&(a.destroy(),this.metadatas[e].nonNullable||this.internalSet(e,null))};Object.defineProperty(b.prototype,
"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});b.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))};b.prototype.get=function(a){var b=this.metadatas[a];if(this.store.has(a)&&!this.dirties[a])return this.store.get(a);var c=b.get;return c?(b=c.call(this.host),this.store.set(a,b,e.OriginId.COMPUTED),this.propertyCommitted(a),b):b.value};b.prototype.originOf=function(a){var b=this.store.originOf(a);return void 0===
b&&(a=this.metadatas[a])&&a.hasOwnProperty("value")?"defaults":e.idToName(b)};b.prototype.has=function(a){return this.metadatas[a]?this.store.has(a):!1};b.prototype.internalGet=function(a){if(this.metadatas[a]){var b=this.store;return b.has(a)?b.get(a):this.metadatas[a].value}};b.prototype.internalSet=function(a,b){if(this.metadatas[a]){var c=this.initialized?this._origin:e.OriginId.DEFAULTS,m=this.store.get(a,c);if(b!==m||!this.store.has(a,c)||this.isOverridden(a))this.propertyInvalidated(a),this.store.set(a,
b,c),this.propertyCommitted(a)}};b.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]};b.prototype.keys=function(){return Object.keys(this.metadatas)};b.prototype.override=function(a,b){if(this.metadatas[a]){this.overridden||(this.overridden={});var c=this.metadatas[a];if(!c.nonNullable||null!=b){if(c=c.cast){b=this.cast(c,b);var c=b.valid,e=b.value;p.release(b);if(!c)return;b=e}this.overridden[a]=!0;this.internalSet(a,b)}}};b.prototype.set=function(a,b){if(this.metadatas[a]){var c=
this.metadatas[a];if(!c.nonNullable||null!=b){var e=c.set;if(c=c.cast){b=this.cast(c,b);var c=b.valid,m=b.value;p.release(b);if(!c)return;b=m}e?e.call(this.host,b):this.internalSet(a,b)}}};b.prototype.setDefaultOrigin=function(a){this._origin=e.nameToId(a)};b.prototype.propertyInvalidated=function(a){var b=this.dirties,c=this.isOverridden(a),e=this.cursors&&this.cursors[a],g=this.metadatas[a].computes;if(e)for(var f=0;f<e.length;f++)e[f].propertyInvalidated(this,a);c||(b[a]=!0);if(g)for(a=0;a<g.length;a++)this.propertyInvalidated(g[a])};
b.prototype.propertyCommitted=function(a){var b=this.cursors&&this.cursors[a];this.dirties[a]=!1;if(b)for(var c=0;c<b.length;c++)b[c].propertyCommitted(this,a)};b.prototype.addCursor=function(a,b){this.cursors||(this.cursors={});var c=this.cursors[a];c||(this.cursors[a]=c=[]);c.push(b)};b.prototype.removeCursor=function(a,b){var c=this.cursors[a];this.cursors[a]&&(c.splice(c.indexOf(b),1),0===c.length&&(this.cursors[a]=null))};b.prototype.cast=function(a,b){var c=p.acquire();c.valid=!0;c.value=b;
a&&(c.value=a.call(this.host,b,c));return c};return b}();n=function(){function b(){this.value=null;this.valid=!0}b.prototype.acquire=function(){this.valid=!0};b.prototype.release=function(){this.value=null};return b}();var p=new l(n);d.default=h})},"esri/core/has":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(h,d,n,f,l){function g(){var b={available:!1,version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,
supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1},a=document.createElement("canvas");if(!a)return b;var c=l.createContext(a,{failIfMajorPerformanceCaveat:!0},"webgl");!c&&(c=l.createContext(a,{},"webgl"))&&(b.majorPerformanceCaveat=!0);if(!c)return b;a=c.getParameter(c.VERSION);if(!a)return b;if(a=a.match(/^WebGL\s+([\d.]*)/))b.version=parseFloat(a[1]),b.available=.94<=b.version,a=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT),b.supportsHighPrecisionFragment=
a&&0<a.precision,b.supportsVertexShaderSamplers=0<c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b.supportsElementIndexUint=null!==c.getExtension("OES_element_index_uint"),b.supportsStandardDerivatives=null!==c.getExtension("OES_standard_derivatives"),b.supportsInstancedArrays=null!==c.getExtension("ANGLE_instanced_arrays");return b}function e(){var b={available:!1,version:0},a=document.createElement("canvas");if(!a)return b;a=l.createContext(a,{},"webgl2");if(!a)return b;b.available=!0;a=a.getParameter(a.VERSION);
if(!a)return b;if(a=a.match(/^WebGL\s+([\d.]*)/))b.version=parseFloat(a[1]);return b}var c=null,p=null;(function(){var b=navigator.userAgent,a=b.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),b=b.match(/iPhone/i);a&&n.add("esri-mobile",a);b&&n.add("esri-iPhone",b);n.add("esri-geolocation",function(){return!!navigator.geolocation});n.add("esri-canvas-svg-support",function(){return!(n("trident")||n("ie"))});n.add("esri-secure-context",function(){if("isSecureContext"in f)return f.isSecureContext;
if(f.location&&f.location.origin)return 0===f.location.origin.indexOf("https:")});n.add("esri-wasm","WebAssembly"in f);n("host-webworker")||(n.add("esri-workers","Worker"in f),n.add("esri-url-encodes-apostrophe",function(){var a=f.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")}),c||(c=g()),n.add("esri-webgl",c.available),n.add("esri-webgl-high-precision-fragment",c.supportsHighPrecisionFragment),n.add("esri-webgl-vertex-shader-samplers",c.supportsVertexShaderSamplers),n.add("esri-webgl-element-index-uint",
c.supportsElementIndexUint),n.add("esri-webgl-standard-derivatives",c.supportsStandardDerivatives),n.add("esri-webgl-instanced-arrays",c.supportsInstancedArrays),n.add("esri-webgl-major-performance-caveat",c.majorPerformanceCaveat),n.add("esri-featurelayer-webgl",!0),n.add("esri-featurelayer-webgl-labeling",!0),p||(p=e()),n.add("esri-webgl2",p.available))})();return n})},"esri/views/webgl/context-util":function(){define(["require","exports"],function(h,d){function n(e,c,g){void 0===c&&(c={});var b;
switch(g){case "webgl":b=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":b=["webgl2"];break;default:b=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}g=null;for(var a=0;a<b.length;a++){var m=b[a];try{g=e.getContext(m,c)}catch(k){}if(g)break}return g}function f(e,c){(e=e.parentNode)&&(e.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
c+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(d,"__esModule",{value:!0});d.createContextOrErrorHTML=function(e,c,d){void 0===c&&(c={});if(!window.WebGLRenderingContext)return f(e,l),null;c=n(e,c,d);return c?c:(f(e,g),null)};d.createContext=n;var l='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',g='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/core/Logger":function(){define(["require","exports","./has"],function(h,d,n){var f={info:0,warn:1,error:2};h=function(){function d(g){void 0===g&&(g={});this.module=g.module||"";this.writer=g.writer||null;this.level=g.level||null;null!=g.enabled&&(this.enabled=!!g.enabled);d._loggers[this.module]=this;g=this.module.lastIndexOf(".");-1!==g&&(this.parent=d.getLogger(this.module.slice(0,g)))}d.prototype.log=function(g){for(var e=[],c=1;c<arguments.length;c++)e[c-1]=arguments[c];this._isEnabled()&&
this._matchLevel(g)&&(c=this._inheritedWriter())&&c.apply(void 0,[g,this.module].concat(e))};d.prototype.error=function(){for(var g=[],e=0;e<arguments.length;e++)g[e]=arguments[e];this.log.apply(this,["error"].concat(g))};d.prototype.warn=function(){for(var g=[],e=0;e<arguments.length;e++)g[e]=arguments[e];this.log.apply(this,["warn"].concat(g))};d.prototype.info=function(){for(var g=[],e=0;e<arguments.length;e++)g[e]=arguments[e];this.log.apply(this,["info"].concat(g))};d.prototype.getLogger=function(g){return d.getLogger(this.module+
"."+g)};d.getLogger=function(g){var e=d._loggers[g];e||(e=new d({module:g}));return e};d.prototype._parentWithMember=function(g,e){for(var c=this;c&&null==c[g];)c=c.parent;return c?c[g]:e};d.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};d.prototype._consoleWriter=function(g,e){for(var c=[],f=2;f<arguments.length;f++)c[f-2]=arguments[f];console[g].apply(console,["["+e+"]"].concat(c))};d.prototype._matchLevel=function(g){return f[this._parentWithMember("level",
"error")]<=f[g]};d.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};d._loggers={};return d}();h.getLogger("esri").level="warn";return h})},"esri/core/ObjectPool":function(){define(["require","exports"],function(h,d){var n=function(){return function(){}}();return function(){function f(f,g,e,c,d){void 0===c&&(c=1);void 0===d&&(d=0);this.classConstructor=f;this.acquireFunctionOrWithConstructor=g;this.releaseFunction=e;this.growthSize=c;!0===g?this.acquireFunction=this._constructorAcquireFunction:
"function"===typeof g&&(this.acquireFunction=g);this._pool=Array(d);this._set=new Set;this._initialSize=d;for(f=0;f<d;f++)this._pool[f]=new this.classConstructor;this.growthSize=Math.max(c,1)}f.prototype.acquire=function(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];g=this.classConstructor||n;if(0===this._pool.length)for(var e=this.growthSize,c=0;c<e;c++)this._pool[c]=new g;g=this._pool.pop();this.acquireFunction?this.acquireFunction.apply(this,[g].concat(f)):g&&g.acquire&&"function"===
typeof g.acquire&&g.acquire.apply(g,f);this._set.delete(g);return g};f.prototype.release=function(f){f&&!this._set.has(f)&&(this.releaseFunction?this.releaseFunction(f):f&&f.release&&"function"===typeof f.release&&f.release(),this._pool.push(f),this._set.add(f))};f.prototype.prune=function(f){void 0===f&&(f=this._initialSize);if(!(f>=this._pool.length)){for(var g=f;g<this._pool.length;++g){var e=this._pool[g];this._set.delete(e);e.dispose&&"function"===typeof e.dispose&&e.dispose()}this._pool.length=
f}};f.prototype._constructorAcquireFunction=function(f){for(var g=[],e=1;e<arguments.length;e++)g[e-1]=arguments[e];var c;(c=this.classConstructor).call.apply(c,[f].concat(g))};return f}()})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(h,d,n,f,l){Object.defineProperty(d,"__esModule",{value:!0});var g=[n.default,f.default,l.default];d.processPrototypeMetadatas=
function(e,c){for(var f=Object.getOwnPropertyNames(e),b=0;b<g.length;b++){var a=g[b];if(a.processPrototypePropertyMetadata)for(var m=0,k=f;m<k.length;m++){var q=k[m];a.processPrototypePropertyMetadata(q,e[q],e,c)}}};d.processClassMetadatas=function(e,c){for(var f=Object.getOwnPropertyNames(e),b=0;b<g.length;b++){var a=g[b];if(a.processClassPropertyMetadata)for(var m=0,k=f;m<k.length;m++){var q=k[m];a.processClassPropertyMetadata(q,e[q],e,c)}}};d.instanceCreated=function(e,c){for(var f=Object.getOwnPropertyNames(c),
b=0;b<g.length;b++){var a=g[b];a.instanceCreated&&a.instanceCreated(e,c,f)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports ../../has ../get ../set ../utils ../wire".split(" "),function(h,d,n,f,l,g,e){function c(c,b,a){var m=g.getProperties(c);return e.wire(c,a.aliasOf,function(){m.propertyInvalidated(b)})}Object.defineProperty(d,"__esModule",{value:!0});d.AliasedPropertyExtension={processClassPropertyMetadata:function(c,b,a,e){var k=b.aliasOf;if(k&&(c=
k.split(".")[0],null!=a[c]&&!b.set&&!b.get)){var m;b.get=function(){var a=f.default(this,k);if("function"===typeof a){m||(m=k.split(".").slice(0,-1).join("."));var b=f.default(this,m);b&&(a=a.bind(b))}return a};b.readOnly||(b.set=function(a){return l.default(this,k,a)})}},instanceCreated:function(e,b,a){for(var m=0;m<a.length;m++){var k=a[m],q=b[k];q.aliasOf&&c(e,k,q)}}};d.default=d.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(h,
d,n){function f(c,e,b){if(null!=b.getItemAt||Array.isArray(b)){var a=parseInt(c,10);if(!isNaN(a))return Array.isArray(b)?b[a]:b.getItemAt(a)}a=n.getProperties(b);return e?n.isPropertyDeclared(a,c)?a.get(c):b[c]:n.isPropertyDeclared(a,c)?a.internalGet(c):b[c]}function l(c,e,b,a){if(null==c)return c;if((c=f(e[a],b,c))||!(a<e.length-1))return a===e.length-1?c:l(c,e,b,a+1)}function g(c,e,b,a){void 0===b&&(b=!1);void 0===a&&(a=0);return"string"===typeof e&&-1===e.indexOf(".")?f(e,b,c):l(c,n.pathToArray(e),
b,a)}function e(c,e){return g(c,e,!0)}Object.defineProperty(d,"__esModule",{value:!0});d.valueOf=g;d.get=e;d.exists=function(c,e){return void 0!==g(e,c,!0)};d.default=e})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(h,d,n){function f(c,e,b){return e?Object.keys(e).reduce(function(a,c){var k=null,m="merge";b&&(k=b.path?b.path+"."+c:c,m=b.policy(k));if("replace"===m)return a[c]=e[c],a;if(void 0===a[c])return a[c]=n.clone(e[c]),a;var g=a[c],m=e[c];if(g===
m)return a;if(Array.isArray(m)||Array.isArray(a))g=g?Array.isArray(g)?a[c]=g.concat():a[c]=[g]:a[c]=[],m&&(Array.isArray(m)||(m=[m]),m.forEach(function(a){-1===g.indexOf(a)&&g.push(a)}));else if(m&&"object"===typeof m)if(b){var d=b.path;b.path=k;a[c]=f(g,m,b);b.path=d}else a[c]=f(g,m,null);else if(!a.hasOwnProperty(c)||e.hasOwnProperty(c))a[c]=m;return a},c||{}):c}function l(c){return Array.isArray(c)?c:c.split(".")}function g(c){if(Array.isArray(c)||-1<c.indexOf(",")){c=Array.isArray(c)?c:c.split(",");
for(var e=0;e<c.length;e++)c[e]=c[e].trim();return 1===c.length?c[0]:c}return c.trim()}function e(c){var e=!1;return function(){e||(e=!0,c())}}Object.defineProperty(d,"__esModule",{value:!0});d.getProperties=function(c){return c?c.__accessor__?c.__accessor__:c.propertyInvalidated?c:null:null};d.isPropertyDeclared=function(c,e){return c&&c.metadatas&&null!=c.metadatas[e]};d.merge=function(c,e,b){return b?f(c,e,{policy:b,path:""}):f(c,e,null)};d.pathToStringOrArray=function(c){return c?"string"===typeof c&&
-1===c.indexOf(".")?c:l(c):c};d.pathToArray=l;d.splitPath=g;d.parseConditionalPath=function(c){if(-1===c.indexOf("?"))return null;c=l(c);for(var e=Array(c.length),b=0;b<c.length;b++){var a=c[b];e[b]="?"===a[a.length-1];e[b]&&(c[b]=a.slice(0,-1))}return{fullPath:c.join("."),conditional:e}};d.parse=function(c,f,b,a){f=g(f);if(Array.isArray(f)){var m=f.map(function(k){return a(c,k.trim(),b)});return{remove:e(function(){return m.forEach(function(a){return a.remove()})})}}return a(c,f.trim(),b)};d.once=
e})},"esri/core/accessorSupport/set":function(){define(["require","exports","../has","../Logger","./get"],function(h,d,n,f,l){function g(e,c,f){if(e&&c)if("object"===typeof c){f=0;for(var b=Object.getOwnPropertyNames(c);f<b.length;f++){var a=b[f];g(e,a,c[a])}}else"_"!==c[0]&&(-1!==c.indexOf(".")?(c=c.split("."),a=c.splice(c.length-1,1)[0],g(l.default(e,c),a,f)):e[c]=f)}Object.defineProperty(d,"__esModule",{value:!0});f.getLogger("esri.core.accessorSupport.set");d.set=g;d.default=g})},"esri/core/accessorSupport/wire":function(){define(["require",
"exports","./utils"],function(h,d,n){function f(b,a,e){a=n.splitPath(a);if(Array.isArray(a)){for(var k=[],m=0;m<a.length;m++)k.push((new l(a[m],e)).install(b));return new c(k)}b=(new l(a,e)).install(b);return new p(b)}Object.defineProperty(d,"__esModule",{value:!0});var l=function(){function b(a,b){this.path=a;this.callback=b;this.conditional=this.chain=null;if(-1<a.indexOf(".")){if(a=n.parseConditionalPath(a))this.path=a.fullPath,this.conditional=a.conditional;this.chain=n.pathToArray(this.path)}this.callback=
b;return this}b.prototype.install=function(a){a=this.chain?new e(this,a):new g(this,a);return a};b.prototype.notify=function(a){this.callback(a,this.path)};return b}(),g=function(){function b(a,b){this.binding=a;this.target=b;n.getProperties(b).addCursor(this.binding.path,this)}b.prototype.destroy=function(){this.target&&(n.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};b.prototype.propertyDestroyed=function(a,b){n.getProperties(this.target).removeCursor(b,
this)};b.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};b.prototype.propertyCommitted=function(a,b){this.binding&&this.binding.notify(this.target)};return b}(),e=function(){function b(a,b){this.binding=a;this.target=b;this.stack=[];this.properties=n.getProperties(b);this.stack.push({properties:this.properties,propertyName:a.chain[0]});this.properties.addCursor(a.chain[0],this);this.moveForward();return this}b.prototype.destroy=function(){for(;;){var a=
this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};b.prototype.propertyDestroyed=function(a,b){this.moveBackward(a,b)};b.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};b.prototype.propertyCommitted=function(a,b){this.binding&&(this.moveBackward(a,b),this.moveForward(),this.binding.notify(this.target))};b.prototype.moveBackward=function(a,b){for(var c=this.stack,e=c[c.length-1];e.properties!==
a&&e.propertyName!==b;)e.properties.removeCursor(e.propertyName,this),c.pop(),e=c[c.length-1]};b.prototype.moveForward=function(){var a=this.stack,b=a[a.length-1],b=b.properties.internalGet(b.propertyName);if((b=n.getProperties(b))&&a.length<this.binding.chain.length){var c=this.binding.chain[a.length];this.binding.conditional&&this.binding.conditional[a.length]&&!b.metadatas[c]||(this.stack.push({properties:b,propertyName:c}),b.addCursor(c,this),this.moveForward())}};return b}(),c=function(){function b(a){this.cursors=
a}b.prototype.remove=function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();this.cursors=null};return b}(),p=function(){function b(a){this.cursor=a}b.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return b}();d.create=function(b,a){b=n.splitPath(b);if(Array.isArray(b)){for(var e=[],k=0;k<b.length;k++)e.push(new l(b[k],a));return function(a){for(var b=[],k=0;k<e.length;k++)b[k]=e[k].install(a);return new c(b)}}var q=new l(b,a);return function(a){return new p(q.install(a))}};
d.wire=f;d.default=f})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports ../../has ../../Logger ../utils ../wire".split(" "),function(h,d,n,f,l,g){Object.defineProperty(d,"__esModule",{value:!0});f.getLogger("esri.core.accessorSupport.extensions.computedProperty");d.ComputedPropertyExtension={processClassPropertyMetadata:function(e,c,f,b){c.dependsOn&&(f=void 0,f=c.dependsOn.slice())&&(c.wire=g.create(f,function(a){return l.getProperties(a).propertyInvalidated(e)}))},
instanceCreated:function(e,c,g){for(var b=0;b<g.length;b++){var a=c[g[b]];a.wire&&a.wire(e)}}};d.default=d.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ../ensureType ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),function(h,d,n,f,l,g,e){function c(c,b,a){var e=c&&c.json;c&&c.json&&c.json.origins&&a&&(c=c.json.origins[a.origin])&&
b in c&&(e=c);return e}Object.defineProperty(d,"__esModule",{value:!0});d.originSpecificReadPropertyDefinition=function(e,b){return c(e,"read",b)};d.originSpecificWritePropertyDefinition=function(e,b){return c(e,"write",b)};d.SerializablePropertyExtension={processPrototypePropertyMetadata:function(c,b,a,m){if(g.process(b)){f.process(b);a=b.type;for(m=0;Array.isArray(a)&&!n.isOneOf(a);)a=a[0],m++;if(b.json.origins)for(var k in b.json.origins){var q=b.json.origins[k];l.create(a,m,c,q);e.create(a,m,
c,q)}l.create(a,m,c,b.json);e.create(a,m,c,b.json)}}};d.default=d.SerializablePropertyExtension})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(h,d,n){function f(a,b){return b.isInstanceOf?b.isInstanceOf(a):b instanceof a}function l(a){return null==a?a:new Date(a)}function g(a){return null==a?a:!!a}function e(a){return null==a?a:a.toString()}function c(a){return null==a?a:parseFloat(a)}function p(a){return null==a?a:Math.round(parseFloat(a))}
function b(a){return a&&a.constructor&&void 0!==a.constructor._meta}function a(a,b){return null!=b&&a&&!f(a,b)}function m(a){return a&&("isCollection"in a||a._meta&&a._meta.bases&&a._meta.bases.some(function(a){return"isCollection"in a}))}function k(a){return a&&a.Type?"function"===typeof a.Type?a.Type:a.Type.base:null}function q(a,b){if(!b||!b.constructor||!m(b.constructor))return v(a,b)?b:new a(b);var c=k(a.prototype.itemType),e=k(b.constructor.prototype.itemType);if(!c)return b;if(!e)return new a(b);
if(c===e)return b;if((e=e._meta&&e._meta.bases)&&-1!==e.indexOf(c))return new a(b);v(a,b);return b}function v(a,c){return b(c)?(C.error("Accessor#set","Assigning an instance of '"+(c.declaredClass||"unknown")+"' which is not a subclass of '"+(a&&a.prototype&&a.prototype.declaredClass||"unknown")+"'"),!0):!1}function u(b,c){return null==c?c:m(b)?q(b,c):a(b,c)?v(b,c)?c:new b(c):c}function t(a){switch(a){case Number:return c;case y:return p;case Boolean:return g;case String:return e;case Date:return l;
default:return u.bind(null,a)}}function r(a,b){var c=t(a);return 1===arguments.length?c:c(b)}function w(a,b){return 1===arguments.length?w.bind(null,a):b?Array.isArray(b)?b.map(a):[a(b)]:b}function z(a,b,c){return 0!==b&&Array.isArray(c)?c.map(function(c){return z(a,b-1,c)}):a(c)}function B(a,b,c){if(2===arguments.length)return B.bind(null,a,b);if(!c)return c;c=z(a,b,c);for(var k=b,e=c;0<k&&Array.isArray(e);)k--,e=e[0];if(void 0!==e)for(e=0;e<k;e++)c=[c];return c}function A(a,b){if(2===arguments.length)return A(a).call(null,
b);for(var c=new Set,k=0;k<a.length;k++)c.add(a[k]);var e=null;return function(b,k){if(null==b)return b;c.has(b)||(e||(e=a.map(function(a){return"string"===typeof a?"'"+a+"'":""+a}).join(", ")),C.error("Accessor#set","'"+b+"' is not a valid value for this property, only the following values are valid: "+e),k&&(k.valid=!1));return b}}function x(c,k){if(2===arguments.length)return x(c).call(null,k);var e={},m=[],q=[],g;for(g in c.typeMap){var f=c.typeMap[g];e[g]=r(f);m.push(f&&f.prototype&&f.prototype.declaredClass||
"unknown");q.push(g)}var d="string"===typeof c.key?function(a){return a[c.key]}:c.key;return function(k){if(c.base&&!a(c.base,k))return k;var g=d(k)||c.defaultKeyValue,f=e[g];if(!f)return k="Invalid property value, value needs to be one of "+("'"+m.join("', '")+"'"),!1!==c.castable&&(k+=", or a plain object that can autocast (having .type \x3d "+("'"+q.join("', '")+"'")+")"),C.error("Accessor#set",k),null;if(!a(c.typeMap[g],k))return k;if("string"!==typeof c.key||b(k))return f(k);var g={},r;for(r in k)r!==
c.key&&(g[r]=k[r]);return f(g)}}Object.defineProperty(d,"__esModule",{value:!0});var C=n.getLogger("esri.core.Accessor");d.isInstanceOf=f;d.ensureDate=l;d.ensureBoolean=g;d.ensureString=e;d.ensureNumber=c;d.ensureInteger=p;d.isClassedType=b;d.requiresType=a;d.ensureClass=u;d.ensureType=r;d.ensureArrayTyped=w;d.ensureArray=function(a,b){return 1===arguments.length?w(r.bind(null,a)):w(r.bind(null,a),b)};d.ensureNArrayTyped=B;d.ensureNArray=function(a,b,c){return 2===arguments.length?B(r.bind(null,a),
b):B(r.bind(null,a),b,c)};d.isOneOf=function(a){if(!Array.isArray(a))return!1;a=typeof a[0];return"string"===a||"number"===a};d.ensureOneOf=A;d.ensureOneOfType=x;var y=function(){return function(){}}();d.Integer=y;d.default=r})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.process=function(d){if(d.json&&d.json.origins){var f=d.json.origins,h={"web-document":["web-scene",
"web-map"]};d=function(e){if(f[e]){var c=f[e];h[e].forEach(function(e){f[e]=c});delete f[e]}};for(var g in h)d(g)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(h,d,n,f){function l(a,k,e,f){if(1<k)return c(a,k);if(1===k)return p(a);if(b(a)){var m=p(a.prototype.itemType.Type);return function(b,c,k){return(b=m(b,c,k))?new a(b):b}}return g(a)}function g(a){return a.prototype.read?function(b,c,e){return null==
b?b:(new a).read(b,e)}:a.fromJSON}function e(a,b,c,g){return 0!==g&&Array.isArray(b)?b.map(function(b){return e(a,b,c,g-1)}):a(b,null,c)}function c(a,b){a=g(a);var c=e.bind(null,a);return function(a,k,e){if(null==a)return a;a=c(a,e,b);k=b;for(e=a;0<k&&Array.isArray(e);)k--,e=e[0];if(void 0!==e)for(e=0;e<k;e++)a=[a];return a}}function p(a){var b=g(a);return function(a,c,k){return null==a?a:Array.isArray(a)?a.map(function(a){return b(a,null,k)}):[b(a,null,k)]}}function b(b){return f.isCollection(b)?
(b=b.prototype.itemType)&&b.Type&&"function"===typeof b.Type?a(b.Type):!1:!1}function a(a){return Array.isArray(a)?!1:!!a&&a.prototype&&("read"in a.prototype||"fromJSON"in a||b(a))}Object.defineProperty(d,"__esModule",{value:!0});d.create=function(b,c,e,g){(!g.read||!g.read.reader&&!1!==g.read.enabled)&&a(b)&&n.setDeepValue("read.reader",l(b,c,e,g),g)}})},"esri/core/object":function(){define(["require","exports"],function(h,d){function n(f,d,g){for(var e=0;e<f.length;e++){var c=f[e];if(!(c in g))if(d)g[c]=
{};else return;g=g[c]}return g}Object.defineProperty(d,"__esModule",{value:!0});d.getDeepValue=function(f,d){return n(f.split("."),!1,d)};d.setDeepValue=function(f,d,g){var e=f.split(".");f=e.pop();(g=n(e,!0,g))&&f&&(g[f]=d)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.isCollection=function(d){return!!d&&d.prototype&&d.prototype.declaredClass&&0===d.prototype.declaredClass.indexOf("esri.core.Collection")}})},
"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(h,d){function n(f){"boolean"===typeof f.read?f.read={enabled:f.read}:"function"===typeof f.read?f.read={enabled:!0,reader:f.read}:f.read&&"object"===typeof f.read&&void 0===f.read.enabled&&(f.read.enabled=!0)}function f(f){"boolean"===typeof f.write?f.write={enabled:f.write}:"function"===typeof f.write?f.write={enabled:!0,writer:f.write}:f.write&&"object"===typeof f.write&&void 0===
f.write.enabled&&(f.write.enabled=!0)}Object.defineProperty(d,"__esModule",{value:!0});d.process=function(d){d.json||(d.json={});n(d.json);f(d.json);if(d.json.origins)for(var g in d.json.origins)n(d.json.origins[g]),f(d.json.origins[g]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(h,d,n,f){function l(b,a,c,k){n.setDeepValue(c,g(b,k),a)}function g(b,a){return b&&"function"===typeof b.write?
b.write({},a):b&&"function"===typeof b.toJSON?b.toJSON():"number"===typeof b?-Infinity===b?-Number.MAX_VALUE:Infinity===b?Number.MAX_VALUE:isNaN(b)?null:b:b}function e(b,a,c,k){null===b?b=null:b&&"function"===typeof b.map?(b=b.map(function(a){return g(a,k)}),"function"===typeof b.toArray&&(b=b.toArray())):b=[g(b,k)];n.setDeepValue(c,b,a)}function c(b,a,e){return 0!==e&&Array.isArray(b)?b.map(function(b){return c(b,a,e-1)}):g(b,a)}function p(b){return function(a,e,k,g){if(null===a)a=null;else{a=c(a,
g,b);g=b;for(var m=a;0<g&&Array.isArray(m);)g--,m=m[0];if(void 0!==m)for(m=0;m<g;m++)a=[a]}n.setDeepValue(k,a,e)}}Object.defineProperty(d,"__esModule",{value:!0});d.create=function(b,a,c,k){k.write&&!k.write.writer&&!1!==k.write.enabled&&(1===a||f.isCollection(b)?k.write.writer=e:k.write.writer=1<a?p(a):l)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(h,d){function n(g){switch(g){case "defaults":return l.DEFAULTS;case "service":return l.SERVICE;case "portal-item":return l.PORTAL_ITEM;
case "web-scene":return l.WEB_SCENE;case "web-map":return l.WEB_MAP;case "user":return l.USER}}function f(g){switch(g){case l.DEFAULTS:return"defaults";case l.SERVICE:return"service";case l.PORTAL_ITEM:return"portal-item";case l.WEB_SCENE:return"web-scene";case l.WEB_MAP:return"web-map";case l.USER:return"user"}}Object.defineProperty(d,"__esModule",{value:!0});var l;(function(g){g[g.DEFAULTS=0]="DEFAULTS";g[g.COMPUTED=1]="COMPUTED";g[g.SERVICE=2]="SERVICE";g[g.PORTAL_ITEM=3]="PORTAL_ITEM";g[g.WEB_SCENE=
4]="WEB_SCENE";g[g.WEB_MAP=5]="WEB_MAP";g[g.USER=6]="USER";g[g.NUM=7]="NUM"})(l=d.OriginId||(d.OriginId={}));d.nameToId=n;d.idToName=f;d.readableNameToId=function(g){return n(g)};d.idToReadableName=function(g){return f(g)};d.writableNameToId=function(g){return n(g)};d.idToWritableName=function(g){return f(g)}})},"esri/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});h=function(){function f(){this._values=
{}}f.prototype.get=function(f){return this._values[f]};f.prototype.originOf=function(f){return n.OriginId.USER};f.prototype.keys=function(){return Object.keys(this._values)};f.prototype.set=function(f,g){this._values[f]=g};f.prototype.clear=function(f){delete this._values[f]};f.prototype.has=function(f){return f in this._values};return f}();d.default=h})},"esri/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(h,d,n,f,l,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});var p=Object.prototype.hasOwnProperty,b=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,a={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},m=/^_(set|get)([a-zA-Z0-9]+)Attr$/;d.processPrototype=function(c){for(var k=c.declaredClass,d=c.properties||{},h=0,t=Object.getOwnPropertyNames(d);h<t.length;h++){var r=t[h],w=d[r],z=typeof w;null==w?g.setPropertyMetadata(c,r,{value:w}):
Array.isArray(w)?g.setPropertyMetadata(c,r,{type:[w[0]],value:null}):"object"===z?e.getProperties(w)||w instanceof Date?g.setPropertyMetadata(c,r,{type:w.constructor,value:w}):g.setPropertyMetadata(c,r,w):"boolean"===z?g.setPropertyMetadata(c,r,{type:Boolean,value:w}):"string"===z?g.setPropertyMetadata(c,r,{type:String,value:w}):"number"===z?g.setPropertyMetadata(c,r,{type:Number,value:w}):"function"===z&&g.setPropertyMetadata(c,r,{type:w,value:null})}h=0;for(t=Object.getOwnPropertyNames(c);h<t.length;h++){var z=
t[h],w=c[z],d=r=void 0,B=b.exec(z);if(B)r=B[1],d=a[B[2]];else if(B=m.exec(z))r=B[2][0].toLowerCase()+B[2].substr(1),d=B[1].toLowerCase();r&&d&&(r=g.getPropertyMetadata(c,r),n.setDeepValue(d,w,r))}h=0;for(t=Object.getOwnPropertyNames(g.getPropertiesMetadata(c));h<t.length;h++)if(r=t[h],w=g.getPropertyMetadata(c,r),d=w.type,z=w.types,void 0===w.value&&p.call(c,r)&&(w.value=c[r]),!w.cast&&d){r=w;w=0;for(z=d;Array.isArray(z)&&1===z.length&&"string"!==typeof z[0]&&"number"!==typeof z[0];)z=z[0],w++;d=
f.isOneOf(z)?0===w?f.ensureOneOf(z):f.ensureNArrayTyped(f.ensureOneOf(z),w):1===w?f.ensureArray(z):1<w?f.ensureNArray(z,w):f.ensureType(d);r.cast=d}else!w.cast&&z&&(Array.isArray(z)?w.cast=f.ensureArrayTyped(f.ensureOneOfType(z[0])):w.cast=f.ensureOneOfType(z));l.processPrototypeMetadatas(g.getPropertiesMetadata(c),k);return g.getPropertiesMetadata(c)};d.processClass=function(a){for(var b=a.prototype,k=b.declaredClass,e=a._meta.bases,m={},f=e.length-1;0<=f;f--)g.merge(m,g.getMetadata(e[f].prototype));
var d=m.properties;l.processClassMetadatas(d,k);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:d,autoDestroy:!!m.autoDestroy}});for(var p={},k=function(a){var b=d[a];p[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):b.value},set:function(c){var k=this.__accessor__;if(!k)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:c});else if(!Object.isFrozen(this)){if(k.initialized&&b.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+
a+"' of "+this.declaredClass);if(2===k.lifecycle&&b.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+a+"' of "+this.declaredClass);k.set(a,c)}}}},e=0,f=Object.getOwnPropertyNames(d);e<f.length;e++)k(f[e]);Object.defineProperties(a.prototype,p);if(m.parameters)for(a=0,k=Object.getOwnPropertyNames(m.parameters);a<k.length;a++)e=k[a],f=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},(f=c.autocastMethod(b,e,f))&&Object.defineProperty(b,e,f);return m}})},"esri/core/accessorSupport/metadata":function(){define(["require",
"exports","./utils"],function(h,d,n){function f(a){return null!=a.__accessorMetadata__}function l(a){return f(a)&&null!=g(a).properties}function g(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function e(a){a=g(a);var b=a.properties;b||(b=a.properties={});return b}function c(a,b){var c=g(a);a=c.parameters;a||(a=c.parameters={});c=a[b];c||(c=[],a[b]=c);return c}function p(b){return a.test(b)?
"replace":"merge"}function b(a){return m.test(a)?p(a.slice(11)):"merge"}Object.defineProperty(d,"__esModule",{value:!0});d.hasMetadata=f;d.hasPropertiesMetadata=l;d.hasPropertyMetadata=function(a,b){return l(a)&&null!=e(a)[b]};d.hasParametersMetadata=function(a,b){return f(a)&&null!=g(a).parameters&&null!=g(a).parameters[b]};d.getMetadata=g;d.getPropertiesMetadata=e;d.getPropertyMetadata=function(a,b){a=e(a);var c=a[b];c||(c=a[b]={});return c};d.setPropertyMetadata=function(a,b,c){e(a)[b]=c};d.getParametersMetadata=
c;d.getParameterMetadata=function(a,b,e){var k=c(a,b)[e];k||(c(a,b)[e]=k={index:e});return k};d.merge=function(a,c){return n.merge(a,c,b)};d.mergeProperty=function(a,b){return n.merge(a,b,p)};var a=/^[^.]+\.(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/,m=/^properties\./})},"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(h,d,n,f){function l(b){var a="_meta"in b?n.ensureType(b):b;return function(){for(var b=[],c=
0;c<arguments.length;c++)b[c]=arguments[c];b.push(a);return"number"===typeof b[2]?e.apply(this,b):g.apply(this,b)}}function g(b,a,c,e){f.getPropertyMetadata(b,a).cast=e}function e(b,a,c,e){f.getParameterMetadata(b,a,c).cast=e}function c(b){return function(a,c,e){f.getPropertyMetadata(a,b).cast=a[c]}}Object.defineProperty(d,"__esModule",{value:!0});var p=Object.prototype.toString;d.autocastMethod=function(b,a,c){if(f.hasParametersMetadata(b,a)){var e=f.getParametersMetadata(b,a).filter(function(a){return null!=
a.cast});if(e.length){var m=c.value;c.value=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<e.length;b++){var c=e[b];a[c.index]=c.cast(a[c.index])}return m.apply(this,a)};return c}console.warn("Method "+b.declaredClass+"::"+a+" is decorated with @cast but no parameters are decorated")}};d.cast=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];if(3!==b.length||"string"!==typeof b[1]){if(1===b.length&&"[object Function]"===p.call(b[0]))return l(b[0]);
if(1===b.length&&"string"===typeof b[0])return c(b[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(h,d,n,f,l,g,e,c,p){function b(a){r.has(a)?w.splice(w.indexOf(a),1):r.add(a);w.push(a);z||(z=g.schedule(m))}function a(a){if(!a.removed){var b=a.callback,c=a.path,k=a.oldValue,m=a.target,g=e.valueOf(m,a.propertyPath,!0);f.equals(k,g)||(a.oldValue=g,b.call(m,g,k,c,m))}}function m(){if(z){z=
null;var b=w;w=t.acquire();r.clear();for(var c=t.acquire(),e=0;e<b.length;e++){var k=b[e];a(k);k.removed&&c.push(k)}for(e=0;e<w.length;e++)k=w[e],k.removed&&(c.push(k),r.delete(k),w.splice(e,1),--e);for(e=0;e<c.length;e++)u.pool.release(c[e]);t.release(b);t.release(c);B.forEach(function(a){return a()})}}function k(a,k,m){var g=c.parse(a,k,m,function(a,k,m){var q=e.valueOf(a,k,!0),f,d=p.wire(a,k,function(a,c){a.__accessor__.destroyed?g.remove():(f||(f=u.pool.acquire(a,c,q,m),q=null),b(f))});return{remove:c.once(function(){d.remove();
f&&(f.removed=!0,b(f),f=null);g=d=q=null})}});return g}function q(a,b,k){var m=c.parse(a,b,k,function(a,b,c){var k=e.valueOf(a,b,!0),g=!1;return p.wire(a,b,function(a,b){if(a.__accessor__.destroyed)m.remove();else if(!g){g=!0;var q=e.valueOf(a,b,!0);f.equals(k,q)||c.call(a,q,k,b,a);k=e.valueOf(a,b,!0);g=!1}})});return m}function v(a,b,c,e){void 0===e&&(e=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:e?q(a,b,c):k(a,b,c)}Object.defineProperty(d,"__esModule",{value:!0});var u=
function(){function a(a,b,e,k){this.target=a;this.path=b;this.oldValue=e;this.callback=k;this.removed=!1;this.propertyPath=c.pathToStringOrArray(b)}a.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0};a.pool=new l(a,!0);return a}(),t=new n,r=new Set,w=t.acquire(),z;d.dispatchTarget=function(b){for(var c=t.copy(w),e=0;e<c.length;e++){var k=c[e];k.target===b&&(a(k),r.delete(k),w.splice(w.indexOf(k),1))}};d.removeTarget=function(a){for(var b=
0;b<w.length;b++){var c=w[b];c.target===a&&(c.removed=!0)}};d.dispatch=m;var B=new Set;d.afterDispatch=function(a){B.add(a);return{remove:function(){B.delete(a)}}};d.watch=v;d.isValueInUse=function(a){return w.some(function(b){return b.oldValue===a})};d.default=v})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(h,d,n){function f(e){e.length=0}var l=Array.prototype.splice;h=function(){function e(c,e){void 0===c&&(c=50);void 0===e&&(e=50);this._pool=new n(Array,
!1,f,e,c)}e.prototype.acquire=function(){return this._pool.acquire()};e.prototype.copy=function(c){var e=this.acquire();c.unshift(0,0);l.apply(e,c);c.splice(0,2);return e};e.prototype.release=function(c){this._pool.release(c)};e.acquire=function(){return g.acquire()};e.copy=function(c){return g.copy(c)};e.release=function(c){return g.release(c)};return e}();var g=new h(100);return h})},"esri/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(h,
d,n,f,l){function g(a){void 0===a&&(a=d.now());d.debug.rafId=null;0<z.length&&(d.debug.rafId=e());if(0<k){var b=a-k;u=Math.min(b,u);if(b<q)return}d.debug.executeFrameTasks(a)}function e(){return d.debug.requestNextFrame?d.debug.requestNextFrame(b):b()}function c(){for(var a=0;a<z.length;){var b=z[a];a++;if(b.removed){z.splice(a-1,1);for(var c=0;c<r.length;c++){var e=r[c];if(b.phases[e]){var e=B[e],k=e.indexOf(b);-1!==k&&e.splice(k,1)}}}}}function p(){for(;w.length;){var a=w.shift();a.isActive&&(a.isActive=
!1,a.callback())}d.debug.willDispatch=!1}function b(){return l(g)}Object.defineProperty(d,"__esModule",{value:!0});d.now=f;var a=function(){return function(a){this.phases=a;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),m=function(){function a(a){this.callback=a;this.isActive=!0}a.prototype.remove=function(){this.isActive=!1};return a}(),k=-1,q=0,v=0,u=Number.POSITIVE_INFINITY,t={time:0,deltaTime:0,tickTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},
r=["prepare","preRender","render","postRender","update"],w=[],z=[],B={prepare:[],preRender:[],render:[],postRender:[],update:[]},A=function(){function a(a){this._task=a}a.prototype.remove=function(){this._task.removed=!0};a.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=d.now())};a.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=d.now()-this._task.pausedAt))};return a}();d.FrameTaskHandle=A;d.debug=
{frameTasks:z,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===a&&(a=!1);for(var b=0;b<z.length;b++)z[b].removed=!0;a&&c()},dispatch:p,executeFrameTasks:function(a){void 0===a&&(a=d.now());0>k&&(k=a);var b=a-k,e=0<v?v:u,m=Math.max(0,b-e);k=a;for(var g=0;g<z.length;g++){var q=z[g];-1!==q.epoch&&(q.dt=b)}for(g=0;g<r.length;g++)for(var b=r[g],f=B[b],p=0;p<f.length;p++)q=f[(p+x)%f.length],q.paused||q.removed||(0===g&&q.ticks++,-1===q.epoch&&(q.epoch=a),t.time=a,t.deltaTime=
q.dt,t.tickTime=Math.min(u,33),t.elapsedFrameTime=d.now()-a,t.frameDuration=e-m,t.spendInTask=a-q.epoch,q.phases[b].call(q,t));c();++x}};d.schedule=function(a){a=new m(a);w.push(a);d.debug.willDispatch||(d.debug.willDispatch=!0,n(p));return a};d.addFrameTask=function(b){var c=new a(b);z.push(c);for(var m=0,g=r;m<g.length;m++){var q=g[m];b[q]&&B[q].push(c)}d.debug.rafId||(k=-1,d.debug.rafId=e());return new A(c)};d.setFrameRate=function(a){if(0>=a)v=q=0;else{var b=1.05*u;a=Math.ceil(1E3/a/b);q=(a-1)*
b;v=a*u}};var x=0;d.requestNextFrame=e})},"esri/core/nextTick":function(){define(["require","exports","./global"],function(h,d,n){function f(){if(n.postMessage&&!n.importScripts){var b=n.onmessage,a=!0;n.onmessage=function(){a=!1};n.postMessage("","*");n.onmessage=b;return a}return!1}function l(b){c.push(b);1===c.length&&e(function(){for(var a=0,b=p;a<b.length;a++)(0,b[a])();a=c.slice();for(b=c.length=0;b<a.length;b++)(0,a[b])()})}var g=n.MutationObserver||n.WebKitMutationObserver,e=function(){if(n.process&&
n.process.nextTick)return function(a){n.process.nextTick(a)};if(n.Promise)return function(a){n.Promise.resolve().then(a)};if(g){var b=[],a=document.createElement("div");(new g(function(){for(;0<b.length;)b.shift()()})).observe(a,{attributes:!0});return function(c){b.push(c);a.setAttribute("queueStatus","1")}}if(f()){var c=[];n.addEventListener("message",function(a){if(a.source===n&&"esri-nexttick-message"===a.data)for(a.stopPropagation();c.length;)c.shift()()},!0);return function(a){c.push(a);n.postMessage("esri-nexttick-message",
"*")}}return n.setImmediate?function(a){return n.setImmediate(a)}:function(a){return n.setTimeout(a,0)}}(),c=[],p=[];(function(b){b.before=function(a){p.push(a);return{remove:function(){p=p.filter(function(b){return b!==a})}}}})(l||(l={}));return l})},"esri/core/now":function(){define(["require","exports","./global"],function(h,d,n){return function(){var f=n.performance||{};if(f.now)return function(){return f.now()};if(f.webkitNow)return function(){return f.webkitNow()};if(f.mozNow)return function(){return f.mozNow()};
if(f.msNow)return function(){return f.msNow()};if(f.oNow)return function(){return f.oNow()};var d;d=f.timing&&f.timing.navigationStart?f.timing.navigationStart:Date.now();return function(){return Date.now()-d}}()})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(h,d,n,f){var l=f();h=n.requestAnimationFrame;if(!h){d=["ms","moz","webkit","o"];for(var g=0;g<d.length&&!h;++g)h=n[d[g]+"RequestAnimationFrame"];h||(h=function(e){var c=f(),g=Math.max(0,
16-(c-l)),b=n.setTimeout(function(){e(f())},g);l=c+g;return b})}return h})},"esri/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],function(h,d,n,f){function l(g,e,c,f){var b;Array.isArray(e)?b=e:-1<e.indexOf(",")&&(b=e.split(/\s*,\s*/));if(b){var a=[];for(e=0;e<b.length;e++)a.push(l(g,b[e],c,f));a.remove=function(){for(var b=0;b<a.length;b++)a[b].remove()};return a}return f(g,e)}return function(){function g(){}g.prototype.emit=function(e,c){if(this.hasEventListener(e))return c=
c||{},c.target||(c.target=this),f.emit(this,e,c)};g.prototype.on=function(e,c){return l(this,e,c,function(e,b){return n.after(e,"on"+b,c,!0)})};g.prototype.hasEventListener=function(e){e="on"+e;return!(!this[e]||!this[e].after)};return g}()})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/enumeration ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){function k(a){for(var b in a)d.hasOwnProperty(b)||(d[b]=a[b])}Object.defineProperty(d,"__esModule",{value:!0});k(n);k(f);k(l);k(g);k(e);k(c);k(p);k(b);k(a);k(m)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.aliasOf=function(f){return function(d,g){n.getPropertyMetadata(d,g).aliasOf=f}}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.autoDestroy=function(){return function(f,d,g){n.getMetadata(f).autoDestroy=!0;return f[d]}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.declared=function(d){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];h=function(){return this||{}};h.__bases__=[d].concat(f);return h}})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["require",
"exports","../../kebabDictionary","./property"],function(h,d,n,f){function l(g){return f.property({type:g})}Object.defineProperty(d,"__esModule",{value:!0});d.enumeration=l;(function(g){g.serializable=function(){return function(e){e=e instanceof n.KebabDictionary?e:new n.KebabDictionary(e,{ignoreUnknown:!0});return f.property({type:e.apiValues,json:{type:e.jsonValues,read:{reader:e.read},write:{writer:e.write}}})}}})(l=d.enumeration||(d.enumeration={}))})},"esri/core/kebabDictionary":function(){define(["require",
"exports"],function(h,d){function n(d,g){void 0===g&&(g={});return new f(d,g)}var f=function(){function f(g,e){void 0===e&&(e={ignoreUnknown:!1});var c=this;this.jsonToAPI=g;this.options=e;this.apiValues=[];this.jsonValues=[];this.apiToJSON=this.invertMap(g);this.apiValues=this.getKeysSorted(this.apiToJSON);this.jsonValues=this.getKeysSorted(this.jsonToAPI);this.read=function(e){return c.fromJSON(e)};this.write=function(e,b,a){e=c.toJSON(e);void 0!==e&&(b[a]=e)}}f.prototype.toJSON=function(g){return this.apiToJSON.hasOwnProperty(g)?
this.apiToJSON[g]:this.options.ignoreUnknown?void 0:g};f.prototype.fromJSON=function(g){return this.jsonToAPI.hasOwnProperty(g)?this.jsonToAPI[g]:this.options.ignoreUnknown?void 0:g};f.prototype.invertMap=function(g){var e={},c;for(c in g)e[g[c]]=c;return e};f.prototype.getKeysSorted=function(g){var e=[],c;for(c in g)e.push(c);e.sort();return e};return f}();(function(d){d.strict=function(){return function(g){return new d.KebabDictionary(g,{ignoreUnknown:!0})}};d.KebabDictionary=f})(n||(n={}));return n})},
"esri/core/accessorSupport/decorators/property":function(){define("require exports ../../has ../../lang ../../Logger ../metadata".split(" "),function(h,d,n,f,l,g){Object.defineProperty(d,"__esModule",{value:!0});l.getLogger("esri.core.accessorSupport.decorators.property");d.property=function(e){void 0===e&&(e={});return function(c,d){var b=c.constructor.prototype;b!==Function.prototype&&((c=Object.getOwnPropertyDescriptor(c,d))&&(c.get||c.set)?(e=f.clone(e),c.set&&(e.set=c.set),c.get&&(e.get=c.get)):
c&&c.hasOwnProperty("value")&&(e=f.clone(e),e.value=c.value),d=g.getPropertyMetadata(b,d),g.mergeProperty(d,e))}};d.propertyJSONMeta=function(e,c,f){e=g.getPropertyMetadata(e.constructor.prototype,f);e.json||(e.json={});e=e.json;void 0!==c&&(e.origins||(e.origins={}),e.origins[c]||(e.origins[c]={}),e=e.origins[c]);return e}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(h,d,n,f){Object.defineProperty(d,"__esModule",{value:!0});
d.reader=function(d,g,e){var c,p;void 0===g||Array.isArray(g)?(p=d,e=g,c=[void 0]):(p=g,c=Array.isArray(d)?d:[d]);return function(b,a,m){var k=b.constructor.prototype;c.forEach(function(c){c=f.propertyJSONMeta(b,c,p);c.read&&"object"!==typeof c.read&&(c.read={});n.setDeepValue("read.reader",k[a],c);e&&(c.read.source=(c.read.source||[]).concat(e))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});
d.shared=function(d){return function(f,h){f[h]=d}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(h,d,n,f){function l(a,b){a.read&&("function"===typeof a.read?b.push(a.read):"object"===typeof a.read&&a.read.reader&&b.push(a.read.reader))}function g(a,b){a.write&&("function"===typeof a.write?b.push(a.write):"object"===typeof a.write&&a.write.writer&&b.push(a.write.writer))}function e(a){var b=[];a=f.getPropertiesMetadata(a.prototype);
if(!a)return b;for(var c in a){var e=a[c];e.cast&&b.push(e.cast);e.copy&&b.push(e.copy);if(e=e.json)if(l(e,b),g(e,b),e=e.origins)for(var d in e){var p=e[d];l(p,b);g(p,b)}}return b}function c(a){var c={values:{},descriptors:{}},k=["__bases__"],g=f.getPropertiesMetadata(a.prototype),d=e(a);Object.getOwnPropertyNames(a.prototype).filter(function(c){return-1!==k.indexOf(c)||g&&g.hasOwnProperty(c)||!b(Object.getOwnPropertyDescriptor(a.prototype,c))&&-1!==d.indexOf(a.prototype[c])?!1:!0}).forEach(function(e){var k=
Object.getOwnPropertyDescriptor(a.prototype,e);b(k)?c.descriptors[e]=k:c.values[e]=a.prototype[e]});return c}function p(a){var c=Object.getOwnPropertyNames(a),e=Object.getPrototypeOf(a.prototype).constructor,g=Object.getOwnPropertyNames(Function);g.push("__bases__");var f=Object.getOwnPropertyNames(e),d={values:{},descriptors:{}};c.filter(function(b){return-1!==g.indexOf(b)?!1:-1===f.indexOf(b)||e[b]!==a[b]?!0:!1}).forEach(function(c){var e=Object.getOwnPropertyDescriptor(a,c);b(e)?d.descriptors[c]=
e:d.values[c]=a[c]});return d}function b(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(d,"__esModule",{value:!0});d.subclass=function(a){return function(b){var e=c(b),m=p(b);null!=a&&(e.values.declaredClass=a);b=n(b.__bases__,e.values);Object.defineProperties(b.prototype,e.descriptors);for(var g in m.values)b[g]=m.values[g];Object.defineProperties(b,m.descriptors);return b}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],
function(h,d,n,f){Object.defineProperty(d,"__esModule",{value:!0});d.writer=function(d,g,e){var c,p;void 0===g?(p=d,c=[void 0]):"string"!==typeof g?(p=d,c=[void 0],e=g):(p=g,c=Array.isArray(d)?d:[d]);return function(b,a,m){var k=b.constructor.prototype;c.forEach(function(c){c=f.propertyJSONMeta(b,c,p);c.write&&"object"!==typeof c.write&&(c.write={});e&&n.setDeepValue("write.target",e,c);n.setDeepValue("write.writer",k[a],c)})}}})},"esri/core/collectionUtils":function(){define(["require","exports",
"./Collection"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.referenceSetter=function(f,d,g){void 0===g&&(g=n);d||(d=new g);d.removeAll();f&&(Array.isArray(f)||f.isInstanceOf&&f.isInstanceOf(n))?d.addMany(f):d.add(f);return d};d.castForReferenceSetter=function(f){return f}})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),
function(h,d,n,f,l,g,e,c,p){function b(a,b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var c=new this;c.read(a,b);return c}var a=function(a){function k(){return null!==a&&a.apply(this,arguments)||this}n(k,a);k.prototype.read=function(a,b){c.default(this,a,b);return this};k.prototype.write=function(a,b){return p.default(this,a||{},b)};k.prototype.toJSON=function(a){return this.write(null,a)};k.fromJSON=function(a,c){return b.call(this,a,c)};return k=f([e.subclass("esri.core.JSONSupport")],
k)}(e.declared(l));a.prototype.toJSON.isDefaultToJSON=!0;g.after(function(c){g.hasMixin(c,a)&&(c.fromJSON=b.bind(c))});return a})},"esri/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(h,d,n,f,l,g){function e(e,b,a){void 0===a&&(a=c);if(b&&"object"===typeof b){for(var m=l.getProperties(e),k=m.metadatas,q={},d=0,p=Object.getOwnPropertyNames(b);d<p.length;d++){var h=q,r=k,w=p[d],z=b,n=a,A=g.originSpecificReadPropertyDefinition(r[w],
n);A&&(!A.read||!1!==A.read.enabled&&!A.read.source)&&(h[w]=!0);for(var x=0,C=Object.getOwnPropertyNames(r);x<C.length;x++){var y=C[x],A=g.originSpecificReadPropertyDefinition(r[y],n),E;a:{E=w;var D=z;if(A&&A.read&&!1!==A.read.enabled&&A.read.source)if(A=A.read.source,"string"===typeof A){if(A===E||-1<A.indexOf(".")&&0===A.indexOf(E)&&f.exists(A,D)){E=!0;break a}}else for(var F=0;F<A.length;F++){var L=A[F];if(L===E||-1<L.indexOf(".")&&0===L.indexOf(E)&&f.exists(L,D)){E=!0;break a}}E=!1}E&&(h[y]=!0)}}m.setDefaultOrigin(a.origin);
p=0;for(h=Object.getOwnPropertyNames(q);p<h.length;p++)d=h[p],w=(r=g.originSpecificReadPropertyDefinition(k[d],a).read)&&r.source,z=void 0,z=w&&"string"===typeof w?f.valueOf(b,w):b[d],r&&r.reader&&(z=r.reader.call(e,z,b,a)),void 0!==z&&m.set(d,z);if(!a||!a.ignoreDefaults)for(b=0,k=Object.getOwnPropertyNames(k);b<k.length;b++)d=k[b],q[d]||(p=e,h=m,r=a,w=(w=g.originSpecificReadPropertyDefinition(h.metadatas[d],r))&&w.default,void 0!==w&&(p="function"===typeof w?w.call(p,d,r):w,void 0!==p&&h.set(d,p)));
m.setDefaultOrigin("user")}}Object.defineProperty(d,"__esModule",{value:!0});var c={origin:"service"};d.read=e;d.readLoadable=function(e,b,a,g){void 0===g&&(g=c);b=n({},g,{messages:[]});a(b);b.messages.forEach(function(a){"warning"!==a.type||e.loaded?g&&g.messages.push(a):e.loadWarnings.push(a)})};d.default=e})},"esri/core/accessorSupport/write":function(){define("require exports ../arrayUtils ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(h,d,n,
f,l,g,e,c){function p(b,c,e,d,p,h){if(!d||!d.write)return!1;var k=b.get(e);if(!p&&d.write.overridePolicy){var m=d.write.overridePolicy.call(b,k,e,h);void 0!==m&&(p=m)}p||(p=d.write);if(!p||!1===p.enabled)return!1;if((null===k&&!p.allowNull||void 0===k)&&p.isRequired)return(k=new f("web-document-write:property-required","Missing value for required property '"+e+"' on '"+b.declaredClass+"'",{propertyName:e,target:b}),h)&&h.messages?h.messages.push(k):k&&!h&&a.error(k.name,k.message),!1;if(void 0===
k||null===k&&!p.allowNull||!p.ignoreOrigin&&h&&h.origin&&c.store.originOf(e)<g.nameToId(h.origin))return!1;c=d.default;void 0===c?h=!1:"function"===typeof c?Array.isArray(k)?(h=c.call(b,e,h),h=n.equals(h,k)):h=!1:h=c===k;return h?!1:!0}function b(a,b,q){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return e.merge(b,a.toJSON());var k=e.getProperties(a),m=k.metadatas,f;for(f in m){var d=c.originSpecificWritePropertyDefinition(m[f],q);if(p(a,k,f,d,null,q)){var h=a.get(f),
l={};d.write.writer.call(a,h,l,"string"===typeof d.write.target?d.write.target:f,q);d=l;0<Object.keys(d).length&&(b=e.merge(b,d),q&&q.writtenProperties&&q.writtenProperties.push({target:a,propName:f,oldOrigin:g.idToReadableName(k.store.originOf(f)),newOrigin:q.origin}))}}return b}Object.defineProperty(d,"__esModule",{value:!0});var a=l.getLogger("esri.core.accessorSupport.write");d.willPropertyWrite=function(a,b,g,f){var k=e.getProperties(a),m=c.originSpecificWritePropertyDefinition(k.metadatas[b],
f);return m?p(a,k,b,m,g,f):!1};d.write=b;d.default=b})},"esri/core/arrayUtils":function(){define(["require","exports","@dojo/framework/shim/array","./RandomLCG"],function(h,d,n,f){function l(b,c,e,g){void 0===e&&(e=b.length);g=g||a;for(var k=Math.max(0,g.last-10),m=-1,q=k;q<e;++q)if(b[q]===c){m=q;break}if(-1===m){for(q=0;q<k;++q)if(b[q]===c){m=q;break}if(-1===m)return}b[m]=b[e-1];b.pop();g.last=m;return c}function g(a,b,c,e){void 0===c&&(c=a.length);var k=[];b.forEach(function(b){void 0!==l(a,b,c,
e)&&(k.push(b),--c)});return k}function e(a,b){return-1===a.indexOf(b)}function c(a,b,c){return!a.some(b.bind(null,c))}function p(a){return a}Object.defineProperty(d,"__esModule",{value:!0});d.find=n.find;d.findIndex=n.findIndex;d.unique=function(a){return a.filter(function(a,b,c){return c.indexOf(a)===b})};d.equals=function(a,b,c){if(!a&&!b)return!0;if(!a||!b||a.length!==b.length)return!1;if(c)for(var e=0;e<a.length;e++){if(!c(a[e],b[e]))return!1}else for(e=0;e<a.length;e++)if(a[e]!==b[e])return!1;
return!0};d.difference=function(a,b,g){var k;g?(k=b.filter(c.bind(null,a,g)),a=a.filter(c.bind(null,b,g))):(k=b.filter(e.bind(null,a)),a=a.filter(e.bind(null,b)));return{added:k,removed:a}};d.intersect=function(a,b,c){return a&&b?c?a.filter(function(a){return-1<d.findIndex(b,function(b){return c(a,b)})}):a.filter(function(a){return-1<b.indexOf(a)}):[]};d.constant=function(a,b){for(var c=Array(a),e=0;e<a;e++)c[e]=b;return c};d.range=function(a,b){void 0===b&&(b=a,a=0);for(var c=Array(b-a),e=a;e<b;e++)c[e-
a]=e;return c};d.binaryIndexOf=function(a,b,c){for(var e=a.length,k=0,g=e-1;k<g;){var m=k+Math.floor((g-k)/2);b>a[m]?k=m+1:g=m}g=a[k];return c?b>=a[e-1]?-1:g===b?k:k-1:g===b?k:-1};d.concatAll=function(a){return a.reduce(function(a,b){return a.concat(b||[])},[])};var b=function(){return function(){this.last=0}}();d.RemoveHint=b;var a=new b;h=function(){return function(a){var c=this;this._array=a;this._hint=new b;this.remove=function(a){return l(c._array,a,c._array.length,c._hint)};this.removeMany=
function(a){return g(c._array,a,c._array.length,c._hint)}}}();d.UnorderedRemover=h;d.removeUnordered=l;d.removeUnorderedMany=g;d.shuffle=function(a,b){b=(m.seed=b)?function(){return m.getFloat()}:Math.random;for(var c=a.length-1;0<c;c--){var e=Math.floor(b()*(c+1)),k=a[c];a[c]=a[e];a[e]=k}return a};var m=new f;d.keysOfMap=function(a){var b=[];a.forEach(function(a,c){return b.push(c)});return b};d.keysOfSet=function(a,b){void 0===b&&(b=p);var c=[];a.forEach(function(a){return c.push(b(a))});return c};
d.fromMapValues=function(a){if(Array.from)return Array.from(a.values());var b=Array(a.size),c=0;a.forEach(function(a){b[c++]=a});return b}})},"@dojo/framework/shim/array":function(){(function(h){"object"===typeof module&&"object"===typeof module.exports?(h=h(require,exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ./number ./support/has ./support/util".split(" "),h)})(function(h,d){Object.defineProperty(d,"__esModule",
{value:!0});var n=h("tslib"),f=h("./global"),l=h("./iterator"),g=h("./number"),e=h("./support/has");h=h("./support/util");if(e.default("es6-array")&&e.default("es6-array-fill"))d.from=f.default.Array.from,d.of=f.default.Array.of,d.copyWithin=h.wrapNative(f.default.Array.prototype.copyWithin),d.fill=h.wrapNative(f.default.Array.prototype.fill),d.find=h.wrapNative(f.default.Array.prototype.find),d.findIndex=h.wrapNative(f.default.Array.prototype.findIndex);else{var c=function(a){if(isNaN(a))return 0;
a=Number(a);isFinite(a)&&(a=Math.floor(a));return Math.min(Math.max(a,0),g.MAX_SAFE_INTEGER)},p=function(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a},b=function(a,b){return 0>a?Math.max(b+a,0):Math.min(a,b)};d.from=function(a,b,e){if(null==a)throw new TypeError("from: requires an array-like object");b&&e&&(b=b.bind(e));e=c(a.length);var k="function"===typeof this?Object(new this(e)):Array(e);if(!l.isArrayLike(a)&&!l.isIterable(a))return k;if(l.isArrayLike(a)){if(0===
e)return[];for(var g=0;g<a.length;g++)k[g]=b?b(a[g],g):a[g]}else{g=0;try{for(var m=n.__values(a),f=m.next();!f.done;f=m.next()){var d=f.value;k[g]=b?b(d,g):d;g++}}catch(B){p={error:B}}finally{try{f&&!f.done&&(h=m.return)&&h.call(m)}finally{if(p)throw p.error;}}}void 0!==a.length&&(k.length=e);return k;var p,h};d.of=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return Array.prototype.slice.call(a)};d.copyWithin=function(a,e,k,g){if(null==a)throw new TypeError("copyWithin: target must be an array-like object");
var m=c(a.length);e=b(p(e),m);k=b(p(k),m);g=b(void 0===g?m:p(g),m);g=Math.min(g-k,m-e);m=1;e>k&&e<k+g&&(m=-1,k+=g-1,e+=g-1);for(;0<g;)k in a?a[e]=a[k]:delete a[e],e+=m,k+=m,g--;return a};d.fill=function(a,e,k,g){var m=c(a.length);k=b(p(k),m);for(g=b(void 0===g?m:p(g),m);k<g;)a[k++]=e;return a};d.find=function(a,b,c){b=d.findIndex(a,b,c);return-1!==b?a[b]:void 0};d.findIndex=function(a,b,e){var k=c(a.length);if(!b)throw new TypeError("find: second argument must be a function");e&&(b=b.bind(e));for(e=
0;e<k;e++)if(b(a[e],e,a))return e;return-1}}e.default("es7-array")?d.includes=h.wrapNative(f.default.Array.prototype.includes):d.includes=function(a,b,c){void 0===c&&(c=0);var e;e=a.length;e=Number(e);isNaN(e)?e=0:(isFinite(e)&&(e=Math.floor(e)),e=Math.min(Math.max(e,0),g.MAX_SAFE_INTEGER));for(;c<e;++c){var k=a[c];if(b===k||b!==b&&k!==k)return!0}return!1}})},"tslib/tslib":function(){var h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w;(function(a){function b(a,b){a!==c&&("function"===typeof Object.create?Object.defineProperty(a,
"__esModule",{value:!0}):a.__esModule=!0);return function(c,e){return a[c]=b?b(c,e):e}}var c="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(e){a(b(c,b(e)))}):"object"===typeof module&&"object"===typeof module.exports?a(b(c,b(module.exports))):a(b(c))})(function(z){var B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};h=function(a,b){function c(){this.constructor=a}B(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};d=Object.assign||function(a){for(var b,c=1,e=arguments.length;c<e;c++){b=arguments[c];for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(a[k]=b[k])}return a};n=function(a,b){var c={},e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&0>b.indexOf(e)&&(c[e]=a[e]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var k=0;for(e=Object.getOwnPropertySymbols(a);k<
e.length;k++)0>b.indexOf(e[k])&&(c[e[k]]=a[e[k]])}return c};f=function(a,b,c,e){var k=arguments.length,g=3>k?b:null===e?e=Object.getOwnPropertyDescriptor(b,c):e,m;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,e);else for(var f=a.length-1;0<=f;f--)if(m=a[f])g=(3>k?m(g):3<k?m(b,c,g):m(b,c))||g;return 3<k&&g&&Object.defineProperty(b,c,g),g};l=function(a,b){return function(c,e){b(c,e,a)}};g=function(a,b){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(a,
b)};e=function(a,b,c,e){return new (c||(c=Promise))(function(k,g){function m(a){try{d(e.next(a))}catch(I){g(I)}}function f(a){try{d(e["throw"](a))}catch(I){g(I)}}function d(a){a.done?k(a.value):(new c(function(b){b(a.value)})).then(m,f)}d((e=e.apply(a,b||[])).next())})};c=function(a,b){function c(a){return function(b){return e([a,b])}}function e(c){if(g)throw new TypeError("Generator is already executing.");for(;k;)try{if(g=1,m&&(f=c[0]&2?m["return"]:c[0]?m["throw"]||((f=m["return"])&&f.call(m),0):
m.next)&&!(f=f.call(m,c[1])).done)return f;if(m=0,f)c=[c[0]&2,f.value];switch(c[0]){case 0:case 1:f=c;break;case 4:return k.label++,{value:c[1],done:!1};case 5:k.label++;m=c[1];c=[0];continue;case 7:c=k.ops.pop();k.trys.pop();continue;default:if(!(f=k.trys,f=0<f.length&&f[f.length-1])&&(6===c[0]||2===c[0])){k=0;continue}if(3===c[0]&&(!f||c[1]>f[0]&&c[1]<f[3]))k.label=c[1];else if(6===c[0]&&k.label<f[1])k.label=f[1],f=c;else if(f&&k.label<f[2])k.label=f[2],k.ops.push(c);else{f[2]&&k.ops.pop();k.trys.pop();
continue}}c=b.call(a,k)}catch(I){c=[6,I],m=0}finally{g=f=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var k={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},g,m,f,d;return d={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};p=function(a,b){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])};b=function(a){var b="function"===typeof Symbol&&a[Symbol.iterator],c=0;return b?b.call(a):{next:function(){a&&
c>=a.length&&(a=void 0);return{value:a&&a[c++],done:!a}}}};a=function(a,b){var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var e,k=[],g;try{for(;(void 0===b||0<b--)&&!(e=a.next()).done;)k.push(e.value)}catch(F){g={error:F}}finally{try{e&&!e.done&&(c=a["return"])&&c.call(a)}finally{if(g)throw g.error;}}return k};m=function(){for(var b=[],c=0;c<arguments.length;c++)b=b.concat(a(arguments[c]));return b};k=function(a){return this instanceof k?(this.v=a,this):new k(a)};
q=function(a,b,c){function e(a){q[a]&&(p[a]=function(b){return new Promise(function(c,e){1<r.push([a,b,c,e])||g(a,b)})})}function g(a,b){try{var c=q[a](b);c.value instanceof k?Promise.resolve(c.value.v).then(m,f):d(r[0][2],c)}catch(Q){d(r[0][3],Q)}}function m(a){g("next",a)}function f(a){g("throw",a)}function d(a,b){(a(b),r.shift(),r.length)&&g(r[0][0],r[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var q=c.apply(a,b||[]),p,r=[];return p={},e("next"),
e("throw"),e("return"),p[Symbol.asyncIterator]=function(){return this},p};v=function(a){function b(b,g){c[b]=a[b]?function(c){return(e=!e)?{value:k(a[b](c)),done:"return"===b}:g?g(c):c}:g}var c,e;return c={},b("next"),b("throw",function(a){throw a;}),b("return"),c[Symbol.iterator]=function(){return this},c};u=function(a){function c(b){g[b]=a[b]&&function(c){return new Promise(function(k,g){c=a[b](c);e(k,g,c.done,c.value)})}}function e(a,b,c,e){Promise.resolve(e).then(function(b){a({value:b,done:c})},
b)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var k=a[Symbol.asyncIterator],g;return k?k.call(a):(a="function"===typeof b?b(a):a[Symbol.iterator](),g={},c("next"),c("throw"),c("return"),g[Symbol.asyncIterator]=function(){return this},g)};t=function(a,b){Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b;return a};r=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=
a;return b};w=function(a){return a&&a.__esModule?a:{"default":a}};z("__extends",h);z("__assign",d);z("__rest",n);z("__decorate",f);z("__param",l);z("__metadata",g);z("__awaiter",e);z("__generator",c);z("__exportStar",p);z("__values",b);z("__read",a);z("__spread",m);z("__await",k);z("__asyncGenerator",q);z("__asyncDelegator",v);z("__asyncValues",u);z("__makeTemplateObject",t);z("__importStar",r);z("__importDefault",w)})},"@dojo/framework/shim/global":function(){(function(h){"object"===typeof module&&
"object"===typeof module.exports?(h=h(require,exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&define.amd&&define(["require","exports"],h)})(function(h,d){Object.defineProperty(d,"__esModule",{value:!0});h=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global}();d.default=h})},"@dojo/framework/shim/iterator":function(){(function(h){"object"===typeof module&&"object"===typeof module.exports?
(h=h(require,exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&define.amd&&define(["require","exports","./Symbol","./string"],h)})(function(h,d){function n(c){return c&&"function"===typeof c[Symbol.iterator]}function f(c){return c&&"number"===typeof c.length}function l(e){if(n(e))return e[Symbol.iterator]();if(f(e))return new c(e)}Object.defineProperty(d,"__esModule",{value:!0});h("./Symbol");var g=h("./string"),e={done:!0,value:void 0},c=function(){function c(b){this._nextIndex=
-1;n(b)?this._nativeIterator=b[Symbol.iterator]():this._list=b}c.prototype.next=function(){return this._nativeIterator?this._nativeIterator.next():this._list?++this._nextIndex<this._list.length?{done:!1,value:this._list[this._nextIndex]}:e:e};c.prototype[Symbol.iterator]=function(){return this};return c}();d.ShimIterator=c;d.isIterable=n;d.isArrayLike=f;d.get=l;d.forOf=function(c,b,a){function e(){k=!0}var k=!1;if(f(c)&&"string"===typeof c)for(var d=c.length,p=0;p<d;++p){var h=c[p];if(p+1<d){var t=
h.charCodeAt(0);t>=g.HIGH_SURROGATE_MIN&&t<=g.HIGH_SURROGATE_MAX&&(h+=c[++p])}b.call(a,h,c,e);if(k)break}else if(d=l(c))for(p=d.next();!p.done;){b.call(a,p.value,c,e);if(k)break;p=d.next()}}})},"@dojo/framework/shim/Symbol":function(){(function(h){"object"===typeof module&&"object"===typeof module.exports?(h=h(require,exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&define.amd&&define(["require","exports","./support/has","./global","./support/util"],h)})(function(h,d){function n(a){return a&&
("symbol"===typeof a||"Symbol"===a["@@toStringTag"])||!1}Object.defineProperty(d,"__esModule",{value:!0});var f=h("./support/has"),l=h("./global"),g=h("./support/util");d.Symbol=l.default.Symbol;if(!f.default("es6-symbol")){var e=function(a){if(!n(a))throw new TypeError(a+" is not a symbol");return a},c=Object.defineProperties,p=Object.defineProperty,b=Object.create,a=Object.prototype,m={},k=function(){var c=b(null);return function(b){for(var e=0,k;c[String(b)+(e||"")];)++e;b+=String(e||"");c[b]=
!0;k="@@"+b;Object.getOwnPropertyDescriptor(a,k)||p(a,k,{set:function(a){p(this,k,g.getValueDescriptor(a))}});return k}}(),q=function u(a){if(this instanceof q)throw new TypeError("TypeError: Symbol is not a constructor");return u(a)};d.Symbol=l.default.Symbol=function t(a){if(this instanceof t)throw new TypeError("TypeError: Symbol is not a constructor");var b=Object.create(q.prototype);a=void 0===a?"":String(a);return c(b,{__description__:g.getValueDescriptor(a),__name__:g.getValueDescriptor(k(a))})};
p(d.Symbol,"for",g.getValueDescriptor(function(a){return m[a]?m[a]:m[a]=d.Symbol(String(a))}));c(d.Symbol,{keyFor:g.getValueDescriptor(function(a){var b;e(a);for(b in m)if(m[b]===a)return b}),hasInstance:g.getValueDescriptor(d.Symbol.for("hasInstance"),!1,!1),isConcatSpreadable:g.getValueDescriptor(d.Symbol.for("isConcatSpreadable"),!1,!1),iterator:g.getValueDescriptor(d.Symbol.for("iterator"),!1,!1),match:g.getValueDescriptor(d.Symbol.for("match"),!1,!1),observable:g.getValueDescriptor(d.Symbol.for("observable"),
!1,!1),replace:g.getValueDescriptor(d.Symbol.for("replace"),!1,!1),search:g.getValueDescriptor(d.Symbol.for("search"),!1,!1),species:g.getValueDescriptor(d.Symbol.for("species"),!1,!1),split:g.getValueDescriptor(d.Symbol.for("split"),!1,!1),toPrimitive:g.getValueDescriptor(d.Symbol.for("toPrimitive"),!1,!1),toStringTag:g.getValueDescriptor(d.Symbol.for("toStringTag"),!1,!1),unscopables:g.getValueDescriptor(d.Symbol.for("unscopables"),!1,!1)});c(q.prototype,{constructor:g.getValueDescriptor(d.Symbol),
toString:g.getValueDescriptor(function(){return this.__name__},!1,!1)});c(d.Symbol.prototype,{toString:g.getValueDescriptor(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:g.getValueDescriptor(function(){return e(this)})});p(d.Symbol.prototype,d.Symbol.toPrimitive,g.getValueDescriptor(function(){return e(this)}));p(d.Symbol.prototype,d.Symbol.toStringTag,g.getValueDescriptor("Symbol",!1,!1,!0));p(q.prototype,d.Symbol.toPrimitive,g.getValueDescriptor(d.Symbol.prototype[d.Symbol.toPrimitive],
!1,!1,!0));p(q.prototype,d.Symbol.toStringTag,g.getValueDescriptor(d.Symbol.prototype[d.Symbol.toStringTag],!1,!1,!0))}d.isSymbol=n;"hasInstance isConcatSpreadable iterator species replace search split match toPrimitive toStringTag unscopables observable".split(" ").forEach(function(a){d.Symbol[a]||Object.defineProperty(d.Symbol,a,g.getValueDescriptor(d.Symbol.for(a),!1,!1))});d.default=d.Symbol})},"@dojo/framework/shim/support/has":function(){(function(h){"object"===typeof module&&"object"===typeof module.exports?
(h=h(require,exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&define.amd&&define("require exports tslib ../../has/has ../global ../../has/has".split(" "),h)})(function(h,d){Object.defineProperty(d,"__esModule",{value:!0});var n=h("tslib"),f=h("../../has/has"),l=h("../global");d.default=f.default;n.__exportStar(h("../../has/has"),d);f.add("es6-array",function(){return["from","of"].every(function(e){return e in l.default.Array})&&["findIndex","find","copyWithin"].every(function(e){return e in
l.default.Array.prototype})},!0);f.add("es6-array-fill",function(){return"fill"in l.default.Array.prototype?1===[1].fill(9,Number.POSITIVE_INFINITY)[0]:!1},!0);f.add("es7-array",function(){return"includes"in l.default.Array.prototype},!0);f.add("es6-map",function(){if("function"===typeof l.default.Map)try{var e=new l.default.Map([[0,1]]);return e.has(0)&&"function"===typeof e.keys&&f.default("es6-symbol")&&"function"===typeof e.values&&"function"===typeof e.entries}catch(c){}return!1},!0);f.add("es6-math",
function(){return"clz32 sign log10 log2 log1p expm1 cosh sinh tanh acosh asinh atanh trunc fround cbrt hypot".split(" ").every(function(e){return"function"===typeof l.default.Math[e]})},!0);f.add("es6-math-imul",function(){return"imul"in l.default.Math?-5===Math.imul(4294967295,5):!1},!0);f.add("es6-object",function(){return f.default("es6-symbol")&&["assign","is","getOwnPropertySymbols","setPrototypeOf"].every(function(e){return"function"===typeof l.default.Object[e]})},!0);f.add("es2017-object",
function(){return["values","entries","getOwnPropertyDescriptors"].every(function(e){return"function"===typeof l.default.Object[e]})},!0);f.add("es-observable",function(){return"undefined"!==typeof l.default.Observable},!0);f.add("es6-promise",function(){return"undefined"!==typeof l.default.Promise&&f.default("es6-symbol")},!0);f.add("es6-set",function(){if("function"===typeof l.default.Set){var e=new l.default.Set([1]);return e.has(1)&&"keys"in e&&"function"===typeof e.keys&&f.default("es6-symbol")}return!1},
!0);f.add("es6-string",function(){return["fromCodePoint"].every(function(e){return"function"===typeof l.default.String[e]})&&"codePointAt normalize repeat startsWith endsWith includes".split(" ").every(function(e){return"function"===typeof l.default.String.prototype[e]})},!0);f.add("es6-string-raw",function(){function e(c){for(var b=1;b<arguments.length;b++);b=n.__spread(c);b.raw=c.raw;return b}if("raw"in l.default.String){var c=e(g||(g=n.__makeTemplateObject(["a\n",""],["a\\n",""])),1);c.raw=["a\\n"];
return"a\\n"===l.default.String.raw(c,42)}return!1},!0);f.add("es2017-string",function(){return["padStart","padEnd"].every(function(e){return"function"===typeof l.default.String.prototype[e]})},!0);f.add("es6-symbol",function(){return"undefined"!==typeof l.default.Symbol&&"symbol"===typeof Symbol()},!0);f.add("es6-weakmap",function(){if("undefined"!==typeof l.default.WeakMap){var e={},c={},g=new l.default.WeakMap([[e,1]]);Object.freeze(e);return 1===g.get(e)&&g.set(c,2)===g&&f.default("es6-symbol")}return!1},
!0);f.add("microtasks",function(){return f.default("es6-promise")||f.default("host-node")||f.default("dom-mutationobserver")},!0);f.add("postmessage",function(){return"undefined"!==typeof l.default.window&&"function"===typeof l.default.postMessage},!0);f.add("raf",function(){return"function"===typeof l.default.requestAnimationFrame},!0);f.add("setimmediate",function(){return"undefined"!==typeof l.default.setImmediate},!0);f.add("dom-mutationobserver",function(){if(f.default("host-browser")&&(l.default.MutationObserver||
l.default.WebKitMutationObserver)){var e=document.createElement("div"),c=new (l.default.MutationObserver||l.default.WebKitMutationObserver)(function(){});c.observe(e,{attributes:!0});e.style.setProperty("display","block");return!!c.takeRecords().length}return!1},!0);f.add("dom-webanimation",function(){return f.default("host-browser")&&void 0!==l.default.Animation&&void 0!==l.default.KeyframeEffect},!0);f.add("abort-controller",function(){return"undefined"!==typeof l.default.AbortController});f.add("abort-signal",
function(){return"undefined"!==typeof l.default.AbortSignal});var g})},"@dojo/framework/has/has":function(){(function(h){"object"===typeof module&&"object"===typeof module.exports?(h=h(require,exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&define.amd&&define(["require","exports"],h)})(function(h,d){function n(e){e=e.toLowerCase();return!!(e in c||e in d.testCache||d.testFunctions[e])}function f(e,b,a){void 0===a&&(a=!1);var m=e.toLowerCase();if(n(m)&&!a&&!(m in c))throw new TypeError('Feature "'+
e+'" exists and overwrite not true.');"function"===typeof b?d.testFunctions[m]=b:b&&b.then?g[e]=b.then(function(a){d.testCache[e]=a;delete g[e]},function(){delete g[e]}):(d.testCache[m]=b,delete d.testFunctions[m])}function l(e){var b=e.toLowerCase();if(b in c)e=c[b];else if(d.testFunctions[b])e=d.testCache[b]=d.testFunctions[b].call(null),delete d.testFunctions[b];else if(b in d.testCache)e=d.testCache[b];else{if(e in g)return!1;throw new TypeError('Attempt to detect unregistered has feature "'+
e+'"');}return e}Object.defineProperty(d,"__esModule",{value:!0});d.testCache={};d.testFunctions={};var g={};h="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};var e=(h.DojoHasEnvironment||{}).staticFeatures;"DojoHasEnvironment"in h&&delete h.DojoHasEnvironment;var c=e?"function"===typeof e?e.apply(h):e:{};d.load=function(c,b,a,e){c?b([c],a):a()};d.normalize=function(c,b){function a(b){var c=e[k++];if(":"===c)return null;if("?"===e[k++]){if(!b&&
l(c))return a();a(!0);return a(b)}return c}var e=c.match(/[\?:]|[^:\?]*/g)||[],k=0;return(c=a())&&b(c)};d.exists=n;d.add=f;d.default=l;f("debug",!0);f("dojo-debug",!1);f("host-browser","undefined"!==typeof document&&"undefined"!==typeof location);f("host-node",function(){if("object"===typeof process&&process.versions&&process.versions.node)return process.versions.node})})},"@dojo/framework/shim/support/util":function(){(function(h){"object"===typeof module&&"object"===typeof module.exports?(h=h(require,
exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&define.amd&&define(["require","exports"],h)})(function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.getValueDescriptor=function(d,f,h,g){void 0===f&&(f=!1);void 0===h&&(h=!0);void 0===g&&(g=!0);return{value:d,enumerable:f,writable:h,configurable:g}};d.wrapNative=function(d){return function(f){for(var h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];return d.apply(f,h)}}})},"@dojo/framework/shim/string":function(){(function(h){"object"===
typeof module&&"object"===typeof module.exports?(h=h(require,exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./support/has ./support/util".split(" "),h)})(function(h,d){Object.defineProperty(d,"__esModule",{value:!0});var n=h("tslib"),f=h("./global"),l=h("./support/has");h=h("./support/util");d.HIGH_SURROGATE_MIN=55296;d.HIGH_SURROGATE_MAX=56319;d.LOW_SURROGATE_MIN=56320;d.LOW_SURROGATE_MAX=57343;if(l.default("es6-string")&&l.default("es6-string-raw"))d.fromCodePoint=
f.default.String.fromCodePoint,d.raw=f.default.String.raw,d.codePointAt=h.wrapNative(f.default.String.prototype.codePointAt),d.endsWith=h.wrapNative(f.default.String.prototype.endsWith),d.includes=h.wrapNative(f.default.String.prototype.includes),d.normalize=h.wrapNative(f.default.String.prototype.normalize),d.repeat=h.wrapNative(f.default.String.prototype.repeat),d.startsWith=h.wrapNative(f.default.String.prototype.startsWith);else{var g=function(e,c,g,b,a){void 0===a&&(a=!1);if(null==c)throw new TypeError("string."+
e+" requires a valid string to search against.");e=c.length;return[c,String(g),Math.min(Math.max(b!==b?a?e:0:b,0),e)]};d.fromCodePoint=function(){for(var e=0;e<arguments.length;e++);e=arguments.length;if(!e)return"";for(var c=String.fromCharCode,g=[],b=-1,a="";++b<e;){var m=Number(arguments[b]);if(!(isFinite(m)&&Math.floor(m)===m&&0<=m&&1114111>=m))throw RangeError("string.fromCodePoint: Invalid code point "+m);65535>=m?g.push(m):(m-=65536,g.push((m>>10)+d.HIGH_SURROGATE_MIN,m%1024+d.LOW_SURROGATE_MIN));
if(b+1===e||16384<g.length)a+=c.apply(null,g),g.length=0}return a};d.raw=function(e){for(var c=[],g=1;g<arguments.length;g++)c[g-1]=arguments[g];var g=e.raw,b="",a=c.length;if(null==e||null==e.raw)throw new TypeError("string.raw requires a valid callSite object with a raw value");for(var m=0,k=g.length;m<k;m++)b+=g[m]+(m<a&&m<k-1?c[m]:"");return b};d.codePointAt=function(e,c){void 0===c&&(c=0);if(null==e)throw new TypeError("string.codePointAt requries a valid string.");var g=e.length;c!==c&&(c=0);
if(!(0>c||c>=g)){var b=e.charCodeAt(c);return b>=d.HIGH_SURROGATE_MIN&&b<=d.HIGH_SURROGATE_MAX&&g>c+1&&(e=e.charCodeAt(c+1),e>=d.LOW_SURROGATE_MIN&&e<=d.LOW_SURROGATE_MAX)?1024*(b-d.HIGH_SURROGATE_MIN)+e-d.LOW_SURROGATE_MIN+65536:b}};d.endsWith=function(e,c,f){if(""===c)return!0;if("undefined"===typeof f)f=e.length;else if(null===f||isNaN(f))return!1;f=n.__read(g("endsWith",e,c,f,!0),3);e=f[0];c=f[1];f=f[2];var b=f-c.length;return 0>b?!1:e.slice(b,f)===c};d.includes=function(e,c,f){void 0===f&&(f=
0);f=n.__read(g("includes",e,c,f),3);e=f[0];c=f[1];f=f[2];return-1!==e.indexOf(c,f)};d.repeat=function(e,c){void 0===c&&(c=0);if(null==e)throw new TypeError("string.repeat requires a valid string.");c!==c&&(c=0);if(0>c||Infinity===c)throw new RangeError("string.repeat requires a non-negative finite count.");for(var g="";c;)c%2&&(g+=e),1<c&&(e+=e),c>>=1;return g};d.startsWith=function(e,c,f){void 0===f&&(f=0);c=String(c);f=n.__read(g("startsWith",e,c,f),3);e=f[0];c=f[1];f=f[2];var b=f+c.length;return b>
e.length?!1:e.slice(f,b)===c}}l.default("es2017-string")?(d.padEnd=h.wrapNative(f.default.String.prototype.padEnd),d.padStart=h.wrapNative(f.default.String.prototype.padStart)):(d.padEnd=function(e,c,g){void 0===g&&(g=" ");if(null===e||void 0===e)throw new TypeError("string.repeat requires a valid string.");if(Infinity===c)throw new RangeError("string.padEnd requires a non-negative finite count.");if(null===c||void 0===c||0>c)c=0;e=String(e);c-=e.length;0<c&&(e+=d.repeat(g,Math.floor(c/g.length))+
g.slice(0,c%g.length));return e},d.padStart=function(e,c,g){void 0===g&&(g=" ");if(null===e||void 0===e)throw new TypeError("string.repeat requires a valid string.");if(Infinity===c)throw new RangeError("string.padStart requires a non-negative finite count.");if(null===c||void 0===c||0>c)c=0;e=String(e);c-=e.length;0<c&&(e=d.repeat(g,Math.floor(c/g.length))+g.slice(0,c%g.length)+e);return e})})},"@dojo/framework/shim/number":function(){(function(h){"object"===typeof module&&"object"===typeof module.exports?
(h=h(require,exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&define.amd&&define(["require","exports","./global"],h)})(function(h,d){function n(g){return"number"===typeof g&&l.default.isFinite(g)}function f(g){return n(g)&&Math.floor(g)===g}Object.defineProperty(d,"__esModule",{value:!0});var l=h("./global");d.EPSILON=1;d.MAX_SAFE_INTEGER=Math.pow(2,53)-1;d.MIN_SAFE_INTEGER=-d.MAX_SAFE_INTEGER;d.isNaN=function(g){return"number"===typeof g&&l.default.isNaN(g)};d.isFinite=n;d.isInteger=
f;d.isSafeInteger=function(g){return f(g)&&Math.abs(g)<=d.MAX_SAFE_INTEGER}})},"esri/core/RandomLCG":function(){define(["require","exports"],function(h,d){return function(){function d(f){void 0===f&&(f=1);this._seed=f}Object.defineProperty(d.prototype,"seed",{set:function(f){this._seed=null==f?Math.random()*d._m:f},enumerable:!0,configurable:!0});d.prototype.getInt=function(){return this._seed=(d._a*this._seed+d._c)%d._m};d.prototype.getFloat=function(){return this.getInt()/(d._m-1)};d.prototype.getIntRange=
function(f,d){return Math.round(this.getFloatRange(f,d))};d.prototype.getFloatRange=function(f,h){h-=f;var g=this.getInt()/d._m;return f+Math.floor(g*h)};d._m=2147483648;d._a=1103515245;d._c=12345;return d}()})},"esri/core/Loadable":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./Error ./lang ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e,c,p,b,a){h=function(c){function e(){var a=c.call(this)||
this;a.loadError=null;a.loadStatus="not-loaded";a.loadWarnings=null;a._set("loadWarnings",[]);a.addResolvingPromise(p.create(function(b){var c=!1,e=a.load.bind(a);a.load=function(){"not-loaded"===a.loadStatus&&(a._set("loadStatus","loading"),e());c||(b(),c=!0);return a.when()}}));a.when(function(b){a._set("loadStatus","loaded")},function(b){a._set("loadStatus","failed");a._set("loadError",b)});return a}n(e,c);Object.defineProperty(e.prototype,"loaded",{get:function(){return"loaded"===this.loadStatus},
enumerable:!0,configurable:!0});e.prototype.load=function(){return null};e.prototype.cancelLoad=function(){if(this.isFulfilled())return this;this._set("loadError",new g("load:cancelled","Cancelled"));this._promiseProps.resolver.reject(this.loadError);return this};f([a.property({readOnly:!0,dependsOn:["loadStatus"]})],e.prototype,"loaded",null);f([a.property({readOnly:!0})],e.prototype,"loadError",void 0);f([a.property()],e.prototype,"loadStatus",void 0);f([a.property({type:[b],readOnly:!0})],e.prototype,
"loadWarnings",void 0);return e=f([a.subclass("esri.core.Loadable")],e)}(a.declared(l,c));h.prototype["-chains-"]=e.mixin({},l._meta.chains,{load:"after"});return h})},"esri/core/Promise":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./Error ./promiseUtils ./scheduling ./accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e,c,p){function b(a){var b=a._promiseProps;if(!b.isFulfilled()){var k=b.resolvingPromises,g,m;b.allPromise&&b.allPromise.cancel();
var f,d=e.create(function(a,b){f={resolve:a,reject:b}});for(g=k.length-1;0<=g;g--)m=k[g],m.isCanceled&&m.isCanceled()&&k.splice(g,1);m=null;(b.allPromise=e.all(k.concat([d]))).then(function(){b.resolver.resolve(a);a=b=f=b.allPromise=b.resolvingPromises=null},function(c){b.allPromise=null;if(!c||"cancel"!==c.dojoType){var e=Array.prototype.slice.call(arguments,0);b.resolver.reject(e[0]);a=b=f=b.allPromise=b.resolvingPromises=null}});f&&c.schedule(function(){f&&f.resolve()})}}var a=function(a){a=new g("AbortError");
a.target=this.instance;a.dojoType="cancel";return a},m=function(){function b(b){var c=this;this.canceler=a.bind(this);this.status=void 0;this.initialized=!1;this.resolvingPromises=[];this.instance=b;this.promise=e.create(function(a,b){c.resolver={resolve:a,reject:b}});this.promise.then(function(){c.status=1},function(){c.status=2})}b.prototype.cancel=function(){if(!this.isFulfilled()){this.allPromise.cancel();for(var a=this.resolvingPromises.concat(),b=a.length-1;0<=b;b--)a[b].cancel();this.resolver.cancel()}};
b.prototype.isResolved=function(){return 1===this.status};b.prototype.isRejected=function(){return 2===this.status};b.prototype.isFulfilled=function(){return!!this.status};return b}();return function(a){function c(){var c=a.call(this)||this;c._promiseProps=new m(c);var e=c.postscript;e?c.postscript=function(){for(var a=[],k=0;k<arguments.length;k++)a[k]=arguments[k];e.apply(c,a);c.postscript=e;b(c)}:b(c);return c}n(c,a);c.prototype.isResolved=function(){return this._promiseProps.isResolved()};c.prototype.isRejected=
function(){return this._promiseProps.isRejected()};c.prototype.isFulfilled=function(){return this._promiseProps.isFulfilled()};c.prototype.when=function(a,b){var c=this;return e.create(function(a,b){c._promiseProps.promise.then(a,b)},this._promiseProps.canceler).then(a,b)};c.prototype.catch=function(a){return this.when(null,a)};c.prototype.addResolvingPromise=function(a){a&&!this._promiseProps.isFulfilled()&&("_promiseProps"in a?this._promiseProps.resolvingPromises.push(a.when()):this._promiseProps.resolvingPromises.push(a),
b(this))};return c=f([p.subclass()],c)}(p.declared(l))})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(h,d,n,f,l){h=function(g){function e(c,f,b){var a=g.call(this,c,f,b)||this;return a instanceof e?a:new e(c,f,b)}n(e,g);return e}(l);h.prototype.type="warning";return h})},"esri/core/loadAll":function(){define("require exports ./tsSupport/generatorHelper ./tsSupport/awaiterHelper ./asyncUtils ./Collection ./Loadable".split(" "),
function(h,d,n,f,l,g,e){function c(c,b){return f(this,void 0,void 0,function(){var a,m,k,d=this;return n(this,function(q){switch(q.label){case 0:return[4,c.load()];case 1:return q.sent(),a=[],m=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];for(c=0;c<b.length;c++){var k=b[c];k&&(Array.isArray(k)?m.apply(void 0,k):g.isCollection(k)?k.forEach(function(a){return m(a)}):k.isInstanceOf&&k.isInstanceOf(e)&&a.push(k))}},b(m),k=null,[4,l.map(a,function(a){return f(d,void 0,void 0,function(){var b;
return n(this,function(c){switch(c.label){case 0:return[4,l.result("loadAll"in a&&"function"===typeof a.loadAll?a.loadAll():a.load())];case 1:return b=c.sent(),!1!==b.ok||k||(k=a),[2]}})})})];case 2:q.sent();if(k)throw k.loadError;return[2,c]}})})}Object.defineProperty(d,"__esModule",{value:!0});d.loadAll=c;d.default=c})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper dojo/io-query dojo/_base/url ../config ./Error ./global ./lang ./Logger".split(" "),function(h,d,
n,f,l,g,e,c,p,b){function a(a){var b={path:null,query:null},c=new l(a),e=a.indexOf("?");null===c.query?b.path=a:(b.path=a.substring(0,e),b.query=f.queryToObject(c.query));c.fragment&&(b.hash=c.fragment,null===c.query&&(b.path=b.path.substring(0,b.path.length-(c.fragment.length+1))));return b}function m(a){var b=a.indexOf("?");-1!==b?(ja.path=a.slice(0,b),ja.query=a.slice(b+1)):(ja.path=a,ja.query=null);return ja}function k(a){a=m(a).path;a&&"/"===a[a.length-1]||(a+="/");a=ba(a,!0);return a=a.toLowerCase()}
function q(a){var b=W.proxyRules;a=k(a);for(var c=0;c<b.length;c++)if(0===a.indexOf(b[c].urlPrefix))return b[c]}function v(a){a=w(a);var b=a.indexOf("/sharing");return 0<b?a.substring(0,b):a.replace(/\/+$/,"")}function u(a,b,c){void 0===c&&(c=!1);a=Q(a);b=Q(b);return c||a.scheme===b.scheme?a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port:!1}function t(a,b,c){void 0===b&&(b=d.appBaseUrl);if(F(a))return c&&c.preserveProtocolRelative?a:"http"===d.appUrl.scheme&&d.appUrl.authority===B(a).slice(2)?
"http:"+a:"https:"+a;if(L(a))return a;c=z;if("/"===a[0]){var e=b.indexOf("//"),e=b.indexOf("/",e+2);b=-1===e?b:b.slice(0,e)}return c(b,a)}function r(a,b,c){void 0===b&&(b=d.appBaseUrl);if(!A(a))return a;var e=w(a),k=e.toLowerCase();b=w(b).toLowerCase().replace(/\/+$/,"");if((c=c?w(c).toLowerCase().replace(/\/+$/,""):null)&&0!==b.indexOf(c))return a;for(var g=function(a,b,c){c=a.indexOf(b,c);return-1===c?a.length:c},m=g(k,"/",k.indexOf("//")+2),f=-1;k.slice(0,m+1)===b.slice(0,m)+"/";){f=m+1;if(m===
k.length)break;m=g(k,"/",m+1)}if(-1===f||c&&f<c.length)return a;a=e.slice(f);e=b.slice(f-1).replace(/[^/]+/g,"").length;if(0<e)for(k=0;k<e;k++)a="../"+a;else a="./"+a;return a}function w(a){a=a.trim();a=t(a);if(/^https?:\/\//i.test(a)){var b=m(a);a=b.path.replace(/\/{2,}/g,"/");a=a.replace("/","//");b.query&&(a+="?"+b.query)}a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");return a=K(a)}function z(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(a&&a.length){b=[];if(A(a[0])){var c=
a[0],e=c.indexOf("//");b.push(c.slice(0,e+1));Z.test(a[0])&&(b[0]+="/");a[0]=c.slice(e+2)}else"/"===a[0][0]&&b.push("");a=a.reduce(function(a,b){return b?a.concat(b.split("/")):a},[]);for(c=0;c<a.length;c++)e=a[c],".."===e&&0<b.length?b.pop():!e||"."===e&&0!==b.length||b.push(e);return b.join("/")}}function B(a){if(x(a)||C(a))return null;var b=a.indexOf("://");if(-1===b&&F(a))b=2;else if(-1!==b)b+=3;else return null;b=a.indexOf("/",b);return-1===b?a:a.slice(0,b)}function A(a){return F(a)||L(a)}function x(a){return"blob:"===
a.slice(0,5)}function C(a){return"data:"===a.slice(0,5)}function y(a){a=E(a);if(!a||!a.isBase64)return null;a=atob(a.data);for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer}function E(a){return(a=a.match(pa))?{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null}function D(a){var b=y(a);if(!b)return null;a=E(a);return new Blob([b],{type:a.mediaType})}function F(a){return a&&"/"===a[0]&&"/"===a[1]}function L(a){return aa.test(a)}function P(a){return ia.test(a)||"http"===
d.appUrl.scheme&&F(a)}function M(a){return F(a)?"https:"+a:a.replace(ia,"https:")}function I(){return"https"===d.appUrl.scheme}function ba(a,b){void 0===b&&(b=!1);if(F(a))return a.slice(2);a=a.replace(aa,"");b&&1<a.length&&"/"===a[0]&&"/"===a[1]&&(a=a.slice(2));return a}function K(a){var b=W.httpsDomains;if(!P(a))return a;var c=a.indexOf("/",7),e;e=-1===c?a:a.slice(0,c);e=e.toLowerCase().slice(7);if(ga.test(e))if(p.endsWith(e,":80"))e=e.slice(0,-3),a=a.replace(":80","");else return a;if("http"===
d.appUrl.scheme&&e===d.appUrl.authority&&!da.test(a))return a;if(I()&&e===d.appUrl.authority||b&&b.some(function(a){return e===a||p.endsWith(e,"."+a)})||I()&&!q(a))a=M(a);return a}function S(a,b,c){if(!(b&&c&&a&&A(a)))return a;var e=a.indexOf("//"),k=a.indexOf("/",e+2),g=a.indexOf(":",e+2),k=Math.min(0>k?a.length:k,0>g?a.length:g);if(a.slice(e+2,k).toLowerCase()!==b.toLowerCase())return a;b=a.slice(0,e+2);a=a.slice(k);return""+b+c+a}function Q(a){if("string"===typeof a)return new l(t(a));a.scheme||
(a.scheme=d.appUrl.scheme);return a}function J(a,b){var c=b&&b.url&&b.url.path;a&&c&&(a=t(a,c,{preserveProtocolRelative:!0}));(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?(c=b.urlKey+"."+b.customBaseUrl,b=u(d.appUrl,d.appUrl.scheme+"://"+c)?S(a,b.portalHostname,c):S(a,c,b.portalHostname)):b=a;return b}function R(a,b){if(!a)return a;!A(a)&&b&&b.blockedRelativeUrls&&b.blockedRelativeUrls.push(a);var c=t(a);if(b){var e=b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;
e&&(c=r(c,e,e),c!==a&&b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.writtenUrls.push(c))}a=c;c=(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?S(a,b.urlKey+"."+b.customBaseUrl,b.portalHostname):a;A(c)&&(c=w(c));return c}Object.defineProperty(d,"__esModule",{value:!0});var H=b.getLogger("esri.core.urlUtils"),W=g.request,aa=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,ia=/^\s*http:/i,V=/^\s*https:/i,Z=/^\s*file:/i,ga=/:\d+$/,da=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;d.appUrl=new l(g.applicationUrl);
d.trustedServersUrlCache={};d.appBaseUrl=function(){var a=d.appUrl.path,a=a.substring(0,a.lastIndexOf(a.split("/")[a.split("/").length-1]));return""+(d.appUrl.scheme+"://"+d.appUrl.host+(null!=d.appUrl.port?":"+d.appUrl.port:""))+a}();d.urlToObject=a;d.getProxyUrl=function(b){void 0===b&&(b=!1);var c,k=W.proxyUrl;if("string"===typeof b){if(c=b,c=V.test(c)||"https"===d.appUrl.scheme&&F(c),b=q(b))k=b.proxyUrl}else c=!!b;if(!k)throw H.warn("esri/config: esriConfig.request.proxyUrl is not set."),new e("urlutils:proxy-not-set",
"esri/config: esriConfig.request.proxyUrl is not set.");c&&I()&&(k=M(k));return a(k)};d.addProxy=function(b){var c=q(b),e,k;c&&(k=m(c.proxyUrl),e=k.path,k=k.query?f.queryToObject(k.query):null);e&&(c=a(b),b=e+"?"+c.path,(e=f.objectToQuery(n({},k,c.query)))&&(b=b+"?"+e));return b};var ja={path:"",query:""};d.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,urlPrefix:k(a.urlPrefix)};for(var b=W.proxyRules,c=a.urlPrefix,e=b.length,g=0;g<b.length;g++){var m=b[g].urlPrefix;if(0===c.indexOf(m)){if(c.length===
m.length)return-1;e=g;break}0===m.indexOf(c)&&(e=g+1)}b.splice(e,0,a);return e};d.getProxyRule=q;d.hasSamePortal=function(a,b){a=v(a);b=v(b);return ba(a)===ba(b)};d.getInterceptor=function(a){var b=function(b){return null==b||b instanceof RegExp&&b.test(a)||"string"===typeof b&&p.startsWith(a,b)},c=W.interceptors;if(c)for(var e=0;e<c.length;e++){var k=c[e];if(Array.isArray(k.urls)){if(k.urls.some(b))return k}else if(b(k.urls))return k}return null};d.hasSameOrigin=u;d.isTrustedServer=function(a){if("string"===
typeof a)if(A(a))a=Q(a);else return!0;for(var b=W.trustedServers||[],c=0;c<b.length;c++){var e;e=b[c];d.trustedServersUrlCache[e]||(L(e)||F(e)?d.trustedServersUrlCache[e]=[new l(t(e))]:d.trustedServersUrlCache[e]=[new l("http://"+e),new l("https://"+e)]);e=d.trustedServersUrlCache[e];for(var k=0;k<e.length;k++)if(u(a,e[k]))return!0}return!1};d.makeAbsolute=t;d.makeRelative=r;d.normalize=w;d.join=z;d.getOrigin=B;d.isAbsolute=A;d.isBlobProtocol=x;d.isDataProtocol=C;d.dataToArrayBuffer=y;var pa=/^data:(.*?)(;base64)?,(.*)$/;
d.dataComponents=E;d.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};d.dataToBlob=D;d.downloadDataAsFile=function(a,b){var e;a:if(e=document.createElement("a"),"download"in e){var k=null;if(c.URL&&c.URL.createObjectURL){k=D(a);if(!k){e=!1;break a}k=c.URL.createObjectURL(k)}e.download=b;e.href=k||a;e.style.display="none";document.body.appendChild(e);e.click();document.body.removeChild(e);k&&c.URL.revokeObjectURL(k);e=void 0}else e=!1;e||
window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(D(a),b)};d.isProtocolRelative=F;d.hasProtocol=L;d.toHTTP=function(a){return F(a)?"http:"+a:a.replace(V,"http:")};d.toHTTPS=M;d.isAppHTTPS=I;d.removeFile=function(a){var b=0;if(A(a)){var c=a.indexOf("//");-1!==c&&(b=c+2)}c=a.lastIndexOf("/");return c<b?a:a.slice(0,c+1)};d.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};d.changeDomain=S;d.fromJSON=J;d.read=function(a,b,c){return J(a,c)};d.toJSON=R;d.write=function(a,b,
c,e){(a=R(a,e))&&(b[c]=a)};d.isSVG=function(a){return sa.test(a)};d.removeQueryParameters=function(b,c){b=a(b);var e=Object.keys(b.query||{});0<e.length&&c&&c.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+e.join(", ")+".");return b.path};d.addQueryParameter=function(b,c,e){b=a(b);var k=b.query||{};k[c]=e;return b.path+"?"+f.objectToQuery(k)};d.addQueryParameters=function(b,c){b=a(b);var e=b.query||{},k;for(k in c)e[k]=c[k];return(c=
f.objectToQuery(e))?b.path+"?"+c:b.path};d.removeQueryParameter=function(b,c){var e=a(b),k=e.path,e=e.query;if(!e)return b;delete e[c];return(b=f.objectToQuery(e))?k+"?"+b:k};var sa=/(^data:image\/svg|\.svg$)/i})},"dojo/_base/url":function(){define(["./kernel"],function(h){var d=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,n=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,f=function(){for(var h=arguments,g=[h[0]],e=1;e<h.length;e++)if(h[e]){var c=new f(h[e]+""),
g=new f(g[0]+"");if(""==c.path&&!c.scheme&&!c.authority&&!c.query)null!=c.fragment&&(g.fragment=c.fragment),c=g;else if(!c.scheme&&(c.scheme=g.scheme,!c.authority&&(c.authority=g.authority,"/"!=c.path.charAt(0)))){for(var g=(g.path.substring(0,g.path.lastIndexOf("/")+1)+c.path).split("/"),p=0;p<g.length;p++)"."==g[p]?p==g.length-1?g[p]="":(g.splice(p,1),p--):0<p&&(1!=p||""!=g[0])&&".."==g[p]&&".."!=g[p-1]&&(p==g.length-1?(g.splice(p,1),g[p-1]=""):(g.splice(p-1,2),p-=2));c.path=g.join("/")}g=[];c.scheme&&
g.push(c.scheme,":");c.authority&&g.push("//",c.authority);g.push(c.path);c.query&&g.push("?",c.query);c.fragment&&g.push("#",c.fragment)}this.uri=g.join("");h=this.uri.match(d);this.scheme=h[2]||(h[1]?"":null);this.authority=h[4]||(h[3]?"":null);this.path=h[5];this.query=h[7]||(h[6]?"":null);this.fragment=h[9]||(h[8]?"":null);null!=this.authority&&(h=this.authority.match(n),this.user=h[3]||null,this.password=h[4]||null,this.host=h[6]||h[7],this.port=h[9]||null)};f.prototype.toString=function(){return this.uri};
return h._Url=f})},"esri/config":function(){define(["require","exports","./core/global"],function(h,d,n){h={applicationUrl:n.location&&n.location.href,screenDPI:96,fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},
paths:{},map:{},packages:[]}},request:{httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" "),interceptors:[],maxUrlLength:2E3,proxyRules:[],proxyUrl:null,timeout:6E4,trustedServers:[],useIdentity:!0}};h.request.corsEnabledServers=[];h.request.corsEnabledServers.push=function(){console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664");
return 0};return h})},"esri/layers/Layer":function(){define("require ../core/Accessor ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/urlUtils ../core/promiseUtils ../core/Logger ../config ../kernel ../request ../geometry/SpatialReference ../geometry/Extent".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k,q){l=l.Identifiable;var v=0,u=p.getLogger("esri.layers.Layer");d=d.createSubclass([f,l,g],{declaredClass:"esri.layers.Layer",properties:{attributionDataUrl:null,credential:{value:null,
readOnly:!0,dependsOn:["loaded","parsedUrl"],get:function(){return this.loaded&&this.parsedUrl&&a.id&&a.id.findCredential(this.parsedUrl.path)||null}},fullExtent:new q(-180,-90,180,90,k.WGS84),hasAttributionData:{readOnly:!0,dependsOn:["attributionDataUrl"],get:function(){return null!=this.attributionDataUrl}},id:{get:function(){return Date.now().toString(16)+"-layer-"+v++}},legendEnabled:!0,listMode:{type:["show","hide","hide-children"],value:"show"},opacity:{value:1,type:Number,nonNullable:!0,cast:function(a){return 0>
a?0:1<a?1:a}},parent:null,parsedUrl:{readOnly:!0,dependsOn:["url"],get:function(){var a=this._get("url");return a?e.urlToObject(a):null}},popupEnabled:!0,attributionVisible:!0,spatialReference:k.WGS84,title:null,token:{dependsOn:["credential.token"],get:function(){var a=this.get("parsedUrl.query.token"),b=this.get("credential.token");return a||b||null},set:function(a){a?this._override("token",a):this._clearOverride("token")}},type:{type:String,readOnly:!0,value:null,json:{read:!1}},url:{value:null},
visible:{value:!0,nonNullable:!0,type:Boolean}},initialize:function(){this.when().catch(function(a){p.getLogger(this.declaredClass).error("#load()","Failed to load layer (title: '"+this.title+"', id: '"+this.id+"')",a)}.bind(this))},createLayerView:function(a){return a?this.importLayerViewModule(a).then(function(b){b.default&&(b=b.default);return new b({layer:this,view:a})}.bind(this)):c.reject(new n("layerview:module-unavailable","No LayerView module available for layer '${layer.declaredClass}' and view type: '${view.type}'",
{view:a,layer:this}))},destroyLayerView:function(a){a.destroy()},fetchAttributionData:function(){var a=this.attributionDataUrl;return this.hasAttributionData&&a?m(a,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data}):c.reject(new n("layer:no-attribution-data","Layer does not have attribution data"))},refresh:function(){this.emit("refresh")},importLayerViewModule:function(a){return c.reject(new n("layerview:override-method","Must provide implementation in '${layer.declaredClass}'",
{view:a,layer:this}))}});d.fromArcGISServerUrl=function(a){"string"===typeof a&&(a={url:a});var b=c.create(function(a){h(["./support/arcgisLayers"],a)}).then(function(b){return b.fromUrl(a)});b.catch(function(b){u.error("#fromArcGISServerUrl({ url: '"+a.url+"'})","Failed to create layer from arcgis server url",b)});return b};d.fromPortalItem=function(a){!a||a.portalItem||"object"!==typeof a||a.declaredClass&&"esri.portal.PortalItem"!==a.declaredClass||(a={portalItem:a});var e=c.create(function(a){h(["../portal/support/portalLayers"],
a)}).then(function(b){return b.fromItem(a)});e.catch(function(c){var e=a&&a.portalItem;u.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(e&&e.portal&&e.portal.url||b.portalUrl)+"', id: '"+(e&&e.id||"unset")+"')",c)});return e};return d})},"esri/core/Identifiable":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});var n=0;h=function(){return function(){Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+
"-object-"+n++})}}();d.Identifiable=h})},"esri/kernel":function(){define(["require","./core/promiseUtils","./core/has","dojo/main"],function(h,d,n,f){(function(){var d=f.config,g=d.has&&void 0!==d.has["config-deferredInstrumentation"],e=d.has&&void 0!==d.has["config-useDeferredInstrumentation"];void 0!==d.useDeferredInstrumentation||g||e||(n.add("config-deferredInstrumentation",!1,!0,!0),n.add("config-useDeferredInstrumentation",!1,!0,!0))})();return{version:"4.10",workerMessages:{request:function(f){return d.create(function(g){h(["./request"],
g)}).then(function(g){var e=f.options||{};e.responseType="array-buffer";return g(f.url,e)}).then(function(g){return{result:{data:g.data,ssl:g.ssl},transferList:[g.data]}})}}}})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color require ./has!host-browser?./_base/browser require".split(" "),function(h,d,n,f,l,g,e,c){e.isDebug&&n(["./_firebug/firebug"]);return h})},
"esri/request":function(){define("require exports ./core/tsSupport/assignHelper dojo/Deferred dojo/has!host-webworker?./core/workers/request dojo/io-query dojo/_base/url dojo/errors/CancelError dojo/request/xhr ./config ./core/deferredUtils ./core/Error ./core/global ./core/has ./core/lang ./core/promiseUtils ./core/urlUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t){function r(a,b){void 0===b&&(b=!1);t.isBlobProtocol(a.url)||t.isDataProtocol(a.url)||!a.content||(a.preventCache&&(a.content["request.preventCache"]=
Date.now()),a.url=t.addQueryParameters(a.url,a.content));var c=new Image;c.crossOrigin=a.withCredentials?"use-credentials":"anonymous";var e=!1;return u.create(function(k,g){var m=function(){c.onload=c.onerror=c.onabort=null;b&&URL.revokeObjectURL(this.src);e||g(Error("Unable to load the resource"))};c.onload=function(){c.onload=c.onerror=c.onabort=null;b&&URL.revokeObjectURL(this.src);e||k(this)};c.onerror=m;c.onabort=m;c.alt="";c.src=a.url},function(){e=!0;c.onload=c.onerror=c.onabort=null;c.src=
""})}function w(a){a=new e(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function z(){return I?I:I=u.create(function(a){h(["./identity/IdentityManager"],a)}).then(function(a){M=a})}function B(a,b){var c=!!a.useProxy,e=a.method||"auto";a=n({},a);a.content=a.content||{};a._ssl&&(a.url=a.url.replace(/^http:/i,"https:"));var k=a.url,m=t.isBlobProtocol(k)||t.isDataProtocol(k);a._token&&(a.content.token=a._token);var f=0,d;m||(d=g.objectToQuery(a.content),f=d.length+k.length+1,q("esri-url-encodes-apostrophe")&&
(f=d.replace(/'/g,"%27").length+k.length+1));a.timeout=null!=a.timeout?a.timeout:D.timeout;a.handleAs=a.handleAs||"json";try{var h=d=void 0,l=!m&&("post"===e||!!a.body||f>D.maxUrlLength),w=!m&&(c||!!t.getProxyRule(a.url)),x;if(x=!w&&"image"===a.handleAs&&D.proxyUrl&&!m){var y=t.getOrigin(a.url);x=!(!y||v.endsWith(y,".arcgis.com")||t.hasSameOrigin(y,t.appUrl)||-1!==E._corsServers.indexOf(y)||t.isTrustedServer(y))}x&&(a.handleAs="blob");w&&(q("host-browser")||q("host-webworker"))&&(d=t.getProxyUrl(k),
h=d.path,!l&&h.length+1+f>D.maxUrlLength&&(l=!0),d.query&&(a.content=n({},d.query,a.content)),l||(a.preventCache&&(a.content["request.preventCache"]=Date.now(),a.preventCache=!1),a.url=t.addQueryParameters(a.url,a.content),a.content=null),a.url=h+"?"+a.url);var z=a.headers;if(!m){!q("host-browser")&&!q("host-webworker")||z&&z.hasOwnProperty("X-Requested-With")||(a.headers=z||{},a.headers["X-Requested-With"]=null);if(q("host-browser")&&b){var C=a.content&&a.content.token;C&&(b.set?b.set("token",C):
b.append("token",C));a.contentType=!1}if(!a.hasOwnProperty("withCredentials"))if(c=w?h:k,t.isTrustedServer(c))a.withCredentials=!0;else if(M){var A=M.findServerInfo(c);A&&A.webTierAuth&&(a.withCredentials=!0)}}if(l)return"image"===a.handleAs&&(a.handleAs="blob"),a.body?(a.data=b||a.body,a.query=a.content):a.data=a.content,delete a.body,delete a.content,!w&&q("safari")&&(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+Date.now()+L++),p.post(a.url,a);var B;if(B="image"===a.handleAs){var F;a:{if(z)for(var P in z)if(z[P]){F=
!0;break a}F=!1}B=!F}if(B)return r(a);"image"===a.handleAs&&(a.handleAs="blob");a.query=a.content;delete a.content;return p.get(a.url,a)}catch(qa){return u.reject(qa)}}function A(a,b,c,e){function k(a){a._pendingDfd=B(c,h);var b=!!a._pendingDfd.response;(a._pendingDfd.response||a._pendingDfd).then(function(a){if(!b||!a.data)return a;D.proxyUrl&&!v.startsWith(a.url,D.proxyUrl)&&y(a.url);var c=a.getHeader("Content-Type");if(c&&(c=c.toLowerCase(),-1===c.indexOf("text/plain")&&-1===c.indexOf("application/json")))return a;
c=a.data;if(c instanceof ArrayBuffer&&750>=c.byteLength)c=new Blob([c]);else if(!(c instanceof Blob&&750>=c.size))return a;var e=new f,k=new FileReader;k.readAsText(c);k.onloadend=function(){if(!k.error)try{var b=JSON.parse(k.result);b.error&&(Object.isExtensible(a)||(a=n({},a)),a._jsonData=b)}catch(ya){}e.resolve(a)};return e.promise}).then(function(a){return b&&!a._jsonData&&"image"===e.requestOptions.responseType&&a.data instanceof Blob?(b=!1,c.url=URL.createObjectURL(a.data),r(c,!0)):a}).then(function(c){var k=
b?c.data:c,g=b?c.getHeader.bind(c):P;if(k&&(c=b&&c._jsonData||k,c.error||"error"===c.status))throw k=v.mixin(Error(),c.error||c),k.getHeader=g,k;a.resolve({data:k,url:e.url,requestOptions:e.requestOptions,getHeader:g});a._pendingDfd=null}).catch(function(b){var k,m,f,q;b&&(k=Number(b.code),m=b.hasOwnProperty("subcode")?Number(b.subcode):null,f=(f=b.messageCode)&&f.toUpperCase(),q=b.response);if(q&&0===q.status&&D.proxyUrl&&!g&&"post"!==c.method&&q.url&&!v.startsWith(q.url,D.proxyUrl))t.addProxyRule({proxyUrl:D.proxyUrl,
urlPrefix:t.removeFile(t.urlToObject(c.url).path)}),A(a,!0,c,e);else{if(403===k&&(4===m||b.message&&-1<b.message.toLowerCase().indexOf("ssl")&&-1===b.message.toLowerCase().indexOf("permission"))){if(!c._ssl){c._ssl=c._sslFromServer=!0;A(a,!0,c,e);return}}else if(d&&"no-prompt"!==c.authMode&&M._errorCodes&&-1!==M._errorCodes.indexOf(k)&&!M._isPublic(c.url)&&(403!==k||F&&-1===F.indexOf(f)&&(null==m||2===m&&c._token))){x(a,c,e,C("request:server",b,e));return}q&&0<q.status&&q.url&&D.proxyUrl&&!v.startsWith(q.url,
D.proxyUrl)&&y(q.url);a.reject(C("request:server",b,e));a._pendingDfd=null}})}var g=c.body,d=c.useIdentity,q,h=null,p=g instanceof FormData;if(p||g&&g.elements)h=p?g:new FormData(g);var l=!!(-1!==c.url.toLowerCase().indexOf("token\x3d")||c.content&&c.content.token||h&&h.get&&h.get("token")||g&&g.elements&&g.elements.token);b||(!d||l||c._token||M._isPublic(c.url)||(b=function(a){a&&(c._token=a.token,c._ssl=a.ssl)},"immediate"===c.authMode?q=M.getCredential(c.url).then(b):"no-prompt"===c.authMode?q=
M.checkSignInStatus(c.url).then(b).catch(function(){}):b(M.findCredential(c.url))),b=function(a){delete c._credential;if(a){var b=!!c._ssl;a instanceof m?a.details.ssl=b:a.ssl=b}},a.then(function(a){(/\/sharing\/rest\/accounts\/self/i.test(c.url)||/\/sharing\/rest\/portals\/self/i.test(c.url))&&!l&&!c._token&&a.data&&a.data.user&&a.data.user.username&&(t.isTrustedServer(c.url)||D.trustedServers.push(w(c.url)));var b=c._credential;if(b){var e=M.findServerInfo(b.server),e=e&&e.owningSystemUrl,k=void 0;
e&&(e=e.replace(/\/?$/,"/sharing"),(k=M.findCredential(e,b.userId))&&-1===M._getIdenticalSvcIdx(e,k)&&k.resources.splice(0,0,e))}return a}).then(b,b));q?q.then(function(){a.isCanceled()||k(a)}).catch(function(b){a.reject(b)}):k(a);return a.promise}function x(a,b,c,e){a._pendingDfd=M.getCredential(b.url,{error:e,token:b._token});a._pendingDfd.then(function(e){b._token=e.token;b._credential=e;b._ssl=b._sslFromServer||e.ssl;A(a,!0,b,c)}).catch(function(b){a.reject(b);a._pendingDfd=null})}function C(a,
b,c){var e="Error",k={url:c.url,requestOptions:c.requestOptions,getHeader:P};if(b instanceof m)return b.details?(b.details=v.clone(b.details),b.details.url=c.url,b.details.requestOptions=c.requestOptions):b.details=k,b;if(b){var g=b.response;c=g&&g.getHeader;var g=g&&g.status,f=b.message;c=b.getHeader||c;f&&(e=f);c&&(k.getHeader=c);k.httpStatus=(null!=b.httpCode?b.httpCode:b.code)||g;k.subCode=b.subcode;k.messageCode=b.messageCode;k.messages="string"===typeof b.details?[b.details]:b.details}a=new m(a,
e,k);b&&"cancel"===b.dojoType&&(a.name="AbortError",a.dojoType="cancel");return a}function y(a){t.isBlobProtocol(a)||t.isDataProtocol(a)||(a=t.getOrigin(a))&&-1===E._corsServers.indexOf(a)&&E._corsServers.push(a)}function E(b,g){if(l&&k.invokeStaticMessage)return l.execute(b,g);t.isBlobProtocol(b)||t.isDataProtocol(b)||(b=t.normalize(b));var f={url:b,requestOptions:n({},g)},d=t.getInterceptor(b);if(d){if(null!=d.responseData)return u.resolve({data:d.responseData,requestOptions:f.requestOptions,getHeader:P,
url:b});d.headers&&(f.requestOptions.headers=n({},f.requestOptions.headers,d.headers));d.query&&(f.requestOptions.query=n({},f.requestOptions.query,d.query));if(d.before&&(g=d.before(f),null!=g))return g instanceof Error||g instanceof m?u.reject(C("request:interceptor",g,f)):u.resolve({data:g,requestOptions:f.requestOptions,getHeader:P,url:f.url})}var h=n({url:f.url},f.requestOptions);h.content=h.query;delete h.query;h.preventCache=!!h.cacheBust;delete h.cacheBust;h.handleAs=h.responseType;delete h.responseType;
"array-buffer"===h.handleAs&&(h.handleAs="arraybuffer");if("image"===h.handleAs){if(q("host-webworker"))return u.reject(C("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),f))}else if(t.isDataProtocol(b))return u.reject(C("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+h.handleAs),f));var r=D.useIdentity;"anonymous"===h.authMode&&(r=!1);h.useIdentity=r;h.urlObj=new e(h.url);var p=a.makeDeferredCancellingPending(),
v;f.requestOptions.signal&&(b=f.requestOptions.signal,v=function(){p.cancel(C("AbortError",new c("Request canceled"),f))},b.aborted?v():b.addEventListener("abort",v));u.resolve().then(function(){if(r&&!M)return z()}).catch(function(){}).then(function(){p.isCanceled()||A(p,!1,h,f)});return p.then(function(a){f.requestOptions.signal&&f.requestOptions.signal.removeEventListener("abort",v);d&&d.after&&d.after(a);return a}).catch(function(a){f.requestOptions.signal&&f.requestOptions.signal.removeEventListener("abort",
v);throw a;})}var D=b.request,F=["COM_0056","COM_0057"],L=0,P=function(){return null},M,I;(E||(E={}))._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return E})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],function(h){var d={makeDeferredCancellingPending:function(){var n={},f=d._dfdCanceller.bind(null,n),f=new h(f);return n.deferred=f},_dfdCanceller:function(d){d=d.deferred?d.deferred:d;d.canceled=!0;var f=d._pendingDfd;d.isResolved()||!f||f.isResolved()||
f.cancel();d._pendingDfd=null},_fixDfd:function(d){var f=d.then;d.then=function(d,g,e){if(d){var c=d;d=function(e){return e&&e._argsArray?c.apply(null,e):c(e)}}return f.call(this,d,g,e)};return d},_resDfd:function(d,f,h){var g=f.length;1===g?h?d.reject(f[0]):d.resolve(f[0]):1<g?(f._argsArray=!0,d.resolve(f)):d.resolve()}};return d})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),
function(h,d,n,f,l,g,e,c){h=function(g){function b(a){a=g.call(this)||this;a.latestWkid=null;a.wkid=null;a.wkt=null;return a}n(b,g);a=b;b.fromJSON=function(b){if(!b)return null;if(b.wkid){if(102100===b.wkid)return a.WebMercator;if(4326===b.wkid)return a.WGS84}var c=new a;c.read(b);return c};b.prototype.normalizeCtorArgs=function(a){var b;return a&&"object"===typeof a?a:(b={},b["string"===typeof a?"wkt":"wkid"]=a,b)};Object.defineProperty(b.prototype,"isWGS84",{get:function(){return c.isWGS84(this)},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isWebMercator",{get:function(){return c.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isGeographic",{get:function(){return c.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isWrappable",{get:function(){return c.isWrappable(this)},enumerable:!0,configurable:!0});b.prototype.writeWkt=function(a,b){this.wkid||(b.wkt=a)};b.prototype.clone=function(){if(this===
a.WGS84)return a.WGS84;if(this===a.WebMercator)return a.WebMercator;var b=new a;null!=this.wkid?(b.wkid=this.wkid,null!=this.latestWkid&&(b.latestWkid=this.latestWkid),null!=this.vcsWkid&&(b.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(b.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(b.wkt=this.wkt);return b};b.prototype.equals=function(a){return c.equals(this,a)};b.prototype.toJSON=function(a){return this.write(null,a)};var a;b.GCS_NAD_1927=null;b.WGS84=null;b.WebMercator=null;f([e.property({dependsOn:["wkid"],
readOnly:!0})],b.prototype,"isWGS84",null);f([e.property({dependsOn:["wkid"],readOnly:!0})],b.prototype,"isWebMercator",null);f([e.property({dependsOn:["wkid","wkt"],readOnly:!0})],b.prototype,"isGeographic",null);f([e.property({dependsOn:["wkid"],readOnly:!0})],b.prototype,"isWrappable",null);f([e.property({type:Number,json:{write:!0}})],b.prototype,"latestWkid",void 0);f([e.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?
!0:!1}}}}}}})],b.prototype,"wkid",void 0);f([e.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid?!0:!1}}}}}}})],b.prototype,"wkt",void 0);f([e.writer("wkt"),e.writer("web-scene","wkt")],b.prototype,"writeWkt",null);f([e.property({type:Number,json:{write:!0}})],b.prototype,"vcsWkid",void 0);f([e.property({type:Number,json:{write:!0}})],b.prototype,"latestVcsWkid",void 0);return b=a=f([e.subclass("esri.geometry.SpatialReference")],
b)}(e.declared(l));h.prototype.toJSON.isDefaultToJSON=!0;h.GCS_NAD_1927=new h({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});h.WGS84=new h(4326);h.WGS84.wkt=g.substitute({Central_Meridian:"0.0"},c.getInfo(h.WGS84).wkTemplate);h.WebMercator=new h({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(h.GCS_NAD_1927),Object.freeze(h.WGS84),Object.freeze(h.WebMercator));
return h})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(h,d,n){function f(b){return l(b)&&!0===g[b.wkid]}function l(b){return null!=b&&(null!=b.wkid&&2E3<=b.wkid||null!=b.wkt)}Object.defineProperty(d,"__esModule",{value:!0});var g={102113:!0,102100:!0,3857:!0,3785:!0},e={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};h=[-2.0037508342788905E7,2.0037508342788905E7];var c=[-2.0037508342787E7,2.0037508342787E7],p={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:h,origin:c,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:h,origin:c,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:h,origin:c,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:h,origin:c,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};d.equals=function(b,a){return b&&a?b===a?!0:null!=b.wkid||null!=a.wkid?b.wkid===a.wkid||f(b)&&f(a)||null!=a.latestWkid&&b.wkid===a.latestWkid||null!=b.latestWkid&&a.wkid===b.latestWkid:b.wkt&&a.wkt?b.wkt.toUpperCase()===a.wkt.toUpperCase():!1:!1};d.getInfo=function(b){return l(b)&&b.wkid?p[b.wkid]:null};d.isGeographic=function(b){return l(b)?b.wkid?null==n[b.wkid]:b.wkt?!!/^\s*GEOGCS/i.test(b.wkt):!1:!1};d.isWGS84=function(b){return l(b)&&4326===b.wkid};
d.isWebMercator=f;d.isWrappable=function(b){return l(b)&&!0===e[b.wkid]};d.isValid=l})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var h,d={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8082:0,8083:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,
8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,
8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,
8682:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,
28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,
102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,
103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,
103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,
103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,
103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(h=2E3;2045>=h;h++)d[h]=0;for(h=2056;2065>=h;h++)d[h]=0;for(h=2067;2135>=h;h++)d[h]=0;for(h=2137;2154>=h;h++)d[h]=0;for(h=2161;2170>=h;h++)d[h]=0;for(h=2172;2193>=h;h++)d[h]=0;for(h=2195;2198>=h;h++)d[h]=0;for(h=2200;2203>=h;h++)d[h]=0;for(h=2205;2217>=h;h++)d[h]=0;for(h=2222;2224>=h;h++)d[h]=1;for(h=2225;2250>=h;h++)d[h]=2;for(h=2251;2253>=h;h++)d[h]=1;for(h=2257;2264>=h;h++)d[h]=2;for(h=2274;2279>=h;h++)d[h]=2;for(h=2280;2282>=
h;h++)d[h]=1;for(h=2283;2289>=h;h++)d[h]=2;for(h=2290;2292>=h;h++)d[h]=0;for(h=2308;2313>=h;h++)d[h]=0;for(h=2315;2491>=h;h++)d[h]=0;for(h=2494;2866>=h;h++)d[h]=0;for(h=2867;2869>=h;h++)d[h]=1;for(h=2870;2888>=h;h++)d[h]=2;for(h=2891;2895>=h;h++)d[h]=2;for(h=2896;2898>=h;h++)d[h]=1;for(h=2902;2908>=h;h++)d[h]=2;for(h=2915;2920>=h;h++)d[h]=2;for(h=2921;2923>=h;h++)d[h]=1;for(h=2924;2930>=h;h++)d[h]=2;for(h=2931;2962>=h;h++)d[h]=0;for(h=2964;2968>=h;h++)d[h]=2;for(h=2969;2973>=h;h++)d[h]=0;for(h=2975;2991>=
h;h++)d[h]=0;for(h=2995;3051>=h;h++)d[h]=0;for(h=3054;3079>=h;h++)d[h]=0;for(h=3081;3088>=h;h++)d[h]=0;for(h=3092;3101>=h;h++)d[h]=0;for(h=3106;3138>=h;h++)d[h]=0;for(h=3146;3151>=h;h++)d[h]=0;for(h=3153;3166>=h;h++)d[h]=0;for(h=3168;3172>=h;h++)d[h]=0;for(h=3174;3203>=h;h++)d[h]=0;for(h=3294;3358>=h;h++)d[h]=0;for(h=3367;3403>=h;h++)d[h]=0;for(h=3408;3416>=h;h++)d[h]=0;for(h=3417;3438>=h;h++)d[h]=2;for(h=3441;3446>=h;h++)d[h]=2;for(h=3447;3450>=h;h++)d[h]=0;for(h=3451;3459>=h;h++)d[h]=2;for(h=3460;3478>=
h;h++)d[h]=0;for(h=3554;3559>=h;h++)d[h]=0;for(h=3560;3570>=h;h++)d[h]=2;for(h=3571;3581>=h;h++)d[h]=0;for(h=3594;3597>=h;h++)d[h]=0;for(h=3601;3604>=h;h++)d[h]=0;for(h=3637;3639>=h;h++)d[h]=0;for(h=3665;3667>=h;h++)d[h]=0;for(h=3693;3695>=h;h++)d[h]=0;for(h=3701;3727>=h;h++)d[h]=0;for(h=3728;3739>=h;h++)d[h]=2;for(h=3740;3751>=h;h++)d[h]=0;for(h=3753;3760>=h;h++)d[h]=2;for(h=3761;3773>=h;h++)d[h]=0;for(h=3775;3777>=h;h++)d[h]=0;for(h=3779;3781>=h;h++)d[h]=0;for(h=3783;3785>=h;h++)d[h]=0;for(h=3788;3791>=
h;h++)d[h]=0;for(h=3797;3802>=h;h++)d[h]=0;for(h=3814;3816>=h;h++)d[h]=0;for(h=3825;3829>=h;h++)d[h]=0;for(h=3832;3841>=h;h++)d[h]=0;for(h=3844;3852>=h;h++)d[h]=0;for(h=3873;3885>=h;h++)d[h]=0;for(h=3890;3893>=h;h++)d[h]=0;for(h=3907;3912>=h;h++)d[h]=0;for(h=3942;3950>=h;h++)d[h]=0;for(h=3968;3970>=h;h++)d[h]=0;for(h=3973;3976>=h;h++)d[h]=0;for(h=3986;3989>=h;h++)d[h]=0;for(h=3994;3997>=h;h++)d[h]=0;for(h=4048;4051>=h;h++)d[h]=0;for(h=4056;4063>=h;h++)d[h]=0;for(h=4093;4096>=h;h++)d[h]=0;for(h=4390;4398>=
h;h++)d[h]=0;for(h=4399;4413>=h;h++)d[h]=2;for(h=4418;4433>=h;h++)d[h]=2;for(h=4455;4457>=h;h++)d[h]=2;for(h=4484;4489>=h;h++)d[h]=0;for(h=4491;4554>=h;h++)d[h]=0;for(h=4568;4589>=h;h++)d[h]=0;for(h=4652;4656>=h;h++)d[h]=0;for(h=4766;4800>=h;h++)d[h]=0;for(h=5014;5016>=h;h++)d[h]=0;for(h=5069;5072>=h;h++)d[h]=0;for(h=5105;5130>=h;h++)d[h]=0;for(h=5173;5188>=h;h++)d[h]=0;for(h=5253;5259>=h;h++)d[h]=0;for(h=5269;5275>=h;h++)d[h]=0;for(h=5292;5311>=h;h++)d[h]=0;for(h=5329;5331>=h;h++)d[h]=0;for(h=5343;5349>=
h;h++)d[h]=0;for(h=5355;5357>=h;h++)d[h]=0;for(h=5387;5389>=h;h++)d[h]=0;for(h=5459;5463>=h;h++)d[h]=0;for(h=5479;5482>=h;h++)d[h]=0;for(h=5518;5520>=h;h++)d[h]=0;for(h=5530;5539>=h;h++)d[h]=0;for(h=5550;5552>=h;h++)d[h]=0;for(h=5562;5583>=h;h++)d[h]=0;for(h=5623;5625>=h;h++)d[h]=2;for(h=5631;5639>=h;h++)d[h]=0;for(h=5649;5653>=h;h++)d[h]=0;for(h=5663;5680>=h;h++)d[h]=0;for(h=5682;5685>=h;h++)d[h]=0;for(h=5875;5877>=h;h++)d[h]=0;for(h=5921;5940>=h;h++)d[h]=0;for(h=6050;6125>=h;h++)d[h]=0;for(h=6244;6275>=
h;h++)d[h]=0;for(h=6328;6348>=h;h++)d[h]=0;for(h=6350;6356>=h;h++)d[h]=0;for(h=6366;6372>=h;h++)d[h]=0;for(h=6381;6387>=h;h++)d[h]=0;for(h=6393;6404>=h;h++)d[h]=0;for(h=6480;6483>=h;h++)d[h]=0;for(h=6511;6514>=h;h++)d[h]=0;for(h=6579;6581>=h;h++)d[h]=0;for(h=6619;6624>=h;h++)d[h]=0;for(h=6625;6627>=h;h++)d[h]=2;for(h=6628;6632>=h;h++)d[h]=0;for(h=6634;6637>=h;h++)d[h]=0;for(h=6669;6692>=h;h++)d[h]=0;for(h=6707;6709>=h;h++)d[h]=0;for(h=6720;6723>=h;h++)d[h]=0;for(h=6732;6738>=h;h++)d[h]=0;for(h=6931;6933>=
h;h++)d[h]=0;for(h=6956;6959>=h;h++)d[h]=0;for(h=7005;7007>=h;h++)d[h]=0;for(h=7057;7070>=h;h++)d[h]=2;for(h=7074;7082>=h;h++)d[h]=0;for(h=7109;7118>=h;h++)d[h]=0;for(h=7119;7127>=h;h++)d[h]=1;for(h=7374;7376>=h;h++)d[h]=0;for(h=7528;7586>=h;h++)d[h]=0;for(h=7587;7645>=h;h++)d[h]=2;for(h=7755;7787>=h;h++)d[h]=0;for(h=7791;7795>=h;h++)d[h]=0;for(h=7799;7801>=h;h++)d[h]=0;for(h=7803;7805>=h;h++)d[h]=0;for(h=7825;7831>=h;h++)d[h]=0;for(h=7845;7859>=h;h++)d[h]=0;for(h=8013;8032>=h;h++)d[h]=0;for(h=8065;8068>=
h;h++)d[h]=1;for(h=8836;8840>=h;h++)d[h]=0;for(h=8857;8859>=h;h++)d[h]=0;for(h=20002;20032>=h;h++)d[h]=0;for(h=20062;20092>=h;h++)d[h]=0;for(h=20135;20138>=h;h++)d[h]=0;for(h=20248;20258>=h;h++)d[h]=0;for(h=20348;20358>=h;h++)d[h]=0;for(h=20436;20440>=h;h++)d[h]=0;for(h=20822;20824>=h;h++)d[h]=0;for(h=20934;20936>=h;h++)d[h]=0;for(h=21035;21037>=h;h++)d[h]=0;for(h=21095;21097>=h;h++)d[h]=0;for(h=21148;21150>=h;h++)d[h]=0;for(h=21413;21423>=h;h++)d[h]=0;for(h=21473;21483>=h;h++)d[h]=0;for(h=21780;21782>=
h;h++)d[h]=0;for(h=21891;21894>=h;h++)d[h]=0;for(h=21896;21899>=h;h++)d[h]=0;for(h=22171;22177>=h;h++)d[h]=0;for(h=22181;22187>=h;h++)d[h]=0;for(h=22191;22197>=h;h++)d[h]=0;for(h=22234;22236>=h;h++)d[h]=0;for(h=22521;22525>=h;h++)d[h]=0;for(h=22991;22994>=h;h++)d[h]=0;for(h=23028;23038>=h;h++)d[h]=0;for(h=23830;23853>=h;h++)d[h]=0;for(h=23866;23872>=h;h++)d[h]=0;for(h=23877;23884>=h;h++)d[h]=0;for(h=23886;23894>=h;h++)d[h]=0;for(h=23946;23948>=h;h++)d[h]=0;for(h=24311;24313>=h;h++)d[h]=0;for(h=24342;24347>=
h;h++)d[h]=0;for(h=24370;24374>=h;h++)d[h]=10;for(h=24375;24381>=h;h++)d[h]=0;for(h=24718;24721>=h;h++)d[h]=0;for(h=24817;24821>=h;h++)d[h]=0;for(h=24877;24882>=h;h++)d[h]=0;for(h=24891;24893>=h;h++)d[h]=0;for(h=25391;25395>=h;h++)d[h]=0;for(h=25828;25838>=h;h++)d[h]=0;for(h=26191;26195>=h;h++)d[h]=0;for(h=26391;26393>=h;h++)d[h]=0;for(h=26701;26722>=h;h++)d[h]=0;for(h=26729;26799>=h;h++)d[h]=2;for(h=26801;26803>=h;h++)d[h]=2;for(h=26811;26813>=h;h++)d[h]=2;for(h=26847;26870>=h;h++)d[h]=2;for(h=26891;26899>=
h;h++)d[h]=0;for(h=26901;26923>=h;h++)d[h]=0;for(h=26929;26946>=h;h++)d[h]=0;for(h=26948;26998>=h;h++)d[h]=0;for(h=27037;27040>=h;h++)d[h]=0;for(h=27205;27232>=h;h++)d[h]=0;for(h=27258;27260>=h;h++)d[h]=0;for(h=27391;27398>=h;h++)d[h]=0;for(h=27561;27564>=h;h++)d[h]=0;for(h=27571;27574>=h;h++)d[h]=0;for(h=27581;27584>=h;h++)d[h]=0;for(h=27591;27594>=h;h++)d[h]=0;for(h=28191;28193>=h;h++)d[h]=0;for(h=28348;28358>=h;h++)d[h]=0;for(h=28402;28432>=h;h++)d[h]=0;for(h=28462;28492>=h;h++)d[h]=0;for(h=29118;29122>=
h;h++)d[h]=0;for(h=29168;29172>=h;h++)d[h]=0;for(h=29177;29185>=h;h++)d[h]=0;for(h=29187;29195>=h;h++)d[h]=0;for(h=29900;29903>=h;h++)d[h]=0;for(h=30161;30179>=h;h++)d[h]=0;for(h=30491;30494>=h;h++)d[h]=0;for(h=30729;30732>=h;h++)d[h]=0;for(h=31251;31259>=h;h++)d[h]=0;for(h=31265;31268>=h;h++)d[h]=0;for(h=31275;31279>=h;h++)d[h]=0;for(h=31281;31297>=h;h++)d[h]=0;for(h=31461;31469>=h;h++)d[h]=0;for(h=31491;31495>=h;h++)d[h]=0;for(h=31917;31922>=h;h++)d[h]=0;for(h=31965;32E3>=h;h++)d[h]=0;for(h=32001;32003>=
h;h++)d[h]=2;for(h=32005;32031>=h;h++)d[h]=2;for(h=32033;32060>=h;h++)d[h]=2;for(h=32064;32067>=h;h++)d[h]=2;for(h=32074;32077>=h;h++)d[h]=2;for(h=32081;32086>=h;h++)d[h]=0;for(h=32107;32130>=h;h++)d[h]=0;for(h=32133;32158>=h;h++)d[h]=0;for(h=32164;32167>=h;h++)d[h]=2;for(h=32180;32199>=h;h++)d[h]=0;for(h=32201;32260>=h;h++)d[h]=0;for(h=32301;32360>=h;h++)d[h]=0;for(h=32601;32662>=h;h++)d[h]=0;for(h=32664;32667>=h;h++)d[h]=2;for(h=32701;32761>=h;h++)d[h]=0;for(h=53001;53004>=h;h++)d[h]=0;for(h=53008;53019>=
h;h++)d[h]=0;for(h=53021;53032>=h;h++)d[h]=0;for(h=53034;53037>=h;h++)d[h]=0;for(h=53042;53046>=h;h++)d[h]=0;for(h=53074;53080>=h;h++)d[h]=0;for(h=54001;54004>=h;h++)d[h]=0;for(h=54008;54019>=h;h++)d[h]=0;for(h=54021;54032>=h;h++)d[h]=0;for(h=54034;54037>=h;h++)d[h]=0;for(h=54042;54046>=h;h++)d[h]=0;for(h=54048;54053>=h;h++)d[h]=0;for(h=54074;54080>=h;h++)d[h]=0;for(h=102001;102040>=h;h++)d[h]=0;for(h=102042;102063>=h;h++)d[h]=0;for(h=102065;102067>=h;h++)d[h]=0;for(h=102070;102117>=h;h++)d[h]=0;
for(h=102122;102216>=h;h++)d[h]=0;for(h=102221;102377>=h;h++)d[h]=0;for(h=102382;102388>=h;h++)d[h]=0;for(h=102389;102398>=h;h++)d[h]=2;for(h=102399;102444>=h;h++)d[h]=0;for(h=102445;102447>=h;h++)d[h]=2;for(h=102448;102458>=h;h++)d[h]=0;for(h=102459;102468>=h;h++)d[h]=2;for(h=102469;102499>=h;h++)d[h]=0;for(h=102500;102519>=h;h++)d[h]=1;for(h=102520;102524>=h;h++)d[h]=0;for(h=102525;102529>=h;h++)d[h]=2;for(h=102530;102588>=h;h++)d[h]=0;for(h=102590;102598>=h;h++)d[h]=0;for(h=102601;102603>=h;h++)d[h]=
0;for(h=102605;102628>=h;h++)d[h]=0;for(h=102629;102646>=h;h++)d[h]=2;for(h=102648;102700>=h;h++)d[h]=2;for(h=102701;102703>=h;h++)d[h]=0;for(h=102707;102730>=h;h++)d[h]=2;for(h=102733;102758>=h;h++)d[h]=2;for(h=102767;102900>=h;h++)d[h]=0;for(h=102965;102969>=h;h++)d[h]=0;for(h=102971;102973>=h;h++)d[h]=0;for(h=102975;102989>=h;h++)d[h]=0;for(h=102990;102992>=h;h++)d[h]=1;for(h=102997;103002>=h;h++)d[h]=0;for(h=103003;103008>=h;h++)d[h]=2;for(h=103009;103011>=h;h++)d[h]=0;for(h=103012;103014>=h;h++)d[h]=
2;for(h=103019;103021>=h;h++)d[h]=0;for(h=103022;103024>=h;h++)d[h]=2;for(h=103029;103031>=h;h++)d[h]=0;for(h=103032;103034>=h;h++)d[h]=2;for(h=103065;103068>=h;h++)d[h]=0;for(h=103074;103076>=h;h++)d[h]=0;for(h=103077;103079>=h;h++)d[h]=1;for(h=103080;103082>=h;h++)d[h]=0;for(h=103083;103085>=h;h++)d[h]=2;for(h=103090;103093>=h;h++)d[h]=0;for(h=103097;103099>=h;h++)d[h]=0;for(h=103100;103102>=h;h++)d[h]=2;for(h=103107;103109>=h;h++)d[h]=0;for(h=103110;103112>=h;h++)d[h]=2;for(h=103113;103116>=h;h++)d[h]=
0;for(h=103117;103120>=h;h++)d[h]=2;for(h=103153;103157>=h;h++)d[h]=0;for(h=103158;103162>=h;h++)d[h]=2;for(h=103163;103165>=h;h++)d[h]=0;for(h=103166;103168>=h;h++)d[h]=1;for(h=103169;103171>=h;h++)d[h]=2;for(h=103186;103188>=h;h++)d[h]=0;for(h=103189;103191>=h;h++)d[h]=2;for(h=103192;103195>=h;h++)d[h]=0;for(h=103196;103199>=h;h++)d[h]=2;for(h=103200;103224>=h;h++)d[h]=0;for(h=103225;103227>=h;h++)d[h]=1;for(h=103232;103237>=h;h++)d[h]=0;for(h=103238;103243>=h;h++)d[h]=2;for(h=103244;103246>=h;h++)d[h]=
0;for(h=103247;103249>=h;h++)d[h]=2;for(h=103254;103256>=h;h++)d[h]=0;for(h=103257;103259>=h;h++)d[h]=2;for(h=103264;103266>=h;h++)d[h]=0;for(h=103267;103269>=h;h++)d[h]=2;for(h=103300;103375>=h;h++)d[h]=0;for(h=103381;103383>=h;h++)d[h]=0;for(h=103384;103386>=h;h++)d[h]=1;for(h=103387;103389>=h;h++)d[h]=0;for(h=103390;103392>=h;h++)d[h]=2;for(h=103397;103399>=h;h++)d[h]=0;for(h=103400;103471>=h;h++)d[h]=2;for(h=103476;103478>=h;h++)d[h]=0;for(h=103479;103481>=h;h++)d[h]=2;for(h=103486;103488>=h;h++)d[h]=
0;for(h=103489;103491>=h;h++)d[h]=2;for(h=103492;103495>=h;h++)d[h]=0;for(h=103496;103499>=h;h++)d[h]=2;for(h=103528;103543>=h;h++)d[h]=0;for(h=103544;103548>=h;h++)d[h]=2;for(h=103549;103551>=h;h++)d[h]=0;for(h=103552;103554>=h;h++)d[h]=1;for(h=103555;103557>=h;h++)d[h]=2;for(h=103558;103560>=h;h++)d[h]=0;for(h=103571;103573>=h;h++)d[h]=0;for(h=103574;103576>=h;h++)d[h]=2;for(h=103577;103580>=h;h++)d[h]=0;for(h=103581;103583>=h;h++)d[h]=2;for(h=103600;103694>=h;h++)d[h]=0;for(h=103700;103793>=h;h++)d[h]=
2;for(h=103794;103871>=h;h++)d[h]=0;for(h=103900;103971>=h;h++)d[h]=2;return d})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k){function q(a,b,c){return null==b?c:null==c?b:a(b,c)}h=function(e){function d(){for(var a=
0;a<arguments.length;a++);a=e.call(this)||this;a.type="extent";a.xmin=0;a.ymin=0;a.mmin=void 0;a.zmin=void 0;a.xmax=0;a.ymax=0;a.mmax=void 0;a.zmax=void 0;return a}n(d,e);h=d;d.prototype.normalizeCtorArgs=function(a,b,c,e,k){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null==a.spatialReference?p.WGS84:a.spatialReference,a):{xmin:a,ymin:b,xmax:c,ymax:e,spatialReference:null==k?p.WGS84:k}:{spatialReference:a,xmin:0,ymin:0,xmax:0,
ymax:0}};Object.defineProperty(d.prototype,"center",{get:function(){var a=new c({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=
this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},enumerable:!0,configurable:!0});d.prototype.centerAt=function(a){var b=this.center;return null!=a.z&&this.hasZ?
this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)};d.prototype.clone=function(){var a=new h;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};d.prototype.contains=function(a){if(!a)return!1;var c=this.spatialReference,e=a.spatialReference;c&&e&&!c.equals(e)&&k.canProject(c,e)&&(a=c.isWebMercator?k.geographicToWebMercator(a):
k.webMercatorToGeographic(a,!0));return"point"===a.type?b.extentContainsPoint(this,a):"extent"===a.type?b.extentContainsExtent(this,a):!1};d.prototype.equals=function(a){if(!a)return!1;var b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&k.canProject(b,c)&&(a=b.isWebMercator?k.geographicToWebMercator(a):k.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&
this.mmax===a.mmax};d.prototype.expand=function(a){a=.5*(1-a);var b=this.width*a,c=this.height*a;this.xmin+=b;this.ymin+=c;this.xmax-=b;this.ymax-=c;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};d.prototype.intersects=function(b){if(!b)return!1;var c=this.spatialReference,e=b.spatialReference;c&&e&&!c.equals(e)&&k.canProject(c,e)&&(b=c.isWebMercator?k.geographicToWebMercator(b):k.webMercatorToGeographic(b,
!0));c=a.getExtentIntersector(b.type);return"mesh"!==b.type?c(this,b):c(this,b.extent)};d.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};d.prototype.offset=function(a,b,c){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=c&&(this.zmin+=c,this.zmax+=c);return this};d.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};d.prototype.union=function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=
Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=q(Math.min,this.zmin,a.zmin),this.zmax=q(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=q(Math.min,this.mmin,a.mmin),this.mmax=q(Math.max,this.mmax,a.mmax);return this};d.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||
a.hasZ)this.zmin=q(Math.max,this.zmin,a.zmin),this.zmax=q(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=q(Math.max,this.mmin,a.mmin),this.mmax=q(Math.min,this.mmax,a.mmax);return this};d.prototype.toJSON=function(a){return this.write(null,a)};d.prototype._shiftCM=function(a){void 0===a&&(a=m.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var b=this.spatialReference,c=this._getCM(a);if(c){var e=b.isWebMercator?k.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=
c.x;b.isWebMercator||(e.x=this._normalizeX(e.x,a).x);this.spatialReference=new p(l.substitute({Central_Meridian:e.x},b.isWGS84?a.altTemplate:a.wkTemplate))}return this};d.prototype._getCM=function(a){var b=null,c=a.valid;a=c[0];var c=c[1],e=this.xmin,k=this.xmax;e>=a&&e<=c&&k>=a&&k<=c||(b=this.center);return b};d.prototype._normalize=function(a,b,c){var e=this.spatialReference;if(!e)return this;c=c||m.getInfo(e);if(!c)return this;var k=this._getParts(c).map(function(a){return a.extent});if(2>k.length)return k[0]||
this;if(2<k.length)return a?this._shiftCM(c):this.set({xmin:c.valid[0],xmax:c.valid[1]});if(a)return this._shiftCM(c);if(b)return k;var g=!0,f=!0;k.forEach(function(a){a.hasZ||(g=!1);a.hasM||(f=!1)});return{rings:k.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(g)for(var c=(a.zmax-a.zmin)/2,e=0;e<b.length;e++)b[e].push(c);if(f)for(a=(a.mmax-a.mmin)/2,e=0;e<b.length;e++)b[e].push(a);return b}),hasZ:g,hasM:f,spatialReference:e}};d.prototype._getParts=
function(a){var b=this.cache._parts;if(!b){var b=[],c=this.ymin,e=this.ymax,k=this.spatialReference,g=this.width,f=this.xmin,d=this.xmax,q=void 0;a=a||m.getInfo(k);var p=a.valid,r=p[0],t=p[1],q=this._normalizeX(this.xmin,a),v=q.x,p=q.frameId,q=this._normalizeX(this.xmax,a),l=q.x;a=q.frameId;q=v===l&&0<g;if(g>2*t){g=new h(f<d?v:l,c,t,e,k);f=new h(r,c,f<d?l:v,e,k);d=new h(0,c,t,e,k);c=new h(r,c,0,e,k);e=[];k=[];g.contains(d)&&e.push(p);g.contains(c)&&k.push(p);f.contains(d)&&e.push(a);f.contains(c)&&
k.push(a);for(r=p+1;r<a;r++)e.push(r),k.push(r);b.push({extent:g,frameIds:[p]},{extent:f,frameIds:[a]},{extent:d,frameIds:e},{extent:c,frameIds:k})}else v>l||q?b.push({extent:new h(v,c,t,e,k),frameIds:[p]},{extent:new h(r,c,l,e,k),frameIds:[a]}):b.push({extent:new h(v,c,l,e,k),frameIds:[p]});this.cache._parts=b}a=this.hasZ;c=this.hasM;if(a||c)for(p={},a&&(p.zmin=this.zmin,p.zmax=this.zmax),c&&(p.mmin=this.mmin,p.mmax=this.mmax),a=0;a<b.length;a++)b[a].extent.set(p);return b};d.prototype._normalizeX=
function(a,b){var c=b.valid;b=c[0];var e=c[1],c=2*e,k=0;a>e?(b=Math.ceil(Math.abs(a-e)/c),a-=b*c,k=b):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c,k=-b);return{x:a,frameId:k}};var h;f([g.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],d.prototype,"cache",void 0);f([g.property({readOnly:!0,dependsOn:["cache"]})],d.prototype,"center",null);f([g.property({readOnly:!0,dependsOn:["cache"]})],d.prototype,"extent",null);f([g.property({readOnly:!0,dependsOn:["mmin",
"mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasM",null);f([g.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasZ",null);f([g.property({readOnly:!0,dependsOn:["ymin","ymax"]})],d.prototype,"height",null);f([g.property({readOnly:!0,dependsOn:["xmin","xmax"]})],d.prototype,"width",null);f([g.property({type:Number,json:{write:!0}})],d.prototype,"xmin",void 0);f([g.property({type:Number,json:{write:!0}})],d.prototype,
"ymin",void 0);f([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],d.prototype,"mmin",void 0);f([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],d.prototype,"zmin",void 0);f([g.property({type:Number,json:{write:!0}})],d.prototype,"xmax",void 0);f([g.property({type:Number,json:{write:!0}})],d.prototype,"ymax",void 0);f([g.property({type:Number,
json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],d.prototype,"mmax",void 0);f([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],d.prototype,"zmax",void 0);return d=h=f([g.subclass("esri.geometry.Extent")],d)}(g.declared(e));h.prototype.toJSON.isDefaultToJSON=!0;return h})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),
function(h,d,n,f,l,g,e){return function(c){function d(){var b=c.call(this)||this;b.type=null;b.extent=null;b.hasM=!1;b.hasZ=!1;b.spatialReference=e.WGS84;return b}n(d,c);Object.defineProperty(d.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});d.prototype.readSpatialReference=function(b,a){if(b instanceof e)return b;if(null!=b){var c=new e;c.read(b,a);return c}return b};d.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};
d.prototype.clearCache=function(){this.notifyChange("cache")};d.prototype.getCacheValue=function(b){return this.cache[b]};d.prototype.setCacheValue=function(b,a){this.cache[b]=a};f([g.property()],d.prototype,"type",void 0);f([g.property({readOnly:!0,dependsOn:["spatialReference"]})],d.prototype,"cache",null);f([g.property({readOnly:!0,dependsOn:["spatialReference"]})],d.prototype,"extent",void 0);f([g.property({type:Boolean,json:{write:{overridePolicy:function(b){return{enabled:b}}}}})],d.prototype,
"hasM",void 0);f([g.property({type:Boolean,json:{write:{overridePolicy:function(b){return{enabled:b}}}}})],d.prototype,"hasZ",void 0);f([g.property({type:e,json:{write:!0}})],d.prototype,"spatialReference",void 0);f([g.reader("spatialReference")],d.prototype,"readSpatialReference",null);return d=f([g.subclass("esri.geometry.Geometry")],d)}(g.declared(l))})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b){function a(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var m=[0,0],k=l.getLogger("esri.geometry.Point");h=function(e){function d(a,b,c,k,g){a=e.call(this)||this;a.x=0;a.y=0;a.z=void 0;a.m=void 0;a.type="point";return a}n(d,e);q=d;d.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};d.distance=function(a,b){var c=a.x-b.x,e=a.y-b.y;a=
a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(c*c+e*e+a*a)};d.prototype.normalizeCtorArgs=function(e,g,f,d,q){var h;if(Array.isArray(e))h=e,q=g,e=h[0],g=h[1],f=h[2],d=h[3];else if(e&&"object"===typeof e){if(h=e,e=null!=h.x?h.x:h.longitude,g=null!=h.y?h.y:h.latitude,f=null!=h.z?h.z:h.altitude,d=h.m,(q=h.spatialReference)&&"esri.geometry.SpatialReference"!==q.declaredClass&&(q=new c(q)),null!=h.longitude||null!=h.latitude)null==h.longitude?k.warn(".longitude\x3d","Latitude was defined without longitude"):
null==h.latitude?k.warn(".latitude\x3d","Longitude was defined without latitude"):!h.declaredClass&&q&&q.isWebMercator&&(g=b.lngLatToXY(h.longitude,h.latitude,m),e=g[0],g=g[1])}else a(f)?(q=f,f=null):a(d)&&(q=d,d=null);e={x:e,y:g};null==e.x&&null!=e.y?k.warn(".y\x3d","Y coordinate was defined without an X coordinate"):null==e.y&&null!=e.x&&k.warn(".x\x3d","X coordinate was defined without a Y coordinate");null!=q&&(e.spatialReference=q);null!=f&&(e.z=f);null!=d&&(e.m=d);return e};Object.defineProperty(d.prototype,
"hasM",{get:function(){return void 0!==this.m},set:function(a){var b=this._get("hasM");a!==b&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(a){var b=this._get("hasZ");a!==b&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"latitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return b.xyToLngLat(this.x,
this.y,m)[1];if(a.isWGS84)return this._get("y")}return null},set:function(a){var c=this._get("spatialReference");c&&(c.isWebMercator?this._set("y",b.lngLatToXY(this.x,a,m)[1]):c.isWGS84&&this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return b.xyToLngLat(this._get("x"),this._get("y"),m)[0];if(a.isWGS84)return this._get("x")}return null},set:function(a){var c=
this._get("spatialReference");c&&(c.isWebMercator?this._set("x",b.lngLatToXY(a,this._get("y"),m)[0]):c.isWGS84&&this._set("x",a),this._set("longitude",a))},enumerable:!0,configurable:!0});d.prototype.writeX=function(a,b,c){b[c]=isNaN(a)?"NaN":a};d.prototype.readX=function(a){return"string"===typeof a?NaN:a};d.prototype.clone=function(){var a=new q;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a};d.prototype.copy=function(a){q.copy(a,this);return this};
d.prototype.equals=function(a){var c;if(!a)return!1;var e=this.x,k=this.y,g=this.z,f=this.m,d=this.spatialReference,m=a.z,q=a.m,h=a.x;c=a.y;a=a.spatialReference;if(!d.equals(a))if(d.isWebMercator&&a.isWGS84)c=b.lngLatToXY(h,c),h=c[0],c=c[1],a=d;else if(d.isWGS84&&a.isWebMercator)c=b.xyToLngLat(h,c),h=c[0],c=c[1],a=d;else return!1;return e===h&&k===c&&g===m&&f===q&&d.wkid===a.wkid};d.prototype.offset=function(a,b,c){this.x+=a;this.y+=b;null!=c&&this.hasZ&&(this.z+=c);return this};d.prototype.normalize=
function(){if(!this.spatialReference)return this;var a=p.getInfo(this.spatialReference);if(!a)return this;var b=this.x,c=a.valid,a=c[0],e=c[1],c=2*e;b>e?(a=Math.ceil(Math.abs(b-e)/c),b-=a*c):b<a&&(a=Math.ceil(Math.abs(b-a)/c),b+=a*c);this._set("x",b);return this};d.prototype.distance=function(a){return q.distance(this,a)};d.prototype.toArray=function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]};d.prototype.toJSON=
function(a){return this.write(null,a)};var q;f([g.property({dependsOn:["x","y","z","m","spatialReference"]})],d.prototype,"cache",void 0);f([g.property({type:Boolean,dependsOn:["m"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasM",null);f([g.property({type:Boolean,dependsOn:["z"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasZ",null);f([g.property({type:Number,dependsOn:["y"]})],d.prototype,"latitude",null);f([g.property({type:Number,dependsOn:["x"]})],
d.prototype,"longitude",null);f([g.property({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}})],d.prototype,"x",void 0);f([g.writer("x")],d.prototype,"writeX",null);f([g.reader("x")],d.prototype,"readX",null);f([g.property({type:Number,json:{write:!0}})],d.prototype,"y",void 0);f([g.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],d.prototype,"z",void 0);f([g.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],
d.prototype,"m",void 0);return d=q=f([g.subclass("esri.geometry.Point")],d)}(g.declared(e));h.prototype.toJSON.isDefaultToJSON=!0;return h})},"esri/geometry/support/webMercatorUtils":function(){define("require exports ../../core/lang ../../core/wgs84Constants ../SpatialReference ./spatialReferenceUtils".split(" "),function(h,d,n,f,l,g){function e(a,b,c,e,g){var k;if("x"in a&&"x"in g)b=b(a.x,a.y,m,0,e),g.x=b[0],g.y=b[1];else if("xmin"in a&&"xmin"in g)k=b(a.xmin,a.ymin,m,0,e),g.xmin=k[0],g.ymin=k[1],
b=b(a.xmax,a.ymax,m,0,e),g.xmax=b[0],g.ymax=b[1];else if("paths"in a&&"paths"in g||"rings"in a&&"rings"in g){k="paths"in a?a.paths:a.rings;var d=[],f=void 0;for(a=0;a<k.length;a++){var q=k[a],f=[];d.push(f);for(var h=0;h<q.length;h++)f.push(b(q[h][0],q[h][1],[0,0],0,e)),2<q[h].length&&f[h].push(q[h][2]),3<q[h].length&&f[h].push(q[h][3])}"paths"in g?g.paths=d:g.rings=d}else if("points"in a&&"points"in g){k=a.points;d=[];for(a=0;a<k.length;a++)d[a]=b(k[a][0],k[a][1],[0,0],0,e),2<k[a].length&&d[a].push(k[a][2]),
3<k[a].length&&d[a].push(k[a][3]);g.points=d}else if("type"in a&&"mesh"===a.type&&"type"in g&&"mesh"===g.type&&(k=a.vertexAttributes&&a.vertexAttributes.position,d=g.vertexAttributes&&g.vertexAttributes.position,k))for(f=[0,0],a=0;a<k.length;a+=3)b(k[a],k[a+1],f,0,e),d[a]=f[0],d[a+1]=f[1];g.spatialReference=c;return g}function c(a,b){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?g.equals(b,a)?!0:g.isWebMercator(b)&&g.isWGS84(a)||
g.isWebMercator(a)&&g.isWGS84(b):!1}function p(b,c,e,g){void 0===e&&(e=[0,0]);void 0===g&&(g=0);89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999);c*=.017453292519943;e[g]=.017453292519943*b*a;e[g+1]=.5*a*Math.log((1+Math.sin(c))/(1-Math.sin(c)));return e}function b(b,c,e,g,d){void 0===e&&(e=[0,0]);void 0===g&&(g=0);void 0===d&&(d=!1);b=b/a*57.29577951308232;e[g]=d?b:b-360*Math.floor((b+180)/360);e[g+1]=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*c/a)));return e}Object.defineProperty(d,"__esModule",
{value:!0});var a=f.wgs84Radius,m=[0,0];d.canProject=c;d.project=function(a,d){var k=a&&a.spatialReference;d=d&&(null!=d.wkid||null!=d.wkt?d:d.spatialReference);return c(k,d)?g.equals(k,d)?n.clone(a):g.isWebMercator(d)?e(a,p,l.WebMercator,!1,n.clone(a)):g.isWGS84(d)?e(a,b,l.WGS84,!1,n.clone(a)):null:null};d.lngLatToXY=p;d.xyToLngLat=b;d.geographicToWebMercator=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=n.clone(a));return e(a,p,l.WebMercator,b,c)};d.webMercatorToGeographic=function(a,c,g){void 0===
c&&(c=!1);void 0===g&&(g=n.clone(a));return e(a,b,l.WGS84,c,g)}})},"esri/core/wgs84Constants":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.wgs84Radius=6378137;d.wgs84InverseFlattening=298.257223563;d.wgs84Flattening=1/d.wgs84InverseFlattening;d.wgs84PolarRadius=d.wgs84Radius*(1-d.wgs84Flattening);d.wgs84Eccentricity=.0818191908426215})},"esri/geometry/support/contains":function(){define(["require","exports"],function(h,d){function n(g,e,
c,d){return e>=g.xmin&&e<=g.xmax&&c>=g.ymin&&c<=g.ymax?null!=d&&g.hasZ?d>=g.zmin&&d<=g.zmax:!0:!1}function f(g,e){if(g=g.rings)if(Array.isArray(g[0][0])){for(var c=!1,d=0,b=g.length;d<b;d++)c=l(c,g[d],e);e=c}else e=l(!1,g,e);else e=!1;return e}function l(g,e,c){var d=c[0];c=c[1];for(var b=0,a=0,f=e.length;a<f;a++){b++;b===f&&(b=0);var k=e[a],q=k[0],k=k[1],h=e[b],l=h[0],h=h[1];(k<c&&h>=c||h<c&&k>=c)&&q+(c-k)/(h-k)*(l-q)<d&&(g=!g)}return g}Object.defineProperty(d,"__esModule",{value:!0});d.extentContainsPoint=
function(g,e){return n(g,e.x,e.y,e.z)};d.extentContainsExtent=function(g,e){var c=e.xmin,d=e.ymin,b=e.zmin,a=e.xmax,f=e.ymax,k=e.zmax;return g.hasZ&&e.hasZ?n(g,c,d,b)&&n(g,c,f,b)&&n(g,a,f,b)&&n(g,a,d,b)&&n(g,c,d,k)&&n(g,c,f,k)&&n(g,a,f,k)&&n(g,a,d,k):n(g,c,d)&&n(g,c,f)&&n(g,a,f)&&n(g,a,d)};d.extentContainsCoords2D=function(g,e){return n(g,e[0],e[1])};d.extentContainsCoords3D=function(g,e){return n(g,e[0],e[1],e[2])};d.polygonContainsPoint=function(g,e){return f(g,[e.x,e.y])};d.polygonContainsCoords=
f})},"esri/geometry/support/intersects":function(){define(["require","exports","./contains"],function(h,d,n){function f(a,b){return n.extentContainsPoint(a,b)}function l(a,b){var c=a.hasZ&&b.hasZ,e;if(a.xmin<=b.xmin){if(e=b.xmin,a.xmax<e)return!1}else if(e=a.xmin,b.xmax<e)return!1;if(a.ymin<=b.ymin){if(e=b.ymin,a.ymax<e)return!1}else if(e=a.ymin,b.ymax<e)return!1;if(c&&b.hasZ)if(a.zmin<=b.zmin){if(c=b.zmin,a.zmax<c)return!1}else if(c=a.zmin,b.zmax<c)return!1;return!0}function g(a,b){var c=b.hasZ?
n.extentContainsCoords3D:n.extentContainsCoords2D,e=0;for(b=b.points;e<b.length;e++)if(c(a,b[e]))return!0;return!1}function e(b,c){a[0]=b.xmin;a[1]=b.ymax;m[0]=b.xmax;m[1]=b.ymax;k[0]=b.xmin;k[1]=b.ymin;q[0]=b.xmax;q[1]=b.ymin;for(var e=0,g=v;e<g.length;e++)if(n.polygonContainsCoords(c,g[e]))return!0;e=0;for(c=c.rings;e<c.length;e++)if(g=c[e],g.length){var d=g[0];if(n.extentContainsCoords2D(b,d))return!0;for(var f=1;f<g.length;f++){var h=g[f];if(n.extentContainsCoords2D(b,h)||p(d,h,u))return!0;d=
h}}return!1}function c(b,c){a[0]=b.xmin;a[1]=b.ymax;m[0]=b.xmax;m[1]=b.ymax;k[0]=b.xmin;k[1]=b.ymin;q[0]=b.xmax;q[1]=b.ymin;c=c.paths;for(var e=0;e<c.length;e++){var g=c[e];if(c.length){var d=g[0];if(n.extentContainsCoords2D(b,d))return!0;for(var f=1;f<g.length;f++){var h=g[f];if(n.extentContainsCoords2D(b,h)||p(d,h,u))return!0;d=h}}}return!1}function p(a,c,e){for(var k=0;k<e.length;k++)if(b(a,c,e[k][0],e[k][1]))return!0;return!1}function b(a,b,c,e,k){var g=a[0];a=a[1];var d=b[0];b=b[1];var f=c[0],
m=c[1];c=e[0]-f;var f=g-f,q=d-g;e=e[1]-m;var m=a-m,h=b-a,p=e*q-c*h;if(0===p)return!1;c=(c*m-e*f)/p;f=(q*m-h*f)/p;return 0<=c&&1>=c&&0<=f&&1>=f?(k&&(k[0]=g+c*(d-g),k[1]=a+c*(b-a)),!0):!1}Object.defineProperty(d,"__esModule",{value:!0});d.extentIntersectsPoint=f;d.extentIntersectsExtent=l;d.extentIntersectsMultipoint=g;var a=[0,0],m=[0,0],k=[0,0],q=[0,0],v=[a,m,k,q],u=[[k,a],[a,m],[m,q],[q,k]];d.extentIntersectsPolygon=e;d.extentIntersectsPolyline=c;var t=[0,0];d.isSelfIntersecting=function(a){for(var c=
0;c<a.length;c++){for(var e=a[c],k=0;k<e.length-1;k++)for(var g=e[k],d=e[k+1],f=c+1;f<a.length;f++)for(var m=0;m<a[f].length-1;m++){var q=a[f][m],h=a[f][m+1],p=b(g,d,q,h,t);if(p&&!(t[0]===g[0]&&t[1]===g[1]||t[0]===q[0]&&t[1]===q[1]||t[0]===d[0]&&t[1]===d[1]||t[0]===h[0]&&t[1]===h[1]))return!0}m=e.length;if(!(4>=m))for(k=0;k<m-3;k++){var r=m-1;0===k&&(r=m-2);g=e[k];d=e[k+1];for(f=k+2;f<r;f++)if(q=e[f],h=e[f+1],(p=b(g,d,q,h,t))&&!(t[0]===g[0]&&t[1]===g[1]||t[0]===q[0]&&t[1]===q[1]||t[0]===d[0]&&t[1]===
d[1]||t[0]===h[0]&&t[1]===h[1]))return!0}}return!1};d.segmentIntersects=b;d.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return l;case "esriGeometryMultipoint":case "multipoint":return g;case "esriGeometryPoint":case "point":return f;case "esriGeometryPolygon":case "polygon":return e;case "esriGeometryPolyline":case "polyline":return c;case "mesh":return l}}})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper dojo/_base/kernel dojo/_base/url ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A){var x,C={Bookmark:function(){return u.create(function(a){return h(["./Bookmark"],a)})},Portal:function(){return u.create(function(a){return h(["./Portal"],a)})},PortalFolder:function(){return u.create(function(a){return h(["./PortalFolder"],a)})},PortalGroup:function(){return u.create(function(a){return h(["./PortalGroup"],a)})},PortalItem:function(){return u.create(function(a){return h(["./PortalItem"],a)})},PortalQueryParams:function(){return u.create(function(a){return h(["./PortalQueryParams"],
a)})},PortalQueryResult:function(){return u.create(function(a){return h(["./PortalQueryResult"],a)})},PortalRating:function(){return u.create(function(a){return h(["./PortalRating"],a)})},PortalUser:function(){return u.create(function(a){return h(["./PortalUser"],a)})}};return function(k){function d(a){a=k.call(this)||this;a.access=null;a.allSSL=!1;a.authMode="auto";a.authorizedCrossOriginDomains=null;a.basemapGalleryGroupQuery=null;a.bingKey=null;a.canListApps=!1;a.canListData=!1;a.canListPreProvisionedItems=
!1;a.canProvisionDirectPurchase=!1;a.canSearchPublic=!0;a.canShareBingPublic=!1;a.canSharePublic=!1;a.canSignInArcGIS=!1;a.canSignInIDP=!1;a.colorSetsGroupQuery=null;a.commentsEnabled=!1;a.created=null;a.culture=null;a.customBaseUrl=null;a.defaultBasemap=null;a.defaultExtent=null;a.defaultVectorBasemap=null;a.description=null;a.eueiEnabled=!1;a.featuredGroups=null;a.featuredItemsGroupQuery=null;a.galleryTemplatesGroupQuery=null;a.livingAtlasGroupQuery=null;a.hasCategorySchema=!1;a.helperServices=
null;a.homePageFeaturedContent=null;a.homePageFeaturedContentCount=null;a.httpPort=null;a.httpsPort=null;a.id=null;a.ipCntryCode=null;a.isPortal=!1;a.layerTemplatesGroupQuery=null;a.maxTokenExpirationMinutes=null;a.modified=null;a.name=null;a.portalHostname=null;a.portalMode=null;a.portalProperties=null;a.region=null;a.rotatorPanels=null;a.showHomePageDescription=!1;a.supportsHostedServices=!1;a.symbolSetsGroupQuery=null;a.templatesGroupQuery=null;a.units=null;a.url=p.portalUrl;a.urlKey=null;a.user=
null;a.useStandardizedQuery=!1;a.useVectorBasemaps=!1;a.vectorBasemapGalleryGroupQuery=null;return a}f(d,k);v=d;d.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};d.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};d.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];-1===p.request.trustedServers.indexOf(c)&&p.request.trustedServers.push(c)}return a};
d.prototype.readDefaultBasemap=function(a){return a?(a=x.fromJSON(a),a.portalItem={portal:this},a):null};d.prototype.readDefaultVectorBasemap=function(a){return a?(a=x.fromJSON(a),a.portalItem={portal:this},a):null};Object.defineProperty(d.prototype,"extraQuery",{get:function(){var a=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!a?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isOrganization",{get:function(){return!!this.access},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"restUrl",{get:function(){var a=this.url;if(a)var b=a.indexOf("/sharing"),a=0<b?a.substring(0,b):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,b=this.thumbnail;return a&&b?this._normalizeSSL(a+"/portals/self/resources/"+b):null},enumerable:!0,configurable:!0});d.prototype.readUrlKey=function(a){return a?a.toLowerCase():
a};d.prototype.readUser=function(a){var b=null;a&&(b=A.fromJSON(a),b.portal=this);return b};d.prototype.load=function(){var a=this,c=u.create(function(a){return h(["../Basemap"],a)}).then(function(a){x=a}).then(function(){return a._fetchSelf()}).then(function(c){if(b.id){var e=b.id;a.credential=e.findCredential(a.restUrl);a.credential||a.authMode!==v.AUTH_MODE_AUTO||(a._esriId_credentialCreateHandle=e.on("credential-create",function(){e.findCredential(a.restUrl)&&a._signIn()}))}a.read(c)});this.addResolvingPromise(c);
return this.when()};d.prototype.fetchBasemaps=function(a){var b=new z;b.query=a||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);b.disableExtraQuery=!0;return this.queryGroups(b).then(function(a){b.num=100;b.query='type:"Web Map" -type:"Web Application"';return a.total?(a=a.results[0],b.sortField=a.sortField||"name",b.sortOrder=a.sortOrder||"desc",a.queryItems(b)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new x({portalItem:a})}):
[]})};d.prototype.fetchCategorySchema=function(){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema").then(function(a){return a.categorySchema}):u.resolve([])};d.prototype.fetchFeaturedGroups=function(){var a=this.featuredGroups,b=new z;b.num=100;b.sortField="title";if(a&&a.length){for(var c=[],e=0;e<a.length;e++){var k=a[e];c.push('(title:"'+k.title+'" AND owner:'+k.owner+")")}b.query=c.join(" OR ");return this.queryGroups(b).then(function(a){return a.results})}return u.resolve([])};
d.prototype.fetchRegions=function(){return this._request(this.restUrl+"/portals/regions",{query:{culture:this.user&&this.user.culture||this.culture||e.locale}})};d.getDefault=function(){v._default||(v._default=new v);return v._default};d.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")};d.prototype.queryItems=function(a){return this._queryPortal("/search",a,"PortalItem")};d.prototype.queryUsers=function(a){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",
a,"PortalUser")};d.prototype.toJSON=function(){throw new m("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};d.prototype._fetchSelf=function(a,b){void 0===a&&(a=this.authMode);void 0===b&&(b=!1);var c=this.restUrl+"/portals/self";a={authMode:a,query:{culture:e.locale}};"auto"===a.authMode&&(a.authMode="no-prompt");b&&(a.query.default=!0);return this._request(c,a)};d.prototype._queryPortal=function(a,b,c){var e=this,k=function(c){return e._request(e.restUrl+a,b.toRequestOptions(e)).then(function(a){var k=
b.clone();k.start=a.nextStart;return new B({nextQueryParams:k,queryParams:b,total:a.total,results:v._resultsToTypedArray(c,{portal:e},a)})}).then(function(a){return u.all(a.results.map(function(b){return"function"===typeof b.when?b.when():a})).then(function(){return a},function(){return a})})};return c&&C[c]?C[c]().then(function(a){return k(a)}):k()};d.prototype._signIn=function(){var a=this;if(this.authMode===v.AUTH_MODE_ANONYMOUS)return u.reject(new m("portal:invalid-auth-mode",'Current "authMode"\' is "'+
this.authMode+'"'));if("failed"===this.loadStatus)return u.reject(this.loadError);var c=function(b){return u.resolve().then(function(){if("not-loaded"===a.loadStatus)return b||(a.authMode="immediate"),a.load().then(function(){return null});if("loading"===a.loadStatus)return a.load().then(function(){if(a.credential)return null;a.credential=b;return a._fetchSelf("immediate")});if(a.user&&a.credential===b)return null;a.credential=b;return a._fetchSelf("immediate")}).then(function(b){b&&a.read(b)})};
return b.id?b.id.getCredential(this.restUrl).then(function(a){return c(a)}):c(this.credential)};d.prototype._normalizeSSL=function(a){var b=this.allSSL||t.isAppHTTPS();if(this.isPortal){var e=new c(a);return-1<this.portalHostname.toLowerCase().indexOf(e.host.toLowerCase())&&e.port&&"80"!==e.port&&"443"!==e.port?b?"https://"+e.host+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+e.path+"?"+e.query:"http://"+e.host+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:"")+e.path+"?"+e.query:
b?a.replace("http:","https:"):a}return b?a.replace("http:","https:"):a};d.prototype._normalizeUrl=function(a){var b=this.credential&&this.credential.token;return this._normalizeSSL(b?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+b:a)};d.prototype._requestToTypedArray=function(a,b,c){var e=this,k=function(c){return e._request(a,b).then(function(a){var b=v._resultsToTypedArray(c,{portal:e},a);return u.all(b.map(function(b){return"function"===typeof b.when?b.when():a})).then(function(){return b},function(){return b})})};
return c?u.create(function(a){return h(["./"+c],a)}).then(function(a){return k(a)}):k()};d.prototype._request=function(b,c){var e=this.authMode===v.AUTH_MODE_ANONYMOUS?"anonymous":"auto",k=null,g="auto",d={f:"json"},f="json";c&&(c.authMode&&(e=c.authMode),c.body&&(k=c.body),c.method&&(g=c.method),c.query&&(d=n({},d,c.query)),c.responseType&&(f=c.responseType));c={authMode:e,body:k,method:g,query:d,responseType:f,timeout:0};return a(this._normalizeSSL(b),c).then(function(a){return a.data})};d._resultsToTypedArray=
function(a,b,c){if(c){if(c=c.listings||c.notifications||c.userInvitations||c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c.relatedItems||c,a||b)c=c.map(function(c){c=q.mixin(a?a.fromJSON(c):c,b);"function"===typeof c.load&&c.load();return c})}else c=[];return c};var v;d.AUTH_MODE_ANONYMOUS="anonymous";d.AUTH_MODE_AUTO="auto";d.AUTH_MODE_IMMEDIATE="immediate";l([r.property()],d.prototype,"access",void 0);l([r.property()],d.prototype,"allSSL",void 0);l([r.property()],d.prototype,"authMode",
void 0);l([r.property()],d.prototype,"authorizedCrossOriginDomains",void 0);l([r.reader("authorizedCrossOriginDomains")],d.prototype,"readAuthorizedCrossOriginDomains",null);l([r.property()],d.prototype,"basemapGalleryGroupQuery",void 0);l([r.property()],d.prototype,"bingKey",void 0);l([r.property()],d.prototype,"canListApps",void 0);l([r.property()],d.prototype,"canListData",void 0);l([r.property()],d.prototype,"canListPreProvisionedItems",void 0);l([r.property()],d.prototype,"canProvisionDirectPurchase",
void 0);l([r.property()],d.prototype,"canSearchPublic",void 0);l([r.property()],d.prototype,"canShareBingPublic",void 0);l([r.property()],d.prototype,"canSharePublic",void 0);l([r.property()],d.prototype,"canSignInArcGIS",void 0);l([r.property()],d.prototype,"canSignInIDP",void 0);l([r.property()],d.prototype,"colorSetsGroupQuery",void 0);l([r.property()],d.prototype,"commentsEnabled",void 0);l([r.property({type:Date})],d.prototype,"created",void 0);l([r.property()],d.prototype,"credential",void 0);
l([r.property()],d.prototype,"culture",void 0);l([r.property()],d.prototype,"currentVersion",void 0);l([r.property()],d.prototype,"customBaseUrl",void 0);l([r.property()],d.prototype,"defaultBasemap",void 0);l([r.reader("defaultBasemap")],d.prototype,"readDefaultBasemap",null);l([r.property({type:w})],d.prototype,"defaultExtent",void 0);l([r.property()],d.prototype,"defaultVectorBasemap",void 0);l([r.reader("defaultVectorBasemap")],d.prototype,"readDefaultVectorBasemap",null);l([r.property()],d.prototype,
"description",void 0);l([r.property()],d.prototype,"eueiEnabled",void 0);l([r.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],d.prototype,"extraQuery",null);l([r.property()],d.prototype,"featuredGroups",void 0);l([r.property()],d.prototype,"featuredItemsGroupQuery",void 0);l([r.property()],d.prototype,"galleryTemplatesGroupQuery",void 0);l([r.property()],d.prototype,"livingAtlasGroupQuery",void 0);l([r.property()],d.prototype,"hasCategorySchema",void 0);l([r.property()],d.prototype,
"helpBase",void 0);l([r.property()],d.prototype,"helperServices",void 0);l([r.property()],d.prototype,"helpMap",void 0);l([r.property()],d.prototype,"homePageFeaturedContent",void 0);l([r.property()],d.prototype,"homePageFeaturedContentCount",void 0);l([r.property()],d.prototype,"httpPort",void 0);l([r.property()],d.prototype,"httpsPort",void 0);l([r.property()],d.prototype,"id",void 0);l([r.property()],d.prototype,"ipCntryCode",void 0);l([r.property({dependsOn:["access"],readOnly:!0})],d.prototype,
"isOrganization",null);l([r.property()],d.prototype,"isPortal",void 0);l([r.property()],d.prototype,"layerTemplatesGroupQuery",void 0);l([r.property()],d.prototype,"maxTokenExpirationMinutes",void 0);l([r.property({type:Date})],d.prototype,"modified",void 0);l([r.property()],d.prototype,"name",void 0);l([r.property()],d.prototype,"portalHostname",void 0);l([r.property()],d.prototype,"portalMode",void 0);l([r.property()],d.prototype,"portalProperties",void 0);l([r.property()],d.prototype,"region",
void 0);l([r.property({dependsOn:["url"],readOnly:!0})],d.prototype,"restUrl",null);l([r.property()],d.prototype,"rotatorPanels",void 0);l([r.property()],d.prototype,"showHomePageDescription",void 0);l([r.property()],d.prototype,"staticImagesUrl",void 0);l([r.property()],d.prototype,"stylesGroupQuery",void 0);l([r.property()],d.prototype,"supportsHostedServices",void 0);l([r.property()],d.prototype,"symbolSetsGroupQuery",void 0);l([r.property()],d.prototype,"templatesGroupQuery",void 0);l([r.property()],
d.prototype,"thumbnail",void 0);l([r.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],d.prototype,"thumbnailUrl",null);l([r.property()],d.prototype,"units",void 0);l([r.property()],d.prototype,"url",void 0);l([r.property()],d.prototype,"urlKey",void 0);l([r.reader("urlKey")],d.prototype,"readUrlKey",null);l([r.property()],d.prototype,"user",void 0);l([r.reader("user")],d.prototype,"readUser",null);l([r.property()],d.prototype,"useStandardizedQuery",void 0);l([r.property()],d.prototype,"useVectorBasemaps",
void 0);l([r.property()],d.prototype,"vectorBasemapGalleryGroupQuery",void 0);l([g(1,r.cast(z))],d.prototype,"_queryPortal",null);return d=v=l([r.subclass("esri.portal.Portal")],d)}(r.declared(k,v))})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(h,d){return function(n,f){d(n,f,h)}}})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){var k=e({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(e){function g(a){a=e.call(this)||this;a.categories=null;a.disableExtraQuery=!1;a.extent=null;a.num=10;a.query=null;a.sortField=null;a.start=1;return a}f(g,e);d=g;Object.defineProperty(g.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,configurable:!0});
g.prototype.clone=function(){return new d({categories:this.categories?c.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};g.prototype.toRequestOptions=function(b,c){var e;this.categories&&(e=this.categories.map(function(a){return Array.isArray(a)?JSON.stringify(a):a}));var g;if(this.extent){var d=m.project(this.extent,a.WGS84);d&&(g=d.xmin+
","+d.ymin+","+d.xmax+","+d.ymax)}d=this.query;!this.disableExtraQuery&&b.extraQuery&&(d="("+d+")"+b.extraQuery);b={categories:e,bbox:g,q:d,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(b.sortField=k.toJSON(this.sortField),b.sortOrder=this.sortOrder);return{query:n({},c,b)}};var d;l([p.property()],g.prototype,"categories",void 0);l([p.property()],g.prototype,"disableExtraQuery",void 0);l([p.property({type:b})],g.prototype,"extent",void 0);l([p.property()],g.prototype,
"num",void 0);l([p.property()],g.prototype,"query",void 0);l([p.property()],g.prototype,"sortField",void 0);l([p.property()],g.prototype,"sortOrder",null);l([p.property()],g.prototype,"start",void 0);return g=d=l([p.subclass("esri.portal.PortalQueryParams")],g)}(p.declared(g))})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(h,d,n,f,
l,g){return function(e){function c(c){c=e.call(this)||this;c.nextQueryParams=null;c.queryParams=null;c.results=null;c.total=null;return c}n(c,e);f([g.property()],c.prototype,"nextQueryParams",void 0);f([g.property()],c.prototype,"queryParams",void 0);f([g.property()],c.prototype,"results",void 0);f([g.property()],c.prototype,"total",void 0);return c=f([g.subclass("esri.portal.PortalQueryResult")],c)}(g.declared(l))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./PortalFolder ./PortalGroup".split(" "),
function(h,d,n,f,l,g,e,c,p,b){return function(a){function g(){var b=a.call(this)||this;b.access=null;b.created=null;b.culture=null;b.description=null;b.email=null;b.fullName=null;b.modified=null;b.orgId=null;b.portal=null;b.preferredView=null;b.privileges=null;b.region=null;b.role=null;b.roleId=null;b.units=null;b.username=null;b.userType=null;return b}n(g,a);Object.defineProperty(g.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+
b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});g.prototype.addItem=function(a){var b=this,c=a&&a.item,e=a&&a.data;a=a&&a.folder;var k={method:"post"};
c&&(k.query=c._getPostQuery(),null!=e&&("string"===typeof e?k.query.text=e:"object"===typeof e&&(k.query.text=JSON.stringify(e))));e=this.userContentUrl;a&&(e+="/"+a.id);return this.portal._request(e+"/addItem",k).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c._reload():c.load()})};g.prototype.deleteItem=function(a){var b=this.userContentUrl;a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=null;a.portal=
null})};g.prototype.deleteItems=function(a){var b=this.userContentUrl+"/deleteItems",c=a.map(function(a){return a.id});return c.length?(c={method:"post",query:{items:c.join(",")}},this.portal._request(b,c).then(function(){a.forEach(function(a){a.id=null;a.portal=null})})):e.resolve(void 0)};g.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=p.fromJSON(b);b.portal=a.portal;
return b}):[]})};g.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(c){return c&&c.groups?c.groups.map(function(c){c=b.fromJSON(c);c.portal=a.portal;return c}):[]})};g.prototype.fetchItems=function(a){var b=this;a||(a={});var c=this.userContentUrl;a.folder&&(c+="/"+a.folder.id);var k;return e.create(function(a){return h(["./PortalItem"],a)}).then(function(e){k=e;return b.portal._request(c,{query:{folders:!1,num:a.num||10,start:a.start||1}})}).then(function(a){var c;
return a&&a.items?(c=a.items.map(function(a){a=k.fromJSON(a);a.portal=b.portal;return a}),e.all(c.map(function(a){return a.load()})).catch(function(a){return a}).then(function(){return{items:c,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};g.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};g.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new b({id:this.favGroupId,portal:this.portal})),
this._favGroup.queryItems(a)):e.reject(new l("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};g.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};f([c.property()],g.prototype,"access",void 0);f([c.property({type:Date})],g.prototype,"created",void 0);f([c.property()],g.prototype,"culture",void 0);f([c.property()],g.prototype,"description",void 0);f([c.property()],g.prototype,"email",void 0);f([c.property()],
g.prototype,"favGroupId",void 0);f([c.property()],g.prototype,"fullName",void 0);f([c.property({type:Date})],g.prototype,"modified",void 0);f([c.property()],g.prototype,"orgId",void 0);f([c.property()],g.prototype,"portal",void 0);f([c.property()],g.prototype,"preferredView",void 0);f([c.property()],g.prototype,"privileges",void 0);f([c.property()],g.prototype,"region",void 0);f([c.property()],g.prototype,"role",void 0);f([c.property()],g.prototype,"roleId",void 0);f([c.property()],g.prototype,"thumbnail",
void 0);f([c.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],g.prototype,"thumbnailUrl",null);f([c.property()],g.prototype,"units",void 0);f([c.property({dependsOn:["portal.restUrl"],readOnly:!0})],g.prototype,"userContentUrl",null);f([c.property({dependsOn:["portal.restUrl"],readOnly:!0})],g.prototype,"url",null);f([c.property()],g.prototype,"username",void 0);f([c.property()],g.prototype,"userType",void 0);return g=f([c.subclass("esri.portal.PortalUser")],g)}(c.declared(g))})},
"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e){return function(c){function g(b){b=c.call(this)||this;b.created=null;b.id=null;b.portal=null;b.title=null;b.username=null;return b}n(g,c);Object.defineProperty(g.prototype,"url",{get:function(){var b=this.get("portal.restUrl");return b?b+"/content/users/"+this.username+
"/"+this.id:null},enumerable:!0,configurable:!0});g.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};f([e.property({type:Date})],g.prototype,"created",void 0);f([e.property()],g.prototype,"id",void 0);f([e.property()],g.prototype,"portal",void 0);f([e.property()],g.prototype,"title",void 0);f([e.property({dependsOn:["portal.restUrl"],readOnly:!0})],g.prototype,"url",null);f([e.property()],g.prototype,"username",void 0);return g=
f([e.subclass("esri.portal.PortalFolder")],g)}(e.declared(g))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators ./PortalQueryParams".split(" "),function(h,d,n,f,l,g,e,c,p){return function(b){function a(a){a=b.call(this)||this;a.access=null;a.created=null;a.description=null;a.id=null;a.isInvitationOnly=!1;a.modified=
null;a.owner=null;a.portal=null;a.snippet=null;a.sortField=null;a.sortOrder=null;a.tags=null;a.title=null;return a}n(a,b);Object.defineProperty(a.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});a.prototype.fetchCategorySchema=
function(){var a=this;return this.portal._request(this.url+"/categorySchema").then(function(b){b=b.categorySchema||[];return b.some(function(a){return"contentCategorySetsGroupQuery.LivingAtlas"===a.source})?a._fetchCategorySchemaSet("LivingAtlas"):b})};a.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")};a.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};a.prototype.toJSON=function(){throw new g("internal:not-yet-implemented",
"PortalGroup.toJSON is not yet implemented");};a.prototype.queryItems=function(a){if(5<parseFloat(this.portal.currentVersion))return a=a||new p,this.portal._queryPortal("/content/groups/"+this.id+"/search",a,"PortalItem");a=a?a.clone():new p;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a)};a.prototype._fetchCategorySchemaSet=function(a){var b=this;return this.portal._fetchSelf(this.portal.authMode,!0).then(function(a){if(a=a.contentCategorySetsGroupQuery){var c=
new p;c.disableExtraQuery=!0;c.num=1;c.query=a;return b.portal.queryGroups(c)}throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(function(b){if(b.total){b=b.results[0];var c=new p;c.num=1;c.query='typekeywords:"'+a+'"';return b.queryItems(c)}throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(function(a){return a.total?a.results[0].fetchData().then(function(a){return(a=a&&a.categorySchema)&&a.length?
a:[]}):[]})};f([c.property()],a.prototype,"access",void 0);f([c.property({type:Date})],a.prototype,"created",void 0);f([c.property()],a.prototype,"description",void 0);f([c.property()],a.prototype,"id",void 0);f([c.property()],a.prototype,"isInvitationOnly",void 0);f([c.property({type:Date})],a.prototype,"modified",void 0);f([c.property()],a.prototype,"owner",void 0);f([c.property()],a.prototype,"portal",void 0);f([c.property()],a.prototype,"snippet",void 0);f([c.property()],a.prototype,"sortField",
void 0);f([c.property()],a.prototype,"sortOrder",void 0);f([c.property()],a.prototype,"tags",void 0);f([c.property()],a.prototype,"thumbnail",void 0);f([c.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],a.prototype,"thumbnailUrl",null);f([c.property()],a.prototype,"title",void 0);f([c.property({dependsOn:["portal.restUrl"],readOnly:!0})],a.prototype,"url",null);f([l(0,c.cast(p))],a.prototype,"queryItems",null);return a=f([c.subclass("esri.portal.PortalGroup")],a)}(c.declared(e))})},
"esri/portal/PortalItem":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ./Portal ./PortalRating".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k,q){return function(c){function g(a){a=c.call(this)||this;a.access=null;a.accessInformation=null;a.applicationProxies=null;a.avgRating=null;a.categories=
null;a.created=null;a.culture=null;a.description=null;a.extent=null;a.groupCategories=null;a.id=null;a.itemControl=null;a.licenseInfo=null;a.modified=null;a.name=null;a.numComments=null;a.numRatings=null;a.numViews=null;a.owner=null;a.portal=null;a.screenshots=null;a.size=null;a.snippet=null;a.tags=null;a.title=null;a.type=null;a.typeKeywords=null;a.url=null;return a}n(g,c);d=g;Object.defineProperty(g.prototype,"displayName",{get:function(){var a=this.type,b=this.typeKeywords||[],c=a;"Feature Service"===
a||"Feature Collection"===a?c=-1<b.indexOf("Table")?"Table":-1<b.indexOf("Route Layer")?"Route Layer":-1<b.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===a?c=-1<b.indexOf("Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===a?c="Scene Layer":"Scene Package"===a?c="Scene Layer Package":"Stream Service"===a?c="Feature Layer":"Geoprocessing Service"===a&&this.portal&&this.portal.isPortal?c=-1<b.indexOf("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===
a?c="Locator":"Microsoft Powerpoint"===a?c="Microsoft PowerPoint":"GeoJson"===a?c="GeoJSON":"Globe Service"===a?c="Globe Layer":"Vector Tile Service"===a?c="Tile Layer":"netCDF"===a?c="NetCDF":"Map Service"===a?c=-1===b.indexOf("Spatiotemporal")&&(-1<b.indexOf("Hosted Service")||-1<b.indexOf("Tiled"))&&-1===b.indexOf("Relational")?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?c=a.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===a?c="Big Data File Share":"Compact Tile Package"===
a&&(c="Tile Package (tpkx)");return c},enumerable:!0,configurable:!0});g.prototype.readExtent=function(a){return a&&a.length?new m(a[0][0],a[0][1],a[1][0],a[1][1]):null};Object.defineProperty(g.prototype,"iconUrl",{get:function(){var a=this.type&&this.type.toLowerCase()||"",b=this.typeKeywords||[],c=!1,e=!1,k=!1,g=!1,d=!1;0<a.indexOf("service")||"feature collection"===a||"kml"===a||"wms"===a||"wmts"===a||"wfs"===a?(c=-1<b.indexOf("Hosted Service"),"feature service"===a||"feature collection"===a||
"kml"===a||"wfs"===a?(e=-1<b.indexOf("Table"),k=-1<b.indexOf("Route Layer"),g=-1<b.indexOf("Markup"),a=(d=-1!==b.indexOf("Spatiotemporal"))&&e?"spatiotemporaltable":e?"table":k?"routelayer":g?"markup":d?"spatiotemporal":c?"featureshosted":"features"):"map service"===a||"wms"===a||"wmts"===a?(d=-1!==b.indexOf("Spatiotemporal"),a=c||-1<b.indexOf("Tiled")||"wmts"===a?"maptiles":d?"spatiotemporal":"mapimages"):a="scene service"===a?-1<b.indexOf("Line")?"sceneweblayerline":-1<b.indexOf("3DObject")?"sceneweblayermultipatch":
-1<b.indexOf("Point")?"sceneweblayerpoint":-1<b.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<b.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<b.indexOf("Polygon")?"sceneweblayerpolygon":-1<b.indexOf("Building")?"sceneweblayerbuilding":"sceneweblayer":"image service"===a?-1<b.indexOf("Elevation 3D Layer")?"elevationlayer":"imagery":"stream service"===a?"streamlayer":"vector tile service"===a?"vectortile":"datastore catalog service"===a?"datastorecollection":"geocoding service"===a?"geocodeservice":
"geoprocessing service"===a?-1<b.indexOf("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):a="web map"===a||"cityengine web scene"===a?"maps":"web scene"===a?-1<b.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===a||"mobile application"===a||"application"===a||"operation view"===a||"desktop application"===a?"apps":"map document"===a||"map package"===a||"published map"===a||"scene document"===a||"globe document"===a||"basemap package"===
a||"mobile basemap package"===a||"mobile map package"===a||"project package"===a||"project template"===a||"pro map"===a||"layout"===a||"layer"===a&&-1<b.indexOf("ArcGIS Pro")||"explorer map"===a&&b.indexOf("Explorer Document")?"mapsgray":"service definition"===a||"csv"===a||"shapefile"===a||"cad drawing"===a||"geojson"===a||"360 vr experience"===a||"netcdf"===a?"datafiles":"explorer add in"===a||"desktop add in"===a||"windows viewer add in"===a||"windows viewer configuration"===a?"appsgray":"arcgis pro add in"===
a||"arcgis pro configuration"===a?"addindesktop":"rule package"===a||"file geodatabase"===a||"sqlite geodatabase"===a||"csv collection"===a||"kml collection"===a||"windows mobile package"===a||"map template"===a||"desktop application template"===a||"arcpad package"===a||"code sample"===a||"form"===a||"document link"===a||"operations dashboard add in"===a||"rules package"===a||"image"===a||"workflow manager package"===a||"explorer map"===a&&-1<b.indexOf("Explorer Mapping Application")||-1<b.indexOf("Document")?
"datafilesgray":"network analysis service"===a||"geoprocessing service"===a||"geodata service"===a||"geometry service"===a||"geoprocessing package"===a||"locator package"===a||"geoprocessing sample"===a||"workflow manager service"===a?"toolsgray":"layer"===a||"layer package"===a||"explorer layer"===a?"layersgray":"scene package"===a?"scenepackage":"mobile scene package"===a?"mobilescenepackage":"tile package"===a||"compact tile package"===a?"tilepackage":"task file"===a?"taskfile":"report template"===
a?"report-template":"statistical data collection"===a?"statisticaldatacollection":"insights workbook"===a?"workbook":"insights model"===a?"insightsmodel":"insights page"===a?"insightspage":"insights theme"===a?"insightstheme":"hub initiative"===a?"hubinitiative":"hubpage"===a?"hubpage":"hub site application"===a?"hubsite":"relational database connection"===a?"relationaldatabaseconnection":"big data file share"===a?"datastorecollection":"image collection"===a?"imagecollection":"style"===a?"style":
"desktop style"===a?"desktopstyle":"dashboard"===a?"dashboard":"raster function template"===a?"rasterprocessingtemplate":"vector tile package"===a?"vectortilepackage":"ortho mapping project"===a?"orthomappingproject":"ortho mapping template"===a?"orthomappingtemplate":"solution"===a?"solutions":"geopackage"===a?"geopackage":"deep learning package"===a?"deeplearningpackage":"real time analytic"===a?"realtimeanalytics":"big data analytic"===a?"bigdataanalytics":"feed"===a?"feed":"excalibur imagery project"===
a?"excaliburimageryproject":"maps";return a?h.toUrl("../images/portal/"+a+"16.png"):null},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"isLayer",{get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"itemUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/items/"+this.id:
null},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"thumbnailUrl",{get:function(){var a=this.itemUrl,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"userItemUrl",{get:function(){var a=this.get("portal.restUrl");if(!a)return null;var b=this.owner||this.get("portal.user.username");return b?a+"/content/users/"+(this.ownerFolder?b+"/"+this.ownerFolder:b)+"/items/"+this.id:null},
enumerable:!0,configurable:!0});g.prototype.load=function(){var a=this;this.portal||(this.portal=k.getDefault());var b=this.portal.load().then(function(){return a.resourceInfo?a.resourceInfo:a.id&&a.itemUrl?a.portal._request(a.itemUrl):{}}).then(function(b){a.resourceInfo=b;a.read(b)});this.addResolvingPromise(b);return this.when()};g.prototype.addRating=function(a){var b={method:"post",query:{}};a instanceof q&&(a=a.rating);isNaN(a)||"number"!==typeof a||(b.query.rating=a);return this.portal._request(this.itemUrl+
"/addRating",b).then(function(){return new q({rating:a,created:new Date})})};g.prototype.deleteRating=function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(function(){})};g.prototype.fetchData=function(a){void 0===a&&(a="json");return this.portal._request(this.itemUrl+"/data",{responseType:a})};g.prototype.fetchRating=function(){return this.portal._request(this.itemUrl+"/rating").then(function(a){return null!=a.rating?(a.created=new Date(a.created),new q(a)):null})};
g.prototype.fetchRelatedItems=function(a){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:a},"PortalItem")};g.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};g.prototype.update=function(a){var b=this;return this.id?this.load().then(function(){return b.portal._signIn()}).then(function(){var c=a&&a.data,e={method:"post"};e.query=b._getPostQuery();for(var k in e.query)null===e.query[k]&&(e.query[k]="");e.query.clearEmptyFields=
!0;null!=c&&("string"===typeof c?e.query.text=c:"object"===typeof c&&(e.query.text=JSON.stringify(c)));return b.portal._request(b.userItemUrl+"/update",e).then(function(){return b._reload()})}):p.reject(new l("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};g.prototype.updateThumbnail=function(a){var c=this;return this.id?this.load().then(function(){return c.portal._signIn()}).then(function(){var e=a.thumbnail,k={method:"post"};if("string"===typeof e)b.isDataProtocol(e)?
k.query={data:e}:k.query={url:b.makeAbsolute(e)};else{var g=new FormData;g.append("file",e);k.body=g}return c.portal._request(c.userItemUrl+"/updateThumbnail",k).then(function(){return c._reload()})}):p.reject(new l("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};g.prototype.toJSON=function(){var a=this.extent,a={created:this.created&&this.created.getTime(),description:this.description,extent:a&&[[a.xmin,a.ymin],[a.xmax,a.ymax]],id:this.id,modified:this.modified&&
this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return e.fixJson(a)};g.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");return new d({resourceInfo:a})};g.prototype._reload=function(){var a=this;return this.portal._request(this.itemUrl,{query:{_ts:(new Date).getTime()}}).then(function(b){a.resourceInfo=
b;a.read(b);return a})};g.prototype._getPostQuery=function(){var a=this.toJSON(),b;for(b in a)"tags"===b&&null!==a[b]&&(a[b]=a[b].join(", ")),"typeKeywords"===b&&null!==a[b]&&(a[b]=a[b].join(", "));return a};var d;f([a.property()],g.prototype,"access",void 0);f([a.property()],g.prototype,"accessInformation",void 0);f([a.property({json:{read:{source:"appProxies"}}})],g.prototype,"applicationProxies",void 0);f([a.property()],g.prototype,"avgRating",void 0);f([a.property()],g.prototype,"categories",
void 0);f([a.property({type:Date})],g.prototype,"created",void 0);f([a.property()],g.prototype,"culture",void 0);f([a.property()],g.prototype,"description",void 0);f([a.property({dependsOn:["type","typeKeywords"],readOnly:!0})],g.prototype,"displayName",null);f([a.property({type:m})],g.prototype,"extent",void 0);f([a.reader("extent")],g.prototype,"readExtent",null);f([a.property()],g.prototype,"groupCategories",void 0);f([a.property({dependsOn:["type","typeKeywords"],readOnly:!0})],g.prototype,"iconUrl",
null);f([a.property()],g.prototype,"id",void 0);f([a.property({dependsOn:["type"],readOnly:!0})],g.prototype,"isLayer",null);f([a.property()],g.prototype,"itemControl",void 0);f([a.property({dependsOn:["portal.restUrl","id"],readOnly:!0})],g.prototype,"itemUrl",null);f([a.property()],g.prototype,"licenseInfo",void 0);f([a.property({type:Date})],g.prototype,"modified",void 0);f([a.property()],g.prototype,"name",void 0);f([a.property()],g.prototype,"numComments",void 0);f([a.property()],g.prototype,
"numRatings",void 0);f([a.property()],g.prototype,"numViews",void 0);f([a.property()],g.prototype,"owner",void 0);f([a.property()],g.prototype,"ownerFolder",void 0);f([a.property({type:k})],g.prototype,"portal",void 0);f([a.property()],g.prototype,"resourceInfo",void 0);f([a.property()],g.prototype,"screenshots",void 0);f([a.property()],g.prototype,"size",void 0);f([a.property()],g.prototype,"snippet",void 0);f([a.property()],g.prototype,"tags",void 0);f([a.property()],g.prototype,"thumbnail",void 0);
f([a.property({dependsOn:["itemUrl","thumbnail","portal.credential.token"],readOnly:!0})],g.prototype,"thumbnailUrl",null);f([a.property()],g.prototype,"title",void 0);f([a.property()],g.prototype,"type",void 0);f([a.property()],g.prototype,"typeKeywords",void 0);f([a.property()],g.prototype,"url",void 0);f([a.property({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],g.prototype,"userItemUrl",null);return g=d=f([a.subclass("esri.portal.PortalItem")],g)}(a.declared(g,
c))})},"esri/portal/PortalRating":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){return function(e){function c(c){c=e.call(this)||this;c.created=null;c.rating=null;return c}n(c,e);f([g.property()],c.prototype,"created",void 0);f([g.property()],c.prototype,"rating",void 0);return c=f([g.subclass("esri.portal.PortalRating")],c)}(g.declared(l))})},"esri/support/basemapDefinitions":function(){define(["require",
"exports","dojo/i18n!../nls/basemaps"],function(h,d,n){return{streets:{id:"streets",title:n.streets,thumbnailUrl:h.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",title:n.satellite,thumbnailUrl:h.toUrl("../images/basemap/satellite.jpg"),baseMapLayers:[{id:"satellite-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",title:n.hybrid,thumbnailUrl:h.toUrl("../images/basemap/hybrid.jpg"),baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",title:n.terrain,thumbnailUrl:h.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",
showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",title:n.topo,thumbnailUrl:h.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",
title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",title:n.gray,thumbnailUrl:h.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",title:n["dark-gray"],thumbnailUrl:h.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",title:n.oceans,thumbnailUrl:h.toUrl("../images/basemap/oceans.jpg"),baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",
showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",title:n["national-geographic"],thumbnailUrl:h.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",
title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",title:n.osm,thumbnailUrl:h.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",title:n["dark-gray"],thumbnailUrl:h.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",
layerType:"VectorTileLayer",title:"World Dark Gray",visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",title:n.gray,thumbnailUrl:h.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Light Gray",visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",title:n.streets,thumbnailUrl:h.toUrl("../images/basemap/streets.jpg"),
baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",title:n.topo,thumbnailUrl:h.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",
title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",title:n["streets-night-vector"],thumbnailUrl:h.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",
layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",title:n["streets-relief-vector"],thumbnailUrl:h.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",
styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:n["streets-navigation-vector"],thumbnailUrl:h.toUrl("../images/basemap/streets-navigation.jpg"),baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",
layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}}})},"esri/Ground":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Color ./core/asyncUtils ./core/Collection ./core/collectionUtils ./core/Error ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./ground/navigationConstraints ./layers/ElevationLayer ./layers/Layer ./layers/support/ElevationQuery ./layers/support/types ./webdoc/support/opacityUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A,x,C){var y=c.ofType(B),E=v.getLogger("esri.Ground");return function(a){function c(b){var c=a.call(this)||this;c.opacity=1;c.surfaceColor=null;c.navigationConstraint=null;c.layers=new y;c.layers.on("after-add",function(a){a=a.item;a.parent&&a.parent!==c&&"remove"in a.parent&&a.parent.remove(a);a.parent=c;x.isOfType(a,["elevation","base-elevation"])||E.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.")});
c.layers.on("after-remove",function(a){a.item.parent=null});return c}f(c,a);k=c;c.prototype.initialize=function(){this.when().catch(function(a){E.error("#load()","Failed to load ground",a)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};c.prototype.normalizeCtorArgs=function(a){a&&"resourceInfo"in a&&(this._set("resourceInfo",a.resourceInfo),a=n({},a),delete a.resourceInfo);return a};Object.defineProperty(c.prototype,"layers",{set:function(a){this._set("layers",p.referenceSetter(a,
this._get("layers"),y))},enumerable:!0,configurable:!0});c.prototype.writeLayers=function(a,c,e,k){var g=[];a&&(k=n({},k,{layerContainerType:"ground"}),a.forEach(function(a){if(a.write){var c={};a.write(c,k)&&g.push(c)}else k&&k.messages&&k.messages.push(new b("layer:unsupported","Layers ("+a.title+", "+a.id+") of type '"+a.declaredClass+"' cannot be persisted in the ground",{layer:a}))}));c.layers=g};c.prototype.load=function(){this.addResolvingPromise(this._loadFromSource());return this.when()};
c.prototype.loadAll=function(){var a=this;return e.safeCast(q.loadAll(this,function(b){b(a.layers)}))};c.prototype.queryElevation=function(a,b){var c=new A.ElevationQuery,e=this.layers.filter(function(a){return"elevation"===a.type}).toArray();return c.queryAll(e,a,b)};c.prototype.createElevationSampler=function(a,b){var c=new A.ElevationQuery,e=this.layers.filter(function(a){return"elevation"===a.type}).toArray();return c.createSamplerAll(e,a,b)};c.prototype.clone=function(){var a={opacity:this.opacity,
surfaceColor:m.clone(this.surfaceColor),navigationConstraint:m.clone(this.navigationConstraint),layers:this.layers.slice()};this.loaded&&(a.loadStatus="loaded");return(new k({resourceInfo:this.resourceInfo})).set(a)};c.prototype.read=function(a,b){this.resourceInfo||this._set("resourceInfo",{data:a,context:b});return this.inherited(arguments)};c.prototype._loadFromSource=function(){var a=this.resourceInfo;return a?this._loadLayersFromJSON(a.data,a.context):u.resolve(null)};c.prototype._loadLayersFromJSON=
function(a,b){var c=this,e=b&&b.origin||"web-scene",k=b&&b.portal||null,g=b&&b.url||null;return u.create(function(a){return h(["./portal/support/layersCreator"],a)}).then(function(b){var d=[];a.layers&&Array.isArray(a.layers)&&d.push.apply(d,b.populateOperationalLayers(c.layers,a.layers,{context:{origin:e,url:g,portal:k,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));return u.eachAlways(d)}).then(function(){})};var k;l([t.property({type:y,json:{type:[z],read:!1}}),
t.cast(p.castForReferenceSetter)],c.prototype,"layers",null);l([t.writer("layers")],c.prototype,"writeLayers",null);l([t.property({readOnly:!0})],c.prototype,"resourceInfo",void 0);l([t.property({type:Number,json:{type:r.Integer,read:{reader:C.transparencyToOpacity,source:"transparency"},write:{writer:function(a,b){b.transparency=C.opacityToTransparency(a)},target:"transparency"}}})],c.prototype,"opacity",void 0);l([t.property({type:g,json:{type:[r.Integer],write:function(a,b){b.surfaceColor=a.toJSON().slice(0,
3)}}})],c.prototype,"surfaceColor",void 0);l([t.property({types:w.navigationConstraintTypes,json:{read:w.readNavigationConstraint,write:!0}})],c.prototype,"navigationConstraint",void 0);return c=k=l([t.subclass("esri.Ground")],c)}(t.declared(a,k))})},"esri/Color":function(){define(["require","exports","./core/accessorSupport/ensureType"],function(h,d,n){function f(e){return Math.max(0,Math.min(n.ensureInteger(e),255))}function l(e,c,g){e=Number(e);return isNaN(e)?g:e<c?c:e>g?g:e}function g(e,c,g){0>
g&&++g;1<g&&--g;var b=6*g;return 1>b?e+(c-e)*b:1>2*g?c:2>3*g?e+(c-e)*(2/3-g)*6:e}h=function(){function e(c){this.b=this.g=this.r=255;this.a=1;c&&this.setColor(c)}e.blendColors=function(c,g,b,a){void 0===a&&(a=new e);a.r=Math.round(c.r+(g.r-c.r)*b);a.g=Math.round(c.g+(g.g-c.g)*b);a.b=Math.round(c.b+(g.b-c.b)*b);a.a=c.a+(g.a-c.a)*b;return a._sanitize()};e.fromRgb=function(c,d){var b=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(b){c=b[2].split(/\s*,\s*/);b=b[1];if("rgb"===b&&3===c.length||
"rgba"===b&&4===c.length)return b=c[0],"%"===b.charAt(b.length-1)?(b=c.map(function(a){return 2.56*parseFloat(a)}),4===c.length&&(b[3]=parseFloat(c[3])),e.fromArray(b,d)):e.fromArray(c.map(function(a){return parseFloat(a)}),d);if("hsl"===b&&3===c.length||"hsla"===b&&4===c.length){var b=(parseFloat(c[0])%360+360)%360/360,a=parseFloat(c[1])/100,f=parseFloat(c[2])/100,a=.5>=f?f*(a+1):f+a-f*a,f=2*f-a,b=[256*g(f,a,b+1/3),256*g(f,a,b),256*g(f,a,b-1/3),1];4===c.length&&(b[3]=parseFloat(c[3]));return e.fromArray(b,
d)}}return null};e.fromHex=function(c,g){void 0===g&&(g=new e);var b=4===c.length?4:8,a=(1<<b)-1,d=Number("0x"+c.substr(1));if(isNaN(d))return null;["b","g","r"].forEach(function(c){var e=d&a;d>>=b;g[c]=4===b?17*e:e});g.a=1;return g};e.fromArray=function(c,g){void 0===g&&(g=new e);g._set(Number(c[0]),Number(c[1]),Number(c[2]),Number(c[3]));isNaN(g.a)&&(g.a=1);return g._sanitize()};e.fromString=function(c,g){var b=e.named[c];return b&&e.fromArray(b,g)||e.fromRgb(c,g)||e.fromHex(c,g)};e.toJSON=function(c){return c&&
[f(c.r),f(c.g),f(c.b),1<c.a?c.a:f(255*c.a)]};e.fromJSON=function(c){return c&&new e([c[0],c[1],c[2],c[3]/255])};e.toUnitRGB=function(c){return[c.r/255,c.g/255,c.b/255]};e.toUnitRGBA=function(c){return[c.r/255,c.g/255,c.b/255,null!=c.a?c.a:1]};e.prototype.setColor=function(c){"string"===typeof c?e.fromString(c,this):Array.isArray(c)?e.fromArray(c,this):(this._set(c.r,c.g,c.b,c.a),c instanceof e||this._sanitize());return this};e.prototype.toRgb=function(){return[this.r,this.g,this.b]};e.prototype.toRgba=
function(){return[this.r,this.g,this.b,this.a]};e.prototype.toHex=function(){var c=this.r.toString(16),e=this.g.toString(16),b=this.b.toString(16);return"#"+(2>c.length?"0"+c:c)+(2>e.length?"0"+e:e)+(2>b.length?"0"+b:b)};e.prototype.toCss=function(c){void 0===c&&(c=!1);var e=this.r+", "+this.g+", "+this.b;return c?"rgba("+e+", "+this.a+")":"rgb("+e+")"};e.prototype.toString=function(){return this.toCss(!0)};e.prototype.toJSON=function(){return[f(this.r),f(this.g),f(this.b),1<this.a?this.a:f(255*this.a)]};
e.prototype.clone=function(){return new e(this.toRgba())};e.prototype._sanitize=function(){this.r=Math.round(l(this.r,0,255));this.g=Math.round(l(this.g,0,255));this.b=Math.round(l(this.b,0,255));this.a=l(this.a,0,1);return this};e.prototype._set=function(c,e,b,a){this.r=c;this.g=e;this.b=b;this.a=a};e.named={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,
255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,
255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],
dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,
216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,
85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,
112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],
tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]};return e}();h.prototype.declaredClass="esri.Color";return h})},"esri/ground/navigationConstraints":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/Warning ../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e){Object.defineProperty(d,
"__esModule",{value:!0});h=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}n(a,b);f([e.enumeration.serializable()({none:"none",stayAbove:"stay-above"}),e.property({readOnly:!0,json:{read:!1}})],a.prototype,"type",void 0);return a=f([e.subclass("esri.ground.NavigationConstraint")],a)}(e.declared(l));d.NavigationConstraint=h;l=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.type="none";return a}n(a,b);c=a;a.prototype.clone=function(){return new c};var c;
f([e.property({type:["none"],json:{type:["none"]}})],a.prototype,"type",void 0);return a=c=f([e.subclass("esri.ground.NoneNavigationConstraint")],a)}(e.declared(h));d.NoneNavigationConstraint=l;var c=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.type="stay-above";return a}n(a,b);c=a;a.prototype.clone=function(){return new c};var c;f([e.property({type:["stay-above"],json:{type:["stayAbove"]}})],a.prototype,"type",void 0);return a=c=f([e.subclass("esri.ground.StayAboveNavigationConstraint")],
a)}(e.declared(h));d.StayAboveNavigationConstraint=c;d.readNavigationConstraint=function(b,a,c){if(a=b&&p[b.type])return a=new a,a.read(b,c),a;c&&c.messages&&b&&c.messages.push(new g("navigationconstraint:unsupported","Navigation constraint of type '"+(b.type||"unknown")+"' is not supported",{definition:b,context:c}))};var p={none:l,stayAbove:c};d.navigationConstraintTypes={key:"type",base:h,typeMap:{none:l,"stay-above":c}}})},"esri/layers/ElevationLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/io-query dojo/_base/kernel ../request ../core/Error ../core/promiseUtils ../core/accessorSupport/decorators ../geometry/HeightModelInfo ./Layer ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/commonProperties ./support/ElevationQuery ./support/rasterFormats/LercCodec".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w){return function(k){function d(a){a=k.call(this)||this;a.copyright=null;a.heightModelInfo=null;a.opacity=1;a.operationalLayerType="ArcGISTiledElevationServiceLayer";a.type="elevation";a.url=null;return a}f(d,k);d.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};Object.defineProperty(d.prototype,"minScale",{get:function(){},set:function(a){this.constructed&&e.deprecated(this.declaredClass+".minScale support has been removed.",
"","4.5")},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"maxScale",{get:function(){},set:function(a){this.constructed&&e.deprecated(this.declaredClass+".maxScale support has been removed.","","4.5")},enumerable:!0,configurable:!0});d.prototype.load=function(){var a=this;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(a){for(var b=0;b<a.typeKeywords.length;b++)if("elevation 3d layer"===a.typeKeywords[b].toLowerCase())return!0;
throw new p("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"});}}).then(function(){return a._fetchImageService()},function(){return a._fetchImageService()}));return this.when()};d.prototype.fetchTile=function(a,b,e,k){var g=this;void 0===k&&(k=0);return this.load().then(function(){return g._fetchTileAvailability(a,b,e)}).then(function(){return c(g.getTileUrl(a,b,e),{responseType:"array-buffer"})}).then(function(a){a=
w.decode(a.data,{noDataValue:k,returnFileInfo:!0});return{values:a.pixelData,width:a.width,height:a.height,maxZError:a.fileInfo.maxZError,noDataValue:a.noDataValue}})};d.prototype.getTileUrl=function(a,b,c){var e=g.objectToQuery(n({},this.parsedUrl.query,{blankTile:!this.tilemapCache&&this.supportsBlankTile?!1:null}));return this.parsedUrl.path+"/tile/"+a+"/"+b+"/"+c+(e?"?"+e:"")};d.prototype.queryElevation=function(a,b){return(new r.ElevationQuery).query(this,a,b)};d.prototype.createElevationSampler=
function(a,b){return(new r.ElevationQuery).createSampler(this,a,b)};d.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return b.reject(new p("elevation-layer:view-not-supported","ElevationLayer is only supported in 3D"));case "3d":return b.create(function(a){return h(["../views/3d/layers/ElevationLayerView3D"],a)})}};d.prototype._fetchTileAvailability=function(a,c,e){return this.tilemapCache?this.tilemapCache.fetchAvailability(a,c,e):b.resolve("unknown")};d.prototype._fetchImageService=
function(){var a=this;return b.resolve().then(function(){if(a.resourceInfo)return a.resourceInfo;var b={query:n({f:"json"},a.parsedUrl.query),responseType:"json"};return c(a.parsedUrl.path,b)}).then(function(b){b.ssl&&(a.url=a.url.replace(/^http:/i,"https:"));a.read(b.data,{origin:"service",url:a.parsedUrl})})};l([a.property({json:{read:{source:"copyrightText"}}})],d.prototype,"copyright",void 0);l([a.property({readOnly:!0,type:m})],d.prototype,"heightModelInfo",void 0);l([a.property({json:{read:!1,
write:!1}})],d.prototype,"minScale",null);l([a.property({json:{read:!1,write:!1}})],d.prototype,"maxScale",null);l([a.property({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],d.prototype,"opacity",void 0);l([a.property({type:["ArcGISTiledElevationServiceLayer"]})],d.prototype,"operationalLayerType",void 0);l([a.property()],d.prototype,"resourceInfo",void 0);l([a.property({json:{read:!1},value:"elevation",readOnly:!0})],d.prototype,"type",void 0);l([a.property(t.url)],d.prototype,
"url",void 0);return d=l([a.subclass("esri.layers.ElevationLayer")],d)}(a.declared(k,q,v,u))})},"esri/geometry/HeightModelInfo":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/arrayUtils ../core/JSONSupport ../core/kebabDictionary ../core/Warning ../core/accessorSupport/decorators ./support/scaleUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b,a){function m(a,b){return new p("height-unit:unsupported","Height unit of value '"+
a+"' is not supported",b)}function k(a,b){return new p("height-model:unsupported","Height model of value '"+a+"' is not supported",b)}var q=c.strict()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),v=q.jsonValues.slice();g.removeUnordered(v,"orthometric");var u=c.strict()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards",
"sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});return function(c){function e(a){a=c.call(this)||this;a.heightModel="gravity-related-height";a.heightUnit="meters";a.vertCRS=null;return a}f(e,c);g=e;e.prototype.writeHeightModel=
function(a,b,c){return q.write(a,b,c)};e.prototype.readHeightModel=function(a,b,c){if(b=q.read(a))return b;c&&c.messages&&c.messages.push(k(a,{context:c}));return null};e.prototype.readHeightUnit=function(a,b,c){if(b=u.read(a))return b;c&&c.messages&&c.messages.push(m(a,{context:c}));return null};e.prototype.readHeightUnitService=function(b,c,e){if(c=a.unitFromRESTJSON(b)||u.read(b))return c;e&&e.messages&&e.messages.push(m(b,{context:e}));return null};e.prototype.readVertCRS=function(a,b){return b.vertCRS||
b.ellipsoid||b.geoid};e.prototype.clone=function(){return new g({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})};e.prototype.equals=function(a){return a?this===a?!0:this.heightModel===a.heightModel&&this.heightUnit===a.heightUnit&&this.vertCRS===a.vertCRS:!1};e.deriveUnitFromSR=function(b,c){c=a.getVerticalUnitStringForSR(c);return new g({heightModel:b.heightModel,heightUnit:c,vertCRS:b.vertCRS})};e.prototype.write=function(a,b){b=n({origin:"web-scene"},b);return this.inherited(arguments,
[a,b])};e.fromJSON=function(a){if(!a)return null;var b=new g;b.read(a,{origin:"web-scene"});return b};var g;l([b.property({type:q.apiValues,constructOnly:!0,json:{type:v}})],e.prototype,"heightModel",void 0);l([b.writer("web-scene","heightModel")],e.prototype,"writeHeightModel",null);l([b.reader(["web-scene","service"],"heightModel")],e.prototype,"readHeightModel",null);l([b.property({type:u.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:u.jsonValues,write:u.write}}}})],e.prototype,"heightUnit",
void 0);l([b.reader("web-scene","heightUnit")],e.prototype,"readHeightUnit",null);l([b.reader("service","heightUnit")],e.prototype,"readHeightUnitService",null);l([b.property({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],e.prototype,"vertCRS",void 0);l([b.reader("service","vertCRS",["vertCRS","ellipsoid","geoid"])],e.prototype,"readVertCRS",null);return e=g=l([b.subclass("esri.geometry.HeightModelInfo")],e)}(b.declared(e))})},"esri/geometry/support/scaleUtils":function(){define("require exports ../../config ../../core/compilerUtils ../../core/kebabDictionary ../../core/wgs84Constants ./WKIDUnitConversion".split(" "),
function(h,d,n,f,l,g,e){function c(a){return v.fromJSON(a.toLowerCase())||null}function p(a){return b(a)||d.decDegToMeters}function b(a){var b,c,e;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?e=q.values[q[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=k.exec(c))&&a[1]&&(e=parseFloat(a[1].split(",")[1]));return e}function a(a){var b,e,g;a&&("object"===typeof a?(b=a.wkid,e=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(e=a));b?g=q.units[q[b]]:e&&-1!==
e.search(/^PROJCS/i)&&(a=k.exec(e))&&a[1]&&(g=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&a[1]);return g?c(g):null}function m(a,b){b=p(b);return a/(b*d.inchesPerMeter*n.screenDPI)}Object.defineProperty(d,"__esModule",{value:!0});d.inchesPerMeter=39.37;d.decDegToMeters=g.wgs84Radius*Math.PI/180;var k=/UNIT\[([^\]]+)\]\]$/i,q=e,v=l.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",
chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d.unitFromRESTJSON=c;d.unitToRESTJSON=function(a){return v.toJSON(a)||null};d.getMetersPerVerticalUnitForSR=function(a){a=p(a);return 1E5<a?1:a};d.getVerticalUnitStringForSR=function(b){return 1E5<p(b)?"meters":
a(b)};d.getMetersPerUnitForSR=p;d.getMetersPerUnit=b;d.getUnitString=a;d.getDefaultUnitSystem=function(b){if(!b)return null;b=a(b);switch(b){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric";
case null:case void 0:break;default:f.neverReached(b)}return null};d.getScale=function(a,c){c=c||a.extent;a=a.width;var e=b(c&&c.spatialReference);return c&&a?c.width/a*(e||d.decDegToMeters)*d.inchesPerMeter*n.screenDPI:0};d.getResolutionForScale=m;d.getExtentForScale=function(a,b){var c=a.extent;a=a.width;b=m(b,c.spatialReference);return c.clone().expand(b*a/c.width)}})},"esri/core/compilerUtils":function(){define(["require","exports","./has"],function(h,d,n){Object.defineProperty(d,"__esModule",
{value:!0});d.neverReached=function(d){};d.isSome=function(d){return null!=d};d.isNone=function(d){return null==d}})},"esri/layers/mixins/ArcGISCachedService":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/accessorSupport/decorators ./ArcGISService ../support/TileInfo ../support/TilemapCache".split(" "),function(h,d,n,f,l,g,e,c,p,b){return function(a){function c(){var b=null!==
a&&a.apply(this,arguments)||this;b.copyright=null;b.minScale=0;b.maxScale=0;b.spatialReference=null;b.tileInfo=null;b.tilemapCache=null;return b}f(c,a);Object.defineProperty(c.prototype,"supportsBlankTile",{get:function(){return 10.2<=this.version},enumerable:!0,configurable:!0});c.prototype.readTileInfo=function(a,b){var c=b.minScale?Math.round(1E4*b.minScale)/1E4:Infinity,e=b.maxScale?Math.round(1E4*b.maxScale)/1E4:-Infinity;return a?(a.lods=a.lods.filter(function(a){a=Math.round(1E4*a.scale)/1E4;
return a<=c&&a>=e}),p.fromJSON(a)):null};c.prototype.readTilemapCache=function(a,c){return c.capabilities&&-1<c.capabilities.indexOf("Tilemap")?new b({layer:this}):null};l([e.property({json:{read:{source:"copyrightText"}}})],c.prototype,"copyright",void 0);l([e.property({json:{origins:{service:{read:!1}}}})],c.prototype,"minScale",void 0);l([e.property({json:{origins:{service:{read:!1}}}})],c.prototype,"maxScale",void 0);l([e.property({type:g.SpatialReference})],c.prototype,"spatialReference",void 0);
l([e.property({readOnly:!0,dependsOn:["version"]})],c.prototype,"supportsBlankTile",null);l([e.property({type:p})],c.prototype,"tileInfo",void 0);l([e.reader("service","tileInfo",["tileInfo","minScale","maxScale"])],c.prototype,"readTileInfo",null);l([e.property()],c.prototype,"tilemapCache",void 0);l([e.reader("service","tilemapCache",["capabilities"])],c.prototype,"readTilemapCache",null);l([e.property()],c.prototype,"version",void 0);return c=l([e.subclass("esri.layers.mixins.ArcGISCachedService")],
c)}(e.declared(c))})},"esri/geometry":function(){define("require exports ./core/kebabDictionary ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k){Object.defineProperty(d,"__esModule",{value:!0});d.Extent=f;d.BaseGeometry=l;d.Mesh=g;d.Multipoint=e;d.Point=c;d.Polygon=p;d.Polyline=b;d.ScreenPoint=
a;d.SpatialReference=m;d.isGeometry=function(a){return a instanceof d.BaseGeometry};d.fromJSON=k.fromJSON;d.typeKebabDictionary=n.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});d.featureGeometryTypeKebabDictionary=n.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"})})},"esri/geometry/Mesh":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/lang ../core/Logger ../core/accessorSupport/decorators ../core/libs/gl-matrix-2/gl-matrix ./Extent ./Geometry ./support/MeshComponent ./support/MeshVertexAttributes ./support/triangulationUtils ./support/meshUtils/centerAt ./support/meshUtils/offset ./support/meshUtils/primitives ./support/meshUtils/rotate".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r){var w=e.getLogger("esri.geometry.Mesh");h=function(a){function e(b){b=a.call(this)||this;b.components=null;b.hasZ=!0;b.hasM=!1;b.vertexAttributes=new k.MeshVertexAttributes;b.type="mesh";return b}n(e,a);d=e;Object.defineProperty(e.prototype,"extent",{get:function(){var a=this.spatialReference,c=this.vertexAttributes&&this.vertexAttributes.position;if(!c||0===c.length||this.components&&0===this.components.length)return new b({xmin:0,ymin:0,zmin:0,xmax:0,
ymax:0,zmax:0,spatialReference:a});a={xmin:Infinity,xmax:-Infinity,ymin:Infinity,ymax:-Infinity,zmin:Infinity,zmax:-Infinity,spatialReference:a};if(!this.components)return new b(this.extendExtent(a,c,null));for(var e=0,k=this.components;e<k.length;e++){var g=k[e];if(g.faces)this.extendExtent(a,c,g.faces);else{this.extendExtent(a,c,null);break}}return new b(a)},enumerable:!0,configurable:!0});e.prototype.addComponent=function(a){this.components||(this.components=[]);this.components.push(a);this.clearCache()};
e.prototype.removeComponent=function(a){if(this.components&&(a=this.components.indexOf(a),-1!==a)){this.components=this.components.splice(a,1);return}w.error("removeComponent()","Provided component is not part of the list of components")};e.prototype.rotate=function(a,b,c,e){r.axisAngleFrom(z.x,a/180*Math.PI,A);r.axisAngleFrom(z.y,b/180*Math.PI,x);r.axisAngleFrom(z.z,c/180*Math.PI,C);r.axisAngleMultiply(A,x,A);r.axisAngleMultiply(A,C,A);r.rotate(this,A,e);return this};e.prototype.offset=function(a,
b,c,e){B[0]=a;B[1]=b;B[2]=c;u.offset(this,B,e);return this};e.prototype.centerAt=function(a,b){v.centerAt(this,a,b);return this};e.prototype.clone=function(){return new d({components:g.clone(this.components),spatialReference:this.spatialReference,vertexAttributes:g.clone(this.vertexAttributes)})};e.prototype.vertexAttributesChanged=function(){this.clearCache()};e.prototype.toJSON=function(a){return this.write(null,a)};e.prototype.forEachVertex=function(a,b,c){if(b)for(k=0;k<b.length;k++){var e=3*
b[k];c(a[e+0],a[e+1],a[e+2])}else for(var k=0;k<a.length;k+=3)c(a[k+0],a[k+1],a[k+2])};e.prototype.extendExtent=function(a,b,c){this.forEachVertex(b,c,function(b,c,e){a.xmin=Math.min(a.xmin,b);a.xmax=Math.max(a.xmax,b);a.ymin=Math.min(a.ymin,c);a.ymax=Math.max(a.ymax,c);a.zmin=Math.min(a.zmin,e);a.zmax=Math.max(a.zmax,e)});return a};e.createBox=function(a,b){a=new d(t.convertUnitGeometry(t.createUnitSizeBox(),a,b));if(b&&b.imageFace&&"all"!==b.imageFace){var c=a.components[0],e=c.faces,k=t.boxFaceOrder[b.imageFace],
g=6*k;b=new Uint32Array(6);for(var f=new Uint32Array(e.length-6),q=0,h=0,p=0;p<e.length;p++)p>=g&&p<g+6?b[q++]=e[p]:f[h++]=e[p];e=new Float32Array(a.vertexAttributes.uv);k*=8;g=[0,1,1,1,1,0,0,0];for(p=0;p<g.length;p++)e[k+p]=g[p];a.vertexAttributes.uv=e;a.components=[new m({faces:b,material:c.material}),new m({faces:f})]}return a};e.createSphere=function(a,b){return new d(t.convertUnitGeometry(t.createUnitSizeSphere(b&&b.densificationFactor||0),a,b))};e.createCylinder=function(a,b){return new d(t.convertUnitGeometry(t.createUnitSizeCylinder(b&&
b.densificationFactor||0),a,b))};e.createPlane=function(a,b){return new d(t.convertUnitGeometry(t.createUnitSizePlane(b&&b.facing||"up"),a,b))};e.createFromPolygon=function(a,b){var c=q.triangulate(a);return new d({vertexAttributes:{position:c.position},components:[{faces:c.faces,shading:"flat",material:b&&b.material||null}],spatialReference:a.spatialReference})};var d;f([c.property({dependsOn:["vertexAttributes","vertexAttributes.position","components"],json:{read:!1}})],e.prototype,"cache",void 0);
f([c.property({type:[m]})],e.prototype,"components",void 0);f([c.property({dependsOn:["cache"],readOnly:!0,json:{read:!1}})],e.prototype,"extent",null);f([c.property({readOnly:!0,json:{read:!1,write:!1}})],e.prototype,"hasZ",void 0);f([c.property({readOnly:!0,json:{read:!1,write:!1}})],e.prototype,"hasM",void 0);f([c.property({type:k.MeshVertexAttributes,nonNullable:!0,json:{write:!0}})],e.prototype,"vertexAttributes",void 0);f([l(0,c.cast(m))],e.prototype,"addComponent",null);return e=d=f([c.subclass("esri.geometry.Mesh")],
e)}(c.declared(a));h.prototype.toJSON.isDefaultToJSON=!0;var z={x:p.vec3f64.fromValues(1,0,0),y:p.vec3f64.fromValues(0,1,0),z:p.vec3f64.fromValues(0,0,1)},B=p.vec3f64.create(),A=p.vec4f64.create(),x=p.vec4f64.create(),C=p.vec4f64.create();return h})},"esri/core/libs/gl-matrix-2/gl-matrix":function(){define("require exports ./factories/mat2df32 ./factories/mat2df64 ./factories/mat2f32 ./factories/mat2f64 ./factories/mat3f32 ./factories/mat3f64 ./factories/mat4f32 ./factories/mat4f64 ./factories/quat2f32 ./factories/quat2f64 ./factories/quatf32 ./factories/quatf64 ./factories/vec2f32 ./factories/vec2f64 ./factories/vec3f32 ./factories/vec3f64 ./factories/vec4f32 ./factories/vec4f64 ./math/common ./math/mat2 ./math/mat2d ./math/mat3 ./math/mat4 ./math/quat ./math/quat2 ./math/vec2 ./math/vec3 ./math/vec4".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A,x,C,y,E,D,F,L,P){Object.defineProperty(d,"__esModule",{value:!0});d.mat2df32=n;d.mat2df64=f;d.mat2f32=l;d.mat2f64=g;d.mat3f32=e;d.mat3f64=c;d.mat4f32=p;d.mat4f64=b;d.quat2f32=a;d.quat2f64=m;d.quatf32=k;d.quatf64=q;d.vec2f32=v;d.vec2f64=u;d.vec3f32=t;d.vec3f64=r;d.vec4f32=w;d.vec4f64=z;d.common=B;d.mat2=A;d.mat2d=x;d.mat3=C;d.mat4=y;d.quat=E;d.quat2=D;d.vec2=F;d.vec3=L;d.vec4=P})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require",
"exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(6);d[0]=1;d[3]=1;return d};d.clone=function(d){var f=new Float32Array(6);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];f[4]=d[4];f[5]=d[5];return f};d.fromValues=function(d,f,h,g,e,c){var p=new Float32Array(6);p[0]=d;p[1]=f;p[2]=h;p[3]=g;p[4]=e;p[5]=c;return p};d.createView=function(d,f){return new Float32Array(d,f,6)}})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require",
"exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,1,0,0]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5]]};d.fromValues=function(d,f,h,g,e,c){return[d,f,h,g,e,c]};d.createView=function(d,f){return new Float64Array(d,f,6)}})},"esri/core/libs/gl-matrix-2/factories/mat2f32":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(4);d[0]=1;d[3]=1;
return d};d.clone=function(d){var f=new Float32Array(4);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];return f};d.fromValues=function(d,f,h,g){var e=new Float32Array(4);e[0]=d;e[1]=f;e[2]=h;e[3]=g;return e};d.createView=function(d,f){return new Float32Array(d,f,4)}})},"esri/core/libs/gl-matrix-2/factories/mat2f64":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,1]};d.clone=function(d){return[d[0],d[1],d[2],d[3]]};d.fromValues=
function(d,f,h,g){return[d,f,h,g]};d.createView=function(d,f){return new Float64Array(d,f,4)}})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(9);d[0]=1;d[4]=1;d[8]=1;return d};d.clone=function(d){var f=new Float32Array(9);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];f[4]=d[4];f[5]=d[5];f[6]=d[6];f[7]=d[7];f[8]=d[8];return f};d.fromValues=function(d,f,h,g,e,
c,p,b,a){var m=new Float32Array(9);m[0]=d;m[1]=f;m[2]=h;m[3]=g;m[4]=e;m[5]=c;m[6]=p;m[7]=b;m[8]=a;return m};d.createView=function(d,f){return new Float32Array(d,f,9)}})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,0,1,0,0,0,1]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8]]};d.fromValues=function(d,f,h,g,e,c,p,b,a){return[d,f,h,g,e,c,
p,b,a]};d.createView=function(d,f){return new Float64Array(d,f,9)}})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(16);d[0]=1;d[5]=1;d[10]=1;d[15]=1;return d};d.clone=function(d){var f=new Float32Array(16);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];f[4]=d[4];f[5]=d[5];f[6]=d[6];f[7]=d[7];f[8]=d[8];f[9]=d[9];f[10]=d[10];f[11]=d[11];f[12]=d[12];f[13]=d[13];
f[14]=d[14];f[15]=d[15];return f};d.fromValues=function(d,f,h,g,e,c,p,b,a,m,k,q,v,u,t,r){var l=new Float32Array(16);l[0]=d;l[1]=f;l[2]=h;l[3]=g;l[4]=e;l[5]=c;l[6]=p;l[7]=b;l[8]=a;l[9]=m;l[10]=k;l[11]=q;l[12]=v;l[13]=u;l[14]=t;l[15]=r;return l};d.createView=function(d,f){return new Float32Array(d,f,16)}})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,0,0,1,0,0,0,
0,1,0,0,0,0,1]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]]};d.fromValues=function(d,f,h,g,e,c,p,b,a,m,k,q,v,u,t,r){return[d,f,h,g,e,c,p,b,a,m,k,q,v,u,t,r]};d.createView=function(d,f){return new Float64Array(d,f,16)}})},"esri/core/libs/gl-matrix-2/factories/quat2f32":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(8);d[3]=1;return d};
d.clone=function(d){var f=new Float32Array(8);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];f[4]=d[4];f[5]=d[5];f[6]=d[6];f[7]=d[7];return f};d.fromValues=function(d,f,h,g,e,c,p,b){var a=new Float32Array(8);a[0]=d;a[1]=f;a[2]=h;a[3]=g;a[4]=e;a[5]=c;a[6]=p;a[7]=b;return a};d.fromRotationTranslationValues=function(d,f,h,g,e,c,p){var b=new Float32Array(8);b[0]=d;b[1]=f;b[2]=h;b[3]=g;e*=.5;c*=.5;p*=.5;b[4]=e*g+c*h-p*f;b[5]=c*g+p*d-e*h;b[6]=p*g+e*f-c*d;b[7]=-e*d-c*f-p*h;return b};d.createView=function(d,f){return new Float32Array(d,
f,8)}})},"esri/core/libs/gl-matrix-2/factories/quat2f64":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[0,0,0,1,0,0,0,0]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7]]};d.fromValues=function(d,f,h,g,e,c,p,b){return[d,f,h,g,e,c,p,b]};d.fromRotationTranslationValues=function(d,f,h,g,e,c,p){e*=.5;c*=.5;p*=.5;return[d,f,h,g,e*g+c*h-p*f,c*g+p*d-e*h,p*g+e*f-c*d,-e*d-c*f-p*h]};d.createView=function(d,
f){return new Float64Array(d,f,8)}})},"esri/core/libs/gl-matrix-2/factories/quatf32":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(4);d[3]=1;return d};d.clone=function(d){var f=new Float32Array(4);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];return f};d.fromValues=function(d,f,h,g){var e=new Float32Array(4);e[0]=d;e[1]=f;e[2]=h;e[3]=g;return e};d.createView=function(d,f){return new Float32Array(d,f,4)}})},
"esri/core/libs/gl-matrix-2/factories/quatf64":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[0,0,0,1]};d.clone=function(d){return[d[0],d[1],d[2],d[3]]};d.fromValues=function(d,f,h,g){return[d,f,h,g]};d.createView=function(d,f){return new Float64Array(d,f,4)}})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=
function(){return new Float32Array(2)};d.clone=function(d){var f=new Float32Array(2);f[0]=d[0];f[1]=d[1];return f};d.fromValues=function(d,f){var h=new Float32Array(2);h[0]=d;h[1]=f;return h};d.createView=function(d,f){return new Float32Array(d,f,2)}})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[0,0]};d.clone=function(d){return[d[0],d[1]]};d.fromValues=function(d,f){return[d,
f]};d.fromArray=function(d){for(var f=[0,0],h=Math.min(2,d.length),g=0;g<h;++g)f[g]=d[g];return f};d.createView=function(d,f){return new Float64Array(d,f,2)}})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return new Float32Array(3)};d.clone=function(d){var f=new Float32Array(3);f[0]=d[0];f[1]=d[1];f[2]=d[2];return f};d.fromValues=function(d,f,h){var g=new Float32Array(3);g[0]=
d;g[1]=f;g[2]=h;return g};d.createView=function(d,f){return new Float32Array(d,f,3)}})},"esri/core/libs/gl-matrix-2/factories/vec3f64":function(){define(["require","exports"],function(h,d){function n(){return[0,0,0]}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(d){return[d[0],d[1],d[2]]};d.fromValues=function(d,h,g){return[d,h,g]};d.fromArray=function(d){for(var f=n(),g=Math.min(3,d.length),e=0;e<g;++e)f[e]=d[e];return f};d.createView=function(d,h){return new Float64Array(d,
h,3)}})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return new Float32Array(4)};d.clone=function(d){var f=new Float32Array(4);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];return f};d.fromValues=function(d,f,h,g){var e=new Float32Array(4);e[0]=d;e[1]=f;e[2]=h;e[3]=g;return e};d.createView=function(d,f){return new Float32Array(d,f,4)}})},"esri/core/libs/gl-matrix-2/factories/vec4f64":function(){define(["require",
"exports"],function(h,d){function n(){return[0,0,0,0]}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(d){return[d[0],d[1],d[2],d[3]]};d.fromValues=function(d,h,g,e){return[d,h,g,e]};d.fromArray=function(d){for(var f=n(),g=Math.min(4,d.length),e=0;e<g;++e)f[e]=d[e];return f};d.createView=function(d,h){return new Float64Array(d,h,4)}})},"esri/core/libs/gl-matrix-2/math/common":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});
d.EPSILON=1E-6;d.RANDOM=Math.random;var n=Math.PI/180,f=180/Math.PI;d.toRadian=function(d){return d*n};d.toDegree=function(d){return d*f};d.equals=function(f,g){return Math.abs(f-g)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))}})},"esri/core/libs/gl-matrix-2/math/mat2":function(){define(["require","exports","./common"],function(h,d,n){function f(d,e,c){var g=e[0],b=e[1],a=e[2];e=e[3];var f=c[0],k=c[1],q=c[2];c=c[3];d[0]=g*f+a*k;d[1]=b*f+e*k;d[2]=g*q+a*c;d[3]=b*q+e*c;return d}function l(d,e,c){d[0]=
e[0]-c[0];d[1]=e[1]-c[1];d[2]=e[2]-c[2];d[3]=e[3]-c[3];return d}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(d,e){d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[3];return d};d.identity=function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=1;return d};d.set=function(d,e,c,f,b){d[0]=e;d[1]=c;d[2]=f;d[3]=b;return d};d.transpose=function(d,e){if(d===e){var c=e[1];d[1]=e[2];d[2]=c}else d[0]=e[0],d[1]=e[2],d[2]=e[1],d[3]=e[3];return d};d.invert=function(d,e){var c=e[0],g=e[1],b=e[2];e=e[3];var a=c*e-b*g;if(!a)return null;
a=1/a;d[0]=e*a;d[1]=-g*a;d[2]=-b*a;d[3]=c*a;return d};d.adjoint=function(d,e){var c=e[0];d[0]=e[3];d[1]=-e[1];d[2]=-e[2];d[3]=c;return d};d.determinant=function(d){return d[0]*d[3]-d[2]*d[1]};d.multiply=f;d.rotate=function(d,e,c){var g=e[0],b=e[1],a=e[2];e=e[3];var f=Math.sin(c);c=Math.cos(c);d[0]=g*c+a*f;d[1]=b*c+e*f;d[2]=g*-f+a*c;d[3]=b*-f+e*c;return d};d.scale=function(d,e,c){var g=e[1],b=e[2],a=e[3],f=c[0];c=c[1];d[0]=e[0]*f;d[1]=g*f;d[2]=b*c;d[3]=a*c;return d};d.fromRotation=function(d,e){var c=
Math.sin(e);e=Math.cos(e);d[0]=e;d[1]=c;d[2]=-c;d[3]=e;return d};d.fromScaling=function(d,e){d[0]=e[0];d[1]=0;d[2]=0;d[3]=e[1];return d};d.str=function(d){return"mat2("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"};d.frob=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2))};d.LDU=function(d,e,c,f){d[2]=f[2]/f[0];c[0]=f[0];c[1]=f[1];c[3]=f[3]-d[2]*c[1];return[d,e,c]};d.add=function(d,e,c){d[0]=e[0]+c[0];d[1]=e[1]+c[1];d[2]=e[2]+c[2];d[3]=e[3]+c[3];return d};
d.subtract=l;d.exactEquals=function(d,e){return d[0]===e[0]&&d[1]===e[1]&&d[2]===e[2]&&d[3]===e[3]};d.equals=function(d,e){var c=d[0],g=d[1],b=d[2];d=d[3];var a=e[0],f=e[1],k=e[2];e=e[3];return Math.abs(c-a)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(a))&&Math.abs(g-f)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(f))&&Math.abs(b-k)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(k))&&Math.abs(d-e)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(e))};d.multiplyScalar=function(d,e,c){d[0]=e[0]*c;d[1]=e[1]*c;d[2]=
e[2]*c;d[3]=e[3]*c;return d};d.multiplyScalarAndAdd=function(d,e,c,f){d[0]=e[0]+c[0]*f;d[1]=e[1]+c[1]*f;d[2]=e[2]+c[2]*f;d[3]=e[3]+c[3]*f;return d};d.mul=f;d.sub=l})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(h,d,n){function f(d,e,c){var g=e[0],b=e[1],a=e[2],f=e[3],k=e[4];e=e[5];var q=c[0],h=c[1],l=c[2],t=c[3],r=c[4];c=c[5];d[0]=g*q+a*h;d[1]=b*q+f*h;d[2]=g*l+a*t;d[3]=b*l+f*t;d[4]=g*r+a*c+k;d[5]=b*r+f*c+e;return d}function l(d,e,c){d[0]=e[0]-
c[0];d[1]=e[1]-c[1];d[2]=e[2]-c[2];d[3]=e[3]-c[3];d[4]=e[4]-c[4];d[5]=e[5]-c[5];return d}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(d,e){d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[3];d[4]=e[4];d[5]=e[5];return d};d.identity=function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=1;d[4]=0;d[5]=0;return d};d.set=function(d,e,c,f,b,a,m){d[0]=e;d[1]=c;d[2]=f;d[3]=b;d[4]=a;d[5]=m;return d};d.invert=function(d,e){var c=e[0],g=e[1],b=e[2],a=e[3],f=e[4];e=e[5];var k=c*a-g*b;if(!k)return null;k=1/k;d[0]=a*k;
d[1]=-g*k;d[2]=-b*k;d[3]=c*k;d[4]=(b*e-a*f)*k;d[5]=(g*f-c*e)*k;return d};d.determinant=function(d){return d[0]*d[3]-d[1]*d[2]};d.multiply=f;d.rotate=function(d,e,c){var g=e[0],b=e[1],a=e[2],f=e[3],k=e[4];e=e[5];var q=Math.sin(c);c=Math.cos(c);d[0]=g*c+a*q;d[1]=b*c+f*q;d[2]=g*-q+a*c;d[3]=b*-q+f*c;d[4]=k;d[5]=e;return d};d.scale=function(d,e,c){var g=e[1],b=e[2],a=e[3],f=e[4],k=e[5],q=c[0];c=c[1];d[0]=e[0]*q;d[1]=g*q;d[2]=b*c;d[3]=a*c;d[4]=f;d[5]=k;return d};d.translate=function(d,e,c){var g=e[0],b=
e[1],a=e[2],f=e[3],k=e[4];e=e[5];var q=c[0];c=c[1];d[0]=g;d[1]=b;d[2]=a;d[3]=f;d[4]=g*q+a*c+k;d[5]=b*q+f*c+e;return d};d.fromRotation=function(d,e){var c=Math.sin(e);e=Math.cos(e);d[0]=e;d[1]=c;d[2]=-c;d[3]=e;d[4]=0;d[5]=0;return d};d.fromScaling=function(d,e){d[0]=e[0];d[1]=0;d[2]=0;d[3]=e[1];d[4]=0;d[5]=0;return d};d.fromTranslation=function(d,e){d[0]=1;d[1]=0;d[2]=0;d[3]=1;d[4]=e[0];d[5]=e[1];return d};d.str=function(d){return"mat2d("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")"};
d.frob=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2)+Math.pow(d[4],2)+Math.pow(d[5],2)+1)};d.add=function(d,e,c){d[0]=e[0]+c[0];d[1]=e[1]+c[1];d[2]=e[2]+c[2];d[3]=e[3]+c[3];d[4]=e[4]+c[4];d[5]=e[5]+c[5];return d};d.subtract=l;d.multiplyScalar=function(d,e,c){d[0]=e[0]*c;d[1]=e[1]*c;d[2]=e[2]*c;d[3]=e[3]*c;d[4]=e[4]*c;d[5]=e[5]*c;return d};d.multiplyScalarAndAdd=function(d,e,c,f){d[0]=e[0]+c[0]*f;d[1]=e[1]+c[1]*f;d[2]=e[2]+c[2]*f;d[3]=e[3]+c[3]*f;
d[4]=e[4]+c[4]*f;d[5]=e[5]+c[5]*f;return d};d.exactEquals=function(d,e){return d[0]===e[0]&&d[1]===e[1]&&d[2]===e[2]&&d[3]===e[3]&&d[4]===e[4]&&d[5]===e[5]};d.equals=function(d,e){var c=d[0],g=d[1],b=d[2],a=d[3],f=d[4];d=d[5];var k=e[0],q=e[1],h=e[2],l=e[3],t=e[4];e=e[5];return Math.abs(c-k)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(g-q)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(b-h)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(h))&&Math.abs(a-l)<=n.EPSILON*Math.max(1,
Math.abs(a),Math.abs(l))&&Math.abs(f-t)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(t))&&Math.abs(d-e)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(e))};d.mul=f;d.sub=l})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(h,d,n){function f(d,e,c){var g=e[0],b=e[1],a=e[2],f=e[3],k=e[4],q=e[5],h=e[6],l=e[7];e=e[8];var t=c[0],r=c[1],w=c[2],z=c[3],n=c[4],A=c[5],x=c[6],C=c[7];c=c[8];d[0]=t*g+r*f+w*h;d[1]=t*b+r*k+w*l;d[2]=t*a+r*q+w*e;d[3]=z*g+n*f+A*h;d[4]=z*
b+n*k+A*l;d[5]=z*a+n*q+A*e;d[6]=x*g+C*f+c*h;d[7]=x*b+C*k+c*l;d[8]=x*a+C*q+c*e;return d}function l(d,e,c){d[0]=e[0]-c[0];d[1]=e[1]-c[1];d[2]=e[2]-c[2];d[3]=e[3]-c[3];d[4]=e[4]-c[4];d[5]=e[5]-c[5];d[6]=e[6]-c[6];d[7]=e[7]-c[7];d[8]=e[8]-c[8];return d}Object.defineProperty(d,"__esModule",{value:!0});d.fromMat4=function(d,e){d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[4];d[4]=e[5];d[5]=e[6];d[6]=e[8];d[7]=e[9];d[8]=e[10];return d};d.copy=function(d,e){d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[3];d[4]=e[4];d[5]=e[5];
d[6]=e[6];d[7]=e[7];d[8]=e[8];return d};d.set=function(d,e,c,f,b,a,m,k,q,h){d[0]=e;d[1]=c;d[2]=f;d[3]=b;d[4]=a;d[5]=m;d[6]=k;d[7]=q;d[8]=h;return d};d.identity=function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=1;d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d};d.transpose=function(d,e){if(d===e){var c=e[1],g=e[2],b=e[5];d[1]=e[3];d[2]=e[6];d[3]=c;d[5]=e[7];d[6]=g;d[7]=b}else d[0]=e[0],d[1]=e[3],d[2]=e[6],d[3]=e[1],d[4]=e[4],d[5]=e[7],d[6]=e[2],d[7]=e[5],d[8]=e[8];return d};d.invert=function(d,e){var c=e[0],g=e[1],
b=e[2],a=e[3],f=e[4],k=e[5],q=e[6],h=e[7];e=e[8];var l=e*f-k*h,t=-e*a+k*q,r=h*a-f*q,w=c*l+g*t+b*r;if(!w)return null;w=1/w;d[0]=l*w;d[1]=(-e*g+b*h)*w;d[2]=(k*g-b*f)*w;d[3]=t*w;d[4]=(e*c-b*q)*w;d[5]=(-k*c+b*a)*w;d[6]=r*w;d[7]=(-h*c+g*q)*w;d[8]=(f*c-g*a)*w;return d};d.adjoint=function(d,e){var c=e[0],g=e[1],b=e[2],a=e[3],f=e[4],k=e[5],q=e[6],h=e[7];e=e[8];d[0]=f*e-k*h;d[1]=b*h-g*e;d[2]=g*k-b*f;d[3]=k*q-a*e;d[4]=c*e-b*q;d[5]=b*a-c*k;d[6]=a*h-f*q;d[7]=g*q-c*h;d[8]=c*f-g*a;return d};d.determinant=function(d){var e=
d[3],c=d[4],g=d[5],b=d[6],a=d[7],f=d[8];return d[0]*(f*c-g*a)+d[1]*(-f*e+g*b)+d[2]*(a*e-c*b)};d.multiply=f;d.translate=function(d,e,c){var g=e[0],b=e[1],a=e[2],f=e[3],k=e[4],q=e[5],h=e[6],l=e[7];e=e[8];var t=c[0];c=c[1];d[0]=g;d[1]=b;d[2]=a;d[3]=f;d[4]=k;d[5]=q;d[6]=t*g+c*f+h;d[7]=t*b+c*k+l;d[8]=t*a+c*q+e;return d};d.rotate=function(d,e,c){var f=e[0],b=e[1],a=e[2],g=e[3],k=e[4],q=e[5],h=e[6],l=e[7];e=e[8];var t=Math.sin(c);c=Math.cos(c);d[0]=c*f+t*g;d[1]=c*b+t*k;d[2]=c*a+t*q;d[3]=c*g-t*f;d[4]=c*k-
t*b;d[5]=c*q-t*a;d[6]=h;d[7]=l;d[8]=e;return d};d.scale=function(d,e,c){var f=c[0];c=c[1];d[0]=f*e[0];d[1]=f*e[1];d[2]=f*e[2];d[3]=c*e[3];d[4]=c*e[4];d[5]=c*e[5];d[6]=e[6];d[7]=e[7];d[8]=e[8];return d};d.fromTranslation=function(d,e){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=1;d[5]=0;d[6]=e[0];d[7]=e[1];d[8]=1;return d};d.fromRotation=function(d,e){var c=Math.sin(e);e=Math.cos(e);d[0]=e;d[1]=c;d[2]=0;d[3]=-c;d[4]=e;d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d};d.fromScaling=function(d,e){d[0]=e[0];d[1]=0;d[2]=0;d[3]=
0;d[4]=e[1];d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d};d.fromMat2d=function(d,e){d[0]=e[0];d[1]=e[1];d[2]=0;d[3]=e[2];d[4]=e[3];d[5]=0;d[6]=e[4];d[7]=e[5];d[8]=1;return d};d.fromQuat=function(d,e){var c=e[0],f=e[1],b=e[2];e=e[3];var a=c+c,g=f+f,k=b+b,c=c*a,q=f*a,f=f*g,h=b*a,l=b*g,b=b*k,a=e*a,g=e*g;e*=k;d[0]=1-f-b;d[3]=q-e;d[6]=h+g;d[1]=q+e;d[4]=1-c-b;d[7]=l-a;d[2]=h-g;d[5]=l+a;d[8]=1-c-f;return d};d.normalFromMat4=function(d,e){var c=e[0],f=e[1],b=e[2],a=e[4],g=e[5],k=e[6],q=e[8],h=e[9];e=e[10];var l=
e*g-k*h,t=-e*a+k*q,r=h*a-g*q,w=c*l+f*t+b*r;if(!w)return null;w=1/w;d[0]=l*w;d[1]=(-e*f+b*h)*w;d[2]=(k*f-b*g)*w;d[3]=t*w;d[4]=(e*c-b*q)*w;d[5]=(-k*c+b*a)*w;d[6]=r*w;d[7]=(-h*c+f*q)*w;d[8]=(g*c-f*a)*w;return d};d.projection=function(d,e,c){d[0]=2/e;d[1]=0;d[2]=0;d[3]=0;d[4]=-2/c;d[5]=0;d[6]=-1;d[7]=1;d[8]=1;return d};d.str=function(d){return"mat3("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+")"};d.frob=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],
2)+Math.pow(d[2],2)+Math.pow(d[3],2)+Math.pow(d[4],2)+Math.pow(d[5],2)+Math.pow(d[6],2)+Math.pow(d[7],2)+Math.pow(d[8],2))};d.add=function(d,e,c){d[0]=e[0]+c[0];d[1]=e[1]+c[1];d[2]=e[2]+c[2];d[3]=e[3]+c[3];d[4]=e[4]+c[4];d[5]=e[5]+c[5];d[6]=e[6]+c[6];d[7]=e[7]+c[7];d[8]=e[8]+c[8];return d};d.subtract=l;d.multiplyScalar=function(d,e,c){d[0]=e[0]*c;d[1]=e[1]*c;d[2]=e[2]*c;d[3]=e[3]*c;d[4]=e[4]*c;d[5]=e[5]*c;d[6]=e[6]*c;d[7]=e[7]*c;d[8]=e[8]*c;return d};d.multiplyScalarAndAdd=function(d,e,c,f){d[0]=
e[0]+c[0]*f;d[1]=e[1]+c[1]*f;d[2]=e[2]+c[2]*f;d[3]=e[3]+c[3]*f;d[4]=e[4]+c[4]*f;d[5]=e[5]+c[5]*f;d[6]=e[6]+c[6]*f;d[7]=e[7]+c[7]*f;d[8]=e[8]+c[8]*f;return d};d.exactEquals=function(d,e){return d[0]===e[0]&&d[1]===e[1]&&d[2]===e[2]&&d[3]===e[3]&&d[4]===e[4]&&d[5]===e[5]&&d[6]===e[6]&&d[7]===e[7]&&d[8]===e[8]};d.equals=function(d,e){var c=d[0],f=d[1],b=d[2],a=d[3],g=d[4],k=d[5],q=d[6],h=d[7];d=d[8];var l=e[0],t=e[1],r=e[2],w=e[3],z=e[4],B=e[5],A=e[6],x=e[7];e=e[8];return Math.abs(c-l)<=n.EPSILON*Math.max(1,
Math.abs(c),Math.abs(l))&&Math.abs(f-t)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(t))&&Math.abs(b-r)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(r))&&Math.abs(a-w)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(g-z)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(z))&&Math.abs(k-B)<=n.EPSILON*Math.max(1,Math.abs(k),Math.abs(B))&&Math.abs(q-A)<=n.EPSILON*Math.max(1,Math.abs(q),Math.abs(A))&&Math.abs(h-x)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(d-e)<=n.EPSILON*Math.max(1,Math.abs(d),
Math.abs(e))};d.mul=f;d.sub=l})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(h,d,n,f){function l(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function g(b,a,c){var e=a[0],d=a[1],f=a[2],g=a[3],m=a[4],h=a[5],p=a[6],l=a[7],n=a[8],A=a[9],x=a[10],C=a[11],y=a[12],E=a[13],D=a[14];a=a[15];var F=c[0],L=c[1],P=c[2],M=c[3];b[0]=F*e+L*m+P*n+M*y;b[1]=
F*d+L*h+P*A+M*E;b[2]=F*f+L*p+P*x+M*D;b[3]=F*g+L*l+P*C+M*a;F=c[4];L=c[5];P=c[6];M=c[7];b[4]=F*e+L*m+P*n+M*y;b[5]=F*d+L*h+P*A+M*E;b[6]=F*f+L*p+P*x+M*D;b[7]=F*g+L*l+P*C+M*a;F=c[8];L=c[9];P=c[10];M=c[11];b[8]=F*e+L*m+P*n+M*y;b[9]=F*d+L*h+P*A+M*E;b[10]=F*f+L*p+P*x+M*D;b[11]=F*g+L*l+P*C+M*a;F=c[12];L=c[13];P=c[14];M=c[15];b[12]=F*e+L*m+P*n+M*y;b[13]=F*d+L*h+P*A+M*E;b[14]=F*f+L*p+P*x+M*D;b[15]=F*g+L*l+P*C+M*a;return b}function e(b,a,c){var e=a[0],d=a[1],f=a[2],g=a[3],m=e+e,h=d+d,p=f+f;a=e*m;var l=e*h,e=
e*p,n=d*h,d=d*p,f=f*p,m=g*m,h=g*h,g=g*p;b[0]=1-(n+f);b[1]=l+g;b[2]=e-h;b[3]=0;b[4]=l-g;b[5]=1-(a+f);b[6]=d+m;b[7]=0;b[8]=e+h;b[9]=d-m;b[10]=1-(a+n);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];b[15]=1;return b}function c(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=a[4]-c[4];b[5]=a[5]-c[5];b[6]=a[6]-c[6];b[7]=a[7]-c[7];b[8]=a[8]-c[8];b[9]=a[9]-c[9];b[10]=a[10]-c[10];b[11]=a[11]-c[11];b[12]=a[12]-c[12];b[13]=a[13]-c[13];b[14]=a[14]-c[14];b[15]=a[15]-c[15];return b}Object.defineProperty(d,
"__esModule",{value:!0});d.copy=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};d.set=function(b,a,c,e,d,f,g,h,p,l,z,n,A,x,C,y,E){b[0]=a;b[1]=c;b[2]=e;b[3]=d;b[4]=f;b[5]=g;b[6]=h;b[7]=p;b[8]=l;b[9]=z;b[10]=n;b[11]=A;b[12]=x;b[13]=C;b[14]=y;b[15]=E;return b};d.identity=l;d.transpose=function(b,a){if(b===a){var c=a[1],e=a[2],d=a[3],f=a[6],g=a[7],h=a[11];
b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=e;b[9]=f;b[11]=a[14];b[12]=d;b[13]=g;b[14]=h}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};d.invert=function(b,a){var c=a[0],e=a[1],d=a[2],f=a[3],g=a[4],h=a[5],p=a[6],l=a[7],z=a[8],n=a[9],A=a[10],x=a[11],C=a[12],y=a[13],E=a[14];a=a[15];var D=c*h-e*g,F=c*p-d*g,L=c*l-f*g,P=e*p-d*h,M=e*l-f*h,I=d*l-
f*p,ba=z*y-n*C,K=z*E-A*C,S=z*a-x*C,Q=n*E-A*y,J=n*a-x*y,R=A*a-x*E,H=D*R-F*J+L*Q+P*S-M*K+I*ba;if(!H)return null;H=1/H;b[0]=(h*R-p*J+l*Q)*H;b[1]=(d*J-e*R-f*Q)*H;b[2]=(y*I-E*M+a*P)*H;b[3]=(A*M-n*I-x*P)*H;b[4]=(p*S-g*R-l*K)*H;b[5]=(c*R-d*S+f*K)*H;b[6]=(E*L-C*I-a*F)*H;b[7]=(z*I-A*L+x*F)*H;b[8]=(g*J-h*S+l*ba)*H;b[9]=(e*S-c*J-f*ba)*H;b[10]=(C*M-y*L+a*D)*H;b[11]=(n*L-z*M-x*D)*H;b[12]=(h*K-g*Q-p*ba)*H;b[13]=(c*Q-e*K+d*ba)*H;b[14]=(y*F-C*P-E*D)*H;b[15]=(z*P-n*F+A*D)*H;return b};d.adjoint=function(b,a){var c=
a[0],e=a[1],d=a[2],f=a[3],g=a[4],h=a[5],p=a[6],l=a[7],z=a[8],n=a[9],A=a[10],x=a[11],C=a[12],y=a[13],E=a[14];a=a[15];b[0]=h*(A*a-x*E)-n*(p*a-l*E)+y*(p*x-l*A);b[1]=-(e*(A*a-x*E)-n*(d*a-f*E)+y*(d*x-f*A));b[2]=e*(p*a-l*E)-h*(d*a-f*E)+y*(d*l-f*p);b[3]=-(e*(p*x-l*A)-h*(d*x-f*A)+n*(d*l-f*p));b[4]=-(g*(A*a-x*E)-z*(p*a-l*E)+C*(p*x-l*A));b[5]=c*(A*a-x*E)-z*(d*a-f*E)+C*(d*x-f*A);b[6]=-(c*(p*a-l*E)-g*(d*a-f*E)+C*(d*l-f*p));b[7]=c*(p*x-l*A)-g*(d*x-f*A)+z*(d*l-f*p);b[8]=g*(n*a-x*y)-z*(h*a-l*y)+C*(h*x-l*n);b[9]=
-(c*(n*a-x*y)-z*(e*a-f*y)+C*(e*x-f*n));b[10]=c*(h*a-l*y)-g*(e*a-f*y)+C*(e*l-f*h);b[11]=-(c*(h*x-l*n)-g*(e*x-f*n)+z*(e*l-f*h));b[12]=-(g*(n*E-A*y)-z*(h*E-p*y)+C*(h*A-p*n));b[13]=c*(n*E-A*y)-z*(e*E-d*y)+C*(e*A-d*n);b[14]=-(c*(h*E-p*y)-g*(e*E-d*y)+C*(e*p-d*h));b[15]=c*(h*A-p*n)-g*(e*A-d*n)+z*(e*p-d*h);return b};d.determinant=function(b){var a=b[0],c=b[1],e=b[2],d=b[3],f=b[4],g=b[5],h=b[6],p=b[7],l=b[8],z=b[9],n=b[10],A=b[11],x=b[12],C=b[13],y=b[14];b=b[15];return(a*g-c*f)*(n*b-A*y)-(a*h-e*f)*(z*b-A*
C)+(a*p-d*f)*(z*y-n*C)+(c*h-e*g)*(l*b-A*x)-(c*p-d*g)*(l*y-n*x)+(e*p-d*h)*(l*C-z*x)};d.multiply=g;d.translate=function(b,a,c){var e=c[0],d=c[1];c=c[2];var f=void 0,g=void 0,m=void 0,h=void 0,p=void 0,l=void 0,n=void 0,A=void 0,x=void 0,C=void 0,y=void 0,E=void 0;a===b?(b[12]=a[0]*e+a[4]*d+a[8]*c+a[12],b[13]=a[1]*e+a[5]*d+a[9]*c+a[13],b[14]=a[2]*e+a[6]*d+a[10]*c+a[14],b[15]=a[3]*e+a[7]*d+a[11]*c+a[15]):(f=a[0],g=a[1],m=a[2],h=a[3],p=a[4],l=a[5],n=a[6],A=a[7],x=a[8],C=a[9],y=a[10],E=a[11],b[0]=f,b[1]=
g,b[2]=m,b[3]=h,b[4]=p,b[5]=l,b[6]=n,b[7]=A,b[8]=x,b[9]=C,b[10]=y,b[11]=E,b[12]=f*e+p*d+x*c+a[12],b[13]=g*e+l*d+C*c+a[13],b[14]=m*e+n*d+y*c+a[14],b[15]=h*e+A*d+E*c+a[15]);return b};d.scale=function(b,a,c){var e=c[0],d=c[1];c=c[2];b[0]=a[0]*e;b[1]=a[1]*e;b[2]=a[2]*e;b[3]=a[3]*e;b[4]=a[4]*d;b[5]=a[5]*d;b[6]=a[6]*d;b[7]=a[7]*d;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};d.rotate=function(b,a,c,e){var d=e[0],k=e[1];e=e[2];var g=Math.sqrt(d*
d+k*k+e*e),m=void 0,h=void 0,p=void 0,l=void 0,n=void 0,A=void 0,x=void 0,C=void 0,y=void 0,E=void 0,D=void 0,F=void 0,L=void 0,P=void 0,M=void 0,I=void 0,ba=void 0,K=void 0,S=void 0,Q=void 0,J=void 0,R=void 0,h=m=void 0;if(g<f.EPSILON)return null;g=1/g;d*=g;k*=g;e*=g;m=Math.sin(c);h=Math.cos(c);p=1-h;l=a[0];n=a[1];A=a[2];x=a[3];C=a[4];y=a[5];E=a[6];D=a[7];F=a[8];L=a[9];P=a[10];M=a[11];I=d*d*p+h;ba=k*d*p+e*m;K=e*d*p-k*m;S=d*k*p-e*m;Q=k*k*p+h;J=e*k*p+d*m;R=d*e*p+k*m;m=k*e*p-d*m;h=e*e*p+h;b[0]=l*I+
C*ba+F*K;b[1]=n*I+y*ba+L*K;b[2]=A*I+E*ba+P*K;b[3]=x*I+D*ba+M*K;b[4]=l*S+C*Q+F*J;b[5]=n*S+y*Q+L*J;b[6]=A*S+E*Q+P*J;b[7]=x*S+D*Q+M*J;b[8]=l*R+C*m+F*h;b[9]=n*R+y*m+L*h;b[10]=A*R+E*m+P*h;b[11]=x*R+D*m+M*h;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};d.rotateX=function(b,a,c){var e=Math.sin(c);c=Math.cos(c);var d=a[4],f=a[5],g=a[6],m=a[7],h=a[8],p=a[9],l=a[10],n=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=d*c+h*e;b[5]=
f*c+p*e;b[6]=g*c+l*e;b[7]=m*c+n*e;b[8]=h*c-d*e;b[9]=p*c-f*e;b[10]=l*c-g*e;b[11]=n*c-m*e;return b};d.rotateY=function(b,a,c){var e=Math.sin(c);c=Math.cos(c);var d=a[0],f=a[1],g=a[2],m=a[3],h=a[8],p=a[9],l=a[10],n=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=d*c-h*e;b[1]=f*c-p*e;b[2]=g*c-l*e;b[3]=m*c-n*e;b[8]=d*e+h*c;b[9]=f*e+p*c;b[10]=g*e+l*c;b[11]=m*e+n*c;return b};d.rotateZ=function(b,a,c){var e=Math.sin(c);c=Math.cos(c);var d=a[0],f=
a[1],g=a[2],m=a[3],h=a[4],p=a[5],l=a[6],n=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=d*c+h*e;b[1]=f*c+p*e;b[2]=g*c+l*e;b[3]=m*c+n*e;b[4]=h*c-d*e;b[5]=p*c-f*e;b[6]=l*c-g*e;b[7]=n*c-m*e;return b};d.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};d.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=
a[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotation=function(b,a,c){var e=c[0],d=c[1];c=c[2];var g=Math.sqrt(e*e+d*d+c*c),m=void 0,h=void 0,p=void 0;if(g<f.EPSILON)return null;g=1/g;e*=g;d*=g;c*=g;m=Math.sin(a);h=Math.cos(a);p=1-h;b[0]=e*e*p+h;b[1]=d*e*p+c*m;b[2]=c*e*p-d*m;b[3]=0;b[4]=e*d*p-c*m;b[5]=d*d*p+h;b[6]=c*d*p+e*m;b[7]=0;b[8]=e*c*p+d*m;b[9]=d*c*p-e*m;b[10]=c*c*p+h;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromXRotation=function(b,
a){var c=Math.sin(a);a=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=c;b[7]=0;b[8]=0;b[9]=-c;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromYRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=0;b[2]=-c;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=c;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromZRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=c;b[2]=0;b[3]=0;b[4]=-c;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=
0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotationTranslation=e;d.fromQuat2=function(b,a){var c=p,d=-a[0],f=-a[1],g=-a[2],h=a[3],l=a[4],r=a[5],w=a[6],n=a[7],B=d*d+f*f+g*g+h*h;0<B?(c[0]=2*(l*h+n*d+r*g-w*f)/B,c[1]=2*(r*h+n*f+w*d-l*g)/B,c[2]=2*(w*h+n*g+l*f-r*d)/B):(c[0]=2*(l*h+n*d+r*g-w*f),c[1]=2*(r*h+n*f+w*d-l*g),c[2]=2*(w*h+n*g+l*f-r*d));e(b,a,c);return b};var p=n.create();d.getTranslation=function(b,a){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};d.getScaling=function(b,a){var c=a[0],e=a[1],
d=a[2],f=a[4],g=a[5],h=a[6],p=a[8],l=a[9];a=a[10];b[0]=Math.sqrt(c*c+e*e+d*d);b[1]=Math.sqrt(f*f+g*g+h*h);b[2]=Math.sqrt(p*p+l*l+a*a);return b};d.getRotation=function(b,a){var c=a[0]+a[5]+a[10],e=0;0<c?(e=2*Math.sqrt(c+1),b[3]=.25*e,b[0]=(a[6]-a[9])/e,b[1]=(a[8]-a[2])/e,b[2]=(a[1]-a[4])/e):a[0]>a[5]&&a[0]>a[10]?(e=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/e,b[0]=.25*e,b[1]=(a[1]+a[4])/e,b[2]=(a[8]+a[2])/e):a[5]>a[10]?(e=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/e,b[0]=(a[1]+a[4])/e,b[1]=
.25*e,b[2]=(a[6]+a[9])/e):(e=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/e,b[0]=(a[8]+a[2])/e,b[1]=(a[6]+a[9])/e,b[2]=.25*e);return b};d.fromRotationTranslationScale=function(b,a,c,e){var d=a[0],k=a[1],f=a[2],g=a[3],m=d+d,h=k+k,p=f+f;a=d*m;var l=d*h,d=d*p,n=k*h,k=k*p,f=f*p,m=g*m,h=g*h,g=g*p,p=e[0],x=e[1];e=e[2];b[0]=(1-(n+f))*p;b[1]=(l+g)*p;b[2]=(d-h)*p;b[3]=0;b[4]=(l-g)*x;b[5]=(1-(a+f))*x;b[6]=(k+m)*x;b[7]=0;b[8]=(d+h)*e;b[9]=(k-m)*e;b[10]=(1-(a+n))*e;b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];
b[15]=1;return b};d.fromRotationTranslationScaleOrigin=function(b,a,c,e,d){var k=a[0],f=a[1],g=a[2],m=a[3],h=k+k,q=f+f,p=g+g;a=k*h;var l=k*q,x=k*p,k=f*q,f=f*p,C=g*p,g=m*h,q=m*q,y=m*p,n=e[0],D=e[1],p=e[2];e=d[0];m=d[1];d=d[2];var h=(1-(k+C))*n,F=(l+y)*n,n=(x-q)*n,l=(l-y)*D,C=(1-(a+C))*D,D=(f+g)*D,x=(x+q)*p,f=(f-g)*p;a=(1-(a+k))*p;b[0]=h;b[1]=F;b[2]=n;b[3]=0;b[4]=l;b[5]=C;b[6]=D;b[7]=0;b[8]=x;b[9]=f;b[10]=a;b[11]=0;b[12]=c[0]+e-(h*e+l*m+x*d);b[13]=c[1]+m-(F*e+C*m+f*d);b[14]=c[2]+d-(n*e+D*m+a*d);b[15]=
1;return b};d.fromQuat=function(b,a){var c=a[0],e=a[1],d=a[2];a=a[3];var f=c+c,g=e+e,h=d+d,c=c*f,p=e*f,e=e*g,l=d*f,n=d*g,d=d*h,f=a*f,g=a*g;a*=h;b[0]=1-e-d;b[1]=p+a;b[2]=l-g;b[3]=0;b[4]=p-a;b[5]=1-c-d;b[6]=n+f;b[7]=0;b[8]=l+g;b[9]=n-f;b[10]=1-c-e;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.frustum=function(b,a,c,e,d,f,g){var k=1/(c-a),m=1/(d-e),h=1/(f-g);b[0]=2*f*k;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*f*m;b[6]=0;b[7]=0;b[8]=(c+a)*k;b[9]=(d+e)*m;b[10]=(g+f)*h;b[11]=-1;b[12]=0;b[13]=0;b[14]=g*
f*2*h;b[15]=0;return b};d.perspective=function(b,a,c,e,d){a=1/Math.tan(a/2);var k=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=d&&Infinity!==d?(k=1/(e-d),b[10]=(d+e)*k,b[14]=2*d*e*k):(b[10]=-1,b[14]=-2*e);return b};d.perspectiveFromFieldOfView=function(b,a,c,e){var d=Math.tan(a.upDegrees*Math.PI/180),k=Math.tan(a.downDegrees*Math.PI/180),f=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var g=2/(f+
a),m=2/(d+k);b[0]=g;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=m;b[6]=0;b[7]=0;b[8]=-((f-a)*g*.5);b[9]=(d-k)*m*.5;b[10]=e/(c-e);b[11]=-1;b[12]=0;b[13]=0;b[14]=e*c/(c-e);b[15]=0;return b};d.ortho=function(b,a,c,e,d,f,g){var k=1/(a-c),m=1/(e-d),h=1/(f-g);b[0]=-2*k;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*m;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*h;b[11]=0;b[12]=(a+c)*k;b[13]=(d+e)*m;b[14]=(g+f)*h;b[15]=1;return b};d.lookAt=function(b,a,c,e){var d=void 0,k=void 0,g=void 0,m=void 0,h=void 0,p=void 0,n=void 0,B=void 0,A=
void 0,x=void 0,C=a[0],y=a[1];a=a[2];g=e[0];m=e[1];e=e[2];n=c[0];B=c[1];c=c[2];if(Math.abs(C-n)<f.EPSILON&&Math.abs(y-B)<f.EPSILON&&Math.abs(a-c)<f.EPSILON)return l(b);n=C-n;B=y-B;A=a-c;x=1/Math.sqrt(n*n+B*B+A*A);n*=x;B*=x;A*=x;d=m*A-e*B;k=e*n-g*A;g=g*B-m*n;(x=Math.sqrt(d*d+k*k+g*g))?(x=1/x,d*=x,k*=x,g*=x):g=k=d=0;m=B*g-A*k;h=A*d-n*g;p=n*k-B*d;(x=Math.sqrt(m*m+h*h+p*p))?(x=1/x,m*=x,h*=x,p*=x):p=h=m=0;b[0]=d;b[1]=m;b[2]=n;b[3]=0;b[4]=k;b[5]=h;b[6]=B;b[7]=0;b[8]=g;b[9]=p;b[10]=A;b[11]=0;b[12]=-(d*C+
k*y+g*a);b[13]=-(m*C+h*y+p*a);b[14]=-(n*C+B*y+A*a);b[15]=1;return b};d.targetTo=function(b,a,c,e){var d=a[0],k=a[1];a=a[2];var f=e[0],g=e[1],m=e[2];e=d-c[0];var h=k-c[1];c=a-c[2];var p=e*e+h*h+c*c;0<p&&(p=1/Math.sqrt(p),e*=p,h*=p,c*=p);var l=g*c-m*h,m=m*e-f*c,f=f*h-g*e,p=l*l+m*m+f*f;0<p&&(p=1/Math.sqrt(p),l*=p,m*=p,f*=p);b[0]=l;b[1]=m;b[2]=f;b[3]=0;b[4]=h*f-c*m;b[5]=c*l-e*f;b[6]=e*m-h*l;b[7]=0;b[8]=e;b[9]=h;b[10]=c;b[11]=0;b[12]=d;b[13]=k;b[14]=a;b[15]=1;return b};d.str=function(b){return"mat4("+
b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};d.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};d.add=function(b,a,
c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];b[9]=a[9]+c[9];b[10]=a[10]+c[10];b[11]=a[11]+c[11];b[12]=a[12]+c[12];b[13]=a[13]+c[13];b[14]=a[14]+c[14];b[15]=a[15]+c[15];return b};d.subtract=c;d.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12]*c;b[13]=a[13]*c;b[14]=a[14]*
c;b[15]=a[15]*c;return b};d.multiplyScalarAndAdd=function(b,a,c,e){b[0]=a[0]+c[0]*e;b[1]=a[1]+c[1]*e;b[2]=a[2]+c[2]*e;b[3]=a[3]+c[3]*e;b[4]=a[4]+c[4]*e;b[5]=a[5]+c[5]*e;b[6]=a[6]+c[6]*e;b[7]=a[7]+c[7]*e;b[8]=a[8]+c[8]*e;b[9]=a[9]+c[9]*e;b[10]=a[10]+c[10]*e;b[11]=a[11]+c[11]*e;b[12]=a[12]+c[12]*e;b[13]=a[13]+c[13]*e;b[14]=a[14]+c[14]*e;b[15]=a[15]+c[15]*e;return b};d.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&
b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};d.equals=function(b,a){var c=b[0],e=b[1],d=b[2],g=b[3],h=b[4],p=b[5],l=b[6],w=b[7],n=b[8],B=b[9],A=b[10],x=b[11],C=b[12],y=b[13],E=b[14];b=b[15];var D=a[0],F=a[1],L=a[2],P=a[3],M=a[4],I=a[5],ba=a[6],K=a[7],S=a[8],Q=a[9],J=a[10],R=a[11],H=a[12],W=a[13],aa=a[14];a=a[15];return Math.abs(c-D)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(e-F)<=f.EPSILON*Math.max(1,Math.abs(e),
Math.abs(F))&&Math.abs(d-L)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(g-P)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(h-M)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(p-I)<=f.EPSILON*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(l-ba)<=f.EPSILON*Math.max(1,Math.abs(l),Math.abs(ba))&&Math.abs(w-K)<=f.EPSILON*Math.max(1,Math.abs(w),Math.abs(K))&&Math.abs(n-S)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(B-Q)<=f.EPSILON*Math.max(1,Math.abs(B),Math.abs(Q))&&
Math.abs(A-J)<=f.EPSILON*Math.max(1,Math.abs(A),Math.abs(J))&&Math.abs(x-R)<=f.EPSILON*Math.max(1,Math.abs(x),Math.abs(R))&&Math.abs(C-H)<=f.EPSILON*Math.max(1,Math.abs(C),Math.abs(H))&&Math.abs(y-W)<=f.EPSILON*Math.max(1,Math.abs(y),Math.abs(W))&&Math.abs(E-aa)<=f.EPSILON*Math.max(1,Math.abs(E),Math.abs(aa))&&Math.abs(b-a)<=f.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};d.mul=g;d.sub=c})},"esri/core/libs/gl-matrix-2/math/quat":function(){define("require exports ../factories/mat3f64 ../factories/quatf64 ../factories/vec3f64 ./common ./vec3 ./vec4".split(" "),
function(h,d,n,f,l,g,e,c){function p(a,b,c){c*=.5;var e=Math.sin(c);a[0]=e*b[0];a[1]=e*b[1];a[2]=e*b[2];a[3]=Math.cos(c);return a}function b(a,b,c){var e=b[0],d=b[1],k=b[2];b=b[3];var f=c[0],g=c[1],h=c[2];c=c[3];a[0]=e*c+b*f+d*h-k*g;a[1]=d*c+b*g+k*f-e*h;a[2]=k*c+b*h+e*g-d*f;a[3]=b*c-e*f-d*g-k*h;return a}function a(a,b,c,e){var d=b[0],k=b[1],f=b[2];b=b[3];var h=c[0],m=c[1],q=c[2];c=c[3];var p,l,r;l=d*h+k*m+f*q+b*c;0>l&&(l=-l,h=-h,m=-m,q=-q,c=-c);1-l>g.EPSILON?(p=Math.acos(l),r=Math.sin(p),l=Math.sin((1-
e)*p)/r,e=Math.sin(e*p)/r):l=1-e;a[0]=l*d+e*h;a[1]=l*k+e*m;a[2]=l*f+e*q;a[3]=l*b+e*c;return a}function m(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1);b[8]>b[3*e+e]&&(e=2);var d=(e+1)%3,k=(e+2)%3,c=Math.sqrt(b[3*e+e]-b[3*d+d]-b[3*k+k]+1);a[e]=.5*c;c=.5/c;a[3]=(b[3*d+k]-b[3*k+d])*c;a[d]=(b[3*d+e]+b[3*e+d])*c;a[k]=(b[3*k+e]+b[3*e+k])*c}return a}Object.defineProperty(d,"__esModule",{value:!0});
d.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};d.setAxisAngle=p;d.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),e=Math.sin(c/2);e>g.EPSILON?(a[0]=b[0]/e,a[1]=b[1]/e,a[2]=b[2]/e):(a[0]=1,a[1]=0,a[2]=0);return c};d.multiply=b;d.rotateX=function(a,b,c){c*=.5;var e=b[0],d=b[1],k=b[2];b=b[3];var f=Math.sin(c);c=Math.cos(c);a[0]=e*c+b*f;a[1]=d*c+k*f;a[2]=k*c-d*f;a[3]=b*c-e*f;return a};d.rotateY=function(a,b,c){c*=.5;var e=b[0],d=b[1],k=b[2];b=b[3];var f=Math.sin(c);c=Math.cos(c);a[0]=
e*c-k*f;a[1]=d*c+b*f;a[2]=k*c+e*f;a[3]=b*c-d*f;return a};d.rotateZ=function(a,b,c){c*=.5;var e=b[0],d=b[1],k=b[2];b=b[3];var f=Math.sin(c);c=Math.cos(c);a[0]=e*c+d*f;a[1]=d*c-e*f;a[2]=k*c+b*f;a[3]=b*c-k*f;return a};d.calculateW=function(a,b){var c=b[0],e=b[1];b=b[2];a[0]=c;a[1]=e;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-e*e-b*b));return a};d.slerp=a;d.random=function(a){var b=g.RANDOM(),c=g.RANDOM(),e=g.RANDOM(),d=Math.sqrt(1-b),b=Math.sqrt(b);a[0]=d*Math.sin(2*Math.PI*c);a[1]=d*Math.cos(2*Math.PI*c);
a[2]=b*Math.sin(2*Math.PI*e);a[3]=b*Math.cos(2*Math.PI*e);return a};d.invert=function(a,b){var c=b[0],e=b[1],d=b[2];b=b[3];var k=c*c+e*e+d*d+b*b,k=k?1/k:0;a[0]=-c*k;a[1]=-e*k;a[2]=-d*k;a[3]=b*k;return a};d.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};d.fromMat3=m;d.fromEuler=function(a,b,c,e){var d=.5*Math.PI/180;b*=d;c*=d;e*=d;d=Math.sin(b);b=Math.cos(b);var k=Math.sin(c);c=Math.cos(c);var f=Math.sin(e);e=Math.cos(e);a[0]=d*c*e-b*k*f;a[1]=b*k*e+d*c*f;a[2]=b*c*f-d*
k*e;a[3]=b*c*e+d*k*f;return a};d.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};d.copy=c.copy;d.set=c.set;d.add=c.add;d.mul=b;d.scale=c.scale;d.dot=c.dot;d.lerp=c.lerp;d.length=c.length;d.len=d.length;d.squaredLength=c.squaredLength;d.sqrLen=d.squaredLength;d.normalize=c.normalize;d.exactEquals=c.exactEquals;d.equals=c.equals;d.rotationTo=function(a,b,c){var f=e.dot(b,c);if(-.999999>f)return e.cross(k,q,b),1E-6>e.len(k)&&e.cross(k,v,b),e.normalize(k,k),p(a,k,Math.PI),a;if(.999999<
f)return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a;e.cross(k,b,c);a[0]=k[0];a[1]=k[1];a[2]=k[2];a[3]=1+f;return d.normalize(a,a)};var k=l.create(),q=l.fromValues(1,0,0),v=l.fromValues(0,1,0);d.sqlerp=function(b,c,e,d,k,f){a(u,c,k,f);a(t,e,d,f);a(b,u,t,2*f*(1-f));return b};var u=f.create(),t=f.create();d.setAxes=function(a,b,c,e){var k=r;k[0]=c[0];k[3]=c[1];k[6]=c[2];k[1]=e[0];k[4]=e[1];k[7]=e[2];k[2]=-b[0];k[5]=-b[1];k[8]=-b[2];return d.normalize(a,m(a,k))};var r=n.create()})},"esri/core/libs/gl-matrix-2/math/vec3":function(){define(["require",
"exports","../factories/vec3f64","./common"],function(h,d,n,f){function l(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function g(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a}function e(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}function c(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a}function p(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a}function b(a,b){var c=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+e*e+a*a)}function a(a,
b){var c=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];return c*c+e*e+a*a}function m(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a}function k(a,b){var c=b[0],e=b[1],d=b[2],c=c*c+e*e+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a}function q(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}Object.defineProperty(d,"__esModule",{value:!0});d.length=l;d.copy=g;d.set=function(a,b,c,e){a[0]=b;a[1]=c;a[2]=e;return a};d.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a};d.subtract=
e;d.multiply=c;d.divide=p;d.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};d.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};d.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};d.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};d.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=
Math.round(b[2]);return a};d.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};d.scaleAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;return a};d.distance=b;d.squaredDistance=a;d.squaredLength=m;d.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};d.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};d.normalize=k;d.dot=q;d.cross=function(a,b,c){var e=b[0],d=b[1];b=b[2];var k=c[0],f=c[1];c=c[2];a[0]=d*c-b*f;a[1]=b*k-e*c;a[2]=
e*f-d*k;return a};d.lerp=function(a,b,c,e){var d=b[0],k=b[1];b=b[2];a[0]=d+e*(c[0]-d);a[1]=k+e*(c[1]-k);a[2]=b+e*(c[2]-b);return a};d.hermite=function(a,b,c,e,d,k){var f=k*k,g=f*(2*k-3)+1,h=f*(k-2)+k,m=f*(k-1);k=f*(3-2*k);a[0]=b[0]*g+c[0]*h+e[0]*m+d[0]*k;a[1]=b[1]*g+c[1]*h+e[1]*m+d[1]*k;a[2]=b[2]*g+c[2]*h+e[2]*m+d[2]*k;return a};d.bezier=function(a,b,c,e,d,k){var f=1-k,g=f*f,h=k*k,m=g*f,g=3*k*g,f=3*h*f;k*=h;a[0]=b[0]*m+c[0]*g+e[0]*f+d[0]*k;a[1]=b[1]*m+c[1]*g+e[1]*f+d[1]*k;a[2]=b[2]*m+c[2]*g+e[2]*
f+d[2]*k;return a};d.random=function(a,b){b=b||1;var c=2*f.RANDOM()*Math.PI,e=2*f.RANDOM()-1,d=Math.sqrt(1-e*e)*b;a[0]=Math.cos(c)*d;a[1]=Math.sin(c)*d;a[2]=e*b;return a};d.transformMat4=function(a,b,c){var e=b[0],d=b[1];b=b[2];a[0]=c[0]*e+c[4]*d+c[8]*b+c[12];a[1]=c[1]*e+c[5]*d+c[9]*b+c[13];a[2]=c[2]*e+c[6]*d+c[10]*b+c[14];return a};d.transformMat3=function(a,b,c){var e=b[0],d=b[1];b=b[2];a[0]=e*c[0]+d*c[3]+b*c[6];a[1]=e*c[1]+d*c[4]+b*c[7];a[2]=e*c[2]+d*c[5]+b*c[8];return a};d.transformQuat=function(a,
b,c){var e=c[0],d=c[1],k=c[2],f=b[0],g=b[1];b=b[2];var h=d*b-k*g,m=k*f-e*b,q=e*g-d*f;c=2*c[3];a[0]=f+h*c+2*(d*q-k*m);a[1]=g+m*c+2*(k*h-e*q);a[2]=b+q*c+2*(e*m-d*h);return a};d.rotateX=function(a,b,c,e){var d=[],k=[];d[0]=b[0]-c[0];d[1]=b[1]-c[1];d[2]=b[2]-c[2];k[0]=d[0];k[1]=d[1]*Math.cos(e)-d[2]*Math.sin(e);k[2]=d[1]*Math.sin(e)+d[2]*Math.cos(e);a[0]=k[0]+c[0];a[1]=k[1]+c[1];a[2]=k[2]+c[2];return a};d.rotateY=function(a,b,c,e){var d=[],k=[];d[0]=b[0]-c[0];d[1]=b[1]-c[1];d[2]=b[2]-c[2];k[0]=d[2]*Math.sin(e)+
d[0]*Math.cos(e);k[1]=d[1];k[2]=d[2]*Math.cos(e)-d[0]*Math.sin(e);a[0]=k[0]+c[0];a[1]=k[1]+c[1];a[2]=k[2]+c[2];return a};d.rotateZ=function(a,b,c,e){var d=[],k=[];d[0]=b[0]-c[0];d[1]=b[1]-c[1];d[2]=b[2]-c[2];k[0]=d[0]*Math.cos(e)-d[1]*Math.sin(e);k[1]=d[0]*Math.sin(e)+d[1]*Math.cos(e);k[2]=d[2];a[0]=k[0]+c[0];a[1]=k[1]+c[1];a[2]=k[2]+c[2];return a};d.angle=function(a,b){g(v,a);g(u,b);k(v,v);k(u,u);a=q(v,u);return 1<a?0:-1>a?Math.PI:Math.acos(a)};var v=n.create(),u=n.create();d.str=function(a){return"vec3("+
a[0]+", "+a[1]+", "+a[2]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};d.equals=function(a,b){var c=a[0],e=a[1];a=a[2];var d=b[0],k=b[1];b=b[2];return Math.abs(c-d)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(e-k)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};d.sub=e;d.mul=c;d.div=p;d.dist=b;d.sqrDist=a;d.len=l;d.sqrLen=m})},"esri/core/libs/gl-matrix-2/math/vec4":function(){define(["require",
"exports","./common"],function(h,d,n){function f(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}function l(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];a[3]=b[3]*c[3];return a}function g(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];a[3]=b[3]/c[3];return a}function e(a,b){var c=b[0]-a[0],e=b[1]-a[1],d=b[2]-a[2];a=b[3]-a[3];return Math.sqrt(c*c+e*e+d*d+a*a)}function c(a,b){var c=b[0]-a[0],e=b[1]-a[1],d=b[2]-a[2];a=b[3]-a[3];return c*c+e*e+d*d+a*a}function p(a){var b=
a[0],c=a[1],e=a[2];a=a[3];return Math.sqrt(b*b+c*c+e*e+a*a)}function b(a){var b=a[0],c=a[1],e=a[2];a=a[3];return b*b+c*c+e*e+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};d.set=function(a,b,c,e,d){a[0]=b;a[1]=c;a[2]=e;a[3]=d;return a};d.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a};d.subtract=f;d.multiply=l;d.divide=g;d.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);
a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};d.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};d.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);a[3]=Math.min(b[3],c[3]);return a};d.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);a[3]=Math.max(b[3],c[3]);return a};d.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);
a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};d.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a};d.scaleAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;return a};d.distance=e;d.squaredDistance=c;d.length=p;d.squaredLength=b;d.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};d.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};d.normalize=function(a,b){var c=b[0],
e=b[1],d=b[2];b=b[3];var f=c*c+e*e+d*d+b*b;0<f&&(f=1/Math.sqrt(f),a[0]=c*f,a[1]=e*f,a[2]=d*f,a[3]=b*f);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};d.lerp=function(a,b,c,e){var d=b[0],k=b[1],f=b[2];b=b[3];a[0]=d+e*(c[0]-d);a[1]=k+e*(c[1]-k);a[2]=f+e*(c[2]-f);a[3]=b+e*(c[3]-b);return a};d.random=function(a,b){b=b||1;var c,e,d,f,g,h;do c=2*n.RANDOM()-1,e=2*n.RANDOM()-1,g=c*c+e*e;while(1<=g);do d=2*n.RANDOM()-1,f=2*n.RANDOM()-1,h=d*d+f*f;while(1<=h);g=Math.sqrt((1-g)/
h);a[0]=b*c;a[1]=b*e;a[2]=b*d*g;a[3]=b*f*g;return a};d.transformMat4=function(a,b,c){var e=b[0],d=b[1],k=b[2];b=b[3];a[0]=c[0]*e+c[4]*d+c[8]*k+c[12]*b;a[1]=c[1]*e+c[5]*d+c[9]*k+c[13]*b;a[2]=c[2]*e+c[6]*d+c[10]*k+c[14]*b;a[3]=c[3]*e+c[7]*d+c[11]*k+c[15]*b;return a};d.transformQuat=function(a,b,c){var e=b[0],d=b[1],k=b[2],f=c[0],g=c[1],h=c[2];c=c[3];var m=c*e+g*k-h*d,p=c*d+h*e-f*k,l=c*k+f*d-g*e,e=-f*e-g*d-h*k;a[0]=m*c+e*-f+p*-h-l*-g;a[1]=p*c+e*-g+l*-f-m*-h;a[2]=l*c+e*-h+m*-g-p*-f;a[3]=b[3];return a};
d.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};d.equals=function(a,b){var c=a[0],e=a[1],d=a[2];a=a[3];var f=b[0],g=b[1],h=b[2];b=b[3];return Math.abs(c-f)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(e-g)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(d-h)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(h))&&Math.abs(a-b)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};
d.sub=f;d.mul=l;d.div=g;d.dist=e;d.sqrDist=c;d.len=p;d.sqrLen=b})},"esri/core/libs/gl-matrix-2/math/quat2":function(){define("require exports ../factories/quatf64 ../factories/vec3f64 ./common ./mat4 ./quat".split(" "),function(h,d,n,f,l,g,e){function c(a,b,c){var e=.5*c[0],d=.5*c[1];c=.5*c[2];var k=b[0],f=b[1],g=b[2];b=b[3];a[0]=k;a[1]=f;a[2]=g;a[3]=b;a[4]=e*b+d*g-c*f;a[5]=d*b+c*k-e*g;a[6]=c*b+e*f-d*k;a[7]=-e*k-d*f-c*g;return a}function p(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=
b[5];a[6]=b[6];a[7]=b[7];return a}function b(a,b,c){var e=b[0],d=b[1],k=b[2],f=b[3],g=c[4],h=c[5],m=c[6],q=c[7],p=b[4],l=b[5],v=b[6];b=b[7];var n=c[0],F=c[1],L=c[2];c=c[3];a[0]=e*c+f*n+d*L-k*F;a[1]=d*c+f*F+k*n-e*L;a[2]=k*c+f*L+e*F-d*n;a[3]=f*c-e*n-d*F-k*L;a[4]=e*q+f*g+d*m-k*h+p*c+b*n+l*L-v*F;a[5]=d*q+f*h+k*g-e*m+l*c+b*F+v*n-p*L;a[6]=k*q+f*m+e*h-d*g+v*c+b*L+p*F-l*n;a[7]=f*q-e*g-d*h-k*m+b*c-p*n-l*F-v*L;return a}Object.defineProperty(d,"__esModule",{value:!0});d.fromRotationTranslation=c;d.fromTranslation=
function(a,b){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=.5*b[0];a[5]=.5*b[1];a[6]=.5*b[2];a[7]=0;return a};d.fromRotation=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=0;a[5]=0;a[6]=0;a[7]=0;return a};d.fromMat4=function(b,e){var d=a;g.getRotation(d,e);var k=m;g.getTranslation(k,e);c(b,d,k);return b};var a=n.create(),m=f.create();d.copy=p;d.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;a[6]=0;a[7]=0;return a};d.set=function(a,b,c,e,d,f,g,h,m){a[0]=b;a[1]=c;a[2]=e;a[3]=d;a[4]=
f;a[5]=g;a[6]=h;a[7]=m;return a};d.getReal=e.copy;d.getDual=function(a,b){a[0]=b[4];a[1]=b[5];a[2]=b[6];a[3]=b[7];return a};d.setReal=e.copy;d.setDual=function(a,b){a[4]=b[0];a[5]=b[1];a[6]=b[2];a[7]=b[3];return a};d.getTranslation=function(a,b){var c=b[4],e=b[5],d=b[6],f=b[7],k=-b[0],g=-b[1],h=-b[2];b=b[3];a[0]=2*(c*b+f*k+e*h-d*g);a[1]=2*(e*b+f*g+d*k-c*h);a[2]=2*(d*b+f*h+c*g-e*k);return a};d.translate=function(a,b,c){var e=b[0],d=b[1],f=b[2],k=b[3],g=.5*c[0],h=.5*c[1];c=.5*c[2];var m=b[4],q=b[5],
p=b[6];b=b[7];a[0]=e;a[1]=d;a[2]=f;a[3]=k;a[4]=k*g+d*c-f*h+m;a[5]=k*h+f*g-e*c+q;a[6]=k*c+e*h-d*g+p;a[7]=-e*g-d*h-f*c+b;return a};d.rotateX=function(a,b,c){var d=-b[0],f=-b[1],k=-b[2],g=b[3],h=b[4],m=b[5],q=b[6],p=b[7],l=h*g+p*d+m*k-q*f,v=m*g+p*f+q*d-h*k,n=q*g+p*k+h*f-m*d,h=p*g-h*d-m*f-q*k;e.rotateX(a,b,c);d=a[0];f=a[1];k=a[2];g=a[3];a[4]=l*g+h*d+v*k-n*f;a[5]=v*g+h*f+n*d-l*k;a[6]=n*g+h*k+l*f-v*d;a[7]=h*g-l*d-v*f-n*k;return a};d.rotateY=function(a,b,c){var d=-b[0],f=-b[1],k=-b[2],g=b[3],h=b[4],m=b[5],
q=b[6],p=b[7],l=h*g+p*d+m*k-q*f,v=m*g+p*f+q*d-h*k,n=q*g+p*k+h*f-m*d,h=p*g-h*d-m*f-q*k;e.rotateY(a,b,c);d=a[0];f=a[1];k=a[2];g=a[3];a[4]=l*g+h*d+v*k-n*f;a[5]=v*g+h*f+n*d-l*k;a[6]=n*g+h*k+l*f-v*d;a[7]=h*g-l*d-v*f-n*k;return a};d.rotateZ=function(a,b,c){var d=-b[0],f=-b[1],k=-b[2],g=b[3],h=b[4],m=b[5],q=b[6],p=b[7],l=h*g+p*d+m*k-q*f,v=m*g+p*f+q*d-h*k,n=q*g+p*k+h*f-m*d,h=p*g-h*d-m*f-q*k;e.rotateZ(a,b,c);d=a[0];f=a[1];k=a[2];g=a[3];a[4]=l*g+h*d+v*k-n*f;a[5]=v*g+h*f+n*d-l*k;a[6]=n*g+h*k+l*f-v*d;a[7]=h*
g-l*d-v*f-n*k;return a};d.rotateByQuatAppend=function(a,b,c){var e=c[0],d=c[1],f=c[2];c=c[3];var k=b[0],g=b[1],h=b[2],m=b[3];a[0]=k*c+m*e+g*f-h*d;a[1]=g*c+m*d+h*e-k*f;a[2]=h*c+m*f+k*d-g*e;a[3]=m*c-k*e-g*d-h*f;k=b[4];g=b[5];h=b[6];m=b[7];a[4]=k*c+m*e+g*f-h*d;a[5]=g*c+m*d+h*e-k*f;a[6]=h*c+m*f+k*d-g*e;a[7]=m*c-k*e-g*d-h*f;return a};d.rotateByQuatPrepend=function(a,b,c){var e=b[0],d=b[1],f=b[2];b=b[3];var k=c[0],g=c[1],h=c[2],m=c[3];a[0]=e*m+b*k+d*h-f*g;a[1]=d*m+b*g+f*k-e*h;a[2]=f*m+b*h+e*g-d*k;a[3]=
b*m-e*k-d*g-f*h;k=c[4];g=c[5];h=c[6];m=c[7];a[4]=e*m+b*k+d*h-f*g;a[5]=d*m+b*g+f*k-e*h;a[6]=f*m+b*h+e*g-d*k;a[7]=b*m-e*k-d*g-f*h;return a};d.rotateAroundAxis=function(a,b,c,e){if(Math.abs(e)<l.EPSILON)return p(a,b);var d=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);e*=.5;var f=Math.sin(e),k=f*c[0]/d,g=f*c[1]/d;c=f*c[2]/d;e=Math.cos(e);var d=b[0],f=b[1],h=b[2],m=b[3];a[0]=d*e+m*k+f*c-h*g;a[1]=f*e+m*g+h*k-d*c;a[2]=h*e+m*c+d*g-f*k;a[3]=m*e-d*k-f*g-h*c;d=b[4];f=b[5];h=b[6];b=b[7];a[4]=d*e+b*k+f*c-h*g;a[5]=
f*e+b*g+h*k-d*c;a[6]=h*e+b*c+d*g-f*k;a[7]=b*e-d*k-f*g-h*c;return a};d.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];return a};d.multiply=b;d.mul=b;d.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;return a};d.dot=e.dot;d.lerp=function(a,b,c,e){var f=1-e;0>d.dot(b,c)&&(e=-e);a[0]=b[0]*f+c[0]*e;a[1]=b[1]*f+c[1]*e;a[2]=b[2]*f+c[2]*e;a[3]=
b[3]*f+c[3]*e;a[4]=b[4]*f+c[4]*e;a[5]=b[5]*f+c[5]*e;a[6]=b[6]*f+c[6]*e;a[7]=b[7]*f+c[7]*e;return a};d.invert=function(a,b){var c=d.squaredLength(b);a[0]=-b[0]/c;a[1]=-b[1]/c;a[2]=-b[2]/c;a[3]=b[3]/c;a[4]=-b[4]/c;a[5]=-b[5]/c;a[6]=-b[6]/c;a[7]=b[7]/c;return a};d.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];a[4]=-b[4];a[5]=-b[5];a[6]=-b[6];a[7]=b[7];return a};d.length=e.length;d.len=d.length;d.squaredLength=e.squaredLength;d.sqrLen=d.squaredLength;d.normalize=function(a,b){var c=
d.squaredLength(b);if(0<c){var c=Math.sqrt(c),e=b[0]/c,f=b[1]/c,k=b[2]/c,g=b[3]/c,h=b[4],m=b[5],q=b[6];b=b[7];var p=e*h+f*m+k*q+g*b;a[0]=e;a[1]=f;a[2]=k;a[3]=g;a[4]=(h-e*p)/c;a[5]=(m-f*p)/c;a[6]=(q-k*p)/c;a[7]=(b-g*p)/c}return a};d.str=function(a){return"quat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]};d.equals=function(a,
b){var c=a[0],e=a[1],d=a[2],f=a[3],k=a[4],g=a[5],h=a[6];a=a[7];var m=b[0],q=b[1],p=b[2],y=b[3],n=b[4],D=b[5],F=b[6];b=b[7];return Math.abs(c-m)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(e-q)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(q))&&Math.abs(d-p)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(p))&&Math.abs(f-y)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(k-n)<=l.EPSILON*Math.max(1,Math.abs(k),Math.abs(n))&&Math.abs(g-D)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(D))&&
Math.abs(h-F)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(a-b)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(h,d,n){function f(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function l(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function g(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a}function e(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)}function c(a,b){var c=b[0]-
a[0];a=b[1]-a[1];return c*c+a*a}function p(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function b(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};d.set=function(a,b,c){a[0]=b;a[1]=c;return a};d.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a};d.subtract=f;d.multiply=l;d.divide=g;d.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};d.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=
Math.floor(b[1]);return a};d.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};d.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};d.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};d.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};d.scaleAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;return a};d.distance=e;d.squaredDistance=c;d.length=p;d.squaredLength=b;d.negate=function(a,b){a[0]=-b[0];a[1]=
-b[1];return a};d.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};d.normalize=function(a,b){var c=b[0],e=b[1],c=c*c+e*e;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};d.lerp=function(a,b,c,e){var d=b[0];b=b[1];a[0]=d+e*(c[0]-d);a[1]=b+e*(c[1]-b);return a};d.random=function(a,b){b=b||1;var c=2*n.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};
d.transformMat2=function(a,b,c){var e=b[0];b=b[1];a[0]=c[0]*e+c[2]*b;a[1]=c[1]*e+c[3]*b;return a};d.transformMat2d=function(a,b,c){var e=b[0];b=b[1];a[0]=c[0]*e+c[2]*b+c[4];a[1]=c[1]*e+c[3]*b+c[5];return a};d.transformMat3=function(a,b,c){var e=b[0];b=b[1];a[0]=c[0]*e+c[3]*b+c[6];a[1]=c[1]*e+c[4]*b+c[7];return a};d.transformMat4=function(a,b,c){var e=b[0];b=b[1];a[0]=c[0]*e+c[4]*b+c[12];a[1]=c[1]*e+c[5]*b+c[13];return a};d.rotate=function(a,b,c,e){var d=b[0]-c[0];b=b[1]-c[1];var f=Math.sin(e);e=Math.cos(e);
a[0]=d*e-b*f+c[0];a[1]=d*f+b*e+c[1];return a};d.angle=function(a,b){var c=a[0];a=a[1];var e=b[0];b=b[1];var d=c*c+a*a;0<d&&(d=1/Math.sqrt(d));var f=e*e+b*b;0<f&&(f=1/Math.sqrt(f));c=(c*e+a*b)*d*f;return 1<c?0:-1>c?Math.PI:Math.acos(c)};d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};d.equals=function(a,b){var c=a[0];a=a[1];var e=b[0];b=b[1];return Math.abs(c-e)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(a-b)<=n.EPSILON*
Math.max(1,Math.abs(a),Math.abs(b))};d.len=p;d.sub=f;d.mul=l;d.div=g;d.dist=e;d.sqrDist=c;d.sqrLen=b})},"esri/geometry/support/MeshComponent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ./MeshMaterial ./MeshVertexAttributes".split(" "),function(h,d,n,f,l,g,e,c,p,b){var a=e.getLogger("esri.geometry.support.MeshComponent");return function(e){function d(a){a=
e.call(this)||this;a.faces=null;a.material=null;a.shading="source";return a}n(d,e);h=d;d.prototype.castFaces=function(c){return b.castArray(c,Uint32Array,[Uint16Array],{loggerTag:".faces\x3d",stride:3},a)};d.prototype.clone=function(){return new h({faces:g.clone(this.faces),shading:this.shading,material:g.clone(this.material)})};var h;f([c.property({json:{write:!0}})],d.prototype,"faces",void 0);f([c.cast("faces")],d.prototype,"castFaces",null);f([c.property({type:p.MeshMaterial,json:{write:!0}})],
d.prototype,"material",void 0);f([c.property({type:String,json:{write:!0}})],d.prototype,"shading",void 0);return d=h=f([c.subclass("esri.geometry.support.MeshComponent")],d)}(c.declared(l))})},"esri/geometry/support/MeshMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ImageMeshColor ./MeshColor ./ValueMeshColor".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){Object.defineProperty(d,"__esModule",{value:!0});var k={base:a.default,key:"type",defaultKeyValue:"value",typeMap:{value:m,image:b}};h=function(a){function d(b){b=a.call(this)||this;b.color=null;return b}n(d,a);g=d;d.prototype.castColor=function(a){return a?"string"===typeof a?q.test(a)||l.named[a]?new m({value:a}):new b({url:a}):Array.isArray(a)?new m({value:a}):a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof ImageData?new b({data:a}):
p.ensureOneOfType(k,a):a};d.prototype.readColor=function(a,c,e){if(a)switch(a.type){case "image":return new b(a);case "value":return new m(a)}};d.prototype.clone=function(){return new g({color:e.clone(this.color)})};var g;f([c.property({types:k,json:{write:!0}})],d.prototype,"color",void 0);f([c.cast("color")],d.prototype,"castColor",null);f([c.reader("color")],d.prototype,"readColor",null);return d=g=f([c.subclass("esri.geometry.support.MeshResources")],d)}(c.declared(g));d.MeshMaterial=h;var q=
/^\s*(#|rgba?\()/;d.default=h})},"esri/geometry/support/ImageMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/compilerUtils ../../core/Identifiable ../../core/urlUtils ../../core/accessorSupport/decorators ./MeshColor ../../views/support/screenshotUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b){return function(a){function d(b){b=a.call(this)||this;b.type="image";return b}n(d,a);g=d;Object.defineProperty(d.prototype,
"url",{get:function(){return this._get("url")||null},set:function(a){this._set("url",a);a&&this._set("data",null)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"data",{get:function(){return this._get("data")||null},set:function(a){this._set("data",a);a&&this._set("url",null)},enumerable:!0,configurable:!0});d.prototype.writeData=function(a,b,c,d){a instanceof HTMLImageElement?a={type:"image-element",src:e.toJSON(a.src,d)}:a instanceof HTMLCanvasElement?(a=a.getContext("2d").getImageData(0,
0,a.width,a.height),a={type:"canvas-element",imageData:this.encodeImageData(a)}):a={type:"image-data",imageData:this.encodeImageData(a)};b[c]=a};d.prototype.readData=function(a,b){switch(a.type){case "image-element":return b=new Image,b.src=a.src,b;case "canvas-element":return a=this.decodeImageData(a.imageData),b=document.createElement("canvas"),b.width=a.width,b.height=a.height,b.getContext("2d").putImageData(a,0,0),b;case "image-data":return this.decodeImageData(a.imageData);default:l.neverReached(a)}};
Object.defineProperty(d.prototype,"transparent",{get:function(){var a=this.data;return a instanceof HTMLCanvasElement?this.imageDataContainsTransparent(a.getContext("2d").getImageData(0,0,a.width,a.height)):a instanceof ImageData?this.imageDataContainsTransparent(a):!1},set:function(a){null!=a?this._override("transparent",a):this._clearOverride("transparent")},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new g({url:this.url,data:this.data})};d.prototype.encodeImageData=function(a){for(var b=
"",c=0;c<a.data.length;c++)b+=String.fromCharCode(a.data[c]);return{data:btoa(b),width:a.width,height:a.height}};d.prototype.decodeImageData=function(a){for(var c=atob(a.data),e=new Uint8ClampedArray(c.length),d=0;d<c.length;d++)e[d]=c.charCodeAt(d);return b.wrapImageData(e,a.width,a.height)};d.prototype.imageDataContainsTransparent=function(a){for(var b=3;b<a.data.length;b+=4)if(255!==a.data[b])return!0;return!1};var g;f([c.property()],d.prototype,"type",void 0);f([c.property({type:String,json:{write:e.write}})],
d.prototype,"url",null);f([c.property({json:{write:{overridePolicy:function(){return{enabled:!this.url}}}}}),c.property()],d.prototype,"data",null);f([c.writer("data")],d.prototype,"writeData",null);f([c.reader("data")],d.prototype,"readData",null);f([c.property({type:Boolean,dependsOn:["data"],json:{write:{overridePolicy:function(){return{enabled:this._isOverridden("transparent")}}}}})],d.prototype,"transparent",null);return d=g=f([c.subclass("esri.geometry.support.ImageMeshColor")],d)}(c.declared(p.default,
g.Identifiable))})},"esri/geometry/support/MeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){Object.defineProperty(d,"__esModule",{value:!0});h=function(e){function c(c){return e.call(this)||this}n(c,e);c.prototype.clone=function(){throw Error("not implemented");};f([g.property({readOnly:!0,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0,
enabled:!0}}})],c.prototype,"type",void 0);return c=f([g.subclass("esri.geometry.support.MeshColor")],c)}(g.declared(l));d.MeshColor=h;d.default=h})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils"],function(h,d,n,f){function l(a,b){var e=a||{},d=e.format,g=e.quality,h=e.rotation,e=e.disableSlice,p=b.padding||q,l;l=b.width-p.left-p.right;b=b.height-p.top-p.bottom;var v=0,p=0,u=l,y=b;if(a&&a.area){var v=Math.floor(a.area.x)||
0,p=Math.floor(a.area.y)||0,n=null!=a.area.width?Math.floor(a.area.width):null,D=null!=a.area.height?Math.floor(a.area.height):null,u=u-v,y=y-p;null!=n&&null!=D?(u=Math.min(u,n),y=Math.min(y,D)):null==n&&null!=D?(n=Math.min(u,n),y*=n/u,u=n):null!=n&&null==D&&(n=Math.min(y,D),u*=n/y,y=n)}a&&null!=a.width&&null!=a.height&&(n=a.width/a.height,D=u/y,D!==n&&(D<n?u=Math.floor(y*n):y=Math.floor(u/n)));v=Math.floor(Math.max(v,0));p=Math.floor(Math.max(p,0));l={x:v,y:p,width:Math.floor(Math.min(u,l-v)),height:Math.floor(Math.min(y,
b-p))};b=l.width/l.height;p=u/y;p!==b&&(p>b?(b=Math.floor(l.width/p),l={x:l.x,y:Math.floor(l.y+(l.height-b)/2),width:l.width,height:b}):(b=Math.floor(l.height*p),l={x:Math.floor(l.x+(l.width-b)/2),y:l.y,width:b,height:l.height}));b=c(a,l);a=b.width;b=b.height;a:switch(d){case "png":case "jpg":case "jpeg":break a;case null:case void 0:d=m;break a;default:f.neverReached(d),d=m}p=k[d];g=null!=g?g:p;return{format:d,quality:0>g?0:100<g?100:g,area:l,width:a,height:b,rotation:h,disableSlice:e||!1}}function g(b,
c){return b.toDataURL(a[c.format],c.quality/100)}function e(a,b,c){c||(p||(p=document.createElement("canvas"),p.width=1,p.height=1),c=p);return c.getContext("2d").createImageData(a,b)}function c(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}Object.defineProperty(d,"__esModule",{value:!0});
d.completeUserSettings=l;d.toRenderSettings=function(a,b){var c=l(a,b),e=c.area,d=c.width/e.width,f=b.padding,g=f.left+f.right,k=f.top+f.bottom;return{framebufferWidth:Math.floor((b.width-g)*d+g),framebufferHeight:Math.floor((b.height-k)*d+k),region:{x:Math.floor(e.x*d)+f.left,y:Math.floor(e.y*d)+f.top,width:c.width,height:c.height},format:c.format,quality:c.quality,rotation:c.rotation,pixelRatio:d,layers:a&&a.layers?a.layers:[],disableSlice:c.disableSlice}};d.encodeResult=function(a,b,c,e){if(e.premultipliedAlpha)for(var d=
a.data,f=d.length,k=0;k<f;k+=4){var h=d[k+3];0<h&&(h/=255,d[k+0]/=h,d[k+1]/=h,d[k+2]/=h)}c.width=a.width;c.height=a.height;d=c.getContext("2d");d.putImageData(a,0,0);e.flipY&&(d.save(),d.globalCompositeOperation="copy",d.scale(1,-1),d.translate(0,-d.canvas.height),d.drawImage(d.canvas,0,0),d.restore());a=d.getImageData(0,0,a.width,a.height);b=g(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};d.toDataUrl=g;d.createEmptyImageData=function(a,c,d){if(!a||!c)throw Error("Cannot construct image data without dimensions");
if(b)try{return new ImageData(a,c)}catch(r){b=!1}return e(a,c,d)};d.wrapImageData=function(a,c,d,f){if(!c||!d)throw Error("Cannot construct image data without dimensions");if(b)try{return new ImageData(a,c,d)}catch(w){b=!1}c=e(c,d,f);c.data.set(a,0);return c};d.resampleHermite=function(a,b,c,e,d,f,g,k){void 0===e&&(e=0);void 0===d&&(d=0);void 0===f&&(f=a.width-e);void 0===g&&(g=a.height-d);void 0===k&&(k=!1);var h=a.data,m=b.width,p=b.height,q=b.data;f/=m;g/=p;var l=Math.ceil(f/2),v=Math.ceil(g/2);
a=a.width;for(var r=0;r<p;r++)for(var t=0;t<m;t++){for(var n=4*(t+(k?p-r-1:r)*m),u=0,w=0,A=0,z=0,B=0,J=0,R=(r+.5)*g,H=Math.floor(r*g);H<(r+1)*g;H++)for(var W=Math.abs(R-(H+.5))/v,aa=(t+.5)*f,W=W*W,ia=Math.floor(t*f);ia<(t+1)*f;ia++){var V=Math.abs(aa-(ia+.5))/l,V=Math.sqrt(W+V*V);if(!(1<=V)){var V=2*V*V*V-3*V*V+1,Z=4*(e+ia+(d+H)*a),J=J+V*h[Z+3],w=w+V;!c&&255>h[Z+3]&&(V=V*h[Z+3]/255);A+=V*h[Z];z+=V*h[Z+1];B+=V*h[Z+2];u+=V}}q[n]=A/u;q[n+1]=z/u;q[n+2]=B/u;q[n+3]=J/w}return b};d.screenshotSuperSampleSettings=
function(a,b){if(!b)return a;b=a.framebufferWidth;var c=a.framebufferHeight,e=a.region,d=Math.min(8,2048/Math.max(b,c));return 1.5>d?a:n({},a,{framebufferWidth:Math.round(b*d),framebufferHeight:Math.round(c*d),pixelRatio:a.pixelRatio*d,resample:{region:{x:Math.round(e.x*d),y:Math.round(e.y*d),width:Math.round(e.width*d),height:Math.round(e.height*d)},width:b,height:c}})};var p=null,b=!0,a={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},m="jpg",k={png:100,jpg:98,jpeg:98},q={top:0,right:0,bottom:0,
left:0}})},"esri/geometry/support/ValueMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/accessorSupport/decorators ./MeshColor".split(" "),function(h,d,n,f,l,g,e,c){return function(c){function b(a){a=c.call(this)||this;a.type="value";a.value=null;return a}n(b,c);a=b;b.prototype.clone=function(){return new a({value:g.clone(this.value)})};var a;f([e.property()],b.prototype,"type",void 0);
f([e.property({type:l})],b.prototype,"value",void 0);return b=a=f([e.subclass("esri.geometry.support.ValueMeshColor")],b)}(e.declared(c.default))})},"esri/geometry/support/MeshVertexAttributes":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e,c){function p(a,b,c,e){var d=b.loggerTag;b=b.stride;return 0!==a.length%
b?(e.error(d,"Invalid array length, expected a multiple of "+b),new c([])):a}function b(a,b,c,e,d){if(!a)return a;if(a instanceof b)return p(a,e,b,d);for(var f=0;f<c.length;f++)if(a instanceof c[f])return p(new b(a),e,b,d);if(Array.isArray(a))return p(new b(a),e,b,d);c=c.map(function(a){return"'"+a.name+"'"});d.error("Failed to set property, expected one of "+c+", but got "+a.constructor.name);return new b([])}function a(a,b,c){for(var e=Array(a.length),d=0;d<a.length;d++)e[d]=a[d];b[c]=e}Object.defineProperty(d,
"__esModule",{value:!0});var m=e.getLogger("esri.geometry.support.MeshVertexAttributes");h=function(e){function d(a){a=e.call(this)||this;a.color=null;a.position=new Float64Array(0);a.uv=null;a.normal=null;return a}n(d,e);k=d;d.prototype.castColor=function(a){return b(a,Uint8Array,[Uint8ClampedArray],{loggerTag:".color\x3d",stride:4},m)};d.prototype.castPosition=function(a){a&&a instanceof Float32Array&&m.warn(".position\x3d","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");
return b(a,Float64Array,[Float32Array],{loggerTag:".position\x3d",stride:3},m)};d.prototype.castUv=function(a){return b(a,Float32Array,[Float64Array],{loggerTag:".uv\x3d",stride:2},m)};d.prototype.castNormal=function(a){return b(a,Float32Array,[Float64Array],{loggerTag:".normal\x3d",stride:3},m)};d.prototype.clone=function(){return new k({position:g.clone(this.position),uv:g.clone(this.uv),normal:g.clone(this.normal)})};var k;f([c.property({json:{write:a}})],d.prototype,"color",void 0);f([c.cast("color")],
d.prototype,"castColor",null);f([c.property({nonNullable:!0,json:{write:a}})],d.prototype,"position",void 0);f([c.cast("position")],d.prototype,"castPosition",null);f([c.property({json:{write:a}})],d.prototype,"uv",void 0);f([c.cast("uv")],d.prototype,"castUv",null);f([c.property({json:{write:a}})],d.prototype,"normal",void 0);f([c.cast("normal")],d.prototype,"castNormal",null);return d=k=f([c.subclass("esri.geometry.support.MeshVertexAttributes")],d)}(c.declared(l));d.MeshVertexAttributes=h;d.castArray=
b;d.default=h})},"esri/geometry/support/triangulationUtils":function(){define(["require","exports","../../core/libs/earcut/earcut","./coordsUtils"],function(h,d,n,f){function l(c,e,b){if(1===c.length)return c[0];e=new Float64Array(e);b=new Uint32Array(b);for(var a=0,d=0,f=0;f<c.length;f++){for(var g=c[f],h=0;h<g.position.length;h++)e[a++]=g.position[h];for(h=0;h<g.faces.length;h++)b[d++]=g.faces[h]}return{position:e,faces:b}}function g(c,d){for(var b=c.length,a=Array(b),g=Array(b),k=Array(b),h=0,
p=0,l=0,t=0,r=0;r<b;++r)t+=c[r].length;for(var t=new Float64Array(3*t),n=0,z=b-1;0<=z;z--){var B=c[z];if(f.isClockwise(B,!1,!1)||1===b){for(var A=B.length,r=0;r<h;++r)A+=a[r].length;r={index:n,pathLengths:Array(h+1),count:A,holeIndices:Array(h)};r.pathLengths[0]=B.length;0<B.length&&(k[l++]={index:n,count:B.length});n=e(B,0,t,n,B.length,d);for(B=0;B<h;++B)A=a[B],r.holeIndices[B]=n,r.pathLengths[B+1]=A.length,0<A.length&&(k[l++]={index:n,count:A.length}),n=e(A,0,t,n,A.length,d);h=0;0<r.count&&(g[p++]=
r)}else a[h++]=B}for(B=0;B<h;++B)A=a[B],0<A.length&&(k[l++]={index:n,count:A.length}),n=e(A,0,t,n,A.length,d);p<b&&(g.length=p);l<b&&(k.length=l);return{position:t,polygons:g,outlines:k}}function e(c,e,b,a,d,f){a*=3;for(var g=0;g<d;++g){var k=c[e++];b[a++]=k[0];b[a++]=k[1];b[a++]=f?k[2]:0}return a/3}Object.defineProperty(d,"__esModule",{value:!0});d.triangulate=function(c){var e=g(c.rings,c.hasZ),b=[],a=0,d=0;c=function(c){var f=c.index,g=new Float64Array(e.position.buffer,3*f*e.position.BYTES_PER_ELEMENT,
3*c.count);c=c.holeIndices.map(function(a){return a-f});c=new Uint32Array(n(g,c,3));b.push({position:g,faces:c});a+=g.length;d+=c.length};for(var f=0,h=e.polygons;f<h.length;f++)c(h[f]);return l(b,a,d)};d.pathsToTriangulationInfo=g})},"esri/core/libs/earcut/earcut":function(){define([],function(){function h(a,b,c){c=c||2;z=a.length/c+(b?2*b.length:0);B=!1;var k=b&&b.length,h=k?b[0]*c:a.length,m=d(a,0,h,c,!0),q=[];if(!m)return q;var l,x,r,t;if(k)a:{var u=c,k=[],C,w,A;t=0;for(C=b.length;t<C;t++)w=b[t]*
u,A=t<C-1?b[t+1]*u:a.length,w=d(a,w,A,u,!1),w===w.next&&(w.steiner=!0),k.push(p(w));k.sort(g);for(t=0;t<k.length;t++){if(!m){m=null;break a}b=k[t];u=m;if(u=e(b,u))b=v(u,b),n(b,b.next);m=n(m,m.next)}}if(B)return q;if(a.length>80*c){l=r=a[0];x=k=a[1];for(u=c;u<h;u+=c)t=a[u],b=a[u+1],t<l&&(l=t),b<x&&(x=b),t>r&&(r=t),b>k&&(k=b);r=Math.max(r-l,k-x)}f(m,q,c,l,x,r);return q}function d(a,b,c,e,d){var f;if(d===0<w(a,b,c,e))for(d=b;d<c;d+=e)f=u(d,a[d],a[d+1],f);else for(d=c-e;d>=b;d-=e)f=u(d,a[d],a[d+1],f);
f&&m(f,f.next)&&(t(f),f=f.next);return f}function n(b,c){if(!b)return b;c||(c=b);var e,d=0,f=z*z/2;do{e=!1;if(b.steiner||!m(b,b.next)&&0!==a(b.prev,b,b.next))b=b.next;else{t(b);b=c=b.prev;if(b===b.next)return null;e=!0}if(d++>f)return B=!0,null}while(e||b!==c);return c}function f(e,d,g,h,p,r,u){if(e){if(!u&&r){var x=e,y=x;do null===y.z&&(y.z=c(y.x,y.y,h,p,r)),y.prevZ=y.prev,y=y.nextZ=y.next;while(y!==x);y.prevZ.nextZ=null;y.prevZ=null;var x=y,C,w,z,A,E,D,F=1;do{y=x;z=x=null;for(A=0;y;){A++;w=y;for(C=
E=0;C<F&&(E++,w=w.nextZ,w);C++);for(D=F;0<E||0<D&&w;)0===E?(C=w,w=w.nextZ,D--):0!==D&&w?y.z<=w.z?(C=y,y=y.nextZ,E--):(C=w,w=w.nextZ,D--):(C=y,y=y.nextZ,E--),z?z.nextZ=C:x=C,C.prevZ=z,z=C;y=w}z.nextZ=null;F*=2}while(1<A)}for(x=e;e.prev!==e.next;){y=e.prev;w=e.next;if(r)a:{z=e;D=h;var R=p,H=r;A=z.prev;E=z;F=z.next;if(0<=a(A,E,F))z=!1;else{var W=A.x>E.x?A.x>F.x?A.x:F.x:E.x>F.x?E.x:F.x,aa=A.y>E.y?A.y>F.y?A.y:F.y:E.y>F.y?E.y:F.y;C=c(A.x<E.x?A.x<F.x?A.x:F.x:E.x<F.x?E.x:F.x,A.y<E.y?A.y<F.y?A.y:F.y:E.y<F.y?
E.y:F.y,D,R,H);D=c(W,aa,D,R,H);for(R=z.nextZ;R&&R.z<=D;){if(R!==z.prev&&R!==z.next&&b(A.x,A.y,E.x,E.y,F.x,F.y,R.x,R.y)&&0<=a(R.prev,R,R.next)){z=!1;break a}R=R.nextZ}for(R=z.prevZ;R&&R.z>=C;){if(R!==z.prev&&R!==z.next&&b(A.x,A.y,E.x,E.y,F.x,F.y,R.x,R.y)&&0<=a(R.prev,R,R.next)){z=!1;break a}R=R.prevZ}z=!0}}else z=l(e);if(z)d.push(y.i/g),d.push(e.i/g),d.push(w.i/g),t(e),x=e=w.next;else{if(B)break;e=w;if(e===x){if(!u)f(n(e),d,g,h,p,r,1);else if(1===u){u=d;x=g;y=e;do w=y.prev,z=y.next.next,!m(w,z)&&k(w,
y,y.next,z)&&q(w,z)&&q(z,w)&&(u.push(w.i/x),u.push(y.i/x),u.push(z.i/x),t(y),t(y.next),y=e=z),y=y.next;while(y!==e);e=y;f(e,d,g,h,p,r,2)}else if(2===u)a:{u=e;do{for(x=u.next.next;x!==u.prev;){if(y=u.i!==x.i){y=u;w=x;z=void 0;if(z=y.next.i!==w.i&&y.prev.i!==w.i){z=void 0;b:{z=y;do{if(z.i!==y.i&&z.next.i!==y.i&&z.i!==w.i&&z.next.i!==w.i&&k(z,z.next,y,w)){z=!0;break b}z=z.next}while(z!==y);z=!1}z=!z}A=void 0;if(A=z&&q(y,w)&&q(w,y)){z=y;A=!1;E=(y.x+w.x)/2;w=(y.y+w.y)/2;do z.y>w!==z.next.y>w&&E<(z.next.x-
z.x)*(w-z.y)/(z.next.y-z.y)+z.x&&(A=!A),z=z.next;while(z!==y)}y=A}if(y){e=v(u,x);u=n(u,u.next);e=n(e,e.next);f(u,d,g,h,p,r);f(e,d,g,h,p,r);break a}x=x.next}u=u.next}while(u!==e)}break}}}}}function l(c){var e=c.prev,d=c.next;if(0<=a(e,c,d))return!1;for(var f=c.next.next,g=0;f!==c.prev;){if(b(e.x,e.y,c.x,c.y,d.x,d.y,f.x,f.y)&&0<=a(f.prev,f,f.next))return!1;f=f.next;if(g++>z)return B=!0,!1}return!0}function g(a,b){return a.x-b.x}function e(a,c){var e=c,d=a.x,f=a.y,g=-Infinity,k;do{if(!e)return null;
if(f<=e.y&&f>=e.next.y){var h=e.x+(f-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(h<=d&&h>g){g=h;if(h===d){if(f===e.y)return e;if(f===e.next.y)return e.next}k=e.x<e.next.x?e:e.next}}e=e.next}while(e!==c);if(!k)return null;if(d===g)return k.prev;c=k;for(var h=k.x,m=k.y,p=Infinity,l,e=k.next;e!==c;)d>=e.x&&e.x>=h&&b(f<m?d:g,f,h,m,f<m?g:d,f,e.x,e.y)&&(l=Math.abs(f-e.y)/(d-e.x),(l<p||l===p&&e.x>k.x)&&q(e,a)&&(k=e,p=l)),e=e.next;return k}function c(a,b,c,e,d){a=32767*(a-c)/d;b=32767*(b-e)/d;a=(a|a<<8)&16711935;
a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function p(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function b(a,b,c,e,d,f,g,k){return 0<=(d-g)*(b-k)-(a-g)*(f-k)&&0<=(a-g)*(e-k)-(c-g)*(b-k)&&0<=(c-g)*(f-k)-(d-g)*(e-k)}function a(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function m(a,b){return a.x===b.x&&a.y===b.y}function k(b,c,e,d){return m(b,c)&&m(e,d)||m(b,
d)&&m(e,c)?!0:0<a(b,c,e)!==0<a(b,c,d)&&0<a(e,d,b)!==0<a(e,d,c)}function q(b,c){return 0>a(b.prev,b,b.next)?0<=a(b,c,b.next)&&0<=a(b,b.prev,c):0>a(b,c,b.prev)||0>a(b,b.next,c)}function v(a,b){var c=new r(a.i,a.x,a.y),e=new r(b.i,b.x,b.y),d=a.next,f=b.prev;a.next=b;b.prev=a;c.next=d;d.prev=c;e.next=c;c.prev=e;f.next=e;e.prev=f;return e}function u(a,b,c,e){a=new r(a,b,c);e?(a.next=e.next,a.prev=e,e.next.prev=a,e.next=a):(a.prev=a,a.next=a);return a}function t(a){a.next.prev=a.prev;a.prev.next=a.next;
a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function r(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function w(a,b,c,e){for(var d=0,f=c-e;b<c;b+=e)d+=(a[f]-a[b])*(a[b+1]+a[f+1]),f=b;return d}var z,B;h.deviation=function(a,b,c,e){var d=b&&b.length,f=Math.abs(w(a,0,d?b[0]*c:a.length,c));if(d)for(var d=0,g=b.length;d<g;d++)f-=Math.abs(w(a,b[d]*c,d<g-1?b[d+1]*c:a.length,c));for(d=b=0;d<e.length;d+=3){var g=e[d]*c,k=e[d+1]*
c,h=e[d+2]*c;b+=Math.abs((a[g]-a[h])*(a[k+1]-a[g+1])-(a[g]-a[k])*(a[h+1]-a[g+1]))}return 0===f&&0===b?0:Math.abs((b-f)/f)};h.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},e=0,d=0;d<a.length;d++){for(var f=0;f<a[d].length;f++)for(var g=0;g<b;g++)c.vertices.push(a[d][f][g]);0<d&&(e+=a[d-1].length,c.holes.push(e))}return c};return h})},"esri/geometry/support/coordsUtils":function(){define(["require","exports"],function(h,d){function n(d,f){var e=f[0]-d[0],c=f[1]-
d[1];return 2<d.length&&2<f.length?(d=d[2]-f[2],Math.sqrt(e*e+c*c+d*d)):Math.sqrt(e*e+c*c)}function f(d,f,e){var c=d[0]+e*(f[0]-d[0]),g=d[1]+e*(f[1]-d[1]);return 2<d.length&&2<f.length?[c,g,d[2]+e*(f[2]-d[2])]:[c,g]}Object.defineProperty(d,"__esModule",{value:!0});d.geometryToCoordinates=function(d){if(!d)return null;if(Array.isArray(d))return d;var f=d.hasZ,e=d.hasM;if("point"===d.type)return e&&f?[d.x,d.y,d.z,d.m]:f?[d.x,d.y,d.z]:e?[d.x,d.y,d.m]:[d.x,d.y];if("polygon"===d.type)return d.rings.slice(0);
if("polyline"===d.type)return d.paths.slice(0);if("multipoint"===d.type)return d.points.slice(0);if("extent"===d.type){d=d.clone().normalize();if(!d)return null;var c=!1,h=!1;d.forEach(function(b){b.hasZ&&(c=!0);b.hasM&&(h=!0)});return d.map(function(b){var a=[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]];if(c&&b.hasZ)for(var e=.5*(b.zmax-b.zmin),d=0;d<a.length;d++)a[d].push(e);if(h&&b.hasM)for(b=.5*(b.mmax-b.mmin),d=0;d<a.length;d++)a[d].push(b);return a})}return null};
d.getLength=n;d.getMidpoint=function(d,g){return f(d,g,.5)};d.getPathLength=function(d){for(var f=d.length,e=0,c=0;c<f-1;++c)e+=n(d[c],d[c+1]);return e};d.getPointOnPath=function(d,g){if(0>=g)return d[0];for(var e=d.length,c=0,h=0;h<e-1;++h){var b=n(d[h],d[h+1]);if(g-c<b)return f(d[h],d[h+1],(g-c)/b);c+=b}return d[e-1]};d.isClockwise=function(d,f,e){for(var c=d.length,g=0,b=0,a=0,h=0;h<c;h++){var k=d[h],q=d[(h+1)%c],l=2,g=g+(k[0]*q[1]-q[0]*k[1]);2<k.length&&2<q.length&&e&&(b+=k[0]*q[2]-q[0]*k[2],
l=3);k.length>l&&q.length>l&&f&&(a+=k[0]*q[l]-q[0]*k[l])}return 0>=g&&0>=b&&0>=a}})},"esri/geometry/support/meshUtils/centerAt":function(){define("require exports ../../../core/Logger ../../../core/libs/gl-matrix-2/gl-matrix ./projection ../../../views/3d/support/projectionUtils".split(" "),function(h,d,n,f,l,g){Object.defineProperty(d,"__esModule",{value:!0});var e=n.getLogger("esri.geometry.support.meshUtils.centerAt");d.centerAt=function(d,k,h){if(d.vertexAttributes&&d.vertexAttributes.position){var m=
d.spatialReference,q=h&&h.origin||d.extent.center;if(m.isWGS84||m.isWebMercator&&(!h||!1!==h.geographic)){h=d.spatialReference;var m=p,t=c;if(g.pointToVector(k,t,g.SphericalECEFSpatialReference)){g.pointToVector(q,m,g.SphericalECEFSpatialReference)||g.pointToVector(d.extent.center,m,g.SphericalECEFSpatialReference);q=d.vertexAttributes.position;k=d.vertexAttributes.normal;var r=new Float64Array(q.length),n=new Float32Array(k?k.length:0);l.projectToECEF(q,h,r);k&&l.projectNormalToECEF(k,q,r,h,n);g.computeLinearTransformation(g.SphericalECEFSpatialReference,
m,b,g.SphericalECEFSpatialReference);g.computeLinearTransformation(g.SphericalECEFSpatialReference,t,a,g.SphericalECEFSpatialReference);f.mat4.invert(b,b);f.mat4.multiply(a,a,b);l.transformBufferInPlace(r,a);f.mat4.invert(a,a);f.mat4.transpose(a,a);k&&l.transformBufferInPlace(n,a,!0);l.projectFromECEF(r,q,h);k&&l.projectNormalFromECEF(n,q,r,h,k);d.clearCache()}else e.error("Failed to project centerAt location (wkid:"+k.spatialReference.wkid+") to ECEF")}else if(h=p,m=c,g.pointToVector(k,m,d.spatialReference)){g.pointToVector(q,
h,d.spatialReference)||(k=d.extent.center,h[0]=k.x,h[1]=k.y,h[2]=k.z,e.error("Failed to project specified origin (wkid:"+q.spatialReference.wkid+") to mesh spatial reference (wkid:"+d.spatialReference.wkid+"). Using mesh extent.center instead"));if(q=d.vertexAttributes.position)for(k=0;k<q.length;k+=3)for(t=0;3>t;t++)q[k+t]+=m[t]-h[t];d.clearCache()}else e.error("Failed to project centerAt location (wkid:"+k.spatialReference.wkid+") to mesh spatial reference (wkid:"+d.spatialReference.wkid+")")}};
var c=f.vec3f64.create(),p=f.vec3f64.create(),b=f.mat4f64.create(),a=f.mat4f64.create()})},"esri/geometry/support/meshUtils/projection":function(){define(["require","exports","../../../core/Logger","../../../core/libs/gl-matrix-2/gl-matrix","../../../views/3d/support/projectionUtils"],function(h,d,n,f,l){function g(e,d,g,h,n,t){if(d){n=n.isWGS84;for(var k=0;k<d.length;k+=3){for(var m=0;3>m;m++)c[m]=h[k+m],p[m]=d[k+m];l.computeLinearTransformation(l.SphericalECEFSpatialReference,c,b,l.SphericalECEFSpatialReference);
f.mat3.fromMat4(a,b);n?f.vec3.transformMat3(p,p,a):(m=l.webMercator.y2lat(g[k+1]),m=Math.cos(m),0===e&&(m=1/m),a[0]*=m,a[1]*=m,a[2]*=m,a[3]*=m,a[4]*=m,a[5]*=m,1===e&&f.mat3.transpose(a,a),f.vec3.transformMat3(p,p,a),f.vec3.normalize(p,p));for(m=0;3>m;m++)t[k+m]=p[m]}return t}}Object.defineProperty(d,"__esModule",{value:!0});var e=n.getLogger("esri.geometry.support.meshUtils.normalProjection");d.projectNormalToECEF=function(a,b,c,d,f){return d.isWebMercator||d.isWGS84?g(0,a,b,c,d,f):(e.error("Cannot convert PCS spatial reference buffer to ECEF"),
f)};d.projectNormalFromECEF=function(a,b,c,d,f){return d.isWebMercator||d.isWGS84?g(1,a,b,c,d,f):(e.error("Cannot convert to PCS spatial reference buffer from ECEF"),f)};d.projectToECEF=function(a,b,c){l.bufferToBuffer(a,b,0,c,l.SphericalECEFSpatialReference,0,a.length/3);return c};d.projectFromECEF=function(a,b,c){l.bufferToBuffer(a,l.SphericalECEFSpatialReference,0,b,c,0,a.length/3);return b};d.transformBufferInPlace=function(a,b,e){void 0===e&&(e=!1);if(a)for(var d=0;d<a.length;d+=3){for(var g=
0;3>g;g++)c[g]=a[d+g];f.vec3.transformMat4(c,c,b);e&&f.vec3.normalize(c,c);for(g=0;3>g;g++)a[d+g]=c[g]}};var c=f.vec3f64.create(),p=f.vec3f64.create(),b=f.mat4f64.create(),a=f.mat3f64.create()})},"esri/views/3d/support/projectionUtils":function(){define("require exports ../../../core/libs/gl-matrix-2/gl-matrix ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ./earthUtils ./mathUtils ../webgl-engine/lib/BufferVectorMath".split(" "),function(h,d,n,
f,l,g,e,c,p){function b(b,c,e,d){2===b.length?(D[0]=b[0],D[1]=b[1],D[2]=0,b=D):b===e&&(n.vec3.copy(D,b),b=D);return a(b,c,0,e,d,0,1)}function a(a,b,c,e,d,f,g){void 0===g&&(g=1);t!==b&&(r=m(b),t=b);w!==d&&(z=m(d),w=d);g=c+3*g;if(r!==z||r===u.UNKNOWN&&!b.equals(d))if(r>u.UNKNOWN&&z>u.UNKNOWN)if(z!==u.WGS84)if(b=B[z],r!==u.WGS84)for(d=A[r];c<g;c+=3,f+=3)d(a,c,F,0),b(F,0,e,f);else for(;c<g;c+=3,f+=3)b(a,c,e,f);else for(d=A[r];c<g;c+=3,f+=3)d(a,c,e,f);else return!1;else if(e!==a||c!==f)for(;c<g;c++,f++)e[f]=
a[c];return!0}function m(a){return a.wkt===d.SphericalECEFSpatialReference.wkt?u.SPHERICAL_ECEF:a.isWGS84?u.WGS84:a.isWebMercator?u.WEBMERC:a.wkt===d.WGS84ECEFSpatialReference.wkt?u.WGS84_ECEF:u.UNKNOWN}function k(a,b,c,e){c[e++]=a[b++];c[e++]=a[b++];c[e]=a[b]}function q(a,b,e,d){var f=.4999999*Math.PI,f=c.clamp(x*a[b+1],-f,f),f=Math.sin(f);e[d++]=x*a[b]*y;e[d++]=y/2*Math.log((1+f)/(1-f));e[d]=a[b+2]}function v(a,b,c,e){var d=y+a[b+2],f=x*a[b+1];a=x*a[b];b=Math.cos(f);c[e++]=Math.cos(a)*b*d;c[e++]=
Math.sin(a)*b*d;c[e]=Math.sin(f)*d}Object.defineProperty(d,"__esModule",{value:!0});d.SphericalECEFSpatialReference=new l({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",\' + earthUtils.earthRadius + \',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'});d.WGS84ECEFSpatialReference=new l({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'});
var u;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";a[a.WGS84=2]="WGS84";a[a.WEBMERC=3]="WEBMERC";a[a.WGS84_ECEF=4]="WGS84_ECEF"})(u||(u={}));var t,r,w,z;d.vectorToVector=b;d.pointToVector=function(b,c,e){D[0]=b.x;D[1]=b.y;var d=b.z;D[2]=void 0!==d?d:0;return a(D,b.spatialReference,0,c,e,0,1)};d.vectorToPoint=function(b,c,e,d){"esri.geometry.SpatialReference"===e.declaredClass?(d=e,e=new f({spatialReference:d})):d=d||e.spatialReference;return a(b,c,0,D,d,0,1)?(e.x=D[0],
e.y=D[1],e.z=D[2],e.spatialReference=d,e):null};d.xyzToVector=function(b,c,e,d,f,g){D[0]=b;D[1]=c;D[2]=e;return a(D,d,0,f,g,0,1)};d.bufferToBuffer=a;d.computeLinearTransformation=function(a,b,c,e){var d=m(a),f=m(e);if(d===f&&f!==u.SPHERICAL_ECEF&&(d!==u.UNKNOWN||a.equals(e)))return n.mat4.identity(c),n.mat4.translate(c,c,b),!0;if(f===u.SPHERICAL_ECEF){if(a=A[d])return a(b,0,F,0),v(F,0,L,0),e=x*F[0],a=x*F[1],b=Math.sin(e),e=Math.cos(e),d=Math.sin(a),a=Math.cos(a),c[0]=-b,c[4]=-d*e,c[8]=a*e,c[12]=L[0],
c[1]=e,c[5]=-d*b,c[9]=a*b,c[13]=L[1],c[2]=0,c[6]=a,c[10]=d,c[14]=L[2],c[3]=0,c[7]=0,c[11]=0,c[15]=1,!0}else if(f===u.WEBMERC&&(d===u.WGS84||d===u.SPHERICAL_ECEF))return A[d](b,0,F,0),b=x*F[1],q(F,0,L,0),n.mat4.identity(c),n.mat4.translate(c,c,L),b=1/Math.cos(b),n.mat4.scale(c,c,[b,b,1]),!0;return!1};d.transformDirection=function(a,c,e,d,f){n.vec3.copy(P,a);n.vec3.add(M,a,c);b(P,e,P,f);b(M,e,M,f);n.vec3.subtract(d,M,P);n.vec3.normalize(d,d)};d.mbsToMbs=function(a,b,c,e){var d=m(b),f=m(e);if(d===f&&
(d!==u.UNKNOWN||b.equals(e)))return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],!0;if(f===u.SPHERICAL_ECEF){if(b=A[d])return b(a,0,F,0),v(F,0,c,0),c[3]=a[3],!0}else if(f===u.WEBMERC&&(d===u.WGS84||d===u.SPHERICAL_ECEF))return A[d](a,0,F,0),b=Math.abs(x*F[1])+Math.asin(a[3]/(y+a[2])),q(F,0,c,0),c[3]=b>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(b)*a[3],!0;return!1};d.extentToBoundingBox=function(b,c,e){if(null==b)return!1;var d;D[0]=null!=b.xmin?b.xmin:0;D[1]=null!=b.ymin?b.ymin:0;D[2]=null!=b.zmin?b.zmin:
0;d=a(D,b.spatialReference,0,c,e,0,1);D[0]=null!=b.xmax?b.xmax:0;D[1]=null!=b.ymax?b.ymax:0;D[2]=null!=b.zmax?b.zmax:0;d=d&&a(D,b.spatialReference,0,c,e,3,1);null==b.xmin&&(c[0]=-Infinity);null==b.ymin&&(c[1]=-Infinity);null==b.zmin&&(c[2]=-Infinity);null==b.xmax&&(c[3]=Infinity);null==b.ymax&&(c[4]=Infinity);null==b.zmax&&(c[5]=Infinity);return d};d.extentToBoundingRect=function(b,c,e){if(null==b)return!1;var d;D[0]=null!=b.xmin?b.xmin:0;D[1]=null!=b.ymin?b.ymin:0;D[2]=null!=b.zmin?b.zmin:0;d=a(D,
b.spatialReference,0,D,e,0,1);c[0]=D[0];c[1]=D[1];D[0]=null!=b.xmax?b.xmax:0;D[1]=null!=b.ymax?b.ymax:0;D[2]=null!=b.zmax?b.zmax:0;d=d&&a(D,b.spatialReference,0,D,e,0,1);c[2]=D[0];c[3]=D[1];null==b.xmin&&(c[0]=-Infinity);null==b.ymin&&(c[1]=-Infinity);null==b.xmax&&(c[2]=Infinity);null==b.ymax&&(c[3]=Infinity);return d};d.boundingRectToBoundingRect=function(b,c,e,d){if(null==b)return!1;if(c.equals(d))return g.set(e,b),!0;var f;D[0]=b[0];D[1]=b[1];D[2]=0;f=a(D,c,0,D,d,0,1);e[0]=D[0];e[1]=D[1];D[0]=
b[2];D[1]=b[3];D[2]=0;f=f&&a(D,c,0,D,d,0,1);e[2]=D[0];e[3]=D[1];return f};(function(a){a.x2lon=function(a){return a/y};a.y2lat=function(a){return Math.PI/2-2*Math.atan(Math.exp(-1*a/y))};a.lon2x=function(a){return a*y};a.lat2y=function(a){a=Math.sin(a);return y/2*Math.log((1+a)/(1-a))}})(d.webMercator||(d.webMercator={}));var B=[void 0,v,k,q,function(a,b,c,e){var d=E,f=x*a[b],g=x*a[b+1];a=a[b+2];b=Math.sin(g);var g=Math.cos(g),k=d.a/Math.sqrt(1-d.e2*b*b);c[e++]=(k+a)*g*Math.cos(f);c[e++]=(k+a)*g*
Math.sin(f);c[e++]=(k*(1-d.e2)+a)*b}],A=[void 0,function(a,b,e,d){var f=p.Vec3Compact.length(a,b),g=c.asin(a[b+2]/f);a=(0<a[b+1]?1:-1)*c.acos(a[b]/(Math.cos(g)*f));e[d++]=C*a;e[d++]=C*g;e[d]=f-y},k,function(a,b,c,e){c[e++]=C*(a[b++]/y);c[e++]=C*(Math.PI/2-2*Math.atan(Math.exp(-1*a[b++]/y)));c[e]=a[b]},function(a,b,c,e){var d=E,f=a[b],g=a[b+1];a=a[b+2];var k,h,m,p,q,l;b=Math.abs(a);k=f*f+g*g;h=Math.sqrt(k);m=k+a*a;p=Math.sqrt(m);f=Math.atan2(g,f);q=a*a/m;m=k/m;g=d.a2/p;k=d.a3-d.a4/p;.3<m?(q=b/p*(1+
m*(d.a1+g+q*k)/p),p=Math.asin(q),g=q*q,m=Math.sqrt(1-g)):(m=h/p*(1-q*(d.a5-g-m*k)/p),p=Math.acos(m),g=1-m*m,q=Math.sqrt(g));l=1-d.e2*g;g=d.a/Math.sqrt(l);d=d.a6*g;g=h-g*m;k=b-d*q;b=m*g+q*k;h=m*k-q*g;d=h/(d/l+b);p+=d;0>a&&(p=-p);c[e++]=C*f;c[e++]=C*p;c[e]=b+h*d/2}],x=c.deg2rad(1),C=c.rad2deg(1),y=e.earthRadius,E={a:6378137,e2:.006694379990137799,a1:42697.67270715754,a2:1.8230912546075456E9,a3:142.91722289812412,a4:4.557728136518864E9,a5:42840.589930055656,a6:.9933056200098622},D=n.vec3f64.create(),
F=n.vec3f64.create(),L=n.vec3f64.create(),P=n.vec3f64.create(),M=n.vec3f64.create()})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../../core/compilerUtils","../Extent"],function(h,d,n,f){function l(a){void 0===a&&(a=d.ZERO);return[a[0],a[1],a[2],a[3]]}function g(a){return a[0]>=a[2]?0:a[2]-a[0]}function e(a){return a[1]>=a[3]?0:a[3]-a[1]}function c(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function p(a){return 4===a.length}function b(a,b,c){return a<
b?b:a>c?c:a}Object.defineProperty(d,"__esModule",{value:!0});d.create=l;d.clone=function(a){return[a[0],a[1],a[2],a[3]]};d.fromValues=function(a,b,c,e,d){void 0===d&&(d=l());d[0]=a;d[1]=b;d[2]=c;d[3]=e;return d};d.fromExtent=function(a,b){void 0===b&&(b=l());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;return b};d.toExtent=function(a,b){return new f({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};d.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<
a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])};d.expand=function(a,b,c){void 0===c&&(c=a);if("length"in b)if(p(b))c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c[3]=Math.max(a[3],b[3]);else{if(2===b.length||3===b.length)c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[0]),c[3]=Math.max(a[3],b[1])}else switch(b.type){case "extent":c[0]=Math.min(a[0],b.xmin);c[1]=Math.min(a[1],b.ymin);c[2]=Math.max(a[2],b.xmax);c[3]=Math.max(a[3],b.ymax);break;case "point":c[0]=
Math.min(a[0],b.x);c[1]=Math.min(a[1],b.y);c[2]=Math.max(a[2],b.x);c[3]=Math.max(a[3],b.y);break;default:n.neverReached(b)}return c};d.expandWithNestedArray=function(a,b,c){void 0===c&&(c=a);var e=b.length,d=a[0],f=a[1],g=a[2];a=a[3];for(var k=0;k<e;k++){var h=b[k],d=Math.min(d,h[0]),f=Math.min(f,h[1]),g=Math.max(g,h[0]);a=Math.max(a,h[1])}c[0]=d;c[1]=f;c[2]=g;c[3]=a;return c};d.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};d.width=g;d.height=e;d.diameter=function(a){var b=
g(a);a=e(a);return Math.sqrt(b*b+a*a)};d.area=function(a){return g(a)*e(a)};d.center=function(a,b){void 0===b&&(b=[0,0]);b[0]=a[0]+g(a)/2;b[1]=a[1]+e(a)/2;return b};d.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[0]<=a[2]&&b[1]<=a[3]};d.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[0]<=a[2]+c&&b[1]<=a[3]+c};d.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};d.contains=function(a,b){return b[0]>=
a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};d.intersection=function(a,c,e){void 0===e&&(e=a);var d=c[0],f=c[1],g=c[2];c=c[3];e[0]=b(a[0],d,g);e[1]=b(a[1],f,c);e[2]=b(a[2],d,g);e[3]=b(a[3],f,c);return e};d.distance=function(a,b){var c=(a[1]+a[3])/2,d=Math.max(Math.abs(b[0]-(a[0]+a[2])/2)-g(a)/2,0);a=Math.max(Math.abs(b[1]-c)-e(a)/2,0);return Math.sqrt(d*d+a*a)};d.offset=function(a,b,c,e){void 0===e&&(e=a);e[0]=a[0]+b;e[1]=a[1]+c;e[2]=a[2]+b;e[3]=a[3]+c;return e};d.pad=function(a,b,c){void 0===c&&(c=
a);c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]+b;c[3]=a[3]+b;return c};d.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c!==a&&(c[2]=a[2],c[3]=a[3]);return c};d.setMax=function(a,b,c){void 0===c&&(c=a);c[2]=b[0];c[3]=b[1];c!==a&&(c[0]=a[0],c[1]=a[1]);return a};d.set=c;d.empty=function(a){return a?c(a,d.NEGATIVE_INFINITY):l(d.NEGATIVE_INFINITY)};d.is=p;d.isPoint=function(a){return(0===g(a)||!isFinite(a[0]))&&(0===e(a)||!isFinite(a[1]))};d.equals=function(a,b,c){if(null==a||null==b)return a===b;
if(!p(a)||!p(b))return!1;if(c)for(var e=0;e<a.length;e++){if(!c(a[e],b[e]))return!1}else for(e=0;e<a.length;e++)if(a[e]!==b[e])return!1;return!0};d.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];d.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];d.ZERO=[0,0,0,0]})},"esri/views/3d/support/earthUtils":function(){define("require exports ../../../core/wgs84Constants ../../../core/libs/gl-matrix-2/gl-matrix ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/webMercatorUtils ./mathUtils".split(" "),
function(h,d,n,f,l,g,e,c){function p(a,b,e,f){var g,k;a instanceof l&&b instanceof l&&(e=b.longitude,f=b.latitude,k=a.latitude,g=a.longitude);a=c.deg2rad(k);f=c.deg2rad(f);g=c.deg2rad(g);b=c.deg2rad(e);e=Math.sin((a-f)/2);g=Math.sin((g-b)/2);e=2*c.asin(Math.sqrt(e*e+Math.cos(a)*Math.cos(f)*g*g))*d.earthRadius;return Math.round(1E4*e)/1E4}function b(a,b,e){a=e/d.earthRadius;b=c.deg2rad(b);a=Math.sin(a/2);b=Math.cos(b);b=2*c.asin(Math.sqrt(a*a/(b*b)));return c.rad2deg(b)}function a(a,b,e){return c.rad2deg(e/
d.earthRadius)}function m(a,b){a/=15;b||(a=Math.round(a));return a}Object.defineProperty(d,"__esModule",{value:!0});d.earthRadius=n.wgs84Radius;d.halfEarthCircumference=Math.PI*d.earthRadius;d.earthCircumference=2*d.halfEarthCircumference;d.metersPerDegree=d.halfEarthCircumference/180;var k=new l(0,0,g.WGS84);d.getGreatCircleDistance=p;d.getGreatCircleSpanAt=function(a,b,c){var e=b.spatialReference,d=new l(b.x,a.y,e),f=new l(c.x,a.y,e);b=new l(a.x,b.y,e);a=new l(a.x,c.y,e);return{lon:p(d,f),lat:p(b,
a)}};d.getLonDeltaForDistance=b;d.getLatDeltaForDistance=a;d.getLatLonDeltaForDistance=function(c,e,d){return{lat:a(c,e,d),lon:b(c,e,d)}};d.getMaxCameraAltitude=function(a){a=c.deg2rad(a/2);return(1-Math.sin(a))*d.earthRadius/Math.sin(a)};d.getViewExtentDistance=function(a,b){b=c.deg2rad(b/2);return 2*c.acos((Math.pow(a+d.earthRadius,2)+Math.pow(d.earthRadius,2)-Math.pow((a+d.earthRadius)*Math.cos(b)-Math.sqrt(Math.pow(Math.cos(b)*(a+d.earthRadius),2)-a*a-2*a*d.earthRadius),2))/(2*(a+d.earthRadius)*
d.earthRadius))*d.earthRadius};d.computeCarthesianDistance=function(a,b){function e(a){var b=c.deg2rad(a.latitude),e=c.deg2rad(a.longitude),f=Math.cos(b);a=d.earthRadius+(a.z||0);return[Math.cos(e)*f*a,Math.sin(b)*a,-Math.sin(e)*f*a]}a=e(a);b=e(b);b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]];return Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])};d.longitudeToTimezone=m;d.positionToTimezone=function(a,b){a.spatialReference.wkid!==g.WGS84.wkid?e.webMercatorToGeographic(a,!1,k):(k.x=a.x,k.y=a.y);k.z=a.z;b||(b={hours:0,
minutes:0,seconds:0});b.hours=m(k.x,!0);a=b.hours%1;b.hours-=a;b.minutes=60*a;a=b.minutes%1;b.minutes-=a;b.seconds=Math.round(60*a);return b};d.distanceToIdealHorizon=function(a,b){b=b||d.earthRadius;a=f.vec3.dot(a,a);return Math.sqrt(Math.abs(a-b*b))}})},"esri/views/3d/support/mathUtils":function(){define(["require","exports","../../../core/libs/gl-matrix-2/gl-matrix"],function(h,d,n){function f(a){return Math.asin(1<a?1:-1>a?-1:a)}function l(a){return Math.acos(1<a?1:-1>a?-1:a)}function g(a,b,c){return a<
b?b:a>c?c:a}function e(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(d,"__esModule",{value:!0});d.deg2rad=function(a){return a*Math.PI/180};d.rad2deg=function(a){return 180*a/Math.PI};d.asin=f;d.acos=l;d.cosCapped=function(a,b){return a>b?Math.cos(b):Math.cos(a)};d.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};d.log2=Math.log2||function(a){return Math.log(a)/Math.LN2};d.isPowerOfTwo=function(a){return 0===(a&a-1)};d.nextHighestPowerOfTwo=
function(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1};d.nextHighestPowerOfTen=function(a){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(a)))};d.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};d.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};d.maxScale=function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))};d.makeOrthonormal=function(a,b,c){c=c||
a;var e=n.vec3.dot(a,b);n.vec3.set(c,a[0]-e*b[0],a[1]-e*b[1],a[2]-e*b[2]);n.vec3.normalize(c,c)};d.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?n.vec3.set(b,0,1,0):n.vec3.set(b,1,0,0);n.vec3.cross(c,a,b);n.vec3.normalize(b,b);n.vec3.cross(b,c,a);n.vec3.normalize(c,c)};d.cartesianToSpherical=function(a,b){var c=n.vec3.length(a),e=f(a[2]/c);n.vec3.set(b,c,e,Math.atan2(a[1]/c,a[0]/c));return b};d.sphericalToCartesian=function(a,b){var c=a[0],e=a[1];a=a[2];var d=Math.cos(e);n.vec3.set(b,
c*d*Math.cos(a),c*d*Math.sin(a),c*Math.sin(e))};d.directionFromTo=function(a,b,c){var e=c[0]-b[0],d=c[1]-b[1];b=c[2]-b[2];c=e*e+d*d+b*b;if(!c)return a[0]=0,a[1]=0,a[2]=0,a;c=1/Math.sqrt(c);a[0]=e*c;a[1]=d*c;a[2]=b*c;return a};d.lerp=function(a,b,c){return a+(b-a)*c};d.bilerp=function(a,b,c,e,d,f){a+=(b-a)*d;return a+(c+(e-c)*d-a)*f};d.slerp=function(b,c,e,d){void 0===d&&(d=n.vec3f64.create());var f=n.vec3.length(b),g=n.vec3.length(c),k=n.vec3.dot(b,c)/(f*g);if(.9999999999999999>k){var k=Math.acos(k),
h=((1-e)*f+e*g)/Math.sin(k),g=h/g*Math.sin(e*k);n.vec3.scale(a,b,h/f*Math.sin((1-e)*k));n.vec3.scale(m,c,g);return n.vec3.add(d,a,m)}return n.vec3.lerp(d,b,c,e)};d.angle=function(c,e,d){c=n.vec3.normalize(a,c);e=n.vec3.normalize(m,e);var f=l(n.vec3.dot(c,e));return d&&(c=n.vec3.cross(b,c,e),0>n.vec3.dot(c,d))?-f:f};d.clamp=g;d.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};d.isNaN=Number.isNaN||function(a){return a!==a};d.makePiecewiseLinearFunction=function(a){var b=
a.length;return function(c){if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(var e=1;c>a[e][0];)e++;var d=a[e][0];c=(d-c)/(d-a[e-1][0]);return c*a[e-1][1]+(1-c)*a[e][1]}};d.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};d.floatEqualRelative=function(a,b,c){void 0===c&&(c=1E-6);if(d.isNaN(a)||d.isNaN(b))return!1;if(a===b)return!0;var e=Math.abs(a-b),f=Math.abs(a),g=Math.abs(b);
if(0===a||0===b||1E-12>f&&1E-12>g){if(e>.01*c)return!1}else if(e/(f+g)>c)return!1;return!0};d.floatEqualAbsolute=function(a,b,c){void 0===c&&(c=1E-6);return d.isNaN(a)||d.isNaN(b)?!1:(a>b?a-b:b-a)<=c};h=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=function(a,b,c,e){void 0===e&&(e=0);c-=e;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+e};a.prototype.normalize=
function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return g(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.contains=function(a,b,c){b=
this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();d.Cyclical=h;d.planeFromPoints=function(a,b,e,d){n.vec3.subtract(c,b,a);n.vec3.subtract(p,e,a);n.vec3.cross(d,c,p);n.vec3.normalize(d,d);d[3]=-n.vec3.dot(a,d)};var c=n.vec3f64.create(),p=n.vec3f64.create();d.cyclical2PI=e(new h(0,2*Math.PI));d.cyclicalPI=e(new h(-Math.PI,Math.PI));d.cyclicalDeg=e(new h(0,360));var b=n.vec3f64.create(),a=n.vec3f64.create(),m=n.vec3f64.create()})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["require",
"exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});(function(d){d.length=function(d,h){var f=d[h],e=d[h+1];d=d[h+2];return Math.sqrt(f*f+e*e+d*d)};d.normalize=function(d,h){var f=d[h],e=d[h+1],c=d[h+2],f=1/Math.sqrt(f*f+e*e+c*c);d[h]*=f;d[h+1]*=f;d[h+2]*=f};d.scale=function(d,h,g){d[h]*=g;d[h+1]*=g;d[h+2]*=g};d.add=function(d,h,g,e,c,p){void 0===p&&(p=h);c=c||d;c[p]=d[h]+g[e];c[p+1]=d[h+1]+g[e+1];c[p+2]=d[h+2]+g[e+2]};d.subtract=function(d,h,g,e,c,p){void 0===p&&(p=h);c=c||
d;c[p]=d[h]-g[e];c[p+1]=d[h+1]-g[e+1];c[p+2]=d[h+2]-g[e+2]}})(d.Vec3Compact||(d.Vec3Compact={}))})},"esri/geometry/support/meshUtils/offset":function(){define(["require","exports","../../../core/libs/gl-matrix-2/gl-matrix","./projection","../../../views/3d/support/projectionUtils"],function(h,d,n,f,l){function g(b,a){if(b)for(var c=0;c<b.length;c+=3)for(var e=0;3>e;e++)b[c+e]+=a[e]}Object.defineProperty(d,"__esModule",{value:!0});d.offset=function(b,a,d){if(b.vertexAttributes&&b.vertexAttributes.position){var k=
b.spatialReference;if(k.isWGS84||k.isWebMercator&&(!d||!1!==d.geographic)){d=b.spatialReference;var k=b.vertexAttributes.position,h=b.vertexAttributes.normal,m=new Float64Array(k.length),u=new Float32Array(h?h.length:0),t=b.extent.center,r=e;l.computeLinearTransformation(d,[t.x,t.y,t.z],c,l.SphericalECEFSpatialReference);n.mat3.fromMat4(p,c);n.vec3.transformMat3(r,a,p);f.projectToECEF(k,d,m);h&&f.projectNormalToECEF(h,k,m,d,u);g(m,r);f.projectFromECEF(m,k,d);h&&f.projectNormalFromECEF(u,k,m,d,h)}else g(b.vertexAttributes.position,
a);b.clearCache()}};var e=n.vec3f64.create(),c=n.mat4f64.create(),p=n.mat3f64.create()})},"esri/geometry/support/meshUtils/primitives":function(){define(["require","exports","../../../core/libs/gl-matrix-2/gl-matrix","./georeference"],function(h,d,n,f){Object.defineProperty(d,"__esModule",{value:!0});d.createUnitSizeBox=function(){for(var c=g.faceDescriptions,b=g.faceVertexOffsets,a=g.uvScales,e=4*c.length,d=new Float64Array(3*e),f=new Float32Array(3*e),e=new Float32Array(2*e),h=new Uint32Array(6*
c.length),l=0,n=0,r=0,w=0,z=0;z<c.length;z++){for(var B=c[z],A=l/3,x=0,C=b;x<C.length;x++){var y=C[x];h[w++]=A+y}A=B.corners;for(x=0;4>x;x++){C=A[x];y=0;e[r++]=.25*a[x][0]+B.uvOrigin[0];e[r++]=B.uvOrigin[1]-.25*a[x][1];for(var E=0;3>E;E++)0!==B.axis[E]?(d[l++]=.5*B.axis[E],f[n++]=B.axis[E]):(d[l++]=.5*C[y++],f[n++]=0)}}return{position:d,normal:f,uv:e,faces:h}};d.createUnitSizeSphere=function(c){void 0===c&&(c=0);c=Math.round(8*Math.pow(2,c));for(var b=2*c,a=(c-1)*(b+1)+2*b,d=new Float64Array(3*a),
f=new Float32Array(3*a),a=new Float32Array(2*a),g=new Uint32Array((c-1)*b*6),h=0,p=0,l=0,r=0,n=0,z=0;z<=c;z++){var B=z/c*Math.PI+.5*Math.PI,A=Math.cos(B);e[2]=Math.sin(B);for(var x=(B=0===z||z===c)?b-1:b,C=0;C<=x;C++){var y=C/x*2*Math.PI;e[0]=-Math.sin(y)*A;e[1]=Math.cos(y)*A;for(y=0;3>y;y++)d[h++]=.5*e[y],f[p++]=e[y];a[l++]=(C+(B?.5:0))/b;a[l++]=z/c;0!==z&&C!==b&&(z!==c&&(g[r++]=n,g[r++]=n+1,g[r++]=n-b),1!==z&&(g[r++]=n,g[r++]=n-b,g[r++]=n-b-1));n++}}return{position:d,normal:f,uv:a,faces:g}};d.createUnitSizeCylinder=
function(c){void 0===c&&(c=0);c=Math.round(16*Math.pow(2,c));for(var b=4*(c+1)+2*c,a=new Float64Array(3*b),d=new Float32Array(3*b),b=new Float32Array(2*b),f=new Uint32Array(12*c),g=0,h=0,p=0,l=0,r=0,n=0;5>=n;n++)for(var z=0===n||5===n,B=1>=n||4<=n,A=2===n||4===n,x=z?c-1:c,C=0;C<=x;C++){var y=C/x*2*Math.PI,E=z?0:.5;e[0]=E*Math.sin(y);e[1]=E*-Math.cos(y);e[2]=2>=n?.5:-.5;for(y=0;3>y;y++)a[g++]=e[y],B?d[h++]=2===y?1>=n?1:-1:0:d[h++]=2===y?0:e[y]/E;b[p++]=(C+(z?.5:0))/c;1>=n?b[p++]=1*n/3:3>=n?b[p++]=
1*(n-2)/3+1/3:b[p++]=1*(n-4)/3+2/3;A||0===n||C===c||(5!==n&&(f[l++]=r,f[l++]=r+1,f[l++]=r-c),1!==n&&(f[l++]=r,f[l++]=r-c,f[l++]=r-c-1));r++}return{position:a,normal:d,uv:b,faces:f}};d.createUnitSizePlane=function(c){c=l.facingAxisOrderSwap[c];for(var b=l.position,a=l.normal,e=new Float64Array(b.length),d=new Float32Array(a.length),f=0,g=0;4>g;g++)for(var h=f,p=0;3>p;p++){var r=c[p],n=Math.abs(r)-1,r=0<=r?1:-1;e[f]=b[h+n]*r;d[f]=a[h+n]*r;f++}return{position:e,normal:d,uv:new Float32Array(l.uv),faces:new Uint32Array(l.faces)}};
var l={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};d.convertUnitGeometry=function(d,b,a){for(var g=0;g<d.position.length;g+=3)d.position[g+2]+=.5;g=a&&a.size;if(null!=g){g="number"===typeof g?[g,g,g]:[null!=g.width?g.width:1,null!=g.depth?g.depth:1,null!=g.height?g.height:1];c[0]=g[0];c[4]=g[1];c[8]=g[2];for(var h=0;h<
d.position.length;h+=3){for(var p=0;3>p;p++)e[p]=d.position[h+p];n.vec3.transformMat3(e,e,c);for(p=0;3>p;p++)d.position[h+p]=e[p]}if(g[0]!==g[1]||g[1]!==g[2])for(c[0]=1/g[0],c[4]=1/g[1],c[8]=1/g[2],h=0;h<d.normal.length;h+=3){for(p=0;3>p;p++)e[p]=d.normal[h+p];n.vec3.transformMat3(e,e,c);n.vec3.normalize(e,e);for(p=0;3>p;p++)d.normal[h+p]=e[p]}}g=f.georeference(d,b,a);return{vertexAttributes:{position:g.position,normal:g.normal,uv:d.uv},components:[{faces:d.faces,material:a&&a.material||null}],spatialReference:b.spatialReference}};
var g={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,
1,2,0,2,3]};d.boxFaceOrder={south:0,east:1,north:2,west:3,up:4,down:5};var e=n.vec3f64.create(),c=n.mat3f64.create()})},"esri/geometry/support/meshUtils/georeference":function(){define(["require","exports","../../../core/libs/gl-matrix-2/gl-matrix","./projection","../../../views/3d/support/projectionUtils"],function(h,d,n,f,l){function g(a,c,e,d){void 0===d&&(d=0);if(!e.isWebMercator||!c)return c;e=new Float32Array(c.length);for(var f=0;f<c.length;f+=3){var g=l.webMercator.y2lat(a[f+1]),g=Math.cos(g);
1===d&&(g=1/g);b[0]=c[f+0]*g;b[1]=c[f+1]*g;b[2]=c[f+2];n.vec3.normalize(b,b);for(g=0;3>g;g++)e[f+g]=b[g]}return e}function e(a,b){a=a.spatialReference;return a.isWGS84||a.isWebMercator&&(!b||!1!==b.geographic)}Object.defineProperty(d,"__esModule",{value:!0});d.georeference=function(a,d,h){if(e(d,h)){h=d.spatialReference;l.computeLinearTransformation(d.spatialReference,[d.x,d.y,d.z||0],c,l.SphericalECEFSpatialReference);var k=a.position,m=c;d=d.spatialReference;for(var p=new Float64Array(k.length),
t=0;t<k.length;t+=3){for(var r=0;3>r;r++)b[r]=k[t+r];n.vec3.transformMat4(b,b,m);for(r=0;3>r;r++)p[t+r]=b[r]}k=new Float64Array(k.length);d=f.projectFromECEF(p,k,d);a=g(d,a.normal,h);a={position:d,normal:a}}else{h=new Float64Array(a.position.length);k=a.position;m=d.x;p=d.y;d=d.z||0;for(t=0;t<k.length;t+=3)h[t+0]=k[t+0]+m,h[t+1]=k[t+1]+p,h[t+2]=k[t+2]+d;a={position:h,normal:a.normal}}return a};d.ungeoreference=function(a,d,h){if(e(d,h)){h=d.spatialReference;l.computeLinearTransformation(d.spatialReference,
[d.x,d.y,d.z||0],c,l.SphericalECEFSpatialReference);n.mat4.invert(p,c);var k=a.position,m=p;d=f.projectToECEF(k,h,new Float64Array(k.length));for(var u=0;u<k.length;u+=3){for(var t=0;3>t;t++)b[t]=d[u+t];n.vec3.transformMat4(b,b,m);for(t=0;3>t;t++)d[u+t]=b[t]}a=g(a.position,a.normal,h,1);a={position:d,normal:a}}else{h=new Float64Array(a.position.length);k=a.position;m=d.x;u=d.y;d=d.z||0;for(t=0;t<k.length;t+=3)h[t+0]=k[t+0]-m,h[t+1]=k[t+1]-u,h[t+2]=k[t+2]-d;a={position:h,normal:a.normal}}return a};
var c=n.mat4f64.create(),p=n.mat4f64.create(),b=n.vec3f64.create()})},"esri/geometry/support/meshUtils/rotate":function(){define("require exports ../../../core/Logger ../../../core/libs/gl-matrix-2/gl-matrix ./projection ../../../views/3d/support/projectionUtils".split(" "),function(h,d,n,f,l,g){function e(a,b,c){void 0===c&&(c=v);if(a)for(f.mat4.identity(k),f.mat4.rotate(k,k,b[3],b),b=0;b<a.length;b+=3){for(var e=0;3>e;e++)p[e]=a[b+e]-c[e];f.vec3.transformMat4(p,p,k);for(e=0;3>e;e++)a[b+e]=p[e]+
c[e]}}Object.defineProperty(d,"__esModule",{value:!0});var c=n.getLogger("esri.geometry.support.meshUtils.rotate");d.rotate=function(a,d,h){if(a.vertexAttributes&&a.vertexAttributes.position&&0!==d[3]){var p=a.spatialReference,m=h&&h.origin||a.extent.center;if(p.isWGS84||p.isWebMercator&&(!h||!1!==h.geographic)){h=a.spatialReference;p=u;g.pointToVector(m,p,g.SphericalECEFSpatialReference)||g.pointToVector(a.extent.center,p,g.SphericalECEFSpatialReference);var m=a.vertexAttributes.position,r=a.vertexAttributes.normal,
x=new Float64Array(m.length),n=new Float32Array(r?r.length:0);g.computeLinearTransformation(g.SphericalECEFSpatialReference,p,k,g.SphericalECEFSpatialReference);f.mat3.fromMat4(q,k);var y=b;f.vec3.transformMat3(b,d,q);y[3]=d[3];l.projectToECEF(m,h,x);r&&l.projectNormalToECEF(r,m,x,h,n);e(x,y,p);l.projectFromECEF(x,m,h);r&&(e(n,y),l.projectNormalFromECEF(n,m,x,h,r))}else h=u,g.pointToVector(m,h,a.spatialReference)||(p=a.extent.center,h[0]=p.x,h[1]=p.y,h[2]=p.z,c.error("Failed to project specified origin (wkid:"+
m.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+"). Using mesh extent.center instead")),e(a.vertexAttributes.position,d,h),e(a.vertexAttributes.normal,d);a.clearCache()}};d.axisAngleFrom=function(a,b,c){f.vec3.copy(c,a);c[3]=b;return c};d.axisAngleMultiply=function(b,c,e){f.quat.setAxisAngle(a,b,b[3]);f.quat.setAxisAngle(m,c,c[3]);f.quat.multiply(a,m,a);e[3]=f.quat.getAxisAngle(e,a);return e};var p=f.vec3f64.create(),b=f.vec4f64.create(),a=f.quatf64.create(),m=
f.quatf64.create(),k=f.mat4f64.create(),q=f.mat3f64.create(),v=f.vec3f64.create(),u=f.vec3f64.create()})},"esri/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b){function a(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}h=function(c){function d(){for(var a=0;a<arguments.length;a++);
a=c.call(this)||this;a.points=[];a.type="multipoint";return a}n(d,c);h=d;d.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&(c.spatialReference=a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;if(a=c.points&&c.points[0])void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<a.length,
c.hasM=!1):void 0===c.hasZ?c.hasZ=3<a.length:void 0===c.hasM&&(c.hasM=3<a.length);return c};Object.defineProperty(d.prototype,"extent",{get:function(){var b=this.points;if(!b.length)return null;for(var c=new e,d=this.hasZ,f=this.hasM,g=d?3:2,h=b[0],k=a(Math.min),p=a(Math.max),m=h[0],q=h[1],l=h[0],h=h[1],n,D,F,L,P=0,M=b.length;P<M;P++){var I=b[P],ba=I[0],K=I[1],m=k(m,ba),q=k(q,K),l=p(l,ba),h=p(h,K);d&&2<I.length&&(ba=I[2],n=k(n,ba),F=p(F,ba));f&&I.length>g&&(I=I[g],D=k(D,I),L=p(L,I))}c.xmin=m;c.ymin=
q;c.xmax=l;c.ymax=h;c.spatialReference=this.spatialReference;d?(c.zmin=n,c.zmax=F):(c.zmin=null,c.zmax=null);f?(c.mmin=D,c.mmax=L):(c.mmin=null,c.mmax=null);return c},enumerable:!0,configurable:!0});d.prototype.writePoints=function(a,b,c,e){b.points=l.clone(this.points)};d.prototype.addPoint=function(a){this.clearCache();b.updateSupportFromPoint(this,a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};d.prototype.clone=function(){var a={points:l.clone(this.points),spatialReference:this.spatialReference};
this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new h(a)};d.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new p(b)};d.prototype.removePoint=function(a){if(!this._validateInputs(a))return null;this.clearCache();return new p(this.points.splice(a,1)[0],this.spatialReference)};d.prototype.setPoint=function(a,c){if(!this._validateInputs(a))return this;
this.clearCache();b.updateSupportFromPoint(c);this.points[a]=c.toArray();return this};d.prototype.toJSON=function(a){return this.write(null,a)};d.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};var h;f([g.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],d.prototype,"cache",void 0);f([g.property({dependsOn:["cache"]})],d.prototype,"extent",null);f([g.property({type:[[Number]],json:{write:{isRequired:!0}}})],d.prototype,"points",void 0);f([g.writer("points")],
d.prototype,"writePoints",null);return d=h=f([g.subclass("esri.geometry.Multipoint")],d)}(g.declared(c));h.prototype.toJSON.isDefaultToJSON=!0;return h})},"esri/geometry/support/zmUtils":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.updateSupportFromPoint=function(d,f,h){void 0===h&&(h=!1);var g=d.hasM,e=d.hasZ;Array.isArray(f)?4!==f.length||g||e?3===f.length&&h&&!g?(e=!0,g=!1):3===f.length&&g&&e&&(e=g=!1):e=g=!0:(e=!e&&f.hasZ&&(!g||f.hasM),
g=!g&&f.hasM&&(!e||f.hasZ));d.hasZ=e;d.hasM=g}})},"esri/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u){function t(a){return function(b,c){return null==
b?c:null==c?b:a(b,c)}}var r=t(Math.min),w=t(Math.max);h=function(c){function d(){for(var a=0;a<arguments.length;a++);a=c.call(this)||this;a.rings=[];a.type="polygon";return a}n(d,c);h=d;d.createEllipse=function(a){var b=a.center.x,c=a.center.y,e=a.center.z,d=a.center.m,f=a.center.hasZ,g=a.center.hasM,k=a.longAxis,p=a.shortAxis,m=a.numberOfPoints;a=a.view;for(var q=[],l=2*Math.PI/m,r=f?3:2,n=0;n<m;n++){var x=a.toMap(k*Math.cos(n*l)+b,p*Math.sin(n*l)+c),x=[x.x,x.y];f&&(x[2]=e);g&&(x[r]=d);q.push(x)}q.push(q[0]);
return new h({rings:[q],spatialReference:a.spatialReference})};d.createCircle=function(a){return h.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};d.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,e=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(e=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var d=a.zmin+.5*(a.zmax-a.zmin),
f=0;f<b.length;f++)b[f].push(d);if(e&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),f=0;f<b.length;f++)b[f].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);e&&(b.hasM=!0);return new h(b)};d.prototype.normalizeCtorArgs=function(a,c){var e=null,d,f,g=null;a&&!Array.isArray(a)?(e=a.rings?a.rings:null,c||(a.spatialReference?c=a.spatialReference:a.rings||(c=a)),d=a.hasZ,f=a.hasM):e=a;e=e||[];c=c||b.WGS84;e.length&&e[0]&&null!=e[0][0]&&"number"===typeof e[0][0]&&(e=[e]);if(g=e[0]&&e[0][0])void 0===d&&void 0===
f?(d=2<g.length,f=!1):void 0===d?d=!f&&3<g.length:void 0===f&&(f=!d&&3<g.length);return{rings:e,spatialReference:c,hasZ:d,hasM:f}};Object.defineProperty(d.prototype,"centroid",{get:function(){var b=a.polygonCentroid(this);if(!b||isNaN(b[0])||isNaN(b[1])||this.hasZ&&isNaN(b[2]))return null;var c=new p;c.x=b[0];c.y=b[1];c.spatialReference=this.spatialReference;this.hasZ&&(c.z=b[2]);return c},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"extent",{get:function(){var a=this.hasZ,b=
this.hasM,c=this.spatialReference,d=this.rings,f=a?3:2;if(!d.length||!d[0].length)return null;for(var g=d[0][0],h=g[0],g=g[1],k=d[0][0],p=k[0],k=k[1],m=void 0,q=void 0,l=void 0,n=void 0,t=[],v=0;v<d.length;v++){for(var u=d[v],z=u[0],A=z[0],z=z[1],B=u[0],ia=B[0],B=B[1],V=void 0,Z=void 0,ga=void 0,da=void 0,ja=0;ja<u.length;ja++){var pa=u[ja],sa=pa[0],na=pa[1],h=r(h,sa),g=r(g,na),p=w(p,sa),k=w(k,na),A=r(A,sa),z=r(z,na),ia=w(ia,sa),B=w(B,na);a&&2<pa.length&&(sa=pa[2],m=r(m,sa),q=w(q,sa),V=r(V,sa),Z=
w(Z,sa));b&&pa.length>f&&(da=pa[f],l=r(m,da),n=w(q,da),ga=r(V,da),da=w(Z,da))}t.push(new e({xmin:A,ymin:z,zmin:V,mmin:ga,xmax:ia,ymax:B,zmax:Z,mmax:da,spatialReference:c}))}d=new e;d.xmin=h;d.ymin=g;d.xmax=p;d.ymax=k;d.spatialReference=c;a&&(d.zmin=m,d.zmax=q);b&&(d.mmin=l,d.mmax=n);d.cache._partwise=1<t.length?t:null;return d},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isSelfIntersecting",{get:function(){return q.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});
d.prototype.writePaths=function(a,b,c,e){b.rings=l.clone(this.rings)};d.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var e=[],d=0,f=a.length;d<f;d++)e[d]=a[d].toArray();b[c]=e}return this}};d.prototype.clone=function(){var a=new h;a.spatialReference=this.spatialReference;a.rings=l.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};d.prototype.contains=function(a){if(!a)return!1;v.canProject(a,this.spatialReference)&&
(a=v.project(a,this.spatialReference));return m.polygonContainsPoint(this,a)};d.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return k.isClockwise(a,this.hasM,this.hasZ)};d.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new p(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new p(a[0],a[1],void 0,a[2],this.spatialReference):
b&&c?new p(a[0],a[1],a[2],a[3],this.spatialReference):new p(a[0],a[1],this.spatialReference)};d.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();u.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a].splice(b,0,c);return this};d.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new p(this.rings[a].splice(b,1)[0],this.spatialReference)};d.prototype.removeRing=function(a){if(!this._validateInputs(a,
null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new p(a,b)})};d.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();u.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};d.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=
a.length))?!1:!0};d.prototype.toJSON=function(a){return this.write(null,a)};var h;f([g.property({dependsOn:["hasM","hasZ","rings"]})],d.prototype,"cache",void 0);f([g.property({readOnly:!0,dependsOn:["cache"]})],d.prototype,"centroid",null);f([g.property({dependsOn:["cache"],readOnly:!0})],d.prototype,"extent",null);f([g.property({dependsOn:["cache"],readOnly:!0})],d.prototype,"isSelfIntersecting",null);f([g.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],d.prototype,"rings",void 0);f([g.writer("rings")],
d.prototype,"writePaths",null);return d=h=f([g.subclass("esri.geometry.Polygon")],d)}(g.declared(c));h.prototype.toJSON.isDefaultToJSON=!0;return h})},"esri/geometry/support/centroid":function(){define(["require","exports","./coordsUtils"],function(h,d,n){function f(e,c){if(!e||!e.length)return null;for(var d=[],b=[],a=c?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],f=0,h=e.length;f<h;f++){var q=l(e[f],c,a);q&&b.push(q)}b.sort(function(a,b){var e=
a[2]-b[2];0===e&&c&&(e=a[4]-b[4]);return e});b.length&&(f=6*b[0][2],d[0]=b[0][0]/f,d[1]=b[0][1]/f,c&&(f=6*b[0][4],d[2]=0!==f?b[0][3]/f:0),d[0]<a[0]||d[0]>a[1]||d[1]<a[2]||d[1]>a[3]||c&&(d[2]<a[4]||d[2]>a[5]))&&(d.length=0);if(!d.length)if(e=e[0]&&e[0].length?g(e[0],c):null)d[0]=e[0],d[1]=e[1],c&&2<e.length&&(d[2]=e[2]);else return null;return d}function l(e,c,d){for(var b=0,a=0,f=0,g=0,h=0,p=0,l=e.length-1;p<l;p++){var n=e[p],r=n[0],w=n[1],z=n[2],B=e[p+1],A=B[0],x=B[1],C=B[2],y=r*x-A*w,g=g+y,b=b+
(r+A)*y,a=a+(w+x)*y;c&&2<n.length&&2<B.length&&(y=r*C-A*z,f+=(z+C)*y,h+=y);r<d[0]&&(d[0]=r);r>d[1]&&(d[1]=r);w<d[2]&&(d[2]=w);w>d[3]&&(d[3]=w);c&&(z<d[4]&&(d[4]=z),z>d[5]&&(d[5]=z))}0<g&&(g*=-1);0<h&&(h*=-1);if(!g)return null;e=[b,a,.5*g];c&&(e[3]=f,e[4]=.5*h);return e}function g(e,c){for(var d=c?[0,0,0]:[0,0],b=c?[0,0,0]:[0,0],a=0,f=0,g=0,h=0,l=0,u=e.length;l<u-1;l++){var t=e[l],r=e[l+1];if(t&&r){d[0]=t[0];d[1]=t[1];b[0]=r[0];b[1]=r[1];c&&2<t.length&&2<r.length&&(d[2]=t[2],b[2]=r[2]);var w=n.getLength(d,
b);w&&(a+=w,t=n.getMidpoint(t,r),f+=w*t[0],g+=w*t[1],c&&2<t.length&&(h+=w*t[2]))}}return 0<a?c?[f/a,g/a,h/a]:[f/a,g/a]:e.length?e[0]:null}Object.defineProperty(d,"__esModule",{value:!0});d.extentCentroid=function(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null};d.polygonCentroid=function(e){return e?f(e.rings,e.hasZ):null};d.ringsCentroid=f;d.lineCentroid=g})},"esri/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a){function m(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var k=m(Math.min),q=m(Math.max);h=function(c){function d(){for(var a=0;a<arguments.length;a++);a=c.call(this)||this;a.paths=[];a.type="polyline";return a}n(d,c);h=d;d.prototype.normalizeCtorArgs=function(a,c){var e=null,d,f,g=null;a&&!Array.isArray(a)?(e=a.paths?a.paths:null,c||(a.spatialReference?c=a.spatialReference:a.paths||(c=a)),d=a.hasZ,f=a.hasM):e=a;e=e||[];c=c||b.WGS84;e.length&&e[0]&&null!=
e[0][0]&&"number"===typeof e[0][0]&&(e=[e]);if(g=e[0]&&e[0][0])void 0===d&&void 0===f?(d=2<g.length,f=!1):void 0===d?d=!f&&3<g.length:void 0===f&&(f=!d&&3<g.length);return{paths:e,spatialReference:c,hasZ:d,hasM:f}};Object.defineProperty(d.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.paths,f=a?3:2;if(!d.length||!d[0].length)return null;for(var g=d[0][0],h=g[0],g=g[1],p=d[0][0],m=p[0],p=p[1],l=void 0,n=void 0,t=void 0,v=void 0,u=[],I=0;I<d.length;I++){for(var ba=
d[I],K=ba[0],S=K[0],K=K[1],Q=ba[0],J=Q[0],Q=Q[1],R=void 0,H=void 0,W=void 0,aa=void 0,ia=0;ia<ba.length;ia++){var V=ba[ia],Z=V[0],ga=V[1],h=k(h,Z),g=k(g,ga),m=q(m,Z),p=q(p,ga),S=k(S,Z),K=k(K,ga),J=q(J,Z),Q=q(Q,ga);a&&2<V.length&&(Z=V[2],l=k(l,Z),n=q(n,Z),R=k(R,Z),H=q(H,Z));b&&V.length>f&&(aa=V[f],t=k(l,aa),v=q(n,aa),W=k(R,aa),aa=q(H,aa))}u.push(new e({xmin:S,ymin:K,zmin:R,mmin:W,xmax:J,ymax:Q,zmax:H,mmax:aa,spatialReference:c}))}d=new e;d.xmin=h;d.ymin=g;d.xmax=m;d.ymax=p;d.spatialReference=c;a&&
(d.zmin=l,d.zmax=n);b&&(d.mmin=t,d.mmax=v);d.cache._partwise=1<u.length?u:null;return d},enumerable:!0,configurable:!0});d.prototype.writePaths=function(a,b,c,e){b.paths=l.clone(this.paths)};d.prototype.addPath=function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var e=[],d=0,f=a.length;d<f;d++)e[d]=a[d].toArray();b[c]=e}return this}};d.prototype.clone=function(){var a=new h;a.spatialReference=this.spatialReference;a.paths=l.clone(this.paths);
a.hasZ=this.hasZ;a.hasM=this.hasM;return a};d.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new p(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new p(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new p(a[0],a[1],a[2],a[3],this.spatialReference):new p(a[0],a[1],this.spatialReference)};d.prototype.insertPoint=function(b,c,e){if(!this._validateInputs(b,c,!0))return this;this.clearCache();a.updateSupportFromPoint(this,
e);Array.isArray(e)||(e=e.toArray());this.paths[b].splice(c,0,e);return this};d.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.paths.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new p(a,b)})};d.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new p(this.paths[a].splice(b,1)[0],this.spatialReference)};d.prototype.setPoint=function(b,c,e){if(!this._validateInputs(b,
c))return this;this.clearCache();a.updateSupportFromPoint(this,e);Array.isArray(e)||(e=e.toArray());this.paths[b][c]=e;return this};d.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};d.prototype.toJSON=function(a){return this.write(null,a)};var h;f([g.property({dependsOn:["hasM","hasZ","paths"]})],d.prototype,"cache",void 0);f([g.property({dependsOn:["cache"],readOnly:!0})],
d.prototype,"extent",null);f([g.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],d.prototype,"paths",void 0);f([g.writer("paths")],d.prototype,"writePaths",null);return d=h=f([g.subclass("esri.geometry.Polyline")],d)}(g.declared(c));h.prototype.toJSON.isDefaultToJSON=!0;return h})},"esri/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(h,
d,n,f,l,g){return function(e){function c(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];b=e.apply(this,b)||this;b.x=0;b.y=0;b.z=void 0;return b}n(c,e);d=c;c.prototype.normalizeCtorArgs=function(b,a){return"number"===typeof b?{x:b,y:a}:Array.isArray(b)?{x:b[0],y:b[1]}:b};c.prototype.clone=function(){return new d({x:this.x,y:this.y,z:this.z})};c.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};var d;f([g.property({type:Number})],c.prototype,"x",void 0);
f([g.property({type:Number})],c.prototype,"y",void 0);f([g.property({type:Number})],c.prototype,"z",void 0);return c=d=f([g.subclass("esri.geometry.ScreenPoint")],c)}(g.declared(l))})},"esri/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Mesh ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(h,d,n,f,l,g,e,c){function p(a){return void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax}function b(a){return void 0!==a.points}function a(a){return void 0!==
a.x&&void 0!==a.y}function m(a){return void 0!==a.paths}function k(a){return void 0!==a.rings}function q(a){return void 0!==a.vertexAttributes}function v(d){if(d){if(a(d))return g.fromJSON(d);if(m(d))return c.fromJSON(d);if(k(d))return e.fromJSON(d);if(b(d))return l.fromJSON(d);if(p(d))return n.fromJSON(d);if(q(d))return f.fromJSON(d)}return null}Object.defineProperty(d,"__esModule",{value:!0});d.fromJson=function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(r){console.warn(r.stack)}return v(a)};
d.isExtent=p;d.isMultipoint=b;d.isPoint=a;d.isPolyline=m;d.isPolygon=k;d.isMesh=q;d.fromJSON=v;d.getJsonType=function(c){if(c){if(a(c))return"esriGeometryPoint";if(m(c))return"esriGeometryPolyline";if(k(c))return"esriGeometryPolygon";if(p(c))return"esriGeometryEnvelope";if(b(c))return"esriGeometryMultipoint"}return null};var u={esriGeometryPoint:g,esriGeometryPolyline:c,esriGeometryPolygon:e,esriGeometryEnvelope:n,esriGeometryMultipoint:l};d.getGeometryType=function(a){return a&&u[a]||null}})},"esri/layers/mixins/ArcGISService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators ../support/arcgisLayerUrl".split(" "),
function(h,d,n,f,l,g,e,c){var p=l.getLogger("esri.layers.mixins.ArcGISService");return function(b){function a(){return null!==b&&b.apply(this,arguments)||this}n(a,b);Object.defineProperty(a.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var a=c.parse(this.url);if(a&&a.title)return a.title}return this._get("title")||""},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"url",{set:function(a){this._set("url",c.sanitizeUrl(a,p))},enumerable:!0,configurable:!0});f([e.property({dependsOn:["url"]})],a.prototype,"title",null);f([e.property({type:String})],a.prototype,"url",null);return a=f([e.subclass("esri.layers.mixins.ArcGISService")],a)}(e.declared(g))})},"esri/core/MultiOriginJSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators ./accessorSupport/MultiOriginStore ./accessorSupport/PropertyOrigin ./accessorSupport/read ./accessorSupport/utils ./accessorSupport/write".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a){function m(a){return b.getProperties(a).store}return function(d){function h(){var a=d.call(this)||this,f=b.getProperties(a),g=f.metadatas,h=f.store,k=new e.default;f.store=k;h.keys().forEach(function(a){k.set(a,h.get(a),c.OriginId.DEFAULTS)});Object.keys(g).forEach(function(a){f.internalGet(a)&&k.set(a,f.internalGet(a),c.OriginId.DEFAULTS)});return a}n(h,d);h.prototype.clear=function(a,b){void 0===b&&(b="user");return m(this).clear(a,c.nameToId(b))};h.prototype.read=
function(a,b){p.default(this,a,b);return this};h.prototype.write=function(b,c){b=b||{};a.default(this,b,c);return b};h.prototype.getAtOrigin=function(a,b){var e=m(this),d=c.nameToId(b);if("string"===typeof a)return e.get(a,d);var f={};a.forEach(function(a){f[a]=e.get(a,d)});return f};h.prototype.originOf=function(a){var b=m(this);if("string"===typeof a)return c.idToName(b.originOf(a));a.forEach(function(a){c.idToName(b.originOf(a))})};h.prototype.revert=function(a,e){var d=m(this),f=c.nameToId(e),
g=b.getProperties(this);("string"===typeof a?"*"===a?Object.keys(d.getAll(f)):[a]:a).forEach(function(a){g.propertyInvalidated(a);d.revert(a,f);g.propertyCommitted(a)})};h.prototype.removeOrigin=function(a){var b=m(this);a=c.nameToId(a);var e=b.getAll(a),d;for(d in e)b.originOf(d)===a&&b.set(d,e[d],c.OriginId.USER)};h.prototype.updateOrigin=function(a,b){var e=m(this);b=c.nameToId(b);var d=this.get(a);e.clear(a);e.set(a,d,b)};return h=f([g.subclass("esri.core.MultiOriginJSONSupport")],h)}(g.declared(l))})},
"esri/core/accessorSupport/MultiOriginStore":function(){define(["require","exports","./PropertyOrigin"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});h=function(){function d(){this._propertyOriginMap={};this._originStores=Array(n.OriginId.NUM);this._values={}}d.prototype.get=function(d,f){return(f=void 0===f?this._values:this._originStores[f])?f[d]:void 0};d.prototype.keys=function(){return Object.keys(this._values)};d.prototype.set=function(d,f,e){void 0===e&&(e=n.OriginId.USER);
var c=this._originStores[e];c||(c={},this._originStores[e]=c);c[d]=f;return!(d in this._values)||this._propertyOriginMap[d]<=e?(c=this._values[d],this._values[d]=f,this._propertyOriginMap[d]=e,c!==f):!1};d.prototype.clear=function(d,f){void 0===f&&(f=n.OriginId.USER);var e=this._originStores[f];if(e){var c=e[d];delete e[d];if(d in this._values&&this._propertyOriginMap[d]===f)for(delete this._values[d],--f;0<=f;f--)if((e=this._originStores[f])&&d in e){this._values[d]=e[d];this._propertyOriginMap[d]=
f;break}return c}};d.prototype.has=function(d,f){return(f=void 0===f?this._values:this._originStores[f])?d in f:!1};d.prototype.revert=function(d,f){for(;0<f&&!this.has(d,f);)--f;var e=this._originStores[f],e=e&&e[d],c=this._values[d];this._values[d]=e;this._propertyOriginMap[d]=f;return c!==e};d.prototype.originOf=function(d,f){return this._propertyOriginMap[d]||n.OriginId.DEFAULTS};d.prototype.getAll=function(d){return this._originStores[d]};return d}();d.default=h})},"esri/layers/support/arcgisLayerUrl":function(){define(["require",
"exports","../../core/urlUtils"],function(h,d,n){function f(f){var e=n.urlToObject(f).path.match(d.match);if(!e)return null;f=e[1];var c=e[2],g=e[3],e=e[4],b=c.indexOf("/");return{title:l(-1!==b?c.slice(b+1):c),serverType:g,sublayer:null!=e&&""!==e?parseInt(e,10):null,url:{path:f}}}function l(d){d=d.replace(/\s*[/_]+\s*/g," ");return d[0].toUpperCase()+d.slice(1)}Object.defineProperty(d,"__esModule",{value:!0});d.serverTypes="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" ");
d.match=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/("+d.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i");d.test=function(f){return!!d.match.test(f)};d.parse=f;d.cleanTitle=l;d.titleFromUrlAndName=function(d,e){var c=[];d&&(d=f(d))&&d.title&&c.push(d.title);e&&(e=l(e),c.push(e));if(2===c.length){if(-1!==c[0].toLowerCase().indexOf(c[1].toLowerCase()))return c[0];if(-1!==c[1].toLowerCase().indexOf(c[0].toLowerCase()))return c[1]}return c.join(" - ")};d.isHostedAgolService=
function(d){if(!d)return!1;d=d.toLowerCase();var e=-1!==d.indexOf(".arcgis.com/");d=-1!==d.indexOf("//services")||-1!==d.indexOf("//tiles")||-1!==d.indexOf("//features");return e&&d};d.isHostedSecuredProxyService=function(d,e){return e&&d&&-1!==d.toLowerCase().indexOf(e.toLowerCase())};d.sanitizeUrl=function(d,e){return d?n.removeTrailingSlash(n.removeQueryParameters(d,e)):d};d.sanitizeUrlWithLayerId=function(d,e,c){if(!e)return{url:e};e=n.removeQueryParameters(e,c);c=n.urlToObject(e);c=f(c.path);
var g;c&&null!=c.sublayer&&(null==d.layerId&&(g=c.sublayer),e=c.url.path);return{url:n.removeTrailingSlash(e),layerId:g}};d.writeUrlWithLayerId=function(d,e,c,f,b){n.write(e,f,"url",b);f.url&&null!=d.layerId&&(f.url=n.join(f.url,c,d.layerId.toString()))};d.isWmsServer=function(d){if(!d)return!1;var e=d.toLowerCase();d=-1!==e.indexOf("/services/");var c=-1!==e.indexOf("/mapserver/wmsserver"),f=-1!==e.indexOf("/imageserver/wmsserver"),e=-1!==e.indexOf("/wmsserver");return d&&(c||f||e)}})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v){var u=c({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(c){function d(a){a=c.call(this)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}f(d,c);e=d;d.create=function(a){void 0===a&&(a={size:256,spatialReference:g.SpatialReference.WebMercator});
var b=a.resolutionFactor||1,c=a.scales,d=a.size||256;a=a.spatialReference||g.SpatialReference.WebMercator;if(!k.isValid(a)){for(var b=[],f=5E-4,h=23;0<=h;h--)b.unshift({level:h,scale:f,resolution:f}),f*=2;return new e({dpi:96,lods:b,origin:new g.Point(0,0,a),size:d,spatialReference:a})}var p=(h=k.getInfo(a))?new g.Point(h.origin[0],h.origin[1],a):new g.Point(0,0,a),q=1/(39.37*m.getMetersPerUnitForSR(a)*96),l=[];if(c)for(h=0;h<c.length;h++){var n=c[h],f=n*q;l.push({level:h,scale:n,resolution:f})}else for(f=
k.isGeographic(a)?512/d*1.47748799285417E8:256/d*5.91657527591555E8,c=Math.ceil(24/b),l.push({level:0,scale:f,resolution:f*q}),h=1;h<c;h++)n=f/Math.pow(2,b),f=n*q,l.push({level:h,scale:n,resolution:f}),f=n;return new e({dpi:96,lods:l,origin:p,size:d,spatialReference:a})};Object.defineProperty(d.prototype,"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var c=k.getInfo(a);return a.isWrappable&&Math.abs(c.origin[0]-b.x)<=c.dx}return!1},enumerable:!0,configurable:!0});
d.prototype.readOrigin=function(a,b){return g.Point.fromJSON(n({spatialReference:b.spatialReference},a))};Object.defineProperty(d.prototype,"lods",{set:function(a){var b=this,c=0,d=0,e=[];this._levelToLOD={};a&&(c=-Infinity,d=Infinity,a.forEach(function(a){e.push(a.scale);c=a.scale>c?a.scale:c;d=a.scale<d?a.scale:d;b._levelToLOD[a.level]=a}));this._set("scales",e);this._set("minScale",c);this._set("maxScale",d);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});
d.prototype.readSize=function(a,b){return[b.cols,b.rows]};d.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};d.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};d.prototype.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;d<c;d++){var e=b[d],f=b[d+1];if(e<=a)break;if(f===a)return d+1;if(e>a&&f<a)return d+1-(a-f)/(e-f)}return d};d.prototype.snapScale=function(a,
b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};d.prototype.tileAt=function(b,c,d,e){var f=this.lodAt(b);if(!f)return null;var g;if("number"===typeof c)g=c,c=d;else{if(k.equals(c.spatialReference,this.spatialReference))g=c.x,c=c.y;else{e=q.project(c,this.spatialReference);if(!e)return null;g=e.x;c=e.y}e=d}d=f.resolution*this.size[0];f=f.resolution*this.size[1];e||(e={id:null,level:0,row:0,col:0,extent:a.create()});
e.level=b;e.row=Math.floor((this.origin.y-c)/f+.001);e.col=Math.floor((g-this.origin.x)/d+.001);this.updateTileInfo(e);return e};d.prototype.updateTileInfo=function(b){var c=this.lodAt(b.level);if(c){var d=c.resolution*this.size[0],c=c.resolution*this.size[1];b.id=b.level+"/"+b.row+"/"+b.col;b.extent||(b.extent=a.create());b.extent[0]=this.origin.x+b.col*d;b.extent[1]=this.origin.y-(b.row+1)*c;b.extent[2]=b.extent[0]+d;b.extent[3]=b.extent[1]+c}};d.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];
if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};d.prototype.getTileBounds=function(a,b){var c=this.lodAt(b.level).resolution,d=c*this.size[0],c=c*this.size[1];a[0]=this.origin.x+b.col*d;a[1]=this.origin.y-(b.row+1)*c;a[2]=a[0]+d;a[3]=a[1]+c;return a};d.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};d.prototype.clone=function(){return e.fromJSON(this.write({}))};
d.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,c=0;c<a.length;c++){var d=a[c];this._upsampleLevels[d.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/d.resolution:0};b=d}};var e;l([p.property({type:Number,json:{write:!0}})],d.prototype,"compressionQuality",void 0);l([p.property({type:Number,json:{write:!0}})],d.prototype,"dpi",void 0);l([p.property({type:String,json:{read:u.read,write:u.write,origins:{"web-scene":{read:!1,write:!1}}}})],
d.prototype,"format",void 0);l([p.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],d.prototype,"isWrappable",null);l([p.property({type:g.Point,json:{write:!0}})],d.prototype,"origin",void 0);l([p.reader("origin")],d.prototype,"readOrigin",null);l([p.property({type:[v],value:null,json:{write:!0}})],d.prototype,"lods",null);l([p.property({readOnly:!0})],d.prototype,"minScale",void 0);l([p.property({readOnly:!0})],d.prototype,"maxScale",void 0);l([p.property({readOnly:!0})],d.prototype,
"scales",void 0);l([p.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],d.prototype,"size",void 0);l([p.reader("size",["rows","cols"])],d.prototype,"readSize",null);l([p.writer("size",{cols:{type:b.Integer},rows:{type:b.Integer}})],d.prototype,"writeSize",null);l([p.property({type:g.SpatialReference,json:{write:!0}})],d.prototype,"spatialReference",void 0);return d=e=l([p.subclass("esri.layers.support.TileInfo")],d)}(p.declared(e))})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this,a)||this;a.level=0;a.levelValue=null;a.resolution=0;a.scale=0;return a}n(d,c);b=d;d.prototype.clone=function(){return new b({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var b;f([g.property({type:e.Integer,json:{write:!0}})],d.prototype,"level",void 0);f([g.property({type:String,json:{write:!0}})],d.prototype,"levelValue",void 0);f([g.property({type:Number,json:{write:!0}})],d.prototype,
"resolution",void 0);f([g.property({type:Number,json:{write:!0}})],d.prototype,"scale",void 0);return d=b=f([g.subclass("esri.layers.support.LOD")],d)}(g.declared(l))})},"esri/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/io-query ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t){var r=a.getLogger("esri.layers.support.TilemapCache");return function(a){function c(c){c=a.call(this)||this;c._handles=new b;c._pendingTilemapRequests={};c._availableLevels={};c.levels=5;c.cacheByteSize=2097152;c.request=e;return c}f(c,a);d=c;c.prototype.initialize=function(){var a=this;this._tilemapCache=new m(this.cacheByteSize);this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],function(){return a._initializeTilemapDefinition()}),
v.init(this,"layer.tileInfo.lods",function(b){return a._initializeAvailableLevels(b)},!0)]);this._initializeTilemapDefinition()};c.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};c.prototype.castLevels=function(a){return 2>=a?(r.error("Minimum levels for Tilemap is 3, but got ",a),3):a};Object.defineProperty(c.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});c.prototype.getTilemap=function(a,b,c){return this._tilemapFromCache(a,
b,c,this._tmpTilemapDefinition)};c.prototype.fetchTilemap=function(a,b,c,d){var e=this;if(!this._availableLevels[a])return q.reject(new p("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"));var f=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,b,c,f))return q.resolve(a);var g=t.tilemapDefinitionId(f),h=this._pendingTilemapRequests[g];h||(h=t.Tilemap.fromDefinition(f,d).then(function(a){e._tilemapCache.put(g,a,a.byteSize);delete e._pendingTilemapRequests[g];return a}).catch(function(a){delete e._pendingTilemapRequests[g];
return q.reject(a)}),this._pendingTilemapRequests[g]=h);return q.create(function(a,b){h.then(a,b)})};c.prototype.getAvailability=function(a,b,c){return this._availableLevels[a]?(a=this.getTilemap(a,b,c))?a.getAvailability(b,c):"unknown":"unavailable"};c.prototype.getAvailabilityUpsample=function(a,b,c,d){d.level=a;d.row=b;d.col=c;a=this.layer.tileInfo;for(a.updateTileInfo(d);;)if(b=this.getAvailability(d.level,d.row,d.col),"unavailable"===b){if(!a.upsampleTile(d))return"unavailable"}else return b};
c.prototype.fetchAvailability=function(a,b,c,d){return this._availableLevels[a]?this.fetchTilemap(a,b,c,d).catch(function(a){return a}).then(function(d){return d instanceof t.Tilemap?(d=d.getAvailability(b,c),"unavailable"===d?q.reject(new p("tile-map:tile-unavailable","Tile is not available",{level:a,row:b,col:c})):d):d&&"cancel"===d.dojoType?q.reject(d):"unknown"}):q.reject(new p("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"))};c.prototype.fetchAvailabilityUpsample=
function(a,b,c,e,f){var g=this;e.level=a;e.row=b;e.col=c;var h=this.layer.tileInfo;h.updateTileInfo(e);var k=this.fetchAvailability(a,b,c,f).catch(function(a){return a&&"cancel"===a.dojoType?q.reject(a):h.upsampleTile(e)?g.fetchAvailabilityUpsample(e.level,e.row,e.col,e):q.reject(a)}),m={id:e.id,level:a,row:b,col:c};a=function(a){var b=p.fetchAvailability(m.level,m.row,m.col,f);d._prefetches.push(b);k.then(function(){return b.cancel()},function(){return b.cancel()});b.then(function(){return d._prefetches.removeUnordered(b)},
function(){return d._prefetches.removeUnordered(b)})};var p=this;for(b=0;d._prefetches.length<d._maxPrefetch&&h.upsampleTile(m);++b)a(b);return k};c.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,b=a.query;b&&b.token||!this.layer.token||(b=n({},b,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:a.path,query:b?g.objectToQuery(b):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},
width:this.size,height:this.size,level:0,row:0,col:0}}};c.prototype._tilemapFromCache=function(a,b,c,d){a=this._getTilemapDefinition(a,b,c,d);a=t.tilemapDefinitionId(a);return this._tilemapCache.get(a)};c.prototype._getTilemapDefinition=function(a,b,c,d){d.level=a;d.row=b-b%this.size;d.col=c-c%this.size;return d};c.prototype._initializeAvailableLevels=function(a){var b=this;this._availableLevels={};a&&a.forEach(function(a){return b._availableLevels[a.level]=!0})};var d;c._maxPrefetch=4;c._prefetches=
new k({initialSize:d._maxPrefetch});l([u.property({constructOnly:!0,type:Number})],c.prototype,"levels",void 0);l([u.cast("levels")],c.prototype,"castLevels",null);l([u.property({readOnly:!0,dependsOn:["levels"],type:Number})],c.prototype,"size",null);l([u.property({constructOnly:!0,type:Number})],c.prototype,"cacheByteSize",void 0);l([u.property({constructOnly:!0})],c.prototype,"layer",void 0);l([u.property({constructOnly:!0})],c.prototype,"request",void 0);return c=d=l([u.subclass("esri.layers.support.TilemapCache")],
c)}(u.declared(c))})},"esri/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(b){b=c.call(this)||this;b._groups=new Map;return b}n(d,c);d.prototype.destroy=function(){this.removeAll()};Object.defineProperty(d.prototype,"size",{get:function(){var b=0;this._groups.forEach(function(a){b+=a.length});return b},enumerable:!0,
configurable:!0});d.prototype.add=function(b,a){if(!this._isHandle(b)&&!Array.isArray(b)&&!g.isCollection(b))return this;var c=this._getOrCreateGroup(a);Array.isArray(b)||g.isCollection(b)?b.forEach(function(a){return c.push(a)}):c.push(b);this.notifyChange("size");return this};d.prototype.has=function(b){return this._groups.has(this._ensureGroupKey(b))};d.prototype.remove=function(b){if(Array.isArray(b)||g.isCollection(b))return b.forEach(this.remove,this),this;if(!this.has(b))return this;for(var a=
this._getGroup(b),c=0;c<a.length;c++)a[c].remove();this._deleteGroup(b);this.notifyChange("size");return this};d.prototype.removeAll=function(){this._groups.forEach(function(b){for(var a=0;a<b.length;a++)b[a].remove()});this._groups.clear();this.notifyChange("size");return this};d.prototype._isHandle=function(b){return b&&!!b.remove};d.prototype._getOrCreateGroup=function(b){if(this.has(b))return this._getGroup(b);var a=[];this._groups.set(this._ensureGroupKey(b),a);return a};d.prototype._getGroup=
function(b){return this._groups.get(this._ensureGroupKey(b))};d.prototype._deleteGroup=function(b){return this._groups.delete(this._ensureGroupKey(b))};d.prototype._ensureGroupKey=function(b){return b||"_default_"};f([e.property({readOnly:!0})],d.prototype,"size",null);return d=f([e.subclass("esri.core.Handles")],d)}(e.declared(l))})},"esri/core/LRUCache":function(){define(["require","exports","./MemCache"],function(h,d,n){return function(){function d(d,f){this._storage=new n.Storage;this._storage.maxSize=
d;f&&this._storage.registerRemoveFunc("",f)}d.prototype.put=function(d,f,e){this._storage.put(d,f,e)};d.prototype.pop=function(d){return this._storage.pop(d)};d.prototype.get=function(d){return this._storage.get(d)};d.prototype.clear=function(){this._storage.clearAll()};d.prototype.destroy=function(){this._storage.clearAll()};return d}()})},"esri/core/MemCache":function(){define(["require","exports","./iteratorUtils","./lang","./PooledArray"],function(h,d,n,f,l){h=function(){function d(d,c,f){this._namespace=
d;this._storage=c;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";f&&(this._storage.registerRemoveFunc(this._namespace,f),this._removeFunc=!0)}Object.defineProperty(d.prototype,"namespace",{get:function(){return this._namespace.slice(0,-1)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hitRate",{get:function(){return this._hit/(this._hit+this._miss)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{get:function(){return this._storage.size},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"maxSize",{get:function(){return this._storage.maxSize},enumerable:!0,configurable:!0});d.prototype.resetHitRate=function(){this._hit=this._miss=0};d.prototype.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this)};d.prototype.put=function(d,c,f){this._storage.put(this._namespace+d,c,f)};d.prototype.get=function(d){d=this._storage.get(this._namespace+
d);void 0===d?++this._miss:++this._hit;return d};d.prototype.pop=function(d){d=this._storage.pop(this._namespace+d);void 0===d?++this._miss:++this._hit;return d};d.prototype.clear=function(){this._storage.clear(this._namespace)};d.prototype.clearAll=function(){this._storage.clearAll()};d.prototype.getStats=function(){return this._storage.getStats()};d.prototype.resetStats=function(){this._storage.resetStats()};return d}();(function(d){var e=function(){function c(c){void 0===c&&(c=10485760);this._maxSize=
c;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=[];this._users=new l}c.prototype.register=function(c){this._users.push(c)};c.prototype.deregister=function(c){this._users.removeUnordered(c)};c.prototype.registerRemoveFunc=function(c,b){this._removeFuncs.push([c,b])};c.prototype.deregisterRemoveFunc=function(c){this._removeFuncs=this._removeFuncs.filter(function(b){return b[0]!==c})};Object.defineProperty(c.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"maxSize",{get:function(){return this._maxSize},set:function(c){this._maxSize=Math.max(c,0);this._size>this._maxSize&&this._removeEntries()},enumerable:!0,configurable:!0});c.prototype.put=function(c,b,a){if(this._db.has(c)){var d=this._db.get(c);this._size-=d.size;this._db.delete(c);this._notifyRemoved(c,d.entry)}a>this._maxSize?this._notifyRemoved(c,b):void 0===b?console.warn("Refusing to cache undefined entry "):!a||0>a?console.warn("Refusing to cache entry with invalid size "+
a):(this._db.set(c,{entry:b,size:a}),this._size+=a,this._size>this._maxSize&&this._removeEntries())};c.prototype.pop=function(c){if(this._db.has(c)){var b=this._db.get(c);this._size-=b.size;this._db.delete(c);++this._hit;return b.entry}++this._miss};c.prototype.get=function(c){var b=this._db.get(c);if(void 0===b)++this._miss;else return this._db.delete(c),this._db.set(c,b),++this._hit,b.entry};c.prototype.getStats=function(){var c=this,b={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},a={};this._db.forEach(function(b,d){c._users.forEach(function(c){c=c.namespace;if(f.startsWith(d,c))return a[c]=(a[c]||0)+b.size,!1})});var d={};this._users.forEach(function(b){var c=b.namespace;!isNaN(b.hitRate)&&0<b.hitRate?(a[c]=a[c]||0,d[c]=Math.round(100*b.hitRate)+"%"):d[c]="0%"});var e=Object.keys(a);e.forEach(function(b){return a[b]=a[b]/c._size*100});e.sort(function(b,c){return a[c]-a[b]});e.forEach(function(c){return b[c]=
Math.round(a[c])+"% / "+d[c]});return b};c.prototype.resetStats=function(){this._hit=this._miss=0;this._users.forEach(function(c){return c.resetHitRate()})};c.prototype.clear=function(c){var b=this;this._db.forEach(function(a,d){f.startsWith(d,c)&&(b._size-=a.size,b._db.delete(d),b._notifyRemoved(d,a.entry))})};c.prototype.clearAll=function(){var c=this;this._db.forEach(function(b,a){c._notifyRemoved(a,b.entry)});this._size=0;this._db.clear()};c.prototype._getHitRate=function(){return this._hit/(this._hit+
this._miss)};c.prototype._notifyRemoved=function(c,b){this._removeFuncs.forEach(function(a){if(f.startsWith(c,a[0]))a[1](b)})};c.prototype._removeEntries=function(){var c=this;n.everyMap(this._db,function(b,a){c._size-=b.size;c._db.delete(a);c._notifyRemoved(a,b.entry);return c._size>.9*c.maxSize})};return c}();d.Storage=e})(h||(h={}));return h})},"esri/core/iteratorUtils":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.everyMap=Map.prototype.entries?
function(d,f){d=d.entries();for(var h=d.next();!h.done;h=d.next())if(!1===f(h.value[1],h.value[0]))return!1;return!0}:function(d,f){var h=!0;d.forEach(function(d,e){h&&(h=!1!==f(d,e))});return h}})},"esri/core/PooledArray":function(){define(["require","exports","./tsSupport/generatorHelper","./arrayUtils","./HeapSort"],function(h,d,n,f,l){return function(){function d(d){var c=this;this.data=[];this._length=0;this._allocator=null;this._deallocator=function(){};this._shrink=function(){};this._hint=
new f.RemoveHint;d&&(d.initialSize&&(this.data=Array(d.initialSize)),d.allocator?(this._allocator=d.allocator,this._deallocator=d.deallocator):"deallocator"in d&&(this._deallocator=d.deallocator),d.shrink&&(this._shrink=function(){c.data.length>2*c.length&&(c.data.length=c.length)}))}d.prototype.toArray=function(){return this.data.slice(0,this.length)};Object.defineProperty(d.prototype,"length",{get:function(){return this._length},set:function(d){if(d>this._length)if(this._allocator)for(;this._length<
d;)this.data[this._length++]=this._allocator(this.data[this._length]);else this._length=d;else{if(this._deallocator)for(var c=d;c<this._length;++c)this.data[c]=this._deallocator(this.data[c]);this._length=d;this._shrink()}},enumerable:!0,configurable:!0});d.prototype.clear=function(){this.length=0};d.prototype.equal=function(d){return f.equals(this.data,d.data)};d.prototype.push=function(d){return this.data[this._length++]=d};d.prototype.pushArray=function(d){for(var c=0;c<d.length;c++)this.data[this._length++]=
d[c];return this.back()};d.prototype.pushNew=function(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));++this._length;return this.back()};d.prototype.pop=function(){if(0!==this.length){var d=this.data[this.length-1];--this.length;this._shrink();return d}};d.prototype.removeMany=function(d){var c=this,e=[];this.data=this.data.filter(function(b,a){if(a>=c.length)return!1;if(0>d.indexOf(b))return!0;e.push(b);return!1});this._length=this.data.length;return e};d.prototype.iterableRemoveMany=
function(d,c){var e,b;return n(this,function(a){switch(a.label){case 0:e=[],b=0,a.label=1;case 1:return b<this.length?c()?[4]:[3,3]:[3,5];case 2:a.sent(),a.label=3;case 3:if(b>=this.length)return[3,5];0>d.indexOf(this.data[b])&&e.push(this.data[b]);a.label=4;case 4:return++b,[3,1];case 5:return this.data=e,this._length=this.data.length,[2]}})};d.prototype.removeUnordered=function(d){d=f.removeUnordered(this.data,d,this.length,this._hint);void 0!==d&&--this.length;return d};d.prototype.removeUnorderedMany=
function(d){d=f.removeUnorderedMany(this.data,d,this.length,this._hint);this.length-=d.length;return d};d.prototype.front=function(){if(0!==this.length)return this.data[0]};d.prototype.back=function(){if(0!==this.length)return this.data[this.length-1]};d.prototype.swapElements=function(d,c){var e;d>=this.length||c>=this.length||(e=[this.data[c],this.data[d]],this.data[d]=e[0],this.data[c]=e[1])};d.prototype.sort=function(d){l.sort(this.data,0,this.length,d)};d.prototype.iterableSort=function(d,c){return l.iterableSort(this.data,
0,this.length,d,c)};d.prototype.some=function(d,c){for(var e=0;e<this.length;++e)if(d.call(c,this.data[e],e,this.data))return!0;return!1};d.prototype.find=function(d,c){for(var e=0;e<this.length;++e){var b=this.data[e];if(d.call(c,b,e,this.data))return b}};d.prototype.filter=function(e,c,f){f=f||new d;for(var b=0;b<this.length;++b)e.call(c,this.data[b],b,this.data)&&f.push(this.data[b]);return f};d.prototype.forEach=function(d,c){for(var e=0;e<this.length;++e)d.call(c,this.data[e],e,this.data)};d.prototype.iterableForEach=
function(){var d;return n(this,function(c){switch(c.label){case 0:d=0,c.label=1;case 1:return d<this.length?[4,this.data[d]]:[3,4];case 2:c.sent(),c.label=3;case 3:return++d,[3,1];case 4:return[2]}})};d.prototype.map=function(d,c){for(var e=Array(this.length),b=0;b<this.length;++b)e[b]=d.call(c,this.data[b],b,this.data);return e};return d}()})},"esri/core/HeapSort":function(){define(["require","exports","./tsSupport/generatorHelper"],function(h,d,n){var f;(function(d){function f(c,d,b,a){for(var e=
d,f=b>>>1,g=c[e-1];d<=f;){d=e<<1;d<b&&0>a(c[d-1],c[d])&&++d;var h=c[d-1];if(0>=a(h,g))break;c[e-1]=h;e=d}c[e-1]=g}function e(c,d){return c<d?-1:c>d?1:0}d.sort=function(c,d,b,a){void 0===d&&(d=0);void 0===b&&(b=c.length);void 0===a&&(a=e);for(var g=b>>>1;g>d;g--)f(c,g,b,a);for(var h=d+1,g=b-1;g>d;g--)b=c[d],c[d]=c[g],c[g]=b,f(c,h,g,a)};d.iterableSort=function(c,d,b,a,g){var h,m,p;return n(this,function(k){switch(k.label){case 0:void 0===d&&(d=0),void 0===b&&(b=c.length),void 0===a&&(a=e),h=b>>>1,k.label=
1;case 1:return h>d?g&&g()?[4]:[3,3]:[3,5];case 2:k.sent(),k.label=3;case 3:f(c,h,b,a),k.label=4;case 4:return h--,[3,1];case 5:m=d+1,h=b-1,k.label=6;case 6:return h>d?g&&g()?[4]:[3,8]:[3,10];case 7:k.sent(),k.label=8;case 8:p=c[d],c[d]=c[h],c[h]=p,f(c,m,h,a),k.label=9;case 9:return h--,[3,6];case 10:return[2]}})}})(f||(f={}));return f})},"esri/core/watchUtils":function(){define(["require","exports","./promiseUtils"],function(h,d,n){function f(a,b,c,d,e){e=a.watch(b,function(b,e,f,g){d&&!d(b)||c.call(a,
b,e,f,g)},e);if(Array.isArray(b))for(var f=0;f<b.length;f++){var g=a.get(b[f]);d&&d(g)&&c.call(a,g,g,b,a)}else g=a.get(b),d&&d(g)&&c.call(a,g,g,b,a);return e}function l(a,b,c,d,e){function g(){k&&(k.remove(),k=null)}var h=!1,k,m=n.createDeferred(g),p={cancel:m.cancel,then:m.promise.then,catch:m.promise.catch,isCanceled:m.promise.isCanceled,isFulfilled:m.promise.isFulfilled,isRejected:m.promise.isRejected,isResolved:m.promise.isResolved,remove:g};Object.freeze(p);k=f(a,b,function(b,d,e,f){h=!0;g();
c&&c.call(a,b,d,e,f);m.resolve({value:b,oldValue:d,propertyName:e,target:f})},d,e);h&&g();return p}function g(a){return!!a}function e(a){return!a}function c(a){return!0===a}function p(a){return!1===a}function b(a){return void 0!==a}function a(a){return void 0===a}function m(a,b,c,d){var e=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];b=a.watch(b,c,d);for(d=0;d<e.length;d++){var f=e[d].trim(),g=a.get(f);c.call(a,g,g,f,a)}return b}Object.defineProperty(d,"__esModule",{value:!0});d.init=m;d.watch=
function(a,b,c,d){return a.watch(b,c,d)};d.once=function(a,b,c,d){return l(a,b,c,null,d)};d.when=function(a,b,c,d){return f(a,b,c,g,d)};d.whenOnce=function(a,b,c,d){return l(a,b,c,g,d)};d.whenNot=function(a,b,c,d){return f(a,b,c,e,d)};d.whenNotOnce=function(a,b,c,d){return l(a,b,c,e,d)};d.whenTrue=function(a,b,d,e){return f(a,b,d,c,e)};d.whenTrueOnce=function(a,b,d,e){return l(a,b,d,c,e)};d.whenFalse=function(a,b,c,d){return f(a,b,c,p,d)};d.whenFalseOnce=function(a,b,c,d){return l(a,b,c,p,d)};d.whenDefined=
function(a,c,d,e){return f(a,c,d,b,e)};d.whenDefinedOnce=function(a,c,d,e){return l(a,c,d,b,e)};d.whenUndefined=function(b,c,d,e){return f(b,c,d,a,e)};d.whenUndefinedOnce=function(b,c,d,e){return l(b,c,d,a,e)};d.pausable=function(a,b,c,d){var e=!1,f=a.watch(b,function(b,d,f,g){e||c.call(a,b,d,f,g)},d);return{remove:function(){f.remove()},pause:function(){e=!0},resume:function(){e=!1}}};d.on=function(a,b,c,d,e,f,g){function h(b){var d=k[b];d&&(f&&f(d.target,b,a,c),d.handle.remove(),delete k[b])}var k=
{},p=m(a,b,function(b,f,g){h(g);b&&"function"===typeof b.on&&(k[g]={handle:b.on(c,d),target:b},e&&e(b,g,a,c))},g);return{remove:function(){p.remove();for(var a in k)h(a)}}}})},"esri/layers/support/Tilemap":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),function(h,d,n,f,l,g,e){function c(c){var b;"vector-tile"===c.service.type?b=c.service.url+"/tilemap/"+c.level+"/"+c.row+"/"+c.col+"/"+c.width+
"/"+c.height:(b=c.service.tileServers,b=(b&&b.length?b[c.row%b.length]:c.service.url)+"/tilemap/"+c.level+"/"+c.row+"/"+c.col+"/"+c.width+"/"+c.height);(c=c.service.query)&&(b=b+"?"+c);return b}Object.defineProperty(d,"__esModule",{value:!0});h=function(){function d(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}d.prototype.getAvailability=function(b,a){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";b=(b-this.location.top)*this.location.width+
(a-this.location.left);a=b>>3;var c=this._tileAvailabilityBitSet;return 0>a||a>c.length?"unknown":c[a]&1<<b%8?"available":"unavailable"};d.prototype._updateFromData=function(b){for(var a=!0,c=!0,d=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),e=0,f=0;f<b.length;f++){var g=f%8;b[f]?(c=!1,d[e]|=1<<g):a=!1;7===g&&++e}this._isAllUnvailable=c;this._isAllAvailable=a;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=d,this.byteSize+=d.length)};d.fromDefinition=
function(b,a){var g=b.service.request||f,h=b.row,p=b.col,v=b.width,u=b.height,t={query:{f:"json"}};a=a?n({},t,a):t;return g(c(b),a).then(function(a){return a.data}).catch(function(a){if(a&&a.details&&422===a.details.httpStatus){a=[];for(var b=0,c=v*u;b<c;b++)a[b]=0;return{location:{top:h,left:p,width:v,height:u},valid:!0,data:a}}return e.reject(a)}).then(function(a){if(a.location&&(a.location.top!==h||a.location.left!==p||a.location.width!==v||a.location.height!==u))throw new l("tilemap:location-mismatch",
"Tilemap response for different location than requested",{response:a,definition:{top:h,left:p,width:v,height:u}});return d.fromJSON(a)})};d.fromJSON=function(b){d.validateJSON(b);var a=new d;a.location=Object.freeze(g.clone(b.location));a._updateFromData(b.data);return Object.freeze(a)};d.validateJSON=function(b){if(!b||!b.location)throw new l("tilemap:missing-location","Location missing from tilemap response");if(!1===b.valid)throw new l("tilemap:invalid","Tilemap response was marked as invalid");
if(!b.data)throw new l("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(b.data))throw new l("tilemap:data-mismatch","Data must be an array of numbers");if(b.data.length!==b.location.width*b.location.height)throw new l("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return d}();d.Tilemap=h;d.tilemapDefinitionId=function(c){return c.level+"/"+c.row+"/"+c.col+"/"+c.width+"/"+c.height};d.tilemapDefinitionUrl=c;d.default=h})},"esri/layers/mixins/OperationalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/MultiOriginJSONSupport ../../core/promiseUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/read ../../core/accessorSupport/write ../../webdoc/support/opacityUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){d=function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a.title="Layer";return a}n(d,c);e=d;d.prototype.writeListMode=function(b,c,d,e){e&&"ground"===e.layerContainerType?c[d]=b:b&&a.willPropertyWrite(this,d,{},e)&&(c[d]=b)};d.prototype.writeTitle=function(a,b){b.title=a||"Layer"};d.prototype.writeOperationalLayerType=function(a,b){a&&(b.layerType=a)};d.prototype.readOpacity=function(a,b,c){if(void 0!==b.opacity&&(!c||"web-map"===c.origin||"web-scene"===
c.origin))return b.opacity;if((!c||"service"===c.origin)&&b.drawingInfo&&void 0!==b.drawingInfo.transparency)return m.transparencyToOpacity(b.drawingInfo.transparency);if(b.layerDefinition&&b.layerDefinition.drawingInfo&&void 0!==b.layerDefinition.drawingInfo.transparency)return m.transparencyToOpacity(b.layerDefinition.drawingInfo.transparency)};d.prototype.read=function(a,c){var d=this,e=arguments;c&&(c.layer=this);b.readLoadable(this,a,function(b){return d.inherited(e,[a,b])},c);return this};d.prototype.write=
function(a,b){if(b&&b.origin){var c=b.origin+"/"+(b.layerContainerType||"operational-layers"),d=e.supportedTypes[c],d=d&&d[this.operationalLayerType];if("write"!==d&&"readwrite"!==d)return b.messages&&b.messages.push(new g("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+c+"'",{layer:this})),null}c=this.inherited(arguments,[a,b]);d=!!b&&!!b.messages&&!!b.messages.filter(function(a){return a instanceof g&&"web-document-write:property-required"===
a.name}).length;return!this.url&&d?null:c};var e;f([p.property({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],d.prototype,"id",void 0);f([p.property({json:{write:{ignoreOrigin:!0}}})],d.prototype,"listMode",void 0);f([p.writer("listMode")],d.prototype,"writeListMode",null);f([p.property({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],d.prototype,"title",void 0);f([p.writer("title")],
d.prototype,"writeTitle",null);f([p.property({type:String,json:{write:{target:"layerType",ignoreOrigin:!0}}})],d.prototype,"operationalLayerType",void 0);f([p.writer("operationalLayerType")],d.prototype,"writeOperationalLayerType",null);f([p.property({type:Number,json:{origins:{"web-document":{default:1,write:!0}}}})],d.prototype,"opacity",void 0);f([p.reader("opacity",["opacity","layerDefinition.drawingInfo.transparency","drawingInfo.transparency"])],d.prototype,"readOpacity",null);f([p.property({type:Boolean,
json:{read:{source:"visibility"},write:{target:"visibility"},origins:{"web-document":{read:{source:"visibility"},write:{target:"visibility"},default:!0}}}})],d.prototype,"visible",void 0);return d=e=f([p.subclass("esri.layers.mixins.OperationalLayer")],d)}(p.declared(l,e));(function(a){a.typeModuleMap={ArcGISFeatureLayer:function(){return c.create(function(a){return h(["../FeatureLayer"],a)})},ArcGISImageServiceLayer:function(){return c.create(function(a){return h(["../ImageryLayer"],a)})},ArcGISImageServiceVectorLayer:function(){return c.resolve(null)},
ArcGISMapServiceLayer:function(){return c.create(function(a){return h(["../MapImageLayer"],a)})},ArcGISSceneServiceLayer:function(){return c.create(function(a){return h(["../SceneLayer"],a)})},ArcGISStreamLayer:function(){return c.create(function(a){return h(["../StreamLayer"],a)})},ArcGISTiledElevationServiceLayer:function(){return c.create(function(a){return h(["../ElevationLayer"],a)})},ArcGISTiledImageServiceLayer:function(){return c.create(function(a){return h(["../TileLayer"],a)})},ArcGISTiledMapServiceLayer:function(){return c.create(function(a){return h(["../TileLayer"],
a)})},BingMapsAerial:function(){return c.create(function(a){return h(["../BingMapsLayer"],a)})},BingMapsRoad:function(){return c.create(function(a){return h(["../BingMapsLayer"],a)})},BingMapsHybrid:function(){return c.create(function(a){return h(["../BingMapsLayer"],a)})},BuildingSceneLayer:function(){return c.create(function(a){return h(["../BuildingSceneLayer"],a)})},CSV:function(){return c.create(function(a){return h(["../CSVLayer"],a)})},GeoRSS:function(){return c.create(function(a){return h(["../GeoRSSLayer"],
a)})},GroupLayer:function(){return c.create(function(a){return h(["../GroupLayer"],a)})},IntegratedMeshLayer:function(){return c.create(function(a){return h(["../IntegratedMeshLayer"],a)})},KML:function(){return c.create(function(a){return h(["../KMLLayer"],a)})},OpenStreetMap:function(){return c.create(function(a){return h(["../OpenStreetMapLayer"],a)})},PointCloudLayer:function(){return c.create(function(a){return h(["../PointCloudLayer"],a)})},VectorTileLayer:function(){return c.create(function(a){return h(["../VectorTileLayer"],
a)})},WebTiledLayer:function(){return c.create(function(a){return h(["../WebTileLayer"],a)})},WMS:function(){return c.create(function(a){return h(["../WMSLayer"],a)})}};a.supportedTypes={"web-scene/operational-layers":{ArcGISFeatureLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISSceneServiceLayer:"readwrite",ArcGISTiledElevationServiceLayer:"read",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",BuildingSceneLayer:"readwrite",
GroupLayer:"readwrite",IntegratedMeshLayer:"readwrite",PointCloudLayer:"readwrite",WebTiledLayer:"readwrite",CSV:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite"},"web-scene/basemap":{ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",WebTiledLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",WMS:"readwrite",ArcGISMapServiceLayer:"readwrite"},"web-scene/ground":{ArcGISTiledElevationServiceLayer:"readwrite"},
"web-map/operational-layers":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISStreamLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",ArcGISFeatureLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite",CSV:"readwrite",GeoRSS:"readwrite",KML:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite"},"web-map/basemap":{ArcGISImageServiceLayer:"readwrite",
ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite"}}})(d||(d={}));return d})},"esri/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(h,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.opacityToTransparency=function(d){d=n.ensureInteger(100*(1-d));return Math.max(0,Math.min(d,100))};d.transparencyToOpacity=function(d){return Math.max(0,Math.min(1-d/100,1))}})},"esri/layers/mixins/PortalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../portal/Portal ../../portal/PortalItem".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){var k=e.getLogger("esri.layers.mixins.PortalLayer");return function(d){function e(){return null!==d&&d.apply(this,arguments)||this}n(e,d);Object.defineProperty(e.prototype,"portalItem",{set:function(a){a!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",a))},enumerable:!0,configurable:!0});e.prototype.writePortalItem=function(a,b,c){a&&a.id&&(b.itemId=a.id)};e.prototype.loadFromPortal=function(a){var b=this;return this.portalItem&&
this.portalItem.id?c.create(function(a){return h(["../../portal/support/layersLoader"],a)}).then(function(c){return c.load({instance:b,supportedTypes:a.supportedTypes,validateItem:a.validateItem,supportsData:a.supportsData}).catch(function(a){k.warn("Failed to load layer ("+b.title+", "+b.id+") portal item ("+b.portalItem.id+")\n  "+a);throw a;})}):c.resolve()};e.prototype.read=function(a,b){b&&(b.layer=this);return this.inherited(arguments)};e.prototype.write=function(b,c){var d=c&&c.portal,e=this.portalItem&&
this.portalItem.id&&(this.portalItem.portal||a.getDefault());return d&&e&&!p.hasSamePortal(e.restUrl,d.restUrl)?(c.messages&&c.messages.push(new g("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)};f([b.property({type:m})],
e.prototype,"portalItem",null);f([b.writer("portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null);return e=f([b.subclass("esri.layers.mixins.PortalLayer")],e)}(b.declared(l))})},"esri/layers/support/commonProperties":function(){define("require exports ../../core/urlUtils ../../core/accessorSupport/PropertyOrigin ../../core/accessorSupport/utils ../../core/accessorSupport/write ../../symbols/support/ElevationInfo".split(" "),function(h,d,n,f,l,g,e){Object.defineProperty(d,"__esModule",
{value:!0});d.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(c,d){if(null==d.screenSizePerspective&&"defaults"===this.originOf("screenSizePerspectiveEnabled"))l.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,f.OriginId.DEFAULTS);else return d.screenSizePerspective}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(c,d,b,a){"defaults"===this.originOf("screenSizePerspectiveEnabled")&&
c?d[b]=c:g.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},a)&&(d[b]=c)}}}}}};d.popupEnabled={type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(c,d){return!d.disablePopup}},write:{target:"disablePopup",writer:function(c,d,b){d[b]=!c}}}};d.labelsVisible={type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}};d.url={type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writer:n.write}}};d.legendEnabled={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},
read:{source:"showLegend"},write:{target:"showLegend"}}};d.elevationInfo={value:null,type:e,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}};d.readOnlyService=function(c){return{type:c,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../support/arcadeUtils ./unitConversionUtils".split(" "),
function(h,d,n,f,l,g,e,c,p){var b=g.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),a=g({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),m=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);d=b;Object.defineProperty(b.prototype,"requiredFields",{get:function(){return c.extractFieldNames(this.expression)},enumerable:!0,configurable:!0});
b.prototype.clone=function(){return new d({expression:this.expression,title:this.title})};var d;f([e.property({type:String,json:{write:!0}})],b.prototype,"expression",void 0);f([e.property({readOnly:!0,dependsOn:["expression"]})],b.prototype,"requiredFields",null);f([e.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);return b=d=f([e.subclass("esri.layers.support.FeatureExpressionInfo")],b)}(e.declared(l));return function(c){function d(){return null!==c&&c.apply(this,arguments)||
this}n(d,c);g=d;d.prototype.readFeatureExpressionInfo=function(a,b){if(null!=a)return a;if(b.featureExpression&&0===b.featureExpression.value)return{expression:"0"}};d.prototype.writeFeatureExpressionInfo=function(a,b,c,d){b[c]=a.write(null,d);"0"===a.expression&&(b.featureExpression={value:0})};Object.defineProperty(d.prototype,"mode",{get:function(){return this._isOverridden("mode")?this._get("mode"):null!=this.offset||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(a){this._override("mode",
a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"unit",{set:function(a){this._set("unit",a)},enumerable:!0,configurable:!0});d.prototype.write=function(a,b){return this.offset||this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null};d.prototype.clone=function(){return new g({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};var g;f([e.property({type:m,json:{write:!0}})],
d.prototype,"featureExpressionInfo",void 0);f([e.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],d.prototype,"readFeatureExpressionInfo",null);f([e.writer("featureExpressionInfo",{featureExpressionInfo:{type:m},"featureExpression.value":{type:[0]}})],d.prototype,"writeFeatureExpressionInfo",null);f([e.property({type:b.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:b.jsonValues,read:b.read,write:{writer:b.write,isRequired:!0}}})],d.prototype,
"mode",null);f([e.property({type:Number,json:{write:!0}})],d.prototype,"offset",void 0);f([e.property({type:p.supportedUnits,json:{type:String,read:a.read,write:a.write}})],d.prototype,"unit",null);return d=g=f([e.subclass("esri.layers.support.ElevationInfo")],d)}(e.declared(l))})},"esri/support/arcadeUtils":function(){define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang ../core/promiseUtils ../renderers/visualVariables/support/sizeVariableUtils".split(" "),
function(h,d,n,f,l,g,e,c){function p(a){var b;try{b=a?n.parseScript(a):null}catch(v){b=null}return b}function b(a){a=p(a);return!!a&&n.scriptUsesGeometryEngine(a)}Object.defineProperty(d,"__esModule",{value:!0});var a=/^\$feature\./i,m={vars:{$feature:"any",$view:"any"},spatialReference:null};d.createSyntaxTree=p;d.createFunction=function(a,b){b=b||g.clone(m);a="string"===typeof a?p(a):a;if(!a)return null;var c;try{c=a?n.compileScript(a,b):null}catch(u){c=null}return c};d.createExecContext=function(a,
b){return{vars:{$feature:null==a?new l:l.createFromGraphic(a),$view:b&&b.view},spatialReference:b&&b.sr}};d.createFeature=function(a,b,c){return l.createFromGraphicLikeObject(b,a,c)};d.updateExecContext=function(a,b){a.vars.$feature=b};d.evalSyntaxTree=function(a,b){var c;try{c=n.executeScript(a,b,b.spatialReference)}catch(u){c=null}return c};d.executeFunction=function(a,b){var c;try{c=a?a(b,b.spatialReference):null}catch(u){c=null}return c};d.executeAsyncFunction=function(a,b){try{return a?a(b,b.spatialReference):
e.resolve(null)}catch(v){return e.resolve(null)}};d.extractFieldNames=function(b){if(!b)return[];b="string"===typeof b?p(b):b;if(!b)return[];var c=[];n.extractFieldLiterals(b).forEach(function(b){a.test(b)&&(b=b.replace(a,""),c.push(b))});c.sort();return c.filter(function(a,b){return 0===b||c[b-1]!==a})};d.dependsOnView=function(a){return n.referencesMember(a,"$view")};d.getViewInfo=function(a){if(a&&a.viewingMode&&null!=a.scale&&a.spatialReference)return{view:new f({viewingMode:a.viewingMode,scale:a.scale}),
sr:a.spatialReference}};d.convertServiceUrlToWorkspace=function(a,b){var c=n.featureSetUtils();return c?c.createFeatureSetCollectionFromService(a,b):null};d.convertFeatureLayerToFeatureSet=function(a,b){if(null===a)return null;var c=n.featureSetUtils();return c?c.constructFeatureSet(a,b):null};d.convertMapToFeatureSetCollection=function(a){if(null===a||null===a.map)return null;var b=n.featureSetUtils();return b?b.createFeatureSetCollectionFromMap(a.map,a.spatialReference):null};d.loadScriptDependencies=
function(a,b,c){void 0===c&&(c=[]);return n.loadScriptDependencies(a,b,c)};d.enableGeometryOperations=function(){return n.enableGeometrySupport()};d.enableFeatureSetOperations=function(){return n.enableFeatureSetSupport()};d.applyTextFormattingHTML=function(a){var b=/(\n)/gi;return"string"===typeof a?a.replace(b,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):a};d.hasGeometryOperations=function(a){if(!a)return!1;if("simple"===a.type||"class-breaks"===a.type||"unique-value"===a.type){var d=a.visualVariables,
d=!!d&&d.some(function(a){var d=b(a.valueExpression);"size"===a.type&&(c.isSizeVariable(a.minSize)&&(d=d||b(a.minSize.valueExpression)),c.isSizeVariable(a.maxSize)&&(d=d||b(a.maxSize.valueExpression)));return d});return"valueExpression"in a&&b(a.valueExpression)?!0:d}return"esri.layers.support.LabelClass"===a.declaredClass?(a=a.labelExpressionInfo&&a.labelExpressionInfo.expression,!(!a||!b(a))||!1):"esri.PopupTemplate"===a.declaredClass?!!a.expressionInfos&&a.expressionInfos.some(function(a){return b(a.expression)}):
!1}})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis ../core/has ../core/promiseUtils".split(" "),function(h,d,n,f,l,g,e,c){function p(a,b){if(null===x)throw Error("Async Arcade must be enabled for this script");return e("csp-restrictions")||!1===z?function(b,c){return x.executeScript(a,b,c)}:n.compileScript(a,b,!0)}function b(a,b){void 0===b&&(b=[]);return l.parseScript(a,b)}function a(a,b,c){if(!0===b.useAsync||!0===a.isAsync){if(null===
x)throw Error("Async Arcade must be enabled for this script");return x.executeScript(a,b,c)}return f.executeScript(a,b,c)}function m(a,b){return f.referencesMember(a,b)}function k(a){void 0===a.usesGeometry&&g.findScriptDependencies(a);return!0===a.usesGeometry}function q(){return y?y:y=c.create(function(a,b){h(["../geometry/geometryEngine","./functions/geomsync"],function(b,c){A=!0;c.setGeometryEngine(b);a(!0)},function(a){b(a)})})}function v(){return null!==E?E:E=n.enableAsyncSupport().then(function(){return c.create(function(a,
b){h(["./arcadeAsyncRuntime"],function(c){try{x=c;c=0;for(var d=C;c<d.length;c++){var e=d[c];x.extend(e);n.extend(e,"async")}C=null;a(!0)}catch(K){b(K)}},b)})})}function u(){return x?!0:!1}function t(){return D?D:D=v().then(function(){return c.create(function(a,b){h(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(c,d,e,f,g){try{F=c,x.extend([d,e,f,g]),n.extend([d,e,f,g],"async"),B=!0,a(!0)}catch(Q){b(Q)}},
b)})})}function r(a){void 0===a.usesFeatureSet&&g.findScriptDependencies(a);return!0===a.usesFeatureSet}function w(a,b){if(b)for(var c=0;c<b.length;c++)if(m(a,b[c]))return!0;return!1}Object.defineProperty(d,"__esModule",{value:!0});var z=function(a){try{return eval(a),!0}catch(P){return!1}}("function* test() {}"),B=!1,A=!1,x=null,C=[];d.compileScript=function(a,b){return!0===b.useAsync||!0===a.isAsync?p(a,b):e("csp-restrictions")?function(b,c){return f.executeScript(a,b,c)}:n.compileScript(a,b)};
d.extend=function(a){f.extend(a);n.extend(a,"sync");null===x?C.push(a):(n.extend(a,"async"),x.extend(a))};d.parseScript=b;d.validateScript=function(a,b,c){void 0===c&&(c="");return l.validateScript(a,b,c)};d.scriptCheck=function(a,b,c,d){void 0===d&&(d="");return l.scriptCheck(a,b,c,d)};d.parseAndExecuteScript=function(b,c,d,e){void 0===e&&(e=[]);b=l.parseScript(b,e);return a(b,c,d)};d.executeScript=a;d.referencesMember=m;d.referencesFunction=function(a,b){return f.referencesFunction(a,b)};d.extractFieldLiterals=
function(a,b){void 0===b&&(b=!1);return l.extractFieldLiterals(a,b)};d.scriptUsesGeometryEngine=k;var y=null;d.enableGeometrySupport=q;var E=null;d.enableAsyncSupport=v;d.isFeatureSetSupportEnabled=function(){return B};d.isAsyncEnabled=u;d.isGeometryEnabled=function(){return A};var D=null;d.enableFeatureSetSupport=t;d.scriptUsesFeatureSet=r;d.scriptIsAsync=function(a){void 0===a.isAsync&&g.findScriptDependencies(a);return!0===a.isAsync};d.loadScriptDependencies=function(a,d,e,f){void 0===e&&(e=[]);
void 0===f&&(f=!1);return c.create(function(g,h){var m="string"===typeof a?b(a):a,p=[];m&&(!1===A&&(k(m)||f)&&p.push(q()),!1===u()&&(!0===m.isAsync||d)&&p.push(v()),!1===B&&(r(m)||w(m,e))&&p.push(t()));p?c.all(p).then(function(){g(!0)},h):g(!0)})};d.scriptTouchesGeometry=function(a){if(k(a))return!0;a=g.findFunctionCalls(a,!0);return-1<a.indexOf("geometry")||-1<a.indexOf("feature")?!0:!1};var F=null;d.featureSetUtils=function(){return F}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A){function x(a,b,c){try{return c(a,null,b)}catch(Da){throw Da;}}function C(a){return a instanceof Error?v.reject(a):v.reject(Error(a))}function y(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return P(a,b);case "VariableDeclaration":for(var d=[],e=0;e<b.declarations.length;e++)d.push(y(a,b.declarations[e]));return d.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return L(a,
b);case "FunctionDeclaration":var f=b.id.name.toLowerCase(),g={isAsync:a.isAsync,applicationCache:void 0===a.applicationCache?null:a.applicationCache,spatialReference:a.spatialReference,console:a.console,lrucache:a.lrucache,services:a.services,symbols:a.symbols,mangleMap:a.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<g.depthCounter)throw Error("Exceeded maximum function depth");for(var d="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n",
h=0;h<b.params.length;h++){var k=b.params[h].name.toLowerCase(),m=H(k,a);g.localScope._SymbolsMap[k]=m;g.mangleMap[k]=m;d+="lscope['"+m+"']\x3darguments["+h.toString()+"];\n"}!0===a.isAsync?(d=d+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(L(g,b.body)+"\n return lastStatement;"),d+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(d+=L(g,b.body)+"\n return lastStatement; }, runtimeCtx))",d+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==a.globalScope[f]?
e="gscope['"+f+"']\x3d"+d:void 0!==a.globalScope._SymbolsMap[f]?e="gscope['"+a.globalScope._SymbolsMap[f]+"']\x3d"+d:(m=H(f,a),a.globalScope._SymbolsMap[f]=m,a.mangleMap[f]=m,e="gscope['"+m+"']\x3d"+d);return e;case "ReturnStatement":var p;p=null===b.argument?"return lc.voidOperation;":"return "+y(a,b.argument)+";";return p;case "IfStatement":if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(c.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var l=y(a,b.test),q=W(a),n="var "+q+" \x3d "+l+";\n if ("+q+" \x3d\x3d\x3d true) {\n"+F(a,b.consequent)+"\n }\n",n=null!==b.alternate?n+("else if ("+q+"\x3d\x3d\x3dfalse)   { \n"+F(a,b.alternate)+"}\n"):n+("else if ("+q+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return n+="else { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var r;r="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+
y(a,b.expression)+" \n ":"lastStatement \x3d "+y(a,b.expression)+";";return r;case "AssignmentExpression":return D(a,b);case "UpdateExpression":return E(a,b);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":d="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(d+=y(a,b.init));var x=W(a),t=W(a),d=d+("var "+x+" \x3d true;")+"\n do { ";null!==b.update&&(d+=" if ("+x+"\x3d\x3d\x3dfalse) {\n "+y(a,b.update)+"  \n}\n "+x+"\x3dfalse; \n");null!==b.test&&
(d+="var "+t+" \x3d "+y(a,b.test)+";",d+="if ("+t+"\x3d\x3d\x3dfalse) { break; } else if ("+t+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");d+=y(a,b.body);null!==b.update&&(d+="\n "+y(a,b.update));return d+("\n"+x+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;");case "ForInStatement":var C=W(a),v=W(a),u=W(a),w="var "+C+" \x3d "+y(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(w+=y(a,b.left));var z="VariableDeclaration"===
b.left.type?b.left.declarations[0].id.name:b.left.name,z=z.toLowerCase(),d="";null!==a.localScope&&(void 0!==a.localScope[z]?d="lscope['"+z+"']":void 0!==a.localScope._SymbolsMap[z]&&(d="lscope['"+a.localScope._SymbolsMap[z]+"']"));""===d&&(void 0!==a.globalScope[z]?d="gscope['"+z+"']":void 0!==a.globalScope._SymbolsMap[z]&&(d="gscope['"+a.globalScope._SymbolsMap[z]+"']"));w=w+("if ("+C+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+C+") || lc.isString("+
C+")) {")+("var "+v+"\x3d"+C+".length; \n")+("for(var "+u+"\x3d0; "+u+"\x3c"+v+"; "+u+"++) {\n");w+=d+"\x3d"+u+";\n";w+=y(a,b.body);w+="\n}\n";w+=" lastStatement \x3d lc.voidOperation; \n";w+=" \n}\n";w+="else if (lc.isImmutableArray("+C+")) {";w=w+("var "+v+"\x3d"+C+".length(); \n")+("for(var "+u+"\x3d0; "+u+"\x3c"+v+"; "+u+"++) {\n");w+=d+"\x3d"+u+";\n";w+=y(a,b.body);w+="\n}\n";w+=" lastStatement \x3d lc.voidOperation; \n";w+=" \n}\n";w+="else if (( "+C+" instanceof lang.Dictionary) || ( "+C+" instanceof lang.Feature)) {";
w=w+("var "+v+"\x3d"+C+".keys(); \n")+("for(var "+u+"\x3d0; "+u+"\x3c"+v+".length; "+u+"++) {\n");w+=d+"\x3d"+v+"["+u+"];\n";w+=y(a,b.body);w+="\n}\n";w+=" lastStatement \x3d lc.voidOperation; \n";w+=" \n}\n";a.isAsync&&(w+="else if (lc.isFeatureSet("+C+")) {",w=w+("var "+v+"\x3d"+C+".iterator(runtimeCtx.progressTracker); \n")+("for(var "+u+"\x3dlang. graphicToFeature( yield "+v+".next(),"+C+"); "+u+"!\x3dnull; "+u+"\x3dlang. graphicToFeature( yield "+v+".next(),"+C+")) {\n")+(d+"\x3d"+u+";\n"),w+=
y(a,b.body),w+="\n}\n",w+=" lastStatement \x3d lc.voidOperation; \n",w+=" \n}\n");return w+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return I(a,b);case "MemberExpression":var A;try{d=void 0,d=!0===b.computed?y(a,b.property):"'"+b.property.name+"'",A="lang.member("+y(a,b.object)+","+d+")"}catch(Y){throw Y;}return A;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(c.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));
case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(c.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var B=b.callee.name.toLowerCase(),e="";null!==a.localScope&&(void 0!==a.localScope[B]?e="lscope['"+B+"']":void 0!==a.localScope._SymbolsMap[B]&&(e="lscope['"+a.localScope._SymbolsMap[B]+"']"));""===e&&(void 0!==a.globalScope[B]?e="gscope['"+B+"']":void 0!==a.globalScope._SymbolsMap[B]&&(e="gscope['"+a.globalScope._SymbolsMap[B]+"']"));if(""!==e){f="[";for(g=0;g<b.arguments.length;g++)0<
g&&(f+=", "),f+=y(a,b.arguments[g]);f+="]";d=a.isAsync?"(yield lang.callfunc("+e+","+f+",runtimeCtx) )":"lang.callfunc("+e+","+f+",runtimeCtx)"}else throw Error(c.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(Y){throw Y;}return d;case "UnaryExpression":var Q;try{Q="lang.unary("+y(a,b.argument)+",'"+b.operator+"')"}catch(Y){throw Y;}return Q;case "BinaryExpression":var qa;try{qa="lang.binary("+y(a,b.left)+","+y(a,b.right)+",'"+b.operator+"')"}catch(Y){throw Y;}return qa;case "LogicalExpression":var ja;
try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(c.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(c.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)ja="(lang.logicalCheck("+y(a,b.left)+") "+b.operator+" lang.logicalCheck("+y(a,b.right)+"))";else throw Error(c.nodeErrorMessage("LogicalExpression",
"RUNTIME","ONLYORORAND"));}catch(Y){throw Y;}return ja;case "ConditionalExpression":throw Error(c.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{d=[];for(e=0;e<b.elements.length;e++)"Literal"===b.elements[e].type?d.push(y(a,b.elements[e])):d.push("lang.aCheck("+y(a,b.elements[e])+",'ArrayExpression')");h="["+d.join(",")+"]"}catch(Y){throw Y;}return h;case "ObjectExpression":d="lang.dictionary([";for(e=0;e<b.properties.length;e++){var ta=b.properties[e],pa="Identifier"===
ta.key.type?"'"+ta.key.name+"'":y(a,ta.key),M=y(a,ta.value);0<e&&(d+=",");d+="lang.strCheck("+pa+",'ObjectExpression'),lang.aCheck("+M+", 'ObjectExpression')"}return d+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(c.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));default:throw Error(c.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Y){throw Y;}}function E(a,b){var c=null,d="";if("MemberExpression"===b.argument.type)return c=y(a,b.argument.object),d=!0===b.argument.computed?
y(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+d+",'"+b.operator+"',"+b.prefix+")";c=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+"',"+b.prefix+")";
if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function D(a,b){var c=y(a,b.right),d=null,e="";if("MemberExpression"===b.left.type)return d=y(a,b.left.object),e=!0===b.left.computed?y(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+d+","+e+",'"+b.operator+"',"+c+");";d=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+
d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"']); ";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"']); "}if(void 0!==a.globalScope[d])return"gscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"']); ";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+
"']); ";throw Error("Variable not recognised");}function F(a,b){return"BlockStatement"===b.type?y(a,b):"ReturnStatement"===b.type?y(a,b):"BreakStatement"===b.type?y(a,b):"ContinueStatement"===b.type?y(a,b):"UpdateExpression"===b.type?"lastStatement \x3d "+y(a,b)+";":"ExpressionStatement"===b.type?y(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+y(a,b)+";":y(a,b)}function L(a,b){for(var c="",d=0;d<b.body.length;d++)c="ReturnStatement"===b.body[d].type?c+(y(a,b.body[d])+" \n"):"BreakStatement"===
b.body[d].type?c+(y(a,b.body[d])+" \n"):"ContinueStatement"===b.body[d].type?c+(y(a,b.body[d])+" \n"):"UpdateExpression"===b.body[d].type?c+("lastStatement \x3d "+y(a,b.body[d])+"; \n"):"ObjectExpression"===b.body[d].type?c+("lastStatement \x3d "+y(a,b.body[d])+"; \n"):c+(y(a,b.body[d])+" \n");return c}function P(a,b){var c=null===b.init?null:y(a,b.init);c===e.voidOperation&&(c=null);b=b.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+b+"']\x3d"+c+";";if(void 0!==
a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+c+";";var d=H(b,a);a.localScope._SymbolsMap[b]=d;a.mangleMap[b]=d;return"lscope['"+d+"']\x3d"+c+";"}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+c+";";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+a.globalScope._SymbolsMap[b]+"']\x3d"+c+";";d=H(b,a);a.globalScope._SymbolsMap[b]=d;a.mangleMap[b]=d;return"gscope['"+d+"']\x3d"+c+";"}function M(a,b,d){b=b.toLowerCase();switch(b){case "hasz":return a=
a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(d=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(d=!1),d&&(ga++,b=a.spatialReference._arcadeCacheId=ga)),a=new n({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=
a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=a.cache._arcadeCacheId,void 0===b&&(ga++,b=ga,a.cache._arcadeCacheId=b),a=new l(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=a.cache._arcadeCacheId,void 0===b&&(ga++,b=ga,a.cache._arcadeCacheId=
b),a=new l(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=a.cache._arcadeCacheId,void 0===b&&(ga++,b=ga,a.cache._arcadeCacheId=b),a=new g(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(c.nodeErrorMessage(d,"RUNTIME","PROPERTYNOTFOUND"));}function I(a,b){try{var d=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+
d+"']";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']"}if(void 0!==a.globalScope[d])return"gscope['"+d+"']";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']";throw Error(c.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(Da){throw Da;}}function ba(a){return null===a?"":e.isArray(a)||e.isImmutableArray(a)?"Array":e.isDate(a)?"Date":e.isString(a)?"String":e.isBoolean(a)?"Boolean":e.isNumber(a)?"Number":a instanceof
n?"Dictionary":a instanceof f?"Feature":a instanceof w?"Point":a instanceof z?"Polygon":a instanceof B?"Polyline":a instanceof r?"Multipoint":a instanceof u?"Extent":e.isFunctionParameter(a)?"Function":e.isFeatureSet(a)?"FeatureSet":e.isFeatureSetCollection(a)?"FeatureSetCollection":a===e.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function K(a,b,c,d){try{if(e.equalityTest(b[c],d))return b[c+1];var f=b.length-c;return 1===f?b[c]:2===f?null:3===f?b[c+2]:K(a,b,c+2,d)}catch(fa){throw fa;
}}function S(a,b,c,d){try{if(!0===d)return b[c+1];if(3===b.length-c)return b[c+2];var f=b[c+2];if(!1===e.isBoolean(f))throw Error("WHEN needs boolean test conditions");return S(a,b,c+2,f)}catch(fa){throw fa;}}function Q(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=Q(a.slice(0,d),b);a=Q(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?
(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function J(a,b){try{var c=a.length,d=Math.floor(c/2);if(0===c)return v.resolve([]);if(1===c)return v.resolve([a[0]]);var e=[J(a.slice(0,d),b),J(a.slice(d,c),b)];return v.all(e).then(function(a){return R(a[0],a[1],b,[])})}catch(fa){return v.reject(fa)}}function R(a,b,c,d){return v.create(function(e,f){0<a.length||0<b.length?0<a.length&&0<b.length?c(a[0],b[0]).then(function(g){try{isNaN(g)&&(g=1),0>=g?(d.push(a[0]),a=a.slice(1)):
(d.push(b[0]),b=b.slice(1)),R(a,b,c,d).then(function(a){e(a)},f)}catch(ua){f(ua)}},f):0<a.length?(d.push(a[0]),a=a.slice(1),R(a,b,c,d).then(function(a){e(a)},f)):0<b.length&&(d.push(b[0]),b=b.slice(1),R(a,b,c,d).then(function(a){e(a)},f)):e(d)})}function H(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}function W(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function aa(a,b,c){var d={};a||(a={});c||(c={});d._SymbolsMap={};d.textformatting=
1;d.infinity=1;d.pi=1;for(var e in b)d[e]=1;for(e in c)d[e]=1;for(e in a)d[e]=1;return d}function ia(a,b){for(var d={mode:b,compiled:!0,functions:{},signatures:[],failDefferred:C,standardFunction:x,standardFunctionAsync:x,evaluateIdentifier:V},f=0;f<a.length;f++)a[f].registerFunctions(d);if("sync"===b){for(var g in d.functions)da[g]=new e.NativeFunction(d.functions[g]),sa.prototype[g]=da[g];for(f=0;f<d.signatures.length;f++)c.addFunctionDeclaration(d.signatures[f],"sync")}else{for(g in d.functions)ja[g]=
new e.NativeFunction(d.functions[g]),na.prototype[g]=ja[g];for(f=0;f<d.signatures.length;f++)c.addFunctionDeclaration(d.signatures[f],"async")}}function V(a,b){b=b.name;if("_SymbolsMap"===b)throw"Illegal";if(0<a.localStack.length){if("_t"!==b.substr(0,2).toLowerCase()&&void 0!==a.localStack[a.localStack.length-1][b])return a.localStack[a.localStack.length-1][b];var c=a.mangleMap[b];if(void 0!==c&&void 0!==a.localStack[a.localStack.length-1][c])return a.localStack[a.localStack.length-1][c]}if("_t"!==
b.substr(0,2).toLowerCase()&&void 0!==a.globalScope[b]||1===a.globalScope._SymbolsMap[b])return a.globalScope[b];b=a.mangleMap[b];if(void 0!==b)return a.globalScope[b]}function Z(a){console.log(a)}Object.defineProperty(d,"__esModule",{value:!0});var ga=0,da={};p.registerFunctions(da,x);q.registerFunctions(da,x);m.registerFunctions(da,x);b.registerFunctions(da,x);k.registerFunctions(da,x);da["typeof"]=function(a,b){return x(a,b,function(a,b,c){e.pcCheck(c,1,1);a=ba(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");
return a})};da.iif=function(a,b){try{return x(a,b,function(a,b,c){e.pcCheck(c,3,3);if(!1===e.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(ra){throw ra;}};da.decode=function(a,b){try{return x(a,b,function(b,c,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-1)%2)throw Error("Must have a default value result.");return K(a,d,1,d[0])})}catch(ra){throw ra;}};da.when=function(a,b){try{return x(a,
b,function(b,c,d){if(3>d.length)throw Error("Missing Parameters");if(0===d.length%2)throw Error("Must have a default value result.");b=d[0];if(!1===e.isBoolean(b))throw Error("WHEN needs boolean test conditions");return S(a,d,0,b)})}catch(ra){throw ra;}};da.top=function(a,b){return x(a,b,function(a,b,c){e.pcCheck(c,2,2);if(e.isArray(c[0]))return e.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,e.toNumber(c[1]));if(e.isImmutableArray(c[0]))return e.toNumber(c[1])>=c[0].length()?c[0].slice(0):
c[0].slice(0,e.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};da.first=function(a,b){return x(a,b,function(a,b,c){e.pcCheck(c,1,1);return e.isArray(c[0])?0===c[0].length?null:c[0][0]:e.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};da.sort=function(a,b){return x(a,b,function(b,c,d){e.pcCheck(d,1,2);c=d[0];e.isImmutableArray(c)&&(c=c.toArray());if(!1===e.isArray(c))throw Error("Illegal Argument");if(1<d.length){if(!1===e.isFunctionParameter(d[1]))throw Error("Illegal Argument");
var f=function(a,c){return ya.callfunc(d[1],[a,c],b)};return a.isAsync?J(c,f):c=Q(c,function(a,b){return f(a,b)})}if(0===c.length)return[];for(var g={},h=0;h<c.length;h++){var k=ba(c[h]);""!==k&&(g[k]=!0)}if(!0===g.Array||!0===g.Dictionary||!0===g.Feature||!0===g.Point||!0===g.Polygon||!0===g.Polyline||!0===g.Multipoint||!0===g.Extent||!0===g.Function)return c.slice(0);var h=0,k="",m;for(m in g)h++,k=m;return c=1<h||"String"===k?Q(c,function(a,b){if(null===a||void 0===a||a===e.voidOperation)return null===
b||void 0===b||b===e.voidOperation?0:1;if(null===b||void 0===b||b===e.voidOperation)return-1;a=e.toString(a);b=e.toString(b);return a<b?-1:a===b?0:1}):"Number"===k?Q(c,function(a,b){return a-b}):"Boolean"===k?Q(c,function(a,b){return a===b?0:b?-1:1}):"Date"===k?Q(c,function(a,b){return b-a}):c.slice(0)})};var ja={},pa;for(pa in da)ja[pa]=new e.NativeFunction(da[pa]);a.registerFunctions(da,x);for(pa in da)da[pa]=new e.NativeFunction(da[pa]);var sa=function(){};sa.prototype=da;var na=function(){};na.prototype=
ja;d.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:function(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(y(a,b.arguments[d]));return c},standardFunction:x};d.extend=ia;d.executeScript=function(a,b,c){return a(b,c)};d.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return c.findFieldLiterals(a,b)};d.validateScript=function(a,b){return c.validateScript(a,b,"sync")};d.referencesMember=function(a,b){return c.referencesMember(a,b)};d.referencesFunction=function(a,
b){return c.referencesFunction(a,b)};var ya={error:function(a,b,d){throw Error(c.nodeErrorMessage(a,b,d));},__awaiter:function(a,b,c,d){return v.create(function(c,f){function g(a){try{k(d.next(a))}catch(Ka){f(Ka)}}function h(a){try{k(d["throw"](a))}catch(Ka){f(Ka)}}function k(a){a.done?c(a.value):a.value&&e.isFeatureSet(a.value)?g(a.value):a.value&&a.value.then?a.value.then(g,h):g(a.value)}k((d=d.apply(a,b||[])).next())})},functionDepthchecker:function(a,b){return function(){b.depthCounter++;b.localStack.push([]);
if(64<b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);b.depthCounter--;--b.localStack.length;return c}},aCheck:function(a,b){if(e.isFunctionParameter(a))throw Error(c.nodeErrorMessage({type:b},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===e.voidOperation?null:a},Dictionary:n,Feature:f,dictionary:function(a){for(var b={},c=0;c<a.length;c+=2){if(e.isFunctionParameter(a[c+1]))throw Error("Illegal Argument");if(!1===e.isString(a[c]))throw Error("Illegal Argument");
b[a[c].toString()]=a[c+1]===e.voidOperation?null:a[c+1]}a=new n(b);a.immutable=!1;return a},strCheck:function(a,b){if(!1===e.isString(a))throw Error("Illegal Argument");return a},unary:function(a,b){if(e.isBoolean(a)){if("!"===b)return!a;if("-"===b)return-1*e.toNumber(a);if("+"===b)return 1*e.toNumber(a);throw Error(c.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b)return-1*e.toNumber(a);if("+"===b)return 1*e.toNumber(a);throw Error(c.nodeErrorMessage({type:"UnaryExpression"},
"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===e.isBoolean(a))throw Error(c.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));return a},logical:function(a,b,d){if(e.isBoolean(a)&&e.isBoolean(b))switch(d){case "||":return a||b;case "\x26\x26":return a&&b;default:throw Error(c.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}else throw Error(c.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));},binary:function(a,b,d){switch(d){case "\x3d\x3d":return e.equalityTest(a,
b);case "\x3d":return e.equalityTest(a,b);case "!\x3d":return!e.equalityTest(a,b);case "\x3c":return e.greaterThanLessThan(a,b,d);case "\x3e":return e.greaterThanLessThan(a,b,d);case "\x3c\x3d":return e.greaterThanLessThan(a,b,d);case "\x3e\x3d":return e.greaterThanLessThan(a,b,d);case "+":return e.isString(a)||e.isString(b)?e.toString(a)+e.toString(b):e.toNumber(a)+e.toNumber(b);case "-":return e.toNumber(a)-e.toNumber(b);case "*":return e.toNumber(a)*e.toNumber(b);case "/":return e.toNumber(a)/
e.toNumber(b);case "%":return e.toNumber(a)%e.toNumber(b);default:throw Error(c.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,b,d){switch(b){case "\x3d":return a===e.voidOperation?null:a;case "/\x3d":return e.toNumber(d)/e.toNumber(a);case "*\x3d":return e.toNumber(d)*e.toNumber(a);case "-\x3d":return e.toNumber(d)-e.toNumber(a);case "+\x3d":return e.isString(d)||e.isString(a)?e.toString(d)+e.toString(a):e.toNumber(d)+e.toNumber(a);case "%\x3d":return e.toNumber(d)%
e.toNumber(a);default:throw Error(c.nodeErrorMessage("AssignmentExpression","RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,b,c,d){var f=e.toNumber(a[b]);a[b]="++"===c?f+1:f-1;return!1===d?f:"++"===c?f+1:f-1},graphicToFeature:function(a,b){return null===a?null:f.createFromGraphicLikeObject(a.geometry,a.attributes,b)},memberupdate:function(a,b,c,d){var g;if(e.isArray(a))if(e.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>=a.length)throw Error("Assignment outside of array bounds");g=e.toNumber(a[b]);
a[b]="++"===c?g+1:g-1}else throw Error("Invalid Parameter");else if(a instanceof n){if(!1===e.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))g=e.toNumber(a.field(b)),a.setField(b,"++"===c?g+1:g-1);else throw Error("Invalid Parameter");}else if(a instanceof f){if(!1===e.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))g=e.toNumber(a.field(b)),a.setField(b,"++"===c?g+1:g-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(a))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}return!1===d?g:"++"===c?g+1:g-1},assignmember:function(a,b,c,d){if(e.isArray(a))if(e.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>a.length)throw Error("Assignment outside of array bounds");if(b===a.length&&"\x3d"!==c)throw Error("Invalid Parameter");a[b]=this.assign(d,c,a[b])}else throw Error("Invalid Parameter");else if(a instanceof n){if(!1===e.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))a.setField(b,this.assign(d,c,a.field(b)));
else{if("\x3d"!==c)throw Error("Invalid Parameter");a.setField(b,this.assign(d,c,null))}}else if(a instanceof f){if(!1===e.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))a.setField(b,this.assign(d,c,a.field(b)));else{if("\x3d"!==c)throw Error("Invalid Parameter");a.setField(b,this.assign(d,c,null))}}else{if(e.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,b){if(null===a)throw Error(c.nodeErrorMessage("MemberExpression",
"RUNTIME","NOTFOUND"));if(a instanceof n||a instanceof f){if(e.isString(b))return a.field(b)}else if(a instanceof t){if(e.isString(b))return M(a,b,"MemberExpression")}else if(e.isArray(a)){if(e.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(c.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[b]}}else if(e.isString(a)){if(e.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(c.nodeErrorMessage("MemberExpression",
"RUNTIME","OUTOFBOUNDS"));return a[b]}}else if(e.isImmutableArray(a)&&e.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length()+b);if(b>=a.length()||0>b)throw Error(c.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a.get(b)}throw Error(c.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(a,b,c){return a instanceof e.NativeFunction?a.fn(c,b):a instanceof e.SizzleFunction?a.fn.apply(this,b):a.apply(this,b)}};d.compileScript=function(a,b,c){void 0===
b&&(b=null);void 0===c&&(c=!1);null===b&&(b={vars:{},customfunctions:{}});b={isAsync:c,globalScope:aa(b.vars,c?ja:da,b.customfunctions),localScope:null,mangleMap:{},console:Z,lrucache:b.lrucache,services:b.services,symbols:{symbolCounter:0}};a=y(b,a.body[0].body);""===a&&(a="lc.voidOperation;");b={lc:e,lang:ya,mangles:b.mangleMap,postProcess:function(a){a instanceof e.ReturnResult&&(a=a.value);a instanceof e.ImplicitResult&&(a=a.value);a===e.voidOperation&&(a=null);if(a===e.breakResult)throw Error("Cannot return BREAK");
if(a===e.continueResult)throw Error("Cannot return CONTINUE");if(e.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,b,c){b||(b=new A({wkid:102100}));var d=a.vars,e=a.customfunctions,g=c?new na:new sa;d||(d={});e||(e={});var h=new n({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});h.immutable=!1;g._SymbolsMap={textformatting:1,infinity:1,pi:1};g.textformatting=h;g.infinity=Number.POSITIVE_INFINITY;g.pi=Math.PI;for(var k in e)g[k]=
e[k],g._SymbolsMap[k]=1;for(k in d)g._SymbolsMap[k]=1,g[k]=d[k]&&"esri.Graphic"===d[k].declaredClass?f.createFromGraphic(d[k]):d[k];return{localStack:[],isAsync:c,mangleMap:this.mangles,spatialReference:b,globalScope:g,progressTracker:void 0===a.progressTracker||null===a.progressTracker?v.createDeferred().promise:a.progressTracker,localScope:null,services:a.services,console:a.console?a.console:Z,lrucache:a.lrucache,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?
null:a.applicationCache}}};return(new Function("context","spatialReference",c?"var runtimeCtx\x3dthis.prepare(context, spatialReference, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+a+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); });":
"var runtimeCtx\x3dthis.prepare(context, spatialReference, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+a+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(b)};d.enableAsyncSupport=function(){return v.create(function(a,b){h(["./functions/geomasync"],function(b){ia([b],"async");a(!0)},function(a){b(a)})})}})},"esri/arcade/Dictionary":function(){define(["require",
"exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(h,d,n,f,l){return function(){function d(e){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=e instanceof d?e.attributes:void 0===e?{}:null===e?{}:e}d.prototype.field=function(d){var c=d.toLowerCase();d=this.attributes[d];if(void 0!==d)return d;for(var e in this.attributes)if(e.toLowerCase()===c)return this.attributes[e];throw Error("Field not Found");};d.prototype.setField=
function(d,c){if(this.immutable)throw Error("Dictionary is Immutable");var e=d.toLowerCase();if(void 0===this.attributes[d])for(var b in this.attributes)if(b.toLowerCase()===e){this.attributes[b]=c;return}this.attributes[d]=c};d.prototype.hasField=function(d){var c=d.toLowerCase();if(void 0!==this.attributes[d])return!0;for(var e in this.attributes)if(e.toLowerCase()===c)return!0;return!1};d.prototype.keys=function(){var d=[],c;for(c in this.attributes)d.push(c);return d=d.sort()};d.prototype.castToText=
function(){var d="",c;for(c in this.attributes){""!==d&&(d+=",");var g=this.attributes[c];null==g?d+=JSON.stringify(c)+":null":f.isBoolean(g)||f.isNumber(g)||f.isString(g)?d+=JSON.stringify(c)+":"+JSON.stringify(g):g instanceof l?d+=JSON.stringify(c)+":"+f.toStringExplicit(g):g instanceof n?d+=JSON.stringify(c)+":"+f.toStringExplicit(g):g instanceof Array?d+=JSON.stringify(c)+":"+f.toStringExplicit(g):g instanceof Date?d+=JSON.stringify(c)+":"+JSON.stringify(g):null!==g&&"object"===typeof g&&void 0!==
g.castToText&&(d+=JSON.stringify(c)+":"+g.castToText())}return"{"+d+"}"};return d}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(h,d){return function(){function d(d){void 0===d&&(d=[]);this._elements=d}d.prototype.length=function(){return this._elements.length};d.prototype.get=function(d){return this._elements[d]};d.prototype.toArray=function(){for(var d=[],h=0;h<this.length();h++)d.push(this.get(h));return d};return d}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q){function v(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function u(a){return a instanceof K||a instanceof l||a instanceof S}function t(a){return"string"===typeof a||a instanceof String}function r(a){return"boolean"===typeof a}function w(a){return"number"===typeof a}function z(a){return a instanceof Array}function B(a){return a instanceof Date}function A(a,b){if(!1===isNaN(a)){if(void 0===b||
null===b||""===b)return a.toString();b=v(b,"\u2030","");b=v(b,"\u00a4","");return n.format(a,{pattern:b})}return a.toString()}function x(a,b){a=f(a);return void 0===b||null===b||""===b?a.format():a.format(C(b))}function C(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function y(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function E(a,b){if(a===b||null===a&&b===d.voidOperation||null===b&&a===d.voidOperation)return!0;
if(B(a)&&B(b))return a.getTime()===b.getTime();if(a instanceof e||a instanceof c)return a.equalityTest(b);if(a instanceof m&&b instanceof m){var f=void 0,g=void 0,f=a.cache._arcadeCacheId,g=b.cache._arcadeCacheId;if(void 0!==f&&null!==f)return f===g}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"===typeof a&&"object"===typeof b&&(a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==a._arcadeCacheId||a._underlyingGraphic===b._underlyingGraphic&&void 0!==a._underlyingGraphic&&
null!==a._underlyingGraphic)?!0:!1}function D(a,c){if(t(a))return a;if(null===a)return"";if(w(a))return A(a,c);if(r(a))return a.toString();if(B(a))return x(a,c);if(a instanceof b)return JSON.stringify(a.toJSON());if(z(a)){c=[];for(var d=0;d<a.length;d++)c[d]=L(a[d]);return"["+c.join(",")+"]"}if(a instanceof g){c=[];for(d=0;d<a.length();d++)c[d]=L(a.get(d));return"["+c.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():u(a)?"object, Function":""}function F(a,c){if(t(a))return a;
if(null===a)return"";if(w(a))return A(a,c);if(r(a))return a.toString();if(B(a))return x(a,c);if(a instanceof b)return a instanceof p?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+a.zmax.toString()+",":"")+(a.hasM?'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+I(a.spatialReference)+"}":I(a.toJSON(),function(a,
b){return a.key===b.key?0:"spatialReference"===a.key?1:"spatialReference"===b.key||a.key<b.key?-1:a.key>b.key?1:0});if(z(a)){c=[];for(var d=0;d<a.length;d++)c[d]=L(a[d]);return"["+c.join(",")+"]"}if(a instanceof g){c=[];for(d=0;d<a.length();d++)c[d]=L(a.get(d));return"["+c.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():u(a)?"object, Function":""}function L(a){if(null!==a){if(r(a)||w(a)||t(a))return JSON.stringify(a);if(a instanceof b||a instanceof g||a instanceof
Array)return F(a);if(a instanceof Date)return JSON.stringify(x(a,""));if(null!==a&&"object"===typeof a&&void 0!==a.castToText)return a.castToText()}return"null"}function P(a,b){return w(a)?a:null===a||""===a?0:B(a)?NaN:r(a)?a?1:0:z(a)||""===a||void 0===a?NaN:void 0!==b&&t(a)?(b=v(b,"\u2030",""),b=v(b,"\u00a4",""),n.parse(a,{pattern:b})):a===d.voidOperation?0:Number(a)}function M(a,b){var c;b.fields.some(function(b){b.name===a&&(c=b.domain);return!!c});return c}function I(a,b){b||(b={});"function"===
typeof b&&(b={cmp:b});var c="boolean"===typeof b.cycles?b.cycles:!1,d=b.cmp&&function(a){return function(b){return function(c,d){return a({key:c,value:b[c]},{key:d,value:b[d]})}}}(b.cmp),e=[];return function ia(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var b,f;if(Array.isArray(a)){f="[";for(b=0;b<a.length;b++)b&&(f+=","),f+=ia(a[b])||"null";return f+"]"}if(null===
a)return"null";if(-1!==e.indexOf(a)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var g=e.push(a)-1,h=Object.keys(a).sort(d&&d(a));f="";for(b=0;b<h.length;b++){var k=h[b],m=ia(a[k]);m&&(f&&(f+=","),f+=JSON.stringify(k)+":"+m)}e.splice(g,1);return"{"+f+"}"}}(a)}Object.defineProperty(d,"__esModule",{value:!0});h=function(){return function(a){this.value=a}}();d.ReturnResultE=h;var ba=function(){return function(a){this.value=a}}();d.ImplicitResultE=
ba;var K=function(){return function(a){this.fn=a}}();d.NativeFunctionE=K;var S=function(){return function(a){this.fn=a}}();d.SizzleFunctionE=S;d.NativeFunction=K;d.ImplicitResult=ba;d.ReturnResult=h;d.SizzleFunction=S;d.voidOperation={type:"VOID"};d.breakResult={type:"BREAK"};d.continueResult={type:"CONTINUE"};d.multiReplace=v;d.isFunctionParameter=u;d.isSimpleType=function(a){return t(a)||w(a)||B(a)||r(a)||null===a||a===d.voidOperation||"number"===typeof a?!0:!1};d.defaultUndefined=function(a,b){return void 0===
a?b:a};d.isString=t;d.isBoolean=r;d.isNumber=w;d.isArray=z;d.isFeatureSet=function(a){return a&&a.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===a.declaredRootClass};d.isFeatureSetCollection=function(a){return a&&a.declaredRootClass&&"esri.arcade.featureSetCollection"===a.declaredRootClass};d.isImmutableArray=function(a){return a instanceof g};d.isDate=B;d.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};d.generateUUID=
function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};d.formatNumber=A;d.formatDate=x;d.standardiseDateFormat=C;d.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===d.voidOperation)return y(null,null,c);if(w(b))return y(0,b,c);if(t(b)||r(b))return y(0,P(b),c);if(B(b))return y(0,b.getTime(),c)}if(a===d.voidOperation){if(null===b||b===d.voidOperation)return y(null,
null,c);if(w(b))return y(0,b,c);if(t(b)||r(b))return y(0,P(b),c);if(B(b))return y(0,b.getTime(),c)}else if(w(a)){if(w(b))return y(a,b,c);if(r(b))return y(a,P(b),c);if(null===b||b===d.voidOperation)return y(a,0,c);if(t(b))return y(a,P(b),c);if(B(b))return y(a,b.getTime(),c)}else if(t(a)){if(t(b))return y(D(a),D(b),c);if(B(b))return y(P(a),b.getTime(),c);if(w(b))return y(P(a),b,c);if(null===b||b===d.voidOperation)return y(P(a),0,c);if(r(b))return y(P(a),P(b),c)}else if(B(a)){if(B(b))return y(a,b,c);
if(null===b||b===d.voidOperation)return y(a.getTime(),0,c);if(w(b))return y(a.getTime(),b,c);if(r(b)||t(b))return y(a.getTime(),P(b),c)}else if(r(a)){if(r(b))return y(a,b,c);if(w(b))return y(P(a),P(b),c);if(B(b))return y(P(a),b.getTime(),c);if(null===b||b===d.voidOperation)return y(P(a),0,c);if(t(b))return y(P(a),P(b),c)}return!E(a,b)||"\x3c\x3d"!==c&&"\x3e\x3d"!==c?!1:!0};d.equalityTest=E;d.toString=D;d.toNumberArray=function(a){var b=[];if(!1===z(a))return null;if(a instanceof g){for(var c=0;c<
a.length();c++)b[c]=P(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=P(a[c]);return b};d.toStringExplicit=F;d.toNumber=P;d.toDate=function(a,b){return B(a)?a:t(a)&&(a=f(a,[void 0===b||null===b||""===b?f.ISO_8601:b]),a.isValid())?a.toDate():null};d.toDateM=function(a,b){return B(a)?f(a):t(a)&&(a=f(a,[void 0===b||null===b||""===b?f.ISO_8601:b]),a.isValid())?a:null};d.toBoolean=function(a){if(r(a))return a;if(t(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(w(a))return 0===a||isNaN(a)?!1:!0;return!1};
d.fixSpatialReference=function(a,b){if(null===a||void 0===a)return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};d.fixNullGeometry=function(b){return null===b?null:b instanceof m?"NaN"===b.x||null===b.x||isNaN(b.x)?null:b:b instanceof k?0===b.rings.length?null:b:b instanceof q?0===b.paths.length?null:b:b instanceof a?0===b.points.length?null:b:b instanceof p?"NaN"===b.xmin||null===b.xmin||isNaN(b.xmin)?null:b:null};d.getDomainValue=function(a,b){if(!a||
!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?D(b):P(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.code===b&&(c=e)}return null===c?null:c.name};d.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=D(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.name===b&&(c=e)}return null===c?null:c.code};d.getDomain=function(a,b,c,d){void 0===c&&(c=null);if(!b||!b.fields)return null;
for(var e=null,f=0;f<b.fields.length;f++){var g=b.fields[f];g.name.toLowerCase()===a.toString().toLowerCase()&&(e=g)}if(null===e)return null;var h,k;d||(d=c&&b.typeIdField&&c._field(b.typeIdField));null!=d&&b.types.some(function(a){return a.id===d?((h=a.domains&&a.domains[e.name])&&"inherited"===h.type&&(h=M(e.name,b),k=!0),!0):!1});k||h||(h=M(a,b));return{field:e,domain:h}};d.stableStringify=I;d.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var b=[],c=0;c<a.length;c++){var d=
a[c];d&&d.declaredClass&&"esri.arcade.Feature"===d.declaredClass?b.push(d.geometry()):b.push(d)}return b}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(h,d,n){return n})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(h,d,n,f){Object.defineProperty(d,"__esModule",{value:!0});var l={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,
"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-nz":1,es:1,"es-do":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};d.load=function(d,e,c){d=n.locale;var g=d in l;if(!g){var b=d.split("-");1<b.length&&b[0]in l&&(d=b[0],g=!0)}g?e(["moment/locale/"+d],function(){c(f)}):c(f)}})},"moment/moment":function(){(function(h,d){"object"===typeof exports&&
"undefined"!==typeof module?module.exports=d():"function"===typeof define&&define.amd?define(d):h.moment=d()})(this,function(){function h(){return Vb.apply(null,arguments)}function d(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function n(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function f(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function l(a){return void 0===
a}function g(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function e(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function c(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function p(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function b(a,b){for(var c in b)p(b,c)&&(a[c]=b[c]);p(b,"toString")&&(a.toString=b.toString);p(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function a(a,b,c,d){return db(a,
b,c,d,!0).utc()}function m(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function k(a){if(null==a._isValid){var b=m(a),c=Wb.call(b.parsedDateParts,function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&
!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function q(c){var d=a(NaN);null!=c?b(m(d),c):m(d).userInvalidated=!0;return d}function v(a,b){var c,d,e;l(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);l(b._i)||(a._i=b._i);l(b._f)||(a._f=b._f);l(b._l)||(a._l=b._l);l(b._strict)||(a._strict=b._strict);l(b._tzm)||(a._tzm=
b._tzm);l(b._isUTC)||(a._isUTC=b._isUTC);l(b._offset)||(a._offset=b._offset);l(b._pf)||(a._pf=m(b));l(b._locale)||(a._locale=b._locale);if(0<Hb.length)for(c=0;c<Hb.length;c++)d=Hb[c],e=b[d],l(e)||(a[d]=e);return a}function u(a){v(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Ib&&(Ib=!0,h.updateOffset(this),Ib=!1)}function t(a){return a instanceof u||null!=a&&null!=a._isAMomentObject}function r(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function w(a){a=
+a;var b=0;0!==a&&isFinite(a)&&(b=r(a));return b}function z(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0,g;for(g=0;g<d;g++)(c&&a[g]!==b[g]||!c&&w(a[g])!==w(b[g]))&&f++;return f+e}function B(a){!1===h.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function A(a,c){var d=!0;return b(function(){null!=h.deprecationHandler&&h.deprecationHandler(null,a);if(d){for(var b=[],e,f=0;f<arguments.length;f++){e="";if("object"===
typeof arguments[f]){e+="\n["+f+"] ";for(var g in arguments[0])e+=g+": "+arguments[0][g]+", ";e=e.slice(0,-2)}else e=arguments[f];b.push(e)}B(a+"\nArguments: "+Array.prototype.slice.call(b).join("")+"\n"+Error().stack);d=!1}return c.apply(this,arguments)},c)}function x(a,b){null!=h.deprecationHandler&&h.deprecationHandler(a,b);Xb[a]||(B(b),Xb[a]=!0)}function C(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function y(a,c){var d=b({},a),e;for(e in c)p(c,e)&&
(n(a[e])&&n(c[e])?(d[e]={},b(d[e],a[e]),b(d[e],c[e])):null!=c[e]?d[e]=c[e]:delete d[e]);for(e in a)p(a,e)&&!p(c,e)&&n(a[e])&&(d[e]=b({},d[e]));return d}function E(a){null!=a&&this.set(a)}function D(a,b){var c=a.toLowerCase();ob[c]=ob[c+"s"]=ob[b]=a}function F(a){return"string"===typeof a?ob[a]||ob[a.toLowerCase()]:void 0}function L(a){var b={},c,d;for(d in a)p(a,d)&&(c=F(d))&&(b[c]=a[d]);return b}function P(a){var b=[],c;for(c in a)b.push({unit:c,priority:Ea[c]});b.sort(function(a,b){return a.priority-
b.priority});return b}function M(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function I(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});a&&(lb[a]=e);b&&(lb[b[0]]=function(){return M(e.apply(this,arguments),b[1],b[2])});c&&(lb[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function ba(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function K(a){var b=
a.match(Yb),c,d;c=0;for(d=b.length;c<d;c++)b[c]=lb[b[c]]?lb[b[c]]:ba(b[c]);return function(c){var e="",f;for(f=0;f<d;f++)e+=C(b[f])?b[f].call(c,a):b[f];return e}}function S(a,b){if(!a.isValid())return a.localeData().invalidDate();b=Q(b,a.localeData());Jb[b]=Jb[b]||K(b);return Jb[b](a)}function Q(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(zb.lastIndex=0;0<=d&&zb.test(a);)a=a.replace(zb,c),zb.lastIndex=0,--d;return a}function J(a,b,c){Kb[a]=C(b)?b:function(a,d){return a&&c?c:b}}function R(a,
b){return p(Kb,a)?Kb[a](b._strict,b._locale):new RegExp(H(a))}function H(a){return W(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function W(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function aa(a,b){var c,d=b;"string"===typeof a&&(a=[a]);g(b)&&(d=function(a,c){c[b]=w(a)});for(c=0;c<a.length;c++)Lb[a[c]]=d}function ia(a,b){aa(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e)})}function V(a){return 0===a%4&&0!==a%100||0===a%400}
function Z(a,b){return function(c){return null!=c?(da(this,a,c),h.updateOffset(this,b),this):ga(this,a)}}function ga(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function da(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&V(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),ja(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)}function ja(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?V(a+(b-c)/12)?29:28:31-c%7%
2}function pa(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=w(b);else if(b=a.localeData().monthsParse(b),!g(b))return a;c=Math.min(a.date(),ja(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function sa(a){return null!=a?(pa(this,a),h.updateOffset(this,!0),this):ga(this,"Month")}function na(){function b(a,b){return b.length-a.length}var c=[],d=[],e=[],f,g;for(f=0;12>f;f++)g=a([2E3,f]),c.push(this.monthsShort(g,"")),d.push(this.months(g,"")),e.push(this.months(g,
"")),e.push(this.monthsShort(g,""));c.sort(b);d.sort(b);e.sort(b);for(f=0;12>f;f++)c[f]=W(c[f]),d[f]=W(d[f]);for(f=0;24>f;f++)e[f]=W(e[f]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+e.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+d.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+c.join("|")+")","i")}function ya(a,b,c,d,e,f,g){b=new Date(a,b,c,d,e,f,g);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function qa(a){var b=new Date(Date.UTC.apply(null,
arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function ta(a,b,c){c=7+b-c;return-((7+qa(a,0,c).getUTCDay()-b)%7)+c-1}function ra(a,b,c,d,e){c=(7+c-d)%7;d=ta(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(V(b)?366:365)+d):d>(V(a)?366:365)?(b=a+1,a=d-(V(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function Da(a,b,c){var d=ta(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+Aa(a,b,c)):d>Aa(a.year(),b,c)?(b=d-Aa(a.year(),b,c),a=a.year()+1):(a=
a.year(),b=d);return{week:b,year:a}}function Aa(a,b,c){var d=ta(a,b,c);b=ta(a+1,b,c);return((V(a)?366:365)-d+b)/7}function fa(b,c,d){var e,f;b=b.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],e=0;7>e;++e)f=a([2E3,1]).day(e),this._minWeekdaysParse[e]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[e]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[e]=this.weekdays(f,"").toLocaleLowerCase();
if(d)c="dddd"===c?za.call(this._weekdaysParse,b):"ddd"===c?za.call(this._shortWeekdaysParse,b):za.call(this._minWeekdaysParse,b);else if("dddd"===c){c=za.call(this._weekdaysParse,b);if(-1!==c)return c;c=za.call(this._shortWeekdaysParse,b);if(-1!==c)return c;c=za.call(this._minWeekdaysParse,b)}else if("ddd"===c){c=za.call(this._shortWeekdaysParse,b);if(-1!==c)return c;c=za.call(this._weekdaysParse,b);if(-1!==c)return c;c=za.call(this._minWeekdaysParse,b)}else{c=za.call(this._minWeekdaysParse,b);if(-1!==
c)return c;c=za.call(this._weekdaysParse,b);if(-1!==c)return c;c=za.call(this._shortWeekdaysParse,b)}return-1!==c?c:null}function wa(){function b(a,b){return b.length-a.length}var c=[],d=[],e=[],f=[],g,h,k,m;for(g=0;7>g;g++)h=a([2E3,1]).day(g),k=this.weekdaysMin(h,""),m=this.weekdaysShort(h,""),h=this.weekdays(h,""),c.push(k),d.push(m),e.push(h),f.push(k),f.push(m),f.push(h);c.sort(b);d.sort(b);e.sort(b);f.sort(b);for(g=0;7>g;g++)d[g]=W(d[g]),e[g]=W(e[g]),f[g]=W(f[g]);this._weekdaysMinRegex=this._weekdaysShortRegex=
this._weekdaysRegex=new RegExp("^("+f.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+c.join("|")+")","i")}function ua(){return this.hours()%12||12}function Ia(a,b){I(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function hb(a,b){return b._meridiemParse}function Ka(a){return a?a.toLowerCase().replace("_","-"):a}function La(a){var b=
null;if(!Ba[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=pb._abbr,require("./locale/"+a),Ma(b)}catch(Wc){}return Ba[a]}function Ma(a,b){a&&((b=l(b)?Fa(a):Ha(a,b))?pb=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return pb._abbr}function Ha(a,b){if(null!==b){var c;c=Zb;b.abbr=a;if(null!=Ba[a])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
c=Ba[a]._config;else if(null!=b.parentLocale)if(null!=Ba[b.parentLocale])c=Ba[b.parentLocale]._config;else if(c=La(b.parentLocale),null!=c)c=c._config;else return qb[b.parentLocale]||(qb[b.parentLocale]=[]),qb[b.parentLocale].push({name:a,config:b}),null;Ba[a]=new E(y(c,b));qb[a]&&qb[a].forEach(function(a){Ha(a.name,a.config)});Ma(a);return Ba[a]}delete Ba[a];return null}function Fa(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return pb;if(!d(a)){if(b=La(a))return b;a=[a]}a:{b=
0;for(var c,e,f,g;b<a.length;){g=Ka(a[b]).split("-");c=g.length;for(e=(e=Ka(a[b+1]))?e.split("-"):null;0<c;){if(f=La(g.slice(0,c).join("-"))){a=f;break a}if(e&&e.length>=c&&z(g,e,!0)>=c-1)break;c--}b++}a=pb}return a}function Xa(a){var b;(b=a._a)&&-2===m(a).overflow&&(b=0>b[$a]||11<b[$a]?$a:1>b[Va]||b[Va]>ja(b[Ta],b[$a])?Va:0>b[Ca]||24<b[Ca]||24===b[Ca]&&(0!==b[Ua]||0!==b[ab]||0!==b[ib])?Ca:0>b[Ua]||59<b[Ua]?Ua:0>b[ab]||59<b[ab]?ab:0>b[ib]||999<b[ib]?ib:-1,m(a)._overflowDayOfYear&&(b<Ta||b>Va)&&(b=
Va),m(a)._overflowWeeks&&-1===b&&(b=mc),m(a)._overflowWeekday&&-1===b&&(b=nc),m(a).overflow=b);return a}function Ja(a,b,c){return null!=a?a:null!=b?b:c}function Ra(a){var b,c=[],d;if(!a._d){d=new Date(h.now());d=a._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()];if(a._w&&null==a._a[Va]&&null==a._a[$a]){var e,f,g,k,p,l;e=a._w;if(null!=e.GG||null!=e.W||null!=e.E){if(p=1,l=4,f=Ja(e.GG,a._a[Ta],Da(N(),1,4).year),g=Ja(e.W,1),k=Ja(e.E,1),1>k||7<k)b=
!0}else if(p=a._locale._week.dow,l=a._locale._week.doy,g=Da(N(),p,l),f=Ja(e.gg,a._a[Ta],g.year),g=Ja(e.w,g.week),null!=e.d){if(k=e.d,0>k||6<k)b=!0}else if(null!=e.e){if(k=e.e+p,0>e.e||6<e.e)b=!0}else k=p;1>g||g>Aa(f,p,l)?m(a)._overflowWeeks=!0:null!=b?m(a)._overflowWeekday=!0:(b=ra(f,g,k,p,l),a._a[Ta]=b.year,a._dayOfYear=b.dayOfYear)}if(null!=a._dayOfYear){b=Ja(a._a[Ta],d[Ta]);if(a._dayOfYear>(V(b)?366:365)||0===a._dayOfYear)m(a)._overflowDayOfYear=!0;b=qa(b,0,a._dayOfYear);a._a[$a]=b.getUTCMonth();
a._a[Va]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=c[b]=d[b];for(;7>b;b++)a._a[b]=c[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[Ca]&&0===a._a[Ua]&&0===a._a[ab]&&0===a._a[ib]&&(a._nextDay=!0,a._a[Ca]=0);a._d=(a._useUTC?qa:ya).apply(null,c);c=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[Ca]=24);a._w&&"undefined"!==typeof a._w.d&&a._w.d!==c&&(m(a).weekdayMismatch=!0)}}function T(a){var b,c;b=a._i;var d=oc.exec(b)||
pc.exec(b),e,f,g,h;if(d){m(a).iso=!0;b=0;for(c=Ab.length;b<c;b++)if(Ab[b][1].exec(d[1])){f=Ab[b][0];e=!1!==Ab[b][2];break}if(null==f)a._isValid=!1;else{if(d[3]){b=0;for(c=Mb.length;b<c;b++)if(Mb[b][1].exec(d[3])){g=(d[2]||" ")+Mb[b][0];break}if(null==g){a._isValid=!1;return}}if(e||null==g){if(d[4])if(qc.exec(d[4]))h="Z";else{a._isValid=!1;return}a._f=f+(g||"")+(h||"");ea(a)}else a._isValid=!1}}else a._isValid=!1}function Ga(a){var b=rc.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g,
" ").trim());if(b){var c=b[3],d=b[2],e=b[5],f=b[6],g=b[7],h=parseInt(b[4],10),c=[49>=h?2E3+h:999>=h?1900+h:h,$b.indexOf(c),parseInt(d,10),parseInt(e,10),parseInt(f,10)];g&&c.push(parseInt(g,10));a:{if(g=b[1])if(g=ac.indexOf(g),d=(new Date(c[0],c[1],c[2])).getDay(),g!==d){m(a).weekdayMismatch=!0;g=a._isValid=!1;break a}g=!0}g&&(a._a=c,(g=b[8])?b=sc[g]:b[9]?b=0:(b=parseInt(b[10],10),g=b%100,b=(b-g)/100*60+g),a._tzm=b,a._d=qa.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),m(a).rfc2822=
!0)}else a._isValid=!1}function Za(a){var b=tc.exec(a._i);null!==b?a._d=new Date(+b[1]):(T(a),!1===a._isValid&&(delete a._isValid,Ga(a),!1===a._isValid&&(delete a._isValid,h.createFromInputFallback(a))))}function ea(a){if(a._f===h.ISO_8601)T(a);else if(a._f===h.RFC_2822)Ga(a);else{a._a=[];m(a).empty=!0;var b=""+a._i,c,d,e,f,g,k=b.length,l=0;e=Q(a._f,a._locale).match(Yb)||[];for(c=0;c<e.length;c++){f=e[c];if(d=(b.match(R(f,a))||[])[0])g=b.substr(0,b.indexOf(d)),0<g.length&&m(a).unusedInput.push(g),
b=b.slice(b.indexOf(d)+d.length),l+=d.length;if(lb[f]){if(d?m(a).empty=!1:m(a).unusedTokens.push(f),g=a,null!=d&&p(Lb,f))Lb[f](d,g._a,g,f)}else a._strict&&!d&&m(a).unusedTokens.push(f)}m(a).charsLeftOver=k-l;0<b.length&&m(a).unusedInput.push(b);12>=a._a[Ca]&&!0===m(a).bigHour&&0<a._a[Ca]&&(m(a).bigHour=void 0);m(a).parsedDateParts=a._a.slice(0);m(a).meridiem=a._meridiem;b=a._a;c=Ca;k=a._locale;e=a._a[Ca];l=a._meridiem;null!=l&&(null!=k.meridiemHour?e=k.meridiemHour(e,l):null!=k.isPM&&((k=k.isPM(l))&&
12>e&&(e+=12),k||12!==e||(e=0)));b[c]=e;Ra(a);Xa(a)}}function Qa(a){if(!a._d){var b=L(a._i);a._a=c([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});Ra(a)}}function Na(a){var c=a._i,f=a._f;a._locale=a._locale||Fa(a._l);if(null===c||void 0===f&&""===c)return q({nullInput:!0});"string"===typeof c&&(a._i=c=a._locale.preparse(c));if(t(c))return new u(Xa(c));if(e(c))a._d=c;else if(d(f)){var g,h,p;if(0===a._f.length)m(a).invalidFormat=!0,a._d=new Date(NaN);
else{for(c=0;c<a._f.length;c++)if(f=0,g=v({},a),null!=a._useUTC&&(g._useUTC=a._useUTC),g._f=a._f[c],ea(g),k(g)&&(f+=m(g).charsLeftOver,f+=10*m(g).unusedTokens.length,m(g).score=f,null==p||f<p))p=f,h=g;b(a,h||g)}}else f?ea(a):ka(a);k(a)||(a._d=null);return a}function ka(a){var b=a._i;l(b)?a._d=new Date(h.now()):e(b)?a._d=new Date(b.valueOf()):"string"===typeof b?Za(a):d(b)?(a._a=c(b.slice(0),function(a){return parseInt(a,10)}),Ra(a)):n(b)?Qa(a):g(b)?a._d=new Date(b):h.createFromInputFallback(a)}function db(a,
b,c,e,g){var h={};if(!0===c||!1===c)e=c,c=void 0;if(n(a)&&f(a)||d(a)&&0===a.length)a=void 0;h._isAMomentObject=!0;h._useUTC=h._isUTC=g;h._l=c;h._i=a;h._f=b;h._strict=e;a=new u(Xa(Na(h)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function N(a,b,c,d){return db(a,b,c,d,!1)}function la(a,b){var c,e;1===b.length&&d(b[0])&&(b=b[0]);if(!b.length)return N();c=b[0];for(e=1;e<b.length;++e)if(!b[e].isValid()||b[e][a](c))c=b[e];return c}function G(a){for(var b in a)if(-1===za.call(rb,b)||null!=a[b]&&
isNaN(a[b]))return!1;b=!1;for(var c=0;c<rb.length;++c)if(a[rb[c]]){if(b)return!1;parseFloat(a[rb[c]])!==w(a[rb[c]])&&(b=!0)}return!0}function Y(a){a=L(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||0,f=a.day||0,g=a.hour||0,h=a.minute||0,k=a.second||0,m=a.millisecond||0;this._isValid=G(a);this._milliseconds=+m+1E3*k+6E4*h+36E5*g;this._days=+f+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=Fa();this._bubble()}function ha(a){return a instanceof Y}function ma(a){return 0>a?-1*Math.round(-1*
a):Math.round(a)}function X(a,b){I(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+M(~~(a/60),2)+b+M(~~a%60,2)})}function ca(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(uc)||["-",0,0];b=+(60*a[1])+w(a[2]);return 0===b?0:"+"===a[0]?b:-b}function O(a,b){return b._isUTC?(b=b.clone(),a=(t(a)||e(a)?a.valueOf():N(a).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+a),h.updateOffset(b,!1),b):N(a).local()}function nb(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function Oa(a,b){var c=a,d=null;ha(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:g(a)?(c={},b?c[b]=a:c.milliseconds=a):(d=vc.exec(a))?(c="-"===d[1]?-1:1,c={y:0,d:w(d[Va])*c,h:w(d[Ca])*c,m:w(d[Ua])*c,s:w(d[ab])*c,ms:w(ma(1E3*d[ib]))*c}):(d=wc.exec(a))?(c="-"===d[1]?-1:1,c={y:Ya(d[2],c),M:Ya(d[3],c),w:Ya(d[4],c),d:Ya(d[5],c),h:Ya(d[6],c),m:Ya(d[7],c),s:Ya(d[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(d=N(c.from),c=N(c.to),d.isValid()&&c.isValid()?
(c=O(c,d),d.isBefore(c)?c=wb(d,c):(c=wb(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c):d={milliseconds:0,months:0},c={},c.ms=d.milliseconds,c.M=d.months);c=new Y(c);ha(a)&&p(a,"_locale")&&(c._locale=a._locale);return c}function Ya(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function wb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,
"M");return c}function Sa(a,b){return function(c,d){var e;null===d||isNaN(+d)||(x(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e);c=Oa("string"===typeof c?+c:c,d);yb(this,c,a);return this}}function yb(a,b,c,d){var e=b._milliseconds,f=ma(b._days);b=ma(b._months);a.isValid()&&(d=null==d?!0:d,b&&pa(a,ga(a,"Month")+b*c),f&&da(a,"Date",ga(a,"Date")+f*c),e&&a._d.setTime(a._d.valueOf()+
e*c),d&&h.updateOffset(a,f||b))}function tb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+b)||0}function ub(a){if(void 0===a)return this._locale._abbr;a=Fa(a);null!=a&&(this._locale=a);return this}function mb(){return this._locale}function jb(a,b){I(0,[a,a.length],0,b)}function Qb(a,b,c,d,e){var f;if(null==a)return Da(this,d,e).year;f=Aa(a,d,e);b>f&&(b=
f);a=ra(a,b,c,d,e);a=qa(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function kc(a,b){b[ib]=w(1E3*("0."+a))}function Rb(a){return a}function vb(b,c,d,e){var f=Fa();c=a().set(e,c);return f[d](c,b)}function Sb(a,b,c){g(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return vb(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=vb(a,b,c,"month");return d}function Gb(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);g(b)&&(c=b,b=void 0);b=b||"";var e=
Fa();a=a?e._week.dow:0;if(null!=c)return vb(b,(c+a)%7,d,"day");e=[];for(c=0;7>c;c++)e[c]=vb(b,(c+a)%7,d,"day");return e}function Tb(a,b,c,d){b=Oa(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Ub(a){return 0>a?Math.floor(a):Math.ceil(a)}function cb(a){return function(){return this.as(a)}}function gb(a){return function(){return this.isValid()?this._data[a]:NaN}}function lc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function kb(a){return(0<
a)-(0>a)||+a}function xb(){if(!this.isValid())return this.localeData().invalidDate();var a=Nb(this._milliseconds)/1E3,b=Nb(this._days),c=Nb(this._months),d,e;d=r(a/60);e=r(d/60);a%=60;d%=60;var f=r(c/12),c=c%12,a=a?a.toFixed(3).replace(/\.?0+$/,""):"",g=this.asSeconds();if(!g)return"P0D";var h=0>g?"-":"",k=kb(this._months)!==kb(g)?"-":"",m=kb(this._days)!==kb(g)?"-":"",g=kb(this._milliseconds)!==kb(g)?"-":"";return h+"P"+(f?k+f+"Y":"")+(c?k+c+"M":"")+(b?m+b+"D":"")+(e||d||a?"T":"")+(e?g+e+"H":"")+
(d?g+d+"M":"")+(a?g+a+"S":"")}var Vb,Wb;Wb=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Hb=h.momentProperties=[],Ib=!1,Xb={};h.suppressDeprecationWarnings=!1;h.deprecationHandler=null;var bc;bc=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)p(a,b)&&c.push(b);return c};var ob={},Ea={},Yb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
zb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Jb={},lb={},cc=/\d/,Pa=/\d\d/,dc=/\d{3}/,Ob=/\d{4}/,Bb=/[+-]?\d{6}/,xa=/\d\d?/,ec=/\d\d\d\d?/,fc=/\d\d\d\d\d\d?/,Cb=/\d{1,3}/,Pb=/\d{1,4}/,Db=/[+-]?\d{1,6}/,xc=/\d+/,Eb=/[+-]?\d+/,yc=/Z|[+-]\d\d:?\d\d/gi,Fb=/Z|[+-]\d\d(?::?\d\d)?/gi,sb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Kb={},Lb={},Ta=0,$a=1,Va=2,Ca=3,Ua=4,ab=5,ib=6,mc=7,nc=8;I("Y",0,
0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});I(0,["YY",2],0,function(){return this.year()%100});I(0,["YYYY",4],0,"year");I(0,["YYYYY",5],0,"year");I(0,["YYYYYY",6,!0],0,"year");D("year","y");Ea.year=1;J("Y",Eb);J("YY",xa,Pa);J("YYYY",Pb,Ob);J("YYYYY",Db,Bb);J("YYYYYY",Db,Bb);aa(["YYYYY","YYYYYY"],Ta);aa("YYYY",function(a,b){b[Ta]=2===a.length?h.parseTwoDigitYear(a):w(a)});aa("YY",function(a,b){b[Ta]=h.parseTwoDigitYear(a)});aa("Y",function(a,b){b[Ta]=parseInt(a,10)});h.parseTwoDigitYear=
function(a){return w(a)+(68<w(a)?1900:2E3)};var gc=Z("FullYear",!0),za;za=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};I("M",["MM",2],"Mo",function(){return this.month()+1});I("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});I("MMMM",0,0,function(a){return this.localeData().months(this,a)});D("month","M");Ea.month=8;J("M",xa);J("MM",xa,Pa);J("MMM",function(a,b){return b.monthsShortRegex(a)});J("MMMM",
function(a,b){return b.monthsRegex(a)});aa(["M","MM"],function(a,b){b[$a]=w(a)-1});aa(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[$a]=d:m(c).invalidMonth=a});var hc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,$b="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");I("w",["ww",2],"wo","week");I("W",["WW",2],"Wo","isoWeek");D("week","w");D("isoWeek","W");Ea.week=5;Ea.isoWeek=5;J("w",xa);J("ww",xa,Pa);J("W",xa);J("WW",xa,Pa);ia(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,
1)]=w(a)});I("d",0,"do","day");I("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});I("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});I("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});I("e",0,0,"weekday");I("E",0,0,"isoWeekday");D("day","d");D("weekday","e");D("isoWeekday","E");Ea.day=11;Ea.weekday=11;Ea.isoWeekday=11;J("d",xa);J("e",xa);J("E",xa);J("dd",function(a,b){return b.weekdaysMinRegex(a)});J("ddd",function(a,b){return b.weekdaysShortRegex(a)});
J("dddd",function(a,b){return b.weekdaysRegex(a)});ia(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:m(c).invalidWeekday=a});ia(["d","e","E"],function(a,b,c,d){b[d]=w(a)});var ac="Sun Mon Tue Wed Thu Fri Sat".split(" ");I("H",["HH",2],0,"hour");I("h",["hh",2],0,ua);I("k",["kk",2],0,function(){return this.hours()||24});I("hmm",0,0,function(){return""+ua.apply(this)+M(this.minutes(),2)});I("hmmss",0,0,function(){return""+ua.apply(this)+M(this.minutes(),
2)+M(this.seconds(),2)});I("Hmm",0,0,function(){return""+this.hours()+M(this.minutes(),2)});I("Hmmss",0,0,function(){return""+this.hours()+M(this.minutes(),2)+M(this.seconds(),2)});Ia("a",!0);Ia("A",!1);D("hour","h");Ea.hour=13;J("a",hb);J("A",hb);J("H",xa);J("h",xa);J("k",xa);J("HH",xa,Pa);J("hh",xa,Pa);J("kk",xa,Pa);J("hmm",ec);J("hmmss",fc);J("Hmm",ec);J("Hmmss",fc);aa(["H","HH"],Ca);aa(["k","kk"],function(a,b,c){a=w(a);b[Ca]=24===a?0:a});aa(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);
c._meridiem=a});aa(["h","hh"],function(a,b,c){b[Ca]=w(a);m(c).bigHour=!0});aa("hmm",function(a,b,c){var d=a.length-2;b[Ca]=w(a.substr(0,d));b[Ua]=w(a.substr(d));m(c).bigHour=!0});aa("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[Ca]=w(a.substr(0,d));b[Ua]=w(a.substr(d,2));b[ab]=w(a.substr(e));m(c).bigHour=!0});aa("Hmm",function(a,b,c){c=a.length-2;b[Ca]=w(a.substr(0,c));b[Ua]=w(a.substr(c))});aa("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[Ca]=w(a.substr(0,c));b[Ua]=w(a.substr(c,
2));b[ab]=w(a.substr(d))});var zc=Z("Hours",!0),Zb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",
mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:$b,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:ac,meridiemParse:/[ap]\.?m?\.?/i},Ba={},qb={},pb,oc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
pc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qc=/Z|[+-]\d\d(?::?\d\d)?/,Ab=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Mb=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],tc=/^\/?Date\((\-?\d+)/i,rc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,sc={UT:0,GMT:0,EDT:-240,
EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};h.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});h.ISO_8601=function(){};
h.RFC_2822=function(){};var Ac=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=N.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:q()}),Bc=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=N.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:q()}),rb="year quarter month week day hour minute second millisecond".split(" ");
X("Z",":");X("ZZ","");J("Z",Fb);J("ZZ",Fb);aa(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=ca(Fb,a)});var uc=/([\+\-]|\d\d)/gi;h.updateOffset=function(){};var vc=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,wc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Oa.fn=Y.prototype;Oa.invalid=function(){return Oa(NaN)};var Cc=Sa(1,"add"),Dc=Sa(-1,"subtract");h.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";h.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ic=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});I(0,["gg",2],0,function(){return this.weekYear()%100});I(0,["GG",2],0,function(){return this.isoWeekYear()%100});jb("gggg","weekYear");jb("ggggg","weekYear");jb("GGGG","isoWeekYear");jb("GGGGG","isoWeekYear");D("weekYear",
"gg");D("isoWeekYear","GG");Ea.weekYear=1;Ea.isoWeekYear=1;J("G",Eb);J("g",Eb);J("GG",xa,Pa);J("gg",xa,Pa);J("GGGG",Pb,Ob);J("gggg",Pb,Ob);J("GGGGG",Db,Bb);J("ggggg",Db,Bb);ia(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=w(a)});ia(["gg","GG"],function(a,b,c,d){b[d]=h.parseTwoDigitYear(a)});I("Q",0,"Qo","quarter");D("quarter","Q");Ea.quarter=7;J("Q",cc);aa("Q",function(a,b){b[$a]=3*(w(a)-1)});I("D",["DD",2],"Do","date");D("date","D");Ea.date=9;J("D",xa);J("DD",xa,Pa);J("Do",function(a,
b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});aa(["D","DD"],Va);aa("Do",function(a,b){b[Va]=w(a.match(xa)[0])});var jc=Z("Date",!0);I("DDD",["DDDD",3],"DDDo","dayOfYear");D("dayOfYear","DDD");Ea.dayOfYear=4;J("DDD",Cb);J("DDDD",dc);aa(["DDD","DDDD"],function(a,b,c){c._dayOfYear=w(a)});I("m",["mm",2],0,"minute");D("minute","m");Ea.minute=14;J("m",xa);J("mm",xa,Pa);aa(["m","mm"],Ua);var Ec=Z("Minutes",!1);I("s",["ss",2],0,"second");D("second","s");Ea.second=
15;J("s",xa);J("ss",xa,Pa);aa(["s","ss"],ab);var Fc=Z("Seconds",!1);I("S",0,0,function(){return~~(this.millisecond()/100)});I(0,["SS",2],0,function(){return~~(this.millisecond()/10)});I(0,["SSS",3],0,"millisecond");I(0,["SSSS",4],0,function(){return 10*this.millisecond()});I(0,["SSSSS",5],0,function(){return 100*this.millisecond()});I(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});I(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});I(0,["SSSSSSSS",8],0,function(){return 1E5*
this.millisecond()});I(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});D("millisecond","ms");Ea.millisecond=16;J("S",Cb,cc);J("SS",Cb,Pa);J("SSS",Cb,dc);var eb;for(eb="SSSS";9>=eb.length;eb+="S")J(eb,xc);for(eb="S";9>=eb.length;eb+="S")aa(eb,kc);var Gc=Z("Milliseconds",!1);I("z",0,0,"zoneAbbr");I("zz",0,0,"zoneName");var U=u.prototype;U.add=Cc;U.calendar=function(a,b){a=a||N();var c=O(a,this).startOf("day"),c=h.calendarFormat(this,c)||"sameElse";b=b&&(C(b[c])?b[c].call(this,a):b[c]);
return this.format(b||this.localeData().calendar(c,this,N(a)))};U.clone=function(){return new u(this)};U.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=O(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=F(b);switch(b){case "year":b=tb(this,a)/12;break;case "month":b=tb(this,a);break;case "quarter":b=tb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=
(this-a-d)/6048E5;break;default:b=this-a}return c?b:r(b)};U.endOf=function(a){a=F(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};U.format=function(a){a||(a=this.isUtc()?h.defaultFormatUtc:h.defaultFormat);a=S(this,a);return this.localeData().postformat(a)};U.from=function(a,b){return this.isValid()&&(t(a)&&a.isValid()||N(a).isValid())?Oa({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};
U.fromNow=function(a){return this.from(N(),a)};U.to=function(a,b){return this.isValid()&&(t(a)&&a.isValid()||N(a).isValid())?Oa({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};U.toNow=function(a){return this.to(N(),a)};U.get=function(a){a=F(a);return C(this[a])?this[a]():this};U.invalidAt=function(){return m(this).overflow};U.isAfter=function(a,b){a=t(a)?a:N(a);if(!this.isValid()||!a.isValid())return!1;b=F(l(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>
a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};U.isBefore=function(a,b){a=t(a)?a:N(a);if(!this.isValid()||!a.isValid())return!1;b=F(l(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};U.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};U.isSame=function(a,b){a=t(a)?a:N(a);if(!this.isValid()||!a.isValid())return!1;b=F(b||"millisecond");
if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};U.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};U.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};U.isValid=function(){return k(this)};U.lang=ic;U.locale=ub;U.localeData=mb;U.max=Bc;U.min=Ac;U.parsingFlags=function(){return b({},m(this))};U.set=function(a,b){if("object"===typeof a){a=L(a);b=P(a);
for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=F(a),C(this[a]))return this[a](b);return this};U.startOf=function(a){a=F(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};
U.subtract=Dc;U.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};U.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};U.toDate=function(){return new Date(this.valueOf())};U.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?
S(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",S(b,"Z")):S(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};U.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=
this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};U.toJSON=function(){return this.isValid()?this.toISOString():null};U.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};U.unix=function(){return Math.floor(this.valueOf()/1E3)};U.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};U.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};
U.year=gc;U.isLeapYear=function(){return V(this.year())};U.weekYear=function(a){return Qb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};U.isoWeekYear=function(a){return Qb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};U.quarter=U.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};U.month=sa;U.daysInMonth=function(){return ja(this.year(),this.month())};U.week=U.weeks=function(a){var b=this.localeData().week(this);
return null==a?b:this.add(7*(a-b),"d")};U.isoWeek=U.isoWeeks=function(a){var b=Da(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};U.weeksInYear=function(){var a=this.localeData()._week;return Aa(this.year(),a.dow,a.doy)};U.isoWeeksInYear=function(){return Aa(this.year(),1,4)};U.date=jc;U.day=U.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),
a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};U.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};U.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};U.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-
this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};U.hour=U.hours=zc;U.minute=U.minutes=Ec;U.second=U.seconds=Fc;U.millisecond=U.milliseconds=Gc;U.utcOffset=function(a,b,c){var d=this._offset||0,e;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=ca(Fb,a),null===a)return this}else 16>Math.abs(a)&&!c&&(a*=60);!this._isUTC&&b&&(e=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=a;this._isUTC=!0;null!=e&&this.add(e,"m");d!==a&&(!b||
this._changeInProgress?yb(this,Oa(a-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,h.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?d:15*-Math.round(this._d.getTimezoneOffset()/15)};U.utc=function(a){return this.utcOffset(0,a)};U.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};U.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,
!0);else if("string"===typeof this._i){var a=ca(yc,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};U.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?N(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};U.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};U.isLocal=function(){return this.isValid()?!this._isUTC:!1};U.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};U.isUtc=
nb;U.isUTC=nb;U.zoneAbbr=function(){return this._isUTC?"UTC":""};U.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};U.dates=A("dates accessor is deprecated. Use date instead.",jc);U.months=A("months accessor is deprecated. Use month instead",sa);U.years=A("years accessor is deprecated. Use year instead",gc);U.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=
-a),this.utcOffset(a,b),this):-this.utcOffset()});U.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var b={};v(b,this);b=Na(b);if(b._a){var c=b._isUTC?a(b._a):N(b._a);this._isDSTShifted=this.isValid()&&0<z(b._a,c.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var va=E.prototype;va.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;
return C(a)?a.call(b,c):a};va.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};va.invalidDate=function(){return this._invalidDate};va.ordinal=function(a){return this._ordinal.replace("%d",a)};va.preparse=Rb;va.postformat=Rb;va.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return C(e)?e(a,b,c,d):e.replace(/%d/i,
a)};va.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return C(a)?a(b):a.replace(/%s/i,b)};va.set=function(a){var b,c;for(c in a)b=a[c],C(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};va.months=function(a,b){return a?d(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||hc).test(b)?"format":"standalone"][a.month()]:d(this._months)?
this._months:this._months.standalone};va.monthsShort=function(a,b){return a?d(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[hc.test(b)?"format":"standalone"][a.month()]:d(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};va.monthsParse=function(b,c,d){var e,f;if(this._monthsParseExact){a:{b=b.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],e=0;12>e;++e)f=a([2E3,e]),this._shortMonthsParse[e]=
this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[e]=this.months(f,"").toLocaleLowerCase();if(d)c="MMM"===c?za.call(this._shortMonthsParse,b):za.call(this._longMonthsParse,b);else if("MMM"===c){c=za.call(this._shortMonthsParse,b);if(-1!==c)break a;c=za.call(this._longMonthsParse,b)}else{c=za.call(this._longMonthsParse,b);if(-1!==c)break a;c=za.call(this._shortMonthsParse,b)}c=-1!==c?c:null}return c}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=
[]);for(e=0;12>e;e++)if(f=a([2E3,e]),d&&!this._longMonthsParse[e]&&(this._longMonthsParse[e]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[e]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),d||this._monthsParse[e]||(f="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[e]=new RegExp(f.replace(".",""),"i")),d&&"MMMM"===c&&this._longMonthsParse[e].test(b)||d&&"MMM"===c&&this._shortMonthsParse[e].test(b)||!d&&this._monthsParse[e].test(b))return e};
va.monthsRegex=function(a){if(this._monthsParseExact)return p(this,"_monthsRegex")||na.call(this),a?this._monthsStrictRegex:this._monthsRegex;p(this,"_monthsRegex")||(this._monthsRegex=sb);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};va.monthsShortRegex=function(a){if(this._monthsParseExact)return p(this,"_monthsRegex")||na.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;p(this,"_monthsShortRegex")||(this._monthsShortRegex=sb);return this._monthsShortStrictRegex&&
a?this._monthsShortStrictRegex:this._monthsShortRegex};va.week=function(a){return Da(a,this._week.dow,this._week.doy).week};va.firstDayOfYear=function(){return this._week.doy};va.firstDayOfWeek=function(){return this._week.dow};va.weekdays=function(a,b){return a?d(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:d(this._weekdays)?this._weekdays:this._weekdays.standalone};va.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:
this._weekdaysMin};va.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};va.weekdaysParse=function(b,c,d){var e,f;if(this._weekdaysParseExact)return fa.call(this,b,c,d);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(e=0;7>e;e++)if(f=a([2E3,1]).day(e),d&&!this._fullWeekdaysParse[e]&&(this._fullWeekdaysParse[e]=new RegExp("^"+this.weekdays(f,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[e]=
new RegExp("^"+this.weekdaysShort(f,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[e]=new RegExp("^"+this.weekdaysMin(f,"").replace(".",".?")+"$","i")),this._weekdaysParse[e]||(f="^"+this.weekdays(f,"")+"|^"+this.weekdaysShort(f,"")+"|^"+this.weekdaysMin(f,""),this._weekdaysParse[e]=new RegExp(f.replace(".",""),"i")),d&&"dddd"===c&&this._fullWeekdaysParse[e].test(b)||d&&"ddd"===c&&this._shortWeekdaysParse[e].test(b)||d&&"dd"===c&&this._minWeekdaysParse[e].test(b)||!d&&this._weekdaysParse[e].test(b))return e};
va.weekdaysRegex=function(a){if(this._weekdaysParseExact)return p(this,"_weekdaysRegex")||wa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;p(this,"_weekdaysRegex")||(this._weekdaysRegex=sb);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};va.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return p(this,"_weekdaysRegex")||wa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;p(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=
sb);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};va.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return p(this,"_weekdaysRegex")||wa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;p(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=sb);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};va.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};va.meridiem=function(a,b,
c){return 11<a?c?"pm":"PM":c?"am":"AM"};Ma("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===w(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});h.lang=A("moment.lang is deprecated. Use moment.locale instead.",Ma);h.langData=A("moment.langData is deprecated. Use moment.localeData instead.",Fa);var bb=Math.abs,Hc=cb("ms"),Ic=cb("s"),Jc=cb("m"),Kc=cb("h"),Lc=cb("d"),Mc=cb("w"),Nc=cb("M"),Oc=cb("y"),Pc=gb("milliseconds"),Qc=gb("seconds"),Rc=gb("minutes"),
Sc=gb("hours"),Tc=gb("days"),Uc=gb("months"),Vc=gb("years"),fb=Math.round,Wa={ss:44,s:45,m:45,h:22,d:26,M:11},Nb=Math.abs,oa=Y.prototype;oa.isValid=function(){return this._isValid};oa.abs=function(){var a=this._data;this._milliseconds=bb(this._milliseconds);this._days=bb(this._days);this._months=bb(this._months);a.milliseconds=bb(a.milliseconds);a.seconds=bb(a.seconds);a.minutes=bb(a.minutes);a.hours=bb(a.hours);a.months=bb(a.months);a.years=bb(a.years);return this};oa.add=function(a,b){return Tb(this,
a,b,1)};oa.subtract=function(a,b){return Tb(this,a,b,-1)};oa.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=F(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*
b)+c;default:throw Error("Unknown unit "+a);}};oa.asMilliseconds=Hc;oa.asSeconds=Ic;oa.asMinutes=Jc;oa.asHours=Kc;oa.asDays=Lc;oa.asWeeks=Mc;oa.asMonths=Nc;oa.asYears=Oc;oa.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*w(this._months/12):NaN};oa._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Ub(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=r(a/1E3);d.seconds=
a%60;a=r(a/60);d.minutes=a%60;a=r(a/60);d.hours=a%24;b+=r(a/24);a=r(4800*b/146097);c+=a;b-=Ub(146097*a/4800);a=r(c/12);d.days=b;d.months=c%12;d.years=a;return this};oa.clone=function(){return Oa(this)};oa.get=function(a){a=F(a);return this.isValid()?this[a+"s"]():NaN};oa.milliseconds=Pc;oa.seconds=Qc;oa.minutes=Rc;oa.hours=Sc;oa.days=Tc;oa.weeks=function(){return r(this.days()/7)};oa.months=Uc;oa.years=Vc;oa.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),
c;c=!a;var d=Oa(this).abs(),e=fb(d.as("s")),f=fb(d.as("m")),g=fb(d.as("h")),h=fb(d.as("d")),k=fb(d.as("M")),d=fb(d.as("y")),e=e<=Wa.ss&&["s",e]||e<Wa.s&&["ss",e]||1>=f&&["m"]||f<Wa.m&&["mm",f]||1>=g&&["h"]||g<Wa.h&&["hh",g]||1>=h&&["d"]||h<Wa.d&&["dd",h]||1>=k&&["M"]||k<Wa.M&&["MM",k]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=lc.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};oa.toISOString=xb;oa.toString=xb;oa.toJSON=xb;oa.locale=ub;oa.localeData=mb;oa.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
xb);oa.lang=ic;I("X",0,0,"unix");I("x",0,0,"valueOf");J("x",Eb);J("X",/[+-]?\d+(\.\d{1,3})?/);aa("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});aa("x",function(a,b,c){c._d=new Date(w(a))});h.version="2.22.1";Vb=N;h.fn=U;h.min=function(){var a=[].slice.call(arguments,0);return la("isBefore",a)};h.max=function(){var a=[].slice.call(arguments,0);return la("isAfter",a)};h.now=function(){return Date.now?Date.now():+new Date};h.utc=a;h.unix=function(a){return N(1E3*a)};h.months=function(a,b){return Sb(a,
b,"months")};h.isDate=e;h.locale=Ma;h.invalid=q;h.duration=Oa;h.isMoment=t;h.weekdays=function(a,b,c){return Gb(a,b,c,"weekdays")};h.parseZone=function(){return N.apply(null,arguments).parseZone()};h.localeData=Fa;h.isDuration=ha;h.monthsShort=function(a,b){return Sb(a,b,"monthsShort")};h.weekdaysMin=function(a,b,c){return Gb(a,b,c,"weekdaysMin")};h.defineLocale=Ha;h.updateLocale=function(a,b){if(null!=b){var c,d=Zb;c=La(a);null!=c&&(d=c._config);b=y(d,b);b=new E(b);b.parentLocale=Ba[a];Ba[a]=b;Ma(a)}else null!=
Ba[a]&&(null!=Ba[a].parentLocale?Ba[a]=Ba[a].parentLocale:null!=Ba[a]&&delete Ba[a]);return Ba[a]};h.locales=function(){return bc(Ba)};h.weekdaysShort=function(a,b,c){return Gb(a,b,c,"weekdaysShort")};h.normalizeUnits=F;h.relativeTimeRounding=function(a){return void 0===a?fb:"function"===typeof a?(fb=a,!0):!1};h.relativeTimeThreshold=function(a,b){if(void 0===Wa[a])return!1;if(void 0===b)return Wa[a];Wa[a]=b;"s"===a&&(Wa.ss=b-1);return!0};h.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>
a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};h.prototype=U;h.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return h})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(h,d){return function(){return function(d,f){this.context=
this.definition=null;this.definition=d;this.context=f}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(h,d,n,f,l){return function(d){function e(c,e,b,a,f){c=d.call(this,c)||this;c._lazyPath=[];c._hasZ=!1;c._hasM=!1;c._hasZ=b;c._hasM=a;c._spRef=e;c._cacheId=f;return c}n(e,d);e.prototype.get=function(c){if(void 0===this._lazyPath[c]){var d=this._elements[c];if(void 0===d)return;this._lazyPath[c]=
new l(d,this._spRef,this._hasZ,this._hasM,this._cacheId,c)}return this._lazyPath[c]};e.prototype.equalityTest=function(c){return c===this?!0:null===c||!1===c instanceof e?!1:c.getUniqueHash()===this.getUniqueHash()};e.prototype.getUniqueHash=function(){return this._cacheId.toString()};return e}(f)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","../geometry/Point"],function(h,d,n,f,l){return function(d){function e(c,
e,b,a,f,g){c=d.call(this,c)||this;c._lazyPt=[];c._hasZ=!1;c._hasM=!1;c._spRef=e;c._hasZ=b;c._hasM=a;c._cacheId=f;c._partId=g;return c}n(e,d);e.prototype.get=function(c){if(void 0===this._lazyPt[c]){var d=this._elements[c];if(void 0===d)return;var b=this._hasZ,a=this._hasM,e=null,e=b&&!a?new l(d[0],d[1],d[2],void 0,this._spRef):a&&b?new l(d[0],d[1],void 0,d[2],this._spRef):b&&a?new l(d[0],d[1],d[2],d[3],this._spRef):new l(d[0],d[1],this._spRef);e.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+
"-"+c.toString();this._lazyPt[c]=e}return this._lazyPt[c]};e.prototype.equalityTest=function(c){return c===this?!0:null===c||!1===c instanceof e?!1:c.getUniqueHash()===this.getUniqueHash()};e.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return e}(f)})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b){return function(){function a(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this.immutable=this.immutable=this._datesfixed=!0}a.createFromGraphic=function(b){var c=new a;c._geometry=b.geometry?b.geometry:null;c.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(c._layer=b._sourceLayer,c._datesfixed=!1):b._layer?(c._layer=b._layer,c._datesfixed=!1):b.layer&&(c._layer=
b.layer,c._datesfixed=!1);return c};a.createFromArcadeFeature=function(b){var c=new a;c._datesfixed=b._datesfixed;c.attributes=b.attributes;c._geometry=b._geometry;c._optimizedGeomDefinition=b._optimizedGeomDefinition;b._layer&&(c._layer=b._layer);return c};a.createFromOptimisedFeature=function(b,c,d){var e=new a;e._geometry=b.geometry?{geometry:b.geometry}:null;e._optimizedGeomDefinition=d;e.attributes=b.attributes||{};e._layer=c;e._datesfixed=!1;return e};a.createFromArcadeDictionary=function(b){var c=
new a;c.attributes=b.field("attributes");null!==c.attributes?c.attributes instanceof f?(c.attributes=c.attributes.attributes,null===c.attributes&&(c.attributes={})):c.attributes={}:c.attributes={};c._geometry=b.field("geometry");null!==c._geometry&&(c._geometry instanceof f?c._geometry=a.parseGeometryFromDictionary(c._geometry):c._geometry instanceof e||(c._geometry=null));return c};a.createFromGraphicLikeObject=function(b,c,d){void 0===d&&(d=null);var e=new a;null===c&&(c={});e.attributes=c;e._geometry=
b?b:null;e._layer=d;e._layer&&(e._datesfixed=!1);return e};a.prototype.repurposeFromGraphicLikeObject=function(a,b,c){void 0===c&&(c=null);null===b&&(b={});this.attributes=b;this._geometry=a?a:null;this._datesfixed=(this._layer=c)?!1:!0};a.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var c=this.attributes[b];null==c?a+=JSON.stringify(b)+":null":g.isBoolean(c)||g.isNumber(c)||g.isString(c)?a+=JSON.stringify(b)+":"+JSON.stringify(c):c instanceof e?a+=JSON.stringify(b)+
":"+g.toStringExplicit(c):c instanceof l?a+=JSON.stringify(b)+":"+g.toStringExplicit(c):c instanceof Array?a+=JSON.stringify(b)+":"+g.toStringExplicit(c):c instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(c):null!==c&&"object"===typeof c&&void 0!==c.castToText&&(a+=JSON.stringify(b)+":"+c.castToText())}return'{"geometry":'+(null===this.geometry()?"null":g.toStringExplicit(this.geometry()))+',"attributes":{'+a+"}}"};a.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var c=
this._layer.fields[b];"date"!==c.type&&"esriFieldTypeDate"!==c.type||a.push(c.name)}0<a.length&&this._fixDateFields(a);this._datesfixed=!0};a.prototype._fixDateFields=function(a){this.attributes=n({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var d in this.attributes){if(d.toLowerCase()===a[b]){c=this.attributes[d];null===c||c instanceof Date||(this.attributes[d]=new Date(c));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}};
a.prototype.geometry=function(){if(null===this._geometry)return this._geometry;this._geometry instanceof e||(this._optimizedGeomDefinition?(this._geometry=p.fromJSON(b.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=p.fromJSON(this._geometry));return this._geometry};a.prototype.field=function(a){!1===this._datesfixed&&
this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};a.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1};a.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();
a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===g.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===c){this.attributes[d]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();
if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};a.prototype.keys=function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var d=this._layer.fields[c];1!==b[d.name.toLowerCase()]&&a.push(d.name)}return a=a.sort()};a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&
(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return p.fromJSON(b)};a.fixPathArrays=function(a,b,c){var d=[];if(a instanceof Array)for(var e=0;e<a.length;e++)d.push(this.fixPointArrays(a[e],b,c));else if(a instanceof l)for(e=0;e<a.length();e++)d.push(this.fixPointArrays(a.get(e),
b,c));return d};a.fixPointArrays=function(a,b,d){var e=[];if(a instanceof Array)for(var f=0;f<a.length;f++){var g=a[f];g instanceof c?b&&d?e.push([g.x,g.y,g.z,g.m]):b?e.push([g.x,g.y,g.z]):d?e.push([g.x,g.y,g.m]):e.push([g.x,g.y]):e.push(g)}else if(a instanceof l)for(f=0;f<a.length();f++)g=a.get(f),g instanceof c?b&&d?e.push([g.x,g.y,g.z,g.m]):b?e.push([g.x,g.y,g.z]):d?e.push([g.x,g.y,g.m]):e.push([g.x,g.y]):e.push(g);return e};a.convertDictionaryToJson=function(b,c){void 0===c&&(c=!1);var d={},e;
for(e in b.attributes){var g=b.attributes[e];g instanceof f&&(g=a.convertDictionaryToJson(g));c?d[e.toLowerCase()]=g:d[e]=g}return d};a.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var d=a.attributes[c];if(g.isSimpleType(d))b[c]=d;else throw Error("Illegal Argument");}return b};a.fromJson=function(b){var c=null;null!==b.geometry&&void 0!==b.geometry&&(c=p.fromJSON(b.geometry));var d={};if(null!==b.attributes&&void 0!==b.attributes)for(var e in b.attributes){var f=b.attributes[e];
if(null===f)d[e]=f;else if(g.isString(f)||g.isNumber(f)||g.isBoolean(f)||g.isDate(f))d[e]=f;else throw Error("Illegal Argument");}return a.createFromGraphicLikeObject(c,d,null)};a.prototype.domainValueLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;c=g.getDomain(a,this._layer,this,c);if(void 0===b)try{b=this.field(a)}catch(v){return null}return g.getDomainValue(c,b)};a.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;if(void 0===
b){try{b=this.field(a)}catch(v){return null}return b}a=g.getDomain(a,this._layer,this,c);return g.getDomainCode(a,b)};return a}()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(h,d,n,f,l,g,e){function c(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function p(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function b(a,b){return b*
a.scale[0]+a.translate[0]}function a(a,b){return a.translate[1]-b*a.scale[1]}function m(a){a=a.coords;return{x:a[0],y:a[1]}}function k(a){var b=new e.default;b.coords[0]=a.x;b.coords[1]=a.y;return b}function q(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function v(a){var b=new e.default;b.coords[0]=a.x;b.coords[1]=a.y;b.coords[2]=a.z;return b}function u(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function t(a){var b=new e.default;b.coords[0]=a.x;b.coords[1]=a.y;b.coords[2]=a.m;return b}function r(a){a=
a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function w(a){var b=new e.default;b.coords[0]=a.x;b.coords[1]=a.y;b.coords[2]=a.z;b.coords[3]=a.m;return b}function z(a,b,c){if(!a)return null;for(var d=b?c?4:3:c?3:2,e=[],f=0;f<a.coords.length;f+=d){for(var g=[],h=0;h<d;h++)g.push(a.coords[f+h]);e.push(g)}return b?c?{points:e,hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function B(a,b,c){if(!a)return null;var d=b?c?4:3:c?3:2,e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=
a[h],m=[],p=0;p<k;p++){for(var l=[],q=0;q<d;q++)l.push(e[g++]);m.push(l)}f.push(m)}return b?c?{paths:f,hasZ:b,hasM:c}:{paths:f,hasZ:b}:c?{paths:f,hasM:c}:{paths:f}}function A(a,b,c){if(!a)return null;var d=b?c?4:3:c?3:2,e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],m=[],p=0;p<k;p++){for(var l=[],q=0;q<d;q++)l.push(e[g++]);m.push(l)}f.push(m)}return b?c?{rings:f,hasZ:b,hasM:c}:{rings:f,hasZ:b}:c?{rings:f,hasM:c}:{rings:f}}function x(a,b,c,d,f,g){a.length=0;if(c){switch(c){case "esriGeometryPoint":c=
k;d&&f?c=w:d?c=v:f&&(c=t);for(d=0;d<b.length;d++){var h=b[d];f=h.geometry;h=h.attributes;f=f?c(f):void 0;a.push(new l.default(f,h,null,h[g]))}break;case "esriGeometryMultipoint":c=d?f?4:3:f?3:2;for(d=0;d<b.length;d++){f=b[d];var m=f.geometry;f=f.attributes;h=void 0;if(m){h=new e.default;h.lengths[0]=m.points.length;for(var p=h.coords,q=0,y=0,m=m.points;y<m.length;y++)for(var r=m[y],x=0;x<c;x++)p[q++]=r[x]}a.push(new l.default(h,f,null,f[g]))}break;case "esriGeometryPolyline":c=d?f?4:3:f?3:2;for(d=
0;d<b.length;d++){f=b[d];r=f.geometry;f=f.attributes;h=void 0;if(r)for(h=new e.default,p=h.lengths,q=h.coords,m=y=0,r=r.paths;m<r.length;m++){for(var x=r[m],C=0,u=x;C<u.length;C++)for(var E=u[C],z=0;z<c;z++)q[y++]=E[z];p.push(x.length)}a.push(new l.default(h,f,null,f[g]))}break;case "esriGeometryPolygon":c=d?f?4:3:f?3:2;for(d=0;d<b.length;d++){h=b[d];x=h.geometry;f=h.centroid;h=h.attributes;p=void 0;if(x)for(p=new e.default,q=p.lengths,y=p.coords,r=m=0,x=x.rings;r<x.length;r++){C=x[r];u=0;for(E=C;u<
E.length;u++)for(var z=E[u],A=0;A<c;A++)y[m++]=z[A];q.push(C.length)}f?a.push(new l.default(p,h,k(f),h[g])):a.push(new l.default(p,h,null,h[g]))}break;default:K.error("convertToFeatureSet:unknown-geometry",new n("Unable to parse unknown geometry type '"+c+"'")),a.length=0}return a}a.length=0}function C(a,b,c,d,e){a.length=0;switch(c){case "esriGeometryPoint":c=m;d&&e?c=r:d?c=q:e&&(c=u);for(d=0;d<b.length;d++){var f=b[d];e=f.geometry;f=f.attributes;e=e?c(e):null;a.push({attributes:f,geometry:e})}break;
case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var g=b[c],f=g.geometry,g=g.attributes,h=void 0;f&&(h=z(f,d,e));a.push({attributes:g,geometry:h})}break;case "esriGeometryPolyline":for(c=0;c<b.length;c++)g=b[c],f=g.geometry,g=g.attributes,h=void 0,f&&(h=B(f,d,e)),a.push({attributes:g,geometry:h});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var h=b[c],g=h.geometry,f=h.attributes,k=h.centroid,h=void 0;g&&(h=A(g,d,e));k?(g=m(k),a.push({attributes:f,centroid:g,geometry:h})):a.push({attributes:f,
geometry:h})}break;default:K.error("convertToFeatureSet:unknown-geometry",new n("Unable to parse unknown geometry type '"+c+"'"))}return a}function y(a,b,d,e,f,g){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;f=S[f];var h=b.coords;b=b.lengths;var k=d?e?4:3:e?3:2;d=d?e?R:J:e?J:Q;if(!b.length)return d(a.coords,h,0,0,c(g,h[0]),p(g,h[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=k,a;for(var m,l,q,n=0,y,r=0,x=0;x<b.length;x++){var t=
b[x];if(!(t<f)){var C=0;y=r;l=e=c(g,h[n]);q=m=p(g,h[n+1]);d(a.coords,h,y,n,l,q);C++;n+=k;y+=k;for(var u=1;u<t;u++,n+=k)if(l=c(g,h[n]),q=p(g,h[n+1]),l!==e||q!==m)d(a.coords,h,y,n,l-e,q-m),y+=k,C++,e=l,m=q;C>=f&&(a.lengths.push(C),r=y)}}a.coords.length=r;return a.coords.length?a:null}function E(a,b,c,d,e,f,g){for(var h=g-c,k=0,m=0,p,l=f+c;l<g-c;l+=c){p=b[l];var q=b[l+1],n=b[f],y=b[f+1],r=b[h],x=b[h+1];n===r?p=Math.abs(p-n):(r=(x-y)/(r-n),p=Math.abs(r*p-q+(y-r*n))/Math.sqrt(r*r+1));p>k&&(m=l,k=p)}k>
d?(E(a,b,c,d,e,f,m+c),E(a,b,c,d,e,m,g)):(e(a,b,a.length,f,b[f],b[f+1]),e(a,b,a.length,h,b[h],b[h+1]))}function D(c,d,e,f,g){var h=d.coords,k=d.lengths,m=e?f?R:J:f?J:Q;e=e?f?4:3:f?3:2;if(!h.length)return c!==d&&(c.lengths.length=0,c.coords.length=0),c;if(!k.length)return m(c.coords,h,0,0,b(g,h[0]),a(g,h[1])),c!==d&&(c.lengths.length=0,c.coords.length=e),c;var p=g.scale;f=p[0];for(var p=p[1],l=0,q=0;q<k.length;q++){var n=k[q];c.lengths[q]=n;var y=b(g,h[l]),r=a(g,h[l+1]);m(c.coords,h,l,l,y,r);for(var l=
l+e,x=1;x<n;x++,l+=e)y+=h[l]*f,r-=h[l+1]*p,m(c.coords,h,l,l,y,r)}c!==d&&(c.lengths.length=k.length,c.coords.length=h.length);return c}function F(a,b,c,d,e,f){f=e?f?4:3:f?3:2;var g=c,h=c+f,k=0,m=0,p=c=0,l=0,q=0;for(--d;q<d;q++,g+=f,h+=f){var n=b[g],y=b[g+1],r=b[g+2],x=b[h],t=b[h+1],C=b[h+2],u=n*t-x*y,p=p+u,k=k+(n+x)*u,m=m+(y+t)*u;e&&(u=n*C-x*r,c+=(r+C)*u,l+=u);n<a[0]&&(a[0]=n);n>a[1]&&(a[1]=n);y<a[2]&&(a[2]=y);y>a[3]&&(a[3]=y);e&&(r<a[4]&&(a[4]=r),r>a[5]&&(a[5]=r))}0<p&&(p*=-1);0<l&&(l*=-1);if(!p)return null;
a=[k,m,.5*p];e&&(a[3]=c,a[4]=.5*l);return a}function L(a,b,c,d,e){e=d?e?4:3:e?3:2;for(var f=b,g=b+e,h=0,k=0,m=0,p=0,l=0,q=c-1;l<q;l++,f+=e,g+=e){var n=a[f],y=a[f+1],r=a[f+2],x=a[g],t=a[g+1],C=a[g+2],u=d?M(n,y,r,x,t,C):P(n,y,x,t);u&&(h+=u,d?(n=ba(n,y,r,x,t,C),k+=u*n[0],m+=u*n[1],p+=u*n[2]):(n=I(n,y,x,t),k+=u*n[0],m+=u*n[1]))}return 0<h?d?[k/h,m/h,p/h]:[k/h,m/h]:0<c?d?[a[b],a[b+1],a[b+2]]:[a[b],a[b+1]]:null}function P(a,b,c,d){a=c-a;b=d-b;return Math.sqrt(a*a+b*b)}function M(a,b,c,d,e,f){a=d-a;b=e-
b;c=f-c;return Math.sqrt(a*a+b*b+c*c)}function I(a,b,c,d){return[a+.5*(c-a),b+.5*(d-b)]}function ba(a,b,c,d,e,f){return[a+.5*(d-a),b+.5*(e-b),c+.5*(f-c)]}Object.defineProperty(d,"__esModule",{value:!0});var K=f.getLogger("esri.tasks.support.optimizedFeatureSet"),S={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Q=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f},J=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2]},R=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+
2];a[c+3]=b[d+3]};d.quantizeX=c;d.quantizeY=p;d.hydrateX=b;d.hydrateY=a;d.convertToPoint=function(a,b,c){return a?b?c?r(a):q(a):c?u(a):m(a):null};d.convertToMultipoint=z;d.convertToPolyline=B;d.convertToPolygon=A;var H=[],W=[];d.convertFromFeature=function(a,b,c,d,e){H[0]=a;a=x(W,H,b,c,d,e)[0];H.length=W.length=0;return a};d.convertFromFeatures=x;d.convertToFeature=function(a,b,c,d){W[0]=a;C(H,W,b,c,d);a=H[0];H.length=W.length=0;return a};d.convertToGeometry=function(a,b,c,d){if(!a||!a.geometry)return null;
switch(b){case "esriGeometryPoint":return b=m,c&&d?b=r:c?b=q:d&&(b=u),b(a.geometry);case "esriGeometryMultipoint":return z(a.geometry,c,d);case "esriGeometryPolyline":return B(a.geometry,c,d);case "esriGeometryPolygon":return A(a.geometry,c,d);default:K.error("convertToGeometry:unknown-geometry",new n("Unable to parse unknown geometry type '"+b+"'"))}};d.convertToFeatures=C;d.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,d=a.transform,e=a.fields,f=a.hasM,g=a.hasZ,
h=a.geometryType,k=a.exceededTransferLimit;a={features:C([],a.features,h,g,f),fields:e,geometryType:h,objectIdFieldName:b,spatialReference:c};d&&(a.transform=d);k&&(a.exceededTransferLimit=k);f&&(a.hasM=f);g&&(a.hasZ=g);return a};d.convertFromFeatureSet=function(a,b){var c=new g.default,d=a.hasM,e=a.hasZ,f=a.features,h=a.objectIdFieldName,k=a.spatialReference,m=a.geometryType,p=a.exceededTransferLimit,l=a.transform;c.fields=a.fields;c.geometryType=m;c.objectIdFieldName=h||b;c.spatialReference=k;if(!c.objectIdFieldName)return K.error(new n("optimized-features:invalid-objectIdFieldName",
"objectIdFieldName is missing")),c;f&&x(c.features,f,m,e,d,c.objectIdFieldName);p&&(c.exceededTransferLimit=p);d&&(c.hasM=d);e&&(c.hasZ=e);l&&(c.transform=l);return c};d.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,f=a.features;e<f.length;e++){var g=f[e];g.geometry&&D(g.geometry,g.geometry,c,d,b);g.centroid&&D(g.centroid,g.centroid,c,d,b)}a.transform=null;return a};d.quantizeOptimizedFeatureSet=function(a,b){var c=b.geometryType,d=b.features,
f=b.hasM,g=b.hasZ;if(!a)return b;for(var h=0;h<d.length;h++){var k=d[h],m=new l.default(new e.default,k.attributes);y(m.geometry,k.geometry,f,g,c,a);k.centroid&&(m.centroid=new e.default,y(m.centroid,k.centroid,f,g,"esriGeometryPoint",a));d[h]=m}b.transform=a;return b};d.quantizeOptimizedGeometry=y;d.quantizeOptimizedGeometryRemoveCollinear=function(a,b,d,e,f,g){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;f=S[f];var h=b.coords;b=
b.lengths;var k=d?e?4:3:e?3:2;d=d?e?R:J:e?J:Q;if(!b.length)return d(a.coords,h,0,0,c(g,h[0]),p(g,h[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=k,a;for(var m,l,q,n=0,y,r=0,x=0;x<b.length;x++){var t=b[x];if(!(t<f)){var C=0;y=r;e=m=c(g,h[n]);q=l=p(g,h[n+1]);d(a.coords,h,y,n,e,q);C++;for(var n=n+k,u=!1,v=0,w=0,E=1;E<t;E++,n+=k)if(e=c(g,h[n]),q=p(g,h[n+1]),e!==m||q!==l)m=e-m,l=q-l,u&&(0===v&&0===m||0===w&&0===l)?(v+=m,w+=l):(u=!0,v=m,w=l,y+=k,C++),d(a.coords,h,y,n,v,w),m=e,l=q;u&&(y+=k,
d(a.coords,h,y,n,v,w));C>=f&&(a.lengths.push(C),r=y)}}a.coords.length!==r&&(a.coords.length=r);return a.coords.length?a:null};d.generalizeOptimizedGeometry=function(a,b,c,d,e,f){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;e=S[e];var g=b.coords;b=b.lengths;var h=c?d?4:3:d?3:2;c=c?d?R:J:d?J:Q;if(!b.length)return c(a.coords,g,0,0,g[0],g[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var k=d=0;k<b.length;k++){var m=
b[k];if(!(m<e)){var p=a.coords.length/h;E(a.coords,g,h,f,c,d,d+m*h);var l=a.coords.length/h-p;l>=e?a.lengths.push(l):a.coords.length=p*h}d+=m*h}return a.coords.length?a:null};d.getBoundsOptimizedGeometry=function(a,b,c,d){c=c?d?4:3:d?3:2;var e=d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=c){var k=b[h],m=b[h+1];d=Math.min(d,k);f=Math.max(f,k);e=Math.min(e,m);g=Math.max(g,m)}}a[0]=d;a[1]=e;a[2]=f;a[3]=g;return a};
d.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=c?d?4:3:d?3:2;d=b.coords;var e=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,k=0,m=0;for(b=b.lengths;m<b.length;m++)for(var p=b[m],l=d[k],q=d[k+1],e=Math.min(l,e),f=Math.min(q,f),g=Math.max(l,g),h=Math.max(q,h),k=k+c,n=1;n<p;n++,k+=c){var y=d[k],r=d[k+1],l=l+y,q=q+r;0>y&&(e=Math.min(e,l));0<y&&(g=Math.max(g,l));0>r?f=Math.min(f,q):0<r&&(h=Math.max(h,q))}a[0]=e;a[1]=f;a[2]=g;a[3]=h;
return a};d.hydrateOptimizedGeometry=D;d.getCentroidOptimizedGeometry=function(a,b,c,d){if(!b||!b.lengths.length)return null;a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);for(var e=a.coords,f=[],g=c?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],h=b.lengths,k=b.coords,
m=c?d?4:3:d?3:2,p=0,l=0;l<h.length;l++){var q=h[l],n=F(g,k,p,q,c,d);n&&f.push(n);p+=q*m}f.sort(function(a,b){var d=a[2]-b[2];0===d&&c&&(d=a[4]-b[4]);return d});f.length&&(m=6*f[0][2],e[0]=f[0][0]/m,e[1]=f[0][1]/m,c&&(m=6*f[0][4],e[2]=0!==m?f[0][3]/m:0),e[0]<g[0]||e[0]>g[1]||e[1]<g[2]||e[1]>g[3]||c&&(e[2]<g[4]||e[2]>g[5]))&&(e.length=0);if(!e.length)if(b=b.lengths[0]?L(k,0,h[0],c,d):null)e[0]=b[0],e[1]=b[1],c&&2<b.length&&(e[2]=b[2]);else return null;return a};d.lineCentroid=L;d.getLength2D=P;d.getLength3D=
M;d.getMidpoint2D=I;d.getMidpoint3D=ba})},"esri/layers/graphics/OptimizedFeature":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});h=function(){return function(d,f,h,g){void 0===d&&(d=null);void 0===f&&(f={});this.geometry=d;this.attributes=f;h&&(this.centroid=h);null!=g&&(this.objectId=g)}}();d.default=h})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});
h=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1}}();d.default=h})},"esri/layers/graphics/OptimizedGeometry":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});h=function(){return function(d,f){void 0===d&&(d=[]);void 0===f&&
(f=[]);this.lengths=d;this.coords=f}}();d.default=h})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(h,d){function n(a,b,c,d){return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function f(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];if("FormulaFunction"===d.type||"any"===d.type)return void 0===d.signature&&(d.signature={min:"0",max:"*"}),n(d.signature,a,b,c)}return void 0!==
c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",max:"*"}),n(d.signature,a,b,c)):-1}function l(a,b){void 0===b&&(b=!0);var c=q(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?q(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?l(a.init,!1):"";
case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(c=l(a.declarations[d],b),""!==c)return c;return"";case "ForInStatement":c=l(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return q(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return q(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return q(a,"SYNTAX","LEFTNOTVAR");c=l(a.right,b);if(""!==c)break;c=l(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==
a.test&&(c=l(a.test,b),""!==c))break;if(null!==a.init&&(c=l(a.init,b),""!==c))break;if(null!==a.update&&(c=l(a.update,b),""!==c))break;if(null!==a.body&&(c=l(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=l(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=l(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=l(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var e=[],d=0;d<
a.body.length;d++)"EmptyStatement"!==a.body[d].type&&e.push(a.body[d]);a.body=e;for(d=0;d<a.body.length;d++)if(c=l(a.body[d],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?q(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?q(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):l(a.body,!1);case "ReturnStatement":return null!==a.argument?l(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?q(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):
l(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=l(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return l(a.right,!1);case "ExpressionStatement":return l(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=l(a.object,b);if(""!==c)break;return!0===
a.computed?l(a.property,b):"";case "Literal":return"";case "ThisExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return q(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(d=0;d<a.arguments.length;d++)if(c=l(a.arguments[d],b),""!==c)return c;return"";case "UnaryExpression":c=l(a.argument,b);break;case "BinaryExpression":c=l(a.left,b);if(""!==c)break;c=l(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=l(a.left,b);if(""!==c)break;c=l(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(d=0;d<a.elements.length&&(c=l(a.elements[d],b),""===c);d++);break;case "Array":return q(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(d=
0;d<a.properties.length&&(c="",null!==a.properties[d].key&&("Literal"!==a.properties[d].key.type&&"Identifier"!==a.properties[d].key.type&&(c=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[d].key.type&&(e=a.properties[d].key.value,"string"===typeof e||e instanceof String||(c=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),""===c&&(c=l(a.properties[d],b)),""===c);d++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return q(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==
a.key.type&&(c=l(a.key,b),""!==c))break;c=l(a.value,b)}return c}catch(F){throw F;}}function g(b,c){var d=q(b,"SYNTAX","UNREOGNISED"),e=null,h="";try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&"FunctionExpression"===b.init.type)return q(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");b.id.name.toLowerCase();var k=null===b.init?"":g(b.init,c);if(""!==k)return k;null===c.localScope?c.globalScope[b.id.name.toLowerCase()]={type:"any"}:c.localScope[b.id.name.toLowerCase()]={type:"any"};return"";
case "FunctionDeclaration":e=a(b.id.name.toLowerCase(),b,c);h=m(b,c);if(""!==h)return h;if(null!==c.localScope)return q(b,"SYNTAX","GLOBALFUNCTIONSONLY");e.isnative=!1;c.globalScope[b.id.name.toLowerCase()]={type:"FormulaFunction",signature:[e]};return"";case "VariableDeclaration":for(var d="",p=0;p<b.declarations.length&&(d=g(b.declarations[p],c),""===d);p++);break;case "IfStatement":d=g(b.test,c);if(""!==d)break;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)return q(b.test,
"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==b.consequent&&(d=g(b.consequent,c),""!==d))break;if(null!==b.alternate&&(d=g(b.alternate,c),""!==d))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(p=0;p<b.body.length;p++)if(d=g(b.body[p],c),""!==d)return d;return"";case "ReturnStatement":return null!==b.argument?g(b.argument,c):"";case "ForInStatement":if("VariableDeclaration"===b.left.type){if(1<b.left.declarations.length)return q(b,"SYNTAX","ONLY1VAR");if(null!==
b.left.declarations[0].init)return q(b,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==b.left.type)return q(b,"SYNTAX","LEFTNOTVAR");d=g(b.left,c);if(""!==d)break;d=g(b.right,c);if(""!==d)break;d=g(b.body,c);if(""!==d)break;return"";case "ForStatement":if(null!==b.init&&(d=g(b.init,c),""!==d))break;if(null!==b.test&&(d=g(b.test,c),""!==d))break;if(null!==b.body&&(d=g(b.body,c),""!==d))break;if(null!==b.update&&(d=g(b.update,c),""!==d))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";
case "UpdateExpression":if("Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type)return q(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var l=!1;if("MemberExpression"===b.argument.type)return g(b.argument,c);null!==c.localScope&&void 0!==c.localScope[b.argument.name.toLowerCase()]&&(l=!0);void 0!==c.globalScope[b.argument.name.toLowerCase()]&&(l=!0);return!1===l?"Identifier "+b.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==b.left.type&&"MemberExpression"!==
b.left.type)return q(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var n=g(b.right,c);if(""!==n)return n;l=!1;if("MemberExpression"===b.left.type)return n=g(b.left,c),""!==n?n:"";null!==c.localScope&&void 0!==c.localScope[b.left.name.toLowerCase()]&&(l=!0);void 0!==c.globalScope[b.left.name.toLowerCase()]&&(l=!0);return!1===l?"Identifier "+b.left.name+" has not been declared.":"";case "ExpressionStatement":return g(b.expression,c);case "Identifier":var r=b.name.toLowerCase();if(null!==c.localScope&&void 0!==
c.localScope[r])return"";d=void 0!==c.globalScope[r]?"":q(b,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":d=g(b.object,c);if(""!==d)break;return!0===b.computed?g(b.property,c):"";case "Literal":return"";case "ThisExpression":d=q(b,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==b.callee.type)return q(b,"SYNTAX","ONLYNODESSUPPORTED");d="";for(p=0;p<b.arguments.length;p++)if(d=g(b.arguments[p],c),""!==d)return d;var t=f(b.callee.name,b.arguments,c);-1===t&&(d=q(b,
"SYNTAX","NOTFOUND"));-2===t&&(d=q(b,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":d=g(b.argument,c);break;case "BinaryExpression":d=g(b.left,c);if(""!==d)break;d=g(b.right,c);if(""!==d)break;return"";case "LogicalExpression":d=g(b.left,c);if(""!==d)break;if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)return q(b.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");d=g(b.right,c);if(""!==d)break;return"AssignmentExpression"===b.right.type||"UpdateExpression"===
b.right.type?q(b.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return q(b,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(p=0;p<b.elements.length&&(d=g(b.elements[p],c),""===d);p++);break;case "ObjectExpression":d="";for(p=0;p<b.properties.length;p++){d="";if(null!==b.properties[p].key&&("Literal"!==b.properties[p].key.type&&"Identifier"!==b.properties[p].key.type&&(d=q(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[p].key.type)){var x=
b.properties[p].key.value;"string"===typeof x||x instanceof String||(d=q(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===d&&(d=g(b.properties[p],c));if(""!==d)break}break;case "Property":if("Literal"!==b.key.type&&"Identifier"!==b.key.type)return q(b,"SYNTAX","ONLYLITERAL");if("Identifier"!==b.key.type&&(d=g(b.key,c),""!==d))break;d=g(b.value,c);break;case "Array":return q(b,"SYNTAX","NOTSUPPORTED")}return d}catch(S){throw S;}}function e(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==
a.init?e(a.init,b):c;case "FunctionDeclaration":return e(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(e(a.declarations[d],b))return!0;return c;case "IfStatement":return e(a.test,b)||null!==a.consequent&&e(a.consequent,b)||null!==a.alternate&&e(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(e(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?e(a.argument,b):c;case "UpdateExpression":return e(a.argument,
b);case "AssignmentExpression":return(c=e(a.right,b))?c:e(a.left,b);case "ExpressionStatement":return e(a.expression,b);case "ForInStatement":return(c=e(a.left,b))||(c=e(a.right,b))?c:c=e(a.body,b);case "ForStatement":if(null!==a.init&&(c=e(a.init,b))||null!==a.test&&(c=e(a.test,b))||null!==a.body&&(c=e(a.body,b)))return c;null!==a.update&&(c=e(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===
a.name.toLowerCase();case "MemberExpression":if(c=e(a.object,b))return c;!0===a.computed&&(c=e(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)e(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)e(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return e(a.argument,b);case "BinaryExpression":return(c=e(a.left,b))?c:c=e(a.right,b);case "LogicalExpression":return(c=e(a.left,
b))?c:c=e(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)e(a.properties[d],b)&&(c=!0);return c;case "Property":return c=e(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(D){throw D;}}function c(a,b){return!0===e(a.body[0].body,b.toLowerCase())?!0:!1}function p(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?p(a.init,b):c;case "FunctionDeclaration":return p(a.body,b);case "VariableDeclaration":for(var d=
0;d<a.declarations.length;d++)if(p(a.declarations[d],b))return!0;return c;case "IfStatement":return p(a.test,b)||null!==a.consequent&&p(a.consequent,b)||null!==a.alternate&&p(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(p(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?p(a.argument,b):c;case "UpdateExpression":return p(a.argument,b);case "AssignmentExpression":return p(a.left,b)?!0:p(a.right,b);case "ExpressionStatement":return p(a.expression,
b);case "ForInStatement":return(c=p(a.left,b))||(c=p(a.right,b))?c:c=p(a.body,b);case "ForStatement":if(null!==a.init&&(c=p(a.init,b))||null!==a.test&&(c=p(a.test,b))||null!==a.body&&(c=p(a.body,b)))return c;null!==a.update&&(c=p(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=p(a.object,b))return c;!0===a.computed&&(c=p(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;
case "CallExpression":if(a.callee.name.toLowerCase()===b.toLowerCase())return!0;for(d=0;d<a.arguments.length;d++)p(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)p(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return p(a.argument,b);case "BinaryExpression":return(c=p(a.left,b))?c:c=p(a.right,b);case "LogicalExpression":return(c=p(a.left,b))?c:c=p(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(d=0;d<a.properties.length;d++)p(a.properties[d],
b)&&(c=!0);return c;case "Property":return c=p(a.value,b);case "Array":return c;default:return c}}catch(D){throw D;}}function b(a,c){var d=[],e;try{switch(a.type){case "VariableDeclarator":return null!==a.init?b(a.init,c):d;case "FunctionDeclaration":return b(a.body,c);case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)e=b(a.declarations[f],c),d=d.concat(e);return d;case "ForInStatement":return e=b(a.left,c),d=d.concat(e),e=b(a.right,c),d=d.concat(e),e=b(a.body,c),d=d.concat(e);case "ForStatement":return null!==
a.init&&(e=b(a.init,c),d=d.concat(e)),null!==a.test&&(e=b(a.test,c),d=d.concat(e)),null!==a.body&&(e=b(a.body,c),d=d.concat(e)),null!==a.update&&(e=b(a.update,c),d=d.concat(e)),d;case "IfStatement":return e=b(a.test,c),d=d.concat(e),null!==a.consequent&&(e=b(a.consequent,c),d=d.concat(e)),null!==a.alternate&&(e=b(a.alternate,c),d=d.concat(e)),d;case "EmptyStatement":return d;case "BlockStatement":for(f=0;f<a.body.length;f++)e=b(a.body[f],c),d=d.concat(e);return d;case "ReturnStatement":return null!==
a.argument?b(a.argument,c):d;case "UpdateExpression":return b(a.argument,c);case "AssignmentExpression":return d=b(a.left,c),d=d.concat(b(a.right,c));case "ExpressionStatement":return b(a.expression,c);case "BreakStatement":return d;case "ContinueStatement":return d;case "Compound":return d;case "Identifier":return d;case "MemberExpression":if("Identifier"!==a.object.type)return d;if(!1===a.computed)d.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&
"string"===typeof a.property.value&&d.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(F){}return d;case "Literal":return d;case "ThisExpression":return d;case "CallExpression":for(f=0;f<a.arguments.length;f++)e=b(a.arguments[f],c),d=d.concat(e);return d;case "ArrayExpression":for(f=0;f<a.elements.length;f++)e=b(a.elements[f],c),d=d.concat(e);return d;case "UnaryExpression":return b(a.argument,c);case "ObjectExpression":for(f=0;f<a.properties.length;f++)e=b(a.properties[f],
c),d=d.concat(e);return d;case "Property":return b(a.value,c);case "BinaryExpression":return e=b(a.left,c),d=d.concat(e),e=b(a.right,c),d=d.concat(e);case "LogicalExpression":return e=b(a.left,c),d=d.concat(e),e=b(a.right,c),d=d.concat(e);case "ConditionalExpression":return d;case "Array":return d;default:return d}}catch(F){throw F;}}function a(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,return:"any",params:c}}function m(a,b){b={globalScope:b.globalScope,
localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};return g(a.body,b)}function k(a,b,c,d){var e={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var f in b)"sync"===d&&void 0!==b[f].min?e[f]={type:"FormulaFunction",signature:{min:b[f].min,max:b[f].max}}:"sync"!==d&&void 0!==b[f].fmin&&(e[f]={type:"FormulaFunction",signature:{min:b[f].fmin,max:b[f].fmax}});
for(b=0;b<c.length;b++)f=c[b],e[f.name]={type:"FormulaFunction",signature:f};for(f in a)e[f]=a[f],e[f].type="any";return e}function q(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=
!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":d+="THIS construct is not supported.";
case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";
break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":d+=
"Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;case "Array":d+="Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(D){throw D;}return d}function v(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:q(a,b,c)}}function u(a,b,c,d,e){void 0===e&&(e=!0);b={globalScope:b.globalScope,localScope:{}};for(e=
0;e<a.params.length;e++)b.localScope[a.params[e].name.toLowerCase()]={type:"any"};t(a.body,b,c,d,!1)}function t(b,c,d,e,g){void 0===g&&(g=!0);if(null===b)throw Error("Unnexpexted Expression Syntax");var h=null;try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&"FunctionExpression"===b.init.type){e.push(v(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==b.id.type?e.push(v(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(b.id.name.toLowerCase(),null===c.localScope?c.globalScope[b.id.name.toLowerCase()]=
{type:"any"}:c.localScope[b.id.name.toLowerCase()]={type:"any"});null!==b.init&&t(b.init,c,d,e,g);break;case "FunctionDeclaration":!1===g&&e.push(v(b,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==b.id.type&&e.push(v(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));h=a("",b,c);u(b,c,d,e,g);null!==c.localScope&&e.push(v(b,"SYNTAX","GLOBALFUNCTIONSONLY"));h.isnative=!1;"Identifier"===b.id.type&&(c.globalScope[b.id.name.toLowerCase()]={type:"FormulaFunction",signature:[h]});break;case "VariableDeclaration":for(var k=
0;k<b.declarations.length;k++)t(b.declarations[k],c,d,e,g);break;case "IfStatement":null!==b.test&&(t(b.test,c,d,e,g),"AssignmentExpression"!==b.test.type&&"UpdateExpression"!==b.test.type||e.push(v(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==b.consequent&&t(b.consequent,c,d,e,g);null!==b.alternate&&t(b.alternate,c,d,e,g);break;case "EmptyStatement":break;case "BlockStatement":if(null!==b.body)for(k=0;k<b.body.length;k++)t(b.body[k],c,d,e,g);break;case "ReturnStatement":null!==
b.argument&&t(b.argument,c,d,e,g);break;case "ForInStatement":"VariableDeclaration"===b.left.type?(1<b.left.declarations.length&&e.push(v(b,"SYNTAX","ONLY1VAR")),null!==b.left.declarations[0].init&&e.push(v(b,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==b.left.type&&e.push(v(b,"SYNTAX","LEFTNOTVAR"));t(b.left,c,d,e,g);t(b.right,c,d,e,g);t(b.body,c,d,e,g);break;case "ForStatement":null!==b.init&&t(b.init,c,d,e,g);null!==b.test&&t(b.test,c,d,e,g);null!==b.body&&t(b.body,c,d,e,g);null!==b.update&&t(b.update,
c,d,e,g);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type?e.push(v(b,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===b.argument.type&&(h=!1,!1===d&&(null!==c.localScope&&void 0!==c.localScope[b.argument.name.toLowerCase()]&&(h=!0),void 0!==c.globalScope[b.argument.name.toLowerCase()]&&(h=!0),!1===h&&e.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+
b.argument.name+" has not been declared."}))),"MemberExpression"===b.argument.type&&t(b.argument,c,d,e,g));break;case "AssignmentExpression":"Identifier"!==b.left.type&&"MemberExpression"!==b.left.type&&e.push(v(b,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:e.push(v(b,"SYNTAX","OPERATORNOTRECOGNISED"))}t(b.right,c,d,e,g);h=!1;"Identifier"===b.left.type&&(null!==c.localScope&&void 0!==c.localScope[b.left.name.toLowerCase()]&&
(h=!0),void 0!==c.globalScope[b.left.name.toLowerCase()]&&(h=!0),!1===d&&!1===h&&e.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.argument.name+" has not been declared."}));"MemberExpression"===b.left.type&&t(b.left,c,d,e,g);break;case "ExpressionStatement":t(b.expression,c,d,e,g);break;case "Identifier":var m=b.name.toLowerCase();if(null!==c.localScope&&void 0!==c.localScope[m])break;void 0===c.globalScope[m]&&!1===d&&e.push(v(b,"SYNTAX","VARIABLENOTFOUND"));
break;case "MemberExpression":t(b.object,c,d,e,g);!0===b.computed&&t(b.property,c,d,e,g);break;case "Literal":return"";case "ThisExpression":e.push(v(b,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==b.callee.type&&e.push(v(b,"SYNTAX","ONLYNODESSUPPORTED"));for(k=0;k<b.arguments.length;k++)t(b.arguments[k],c,d,e,g);var p=f(b.callee.name,b.arguments,c);!1===d&&-1===p&&e.push(v(b,"SYNTAX","NOTFOUND"));-2===p&&e.push(v(b,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":t(b.argument,
c,d,e,g);break;case "BinaryExpression":t(b.left,c,d,e,g);t(b.right,c,d,e,g);switch(b.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:e.push(v(b,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(b.operator){case "\x26\x26":case "||":break;default:e.push(v(b,"SYNTAX","OPERATORNOTRECOGNISED"))}t(b.left,c,d,e,g);"AssignmentExpression"!==b.left.type&&"UpdateExpression"!==b.left.type||
e.push(v(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));t(b.right,c,d,e,g);"AssignmentExpression"!==b.right.type&&"UpdateExpression"!==b.right.type||e.push(v(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":e.push(v(b,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(k=0;k<b.elements.length;k++)t(b.elements[k],c,d,e,g);break;case "Array":e.push(v(b,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(k=0;k<b.properties.length;k++)t(b.properties[k],
c,d,e,g);break;case "Property":"Literal"!==b.key.type&&"Identifier"!==b.key.type&&e.push(v(b,"SYNTAX","ONLYLITERAL"));"Literal"===b.key.type&&t(b.key,c,d,e,g);t(b.value,c,d,e,g);break;default:e.push(v(b,"SYNTAX","UNRECOGNISED"))}}catch(I){e.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Unnexpected Syntax"})}}function r(a,b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?r(a.init,b):c;case "FunctionDeclaration":return r(a.body,
b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)d=r(a.declarations[e],b),c=c.concat(d);return c;case "ForInStatement":return d=r(a.left,b),c=c.concat(d),d=r(a.right,b),c=c.concat(d),d=r(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=r(a.init,b),c=c.concat(d)),null!==a.test&&(d=r(a.test,b),c=c.concat(d)),null!==a.body&&(d=r(a.body,b),c=c.concat(d)),null!==a.update&&(d=r(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=r(a.test,b),c=c.concat(d),null!==
a.consequent&&(d=r(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=r(a.alternate,b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)d=r(a.body[e],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?r(a.argument,b):c;case "UpdateExpression":return r(a.argument,b);case "AssignmentExpression":return c=r(a.left,b),c=c.concat(r(a.right,b));case "ExpressionStatement":return r(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;
case "Compound":return c;case "Identifier":return c;case "MemberExpression":return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(e=0;e<a.arguments.length;e++)d=r(a.arguments[e],b),c=c.concat(d);c.push(a.callee.name.toLowerCase());return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)d=r(a.elements[e],b),c=c.concat(d);return c;case "UnaryExpression":return r(a.argument,b);case "ObjectExpression":for(e=0;e<a.properties.length;e++)d=r(a.properties[e],b),
c=c.concat(d);return c;case "Property":return r(a.value,b);case "BinaryExpression":return d=r(a.left,b),c=c.concat(d),d=r(a.right,b),c=c.concat(d);case "LogicalExpression":return d=r(a.left,b),c=c.concat(d),d=r(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(F){throw F;}}function w(a,b){return r(a.body[0].body,b)}Object.defineProperty(d,"__esModule",{value:!0});d.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",
max:"1"},today:{min:"0",max:"0"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",
max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",
max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",
max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",
max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},
buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"}};for(var z in d.functionDecls)d.functionDecls[z].fmin=d.functionDecls[z].min,d.functionDecls[z].fmax=d.functionDecls[z].max;var B=["featureset","featuresetbyid","featuresetbyname","featuresetbyurl","featuresetbyportalitem"],A="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
d.addFunctionDeclaration=function(a,b){var c=d.functionDecls[a.name.toLowerCase()];void 0===c?"sync"===b?d.functionDecls[a.name.toLowerCase()]={min:a.min,max:a.max}:d.functionDecls[a.name.toLowerCase()]={fmin:a.min,fmax:a.max}:"sync"===b?(c.min=a.min,c.max=a.max):(c.fmin=a.min,c.fmax=a.max)};d.checkFunctionSignature=n;d.findFunction=f;d.validateLanguageNode=l;d.testValidityOfExpression=g;d.referencesMemberImpl=e;d.referencesMember=c;d.referencesFunctionImpl=p;d.referencesFunction=function(a,b){return!0===
p(a.body[0].body,b)?!0:!1};d.findFieldLiteralsImpl=b;d.findFieldLiterals=function(a,c){return b(a.body[0].body,c)};d.extractFunctionDeclaration=a;d.validateFunction=m;d.constructGlobalScope=k;d.validateScript=function(a,b,c,e){void 0===c&&(c="async");void 0===e&&(e=d.functionDecls);b={globalScope:k(b.vars,e,b.customFunctions,c),localScope:null};return g(a.body[0].body,b)};d.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":l(a.body[0].body)};d.nodeErrorMessage=
q;d.makeError=v;d.extractAllIssuesInFunction=u;d.extractAllIssues=t;d.checkScript=function(a,b,c,e,f){void 0===e&&(e="async");void 0===f&&(f=d.functionDecls);var g=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},customFunctions:[]};b={globalScope:k(b.vars,f,b.customFunctions,e),localScope:null};try{t(a.body[0].body,b,c,g)}catch(L){}return g};d.findFunctionCallsImpl=r;d.findFunctionCalls=w;d.findScriptDependencies=function(a,
b){void 0===b&&(b=[]);var d=null;if(void 0===a.usesFeatureSet){null===d&&(d=w(a,!1));a.usesFeatureSet=!1;for(var e=0;e<d.length;e++)-1<B.indexOf(d[e])&&(a.usesFeatureSet=!0,a.isAsync=!0);if(!1===a.usesFeatureSet&&b&&0<b.length)for(e=0;e<b.length;e++)if(c(a,b[e])){a.usesFeatureSet=!0;a.isAsync=!0;break}}void 0===a.isAsync&&(a.isAsync=!1);if(void 0===a.usesGeometry)for(a.usesGeometry=!1,null===d&&(d=w(a,!1)),e=0;e<d.length;e++)-1<A.indexOf(d[e])&&(a.usesGeometry=!0)};d.scriptUsesFeatureSet=function(a){a=
w(a,!1);for(var b=0;b<a.length;b++)if(-1<B.indexOf(a[b]))return!0;return!1}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(h,d,n,f){function l(d){return null===d?d:isNaN(d.getTime())?null:d}Object.defineProperty(d,"__esModule",{value:!0});d.registerFunctions=function(d,e){d.today=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,0,0);b=new Date;b.setHours(0,0,0,0);return b})};d.now=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,
0,0);return new Date})};d.timestamp=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,0,0);b=new Date;return b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};d.toutc=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,1,1);b=f.toDate(c[0]);return null===b?null:new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};d.tolocal=
function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,1,1);b=f.toDate(c[0]);return null===b?null:n.utc([b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()]).toDate()})};d.day=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,1,1);b=f.toDate(c[0]);return null===b?NaN:b.getDate()})};d.month=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,1,1);b=f.toDate(c[0]);return null===b?NaN:b.getMonth()})};d.year=function(c,d){return e(c,d,function(b,
a,c){f.pcCheck(c,1,1);b=f.toDate(c[0]);return null===b?NaN:b.getFullYear()})};d.hour=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,1,1);b=f.toDate(c[0]);return null===b?NaN:b.getHours()})};d.second=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,1,1);b=f.toDate(c[0]);return null===b?NaN:b.getSeconds()})};d.millisecond=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,1,1);b=f.toDate(c[0]);return null===b?NaN:b.getMilliseconds()})};d.minute=function(c,d){return e(c,d,function(b,
a,c){f.pcCheck(c,1,1);b=f.toDate(c[0]);return null===b?NaN:b.getMinutes()})};d.weekday=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,1,1);b=f.toDate(c[0]);return null===b?NaN:b.getDay()})};d.date=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,0,7);if(3===c.length)return l(new Date(f.toNumber(c[0]),f.toNumber(c[1]),f.toNumber(c[2]),0,0,0,0));if(4===c.length)return l(new Date(f.toNumber(c[0]),f.toNumber(c[1]),f.toNumber(c[2]),f.toNumber(c[3]),0,0,0));if(5===c.length)return l(new Date(f.toNumber(c[0]),
f.toNumber(c[1]),f.toNumber(c[2]),f.toNumber(c[3]),f.toNumber(c[4]),0,0));if(6===c.length)return l(new Date(f.toNumber(c[0]),f.toNumber(c[1]),f.toNumber(c[2]),f.toNumber(c[3]),f.toNumber(c[4]),f.toNumber(c[5]),0));if(7===c.length)return l(new Date(f.toNumber(c[0]),f.toNumber(c[1]),f.toNumber(c[2]),f.toNumber(c[3]),f.toNumber(c[4]),f.toNumber(c[5]),f.toNumber(c[6])));if(2===c.length){b=f.toString(c[1]);if(""===b)return null;b=f.standardiseDateFormat(b);c=n(f.toString(c[0]),b,!0);return!0===c.isValid()?
c.toDate():null}if(1===c.length){if(f.isString(c[0])&&""===c[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;b=f.toNumber(c[0]);return!1===isNaN(b)?l(new Date(b)):f.toDate(c[0])}if(0===c.length)return new Date})};d.datediff=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,2,3);b=f.toDateM(c[0]);a=f.toDateM(c[1]);if(null===b||null===a)return NaN;switch(f.toString(c[2]).toLowerCase()){case "days":case "day":case "d":return b.diff(a,"days",!0);case "months":case "month":return b.diff(a,
"months",!0);case "minutes":case "minute":case "m":return"M"===c[2]?b.diff(a,"months",!0):b.diff(a,"minutes",!0);case "seconds":case "second":case "s":return b.diff(a,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return b.diff(a);case "hours":case "hour":case "h":return b.diff(a,"hours",!0);case "years":case "year":case "y":return b.diff(a,"years",!0);default:return b.diff(a)}})};d.dateadd=function(c,d){return e(c,d,function(b,a,c){f.pcCheck(c,2,3);b=f.toDateM(c[0]);if(null===b)return null;
a="milliseconds";switch(f.toString(c[2]).toLowerCase()){case "days":case "day":case "d":a="days";break;case "months":case "month":a="months";break;case "minutes":case "minute":case "m":a="M"===c[2]?"months":"minutes";break;case "seconds":case "second":case "s":a="seconds";break;case "milliseconds":case "millisecond":case "ms":a="milliseconds";break;case "hours":case "hour":case "h":a="hours";break;case "years":case "year":case "y":a="years"}b.add(f.toNumber(c[1]),a);return b.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){Object.defineProperty(d,"__esModule",{value:!0});d.registerFunctions=function(d,h){d.polygon=function(a,c){return h(a,c,function(c,d,e){l.pcCheck(e,1,1);c=null;if(e[0]instanceof n){if(c=l.fixSpatialReference(f.parseGeometryFromDictionary(e[0]),a.spatialReference),!1===c instanceof b)throw Error("Illegal Parameter");}else c=e[0]instanceof b?m.fromJSON(e[0].toJSON()):l.fixSpatialReference(new b(JSON.parse(e[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return l.fixNullGeometry(c)})};d.polyline=function(b,c){return h(b,c,function(c,d,e){l.pcCheck(e,1,1);c=null;if(e[0]instanceof n){if(c=l.fixSpatialReference(f.parseGeometryFromDictionary(e[0]),b.spatialReference),!1===c instanceof a)throw Error("Illegal Parameter");}else c=e[0]instanceof a?m.fromJSON(e[0].toJSON()):l.fixSpatialReference(new a(JSON.parse(e[0])),b.spatialReference);if(null!==c&&!1===c.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return l.fixNullGeometry(c)})};d.point=function(a,b){return h(a,b,function(b,c,d){l.pcCheck(d,1,1);b=null;if(d[0]instanceof n){if(b=l.fixSpatialReference(f.parseGeometryFromDictionary(d[0]),a.spatialReference),!1===b instanceof p)throw Error("Illegal Parameter");}else b=d[0]instanceof p?m.fromJSON(d[0].toJSON()):l.fixSpatialReference(new p(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return l.fixNullGeometry(b)})};d.multipoint=function(a,b){return h(a,b,function(b,d,e){l.pcCheck(e,1,1);b=null;if(e[0]instanceof n){if(b=l.fixSpatialReference(f.parseGeometryFromDictionary(e[0]),a.spatialReference),!1===b instanceof c)throw Error("Illegal Parameter");}else b=e[0]instanceof c?m.fromJSON(e[0].toJSON()):l.fixSpatialReference(new c(JSON.parse(e[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return l.fixNullGeometry(b)})};d.extent=function(d,e){return h(d,e,function(e,h,k){k=l.autoCastFeatureToGeometry(k);l.pcCheck(k,1,1);e=null;k[0]instanceof n?e=l.fixSpatialReference(f.parseGeometryFromDictionary(k[0]),d.spatialReference):k[0]instanceof p?(e={xmin:k[0].x,ymin:k[0].y,xmax:k[0].x,ymax:k[0].y,spatialReference:k[0].spatialReference.toJSON()},k[0].hasZ?(e.zmin=k[0].z,e.zmax=k[0].z):k[0].hasM&&(e.mmin=k[0].m,e.mmax=k[0].m),e=m.fromJSON(e)):e=k[0]instanceof b?m.fromJSON(k[0].extent.toJSON()):
k[0]instanceof a?m.fromJSON(k[0].extent.toJSON()):k[0]instanceof c?m.fromJSON(k[0].extent.toJSON()):k[0]instanceof g?m.fromJSON(k[0].toJSON()):l.fixSpatialReference(new g(JSON.parse(k[0])),d.spatialReference);if(null!==e&&!1===e.spatialReference.equals(d.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(e)})};d.geometry=function(a,b){return h(a,b,function(b,c,d){l.pcCheck(d,1,1);b=null;b=d[0]instanceof
f?l.fixSpatialReference(d[0].geometry(),a.spatialReference):d[0]instanceof n?l.fixSpatialReference(f.parseGeometryFromDictionary(d[0]),a.spatialReference):l.fixSpatialReference(m.fromJSON(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(b)})};d.setgeometry=function(a,b){return h(a,b,function(a,b,c){l.pcCheck(c,
2,2);if(c[0]instanceof f){if(!0===c[0].immutable)throw Error("Feature is Immutable");if(c[1]instanceof e||null===c[1])c[0]._geometry=c[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return l.voidOperation})};d.feature=function(a,b){return h(a,b,function(b,c,d){if(0===d.length)throw Error("Missing Parameters");b=null;if(1===d.length)if(l.isString(d[0]))b=f.fromJson(JSON.parse(d[0]));else if(d[0]instanceof f)b=f.createFromArcadeFeature(d[0]);else if(d[0]instanceof e)b=
f.createFromGraphicLikeObject(d[0],null,null);else if(d[0]instanceof n)b=d[0].hasField("geometry")?d[0].field("geometry"):null,c=d[0].hasField("attributes")?d[0].field("attributes"):null,null!==b&&b instanceof n&&(b=f.parseGeometryFromDictionary(b)),null!==c&&(c=f.parseAttributesFromDictionary(c)),b=f.createFromGraphicLikeObject(b,c,null);else throw Error("Illegal Argument");else{if(2===d.length){c=b=null;if(null!==d[0])if(d[0]instanceof e)b=d[0];else if(b instanceof n)b=f.parseGeometryFromDictionary(d[0]);
else throw Error("Illegal Argument");if(null!==d[1])if(d[1]instanceof n)c=f.parseAttributesFromDictionary(d[1]);else throw Error("Illegal Argument");}else{b=null;c={};if(null!==d[0])if(d[0]instanceof e)b=d[0];else if(b instanceof n)b=f.parseGeometryFromDictionary(d[0]);else throw Error("Illegal Argument");for(var g=1;g<d.length;g+=2){var h=l.toString(d[g]),k=d[g+1];if(null===k||void 0===k||l.isString(k)||isNaN(k)||l.isDate(k)||l.isNumber(k)||l.isBoolean(k)){if(l.isFunctionParameter(k)||!1===l.isSimpleType(k))throw Error("Illegal Argument");
c[h]=k===l.voidOperation?null:k}else throw Error("Illegal Argument");}}b=f.createFromGraphicLikeObject(b,c,null)}b._geometry=l.fixSpatialReference(b.geometry(),a.spatialReference);b.immutable=!1;return b})};d.dictionary=function(a,b){return h(a,b,function(a,b,c){if(0===c.length)throw Error("Missing Parameters");if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2){var d=l.toString(c[b]),e=c[b+1];if(null===e||void 0===e||l.isString(e)||isNaN(e)||l.isDate(e)||l.isNumber(e)||
l.isBoolean(e)||l.isArray(e)||l.isImmutableArray(e)){if(l.isFunctionParameter(e))throw Error("Illegal Argument");a[d]=e===l.voidOperation?null:e}else throw Error("Illegal Argument");}c=new n(a);c.immutable=!1;return c})};d.haskey=function(a,b){return h(a,b,function(a,b,c){l.pcCheck(c,2,2);a=l.toString(c[1]);if(c[0]instanceof f||c[0]instanceof n)return c[0].hasField(a);throw Error("Illegal Argument");})};d.indexof=function(a,b){return h(a,b,function(a,b,c){l.pcCheck(c,2,2);a=c[1];if(l.isArray(c[0])){for(b=
0;b<c[0].length;b++)if(l.equalityTest(a,c[0][b]))return b;return-1}if(l.isImmutableArray(c[0])){var d=c[0].length();for(b=0;b<d;b++)if(l.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ../featureset/support/shared ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q){function v(a){return 0===n.version.indexOf("4.")?m.fromExtent(a):new m({spatialReference:a.spatialReference,rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]})}Object.defineProperty(d,"__esModule",{value:!0});var u=null;d.setGeometryEngine=function(a){u=a};d.registerFunctions=function(d,h){function n(a){l.pcCheck(a,2,2);if(!(a[0]instanceof p&&a[1]instanceof p||a[0]instanceof p&&null===a[1]||a[1]instanceof p&&null===a[0]||
null===a[0]&&null===a[1]))throw Error("Illegal Argument");}d.disjoint=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);n(c);return null===c[0]||null===c[1]?!0:u.disjoint(c[0],c[1])})};d.intersects=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);n(c);return null===c[0]||null===c[1]?!1:u.intersects(c[0],c[1])})};d.touches=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);n(c);return null===c[0]||null===c[1]?!1:u.touches(c[0],
c[1])})};d.crosses=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);n(c);return null===c[0]||null===c[1]?!1:u.crosses(c[0],c[1])})};d.within=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);n(c);return null===c[0]||null===c[1]?!1:u.within(c[0],c[1])})};d.contains=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);n(c);return null===c[0]||null===c[1]?!1:u.contains(c[0],c[1])})};d.overlaps=function(a,b){return h(a,b,function(a,
b,c){c=l.autoCastFeatureToGeometry(c);n(c);return null===c[0]||null===c[1]?!1:u.overlaps(c[0],c[1])})};d.equals=function(a,b){return h(a,b,function(a,b,c){l.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof p&&c[1]instanceof p?u.equals(c[0],c[1]):l.isDate(c[0])&&l.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};d.relate=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,3,3);if(c[0]instanceof p&&c[1]instanceof p)return u.relate(c[0],c[1],l.toString(c[2]));
if(c[0]instanceof p&&null===c[1]||c[1]instanceof p&&null===c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};d.intersection=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);n(c);return null===c[0]||null===c[1]?null:u.intersect(c[0],c[1])})};d.union=function(a,b){return h(a,b,function(b,c,d){d=l.autoCastFeatureToGeometry(d);b=[];if(0===d.length)throw Error("Function called with wrong number of Parameters");if(1===d.length)if(l.isArray(d[0]))for(d=
l.autoCastFeatureToGeometry(d[0]),c=0;c<d.length;c++){if(null!==d[c])if(d[c]instanceof p)b.push(d[c]);else throw Error("Illegal Argument");}else if(l.isImmutableArray(d[0]))for(d=l.autoCastFeatureToGeometry(d[0].toArray()),c=0;c<d.length;c++){if(null!==d[c])if(d[c]instanceof p)b.push(d[c]);else throw Error("Illegal Argument");}else{if(d[0]instanceof p)return l.fixSpatialReference(g.cloneGeometry(d[0]),a.spatialReference);if(null===d[0])return null;throw Error("Illegal Argument");}else for(c=0;c<d.length;c++)if(null!==
d[c])if(d[c]instanceof p)b.push(d[c]);else throw Error("Illegal Argument");return 0===b.length?null:u.union(b)})};d.difference=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);n(c);return null!==c[0]&&null===c[1]?g.cloneGeometry(c[0]):null===c[0]?null:u.difference(c[0],c[1])})};d.symmetricdifference=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);n(c);return null===c[0]&&null===c[1]?null:null===c[0]?g.cloneGeometry(c[1]):null===c[1]?g.cloneGeometry(c[0]):
u.symmetricDifference(c[0],c[1])})};d.clip=function(a,b){return h(a,b,function(a,b,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,2,2);if(!(d[1]instanceof c)&&null!==d[1])throw Error("Illegal Argument");if(null===d[0])return null;if(!(d[0]instanceof p))throw Error("Illegal Argument");return null===d[1]?null:u.clip(d[0],d[1])})};d.cut=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,2);if(!(c[1]instanceof k)&&null!==c[1])throw Error("Illegal Argument");if(null===
c[0])return[];if(!(c[0]instanceof p))throw Error("Illegal Argument");return null===c[1]?[g.cloneGeometry(c[0])]:u.cut(c[0],c[1])})};d.area=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,2);if(null===c[0])return 0;if(!(c[0]instanceof p))throw Error("Illegal Argument");return u.planarArea(c[0],f.convertSquareUnitsToCode(l.defaultUndefined(c[1],-1)))})};d.areageodetic=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,
2);if(null===c[0])return 0;if(!(c[0]instanceof p))throw Error("Illegal Argument");return u.geodesicArea(c[0],f.convertSquareUnitsToCode(l.defaultUndefined(c[1],-1)))})};d.length=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,2);if(null===c[0])return 0;if(!(c[0]instanceof p))throw Error("Illegal Argument");return u.planarLength(c[0],f.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)))})};d.lengthgeodetic=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);
l.pcCheck(c,1,2);if(null===c[0])return 0;if(!(c[0]instanceof p))throw Error("Illegal Argument");return u.geodesicLength(c[0],f.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)))})};d.distance=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3);if(!(c[0]instanceof p))throw Error("Illegal Argument");if(!(c[1]instanceof p))throw Error("Illegal Argument");return u.distance(c[0],c[1],f.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)))})};d.densify=function(a,
b){return h(a,b,function(a,b,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof p))throw Error("Illegal Argument");a=l.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return d[0]instanceof m||d[0]instanceof k?u.densify(d[0],a,f.convertLinearUnitsToCode(l.defaultUndefined(d[2],-1))):d[0]instanceof c?u.densify(v(d[0]),a,f.convertLinearUnitsToCode(l.defaultUndefined(d[2],-1))):d[0]})};d.densifygeodetic=
function(a,b){return h(a,b,function(a,b,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof p))throw Error("Illegal Argument");a=l.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return d[0]instanceof m||d[0]instanceof k?u.geodesicDensify(d[0],a,f.convertLinearUnitsToCode(l.defaultUndefined(d[2],-1))):d[0]instanceof c?u.geodesicDensify(v(d[0]),a,f.convertLinearUnitsToCode(l.defaultUndefined(d[2],-1))):
d[0]})};d.generalize=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,4);if(null===c[0])return null;if(!(c[0]instanceof p))throw Error("Illegal Argument");a=l.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return u.generalize(c[0],a,l.toBoolean(l.defaultUndefined(c[2],!0)),f.convertLinearUnitsToCode(l.defaultUndefined(c[3],-1)))})};d.buffer=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3);if(null===c[0])return null;
if(!(c[0]instanceof p))throw Error("Illegal Argument");a=l.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?g.cloneGeometry(c[0]):u.buffer(c[0],a,f.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)))})};d.buffergeodetic=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof p))throw Error("Illegal Argument");a=l.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?g.cloneGeometry(c[0]):
u.geodesicBuffer(c[0],a,f.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)))})};d.offset=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,6);if(null===c[0])return null;if(!(c[0]instanceof m||c[0]instanceof k))throw Error("Illegal Argument");a=l.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");b=l.toNumber(l.defaultUndefined(c[4],10));if(isNaN(b))throw Error("Illegal Argument");var d=l.toNumber(l.defaultUndefined(c[5],0));if(isNaN(d))throw Error("Illegal Argument");
return u.offset(c[0],a,f.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)),l.toString(l.defaultUndefined(c[3],"round")).toLowerCase(),b,d)})};d.rotate=function(b,d){return h(b,d,function(b,d,e){e=l.autoCastFeatureToGeometry(e);l.pcCheck(e,2,3);b=e[0];if(null===b)return null;if(!(b instanceof p))throw Error("Illegal Argument");b instanceof c&&(b=m.fromExtent(b));d=l.toNumber(e[1]);if(isNaN(d))throw Error("Illegal Argument");e=l.defaultUndefined(e[2],null);if(null===e)return u.rotate(b,d);if(e instanceof
a)return u.rotate(b,d,e);throw Error("Illegal Argument");})};d.centroid=function(d,f){return h(d,f,function(f,h,q){q=l.autoCastFeatureToGeometry(q);l.pcCheck(q,1,1);if(null===q[0])return null;if(!(q[0]instanceof p))throw Error("Illegal Argument");return q[0]instanceof a?l.fixSpatialReference(g.cloneGeometry(q[0]),d.spatialReference):q[0]instanceof m?q[0].centroid:q[0]instanceof k?e.centroidPolyline(q[0]):q[0]instanceof b?e.centroidMultiPoint(q[0]):q[0]instanceof c?q[0].center:null})};d.multiparttosinglepart=
function(d,e){return h(d,e,function(e,f,h){h=l.autoCastFeatureToGeometry(h);l.pcCheck(h,1,1);f=[];if(null===h[0])return null;if(!(h[0]instanceof p))throw Error("Illegal Argument");if(h[0]instanceof a||h[0]instanceof c)return[l.fixSpatialReference(g.cloneGeometry(h[0]),d.spatialReference)];e=u.simplify(h[0]);if(e instanceof m){f=[];var n=[];for(h=0;h<e.rings.length;h++)if(e.isClockwise(e.rings[h])){var r=q.fromJSON({rings:[e.rings[h]],hasZ:!0===e.hasZ,hasM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});
f.push(r)}else n.push({ring:e.rings[h],pt:e.getPoint(h,0)});for(e=0;e<n.length;e++)for(h=0;h<f.length;h++)if(f[h].contains(n[e].pt)){f[h].addRing(n[e].ring);break}return f}if(e instanceof k){f=[];for(h=0;h<e.paths.length;h++)n=q.fromJSON({paths:[e.paths[h]],hasZ:!0===e.hasZ,hasM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()}),f.push(n);return f}if(h[0]instanceof b){e=l.fixSpatialReference(g.cloneGeometry(h[0]),d.spatialReference);for(h=0;h<e.points.length;h++)f.push(e.getPoint(h));return f}return null})};
d.issimple=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1);if(null===c[0])return!0;if(c[0]instanceof p)return u.isSimple(c[0]);throw Error("Illegal Argument");})};d.simplify=function(a,b){return h(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1);if(null===c[0])return null;if(c[0]instanceof p)return u.simplify(c[0]);throw Error("Illegal Argument");})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],
function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.errback=function(d){return function(f){d.reject(f)}};d.callback=function(d,h){return function(){try{d.apply(null,arguments)}catch(g){h.reject(g)}}};d.convertSquareUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square_meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
d.shapeExtent=function(d){if(null===d)return null;switch(d.type){case "polygon":case "multipoint":case "polyline":return d.extent;case "point":return new n({xmin:d.x,ymin:d.y,xmax:d.x,ymax:d.y,spatialReference:d.spatialReference});case "extent":return d}return null};d.convertLinearUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d||"number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
d.sameGeomType=function(d,h){return d===h||"point"===d&&"esriGeometryPoint"===h||"polyline"===d&&"esriGeometryPolyline"===h||"polygon"===d&&"esriGeometryPolygon"===h||"extent"===d&&"esriGeometryEnvelope"===h||"multipoint"===d&&"esriGeometryMultipoint"===h||"point"===h&&"esriGeometryPoint"===d||"polyline"===h&&"esriGeometryPolyline"===d||"polygon"===h&&"esriGeometryPolygon"===d||"extent"===h&&"esriGeometryEnvelope"===d||"multipoint"===h&&"esriGeometryMultipoint"===d?!0:!1}})},"esri/arcade/featureset/support/shared":function(){define(["require",
"exports","dojo/Deferred","../../../geometry/Extent","../../../layers/support/Field"],function(h,d,n,f,l){function g(d){return d instanceof Date}Object.defineProperty(d,"__esModule",{value:!0});(function(d){d[d.Standardised=0]="Standardised";d[d.SqlServer=1]="SqlServer";d[d.Oracle=2]="Oracle";d[d.Postgres=3]="Postgres";d[d.PGDB=4]="PGDB";d[d.FILEGDB=5]="FILEGDB";d[d.NotEvaluated=6]="NotEvaluated"})(d.FeatureServiceDatabaseType||(d.FeatureServiceDatabaseType={}));d.cloneField=function(d){return l.fromJSON(d.toJSON())};
d.esriFieldToJson=function(d){return d.toJSON()};d.cloneGeometry=function(d){if(null===d)return null;var c=d.clone();void 0!==d.cache._geVersion&&(c.cache._geVersion=d.cache._geVersion);return c};d.cloneGraphic=function(d){var c=d.clone();c.geometry&&void 0!==d.geometry.cache._geVersion&&(c.geometry.cache._geVersion=d.geometry.cache._geVersion);return c};(function(d){d[d.InFeatureSet=0]="InFeatureSet";d[d.NotInFeatureSet=1]="NotInFeatureSet";d[d.Unknown=2]="Unknown"})(d.IdState||(d.IdState={}));d.isString=
function(d){return"string"===typeof d||d instanceof String};d.isBoolean=function(d){return"boolean"===typeof d};d.isNumber=function(d){return"number"===typeof d};d.isArray=function(d){return d instanceof Array};d.isDate=g;d.equalityTest=function(d,c){return d===c?!0:g(d)&&g(c)?d.getTime()===c.getTime():!1};d.cloneAttributes=function(d){var c={},e;for(e in d)c[e]=d[e];return c};d.convertSquareUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":return 109404;
case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};d.shapeExtent=function(d){if(null===d)return null;switch(d.type){case "polygon":case "multipoint":case "polyline":return d.extent;case "point":return new f({xmin:d.x,ymin:d.y,xmax:d.x,ymax:d.y,spatialReference:d.spatialReference});case "extent":return d}return null};d.convertLinearUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d||"number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":return 9001;
case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};d.sameGeomType=function(d,c){return d===c||"point"===d&&"esriGeometryPoint"===c||"polyline"===d&&"esriGeometryPolyline"===c||"polygon"===d&&"esriGeometryPolygon"===c||"extent"===d&&"esriGeometryEnvelope"===c||"multipoint"===d&&"esriGeometryMultipoint"===c||"point"===c&&"esriGeometryPoint"===d||"polyline"===c&&"esriGeometryPolyline"===d||"polygon"===c&&"esriGeometryPolygon"===d||"extent"===c&&
"esriGeometryEnvelope"===d||"multipoint"===c&&"esriGeometryMultipoint"===d?!0:!1};d.defaultMaxRecords=1E3;d.errback=function(d){return function(c){d.reject(c)}};d.callback=function(d,c){return function(e){try{d.apply(null,arguments)}catch(b){c.reject(b)}}};d.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",
esriGeometryEnvelope:"extent",envelope:"extent"};d.toEsriGeometryType=function(d){switch(d){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};d.reduceArrayWithPromises=function(d,c,f){var b=new n;f=new n;f.resolve(!0);d.reduce(function(a,b,d,e){return a.then(function(a){try{return c(a,b,d,e)}catch(u){return a=new n,a.reject(u),a.promise}},
function(a){var b=new n;b.reject(a);return b.promise})},f.promise).then(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};d.stableStringify=function(d,c){c||(c={});"function"===typeof c&&(c={cmp:c});var e="boolean"===typeof c.cycles?c.cycles:!1,b=c.cmp&&function(a){return function(b){return function(c,d){return a({key:c,value:b[c]},{key:d,value:b[d]})}}}(c.cmp),a=[];return function k(c){c&&c.toJSON&&"function"===typeof c.toJSON&&(c=c.toJSON());if(void 0!==c){if("number"===typeof c)return isFinite(c)?
""+c:"null";if("object"!==typeof c)return JSON.stringify(c);var d,f;if(Array.isArray(c)){f="[";for(d=0;d<c.length;d++)d&&(f+=","),f+=k(c[d])||"null";return f+"]"}if(null===c)return"null";if(-1!==a.indexOf(c)){if(e)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var g=a.push(c)-1,h=Object.keys(c).sort(b&&b(c));f="";for(d=0;d<h.length;d++){var p=h[d],l=k(c[p]);l&&(f&&(f+=","),f+=JSON.stringify(p)+":"+l)}a.splice(g,1);return"{"+f+"}"}}(d)}})},"esri/layers/support/Field":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./domains ./fieldType".split(" "),
function(h,d,n,f,l,g,e,c){return function(d){function b(a){a=d.call(this)||this;a.alias=null;a.defaultValue=void 0;a.domain=null;a.editable=!0;a.length=-1;a.name=null;a.nullable=!0;a.type=null;return a}n(b,d);a=b;b.prototype.clone=function(){return new a({alias:this.alias,defaultValue:this.defaultValue,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type})};var a;f([g.property({type:String,json:{write:!0}})],b.prototype,
"alias",void 0);f([g.property({json:{write:{allowNull:!0}}})],b.prototype,"defaultValue",void 0);f([g.property({types:e.types,json:{read:{reader:e.fromJSON},write:!0}})],b.prototype,"domain",void 0);f([g.property({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0);f([g.property({type:Number,json:{write:!0}})],b.prototype,"length",void 0);f([g.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);f([g.property({type:Boolean,json:{write:!0}})],b.prototype,"nullable",void 0);
f([g.property({type:String,json:{read:c.kebabDict.read,write:c.kebabDict.write}})],b.prototype,"type",void 0);return b=a=f([g.subclass("esri.layers.support.Field")],b)}(g.declared(l))})},"esri/layers/support/domains":function(){define("require exports ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(h,d,n,f,l,g){function e(d,b){switch(d.type){case "range":var a="range"in d?d.range[1]:d.maxValue;if(+b<("range"in d?d.range[0]:d.minValue)||+b>a)return c.VALUE_OUT_OF_RANGE;
break;case "coded-value":case "codedValue":if(null==d.codedValues||d.codedValues.every(function(a){return null==a||a.code!==b}))return c.INVALID_CODED_VALUE}return null}Object.defineProperty(d,"__esModule",{value:!0});d.CodedValueDomain=n;d.DomainBase=f;d.InheritedDomain=l;d.RangeDomain=g;var c;(function(c){c.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";c.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(c=d.DomainValidationError||(d.DomainValidationError={}));
d.isValidDomainValue=function(c,b){return null===e(c,b)};d.validateDomainValue=e;d.types={key:"type",base:d.DomainBase,typeMap:{range:d.RangeDomain,"coded-value":d.CodedValueDomain}};d.getDomainRange=function(c){if(c&&"range"===c.type)return{min:"range"in c?c.range[0]:c.minValue,max:"range"in c?c.range[1]:c.maxValue}};d.fromJSON=function(c){if(c&&c.type){if("range"===c.type)return d.RangeDomain.fromJSON(c);if("codedValue"===c.type)return d.CodedValueDomain.fromJSON(c)}return null}})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./Domain".split(" "),
function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this,a)||this;a.codedValues=null;a.type="coded-value";return a}n(d,c);b=d;d.prototype.writeCodedValues=function(a,b){var c=null;a&&(c=a.map(function(a){return l.fixJson(l.clone(a))}));b.codedValues=c};d.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);this.codedValues.some(function(a){String(a.code)===c&&(b=a.name);return!!b})}return b};d.prototype.clone=function(){return new b({codedValues:l.clone(this.codedValues),
name:this.name})};var b;f([g.property({json:{write:!0}})],d.prototype,"codedValues",void 0);f([g.writer("codedValues")],d.prototype,"writeCodedValues",null);f([g.enumeration.serializable()({codedValue:"coded-value"})],d.prototype,"type",void 0);return d=b=f([g.subclass("esri.layers.support.CodedValueDomain")],d)}(g.declared(e))})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e){var c=g({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(d){function b(a){a=d.call(this,a)||this;a.name=null;a.type=null;return a}n(b,d);f([e.property({json:{write:!0}})],b.prototype,"name",void 0);f([e.property({json:{read:c.read,write:c.write}})],b.prototype,"type",void 0);return b=f([e.subclass("esri.layers.support.Domain")],b)}(e.declared(l))})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this,b)||this;b.type="inherited";return b}n(c,d);e=c;c.prototype.clone=function(){return new e};var e;f([l.enumeration.serializable()({inherited:"inherited"})],c.prototype,"type",void 0);return c=e=f([l.subclass("esri.layers.support.InheritedDomain")],c)}(l.declared(g))})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this,b)||this;b.maxValue=null;b.minValue=null;b.type="range";return b}n(c,d);e=c;c.prototype.clone=function(){return new e({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};var e;f([l.property({json:{read:{source:"range",reader:function(b,a){return a.range&&a.range[1]}},write:{target:"range",writer:function(b,a,c){a[c]=[this.minValue,b]}}}})],c.prototype,"maxValue",void 0);f([l.property({json:{read:{source:"range",reader:function(b,
a){return a.range&&a.range[0]}},write:{target:"range",writer:function(b,a,c){a[c]=[b,this.maxValue]}}}})],c.prototype,"minValue",void 0);f([l.enumeration.serializable()({range:"range"})],c.prototype,"type",void 0);return c=e=f([l.subclass("esri.layers.support.RangeDomain")],c)}(l.declared(g))})},"esri/layers/support/fieldType":function(){define(["require","exports","../../core/kebabDictionary"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.kebabDict=n({esriFieldTypeSmallInteger:"small-integer",
esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(h,d,n){function f(d,e,c){var f=
{x:0,y:0};e&&(f.z=0);c&&(f.m=0);for(var b=0,a=d[0],g=0;g<d.length;g++){var h=d[g],q;a:if(h.length!==a.length)q=!1;else{for(q=0;q<h.length;q++)if(h[q]!==a[q]){q=!1;break a}q=!0}if(!1===q){q=l(a,h,e);var n=h,u=e,t=c,r={x:(a[0]+n[0])/2,y:(a[1]+n[1])/2};u&&(r.z=(a[2]+n[2])/2);u&&t?r.m=(a[3]+n[3])/2:t&&(r.m=(a[2]+n[2])/2);a=r;a.x*=q;a.y*=q;f.x+=a.x;f.y+=a.y;e&&(a.z*=q,f.z+=a.z);c&&(a.m*=q,f.m+=a.m);b+=q;a=h}}0<b?(f.x/=b,f.y/=b,e&&(f.z/=b),c&&(f.m/=b)):(f.x=d[0][0],f.y=d[0][1],e&&(f.z=d[0][2]),c&&e?f.m=
d[0][3]:c&&(f.m=d[0][2]));return f}function l(d,e,c){var f=e[0]-d[0];d=e[1]-d[1];return c?(e=e[2]-e[2],Math.sqrt(f*f+d*d+e*e)):Math.sqrt(f*f+d*d)}Object.defineProperty(d,"__esModule",{value:!0});d.centroidPolyline=function(d){for(var e={x:0,y:0,spatialReference:d.spatialReference.toJSON()},c={x:0,y:0,spatialReference:d.spatialReference.toJSON()},g=0,b=0,a=0;a<d.paths.length;a++)if(0!==d.paths[a].length){var h;h=d.paths[a];var k=!0===d.hasZ;if(1>=h.length)h=0;else{for(var q=0,v=1;v<h.length;v++)q+=
l(h[v-1],h[v],k);h=q}0===h?(k=f(d.paths[a],!0===d.hasZ,!0===d.hasM),e.x+=k.x,e.y+=k.y,!0===d.hasZ&&(e.z+=k.z),!0===d.hasM&&(e.m+=k.m),++g):(k=f(d.paths[a],!0===d.hasZ,!0===d.hasM),c.x+=k.x*h,c.y+=k.y*h,!0===d.hasZ&&(c.z+=k.z*h),!0===d.hasM&&(c.m+=k.m*h),b+=h)}return 0<b?(c.x/=b,c.y/=b,!0===d.hasZ&&(c.z/=b),!0===d.hasM&&(c.m/=b),new n(c)):0<g?(e.x/=g,e.y/=g,!0===d.hasZ&&(c.z/=g),!0===d.hasM&&(e.m/=g),new n(e)):null};d.centroidMultiPoint=function(d){if(0===d.points.length)return null;for(var e=0,c=
0,f=0,b=0,a=0;a<d.points.length;a++){var g=d.getPoint(a);!0===g.hasZ&&(f+=g.z);!0===g.hasM&&(b+=g.m);e+=g.x;c+=g.y;b+=g.m}e={x:e/d.points.length,y:c/d.points.length,spatialReference:null};e.spatialReference=d.spatialReference.toJSON();!0===d.hasZ&&(e.z=f/d.points.length);!0===d.hasM&&(e.m=b/d.points.length);return new n(e)}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(h,d,n,f){function l(d,e,c){if("undefined"===typeof c||0===+c)return Math[d](e);
e=+e;c=+c;if(isNaN(e)||"number"!==typeof c||0!==c%1)return NaN;e=e.toString().split("e");e=Math[d](+(e[0]+"e"+(e[1]?+e[1]-c:-c)));e=e.toString().split("e");return+(e[0]+"e"+(e[1]?+e[1]+c:c))}Object.defineProperty(d,"__esModule",{value:!0});d.registerFunctions=function(d,e){function c(c,b,a){c=f.toNumber(c);return isNaN(c)?c:isNaN(b)||isNaN(a)||b>a?NaN:c<b?b:c>a?a:c}d.number=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,2);a=c[0];return f.isNumber(a)?a:null===a?0:f.isDate(a)||f.isBoolean(a)?
Number(a):f.isArray(a)?NaN:""===a||void 0===a?Number(a):f.isString(a)?void 0!==c[1]?(c=f.multiReplace(c[1],"\u2030",""),c=f.multiReplace(c,"\u00a4",""),n.parse(a,{pattern:c})):Number(a.trim()):Number(a)})};d.abs=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return Math.abs(f.toNumber(c[0]))})};d.acos=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return Math.acos(f.toNumber(c[0]))})};d.asin=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return Math.asin(f.toNumber(c[0]))})};
d.atan=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return Math.atan(f.toNumber(c[0]))})};d.atan2=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,2,2);return Math.atan2(f.toNumber(c[0]),f.toNumber(c[1]))})};d.ceil=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,2);return 2===c.length?(a=f.toNumber(c[1]),isNaN(a)&&(a=0),l("ceil",f.toNumber(c[0]),-1*a)):Math.ceil(f.toNumber(c[0]))})};d.round=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,2);return 2===c.length?
(a=f.toNumber(c[1]),isNaN(a)&&(a=0),l("round",f.toNumber(c[0]),-1*a)):Math.round(f.toNumber(c[0]))})};d.floor=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,2);return 2===c.length?(a=f.toNumber(c[1]),isNaN(a)&&(a=0),l("floor",f.toNumber(c[0]),-1*a)):Math.floor(f.toNumber(c[0]))})};d.cos=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return Math.cos(f.toNumber(c[0]))})};d.isnan=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return"number"===typeof c[0]&&isNaN(c[0])})};
d.exp=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return Math.exp(f.toNumber(c[0]))})};d.log=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return Math.log(f.toNumber(c[0]))})};d.pow=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,2,2);return Math.pow(f.toNumber(c[0]),f.toNumber(c[1]))})};d.random=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,0,0);return Math.random()})};d.sin=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return Math.sin(f.toNumber(c[0]))})};
d.sqrt=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return Math.sqrt(f.toNumber(c[0]))})};d.tan=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return Math.tan(f.toNumber(c[0]))})};d.defaultvalue=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,2,2);return null===c[0]||""===c[0]||void 0===c[0]?c[1]:c[0]})};d.isempty=function(c,b){return e(c,b,function(a,b,c){f.pcCheck(c,1,1);return null===c[0]||""===c[0]||void 0===c[0]?!0:!1})};d["boolean"]=function(c,b){return e(c,
b,function(a,b,c){f.pcCheck(c,1,1);return f.toBoolean(c[0])})};d.constrain=function(d,b){return e(d,b,function(a,b,d){f.pcCheck(d,3,3);a=f.toNumber(d[1]);b=f.toNumber(d[2]);if(f.isArray(d[0])){var e=[],g=0;for(d=d[0];g<d.length;g++)e.push(c(d[g],a,b));return e}if(f.isImmutableArray(d[0])){e=[];for(g=0;g<d[0].length();g++)e.push(c(d[0].get(g),a,b));return e}return c(d[0],a,b)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(h,d,
n,f){function l(d,e,c,h){if(1===h.length){if(n.isArray(h[0]))return f.calculateStat(d,h[0],-1);if(n.isImmutableArray(h[0]))return f.calculateStat(d,h[0].toArray(),-1)}return f.calculateStat(d,h,-1)}Object.defineProperty(d,"__esModule",{value:!0});d.registerFunctions=function(d,e){d.stdev=function(c,d){return e(c,d,function(b,a,c){return l("stdev",b,a,c)})};d.variance=function(c,d){return e(c,d,function(b,a,c){return l("variance",b,a,c)})};d.average=function(c,d){return e(c,d,function(b,a,c){return l("mean",
b,a,c)})};d.mean=function(c,d){return e(c,d,function(b,a,c){return l("mean",b,a,c)})};d.sum=function(c,d){return e(c,d,function(b,a,c){return l("sum",b,a,c)})};d.min=function(c,d){return e(c,d,function(b,a,c){return l("min",b,a,c)})};d.max=function(c,d){return e(c,d,function(b,a,c){return l("max",b,a,c)})};d.distinct=function(c,d){return e(c,d,function(b,a,c){return l("distinct",b,a,c)})};d.count=function(c,d){return e(c,d,function(b,a,c){n.pcCheck(c,1,1);if(n.isArray(c[0])||n.isString(c[0]))return c[0].length;
if(n.isImmutableArray(c[0]))return c[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(h,d,n){function f(d){for(var e=0,c=0;c<d.length;c++)e+=d[c];return e/d.length}function l(d){for(var e=f(d),c=0,g=0;g<d.length;g++)c+=Math.pow(e-d[g],2);return c/d.length}Object.defineProperty(d,"__esModule",{value:!0});d.decodeStatType=function(d){switch(d.toLowerCase()){case "distinct":return"distinct";
case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};d.calculateStat=function(d,e,c){void 0===c&&(c=1E3);switch(d.toLowerCase()){case "distinct":a:{d=c;c=[];for(var g={},b=[],a=0;a<e.length;a++){if(void 0!==e[a]&&null!==e[a]&&e[a]!==n.voidOperation){var h=e[a];if(n.isNumber(h)||n.isString(h))void 0===g[h]&&(c.push(h),g[h]=1);else{for(var k=
!1,q=0;q<b.length;q++)!0===n.equalityTest(b[q],h)&&(k=!0);!1===k&&(b.push(h),c.push(h))}}if(c.length>=d&&-1!==d){e=c;break a}}e=c}return e;case "avg":case "mean":return f(n.toNumberArray(e));case "min":return Math.min.apply(Math,n.toNumberArray(e));case "sum":e=n.toNumberArray(e);for(c=d=0;c<e.length;c++)d+=e[c];return d;case "max":return Math.max.apply(Math,n.toNumberArray(e));case "stdev":case "stddev":return Math.sqrt(l(n.toNumberArray(e)));case "var":case "variance":return l(n.toNumberArray(e));
case "count":return e.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Feature","../languageUtils"],function(h,d,n,f){Object.defineProperty(d,"__esModule",{value:!0});d.registerFunctions=function(d,g){d.trim=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,1,1);return f.toString(a[0]).trim()})};d.upper=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,1,1);return f.toString(a[0]).toUpperCase()})};d.proper=function(d,c){return g(d,c,function(c,
b,a){f.pcCheck(a,1,2);c=1;2===a.length&&"firstword"===f.toString(a[1]).toLowerCase()&&(c=2);b=/\s/;a=f.toString(a[0]);for(var d="",e=!0,g=0;g<a.length;g++){var h=a[g];b.test(h)?1===c&&(e=!0):h.toUpperCase()!==h.toLowerCase()&&(e?(h=h.toUpperCase(),e=!1):h=h.toLowerCase());d+=h}return d})};d.lower=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,1,1);return f.toString(a[0]).toLowerCase()})};d.guid=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,0,1);if(0<a.length)switch(f.toString(a[0]).toLowerCase()){case "digits":return f.generateUUID().replace("-",
"").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return f.generateUUID();case "digits-hyphen-parentheses":return"("+f.generateUUID()+")"}return"{"+f.generateUUID()+"}"})};d.console=function(d,c){return g(d,c,function(c,b,a){0!==a.length&&(1===a.length?d.console(f.toString(a[0])):d.console(f.toString(a)));return f.voidOperation})};d.mid=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,2,3);c=f.toNumber(a[1]);if(isNaN(c))return"";0>c&&(c=0);if(2===a.length)return f.toString(a[0]).substr(c);
b=f.toNumber(a[2]);if(isNaN(b))return"";0>b&&(b=0);return f.toString(a[0]).substr(c,b)})};d.find=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,2,3);c=0;if(2<a.length){c=f.toNumber(f.defaultUndefined(a[2],0));if(isNaN(c))return-1;0>c&&(c=0)}return f.toString(a[1]).indexOf(f.toString(a[0]),c)})};d.left=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,2,2);c=f.toNumber(a[1]);if(isNaN(c))return"";0>c&&(c=0);return f.toString(a[0]).substr(0,c)})};d.right=function(d,c){return g(d,c,function(c,
b,a){f.pcCheck(a,2,2);c=f.toNumber(a[1]);if(isNaN(c))return"";0>c&&(c=0);return f.toString(a[0]).substr(-1*c,c)})};d.split=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,2,4);c=f.toNumber(f.defaultUndefined(a[2],-1));b=f.toBoolean(f.defaultUndefined(a[3],!1));-1===c||null===c||!0===b?a=f.toString(a[0]).split(f.toString(a[1])):(isNaN(c)&&(c=-1),-1>c&&(c=-1),a=f.toString(a[0]).split(f.toString(a[1]),c));if(!1===b)return a;b=[];for(var d=0;d<a.length&&!(-1!==c&&b.length>=c);d++)""!==a[d]&&void 0!==
a[d]&&b.push(a[d]);return b})};d.text=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,1,2);return f.toStringExplicit(a[0],a[1])})};d.concatenate=function(d,c){return g(d,c,function(c,b,a){c=[];if(1>a.length)return"";if(f.isArray(a[0])){b=f.defaultUndefined(a[2],"");for(var d=0;d<a[0].length;d++)c[d]=f.toStringExplicit(a[0][d],b);return 1<a.length?c.join(a[1]):c.join("")}if(f.isImmutableArray(a[0])){b=f.defaultUndefined(a[2],"");for(d=0;d<a[0].length();d++)c[d]=f.toStringExplicit(a[0].get(d),
b);return 1<a.length?c.join(a[1]):c.join("")}for(d=0;d<a.length;d++)c[d]=f.toStringExplicit(a[d]);return c.join("")})};d.reverse=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,1,1);if(f.isArray(a[0]))return c=a[0].slice(0),c.reverse(),c;if(f.isImmutableArray(a[0]))return c=a[0].toArray().slice(0),c.reverse(),c;throw Error("Invalid Parameter");})};d.replace=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,3,4);c=f.toString(a[0]);b=f.toString(a[1]);var d=f.toString(a[2]);return(4===a.length?
f.toBoolean(a[3]):1)?f.multiReplace(c,b,d):c.replace(b,d)})};d.domainname=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,2,4);if(a[0]instanceof n)return a[0].domainValueLookup(f.toString(a[1]),a[2],void 0===a[3]?void 0:f.toNumber(a[3]));throw Error("Invalid Parameter");})};d.domaincode=function(d,c){return g(d,c,function(c,b,a){f.pcCheck(a,2,4);if(a[0]instanceof n)return a[0].domainCodeLookup(f.toString(a[1]),a[2],void 0===a[3]?void 0:f.toNumber(a[3]));throw Error("Invalid Parameter");})}}})},
"esri/arcade/arcadeRuntime":function(){define("require exports ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,
z,B,A){function x(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(y(a,b.arguments[d]));return c}function C(a,b,c){try{return c(a,b,x(a,b))}catch(na){throw na;}}function y(a,b){try{switch(b.type){case "EmptyStatement":return c.voidOperation;case "VariableDeclarator":var d=null===b.init?null:y(a,b.init);d===c.voidOperation&&(d=null);var e=b.id.name.toLowerCase();null!==a.localScope?a.localScope[e]={value:d,valueset:!0,node:b.init}:a.globalScope[e]={value:d,valueset:!0,node:b.init};return c.voidOperation;
case "VariableDeclaration":for(var g=0;g<b.declarations.length;g++)y(a,b.declarations[g]);return c.voidOperation;case "BlockStatement":var h;a:{for(var k=c.voidOperation,g=0;g<b.body.length;g++)if(k=y(a,b.body[g]),k instanceof c.ReturnResult||k===c.breakResult||k===c.continueResult){h=k;break a}h=k}return h;case "FunctionDeclaration":var m=b.id.name.toLowerCase();a.globalScope[m]={valueset:!0,node:null,value:new l(b,a)};return c.voidOperation;case "ReturnStatement":var q;if(null===b.argument)q=new c.ReturnResult(c.voidOperation);
else{var r=y(a,b.argument);q=new c.ReturnResult(r)}return q;case "IfStatement":var t;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(p.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var u=y(a,b.test);if(!0===u)t=y(a,b.consequent);else if(!1===u)t=null!==b.alternate?y(a,b.alternate):c.voidOperation;else throw Error(p.nodeErrorMessage(b,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return t;case "ExpressionStatement":var v;if("AssignmentExpression"===
b.expression.type||"UpdateExpression"===b.expression.type)v=y(a,b.expression);else{var w=y(a,b.expression);v=w===c.voidOperation?c.voidOperation:new c.ImplicitResult(w)}return v;case "AssignmentExpression":var z;var x=y(a,b.right),g=null,A="";if("MemberExpression"===b.left.type){g=y(a,b.left.object);A=!0===b.left.computed?y(a,b.left.property):b.left.property.name;if(c.isArray(g))if(c.isNumber(A)){0>A&&(A=g.length+A);if(0>A||A>g.length)throw Error("Assignment outside of array bounds");if(A===g.length&&
"\x3d"!==b.operator)throw Error("Invalid Parameter");g[A]=D(x,b.operator,g[A],b)}else throw Error("Invalid Parameter");else if(g instanceof n){if(!1===c.isString(A))throw Error("Dictionary accessor must be a string");if(!0===g.hasField(A))g.setField(A,D(x,b.operator,g.field(A),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");g.setField(A,D(x,b.operator,null,b))}}else if(g instanceof f){if(!1===c.isString(A))throw Error("Feature accessor must be a string");if(!0===g.hasField(A))g.setField(A,
D(x,b.operator,g.field(A),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");g.setField(A,D(x,b.operator,null,b))}}else{if(c.isImmutableArray(g))throw Error("Array is Immutable");throw Error("Invalid Parameter");}z=c.voidOperation}else if(g=b.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[g])a.localScope[g]={value:D(x,b.operator,a.localScope[g].value,b),valueset:!0,node:b.right},z=c.voidOperation;else if(void 0!==a.globalScope[g])a.globalScope[g]={value:D(x,b.operator,
a.globalScope[g].value,b),valueset:!0,node:b.right},z=c.voidOperation;else throw Error("Variable not recognised");return z;case "UpdateExpression":var B;var C,g=null,A="";if("MemberExpression"===b.argument.type){g=y(a,b.argument.object);A=!0===b.argument.computed?y(a,b.argument.property):b.argument.property.name;if(c.isArray(g))if(c.isNumber(A)){0>A&&(A=g.length+A);if(0>A||A>=g.length)throw Error("Assignment outside of array bounds");C=c.toNumber(g[A]);g[A]="++"===b.operator?C+1:C-1}else throw Error("Invalid Parameter");
else if(g instanceof n){if(!1===c.isString(A))throw Error("Dictionary accessor must be a string");if(!0===g.hasField(A))C=c.toNumber(g.field(A)),g.setField(A,"++"===b.operator?C+1:C-1);else throw Error("Invalid Parameter");}else if(g instanceof f){if(!1===c.isString(A))throw Error("Feature accessor must be a string");if(!0===g.hasField(A))C=c.toNumber(g.field(A)),g.setField(A,"++"===b.operator?C+1:C-1);else throw Error("Invalid Parameter");}else{if(c.isImmutableArray(g))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}B=!1===b.prefix?C:"++"===b.operator?C+1:C-1}else if(g=b.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[g])C=c.toNumber(a.localScope[g].value),a.localScope[g]={value:"++"===b.operator?C+1:C-1,valueset:!0,node:b},B=!1===b.prefix?C:"++"===b.operator?C+1:C-1;else if(void 0!==a.globalScope[g])C=c.toNumber(a.globalScope[g].value),a.globalScope[g]={value:"++"===b.operator?C+1:C-1,valueset:!0,node:b},B=!1===b.prefix?C:"++"===b.operator?C+1:C-1;else throw Error("Variable not recognised");
return B;case "BreakStatement":return c.breakResult;case "ContinueStatement":return c.continueResult;case "ForStatement":null!==b.init&&y(a,b.init);A={testResult:!0,lastAction:c.voidOperation};do b:{z=a;x=b;B=A;if(null!==x.test){B.testResult=y(z,x.test);if(!1===B.testResult)break b;if(!0!==B.testResult)throw Error(p.nodeErrorMessage(x,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}B.lastAction=y(z,x.body);B.lastAction===c.breakResult?B.testResult=!1:B.lastAction instanceof c.ReturnResult?B.testResult=
!1:null!==x.update&&y(z,x.update)}while(!0===A.testResult);g=A.lastAction instanceof c.ReturnResult?A.lastAction:c.voidOperation;return g;case "ForInStatement":return E(a,b);case "Identifier":return ba(a,b);case "MemberExpression":return L(a,b);case "Literal":return b.value;case "ThisExpression":throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return K(a,b);case "UnaryExpression":return P(a,b);case "BinaryExpression":return M(a,b);case "LogicalExpression":return I(a,
b);case "ConditionalExpression":throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(g=[],A=0;A<b.elements.length;A++){var F=y(a,b.elements[A]);if(c.isFunctionParameter(F))throw Error(p.nodeErrorMessage(b,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));F===c.voidOperation?g.push(null):g.push(F)}}catch(Ra){throw Ra;}return g;case "ObjectExpression":g={};for(A=0;A<b.properties.length;A++){var ja=y(a,b.properties[A]);if(c.isFunctionParameter(ja.value))throw Error("Illegal Argument");
if(!1===c.isString(ja.key))throw Error("Illegal Argument");g[ja.key.toString()]=ja.value===c.voidOperation?null:ja.value}var S=new n(g);S.immutable=!1;return S;case "Property":return{key:"Identifier"===b.key.type?b.key.name:y(a,b.key),value:y(a,b.value)};case "Array":throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));default:throw Error(p.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Ra){throw Ra;}}function E(a,b){var d=y(a,b.right);"VariableDeclaration"===b.left.type&&y(a,b.left);
var e=null,g="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name;null!==a.localScope&&void 0!==a.localScope[g]&&(e=a.localScope[g]);null===e&&void 0!==a.globalScope[g]&&(e=a.globalScope[g]);if(null===e)throw Error(p.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(c.isArray(d)||c.isString(d)){for(var d=d.length,h=0;h<d&&(e.value=h,g=y(a,b.body),g!==c.breakResult);h++)if(g instanceof c.ReturnResult)return g;return c.voidOperation}if(c.isImmutableArray(d)){for(h=0;h<
d.length()&&(e.value=h,g=y(a,b.body),g!==c.breakResult);h++)if(g instanceof c.ReturnResult)return g;return c.voidOperation}if(d instanceof n||d instanceof f)for(d=d.keys(),h=0;h<d.length&&(e.value=d[h],g=y(a,b.body),g!==c.breakResult);h++){if(g instanceof c.ReturnResult)return g}else return c.voidOperation}function D(a,b,d,e){switch(b){case "\x3d":return a===c.voidOperation?null:a;case "/\x3d":return c.toNumber(d)/c.toNumber(a);case "*\x3d":return c.toNumber(d)*c.toNumber(a);case "-\x3d":return c.toNumber(d)-
c.toNumber(a);case "+\x3d":return c.isString(d)||c.isString(a)?c.toString(d)+c.toString(a):c.toNumber(d)+c.toNumber(a);case "%\x3d":return c.toNumber(d)%c.toNumber(a);default:throw Error(p.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function F(a,b,c,d){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&
(c=!1),c&&(V++,b=a.spatialReference._arcadeCacheId=V)),a=new n({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=a.cache._arcadeCacheId,void 0===b&&(V++,b=V,a.cache._arcadeCacheId=b),a=new g(a.rings,
a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=a.cache._arcadeCacheId,void 0===b&&(V++,b=V,a.cache._arcadeCacheId=b),a=new g(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=a.cache._arcadeCacheId,void 0===b&&
(V++,b=V,a.cache._arcadeCacheId=b),a=new e(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(p.nodeErrorMessage(d,"RUNTIME","PROPERTYNOTFOUND"));}function L(a,b){try{var d=y(a,b.object);if(null===d)throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if(d instanceof n||d instanceof f)return d.field(b.property.name);if(d instanceof t)return F(d,b.property.name,a,b);throw Error(p.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}var e=
y(a,b.property);if(d instanceof n||d instanceof f){if(c.isString(e))return d.field(e)}else if(d instanceof t){if(c.isString(e))return F(d,e,a,b)}else if(c.isArray(d)){if(c.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length+e);if(e>=d.length||0>e)throw Error(p.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return d[e]}}else if(c.isString(d)){if(c.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length+e);if(e>=d.length||0>e)throw Error(p.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));
return d[e]}}else if(c.isImmutableArray(d)&&c.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length()+e);if(e>=d.length()||0>e)throw Error(p.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return d.get(e)}throw Error(p.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}catch(ya){throw ya;}}function P(a,b){try{var d=y(a,b.argument);if(c.isBoolean(d)){if("!"===b.operator)return!d;if("-"===b.operator)return-1*c.toNumber(d);if("+"===b.operator)return 1*c.toNumber(d);throw Error(p.nodeErrorMessage(b,"RUNTIME",
"NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*c.toNumber(d);if("+"===b.operator)return 1*c.toNumber(d);throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(na){throw na;}}function M(a,b){try{var d=[y(a,b.left),y(a,b.right)],e=d[0],f=d[1];switch(b.operator){case "\x3d\x3d":return c.equalityTest(e,f);case "\x3d":return c.equalityTest(e,f);case "!\x3d":return!c.equalityTest(e,f);case "\x3c":return c.greaterThanLessThan(e,f,b.operator);case "\x3e":return c.greaterThanLessThan(e,
f,b.operator);case "\x3c\x3d":return c.greaterThanLessThan(e,f,b.operator);case "\x3e\x3d":return c.greaterThanLessThan(e,f,b.operator);case "+":return c.isString(e)||c.isString(f)?c.toString(e)+c.toString(f):c.toNumber(e)+c.toNumber(f);case "-":return c.toNumber(e)-c.toNumber(f);case "*":return c.toNumber(e)*c.toNumber(f);case "/":return c.toNumber(e)/c.toNumber(f);case "%":return c.toNumber(e)%c.toNumber(f);default:throw Error(p.nodeErrorMessage(b,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(qa){throw qa;
}}function I(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(p.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(p.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var d=y(a,b.left);if(c.isBoolean(d))switch(b.operator){case "||":if(!0===d)return d;var e=y(a,b.right);if(c.isBoolean(e))return e;throw Error(p.nodeErrorMessage(b,
"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===d)return d;e=y(a,b.right);if(c.isBoolean(e))return e;throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}else throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(ya){throw ya;}}function ba(a,b){var c;try{var d=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[d])return c=a.localScope[d],!0!==c.valueset&&(c.value=y(a,c.node),c.valueset=!0),c.value;
if(void 0!==a.globalScope[d])return c=a.globalScope[d],!0!==c.valueset&&(c.value=y(a,c.node),c.valueset=!0),c.value;throw Error(p.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(ya){throw ya;}}function K(a,b){try{if("Identifier"!==b.callee.type)throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var d=a.localScope[b.callee.name.toLowerCase()];if(d.value instanceof c.NativeFunction)return d.value.fn(a,
b);if(d.value instanceof l)return W(a,b,d.value.definition);throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){d=a.globalScope[b.callee.name.toLowerCase()];if(d.value instanceof c.NativeFunction)return d.value.fn(a,b);if(d.value instanceof l)return W(a,b,d.value.definition);throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(na){throw na;}}function S(a){return null==
a?"":c.isArray(a)||c.isImmutableArray(a)?"Array":c.isDate(a)?"Date":c.isString(a)?"String":c.isBoolean(a)?"Boolean":c.isNumber(a)?"Number":a instanceof n?"Dictionary":a instanceof f?"Feature":a instanceof w?"Point":a instanceof z?"Polygon":a instanceof B?"Polyline":a instanceof r?"Multipoint":a instanceof u?"Extent":c.isFunctionParameter(a)?"Function":c.isFeatureSet(a)?"FeatureSet":c.isFeatureSetCollection(a)?"FeatureSetCollection":a===c.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}
function Q(a,b,d,e){try{var f=y(a,b.arguments[d]);if(c.equalityTest(f,e))return y(a,b.arguments[d+1]);var g=b.arguments.length-d;return 1===g?y(a,b.arguments[d]):2===g?null:3===g?y(a,b.arguments[d+2]):Q(a,b,d+2,e)}catch(ta){throw ta;}}function J(a,b,d,e){try{if(!0===e)return y(a,b.arguments[d+1]);if(3===b.arguments.length-d)return y(a,b.arguments[d+2]);var f=y(a,b.arguments[d+2]);if(!1===c.isBoolean(f))throw Error("WHEN needs boolean test conditions");return J(a,b,d+2,f)}catch(qa){throw qa;}}function R(a,
b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=R(a.slice(0,d),b);a=R(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function H(a,b,d){try{var e=a.body;if(d.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var f=0;f<d.length;f++)b.localScope[a.params[f].name.toLowerCase()]=
{value:d[f],valueset:!0,node:null};var g=y(b,e);if(g instanceof c.ReturnResult)return g.value;if(g===c.breakResult)throw Error("Cannot Break from a Function");if(g===c.continueResult)throw Error("Cannot Continue from a Function");return g instanceof c.ImplicitResult?g.value:g}catch(ta){throw ta;}}function W(a,b,c){return C(a,b,function(b,d,e){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+
1,console:a.console,lrucache:a.lrucache,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return H(c,b,e)})}function aa(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,console:a.context.console,lrucache:a.context.lrucache,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");
return H(a.definition,b,arguments)}}function ia(a){console.log(a)}Object.defineProperty(d,"__esModule",{value:!0});var V=0,Z={};b.registerFunctions(Z,C);v.registerFunctions(Z,C);k.registerFunctions(Z,C);a.registerFunctions(Z,C);q.registerFunctions(Z,C);m.registerFunctions(Z,C);Z["typeof"]=function(a,b){return C(a,b,function(a,b,d){c.pcCheck(d,1,1);a=S(d[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};Z.iif=function(a,b){try{c.pcCheck(null===b.arguments?[]:b.arguments,3,
3);var d=y(a,b.arguments[0]);if(!1===c.isBoolean(d))throw Error("IF Function must have a boolean test condition");return!0===d?y(a,b.arguments[1]):y(a,b.arguments[2])}catch(na){throw na;}};Z.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return y(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=y(a,b.arguments[0]);return Q(a,b,1,c)}catch(na){throw na;}};Z.when=function(a,b){try{if(3>
b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var d=y(a,b.arguments[0]);if(!1===c.isBoolean(d))throw Error("WHEN needs boolean test conditions");return J(a,b,0,d)}catch(na){throw na;}};Z.top=function(a,b){return C(a,b,function(a,b,d){c.pcCheck(d,2,2);if(c.isArray(d[0]))return c.toNumber(d[1])>=d[0].length?d[0].slice(0):d[0].slice(0,c.toNumber(d[1]));if(c.isImmutableArray(d[0]))return c.toNumber(d[1])>=d[0].length()?
d[0].slice(0):d[0].slice(0,c.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};Z.first=function(a,b){return C(a,b,function(a,b,d){c.pcCheck(d,1,1);return c.isArray(d[0])?0===d[0].length?null:d[0][0]:c.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};Z.sort=function(a,b){return C(a,b,function(a,b,d){c.pcCheck(d,1,2);a=d[0];c.isImmutableArray(a)&&(a=a.toArray());if(!1===c.isArray(a))throw Error("Illegal Argument");if(1<d.length){if(!1===c.isFunctionParameter(d[1]))throw Error("Illegal Argument");
var e=aa(d[1]);a=R(a,function(a,b){return e(a,b)})}else{if(0===a.length)return[];d={};for(b=0;b<a.length;b++){var f=S(a[b]);""!==f&&(d[f]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return a.slice(0);b=0;var f="",g;for(g in d)b++,f=g;a=1<b||"String"===f?R(a,function(a,b){if(null===a||void 0===a||a===c.voidOperation)return null===b||void 0===b||b===c.voidOperation?0:1;if(null===b||void 0===
b||b===c.voidOperation)return-1;a=c.toString(a);b=c.toString(b);return a<b?-1:a===b?0:1}):"Number"===f?R(a,function(a,b){return a-b}):"Boolean"===f?R(a,function(a,b){return a===b?0:b?-1:1}):"Date"===f?R(a,function(a,b){return b-a}):a.slice(0)}return a})};for(var ga in Z)Z[ga]={value:new c.NativeFunction(Z[ga]),valueset:!0,node:null};var da=function(){};da.prototype=Z;da.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};da.prototype.pi={value:Math.PI,valueset:!0,node:null};
d.functionHelper={fixSpatialReference:c.fixSpatialReference,parseArguments:x,standardFunction:C};d.extend=function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:C,evaluateIdentifier:ba,arcadeCustomFunctionHandler:aa},d=0;d<a.length;d++)a[d].registerFunctions(b);for(var e in b.functions)Z[e]={value:new c.NativeFunction(b.functions[e]),valueset:!0,node:null},da.prototype[e]=Z[e];for(d=0;d<b.signatures.length;d++)p.addFunctionDeclaration(b.signatures[d],"async")};
d.executeScript=function(a,b,d){d||(d=new A({wkid:102100}));var e=b.vars,g=b.customfunctions,h=new da;e||(e={});g||(g={});var k=new n({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});k.immutable=!1;h.textformatting={value:k,valueset:!0,node:null};for(var m in g)h[m]={value:new c.NativeFunction(g[m]),native:!0,valueset:!0,node:null};for(m in e)h[m]=e[m]&&"esri.Graphic"===e[m].declaredClass?{value:f.createFromGraphic(e[m]),valueset:!0,node:null}:{value:e[m],
valueset:!0,node:null};a=y({spatialReference:d,globalScope:h,localScope:null,console:b.console?b.console:ia,lrucache:b.lrucache,depthCounter:1,applicationCache:void 0===b.applicationCache?null:b.applicationCache},a.body[0].body);a instanceof c.ReturnResult&&(a=a.value);a instanceof c.ImplicitResult&&(a=a.value);a===c.voidOperation&&(a=null);if(a===c.breakResult)throw Error("Cannot return BREAK");if(a===c.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof l)throw Error("Cannot return FUNCTION");
if(a instanceof c.NativeFunction)throw Error("Cannot return FUNCTION");return a};d.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return p.findFieldLiterals(a,b)};d.validateScript=function(a,b){return p.validateScript(a,b,"simple")};d.referencesMember=function(a,b){return p.referencesMember(a,b)};d.referencesFunction=function(a,b){return p.referencesFunction(a,b)};d.findFunctionCalls=function(a){return p.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports",
"./treeAnalysis","./lib/esprima"],function(h,d,n,f){Object.defineProperty(d,"__esModule",{value:!0});d.parseScript=function(d,g){void 0===g&&(g=[]);d=f.parse("function _() { "+d+"\n}");if(null===d.body||void 0===d.body)throw Error("No formula provided.");if(0===d.body.length)throw Error("No formula provided.");if(0===d.body.length)throw Error("No formula provided.");if("BlockStatement"!==d.body[0].body.type)throw Error("Invalid formula content.");var e=n.validateLanguage(d);if(""!==e)throw Error(e);
n.findScriptDependencies(d,g);return d};d.scriptCheck=function(d,g,e,c,h){var b=[];try{var a=f.parse("function _() { "+d+"\n}",{tolerant:!0,loc:!0}),m=a.errors;if(0<m.length)for(var k=0;k<m.length;k++)b.push({line:m[k].lineNumber,character:m[k].column,reason:m[k].description});var l=n.checkScript(a,g,e,c,h);for(g=0;g<l.length;g++)b.push(l[g])}catch(v){try{"Unexpected token }"===v.description?(v.index=("function _() { "+d+"\n}").length-1,b.push({line:v.lineNumber,character:v.column,reason:"Unexpected end of script"})):
b.push({line:v.lineNumber,character:v.column,reason:v.description})}catch(u){}}return b};d.extractFieldLiterals=function(d,f){void 0===f&&(f=!1);return n.findFieldLiterals(d,f)};d.validateScript=function(d,f,e){return n.validateScript(d,f,e)};d.referencesMember=function(d,f){return n.referencesMember(d,f)};d.referencesFunction=function(d,f){return n.referencesFunction(d,f)}})},"esri/arcade/lib/esprima":function(){(function(h,d){"function"===typeof define&&define.amd?define(["exports"],d):"undefined"!==
typeof exports?d(exports):d(h.esprima={})})(this,function(h){function d(a,b){if(!a)throw Error("ASSERT: "+b);}function n(a){return 48<=a&&57>=a}function f(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function l(a){return 0<="01234567".indexOf(a)}function g(a){return 10===a||13===a||8232===a||8233===a}function e(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&db.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function c(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&
122>=a||48<=a&&57>=a||92===a||128<=a&&db.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function p(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function b(a,b,c,e,f){d("number"===typeof c,"Comment must have valid position");ca.lastCommentStart>=c||(ca.lastCommentStart=c,a={type:a,value:b},
O.range&&(a.range=[c,e]),O.loc&&(a.loc=f),O.comments.push(a),O.attachComment&&(O.leadingComments.push(a),O.trailingComments.push(a)))}function a(a){var c,d,e;c=G-a;for(d={start:{line:Y,column:G-ha-a}};G<ma;)if(e=N.charCodeAt(G),++G,g(e)){O.comments&&(a=N.slice(c+a,G-1),d.end={line:Y,column:G-ha-1},b("Line",a,c,G-1,d));13===e&&10===N.charCodeAt(G)&&++G;++Y;ha=G;return}O.comments&&(a=N.slice(c+a,G),d.end={line:Y,column:G-ha},b("Line",a,c,G,d))}function m(){var c,d;for(d=0===G;G<ma;)if(c=N.charCodeAt(G),
32===c||9===c||11===c||12===c||160===c||5760<=c&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(c))++G;else if(g(c))++G,13===c&&10===N.charCodeAt(G)&&++G,++Y,ha=G,d=!0;else if(47===c)if(c=N.charCodeAt(G+1),47===c)++G,++G,a(2),d=!0;else if(42===c){++G;++G;a:{var e=c=void 0,f=void 0,f=void 0;O.comments&&(c=G-2,e={start:{line:Y,column:G-ha-2}});for(;G<ma;)if(f=N.charCodeAt(G),g(f))13===f&&10===N.charCodeAt(G+1)&&++G,++Y,++G,ha=G,G>=ma&&K();else{if(42===
f&&47===N.charCodeAt(G+1)){++G;++G;O.comments&&(f=N.slice(c+2,G-2),e.end={line:Y,column:G-ha},b("Block",f,c,G,e));break a}++G}K()}}else break;else if(d&&45===c)if(45===N.charCodeAt(G+1)&&62===N.charCodeAt(G+2))G+=3,a(3);else break;else if(60===c)if("!--"===N.slice(G+1,G+4))++G,++G,++G,++G,a(4);else break;else break}function k(a){var b,c,d=0;b="u"===a?4:2;for(a=0;a<b;++a)if(G<ma&&f(N[G]))c=N[G++],d=16*d+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(d)}function q(){var a,
b;a=N.charCodeAt(G++);b=String.fromCharCode(a);92===a&&(117!==N.charCodeAt(G)&&K(),++G,(a=k("u"))&&"\\"!==a&&e(a.charCodeAt(0))||K(),b=a);for(;G<ma;){a=N.charCodeAt(G);if(!c(a))break;++G;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==N.charCodeAt(G)&&K(),++G,(a=k("u"))&&"\\"!==a&&c(a.charCodeAt(0))||K(),b+=a)}return b}function v(){var a=G,b=N.charCodeAt(G),c,d=N[G];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++G,
O.tokenize&&(40===b?O.openParenToken=O.tokens.length:123===b&&(O.openCurlyToken=O.tokens.length)),{type:T.Punctuator,value:String.fromCharCode(b),lineNumber:Y,lineStart:ha,start:a,end:G};default:if(c=N.charCodeAt(G+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return G+=2,{type:T.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:Y,lineStart:ha,start:a,end:G};case 33:case 61:return G+=2,61===N.charCodeAt(G)&&++G,{type:T.Punctuator,
value:N.slice(a,G),lineNumber:Y,lineStart:ha,start:a,end:G}}}b=N.substr(G,4);if("\x3e\x3e\x3e\x3d"===b)return G+=4,{type:T.Punctuator,value:b,lineNumber:Y,lineStart:ha,start:a,end:G};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return G+=3,{type:T.Punctuator,value:b,lineNumber:Y,lineStart:ha,start:a,end:G};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return G+=2,{type:T.Punctuator,value:b,lineNumber:Y,lineStart:ha,start:a,end:G};if(0<=
"\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++G,{type:T.Punctuator,value:d,lineNumber:Y,lineStart:ha,start:a,end:G};K()}function u(){var a,b,c;c=N[G];d(n(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");b=G;a="";if("."!==c){a=N[G++];c=N[G];if("0"===a){if("x"===c||"X"===c){++G;for(a="";G<ma&&f(N[G]);)a+=N[G++];0===a.length&&K();e(N.charCodeAt(G))&&K();return{type:T.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:Y,lineStart:ha,start:b,end:G}}if("b"===
c||"B"===c){++G;for(c="";G<ma;){a=N[G];if("0"!==a&&"1"!==a)break;c+=N[G++]}0===c.length&&K();G<ma&&(a=N.charCodeAt(G),(e(a)||n(a))&&K());return{type:T.NumericLiteral,value:parseInt(c,2),lineNumber:Y,lineStart:ha,start:b,end:G}}if("o"===c||"O"===c){l(c)?(c=!0,a="0"+N[G++]):(c=!1,++G,a="");for(;G<ma&&l(N[G]);)a+=N[G++];c||0!==a.length||K();(e(N.charCodeAt(G))||n(N.charCodeAt(G)))&&K();return{type:T.NumericLiteral,value:parseInt(a,8),octal:c,lineNumber:Y,lineStart:ha,start:b,end:G}}}for(;n(N.charCodeAt(G));)a+=
N[G++];c=N[G]}if("."===c){for(a+=N[G++];n(N.charCodeAt(G));)a+=N[G++];c=N[G]}if("e"===c||"E"===c){a+=N[G++];c=N[G];if("+"===c||"-"===c)a+=N[G++];if(n(N.charCodeAt(G)))for(;n(N.charCodeAt(G));)a+=N[G++];else K()}e(N.charCodeAt(G))&&K();return{type:T.NumericLiteral,value:parseFloat(a),lineNumber:Y,lineStart:ha,start:b,end:G}}function t(){X=null;m();M("Regular Expression language structures not supported")}function r(){m();t()}function w(){var a;a=O.tokens[O.tokens.length-1];if(!a)return r();if("Punctuator"===
a.type){if("]"===a.value)return v();if(")"===a.value)return a=O.tokens[O.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?v():r();if("}"===a.value){if(O.tokens[O.openCurlyToken-3]&&"Keyword"===O.tokens[O.openCurlyToken-3].type){if(a=O.tokens[O.openCurlyToken-4],!a)return v()}else if(O.tokens[O.openCurlyToken-4]&&"Keyword"===O.tokens[O.openCurlyToken-4].type){if(a=O.tokens[O.openCurlyToken-
5],!a)return r()}else return v();if(0<=Za.indexOf(a.value))return v()}return r()}return"Keyword"===a.type&&"this"!==a.value?r():v()}function z(){var a;m();if(G>=ma)return{type:T.EOF,lineNumber:Y,lineStart:ha,start:G,end:G};a=N.charCodeAt(G);if(e(a)){var b;a=G;if(92===N.charCodeAt(G))b=q();else a:{var h;for(b=G++;G<ma;){h=N.charCodeAt(G);if(92===h){G=b;b=q();break a}if(c(h))++G;else break}b=N.slice(b,G)}return{type:1===b.length?T.Identifier:p(b)?T.Keyword:"null"===b.toLowerCase()?T.NullLiteral:"true"===
b.toLowerCase()||"false"===b.toLowerCase()?T.BooleanLiteral:T.Identifier,value:b,lineNumber:Y,lineStart:ha,start:a,end:G}}if(40===a||41===a||59===a)return v();if(39===a||34===a){var r="",t,y,z;h=!1;var A,x;A=Y;x=ha;a=N[G];d("'"===a||'"'===a,"String literal must starts with a quote");b=G;for(++G;G<ma;)if(t=N[G++],t===a){a="";break}else if("\\"===t)if((t=N[G++])&&g(t.charCodeAt(0)))++Y,"\r"===t&&"\n"===N[G]&&++G,ha=G;else switch(t){case "u":case "x":if("{"===N[G]){++G;y=t=void 0;t=N[G];y=0;for("}"===
t&&K();G<ma;){t=N[G++];if(!f(t))break;y=16*y+"0123456789abcdef".indexOf(t.toLowerCase())}(1114111<y||"}"!==t)&&K();t=65535>=y?String.fromCharCode(y):String.fromCharCode((y-65536>>10)+55296,(y-65536&1023)+56320);r+=t}else z=G,(y=k(t))?r+=y:(G=z,r+=t);break;case "n":r+="\n";break;case "r":r+="\r";break;case "t":r+="\t";break;case "b":r+="\b";break;case "f":r+="\f";break;case "v":r+="\x0B";break;default:l(t)?(y="01234567".indexOf(t),0!==y&&(h=!0),G<ma&&l(N[G])&&(h=!0,y=8*y+"01234567".indexOf(N[G++]),
0<="0123".indexOf(t)&&G<ma&&l(N[G])&&(y=8*y+"01234567".indexOf(N[G++]))),r+=String.fromCharCode(y)):r+=t}else if(g(t.charCodeAt(0)))break;else r+=t;""!==a&&K();return{type:T.StringLiteral,value:r,octal:h,startLineNumber:A,startLineStart:x,lineNumber:Y,lineStart:ha,start:b,end:G}}return 46===a?n(N.charCodeAt(G+1))?u():v():n(a)?u():O.tokenize&&47===a?w():v()}function B(){var a,b,c;m();a={start:{line:Y,column:G-ha}};b=z();a.end={line:Y,column:G-ha};b.type!==T.EOF&&(c=N.slice(b.start,b.end),a={type:Ga[b.type],
value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),O.tokens.push(a));return b}function A(){var a;a=X;G=a.end;Y=a.lineNumber;ha=a.lineStart;X="undefined"!==typeof O.tokens?B():z();G=a.end;Y=a.lineNumber;ha=a.lineStart;return a}function x(){var a,b,c;a=G;b=Y;c=ha;X="undefined"!==typeof O.tokens?B():z();G=a;Y=b;ha=c}function C(){this.line=Y;this.column=G-ha}function y(){this.start=new C;this.end=null}function E(a){this.start=a.type===T.StringLiteral?
{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function D(){G=X.start;X.type===T.StringLiteral?(Y=X.startLineNumber,ha=X.startLineStart):(Y=X.lineNumber,ha=X.lineStart);O.range&&(this.range=[G,0]);O.loc&&(this.loc=new y)}function F(a){O.range&&(this.range=[a.start,0]);O.loc&&(this.loc=new E(a))}function L(){var a,b,c,d;a=G;b=Y;c=ha;m();d=Y!==b;G=a;Y=b;ha=c;return d}function P(a,b,c){var d=Error("Line "+a+": "+c);d.index=b;d.lineNumber=
a;d.column=b-ha+1;d.description=c;return d}function M(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){d(c<b.length,"Message reference must be in range");return b[c]});throw P(Y,G,c);}function I(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){d(c<b.length,"Message reference must be in range");return b[c]});c=P(Y,G,c);if(O.errors)O.errors.push(c);else throw c;}function ba(a,b){var c=ka.UnexpectedToken;a&&(c=b?b:a.type===
T.EOF?ka.UnexpectedEOS:a.type===T.Identifier?ka.UnexpectedIdentifier:a.type===T.NumericLiteral?ka.UnexpectedNumber:a.type===T.StringLiteral?ka.UnexpectedString:ka.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?P(a.lineNumber,a.start,c):P(Y,G,c)}function K(a,b){throw ba(a,b);}function S(a,b){a=ba(a,b);if(O.errors)O.errors.push(a);else throw a;}function Q(a){var b=A();b.type===T.Punctuator&&b.value===a||K(b)}function J(){var a;O.errors?(a=X,a.type===
T.Punctuator&&","===a.value?A():a.type===T.Punctuator&&";"===a.value?(A(),S(a)):S(a,ka.UnexpectedToken)):Q(",")}function R(a){var b=A();b.type===T.Keyword&&b.value.toLowerCase()===a.toLowerCase()||K(b)}function H(a){return X.type===T.Punctuator&&X.value===a}function W(a){return X.type===T.Keyword&&X.value.toLowerCase()===a.toLowerCase()}function aa(){var a;59===N.charCodeAt(G)||H(";")?A():(a=Y,m(),Y===a&&(X.type===T.EOF||H("}")||K(X)))}function ia(a){return a.type===ea.Identifier||a.type===ea.MemberExpression}
function V(a,b){var c,d=new D;b=la;c=Ma();la=b;return d.finishFunctionExpression(null,a,[],c)}function Z(){var a,b;a=la;la=!0;b=Fa();b=V(b.params);la=a;return b}function ga(){var a,b=new D;a=A();return a.type===T.StringLiteral||a.type===T.NumericLiteral?(la&&a.octal&&S(a,ka.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function da(){var a,b,c,d=new D;a=X;if(a.type===T.Identifier)return b=ga(),"get"!==a.value||H(":")||H("(")?"set"!==a.value||H(":")||H("(")?H(":")?(A(),a=wa(),
d.finishProperty("init",b,a,!1,!1)):H("(")?(a=Z(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=ga(),Q("("),a=X,a.type!==T.Identifier?(Q(")"),S(a),a=V([])):(c=[Ia()],Q(")"),a=V(c,a)),d.finishProperty("set",b,a,!1,!1)):(b=ga(),Q("("),Q(")"),a=V([]),d.finishProperty("get",b,a,!1,!1));if(a.type===T.EOF||a.type===T.Punctuator)K(a);else{b=ga();if(H(":"))return A(),a=wa(),d.finishProperty("init",b,a,!1,!1);if(H("("))return a=Z(),d.finishProperty("init",b,a,!0,!1);K(A())}}function ja(a){var b=
[],c,d,e={},f=String,g=new D;for(!0!==a&&Q("{");!H("}");)a=da(),c=a.key.type===ea.Identifier?a.key.name:f(a.key.value),d="init"===a.kind?Na.Data:"get"===a.kind?Na.Get:Na.Set,c="$"+c,Object.prototype.hasOwnProperty.call(e,c)?(e[c]===Na.Data?la&&d===Na.Data?I(ka.StrictDuplicateProperty):d!==Na.Data&&I(ka.AccessorDataProperty):d===Na.Data?I(ka.AccessorDataProperty):e[c]&d&&I(ka.AccessorGetSet),e[c]|=d):e[c]=d,b.push(a),H("}")||J();Q("}");return g.finishObjectExpression(b)}function pa(){var a,b,c,d;if(H("("))return Q("("),
H(")")?(A(),b=Qa.ArrowParameterPlaceHolder):(++ca.parenthesisCount,b=ua(),Q(")")),b;if(H("[")){b=[];var e=new D;for(Q("[");!H("]");)H(",")?(A(),b.push(null)):(b.push(wa()),H("]")||Q(","));A();return e.finishArrayExpression(b)}if(H("{"))return ja();a=X.type;d=new D;if(a===T.Identifier)c=d.finishIdentifier(A().value);else if(a===T.StringLiteral||a===T.NumericLiteral)la&&X.octal&&S(X,ka.StrictOctalLiteral),c=d.finishLiteral(A());else if(a===T.Keyword){if(W("function")){d=null;var f;c=[];var g=[],h,k=
new D;R("function");H("(")||(d=Ia());f=Fa(b);c=f.params;g=f.defaults;a=f.stricted;b=f.firstRestricted;f.message&&(e=f.message);h=la;f=Ma();la&&b&&K(b,e);la&&a&&S(a,e);la=h;return k.finishFunctionExpression(d,c,g,f)}W("this")?(A(),c=d.finishThisExpression()):K(A())}else a===T.BooleanLiteral?(b=A(),b.value="true"===b.value.toLowerCase(),c=d.finishLiteral(b)):a===T.NullLiteral?(b=A(),b.value=null,c=d.finishLiteral(b)):H("/")||H("/\x3d")?(c="undefined"!==typeof O.tokens?d.finishLiteral(r()):d.finishLiteral(t()),
x()):K(A());return c}function sa(){var a=[];Q("(");if(!H(")"))for(;G<ma;){a.push(wa());if(H(")"))break;J()}Q(")");return a}function na(){Q(".");var a,b=new D;a=A();a.type===T.Identifier||a.type===T.Keyword||a.type===T.BooleanLiteral||a.type===T.NullLiteral||K(a);return b.finishIdentifier(a.value)}function ya(){var a;Q("[");a=ua();Q("]");return a}function qa(){var a,b,c=new D;R("new");var e;d(ca.allowIn,"callee of new expression always allow in keyword.");e=X;for(a=W("new")?qa():pa();;)if(H("["))b=
ya(),a=(new F(e)).finishMemberExpression("[",a,b);else if(H("."))b=na(),a=(new F(e)).finishMemberExpression(".",a,b);else break;b=H("(")?sa():[];return c.finishNewExpression(a,b)}function ta(){var a,b,c=X,d,e=ca.allowIn;b=X;ca.allowIn=!0;for(a=W("new")?qa():pa();;)if(H("."))d=na(),a=(new F(b)).finishMemberExpression(".",a,d);else if(H("("))d=sa(),a=(new F(b)).finishCallExpression(a,d);else if(H("["))d=ya(),a=(new F(b)).finishMemberExpression("[",a,d);else break;ca.allowIn=e;X.type!==T.Punctuator||
!H("++")&&!H("--")||L()||(ia(a)||I(ka.InvalidLHSInAssignment),b=A(),a=(new F(c)).finishPostfixExpression(b.value,a));return a}function ra(){var a,b,c;X.type!==T.Punctuator&&X.type!==T.Keyword?b=ta():H("++")||H("--")?(c=X,a=A(),b=ra(),ia(b)||I(ka.InvalidLHSInAssignment),b=(new F(c)).finishUnaryExpression(a.value,b)):H("+")||H("-")||H("~")||H("!")?(c=X,a=A(),b=ra(),b=(new F(c)).finishUnaryExpression(a.value,b)):W("delete")||W("void")||W("typeof")?(c=X,a=A(),b=ra(),b=(new F(c)).finishUnaryExpression(a.value,
b),la&&"delete"===b.operator&&b.argument.type===ea.Identifier&&I(ka.StrictDelete)):b=ta();return b}function Da(a,b){var c=0;if(a.type!==T.Punctuator&&a.type!==T.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=
8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Aa(){var a,b,c,d,e,f;a=X;b=ra();if(b===Qa.ArrowParameterPlaceHolder)return b;c=X;d=Da(c,ca.allowIn);if(0===d)return b;c.prec=d;A();a=[a,X];f=ra();for(e=[b,c,f];0<(d=Da(X,ca.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),c=e.pop().value,b=e.pop(),a.pop(),b=(new F(a[a.length-1])).finishBinaryExpression(c,b,f),e.push(b);c=A();c.prec=d;e.push(c);a.push(X);b=ra();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<
d;)b=(new F(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function fa(a){var b,c,d,e,f,g,h;e=[];f=[];g=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===ea.Identifier)e.push(d),f.push(null),Ha(h,d,d.name);else if(d.type===ea.AssignmentExpression)e.push(d.left),f.push(d.right),++g,Ha(h,d.left,d.left.name);else return null;h.message===ka.StrictParamDupe&&(a=la?h.stricted:h.firstRestricted,K(a,h.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:h.stricted,
firstRestricted:h.firstRestricted,message:h.message}}function wa(){var a,b,c,d,e;a=ca.parenthesisCount;b=e=X;var f,g;g=X;c=Aa();c!==Qa.ArrowParameterPlaceHolder&&H("?")&&(A(),f=ca.allowIn,ca.allowIn=!0,b=wa(),ca.allowIn=f,Q(":"),f=wa(),c=(new F(g)).finishConditionalExpression(c,b,f));if(c===Qa.ArrowParameterPlaceHolder||H("\x3d\x3e"))if(ca.parenthesisCount===a||ca.parenthesisCount===a+1)if(c.type===ea.Identifier?d=fa([c]):c.type===ea.AssignmentExpression?d=fa([c]):c.type===ea.SequenceExpression?d=
fa(c.expressions):c===Qa.ArrowParameterPlaceHolder&&(d=fa([])),d)return a=d,e=new F(e),Q("\x3d\x3e"),d=la,c=H("{")?Ma():wa(),la&&a.firstRestricted&&K(a.firstRestricted,a.message),la&&a.stricted&&S(a.stricted,a.message),la=d,e.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==ea.BlockStatement);X.type!==T.Punctuator?a=!1:(a=X.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||
"^\x3d"===a||"|\x3d"===a);a&&(ia(c)||I(ka.InvalidLHSInAssignment),b=A(),a=wa(),c=(new F(e)).finishAssignmentExpression(b.value,c,a));return c}function ua(){var a,b=X;a=wa();if(H(",")){for(a=[a];G<ma&&H(",");)A(),a.push(wa());a=(new F(b)).finishSequenceExpression(a)}return a}function Ia(){var a,b=new D;a=A();a.type!==T.Identifier&&K(a);return b.finishIdentifier(a.value)}function hb(a){var b=null,c,d=new D;c=Ia();"const"===a?(Q("\x3d"),b=wa()):H("\x3d")&&(A(),b=wa());return d.finishVariableDeclarator(c,
b)}function Ka(a){var b=[];do{b.push(hb(a));if(!H(","))break;A()}while(G<ma);return b}function La(a){var b=X.type,c,d;b===T.EOF&&K(X);if(b===T.Punctuator&&"{"===X.value){if(a){Q("{");var f=X;a=G;c=Y;d=ha;A();b=H(":");X=f;G=a;Y=c;ha=d;if((X.type===T.Identifier||X.type===T.StringLiteral)&&b)return ja(!0);a=new D;for(c=[];G<ma&&!H("}");){d=Ja();if("undefined"===typeof d)break;c.push(d)}Q("}");return a.finishBlockStatement(c)}return ja()}a=new D;if(b===T.Punctuator)switch(X.value){case ";":return a=new D,
Q(";"),a.finishEmptyStatement();case "(":return c=ua(),aa(),a.finishExpressionStatement(c)}else if(b===T.Keyword)switch(X.value.toLowerCase()){case "break":return c=null,R("break"),59===N.charCodeAt(G)?(A(),ca.inIteration||ca.inSwitch||M(ka.IllegalBreak),a=a.finishBreakStatement(null)):L()?(ca.inIteration||ca.inSwitch||M(ka.IllegalBreak),a=a.finishBreakStatement(null)):(X.type===T.Identifier&&(c=Ia(),d="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,d)||M(ka.UnknownLabel,c.name)),aa(),
null!==c||ca.inIteration||ca.inSwitch||M(ka.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,R("continue"),59===N.charCodeAt(G)?(A(),ca.inIteration||M(ka.IllegalContinue),a=a.finishContinueStatement(null)):L()?(ca.inIteration||M(ka.IllegalContinue),a=a.finishContinueStatement(null)):(X.type===T.Identifier&&(c=Ia(),d="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,d)||M(ka.UnknownLabel,c.name)),aa(),null!==c||ca.inIteration||M(ka.IllegalContinue),a=a.finishContinueStatement(c)),
a;case "for":var g,h,k;h=ca.allowIn;g=b=f=null;R("for");Q("(");if(H(";"))A();else{if(W("var")){ca.allowIn=!1;var m=new D;g=A();k=Ka();g=m.finishVariableDeclaration(k,g.value);ca.allowIn=h;1===g.declarations.length&&W("in")&&(A(),c=g,d=ua(),g=null)}else ca.allowIn=!1,g=ua(),ca.allowIn=h,W("in")&&(ia(g)||I(ka.InvalidLHSInForIn),A(),c=g,d=ua(),g=null);"undefined"===typeof c&&Q(";")}"undefined"===typeof c&&(H(";")||(b=ua()),Q(";"),H(")")||(f=ua()));Q(")");k=ca.inIteration;ca.inIteration=!0;h=La(!0);ca.inIteration=
k;return"undefined"===typeof c?a.finishForStatement(g,b,f,h):a.finishForInStatement(c,d,h);case "function":return Xa(a);case "if":return R("if"),Q("("),c=ua(),Q(")"),d=La(!0),W("else")?(A(),b=La(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,R("return"),ca.inFunctionBody||I(ka.IllegalReturn),32===N.charCodeAt(G)&&e(N.charCodeAt(G+1))?(c=ua(),aa(),a=a.finishReturnStatement(c)):L()?a=a.finishReturnStatement(null):(H(";")||H("}")||X.type===T.EOF||(c=ua()),aa(),a=a.finishReturnStatement(c)),
a;case "var":return R("var"),c=Ka(),aa(),a.finishVariableDeclaration(c,"var")}c=ua();if(c.type===ea.Identifier&&H(":"))return A(),b="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,b)&&M(ka.Redeclaration,"Label",c.name),ca.labelSet[b]=!0,d=La(!1),delete ca.labelSet[b],a.finishLabeledStatement(c,d);aa();return a.finishExpressionStatement(c)}function Ma(){var a,b=[],c,d,e,f,g,h=new D;for(Q("{");G<ma&&X.type===T.StringLiteral;){c=X;a=Ja();b.push(a);if(a.expression.type!==ea.Literal)break;
a=N.slice(c.start+1,c.end-1);"use strict"===a?(la=!0,d&&S(d,ka.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=ca.labelSet;d=ca.inIteration;e=ca.inSwitch;f=ca.inFunctionBody;g=ca.parenthesizedCount;ca.labelSet={};ca.inIteration=!1;ca.inSwitch=!1;ca.inFunctionBody=!0;for(ca.parenthesizedCount=0;G<ma&&!H("}");){a=Ja();if("undefined"===typeof a)break;b.push(a)}Q("}");ca.labelSet=c;ca.inIteration=d;ca.inSwitch=e;ca.inFunctionBody=f;ca.parenthesizedCount=g;return h.finishBlockStatement(b)}function Ha(a,b,c){c=
"$"+c;la?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=ka.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=ka.StrictParamDupe);a.paramSet[c]=!0}function Fa(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};Q("(");if(!H(")"))for(a.paramSet={};G<ma;){var b=a,c=void 0,d=void 0,e=void 0,c=X,d=Ia();Ha(b,c,c.value);H("\x3d")&&(A(),e=wa(),++b.defaultCount);b.params.push(d);b.defaults.push(e);
if(H(")"))break;Q(",")}Q(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Xa(){var a,b=[],c=[],d,e,f,g,h,k=new D;R("function");a=Ia();d=Fa(f);b=d.params;c=d.defaults;e=d.stricted;f=d.firstRestricted;d.message&&(g=d.message);h=la;d=Ma();la&&f&&K(f,g);la&&e&&S(e,g);la=h;return k.finishFunctionDeclaration(a,b,c,d)}function Ja(){if(X.type===T.Keyword)return"function"===X.value.toLowerCase()?
Xa():La(!1);if(X.type!==T.EOF)return La(!1)}function Ra(){var a,b,c,d=[];for(a=0;a<O.tokens.length;++a)b=O.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),O.range&&(c.range=b.range),O.loc&&(c.loc=b.loc),d.push(c);O.tokens=d}var T,Ga,Za,ea,Qa,Na,ka,db,N,la,G,Y,ha,ma,X,ca,O;T={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};Ga={};Ga[T.BooleanLiteral]="Boolean";Ga[T.EOF]=
"\x3cend\x3e";Ga[T.Identifier]="Identifier";Ga[T.Keyword]="Keyword";Ga[T.NullLiteral]="Null";Ga[T.NumericLiteral]="Numeric";Ga[T.Punctuator]="Punctuator";Ga[T.StringLiteral]="String";Ga[T.RegularExpression]="RegularExpression";Za="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ea={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Qa={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Na={Data:1,Get:2,Set:4};ka={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};db={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
F.prototype=D.prototype={processComment:function(){var a,b,c,d=O.bottomRightStack,e,f,g=d[d.length-1];if(!(this.type===ea.Program&&0<this.body.length)){if(0<O.trailingComments.length){c=[];for(e=O.trailingComments.length-1;0<=e;--e)f=O.trailingComments[e],f.range[0]>=this.range[1]&&(c.unshift(f),O.trailingComments.splice(e,1));O.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=this.range[0];)a=
g,g=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<O.leadingComments.length)for(b=[],e=O.leadingComments.length-1;0<=e;--e)f=O.leadingComments[e],f.range[1]<=this.range[0]&&(b.unshift(f),O.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){O.range&&(this.range[1]=G);O.loc&&(this.loc.end=
new C,O.source&&(this.loc.source=O.source));O.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=ea.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=ea.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?ea.LogicalExpression:ea.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=ea.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=ea.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=ea.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=ea.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
ea.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=ea.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=ea.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=ea.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=ea.ForInStatement;this.left=a;this.right=b;this.body=
c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=ea.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=ea.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=ea.Identifier;
this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=ea.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=ea.Literal;this.value=a.value;this.raw=N.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=ea.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
ea.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=ea.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=ea.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=ea.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=ea.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?ea.UpdateExpression:ea.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=ea.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=ea.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};h.version="2.0.0-dev";h.tokenize=
function(a,b){var c,d;c=String;"string"===typeof a||a instanceof String||(a=c(a));N=a;G=0;Y=0<N.length?1:0;ha=0;ma=N.length;X=null;ca={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};O={};b=b||{};b.tokens=!0;O.tokens=[];O.tokenize=!0;O.openParenToken=-1;O.openCurlyToken=-1;O.range="boolean"===typeof b.range&&b.range;O.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(O.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(O.errors=
[]);try{x();if(X.type===T.EOF)return O.tokens;for(A();X.type!==T.EOF;)try{A()}catch(Sa){if(O.errors){O.errors.push(Sa);break}else throw Sa;}Ra();d=O.tokens;"undefined"!==typeof O.comments&&(d.comments=O.comments);"undefined"!==typeof O.errors&&(d.errors=O.errors)}catch(Sa){throw Sa;}finally{O={}}return d};h.parse=function(a,b){var c,d;d=String;"string"===typeof a||a instanceof String||(a=d(a));N=a;G=0;Y=0<N.length?1:0;ha=0;ma=N.length;X=null;ca={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};O={};"undefined"!==typeof b&&(O.range="boolean"===typeof b.range&&b.range,O.loc="boolean"===typeof b.loc&&b.loc,O.attachComment="boolean"===typeof b.attachComment&&b.attachComment,O.loc&&null!==b.source&&void 0!==b.source&&(O.source=d(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(O.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(O.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(O.errors=[]),O.attachComment&&(O.range=!0,O.comments=
[],O.bottomRightStack=[],O.trailingComments=[],O.leadingComments=[]));try{var e;m();x();e=new D;la=!1;var f;a=[];for(var g,h,k;G<ma;){g=X;if(g.type!==T.StringLiteral)break;f=Ja();a.push(f);if(f.expression.type!==ea.Literal)break;h=N.slice(g.start+1,g.end-1);"use strict"===h?(la=!0,k&&S(k,ka.StrictOctalLiteral)):!k&&g.octal&&(k=g)}for(;G<ma;){f=Ja();if("undefined"===typeof f)break;a.push(f)}c=e.finishProgram(a);"undefined"!==typeof O.comments&&(c.comments=O.comments);"undefined"!==typeof O.tokens&&
(Ra(),c.tokens=O.tokens);"undefined"!==typeof O.errors&&(c.errors=O.errors)}catch(jb){throw jb;}finally{O={}}return c};h.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in ea)ea.hasOwnProperty(a)&&(b[a]=ea[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["require","exports","../../support/utils","./utils"],function(h,d,n,f){function l(a){return a&&"esri.renderers.visualVariables.SizeVariable"===
a.declaredClass}function g(a){return null!=a&&!isNaN(a)&&isFinite(a)}function e(a){return a.valueExpression?"expression":a.field&&"string"===typeof a.field?"field":"unknown"}function c(a,b,c){if(null!=a){if(l(a))return a.getSize(b,c);if(g(a))return a}return null}function p(a,b,c){return g(c)&&a>c?c:g(b)&&a<b?b:a}Object.defineProperty(d,"__esModule",{value:!0});var b=Math.PI;d.isSizeVariable=l;d.isValidNumber=g;d.getInputValueType=e;d.getTransformationType=function(a,b){b=b||e(a);var c=a.valueUnit||
"unknown";return"unknown"===b?"constant":a.stops?"stops":null!=a.minSize&&null!=a.maxSize&&null!=a.minDataValue&&null!=a.maxDataValue?"clamped-linear":"unknown"===c?null!=a.minSize&&null!=a.minDataValue?a.minSize&&a.minDataValue?"proportional":"additive":"identity":"scale-dependent"};d.getSizeFromNumberOrVariable=c;d.getSizeForValue=function(a,d,e,g,h){switch(d.transformationType){case "additive":return g=c(d.minSize,e,g),a+(g||d.minDataValue);case "constant":return a=(a=d.stops)&&a.length&&a[0].size,
null==a&&(a=d.minSize),c(a,e,g);case "clamped-linear":h=(a-d.minDataValue)/(d.maxDataValue-d.minDataValue);var k=c(d.minSize,e,g);e=c(d.maxSize,e,g);g=g&&g.shape;a<=d.minDataValue?d=k:a>=d.maxDataValue?d=e:"area"===d.scaleBy&&g?(g=(d="circle"===g)?b*Math.pow(k/2,2):k*k,g+=h*((d?b*Math.pow(e/2,2):e*e)-g),d=d?2*Math.sqrt(g/b):Math.sqrt(g)):d=k+h*(e-k);return d;case "proportional":return h=g&&g.shape,a/=d.minDataValue,k=c(d.minSize,e,g),d=c(d.maxSize,e,g),g=null,g="circle"===h?2*Math.sqrt(a*Math.pow(k/
2,2)):"square"===h||"diamond"===h||"image"===h?Math.sqrt(a*Math.pow(k,2)):a*k,p(g,k,d);case "stops":return h=f.lookupData(a,h),k=h[0],a=h[1],h=h[2],k===a?d=c(d.stops[k].size,e,g):(k=c(d.stops[k].size,e,g),d=c(d.stops[a].size,e,g),d=k+(d-k)*h),d;case "scale-dependent":return h=(g&&g.resolution?g.resolution:1)*n.meterIn[d.valueUnit],k=c(d.minSize,e,g),g=c(d.maxSize,e,g),d=d.valueRepresentation,e=null,e="area"===d?2*Math.sqrt(a/b)/h:"radius"===d||"distance"===d?2*a/h:a/h,p(e,k,g);case "identity":return a;
case "unknown":return null}}})},"esri/renderers/support/utils":function(){define("dojo/date/locale ../../Color ../../core/lang ../../core/numberUtils ../../core/unitUtils dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(h,d,n,f,l,g){function e(a,b,c){var d="";0===b?d=p.lt+" ":b===c&&(d=p.gt+" ");return d+a}var c={},p={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},b={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},a={millisecond:{dateOptions:{formatLength:"long"},
timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},m={formatLength:"short",fullYear:!0},k={formatLength:"short"};n.mixin(c,
{meterIn:{inches:l.convertUnit(1,"meters","inches"),feet:l.convertUnit(1,"meters","feet"),"us-feet":l.convertUnit(1,"meters","us-feet"),yards:l.convertUnit(1,"meters","yards"),miles:l.convertUnit(1,"meters","miles"),"nautical-miles":l.convertUnit(1,"meters","nautical-miles"),millimeters:l.convertUnit(1,"meters","millimeters"),centimeters:l.convertUnit(1,"meters","centimeters"),decimeters:l.convertUnit(1,"meters","decimeters"),meters:l.convertUnit(1,"meters","meters"),kilometers:l.convertUnit(1,"meters",
"kilometers"),"decimal-degrees":1/l.lengthToDegrees(1,"meters")},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(a,b){var c=[];null==a||a instanceof Date||(a=new Date(a));b=b||{};b=n.mixin({},b);var d=b.selector?b.selector.toLowerCase():null,e=!d||-1<d.indexOf("time"),d=!d||-1<d.indexOf("date");e&&(b.timeOptions=b.timeOptions||k,b.timeOptions&&(b.timeOptions=n.mixin({},b.timeOptions),b.timeOptions.selector=b.timeOptions.selector||"time",
c.push(b.timeOptions)));d&&(b.dateOptions=b.dateOptions||m,b.dateOptions&&(b.dateOptions=n.mixin({},b.dateOptions),b.dateOptions.selector=b.dateOptions.selector||"date",c.push(b.dateOptions)));c&&c.length?(c=c.map(function(b){return h.format(a,b)}),b=1==c.length?c[0]:g["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return c[b]})):b=h.format(a);return b},createColorStops:function(a){var b=a.values,d=a.colors,g=a.labelIndexes,h=a.isDate,k=a.dateFormatOptions;a=[];return a=
b.map(function(a,m){var l=null;if(!g||-1<g.indexOf(m)){var p;(p=h?c.formatDate(a,k):f.format(a))&&(l=e(p,m,b.length-1))}return{value:a,color:d[m],label:l}})},updateColorStops:function(a){var b=a.stops,d=a.changes,g=a.isDate,h=a.dateFormatOptions,k=[],m,l=b.map(function(a){return a.value});d.forEach(function(a){k.push(a.index);l[a.index]=a.value});m=f.round(l,{indexes:k});b.forEach(function(a,d){a.value=l[d];if(null!=a.label){var k,p=null;(k=g?c.formatDate(m[d],h):f.format(m[d]))&&(p=e(k,d,b.length-
1));a.label=p}})},createClassBreakLabel:function(a){var b=a.minValue,c=a.maxValue,d=a.isFirstBreak?"":p.gt+" ";a="percent-of-total"===a.normalizationType?p.pct:"";b=null==b?"":f.format(b);c=null==c?"":f.format(c);return d+b+a+" "+p.ld+" "+c+a},setLabelsForClassBreaks:function(a){var b=a.classBreakInfos,d=a.classificationMethod,e=a.normalizationType,g=[];b&&b.length&&("standard-deviation"===d?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):
a.round?(g.push(b[0].minValue),b.forEach(function(a){g.push(a.maxValue)}),g=f.round(g),b.forEach(function(a,b){a.label=c.createClassBreakLabel({minValue:0===b?g[0]:g[b],maxValue:g[b+1],isFirstBreak:0===b,normalizationType:e})})):b.forEach(function(a,b){a.label=c.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:e})}))},updateClassBreak:function(a){var b=a.classBreaks,d=a.normalizationType,e=a.change,f=e.index,e=e.value,g=-1,h=-1,k=b.length;"standard-deviation"===
a.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===f?g=f:f===k?h=f-1:(h=f-1,g=f),-1<g&&g<k&&(a=b[g],a.minValue=e,a.label=c.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===g,normalizationType:d})),-1<h&&h<k&&(a=b[h],a.maxValue=e,a.label=c.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===h,normalizationType:d})))},calculateDateFormatInterval:function(a){var c,
d,e=a.length,f,g,h,k,m,l,p=Infinity,q;a=a.map(function(a){return new Date(a)});for(c=0;c<e-1;c++){f=a[c];h=[];m=Infinity;l="";for(d=c+1;d<e;d++)g=a[d],g=f.getFullYear()!==g.getFullYear()&&"year"||f.getMonth()!==g.getMonth()&&"month"||f.getDate()!==g.getDate()&&"day"||f.getHours()!==g.getHours()&&"hour"||f.getMinutes()!==g.getMinutes()&&"minute"||f.getSeconds()!==g.getSeconds()&&"second"||"millisecond",k=b[g],k<m&&(m=k,l=g),h.push(g);m<p&&(p=m,q=l)}return q},createUniqueValueLabel:function(b){var d=
b.value,e=b.fieldInfo,g=b.domain;b=b.dateFormatInterval;var h=String(d);(g=g&&g.codedValues?g.getName(d):null)?h=g:"number"===typeof d&&(h=e&&"date"===e.type?c.formatDate(d,b&&a[b]):f.format(d));return h}});return c})},"esri/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(h,d){function n(c,d){return c-d}var f=/^-?(\d+)(\.(\d+))?$/i,l=new RegExp("\\"+d.decimal+"0+$","g"),g=/(\d)0*$/g,e={numDigits:function(c){var d=String(c),b=d.match(f);c={integer:0,fractional:0};
b&&b[1]?(c.integer=b[1].split("").length,c.fractional=b[3]?b[3].split("").length:0):-1<d.toLowerCase().indexOf("e")&&(b=d.split("e"),d=b[0],b=b[1],d&&b&&(d=Number(d),b=Number(b),(c=0<b)||(b=Math.abs(b)),d=e.numDigits(d),c?(d.integer+=b,d.fractional=b>d.fractional?0:d.fractional-b):(d.fractional+=b,d.integer=b>d.integer?1:d.integer-b),c=d));return c},percentChange:function(c,d,b,a){var e={previous:null,next:null},f;null!=b&&(f=c-b,e.previous=Math.floor(Math.abs(100*(d-b-f)/f)));null!=a&&(f=a-c,e.next=
Math.floor(Math.abs(100*(a-d-f)/f)));return e},round:function(c,d){c=c.slice(0);var b,a,f,g,h,l,p,t,r=d&&null!=d.tolerance?d.tolerance:2,w=d&&d.indexes,z=d&&null!=d.strictBounds?d.strictBounds:!1;if(w)w.sort(n);else for(w=[],h=0;h<c.length;h++)w.push(h);for(h=0;h<w.length;h++)if(t=w[h],d=c[t],b=0===t?null:c[t-1],a=t===c.length-1?null:c[t+1],f=e.numDigits(d),f=f.fractional){l=0;for(p=!1;l<=f&&!p;){g=d;p=l;var B=void 0,A=void 0,B=Number(g.toFixed(p));B<g?A=B+1/Math.pow(10,p):(A=B,B-=1/Math.pow(10,p));
B=Number(B.toFixed(p));A=Number(A.toFixed(p));g=[B,A];g=z&&0===h?g[1]:g[0];p=r;var B=e.percentChange(d,g,b,a),x=A=void 0,A=void 0,A=null==B.previous||B.previous<=p,x=null==B.next||B.next<=p;p=A=A&&x||B.previous+B.next<=2*p;l++}p&&(c[t]=g)}return c},format:function(c,d){d=d||{places:20,round:-1};(c=h.format(c,d))&&(c=c.replace(g,"$1").replace(l,""));return c}};return e})},"esri/core/unitUtils":function(){define(["require","exports","dojo/i18n!./nls/Units","dojo/number","./wgs84Constants"],function(h,
d,n,f,l){h={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};d={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},
"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:function(c){return c*c}(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};var g={length:{baseUnit:"meters",units:h},area:{baseUnit:"square-meters",units:d},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},
"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},e=function(){var c={},b;for(b in g)for(var a in g[b].units)c[a]=b;return c}(),c;(function(c){function b(a){if(a=e[a])return a;
throw Error("unknown measure");}function a(a){return g[a].baseUnit}function d(a,c){void 0===c&&(c=null);c=c||b(a);return g[c].baseUnit===a}function h(a,c,e){if(c===e)return a;var f=b(c);if(f!==b(e))throw Error("incompatible units");a=d(c,f)?a:a*g[f].units[c].inBaseUnits;return d(e,f)?a:a/g[f].units[e].inBaseUnits}function p(a,b){return n.units[a][b]}function v(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");return f.format(a,{places:c})+" "+p(b,d)}function u(a,b){return 3E3>h(a,b,"meters")?"meters":
"kilometers"}function t(a,b){return 1E5>h(a,b,"meters")?"meters":"kilometers"}function r(a,b){return 1E3>h(a,b,"feet")?"feet":"miles"}function w(a,b){return 1E5>h(a,b,"feet")?"feet":"miles"}function z(a,b){return 3E6>h(a,b,"square-meters")?"square-meters":"square-kilometers"}function B(a,b){return 1E6>h(a,b,"square-feet")?"square-feet":"square-miles"}c.measureForUnit=b;c.baseUnitForMeasure=a;c.baseUnitForUnit=function(c){return a(b(c))};c.isBaseUnit=d;c.convertUnit=h;c.unitName=p;c.formatDecimal=
v;c.preferredMetricLengthUnit=u;c.preferredMetricVerticalLengthUnit=t;c.formatMetricLength=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=u(a,b);return v(h(a,b,e),e,c,d)};c.formatMetricVerticalLength=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=t(a,b);return v(h(a,b,e),e,c,d)};c.preferredImperialLengthUnit=r;c.preferredImperialVerticalLengthUnit=w;c.formatImperialLength=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=r(a,b);return v(h(a,b,e),
e,c,d)};c.formatImperialVerticalLength=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=w(a,b);return v(h(a,b,e),e,c,d)};c.preferredMetricAreaUnit=z;c.formatMetricArea=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=z(a,b);return v(h(a,b,e),e,c,d)};c.preferredImperialAreaUnit=B;c.formatImperialArea=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=B(a,b);return v(h(a,b,e),e,c,d)};c.lengthToDegrees=function(a,b,c){void 0===c&&(c=l.wgs84Radius);return h(a,
b,"meters")/(c*Math.PI/180)};c.formatDMS=function(a,b,d){void 0===d&&(d=2);a=c.convertUnit(a,b,"degrees");b=a-Math.floor(a);a-=b;b*=60;var e=b-Math.floor(b);b-=e;e*=60;return a.toFixed()+"\u00b0 "+b.toFixed()+"' "+e.toFixed(d)+'"'}})(c||(c={}));return c})},"esri/renderers/visualVariables/support/utils":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.isGraphic=function(d){return d&&"esri.Graphic"===d.declaredClass};d.lookupData=function(d,f){if(f){var h=
0,g=f.length-1;f.some(function(e,c){if(d<e)return g=c,!0;h=c;return!1});return[h,g,(d-f[h])/(f[g]-f[h])]}}})},"esri/symbols/support/unitConversionUtils":function(){define(["require","exports","../../renderers/support/utils"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.supportsUnit=function(d){return null!=n.meterIn[d]};d.getMetersPerUnit=function(d){return 1/(n.meterIn[d]||1)};d.supportedUnits=function(){var d=Object.keys(n.meterIn);d.sort();return d}()})},"esri/layers/support/ElevationQuery":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/extendsHelper ../../core/tsSupport/generatorHelper ../../core/arrayUtils ../../core/Error ../../core/promiseUtils ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polyline ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/webMercatorUtils ./ElevationSampler ./ElevationTile".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t){function r(a,b){var c=a.lods.length-1;0<b&&(a=e.findIndex(a.lods,function(a){return a.resolution<b}),0===a?c=0:0<a&&(c=a-1));return c}Object.defineProperty(d,"__esModule",{value:!0});h=function(){function a(){}a.prototype.queryAll=function(a,b,d){return f(this,void 0,void 0,function(){var e,f,h,k,m;return g(this,function(g){switch(g.label){case 0:a=d&&d.ignoreInvisibleLayers?a.filter(function(a){return a.visible}):a.slice();if(!a.length)return[2,p.reject(new c("elevation-query:invalid-layer",
"Elevation queries require at least one elevation layer to fetch tiles from"))];e=w.fromGeometry(b);f=!1;d&&d.returnSampleInfo||(f=!0);h=n({noDataValue:0,maximumAutoTileRequests:20},d,{returnSampleInfo:!0,demResolution:"auto"});return[4,this.query(a[a.length-1],e,h)];case 1:return k=g.sent(),[4,this._queryAllContinue(a,k,h)];case 2:return m=g.sent(),m.geometry=m.geometry.export(),f&&delete m.sampleInfo,[2,m]}})})};a.prototype.query=function(a,b,d){return f(this,void 0,void 0,function(){var e;return g(this,
function(f){switch(f.label){case 0:if(!a)return[2,p.reject(new c("elevation-query:invalid-layer","Elevation queries require an elevation layer to fetch tiles from"))];if(!b||!(b instanceof w)&&"point"!==b.type&&"multipoint"!==b.type&&"polyline"!==b.type)return[2,p.reject(new c("elevation-query:invalid-geometry","Only point, polyline and multipoint geometries can be used to query elevation"))];d=n({noDataValue:0,demResolution:"auto",minDemResolution:0,maximumAutoTileRequests:20,returnSampleInfo:!1},
d);e=new B(a,b.spatialReference,d);return[4,a.load()];case 1:return f.sent(),this._createGeometryDescriptor(e,b),[4,this._selectTiles(e)];case 2:return f.sent(),[4,this._populateElevationTiles(e)];case 3:return f.sent(),this._sampleGeometryWithElevation(e),[2,this._createQueryResult(e)]}})})};a.prototype.createSampler=function(a,b,d){return f(this,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:if(!a)return[2,p.reject(new c("elevation-query:invalid-layer","Elevation queries require an elevation layer to fetch tiles from"))];
if(!b||"extent"!==b.type)return[2,p.reject(new c("elevation-query:invalid-extent","Invalid or undefined extent"))];d=n({noDataValue:0,demResolution:"auto",maximumAutoTileRequests:20,returnSampleInfo:!1},d);return[4,this._createSampler(a,b,d)];case 1:return[2,e.sent()]}})})};a.prototype.createSamplerAll=function(a,b,d){return f(this,void 0,void 0,function(){var e,f,h;return g(this,function(g){switch(g.label){case 0:a=d&&d.ignoreInvisibleLayers?a.filter(function(a){return a.visible}):a.slice();if(!a.length)return[2,
p.reject(new c("elevation-query:invalid-layer","Elevation queries require at least one elevation layer to fetch tiles from"))];if(!b||"extent"!==b.type)return[2,p.reject(new c("elevation-query:invalid-extent","Invalid or undefined extent"))];e=n({noDataValue:0,maximumAutoTileRequests:20},d,{returnSampleInfo:!0,demResolution:"auto"});return[4,this._createSampler(a[a.length-1],b,e)];case 1:return f=g.sent(),[4,this._createSamplerAllContinue(a,b,f,e)];case 2:return h=g.sent(),[2,h]}})})};a.prototype._createSampler=
function(a,b,d,e){return f(this,void 0,void 0,function(){var f,h,k;return g(this,function(g){switch(g.label){case 0:return[4,a.load()];case 1:g.sent();f=b.spatialReference;h=a.tileInfo.spatialReference;if(!f.equals(h)){if(!v.canProject(f,h))return[2,p.reject(new c("elevation-query:invalid-extent","Extent spatial reference ("+f.wkid+") must be compatible with tile spatial reference ("+h.wkid+")"))];b=v.project(b,h)}k=new A(a,b,d,e);return[4,this._selectTiles(k)];case 2:return g.sent(),[4,this._populateElevationTiles(k)];
case 3:return g.sent(),[2,new u.MultiTileElevationSampler(k.elevationTiles,k.layer.tileInfo,k.options.noDataValue)]}})})};a.prototype._createSamplerAllContinue=function(a,b,c,d){return f(this,void 0,void 0,function(){var e,f,h,m;return g(this,function(g){switch(g.label){case 0:a.pop();if(!a.length)return[2,c];e=c.samplers.map(function(a){return k.fromExtent(a.extent)});return[4,this._createSampler(a[a.length-1],b,d,e)];case 1:f=g.sent();if(0===f.samplers.length)return[2,c];h=c.samplers.concat(f.samplers);
m=new u.MultiTileElevationSampler(h,d.noDataValue);return[4,this._createSamplerAllContinue(a,b,m,d)];case 2:return[2,g.sent()]}})})};a.prototype._queryAllContinue=function(a,b,c){return f(this,void 0,void 0,function(){var d,e,f,h,k,m,l;return g(this,function(g){switch(g.label){case 0:d=a.pop();b.geometry.coordinates.forEach(function(a,c){0<=b.sampleInfo[c].demResolution&&!b.sampleInfo[c].source&&(b.sampleInfo[c].source=d)});if(!a.length)return[2,b];e=b.geometry.coordinates;f=[];h=[];for(k=0;k<e.length;k++)0>
b.sampleInfo[k].demResolution&&(f.push(e[k]),h.push(k));if(0===f.length)return[2,b];m=b.geometry.clone(f);return[4,this.query(a[a.length-1],m,c)];case 1:return l=g.sent(),h.forEach(function(a,c){e[a].z=l.geometry.coordinates[c].z;b.sampleInfo[a].demResolution=l.sampleInfo[c].demResolution}),[4,this._queryAllContinue(a,b,c)];case 2:return[2,g.sent()]}})})};a.prototype._createQueryResult=function(a){var b={geometry:(a.outSpatialReference.equals(a.geometry.spatialReference)?a.geometry:a.geometry.project(a.outSpatialReference)).export(),
noDataValue:a.options.noDataValue};a.options.returnSampleInfo&&(b.sampleInfo=this._extractSampleInfo(a));a.geometry.coordinates.forEach(function(a){a.tile=null;a.elevationTile=null});return b};a.prototype._createGeometryDescriptor=function(a,b){var d,e=a.layer.tileInfo.spatialReference;d=b instanceof w?b.project(e):v.project(b,e);if(!d)throw new c("elevation-query:spatial-reference-mismatch","Cannot query elevation in '"+b.spatialReference.wkid+"' on an elevation service in '"+e.wkid+"'");a.geometry=
w.fromGeometry(d)};a.prototype._selectTiles=function(a){return f(this,void 0,void 0,function(){var b;return g(this,function(d){switch(d.label){case 0:b=a.options.demResolution;"geometry"===a.type&&this._preselectOutsideLayerExtent(a);if("number"!==typeof b)return[3,1];this._selectTilesClosestResolution(a);return[3,6];case 1:return"finest-contiguous"!==b?[3,3]:[4,this._selectTilesFinestContiguous(a)];case 2:return d.sent(),[3,6];case 3:return"auto"!==b?[3,5]:[4,this._selectTilesAuto(a)];case 4:return d.sent(),
[3,6];case 5:throw new c("elevation-query:invalid-dem-resolution","Invalid dem resolution value '"+b+'\', expected a number, "finest-contiguous" or "auto"');case 6:return[2]}})})};a.prototype._preselectOutsideLayerExtent=function(a){var b=new t.ElevationTile(null);b.sample=function(b,c){return a.options.noDataValue};a.outsideExtentTile=b;var c=a.layer.fullExtent;a.geometry.coordinates.forEach(function(a){var d=a.x,e=a.y;if(d<c.xmin||d>c.xmax||e<c.ymin||e>c.ymax)a.elevationTile=b})};a.prototype._selectTilesClosestResolution=
function(a){var b=this._findNearestDemResolutionLODIndex(a.layer.tileInfo,a.options.demResolution);a.selectTilesAtLOD(b)};a.prototype._findNearestDemResolutionLODIndex=function(a,b){var c=q.getMetersPerUnitForSR(a.spatialReference);b/=c;for(var c=a.lods[0],d=0,e=1;e<a.lods.length;e++){var f=a.lods[e];Math.abs(f.resolution-b)<Math.abs(c.resolution-b)&&(c=f,d=e)}return d};a.prototype._selectTilesFinestContiguous=function(a){return f(this,void 0,void 0,function(){var b;return g(this,function(c){switch(c.label){case 0:return b=
r(a.layer.tileInfo,a.options.minDemResolution),[4,this._selectTilesFinestContiguousAt(a,b)];case 1:return c.sent(),[2]}})})};a.prototype._selectTilesFinestContiguousAt=function(a,b){return f(this,void 0,void 0,function(){var d,e,f;return g(this,function(g){switch(g.label){case 0:d=a.layer;a.selectTilesAtLOD(b);if(0>b)return[2];e=d.tilemapCache;f=a.getTilesToFetch();g.label=1;case 1:return g.trys.push([1,6,,8]),e?[4,p.all(f.map(function(a){return e.fetchAvailability(a.level,a.row,a.col)}))]:[3,3];
case 2:return g.sent(),[3,5];case 3:return[4,this._populateElevationTiles(a)];case 4:g.sent();if(!a.allElevationTilesFetched())throw a.clearElevationTiles(),new c("elevation-query:has-unavailable-tiles");g.label=5;case 5:return[3,8];case 6:return g.sent(),[4,this._selectTilesFinestContiguousAt(a,b-1)];case 7:return g.sent(),[3,8];case 8:return[2]}})})};a.prototype._populateElevationTiles=function(a){return f(this,void 0,void 0,function(){var b,c,d,e;return g(this,function(f){switch(f.label){case 0:return b=
a.options.noDataValue,c=a.getTilesToFetch(),d={},e=c.map(function(c){return a.layer.fetchTile(c.level,c.row,c.col,b).then(function(a){return d[c.id]=new t.ElevationTile(c,a)})}),[4,p.eachAlways(e)];case 1:return f.sent(),a.populateElevationTiles(d),[2]}})})};a.prototype._selectTilesAuto=function(a){return f(this,void 0,void 0,function(){var b,c,d,e,h=this;return g(this,function(m){switch(m.label){case 0:this._selectTilesAutoFinest(a);this._reduceTilesForMaximumRequests(a);b=a.layer.tilemapCache;if(!b)return[2,
this._selectTilesAutoPrefetchUpsample(a)];c=a.getTilesToFetch();d={};e=c.map(function(a){return f(h,void 0,void 0,function(){var c;return g(this,function(e){switch(e.label){case 0:c={id:null,level:0,row:0,col:0,extent:k.create()},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,b.fetchAvailabilityUpsample(a.level,a.row,a.col,c)];case 2:return e.sent(),d[a.id]=c,[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}})})});return[4,p.all(e)];case 1:return m.sent(),a.remapTiles(d),[2]}})})};a.prototype._reduceTilesForMaximumRequests=
function(a){var b=a.layer.tileInfo,c=0,d={},e=function(a){a.id in d?d[a.id]++:(d[a.id]=1,c++)},f=function(a){var b=d[a.id];1===b?(delete d[a.id],c--):d[a.id]=b-1};a.forEachTileToFetch(e,f);for(var g=!0;g&&(g=!1,a.forEachTileToFetch(function(d){c<=a.options.maximumAutoTileRequests||(f(d),b.upsampleTile(d)&&(g=!0),e(d))},f),g););};a.prototype._selectTilesAutoFinest=function(a){var b=r(a.layer.tileInfo,a.options.minDemResolution);a.selectTilesAtLOD(b,a.options.maximumAutoTileRequests)};a.prototype._selectTilesAutoPrefetchUpsample=
function(a){return f(this,void 0,void 0,function(){var b,c;return g(this,function(d){switch(d.label){case 0:return b=a.layer.tileInfo,[4,this._populateElevationTiles(a)];case 1:return d.sent(),c=!1,a.forEachTileToFetch(function(a,d){b.upsampleTile(a)?c=!0:d()}),c?[4,this._selectTilesAutoPrefetchUpsample(a)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[2]}})})};a.prototype._sampleGeometryWithElevation=function(a){a.geometry.coordinates.forEach(function(b){var c=b.elevationTile,d=a.options.noDataValue;
c&&(c=c.sample(b.x,b.y),void 0!==c?d=c:b.elevationTile=null);b.z=d})};a.prototype._extractSampleInfo=function(a){var b=a.layer.tileInfo,c=q.getMetersPerUnitForSR(b.spatialReference);return a.geometry.coordinates.map(function(d){var e=-1;d.elevationTile&&d.elevationTile!==a.outsideExtentTile&&(e=b.lodAt(d.elevationTile.tile.level).resolution*c);return{demResolution:e}})};return a}();d.ElevationQuery=h;var w=function(){function c(){}c.prototype.export=function(){return this._exporter(this.coordinates,
this.spatialReference)};c.prototype.clone=function(a){var b=this,d=new c;d.geometry=this.geometry;d.spatialReference=this.spatialReference;d.coordinates=a||this.coordinates.map(function(a){return b._cloneCoordinate(a)});d._exporter=this._exporter;return d};c.prototype.project=function(a){var b=this;if(this.spatialReference.equals(a))return this.clone();if(v.canProject(this.spatialReference,a)){var c=a.isWGS84?v.xyToLngLat:v.lngLatToXY,d=[0,0],e=this.coordinates.map(function(a){a=b._cloneCoordinate(a);
c(a.x,a.y,d);a.x=d[0];a.y=d[1];return a}),e=this.clone(e);e.spatialReference=a;return e}return null};c.prototype._cloneCoordinate=function(a){return{x:a.x,y:a.y,z:a.z,m:a.m,tile:null,elevationTile:null}};c.fromGeometry=function(d){var e=new c;e.geometry=d;e.spatialReference=d.spatialReference;if(d instanceof c)e.coordinates=d.coordinates.map(function(a){return e._cloneCoordinate(a)}),e._exporter=function(a,b){a=d.clone(a);a.spatialReference=b;return a};else switch(d.type){case "point":e.coordinates=
d.hasM?[{x:d.x,y:d.y,m:d.m}]:[{x:d.x,y:d.y}];e._exporter=function(b,c){return d.hasM?new a(b[0].x,b[0].y,b[0].z,b[0].m,c):new a(b[0].x,b[0].y,b[0].z,c)};break;case "multipoint":e.coordinates=d.points.map(function(a){return d.hasM?{x:a[0],y:a[1],m:a[d.hasZ?3:2]}:{x:a[0],y:a[1]}});e._exporter=function(a,c){return d.hasM?new b({points:a.map(function(a){return[a.x,a.y,a.z,a.m]}),hasZ:!0,hasM:!0,spatiaReference:c}):new b(a.map(function(a){return[a.x,a.y,a.z]}),c)};break;case "polyline":var f=[],g=[],h=
0;d.paths.forEach(function(a){g.push([h,h+a.length]);h+=a.length;f.push.apply(f,a.map(function(a){return d.hasM?{x:a[0],y:a[1],m:a[d.hasZ?3:2]}:{x:a[0],y:a[1]}}))});e.coordinates=f;e._exporter=function(a,b){var c=d.hasM?a.map(function(a){return[a.x,a.y,a.z,a.m]}):a.map(function(a){return[a.x,a.y,a.z]});a=g.map(function(a){return c.slice(a[0],a[1])});return new m({paths:a,hasM:d.hasM,hasZ:!0,spatialReference:b})}}return e};return c}();d.GeometryDescriptor=w;var z=function(){return function(a,b){this.layer=
a;this.options=b}}(),B=function(a){function b(b,c,d){b=a.call(this,b,d)||this;b.type="geometry";b.outSpatialReference=c;return b}l(b,a);b.prototype.selectTilesAtLOD=function(a,b){if(0>a)this.geometry.coordinates.forEach(function(a){return a.tile=null});else{var c=this.layer.tileInfo,d=c.lods[a].level;this.geometry.coordinates.forEach(function(a){a.tile=c.tileAt(d,a.x,a.y)})}};b.prototype.allElevationTilesFetched=function(){return!this.geometry.coordinates.some(function(a){return!a.elevationTile})};
b.prototype.clearElevationTiles=function(){for(var a=0,b=this.geometry.coordinates;a<b.length;a++){var c=b[a];c.elevationTile!==this.outsideExtentTile&&(c.elevationTile=null)}};b.prototype.populateElevationTiles=function(a){for(var b=0,c=this.geometry.coordinates;b<c.length;b++){var d=c[b];!d.elevationTile&&d.tile&&(d.elevationTile=a[d.tile.id])}};b.prototype.remapTiles=function(a){for(var b=0,c=this.geometry.coordinates;b<c.length;b++){var d=c[b];d.tile=a[d.tile.id]}};b.prototype.getTilesToFetch=
function(){for(var a={},b=[],c=0,d=this.geometry.coordinates;c<d.length;c++){var e=d[c],f=e.tile;e.elevationTile||!e.tile||a[f.id]||(a[f.id]=f,b.push(f))}return b};b.prototype.forEachTileToFetch=function(a,b){b=function(b){b.tile&&!b.elevationTile&&a(b.tile,function(){return b.tile=null})};for(var c=0,d=this.geometry.coordinates;c<d.length;c++)b(d[c])};return b}(z),A=function(a){function b(b,c,d,e){d=a.call(this,b,d)||this;d.type="extent";d.elevationTiles=[];d.candidateTiles=[];d.fetchedCandidates=
new Set;d.extent=c.intersection(b.fullExtent);d.maskExtents=e;return d}l(b,a);b.prototype.selectTilesAtLOD=function(a,b){b=this._maximumLodForRequests(b);a=Math.min(b,a);0>a?this.candidateTiles.length=0:this._selectCandidateTilesCoveringExtentAt(a)};b.prototype._maximumLodForRequests=function(a){var b=this.layer.tileInfo;if(!a)return b.lods.length-1;for(var c=this.extent,d=b.lods.length-1;0<=d;d--){var e=b.lods[d];if(Math.ceil(c.width/(e.resolution*b.size[0]))*Math.ceil(c.height/(e.resolution*b.size[1]))<=
a)return d}return-1};b.prototype.allElevationTilesFetched=function(){return this.candidateTiles.length===this.elevationTiles.length};b.prototype.clearElevationTiles=function(){this.elevationTiles.length=0;this.fetchedCandidates.clear()};b.prototype.populateElevationTiles=function(a){for(var b=0,c=this.candidateTiles;b<c.length;b++){var d=c[b],e=a[d.id];e&&(this.fetchedCandidates.add(d),this.elevationTiles.push(e))}};b.prototype.remapTiles=function(a){this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles.map(function(b){return a[b.id]}))};
b.prototype.getTilesToFetch=function(){return this.candidateTiles};b.prototype.forEachTileToFetch=function(a,b){var c=this,d=this.candidateTiles;this.candidateTiles=[];d.forEach(function(d){if(c.fetchedCandidates.has(d))b&&b(d);else{var e=!1;a(d,function(){return e=!0});e?b&&b(d):c.candidateTiles.push(d)}});this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles,b)};b.prototype._uniqueNonOverlappingTiles=function(a,b){for(var c={},d=[],e=0;e<a.length;e++){var f=a[e];c[f.id]?b&&b(f):
(c[f.id]=f,d.push(f))}var g=d.sort(function(a,b){return a.level-b.level});return g.filter(function(a,c){for(var d=0;d<c;d++)if(k.contains(g[d].extent,a.extent))return b&&b(a),!1;return!0})};b.prototype._selectCandidateTilesCoveringExtentAt=function(a){this.candidateTiles.length=0;var b=this.layer.tileInfo,c=b.lods[a],d=this.extent;a=b.tileAt(c.level,d.xmin,d.ymin);for(var e=Math.ceil((d.xmax-a.extent[0])/(c.resolution*b.size[0])),c=Math.ceil((d.ymax-a.extent[1])/(c.resolution*b.size[1])),d=0;d<c;d++)for(var f=
0;f<e;f++){var g={id:null,level:a.level,row:a.row-d,col:a.col+f};b.updateTileInfo(g);this._tileIsMasked(g)||this.candidateTiles.push(g)}};b.prototype._tileIsMasked=function(a){return this.maskExtents?this.maskExtents.some(function(b){return k.contains(b,a.extent)}):!1};return b}(z);d.getFinestLodIndex=r;d.default=h})},"esri/layers/support/ElevationSampler":function(){define("require exports ../../geometry ../../core/compilerUtils ../../core/Logger ../../geometry/support/aaBoundingRect ../../geometry/support/contains ../../geometry/support/scaleUtils ../../geometry/support/webMercatorUtils".split(" "),
function(h,d,n,f,l,g,e,c,p){function b(b,c){var d=a(b,c.spatialReference);if(!d)return null;switch(b.type){case "point":b.z=c.elevationAt(d)||0;break;case "polyline":q.spatialReference=d.spatialReference;for(var e=b.hasM&&!b.hasZ,g=0;g<b.paths.length;g++)for(var h=b.paths[g],k=d.paths[g],m=0;m<h.length;m++){var l=h[m],p=k[m];q.x=p[0];q.y=p[1];p=c.elevationAt(q)||0;e&&(l[3]=l[2]);l[2]=p}b.hasZ=!0;break;case "multipoint":q.spatialReference=d.spatialReference;e=b.hasM&&!b.hasZ;for(g=0;g<b.points.length;g++)h=
b.points[g],k=d.points[g],q.x=k[0],q.y=k[1],k=c.elevationAt(q)||0,e&&(h[3]=h[2]),h[2]=k;b.hasZ=!0;break;default:f.neverReached(b)}return b}function a(a,b){var c=a.spatialReference;return c.equals(b)?a:p.canProject(c,b)?p.project(a,b):(m.error("Cannot project geometry spatial reference (wkid:"+c.wkid+") to elevation sampler spatial reference (wkid:"+b.wkid+")"),null)}Object.defineProperty(d,"__esModule",{value:!0});var m=l.getLogger("esri.layers.support.ElevationSampler"),k=function(){function d(a,
b,d){this.tile=a;this.noDataValue=d;this.extent=g.toExtent(a.tile.extent,b.spatialReference);d=c.getMetersPerUnitForSR(b.spatialReference);a=b.lodAt(a.tile.level).resolution*d;this.demResolution={min:a,max:a}}Object.defineProperty(d.prototype,"spatialReference",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0});d.prototype.contains=function(b){b=a(b,this.spatialReference);return e.extentContainsPoint(this.extent,b)};d.prototype.elevationAt=function(b){var c=a(b,this.spatialReference);
if(!c)return null;if(!this.contains(b)){var d=this.extent;m.warn("#elevationAt()","Point used to sample elevation ("+b.x+", "+b.y+") is outside of the sampler extent ("+(d.xmin+", "+d.ymin+", "+d.xmax+", "+d.ymax)+")")}return this.tile.sample(c.x,c.y)};d.prototype.queryElevation=function(a){return b(a.clone(),this)};d.prototype.on=function(a,b){return v};return d}();d.TileElevationSampler=k;h=function(){function c(a,b,c){var d=this,e;"number"===typeof b?(this.noDataValue=b,e=null):(e=b,this.noDataValue=
c);this.samplers=e?a.map(function(a){return new k(a,e,d.noDataValue)}):a;if(a=this.samplers[0])for(this.extent=a.extent.clone(),a=a.demResolution,this.demResolution={min:a.min,max:a.max},a=1;a<this.samplers.length;a++)b=this.samplers[a],this.extent.union(b.extent),this.demResolution.min=Math.min(this.demResolution.min,b.demResolution.min),this.demResolution.max=Math.max(this.demResolution.max,b.demResolution.max);else this.extent=g.toExtent(g.create(),e.spatialReference),this.demResolution={min:0,
max:0}}Object.defineProperty(c.prototype,"spatialReference",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0});c.prototype.elevationAt=function(b){var c=a(b,this.spatialReference);if(!c)return null;for(var d=0,e=this.samplers;d<e.length;d++){var f=e[d];if(f.contains(c))return f.elevationAt(c)}m.warn("#elevationAt()","Point used to sample elevation ("+b.x+", "+b.y+") is outside of the sampler");return null};c.prototype.queryElevation=function(a){return b(a.clone(),
this)};c.prototype.on=function(a,b){return v};return c}();d.MultiTileElevationSampler=h;d.updateGeometryElevation=b;var q=new n.Point,v={remove:function(){}}})},"esri/layers/support/ElevationTile":function(){define(["require","exports"],function(h,d){function n(d,h,g){var e=d.safeWidth,c=d.width,f=d.values,b=d.noDataValue;g=d.dy*(d.y1-g);g=0>g?0:g>e?e:g;d=d.dx*(h-d.x0);d=0>d?0:d>e?e:d;e=Math.floor(g);h=Math.floor(d);var a=e*c+h,m=a+c,k=f[a],c=f[m],a=f[a+1],f=f[m+1];if(k!==b&&c!==b&&a!==b&&f!==b)return b=
d-h,d=k+(a-k)*b,d+(c+(f-c)*b-d)*(g-e)}Object.defineProperty(d,"__esModule",{value:!0});h=function(){function d(d,f){this.tile=d;this.update(f)}d.prototype.update=function(d){if(d){var f=this.tile.extent;this.samplerData={values:d.values,width:d.width,height:d.height,safeWidth:.99999999*(d.width-1),noDataValue:d.noDataValue,dx:(d.width-1)/(f[2]-f[0]),dy:(d.width-1)/(f[3]-f[1]),x0:f[0],y1:f[3]}}else this.samplerData=null};d.prototype.sample=function(d,f){if(this.samplerData)return n(this.samplerData,
d,f)};return d}();d.ElevationTile=h;d.sample=n;d.default=h})},"esri/layers/support/rasterFormats/LercCodec":function(){define([],function(){var h={defaultNoDataValue:-3.4027999387901484E38,decode:function(n,f){var l;f=f||{};var g=f.inputOffset||0,e=f.encodedMaskData||null===f.encodedMaskData,c={},p=new Uint8Array(n,g,10);c.fileIdentifierString=String.fromCharCode.apply(null,p);if("CntZImage"!=c.fileIdentifierString.trim())throw"Unexpected file identifier string: "+c.fileIdentifierString;g+=10;p=new DataView(n,
g,24);c.fileVersion=p.getInt32(0,!0);c.imageType=p.getInt32(4,!0);c.height=p.getUint32(8,!0);c.width=p.getUint32(12,!0);c.maxZError=p.getFloat64(16,!0);g+=24;if(!e)if(p=new DataView(n,g,16),c.mask={},c.mask.numBlocksY=p.getUint32(0,!0),c.mask.numBlocksX=p.getUint32(4,!0),c.mask.numBytes=p.getUint32(8,!0),c.mask.maxValue=p.getFloat32(12,!0),g+=16,0<c.mask.numBytes){var e=new Uint8Array(Math.ceil(c.width*c.height/8)),p=new DataView(n,g,c.mask.numBytes),b=p.getInt16(0,!0),a=2,m=0;do{if(0<b)for(;b--;)e[m++]=
p.getUint8(a++);else for(var k=p.getUint8(a++),b=-b;b--;)e[m++]=k;b=p.getInt16(a,!0);a+=2}while(a<c.mask.numBytes);if(-32768!==b||m<e.length)throw"Unexpected end of mask RLE encoding";c.mask.bitset=e;g+=c.mask.numBytes}else 0===(c.mask.numBytes|c.mask.numBlocksY|c.mask.maxValue)&&(e=new Uint8Array(Math.ceil(c.width*c.height/8)),c.mask.bitset=e);p=new DataView(n,g,16);c.pixels={};c.pixels.numBlocksY=p.getUint32(0,!0);c.pixels.numBlocksX=p.getUint32(4,!0);c.pixels.numBytes=p.getUint32(8,!0);c.pixels.maxValue=
p.getFloat32(12,!0);g+=16;e=c.pixels.numBlocksX;p=c.pixels.numBlocksY;e+=0<c.width%e?1:0;b=p+(0<c.height%p?1:0);c.pixels.blocks=Array(e*b);a=1E9;for(k=m=0;k<b;k++)for(var q=0;q<e;q++){var v=0,p=new DataView(n,g,Math.min(10,n.byteLength-g)),u={};c.pixels.blocks[m++]=u;var t=p.getUint8(0);v++;u.encoding=t&63;if(3<u.encoding)throw"Invalid block encoding ("+u.encoding+")";if(2===u.encoding)g++,a=Math.min(a,0);else{if(0!==t&&2!==t){t>>=6;u.offsetType=t;if(2===t)u.offset=p.getInt8(1),v++;else if(1===t)u.offset=
p.getInt16(1,!0),v+=2;else if(0===t)u.offset=p.getFloat32(1,!0),v+=4;else throw"Invalid block offset type";a=Math.min(u.offset,a);if(1===u.encoding)if(t=p.getUint8(v),v++,u.bitsPerPixel=t&63,t>>=6,u.numValidPixelsType=t,2===t)u.numValidPixels=p.getUint8(v),v++;else if(1===t)u.numValidPixels=p.getUint16(v,!0),v+=2;else if(0===t)u.numValidPixels=p.getUint32(v,!0),v+=4;else throw"Invalid valid pixel count type";}g+=v;if(3!=u.encoding)if(0===u.encoding){p=(c.pixels.numBytes-1)/4;if(p!==Math.floor(p))throw"uncompressed block has invalid length";
v=new ArrayBuffer(4*p);t=new Uint8Array(v);t.set(new Uint8Array(n,g,4*p));v=new Float32Array(v);for(t=0;t<v.length;t++)a=Math.min(a,v[t]);u.rawData=v;g+=4*p}else 1===u.encoding&&(p=Math.ceil(u.numValidPixels*u.bitsPerPixel/8),v=new ArrayBuffer(4*Math.ceil(p/4)),t=new Uint8Array(v),t.set(new Uint8Array(n,g,p)),u.stuffedData=new Uint32Array(v),g+=p)}}c.pixels.minValue=a;c.eofOffset=g;n=null!=f.noDataValue?f.noDataValue:h.defaultNoDataValue;var e=f.encodedMaskData,u=f.returnMask,p=0,b=c.pixels.numBlocksX,
a=c.pixels.numBlocksY,m=Math.floor(c.width/b),k=Math.floor(c.height/a),q=2*c.maxZError,e=e||(c.mask?c.mask.bitset:null),r,g=new (f.pixelType||Float32Array)(c.width*c.height);u&&e&&(r=new Uint8Array(c.width*c.height));for(var u=new Float32Array(m*k),w,z,v=0;v<=a;v++)if(t=v!==a?k:c.height%a,0!==t)for(var B=0;B<=b;B++){var A=B!==b?m:c.width%b;if(0!==A){var x=v*c.width*k+B*m,C=c.width-A,y=c.pixels.blocks[p],E,D;if(2>y.encoding){if(0===y.encoding)E=y.rawData;else{E=y.stuffedData;D=y.bitsPerPixel;w=y.numValidPixels;
z=y.offset;var F=q,L=u,P=c.pixels.maxValue,M=(1<<D)-1,I=0,ba=void 0,K=0,S=void 0,Q=void 0,J=Math.ceil((P-z)/F);E[E.length-1]<<=8*(4*E.length-Math.ceil(D*w/8));for(ba=0;ba<w;ba++)0===K&&(Q=E[I++],K=32),K>=D?(S=Q>>>K-D&M,K-=D):(K=D-K,S=(Q&M)<<K&M,Q=E[I++],K=32-K,S+=Q>>>K),L[ba]=S<J?z+S*F:P;E=u}D=0}else l=2===y.encoding?0:y.offset;var R;if(e)for(z=0;z<t;z++){x&7&&(R=e[x>>3],R<<=x&7);for(w=0;w<A;w++)x&7||(R=e[x>>3]),R&128?(r&&(r[x]=1),g[x++]=2>y.encoding?E[D++]:l):(r&&(r[x]=0),g[x++]=n),R<<=1;x+=C}else if(2>
y.encoding)for(z=0;z<t;z++){for(w=0;w<A;w++)g[x++]=E[D++];x+=C}else for(z=0;z<t;z++)if(g.fill)g.fill(l,x,x+A),x+=A+C;else{for(w=0;w<A;w++)g[x++]=l;x+=C}if(1===y.encoding&&D!==y.numValidPixels)throw"Block and Mask do not match";p++}}l=r;r={width:c.width,height:c.height,pixelData:g,minValue:c.pixels.minValue,maxValue:c.pixels.maxValue,noDataValue:n};l&&(r.maskData=l);f.returnEncodedMask&&c.mask&&(r.encodedMaskData=c.mask.bitset?c.mask.bitset:null);if(f.returnFileInfo&&(r.fileInfo=d(c),f.computeUsedBitDepths)){f=
r.fileInfo;l=c.pixels.numBlocksX*c.pixels.numBlocksY;R={};for(E=0;E<l;E++)D=c.pixels.blocks[E],0===D.encoding?R.float32=!0:1===D.encoding?R[D.bitsPerPixel]=!0:R[0]=!0;c=Object.keys(R);f.bitDepths=c}return r}},d=function(d){return{fileIdentifierString:d.fileIdentifierString,fileVersion:d.fileVersion,imageType:d.imageType,height:d.height,width:d.width,maxZError:d.maxZError,eofOffset:d.eofOffset,mask:d.mask?{numBlocksX:d.mask.numBlocksX,numBlocksY:d.mask.numBlocksY,numBytes:d.mask.numBytes,maxValue:d.mask.maxValue}:
null,pixels:{numBlocksX:d.pixels.numBlocksX,numBlocksY:d.pixels.numBlocksY,numBytes:d.pixels.numBytes,maxValue:d.pixels.maxValue,minValue:d.pixels.minValue,noDataValue:this.noDataValue}}};return h})},"esri/layers/support/types":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.isOfType=function(d,f){d=d.constructor._meta;if(!d||!d.bases)return!1;d=d.bases;var h=Array.isArray(f);return d.some(function(d){d=d.__accessorMetadata__;if(!d)return!1;
d=d.properties;if(!d||!d.type||!d.type.value)return!1;d=d.type.value;return h?-1!==f.indexOf(d):d===f})}})},"esri/core/CollectionFlattener":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Collection ./Handles ./accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(b){b=c.call(this)||this;b._handles=new g;b.root=null;b.refresh=b.refresh.bind(b);b.updateCollections=b.updateCollections.bind(b);return b}n(d,c);d.prototype.initialize=
function(){var b=this;this._handles.add(this.rootCollectionNames.map(function(a){return b.watch("root."+a,b.updateCollections,!0)}));this.updateCollections()};d.prototype.destroy=function(){this.root=null;this.refresh();this._handles.destroy();this._handles=null};d.prototype.updateCollections=function(){var b=this;this._collections=this.rootCollectionNames.map(function(a){return b.get("root."+a)}).filter(function(a){return null!=a});this.refresh()};d.prototype.refresh=function(){var b=this._handles;
b.remove("collections");this.removeAll();for(var a=this._collections.slice(),c=0,d=this._collections;c<d.length;c++)this._processCollection(a,this,d[c]);for(c=0;c<a.length;c++)b.add(a[c].on("after-changes",this.refresh),"collections")};d.prototype._createNewInstance=function(b){return new l(b)};d.prototype._processCollection=function(b,a,c){var d=this;c&&(b.push(c),c.forEach(function(c){c&&(a.push(c),d._processCollection(b,a,d.getChildrenFunction(c)))}))};f([e.property()],d.prototype,"rootCollectionNames",
void 0);f([e.property()],d.prototype,"root",void 0);f([e.property()],d.prototype,"getChildrenFunction",void 0);return d=f([e.subclass("esri.core.CollectionFlattener")],d)}(e.declared(l))})},"esri/support/basemapUtils":function(){define("require exports ../Basemap ../core/Collection ../core/Logger ../core/urlUtils ../core/accessorSupport/ensureType ./basemapDefinitions".split(" "),function(h,d,n,f,l,g,e,c){function p(a,b){var d;if("string"===typeof a){if(!(a in c))return b=Object.keys(c).map(function(a){return'"'+
a+'"'}).join(", "),z.warn("Unable to find basemap definition for: "+a+". Try one of these: "+b),null;b&&(d=b[a]);d||(d=n.fromId(a),b&&(b[a]=d))}else d=e.default(n,a);return d}function b(a,b){return a.map(function(a){return b.find(function(b){return r(k(a),k(b))})||a})}function a(a){return a?!a.loaded&&a.resourceInfo?q(a.resourceInfo.data):{baseLayers:m(a.baseLayers),referenceLayers:m(a.referenceLayers)}:null}function m(a){return(f.isCollection(a)?a.toArray():a).map(k)}function k(a){return{type:a.type,
url:w(a.urlTemplate||a.url||a.styleUrl),minScale:null!=a.minScale?a.minScale:0,maxScale:null!=a.maxScale?a.maxScale:0,opacity:null!=a.opacity?a.opacity:1,visible:null!=a.visible?!!a.visible:!0}}function q(a){return a?{baseLayers:v(a.baseMapLayers.filter(function(a){return!a.isReference})),referenceLayers:v(a.baseMapLayers.filter(function(a){return a.isReference}))}:null}function v(a){return a.map(function(a){var b;switch(a.layerType){case "VectorTileLayer":b="vector-tile";break;case "ArcGISTiledMapServiceLayer":b=
"tile";break;default:b="unknown"}return{type:b,url:w(a.templateUrl||a.urlTemplate||a.styleUrl||a.url),minScale:null!=a.minScale?a.minScale:0,maxScale:null!=a.maxScale?a.maxScale:0,opacity:null!=a.opacity?a.opacity:1,visible:null!=a.visibility?!!a.visibility:!0}})}function u(a,b,c){return null!=a!==(null!=b)?"not-equal":a?t(a.baseLayers,b.baseLayers)?t(a.referenceLayers,b.referenceLayers)?"equal":c.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function t(a,b){if(a.length!==
b.length)return!1;for(var c=0;c<a.length;c++)if(!r(a[c],b[c]))return!1;return!0}function r(a,b){return a.type===b.type&&a.url===b.url&&a.minScale===b.minScale&&a.maxScale===b.maxScale&&a.visible===b.visible&&a.opacity===b.opacity}function w(a){return a?g.normalize(a).replace(/^\s*https?:/i,"").toLowerCase():""}Object.defineProperty(d,"__esModule",{value:!0});var z=l.getLogger("esri.support.basemapUtils");d.createCache=function(){return{}};d.ensureType=p;d.clonePreservingTiledLayers=function(a,c){void 0===
c&&(c=null);a=p(a);if(!a)return null;var d=new n({id:a.id,title:a.title,baseLayers:a.baseLayers.slice(),referenceLayers:a.referenceLayers.slice()});c&&(d.baseLayers=b(d.baseLayers,c.baseLayers),d.referenceLayers=b(d.referenceLayers,c.referenceLayers));d.load();d.portalItem=a.portalItem;return d};d.getWellKnownBasemapId=function(b){var d=null;b=a(b);for(var e in c){var f=q(c[e]),f=u(b,f,{mustMatchReferences:!1});if("equal"===f){d=e;break}else"base-layers-equal"===f&&(d=e)}return d};d.contentEquals=
function(b,c){if(b===c)return!0;b=a(b);c=a(c);return"equal"===u(b,c,{mustMatchReferences:!0})}})},"esri/support/groundUtils":function(){define("require exports ../Ground ../core/Logger ../core/accessorSupport/ensureType ../layers/ElevationLayer".split(" "),function(h,d,n,f,l,g){Object.defineProperty(d,"__esModule",{value:!0});var e=f.getLogger("esri.support.groundUtils");d.groundElevationLayers={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"},
"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer"}};d.ensureType=function(c){var f;"string"===typeof c?c in d.groundElevationLayers?(c=d.groundElevationLayers[c],c=new g({id:c.id,url:c.url}),f=new n({layers:[c]})):e.warn("Unable to find ground definition for: "+c+'. Try "world-elevation"'):f=l.default(n,c);return f}})},"esri/support/LayersMixin":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/collectionUtils ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ../layers/Layer".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a){function m(a,b,c){for(var d,e=0,f=a.length;e<f;e++)if(d=a.getItemAt(e),d[b]===c||d&&null!=d.layers&&(d=m(d.layers,b,c)))return d}var k=g.ofType(a),q=c.getLogger("esri.support.LayersMixin");return function(c){function d(a){var b=c.call(this,a)||this;b.layers=new k;b.layers.on("after-add",function(a){a=a.item;a.parent&&a.parent!==b&&"remove"in a.parent&&a.parent.remove(a);a.parent=b;b.layerAdded(a);"elevation"===a.type&&q.error("Layer '"+a.title+", id:"+a.id+"' of type '"+
a.type+"' is not supported as an operational layer and will therefore be ignored.")});b.layers.on("after-remove",function(a){a=a.item;a.parent=null;b.layerRemoved(a)});return b}n(d,c);d.prototype.destroy=function(){this.layers.drain(this.layerRemoved,this)};Object.defineProperty(d.prototype,"layers",{set:function(a){this._set("layers",e.referenceSetter(a,this._get("layers"),k))},enumerable:!0,configurable:!0});d.prototype.findLayerById=function(a){return m(this.layers,"id",a)};d.prototype.add=function(b,
c){var d=this,e=this.layers;c=e.getNextIndex(c);b instanceof a?(b.parent===this&&this.reorder(b,c),e.add(b,c)):p.isThenable(b)?b.then(function(a){d.destroyed||d.add(a,c)}):q.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")};d.prototype.addMany=function(a,b){var c=this,d=this.layers;b=d.getNextIndex(b);a.slice().forEach(function(a){a.parent===c?c.reorder(a,b):(d.add(a,b),b+=1)})};d.prototype.findLayerByUid=function(a){return m(this.layers,"uid",a)};d.prototype.remove=
function(a){return this.layers.remove(a)};d.prototype.removeMany=function(a){return this.layers.removeMany(a)};d.prototype.removeAll=function(){return this.layers.removeAll()};d.prototype.reorder=function(a,b){return this.layers.reorder(a,b)};d.prototype.layerAdded=function(a){};d.prototype.layerRemoved=function(a){};f([b.property({type:k,cast:e.castForReferenceSetter})],d.prototype,"layers",null);return d=f([b.subclass("esri.support.LayersMixin")],d)}(b.declared(l))})},"esri/Viewpoint":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Camera ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/support/jsonUtils ./geometry/support/typeUtils".split(" "),
function(h,d,n,f,l,g,e,c,p){function b(){return{enabled:!this.camera}}return function(a){function d(b){b=a.call(this)||this;b.rotation=0;b.scale=0;b.targetGeometry=null;b.camera=null;return b}n(d,a);g=d;d.prototype.castRotation=function(a){a%=360;0>a&&(a+=360);return a};d.prototype.clone=function(){return new g({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})};var g;f([e.property({type:Number,
json:{write:!0,origins:{"web-scene":{write:{overridePolicy:b}}}}})],d.prototype,"rotation",void 0);f([e.cast("rotation")],d.prototype,"castRotation",null);f([e.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:b}}}}})],d.prototype,"scale",void 0);f([e.property({types:p.types,json:{read:c.fromJSON,write:!0,origins:{"web-scene":{read:c.fromJSON,write:{overridePolicy:b}}}}})],d.prototype,"targetGeometry",void 0);f([e.property({type:l,json:{write:!0}})],d.prototype,"camera",
void 0);return d=g=f([e.subclass("esri.Viewpoint")],d)}(e.declared(g))})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/Point ./views/3d/support/mathUtils".split(" "),function(h,d,n,f,l,g,e,c){return function(d){function b(a,b,c,e){a=d.call(this)||this;a.position=null;a.heading=0;a.tilt=0;a.fov=55;return a}n(b,d);a=b;b.prototype.getDefaults=function(a){if(!a.position)return{position:new e([0,
0,0])}};b.prototype.normalizeCtorArgs=function(a,b,c,d){a&&"object"===typeof a&&("x"in a||Array.isArray(a))&&(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=d&&(a.fov=d));return a};b.prototype.equals=function(a){return a?this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1};b.prototype.clone=function(){return new a({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};var a;f([g.property({type:e,json:{write:{isRequired:!0}}})],
b.prototype,"position",void 0);f([g.property({type:Number,json:{write:{isRequired:!0}}}),g.cast(function(a){return c.cyclicalDeg.normalize(a)})],b.prototype,"heading",void 0);f([g.property({type:Number,json:{write:{isRequired:!0}}}),g.cast(function(a){return c.clamp(a,-180,180)})],b.prototype,"tilt",void 0);f([g.property({json:{read:!1,write:!1}})],b.prototype,"fov",void 0);return b=a=f([g.subclass("esri.Camera")],b)}(g.declared(l))})},"esri/geometry/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../Extent ../Geometry ../Mesh ../Multipoint ../Point ../Polygon ../Polyline".split(" "),
function(h,d,n,f,l,g,e,c,p,b){Object.defineProperty(d,"__esModule",{value:!0});d.types={base:l,key:"type",typeMap:{extent:f,multipoint:e,point:c,polyline:b,polygon:p,mesh:g}};d.ensureType=n.ensureOneOfType(d.types)})},"esri/layers/graphics/sources/FeatureLayerSource":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper dojo/io-query ../../../request ../../../core/Accessor ../../../core/Error ../../../core/Loadable ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../../tasks/QueryTask ../../../tasks/operations/queryAttachments".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q){Object.defineProperty(d,"__esModule",{value:!0});h=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.type="feature-layer";return a}n(c,b);c.prototype.load=function(){this.addResolvingPromise(this._fetchService());return this.when()};Object.defineProperty(c.prototype,"queryTask",{get:function(){var a=this.layer,b=a.parsedUrl,c=a.gdbVersion;return new k({url:null!=a.dynamicDataSource?b.path+"?"+g.objectToQuery(b.query):b.path,gdbVersion:c})},
enumerable:!0,configurable:!0});c.prototype.addAttachment=function(b,c){var d=this;return this.load().then(function(){var f=b.attributes[d.layer.objectIdField];return e(d.layer.parsedUrl.path+"/"+f+"/addAttachment",{body:c,query:l({f:"json"},d.layer.parsedUrl.query,{token:d.layer.token}),responseType:"json"}).then(function(a){return d._createFeatureEditResult(a.data.addAttachmentResult)}).catch(function(b){return a.reject(d._createAttachmentErrorResult(f,b))})})};c.prototype.updateAttachment=function(b,
c,d){var f=this;return this.load().then(function(){var g=b.attributes[f.layer.objectIdField];return e(f.layer.parsedUrl.path+"/"+g+"/updateAttachment",{body:d,query:l({f:"json"},f.layer.parsedUrl.query,{attachmentId:c,token:f.layer.token}),responseType:"json"}).then(function(a){return f._createFeatureEditResult(a.data.updateAttachmentResult)}).catch(function(b){return a.reject(f._createAttachmentErrorResult(g,b))})})};c.prototype.applyEdits=function(a){var b=this;return this.load().then(function(){var c=
a.addFeatures.map(b._serializeFeature,b),d=a.updateFeatures.map(b._serializeFeature,b),f=b._getFeatureIds(a.deleteFeatures),c={f:"json",adds:c.length?JSON.stringify(c):null,updates:d.length?JSON.stringify(d):null,deletes:f.length?f.join(","):null};return e(b.layer.parsedUrl.path+"/applyEdits",{query:c,method:"post",responseType:"json"})}).then(function(a){return b._createEditsResult(a)})};c.prototype.deleteAttachments=function(b,c){var d=this;return this.load().then(function(){var f=b.attributes[d.layer.objectIdField];
return e(d.layer.parsedUrl.path+"/"+f+"/deleteAttachments",{query:l({f:"json"},d.layer.parsedUrl.query,{token:d.layer.token,attachmentIds:c.join(",")}),method:"post",responseType:"json"}).then(function(a){return a.data.deleteAttachmentResults.map(d._createFeatureEditResult)}).catch(function(b){return a.reject(d._createAttachmentErrorResult(f,b))})})};c.prototype.queryAttachments=function(b){var c=this,d=this.layer,f=d.token,g=d.parsedUrl,h=g.path;return this.load().then(function(){var d={query:l({},
g.query,{f:"json",token:f}),responseType:"json"};if(!c.layer.get("capabilities.operations.supportsQueryAttachments")){for(var k=b.objectIds,m=[],p=0;p<k.length;p++)m.push(e(h+"/"+k[p]+"/attachments",d));return a.all(m).then(function(a){return k.map(function(b,c){return{parentObjectId:b,attachmentInfos:a[c].data.attachmentInfos}})}).then(function(a){return q.processAttachmentQueryResult(a,h,f)})}return c.queryTask.executeAttachmentQuery(b,d)})};c.prototype.queryFeatures=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.execute(a,
b)})};c.prototype.queryFeaturesJSON=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeJSON(a,b)})};c.prototype.queryObjectIds=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeForIds(a,b)})};c.prototype.queryFeatureCount=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeForCount(a,b)})};c.prototype.queryExtent=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeForExtent(a,
b)})};c.prototype.queryRelatedFeatures=function(a){var b=this;return this.load().then(function(){return b.queryTask.executeRelationshipQuery(a)})};c.prototype._fetchService=function(){var b=this,c=this.layer.resourceInfo;return c?(this.layerDefinition=c,a.resolve()):e(this.layer.parsedUrl.path,{query:l({f:"json"},this.layer.parsedUrl.query),responseType:"json"}).then(function(a){b.layerDefinition=a.data})};c.prototype._serializeFeature=function(a){var b=a.geometry;a=a.attributes;return b?"mesh"===
b.type||"extent"===b.type?null:{geometry:b.toJSON(),attributes:a}:{attributes:a}};c.prototype._getFeatureIds=function(a){var b=a[0];return b?"objectId"in b?this._getIdsFromFeatureIdentifier(a):this._getIdsFromFeatures(a):[]};c.prototype._getIdsFromFeatures=function(a){var b=this.layer.objectIdField;return a.map(function(a){return a.attributes&&a.attributes[b]})};c.prototype._getIdsFromFeatureIdentifier=function(a){return a.map(function(a){return a.objectId})};c.prototype._createEditsResult=function(a){a=
a.data;return{addFeatureResults:a.addResults?a.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:a.updateResults?a.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:a.deleteResults?a.deleteResults.map(this._createFeatureEditResult,this):[]}};c.prototype._createFeatureEditResult=function(a){var b=!0===a.success?null:a.error||{code:void 0,description:void 0};return{objectId:a.objectId,globalId:a.globalId,error:b?new p("feature-layer-source:edit-failure",
b.description,{code:b.code}):null}};c.prototype._createAttachmentErrorResult=function(a,b){return{objectId:a,globalId:null,error:new p("feature-layer-source:attachment-failure",b.details.messages&&b.details.messages[0]||b.message,{code:b.details.httpStatus||b.details.messageCode})}};f([m.property()],c.prototype,"type",void 0);f([m.property({constructOnly:!0})],c.prototype,"layer",void 0);f([m.property({readOnly:!0,dependsOn:["layer.parsedUrl","layer.gdbVersion","layer.dynamicDataSource"]})],c.prototype,
"queryTask",null);return c=f([m.subclass("esri.layers.graphics.sources.FeatureLayerSource")],c)}(m.declared(c,b));d.default=h})},"esri/tasks/QueryTask":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../geometry ../core/accessorSupport/decorators ./Task ./operations/query ./operations/queryAttachments ./operations/queryRelatedRecords ./support/AttachmentQuery ./support/FeatureSet ./support/Query ./support/RelationshipQuery".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u){return function(d){function h(a){a=d.call(this,a)||this;a.gdbVersion=null;a.source=null;return a}n(h,d);h.prototype.execute=function(a,b){return this.executeJSON(a,b).then(function(a){return q.fromJSON(a)})};h.prototype.executeJSON=function(a,c){return b.executeQuery(this.parsedUrl,this._normalizeQuery(a),g({},this.requestOptions,c)).then(function(a){return a.data})};h.prototype.executeForCount=function(a,c){return b.executeQueryForCount(this.parsedUrl,this._normalizeQuery(a),
g({},this.requestOptions,c)).then(function(a){return a.data.count})};h.prototype.executeForExtent=function(a,c){return b.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(a),g({},this.requestOptions,c)).then(function(a){return{count:a.data.count,extent:e.Extent.fromJSON(a.data.extent)}})};h.prototype.executeForIds=function(a,c){return b.executeQueryForIds(this.parsedUrl,this._normalizeQuery(a),g({},this.requestOptions,c)).then(function(a){return a.data.objectIds})};h.prototype.executeRelationshipQuery=
function(a,b){if(this.gdbVersion||this.source)a=a.clone().set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source});return m.executeRelationshipQuery(this.parsedUrl,a,g({},this.requestOptions,b)).then(function(a){var b=a.data,c={};Object.keys(b).forEach(function(a){return c[a]=q.fromJSON(b[a])});return c})};h.prototype.executeAttachmentQuery=function(b,c){var d=this,e=c&&c.query&&c.query.token;return a.executeAttachmentQuery(this.parsedUrl,b,g({},this.requestOptions,c)).then(function(b){return a.processAttachmentQueryResult(b.data.attachmentGroups,
d.parsedUrl.path,e)})};h.prototype._normalizeQuery=function(a){return this.gdbVersion||this.source?a.clone().set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source}):a};f([c.property()],h.prototype,"gdbVersion",void 0);f([c.property()],h.prototype,"source",void 0);f([l(0,c.cast(v))],h.prototype,"execute",null);f([l(0,c.cast(v))],h.prototype,"executeJSON",null);f([l(0,c.cast(v))],h.prototype,"executeForCount",null);f([l(0,c.cast(v))],h.prototype,"executeForExtent",null);f([l(0,
c.cast(v))],h.prototype,"executeForIds",null);f([l(0,c.cast(u))],h.prototype,"executeRelationshipQuery",null);f([l(0,c.cast(k))],h.prototype,"executeAttachmentQuery",null);return h=f([c.subclass("esri.tasks.QueryTask")],h)}(c.declared(p))})},"esri/tasks/Task":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/urlUtils ../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e,c,p){return function(b){function a(a){a=b.call(this)||this;a.requestOptions=null;a.url=null;return a}n(a,b);a.prototype.normalizeCtorArgs=function(a,b){return"string"!==typeof a?a:g({url:a},b)};Object.defineProperty(a.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0});a.prototype._parseUrl=function(a){return a?c.urlToObject(a):null};a.prototype._encode=function(a,b,c){var d={},e;for(e in a)if("declaredClass"!==e){var f=a[e];
if(null!=f&&"function"!==typeof f)if(Array.isArray(f)){d[e]=[];for(var g=0;g<f.length;g++)d[e][g]=this._encode(f[g])}else"object"===typeof f?f.toJSON&&(f=f.toJSON(c&&c[e]),d[e]=b?f:JSON.stringify(f)):d[e]=f}return d};f([p.property({readOnly:!0,dependsOn:["url"]})],a.prototype,"parsedUrl",null);f([p.property()],a.prototype,"requestOptions",void 0);f([p.property({type:String})],a.prototype,"url",void 0);return a=f([p.subclass("esri.tasks.Task")],a)}(p.declared(e))})},"esri/tasks/operations/query":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/requireUtils ../../core/urlUtils ../../core/workers ../../geometry/support/jsonUtils ../../geometry/support/normalizeUtils ./pbfQueryUtils ./PBFWorker ./urlUtils module".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k){function q(a,b){var d=a.geometry;a=a.toJSON();d&&(a.geometry=JSON.stringify(d),a.geometryType=c.getJsonType(d),a.inSR=d.spatialReference.wkid||JSON.stringify(d.spatialReference));a.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.orderByFields&&(a.orderByFields=a.orderByFields.join(","));!a.outFields||b&&(b.returnCountOnly||b.returnExtentOnly||b.returnIdsOnly)?delete a.outFields:
-1!==a.outFields.indexOf("*")?a.outFields="*":a.outFields=a.outFields.join(",");a.outSR?a.outSR=a.outSR.wkid||JSON.stringify(a.outSR):d&&(a.returnGeometry||a.returnCentroid)&&(a.outSR=a.inSR);a.returnGeometry&&delete a.returnGeometry;a.outStatistics&&(a.outStatistics=JSON.stringify(a.outStatistics));a.pixelSize&&(a.pixelSize=JSON.stringify(a.pixelSize));a.quantizationParameters&&(a.quantizationParameters=JSON.stringify(a.quantizationParameters));a.source&&(a.layer=JSON.stringify({source:a.source}),
delete a.source);a.timeExtent&&(b=a.timeExtent,a.time=[null!=b.startTime?b.startTime:"null",null!=b.endTime?b.endTime:"null"],delete a.timeExtent);return a}function v(a,b,c,d,e){void 0===d&&(d={});var h="string"===typeof a?g.urlToObject(a):a;a=b.geometry?[b.geometry]:[];d.responseType="pbf"===c?"array-buffer":"json";return p.normalizeCentralMeridian(a,null,d).then(function(a){if(a=a&&a[0])b=b.clone(),b.geometry=a;a=m.mapParameters(n({},h.query,{f:c},e,q(b,e)));return f(h.path+"/query",n({},d,{query:a}))})}
function u(){null==t&&(t=new a,e.open(l.getAbsMid("./PBFWorker",h,k),{strategy:"dedicated"}).then(function(a){return t.thread=a}));return t}Object.defineProperty(d,"__esModule",{value:!0});d.queryToQueryStringParameters=q;d.executeQuery=function(a,b,c){return v(a,b,"json",c)};d.executeQueryPBF=function(a,c,d,e){return v(a,c,"pbf",e).then(function(a){var c=function(b){a.data=b;return a};return d.useWorker?u().parseFeatureQuery(a.data,d).then(function(a){return c(a)}):c(b.parsePBFFeatureQuery(a.data,
d))})};d.executeQueryForIds=function(a,b,c){return v(a,b,"json",c,{returnIdsOnly:!0})};d.executeQueryForCount=function(a,b,c){return v(a,b,"json",c,{returnIdsOnly:!0,returnCountOnly:!0})};d.executeQueryForExtent=function(a,b,c){return v(a,b,"json",c,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(a){var b=a.data;if(!b.hasOwnProperty("extent")){if(b.features)throw Error("Layer does not support extent calculation.");if(b.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");
}return a})};var t})},"esri/core/requireUtils":function(){define(["require","exports","./promiseUtils"],function(h,d,n){function f(d,g){return Array.isArray(g)?n.create(function(e){d(g,function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];e(c)})}):f(d,[g]).then(function(d){return d[0]})}Object.defineProperty(d,"__esModule",{value:!0});d.when=f;d.getAbsMid=function(d,f,e){return f.toAbsMid?f.toAbsMid(d):e.id.replace(/\/[^\/]*$/gi,"/")+d}})},"esri/core/workers":function(){define(["require",
"exports","./workers/workers"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});for(var f in n)d.hasOwnProperty(f)||(d[f]=n[f])})},"esri/core/workers/workers":function(){define("require exports ../has ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(h,d,n,f,l,g,e,c){function p(){if(v)return v;for(var d=b+a,e=[],f=function(a){var b=c.create(a).then(function(b){return q[a]=b});e.push(b)},g=0;g<d;g++)f(g);return v=l.all(e).then(function(){})}Object.defineProperty(d,
"__esModule",{value:!0});d.Connection=g;d.RemoteClient=e;(g=n("host-browser")?navigator.hardwareConcurrency:0)||(g=n("safari")&&n("mac")||n("trident")?8:2);var b=n("esri-workers-debug")?1:Math.max(1,Math.ceil(g/2)),a=n("esri-workers-debug")?1:Math.max(1,Math.floor(g/2)),m=f.getLogger("esri.core.workers"),k=0,q=[];d.initialize=function(){p()};d.open=function(c,e,f){void 0===e&&(e={});if(Array.isArray(c))return new d.Connection(c.map(function(a){return new d.RemoteClient(a,e.client)}));if("string"!==
typeof c){m.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var g=c;c=e;e={client:g,strategy:f?"dedicated":"distributed"}}var n=e.strategy||"distributed";return"local"===n?l.create(function(a){h([c],function(b){a(d.RemoteClient.connect(b))})}).then(function(a){return new d.Connection([new d.RemoteClient(a,e.client)])}):p().then(function(){if("dedicated"===n){var f=b+k++;k%=a;return q[f].open(c).then(function(a){return new d.Connection([new d.RemoteClient(a,
e.client)])})}return l.all(q.map(function(a){return a.open(c)})).then(function(a){return new d.Connection(a.map(function(a){return new d.RemoteClient(a,e.client)}))})})};d.terminate=function(){v&&(v.cancel(),v=null);for(var a=0;a<q.length;a++)q[a]&&q[a].terminate();q.length=0};var v=null})},"esri/core/workers/Connection":function(){define(["require","exports","../Logger","../promiseUtils"],function(h,d,n,f){var l=n.getLogger("esri.core.workers.Connection");return function(){function d(d){this._clientIdx=
0;this._clients=d}d.prototype.broadcast=function(d,c,f){for(var b=[],a=0,e=this._clients;a<e.length;a++)b.push(e[a].invoke(d,c,f));return b};d.prototype.close=function(){for(var d=0,c=this._clients;d<c.length;d++)c[d].close();this._clients=[]};d.prototype.getAvailableClient=function(){var d;this._clients.some(function(c){return c.isBusy()?!1:(d=c,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,d=this._clients[this._clientIdx]);return d};d.prototype.invoke=function(d,c,g){var b=null;
Array.isArray(g)?(l.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),b={transferList:g}):b=g;return this._clients&&this._clients.length?this.getAvailableClient().invoke(d,c,b):f.reject(Error("Connection closed"))};d.prototype.openPorts=function(){return f.all(this._clients.map(function(d){return d.openPort()}))};return d}()})},"esri/core/workers/RemoteClient":function(){define("require exports @dojo/framework/shim/AbortController ../Error ../promiseUtils ./utils".split(" "),
function(h,d,n,f,l,g){function e(a,b){a["delete"](b)}function c(a){void 0===a&&(a="Invocation cancellation");a=new f("AbortError",a);a.dojoType="cancel";return a}var p=g.MessageType.CLOSE,b=g.MessageType.ABORT,a=g.MessageType.INVOKE,m=g.MessageType.RESPONSE,k=g.MessageType.OPEN_PORT,q=function(){function a(a){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=[];this._invoke=a;this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a){a.type===g.MessageType.ABORT?
this._cancelledJobIds.add(a.jobId):(this._invokeMessages.push(a),null===this._timer&&(this._timer=setTimeout(this._process,0)))};a.prototype.clear=function(){this._invokeMessages.length=0;this._cancelledJobIds.clear();this._timer=null};a.prototype._process=function(){this._timer=null;for(var a=0,b=this._invokeMessages;a<b.length;a++){var c=b[a];this._cancelledJobIds.has(c.jobId)||this._invoke(c)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return a}();return function(){function d(a,
b,c){var d=this;this._outJobs=new Map;this._inJobs=new Map;this._queue=new q(function(a){return d._onInvoke(a)});this._onMessage=this._onMessage.bind(this);this._client=b;this._port=a;this._port.addEventListener("message",this._onMessage);this._port.start();this._channel=c}d.connect=function(a){var b=new MessageChannel;a="function"===typeof a?new a:"default"in a&&"function"===typeof a.default?new a.default:a;a.remoteClient=new d(b.port1,a,b);return b.port2};d.prototype.close=function(){this._post({type:p});
this._close()};d.prototype.isBusy=function(){return 0<this._outJobs.size};d.prototype.invoke=function(d,h,k){var m=this,p=k&&k.signal,q=k&&k.transferList;if(!this._port)return l.reject(new f("remote-client:port-closed","Can't invoke(), port is closed"));if(p&&p.aborted)return l.reject(c());var n=g.newJobId(),r=function(){p&&p.removeEventListener("abort",r);var a=m._outJobs.get(n);a&&(e(m._outJobs,n),m._post({type:b,jobId:n}),a.reject(c()))};p&&p.addEventListener("abort",r);return l.create(function(b,
c){m._outJobs.set(n,{resolve:b,reject:c});m._post({type:a,jobId:n,methodName:d,abortable:!0},h,q)},r)};d.prototype.openPort=function(){var a=this,c=g.newJobId(),d=function(){e(a._outJobs,c);a._post({type:b,jobId:c})};return l.create(function(b,e){a._outJobs.set(c,{resolve:b,reject:e,signal:d});a._post({type:k,jobId:c})},d)};d.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();this._outJobs.forEach(function(a){a.reject(c())});
this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};d.prototype._onMessage=function(c){if(c=g.receiveMessage(c))switch(c.type){case m:this._onResponse(c);break;case a:this._queue.push(c);break;case b:this._onAbort(c);break;case p:this._close();break;case k:this._onOpenPort(c)}};d.prototype._onAbort=function(a){var b=this._inJobs,c=a.jobId,d=b.get(c);this._queue.push(a);d&&(d.controller&&d.controller.abort(),e(b,c))};d.prototype._onInvoke=function(a){var b=
this,c=a.methodName,d=a.jobId,f=a.data,h=a.abortable?new n.default:null,k=this._inJobs;a=this._client;var p=a[c],q;try{if(!p&&c&&-1!==c.indexOf("."))for(var v=c.split("."),u=0;u<v.length-1;u++)a=a[v[u]],p=a[v[u+1]];if("function"!==typeof p)throw new TypeError(c+" is not a function");q=p.call(a,f,{client:this,signal:h?h.signal:null})}catch(F){this._post({type:m,jobId:d,error:g.toInvokeError(F)});return}if(l.isThenable(q)){k.set(d,{controller:h,promise:q});var D=function(){k.has(d)&&(h.signal.removeEventListener("abort",
D),q.cancel(),e(k,d))};h.signal.addEventListener("abort",D);q.then(function(a){k.has(d)&&(e(k,d),b._post({type:m,jobId:d},a))}).catch(function(a){k.has(d)&&(h.signal.removeEventListener("abort",D),e(k,d),a&&"AbortError"===a.name||b._post({type:m,jobId:d,error:g.toInvokeError(a||{message:"Error encountered at method "+c})}))})}else this._post({type:m,jobId:d},q)};d.prototype._onOpenPort=function(a){var b=new MessageChannel;new d(b.port1,this._client);this._post({type:m,jobId:a.jobId},b.port2,[b.port2])};
d.prototype._onResponse=function(a){var b=a.jobId,c=a.error;a=a.data;var d=this._outJobs;if(d.has(b)){var g=d.get(b);e(d,b);c?g.reject(f.fromJSON(JSON.parse(c))):g.resolve(a)}};d.prototype._post=function(a,b,c){return g.postMessage(this._port,a,b,c)};return d}()})},"@dojo/framework/shim/AbortController":function(){(function(h){"object"===typeof module&&"object"===typeof module.exports?(h=h(require,exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&define.amd&&define(["require","exports",
"./global","./support/has","./array"],h)})(function(h,d){Object.defineProperty(d,"__esModule",{value:!0});var n=h("./global"),f=h("./support/has"),l=h("./array");d.ShimAbortSignal=n.default.AbortSignal;f.default("abort-signal")||(n.default.AbortSignal=d.ShimAbortSignal=function(){function d(){this._aborted=!1;this.listeners={}}Object.defineProperty(d.prototype,"aborted",{get:function(){return this._aborted},enumerable:!0,configurable:!0});d.prototype.addEventListener=function(d,c){d in this.listeners||
(this.listeners[d]=[]);this.listeners[d].push(c)};d.prototype.removeEventListener=function(d,c){if(d in this.listeners){var e=l.findIndex(this.listeners[d],function(b){return b===c});0<=e&&this.listeners[d].splice(e,1)}};d.prototype.dispatchEvent=function(d){var c=this,e=d.type;"abort"===e&&(this._aborted=!0,"function"===typeof this.onabort&&this.onabort.call(this,d));if(!(e in this.listeners))return!1;this.listeners[e].forEach(function(b){setTimeout(function(){return b.call(c,d)},0)});return!d.preventDefault};
return d}());d.ShimAbortController=n.default.AbortController;f.default("abort-controller")||(n.default.AbortController=d.ShimAbortController=function(){function f(){this.signal=new d.ShimAbortSignal}f.prototype.abort=function(){var d;try{d=new Event("abort")}catch(c){"undefined"!==typeof document?(d=document.createEvent("Event"),d.initEvent("abort",!1,!1)):d={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(d)};return f}());d.default=d.ShimAbortController})},"esri/core/workers/utils":function(){define(["require",
"exports","../has"],function(h,d,n){function f(d){return d&&"object"===typeof d&&("result"in d||"transferList"in d)}function l(d){return d instanceof ArrayBuffer||d&&d.constructor&&"ArrayBuffer"===d.constructor.name}Object.defineProperty(d,"__esModule",{value:!0});(function(d){d[d.HANDSHAKE=0]="HANDSHAKE";d[d.CONFIGURE=1]="CONFIGURE";d[d.CONFIGURED=2]="CONFIGURED";d[d.OPEN=3]="OPEN";d[d.OPENED=4]="OPENED";d[d.RESPONSE=5]="RESPONSE";d[d.INVOKE=6]="INVOKE";d[d.ABORT=7]="ABORT";d[d.CLOSE=8]="CLOSE";
d[d.OPEN_PORT=9]="OPEN_PORT"})(d.MessageType||(d.MessageType={}));var g=0;d.newJobId=function(){return g++};d.isTranferableResult=f;d.toInvokeError=function(d){return d?d.toJSON?JSON.stringify(d):JSON.stringify({name:d.name,message:d.message,details:d.details,stack:d.stack}):null};d.postMessage=function(d,c,g,b){2===arguments.length||void 0===g&&void 0===b?d.postMessage(c):(n("esri-workers-arraybuffer-transfer")||(b?(b=b.filter(function(a){return!l(a)}),b.length||(b=null)):f(g)&&g.transferList&&(g.transferList=
g.transferList.filter(function(a){return!l(a)}),g.transferList.length||(g.transferList=null))),b?(c.data=g,d.postMessage(c,b)):f(g)?(c.data=g.result,g.transferList?d.postMessage(c,g.transferList):d.postMessage(c)):(c.data=g,d.postMessage(c)))};d.receiveMessage=function(d){return d?(d=d.data)?"string"===typeof d?JSON.parse(d):d:null:null}})},"esri/core/workers/WorkerOwner":function(){define("require exports ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(h,
d,n,f,l,g,e,c){var p=l.getLogger("esri.core.workers"),b=e.MessageType.ABORT,a=e.MessageType.INVOKE,m=e.MessageType.OPEN,k=e.MessageType.OPENED,q=e.MessageType.RESPONSE;return function(){function d(a,b){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();p.error(a)})}d.create=function(a){return c.createWorker().then(function(b){return new d(b,a)})};d.prototype.terminate=
function(){this.worker.terminate()};d.prototype.open=function(a){var c=this,d=e.newJobId(),f=function(){c._outJobs["delete"](d);c._post({type:b,jobId:d})};return g.create(function(b,e){c._outJobs.set(d,{resolve:b,reject:e,cancel:f});c._post({type:m,jobId:d,modulePath:a})},f)};d.prototype._onMessage=function(c){if(c=e.receiveMessage(c))switch(c.type){case k:case q:this._onResponse(c);break;case b:this._onCancel(c);break;case a:this._onInvoke(c)}};d.prototype._onCancel=function(a){(a=this._inJobs.get(a.jobId))&&
a.cancel()};d.prototype._onInvoke=function(a){var b=this,c=a.methodName,d=a.jobId;a=a.data;var f=this._inJobs,h=n.workerMessages[c],k;try{if("function"!==typeof h)throw new TypeError(c+" is not a function");k=h.call(null,a)}catch(x){this._post({type:q,jobId:d,error:e.toInvokeError(x)});return}g.isThenable(k)?(f.set(d,k),k.then(function(a){f["delete"](d);b._post({type:q,jobId:d},a)}).catch(function(a){f["delete"](d);a||(a={message:"Error encountered at method"+c});a.dojoType&&"cancel"===a.dojoType||
b._post({type:q,jobId:d,error:e.toInvokeError(a)})})):this._post({type:q,jobId:d},k)};d.prototype._onResponse=function(a){var b=a.jobId,c=a.error;a=a.data;var d=this._outJobs.get(b);d&&(this._outJobs["delete"](b),c?d.reject(f.fromJSON(JSON.parse(c))):d.resolve(a))};d.prototype._post=function(a,b,c){return e.postMessage(this.worker,a,b,c)};return d}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../has ../Logger ../promiseUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a){function m(d){return c.create(function(c){function e(a){if(a=b.receiveMessage(a))switch(a.type){case u:a=d;var k=l.workers.loaderUrl||p.DEFAULT_LOADER_URL,m;null!=l["default"]?(m=n({},l),delete m["default"],m=JSON.parse(JSON.stringify(m))):m=JSON.parse(JSON.stringify(l));var r=l.workers.loaderConfig,r=p.default({baseUrl:r.baseUrl,locale:f.locale,has:n({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-secure-context":g("esri-secure-context"),"esri-workers-arraybuffer-transfer":g("esri-workers-arraybuffer-transfer"),
"events-keypress-typed":0,"host-webworker":1},r.has),map:n({},r.map),paths:n({},r.paths),packages:r.packages||[]});a.postMessage({type:v,configure:{esriConfig:m,loaderUrl:k,loaderConfig:r}});break;case q:d.removeEventListener("message",e),d.removeEventListener("error",h),c(d)}}function h(b){b.preventDefault();d.removeEventListener("message",e);d.removeEventListener("error",h);k.warn("Failed to create Worker. Fallback to execute module in main thread",b);d=new a;d.addEventListener("message",e);d.addEventListener("error",
h)}d.addEventListener("message",e);d.addEventListener("error",h)})}Object.defineProperty(d,"__esModule",{value:!0});var k=e.getLogger("esri.core.workers");g.add("esri-workers-arraybuffer-transfer",!g("safari")||12<=g("safari"));var q=b.MessageType.CONFIGURED,v=b.MessageType.CONFIGURE,u=b.MessageType.HANDSHAKE,t;try{t=URL.createObjectURL(new Blob(['var globalId\x3d0;var outgoing\x3dnew Map;var configured\x3dfalse;var HANDSHAKE\x3d0;var CONFIGURE\x3d1;var CONFIGURED\x3d2;var OPEN\x3d3;var OPENED\x3d4;var RESPONSE\x3d5;var INVOKE\x3d6;var CANCEL\x3d7;function mapDelete(map,key){map["delete"](key)}function receiveMessage(event){if(!event||!event.data){return null}if(typeof event.data\x3d\x3d\x3d"string"){return JSON.parse(event.data)}return event.data}function invokeStaticMessage(methodName,data,options){var signal\x3doptions\x26\x26options.signal;var Deferred\x3drequire("dojo/Deferred");var jobId\x3dglobalId++;var abortHandler\x3dfunction(){if(!outgoing.has(jobId)){return}self.postMessage({type:CANCEL,methodName:methodName,jobId:jobId});mapDelete(outgoing,jobId);if(!deferred.isCanceled()){deferred.cancel()}if(signal){signal.removeEventListener("abort",abortHandler)}};if(signal){signal.addEventListener("abort",abortHandler)}var deferred\x3dnew Deferred(abortHandler);outgoing.set(jobId,deferred);self.postMessage({type:INVOKE,methodName:methodName,jobId:jobId,data:data});return deferred.promise}function messageHandler(event){var message\x3dreceiveMessage(event);if(!message){return}var jobId\x3dmessage.jobId;switch(message.type){case CONFIGURE:var configuration\x3dmessage.configure;if(configured){return}self.dojoConfig\x3dconfiguration.loaderConfig;self.importScripts(configuration.loaderUrl);if(typeof require.config\x3d\x3d\x3d"function"){require.config(configuration.loaderConfig)}require(["esri/config"],function(esriConfig){for(var name in configuration.esriConfig){if(Object.prototype.hasOwnProperty.call(configuration.esriConfig,name)){esriConfig[name]\x3dconfiguration.esriConfig[name]}}self.postMessage({type:CONFIGURED})});break;case OPEN:var modulePath\x3dmessage.modulePath;require(["esri/core/workers/RemoteClient",modulePath],function(RemoteClient,Module){var port\x3dRemoteClient.connect(Module);self.postMessage({type:OPENED,jobId:jobId,data:port},[port])});break;case RESPONSE:if(outgoing.has(jobId)){var deferred\x3doutgoing.get(jobId);mapDelete(outgoing,jobId);if(message.error){deferred.reject(JSON.parse(message.error))}else{deferred.resolve(message.data)}}break}}self.addEventListener("message",messageHandler);self.postMessage({type:HANDSHAKE});'],
{type:"text/javascript"}))}catch(r){}d.createWorker=function(){if(!g("esri-workers"))return m(new a);var b;if(t)try{b=new Worker(t)}catch(w){k.warn("Failed to create Worker. Fallback to execute module in main thread",event),b=new a}else k.warn("Failed to create Worker. Fallback to execute module in main thread",event),b=new a;return m(b)}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","../has","../urlUtils"],function(h,d,n,f,l){Object.defineProperty(d,
"__esModule",{value:!0});f=f("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";d.DEFAULT_LOADER_URL=l.makeAbsolute(l.removeQueryParameters(h.toUrl(f)));d.DEFAULT_CONFIG={baseUrl:function(){var d=l.removeQueryParameters(h.toUrl("dojo/x.js"));return l.makeAbsolute(d.slice(0,d.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},
{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};d.default=function(f){var e={async:f.async,isDebug:f.isDebug,locale:f.locale,baseUrl:f.baseUrl,has:n({},f.has),map:n({},f.map),packages:f.packages&&f.packages.concat()||
[],paths:n({},f.paths)};f.hasOwnProperty("async")||(e.async=!0);f.hasOwnProperty("isDebug")||(e.isDebug=!1);f.baseUrl||(e.baseUrl=d.DEFAULT_CONFIG.baseUrl);d.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var b=e.packages,c=0;c<b.length;c++)if(b[c].name===a.name)break a;a=n({},a);c=l.removeQueryParameters(h.toUrl(a.name+"/x.js"));c=c.slice(0,c.length-5);a.location=l.makeAbsolute(c);b.push(a)}});f=e.map=e.map||{};for(var c=0,g=Object.keys(d.DEFAULT_CONFIG.map);c<g.length;c++){var b=g[c];f[b]||
(f[b]=d.DEFAULT_CONFIG.map[b])}return e}})},"esri/core/workers/WorkerFallback":function(){define(["require","exports","../global","../has","./utils"],function(h,d,n,f,l){var g=function(){return function(){var c=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(a){c[a]=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return b[a].apply(b,c)}})}}(),e=n.MutationObserver||n.WebKitMutationObserver,c=function(){var c;
if(n.process&&n.process.nextTick)c=function(a){n.process.nextTick(a)};else if(n.Promise)c=function(a){n.Promise.resolve().then(a)};else if(e){var b=[],a=document.createElement("div");(new e(function(){for(;0<b.length;)b.shift()()})).observe(a,{attributes:!0});c=function(c){b.push(c);a.setAttribute("queueStatus","1")}}return c}();return function(){function d(){this._dispatcher=new g;this._isInitialized=!1;this._workerPostMessage({type:l.MessageType.HANDSHAKE})}d.prototype.terminate=function(){};Object.defineProperty(d.prototype,
"onmessage",{get:function(){return this._onmessageHandler},set:function(b){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=b)&&this.addEventListener("message",b)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(b){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=b)&&this.addEventListener("error",b)},enumerable:!0,
configurable:!0});d.prototype.postMessage=function(b,a){var d=this;c(function(){d._workerMessageHandler(new MessageEvent("message",{data:b}))})};d.prototype.dispatchEvent=function(b){return this._dispatcher.dispatchEvent(b)};d.prototype.addEventListener=function(b,a,c){this._dispatcher.addEventListener(b,a,c)};d.prototype.removeEventListener=function(b,a,c){this._dispatcher.removeEventListener(b,a,c)};d.prototype._workerPostMessage=function(b,a){var d=this;c(function(){d.dispatchEvent(new MessageEvent("message",
{data:b}))})};d.prototype._workerMessageHandler=function(b){var a=this;if(b=l.receiveMessage(b)){var c=b.jobId;switch(b.type){case l.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:l.MessageType.CONFIGURED});break;case l.MessageType.OPEN:h(["esri/core/workers/RemoteClient",b.modulePath],function(b,d){b=b.connect(d);a._workerPostMessage({type:l.MessageType.OPENED,jobId:c,data:b})})}}};return d}()})},"esri/geometry/support/normalizeUtils":function(){define("require exports ../../config ../../core/Error ../../core/Logger ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/GeometryService".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){function k(a){return"polygon"===a.type?a.rings:a.paths}function q(a,b){return Math.ceil((a-b)/(2*b))}function v(a,b){for(var c=0,d=k(a);c<d.length;c++)for(var e=0,f=d[c];e<f.length;e++)f[e][0]+=b;return a}function u(a){for(var b=[],c=0,d=0,e=0;e<a.length;e++){for(var f=a[e],g=null,h=0;h<f.length;h++)g=f[h],b.push(g),0===h?d=c=g[0]:(c=Math.min(c,g[0]),d=Math.max(d,g[0]));g&&b.push([(c+d)/2,0])}return b}function t(a,b){if(!(a instanceof c||a instanceof e))throw A.error("straightLineDensify: the input geometry is neither polyline nor polygon"),
new f("straightLineDensify: the input geometry is neither polyline nor polygon");for(var d=[],g=0,h=k(a);g<h.length;g++){var m=h[g],l=[];d.push(l);l.push([m[0][0],m[0][1]]);for(var p=0;p<m.length-1;p++){var q=m[p][0],n=m[p][1],r=m[p+1][0],t=m[p+1][1],v=Math.sqrt((r-q)*(r-q)+(t-n)*(t-n)),u=(t-n)/v,y=(r-q)/v,z=v/b;if(1<z){for(var w=1;w<=z-1;w++){var x=w*b;l.push([y*x+q,u*x+n])}v=(v+Math.floor(z-1)*b)/2;l.push([y*v+q,u*v+n])}l.push([r,t])}}return"polygon"===a.type?new e({rings:d,spatialReference:a.spatialReference}):
new c({paths:d,spatialReference:a.spatialReference})}function r(b,c,d){c&&(b=t(b,1E6),b=a.webMercatorToGeographic(b,!0));d&&(b=v(b,d));return b}function w(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=q(d,b);a[0]=d+-2*e*b}else d<c&&(e=q(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=q(d,b),a=a.clone().offset(-2*e*b,0)):d<c&&(e=q(d,c),a=a.clone().offset(-2*e*c,0));return a}function z(a,b){for(var c=-1,d=function(d){var e=b.cutIndexes[d],f=b.geometries[d],g=k(f);d=function(a){var b=g[a];b.some(function(c){if(!(180>
c[0])){for(var d=c=0;d<b.length;d++){var e=b[d][0];c=e>c?e:c}c=Number(c.toFixed(9));c=-360*q(c,180);for(d=0;d<b.length;d++)e=f.getPoint(a,d),f.setPoint(a,d,e.clone().offset(c,0))}return!0})};for(var h=0;h<g.length;h++)d(h);if(e===c)if("polygon"===a[0].type)for(d=0,h=k(f);d<h.length;d++)a[e]=a[e].addRing(h[d]);else{if("polyline"===a[0].type)for(d=0,h=k(f);d<h.length;d++)a[e]=a[e].addPath(h[d])}else c=e,a[e]=f},e=0;e<b.cutIndexes.length;e++)d(e);return a}function B(d,f,h){if(!Array.isArray(d))return B([d],
f);f||(C||(C=new m({url:n.geometryServiceUrl})),f=C);for(var k,l,p,t,u,y,A,E=0,D=[],J=[],R=0;R<d.length;R++){var H=d[R];if(H)if(k||(k=H.spatialReference,l=b.getInfo(k),y=(p=k.isWebMercator)?102100:4326,t=x[y].maxX,u=x[y].minX,A=x[y].plus180Line,y=x[y].minus180Line),l)if("mesh"===H.type)J.push(H);else if("point"===H.type)J.push(w(H.clone(),t,u));else if("multipoint"===H.type)H=H.clone(),H.points=H.points.map(function(a){return w(a,t,u)}),J.push(H);else if("extent"===H.type){var W=H.clone(),H=W._normalize(!1,
!1,l);J.push(H.rings?new e(H):H)}else if(H.extent){var W=H.extent,aa=2*q(W.xmin,u)*t,H=0===aa?H.clone():v(H.clone(),aa);W.offset(aa,0);W.intersects(A)&&W.xmax!==t?(E=W.xmax>E?W.xmax:E,H=r(H,p),D.push(H),J.push("cut")):W.intersects(y)&&W.xmin!==u?(E=2*W.xmax*t>E?2*W.xmax*t:E,H=r(H,p,360),D.push(H),J.push("cut")):J.push(H)}else J.push(H.clone());else J.push(H);else J.push(H)}k=q(E,t);l=-90;A=k;for(E=new c;0<k;)R=-180+360*k,E.addPath([[R,l],[R,-1*l]]),l*=-1,k--;if(0<D.length&&0<A)return f.cut(D,E,h).then(function(a){return z(D,
a)}).then(function(b){for(var c=[],e=[],g=0;g<J.length;g++){var k=J[g];if("cut"!==k)e.push(k);else{var k=b.shift(),m=d[g];"polygon"===m.type&&m.rings&&1<m.rings.length&&k.rings.length>=m.rings.length?(c.push(k),e.push("simplify")):e.push(p?a.geographicToWebMercator(k):k)}}return c.length?f.simplify(c,h).then(function(b){for(var c=[],d=0;d<e.length;d++){var f=e[d];"simplify"!==f?c.push(f):c.push(p?a.geographicToWebMercator(b.shift()):b.shift())}return c}):e});k=[];for(l=0;l<J.length;l++)A=J[l],"cut"!==
A?k.push(A):(A=D.shift(),k.push(!0===p?a.geographicToWebMercator(A):A));return g.resolve(k)}Object.defineProperty(d,"__esModule",{value:!0});var A=l.getLogger("esri.geometry.support.normalizeUtils"),x={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new c({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:p.WebMercator}),minus180Line:new c({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,
2.0037508342788905E7]]],spatialReference:p.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:p.WebMercator}),minus180Line:new c({paths:[[[-180,-180],[-180,180]]],spatialReference:p.WebMercator})}};d.straightLineDensify=t;var C;d.normalizeCentralMeridian=B;d.getDenormalizedExtent=function(a){var c;if(!a)return null;var d=a.extent;if(!d)return null;var e=a.spatialReference&&b.getInfo(a.spatialReference);if(!e)return d;var e=e.valid,f=e[0],e=e[1],
g=d.width,h=d.xmin;c=d.xmax;c=[c,h];h=c[0];c=c[1];if("extent"===a.type||0===g||g<=e||g>2*e||h<f||c>e)return d;var k;switch(a.type){case "polygon":if(1<a.rings.length)k=u(a.rings);else return d;break;case "polyline":if(1<a.paths.length)k=u(a.paths);else return d;break;case "multipoint":k=a.points}a=d.clone();for(f=0;f<k.length;f++){var m=k[f][0];0>m?(m+=e,c=Math.max(m,c)):(m-=e,h=Math.min(m,h))}a.xmin=h;a.xmax=c;return a.width<g?(a.xmin-=e,a.xmax-=e,a):d};d.normalizeMapX=function(a,c){if(c=b.getInfo(c)){var d=
c.valid;c=d[0];var d=d[1],e=d-c;if(a<c)for(;a<c;)a+=e;if(a>d)for(;a>d;)a-=e}return a}})},"esri/tasks/GeometryService":function(){define("../core/lang ../core/kebabDictionary ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters".split(" "),function(h,d,n,f,l,g,e,c,p,b,a){var m=d({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",
DD:"dd"}),k=n.ensureType(a);d=b.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){a={query:h.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,b,c){var d=a[0].spatialReference;a={query:h.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),
polylines:JSON.stringify(this._encodeGeometries(b).geometries)})};if(this.requestOptions||c)a=h.mixin({},this.requestOptions,c,a);return p(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new e({spatialReference:d,rings:a.rings})})})},buffer:function(a,b){var c=h.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.outSpatialReference||a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,
b,a);return p(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new e({spatialReference:d,rings:a.rings})})})},cut:function(a,b,d){var e=a[0].spatialReference,f=a.map(function(a){return a.toJSON()});a={query:h.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),target:JSON.stringify({geometryType:c.getJsonType(a[0]),geometries:f}),cutter:JSON.stringify(b.toJSON())})};if(this.requestOptions||d)a=h.mixin({},this.requestOptions,d,
a);return p(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return c.fromJSON(a).set("spatialReference",e)})}})},convexHull:function(a,b){var d=a[0].spatialReference;a={query:h.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/convexHull",a).then(function(a){return c.fromJSON(a.data.geometry).set("spatialReference",
d)})},densify:function(a,b){var d=h.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return c.fromJSON(a).set("spatialReference",e)})})},difference:function(a,b,d){var e=a[0].spatialReference;a={query:h.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:c.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||d)a=h.mixin({},this.requestOptions,d,a);return p(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return c.fromJSON(a).set("spatialReference",e)})})},distance:function(a,b){a={query:h.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},
fromGeoCoordinateString:function(a,b){var c={};c.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;c.strings=JSON.stringify(a.strings);c.conversionType=m.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;a={query:h.mixin({},this.parsedUrl.query,{f:"json"},c)};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var d=
h.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return c.fromJSON(a).set("spatialReference",e)})})},intersect:function(a,b,d){var e=a[0].spatialReference;a={query:h.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:c.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||d)a=h.mixin({},this.requestOptions,d,a);return p(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return c.fromJSON(a).set("spatialReference",e)})})},lengths:function(a,b){a={query:h.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},
labelPoints:function(a,b){var d=a.map(function(a){return a.toJSON()}),e=a[0].spatialReference;a={query:h.mixin({},this.parsedUrl.query,{f:"json",sr:e.wkid?e.wkid:JSON.stringify(e.toJSON()),polygons:JSON.stringify(d)})};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return c.fromJSON(a).set("spatialReference",e)})})},offset:function(a,b){var d=h.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return c.fromJSON(a).set("spatialReference",e)})})},project:function(a,b){a=k(a);var d=h.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),e=a.outSpatialReference,f=c.getJsonType(a.geometries[0]),g=this._decodeGeometries;a={query:d};if(this.requestOptions||b)a=
h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/project",a).then(function(a){return g(a.data,f,e)})},relation:function(a,b){a={query:h.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},reshape:function(a,b,d){var e=a.spatialReference;a={query:h.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),target:JSON.stringify({geometryType:c.getJsonType(a),
geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())})};if(this.requestOptions||d)a=h.mixin({},this.requestOptions,d,a);return p(this.parsedUrl.path+"/reshape",a).then(function(a){return c.fromJSON(a.data.geometry).set("spatialReference",e)})},simplify:function(a,b){var d=a[0].spatialReference,e=h.mixin({},this.parsedUrl.query,{f:"json",sr:d.wkid?d.wkid:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),f=c.getJsonType(a[0]),g=this._decodeGeometries;a={query:e};
if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/simplify",a).then(function(a){return g(a.data,f,d)})},toGeoCoordinateString:function(a,b){var c={};c.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;c.coordinates=JSON.stringify(a.coordinates);c.conversionType=m.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;c.numOfDigits=a.numOfDigits;c.rounding=a.rounding;c.addSpaces=a.addSpaces;a={query:h.mixin({},this.parsedUrl.query,
{f:"json"},c)};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var c=h.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.sr;a={query:c};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new g({spatialReference:d,paths:a.paths})})})},
union:function(a,b){var d=a[0].spatialReference;a={query:h.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=h.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/union",a).then(function(a){return c.fromJSON(a.data.geometry).set("spatialReference",d)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},
_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],d,e=a.length;for(d=0;d<e;d++)b.push(a[d].toJSON());return{geometryType:c.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,d){var e=c.getGeometryType(b);a=a.geometries;var f=[],g={spatialReference:d.toJSON()},k=h.mixin;a.forEach(function(a,b){f[b]=new e(k(a,g))});return f},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof f?new e({rings:[[[a.xmin,
a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new g({paths:[[].concat(a.points)],spatialReference:b})},_fromProjectedGeometry:function(a,b,c){return"extent"===b?(a=a.rings[0],new f(a[0][0],a[0][1],a[2][0],a[2][1],c)):new l({points:a.paths[0],spatialReference:c.toJSON()})}});h.mixin(d,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return d})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(h,d,n,f,l,g,e,c){var p=g.getLogger("esri.tasks.support.ProjectParameters");return function(b){function a(a){a=b.call(this)||this;a.geometries=null;a.outSpatialReference=null;a.transformation=null;a.transformForward=null;return a}n(a,b);Object.defineProperty(a.prototype,"outSR",{get:function(){p.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){p.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});a.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],d={};d.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());d.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());d.geometries=JSON.stringify({geometryType:c.getJsonType(b),geometries:a});this.transformation&&(d.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(d.transformForward=this.transformForward);return d};f([e.property()],a.prototype,"geometries",void 0);f([e.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);f([e.property({json:{read:!1}})],a.prototype,"outSR",null);f([e.property()],a.prototype,"transformation",void 0);f([e.property()],a.prototype,"transformForward",void 0);return a=f([e.subclass("esri.tasks.support.ProjectParameters")],a)}(e.declared(l))})},"esri/tasks/operations/pbfQueryUtils":function(){define(["require",
"exports","./pbfFeatureServiceParser"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.parsePBFFeatureQuery=function(d,h){if((d=n.parseFeatureQuery(d,h).queryResult.featureResult)&&d.features&&d.features.length&&d.objectIdFieldName){h=d.objectIdFieldName;for(var f=0,e=d.features;f<e.length;f++){var c=e[f];c.attributes&&(c.objectId=c.attributes[h])}}return d}})},"esri/tasks/operations/pbfFeatureServiceParser":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ./pbfDehydratedFeatureSet ./pbfOptimizedFeatureSet".split(" "),
function(h,d,n,f,l,g,e){function c(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getSInt32();case 5:return a.getUInt32();case 6:return a.getInt64();case 7:return a.getUInt64();case 8:return a.getSInt64();case 9:return a.getBool();default:return a.skip(),null}return null}function p(a){for(var b={type:0>=m.length?null:m[0]};a.next();)switch(a.tag()){case 1:b.name=a.getString();break;case 2:var c=a.getEnum();b.type=
c>=m.length?null:m[c];break;case 3:b.alias=a.getString();break;case 4:c=a.getEnum();c=c>=k.length?null:k[c];b.sqlType=c;break;default:a.skip()}return b}function b(a,b,d,e){for(var f=a.createFeature(b),g=0;d.next();)switch(d.tag()){case 1:var h=e[g++].name;f.attributes[h]=c(d.getMessage());break;case 2:for(var h=a,k=b,m=d.getMessage(),l=h.createGeometry(k),k=2+(k.hasZ?1:0)+(k.hasM?1:0);m.next();)switch(m.tag()){case 2:for(var p=m.getUInt32(),p=m.pos()+p,n=0;m.pos()<p;)h.addLength(l,m.getUInt32(),n++);
break;case 3:for(var p=m.getUInt32(),p=m.pos()+p,q=n=0;m.pos()<p;)h.addCoordinate(l,m.getSInt64(),q,n),n++,n===k&&(q++,n=0);break;default:m.skip()}f.geometry=l;break;case 4:h=a;m=d.getMessage();for(l=h.createPointGeometry(b);m.next();)switch(m.tag()){case 3:k=m.getUInt32();k=m.pos()+k;for(p=0;m.pos()<k;)h.addCoordinatePoint(l,m.getSInt64(),0,p++);break;default:m.skip()}f.centroid=l;break;default:d.skip()}return f}Object.defineProperty(d,"__esModule",{value:!0});var a=f.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),
m="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),k="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
q=["upperLeft","lowerLeft"];d.parseFeatureQuery=function(c,d){d=d&&"dehydrated"===d.type?new g.Context(d):new e.Context(d);try{var f=new l(new Uint8Array(c),new DataView(c));for(c={};f.next();)switch(f.tag()){case 2:for(var h=c,k=d,m=f.getMessage(),v={};m.next();)switch(m.tag()){case 1:var u=k,x=m.getMessage(),C=u.createFeatureResult();C.geometryType=0>=u.geometryTypes.length?null:u.geometryTypes[0];for(var y=!1;x.next();)switch(x.tag()){case 1:C.objectIdFieldName=x.getString();break;case 3:C.globalIdFieldName=
x.getString();break;case 4:C.geohashFieldName=x.getString();break;case 5:for(var E=x.getMessage(),D={};E.next();)switch(E.tag()){case 1:D.shapeAreaFieldName=E.getString();break;case 2:D.shapeLengthFieldName=E.getString();break;case 3:D.units=E.getString();break;default:E.skip()}C.geometryProperties=D;break;case 7:var F=x.getEnum();C.geometryType=F>=u.geometryTypes.length?null:u.geometryTypes[F];break;case 8:for(var L=x.getMessage(),P=u.createSpatialReference();L.next();)switch(L.tag()){case 1:P.wkid=
L.getUInt32();break;case 5:P.wkt=L.getString();break;default:L.skip()}C.spatialReference=P;break;case 10:C.hasZ=x.getBool();break;case 11:C.hasM=x.getBool();break;case 12:for(var M=x.getMessage(),I={originPosition:0>=q.length?null:q[0]};M.next();)switch(M.tag()){case 1:var ba=M.getEnum();I.originPosition=ba>=q.length?null:q[ba];break;case 2:for(var K=M.getMessage(),D=[0,0,0,0];K.next();)switch(K.tag()){case 1:D[0]=K.getDouble();break;case 2:D[1]=K.getDouble();break;case 4:D[2]=K.getDouble();break;
case 3:D[3]=K.getDouble();break;default:K.skip()}I.scale=D;break;case 3:for(var S=M.getMessage(),D=[0,0,0,0];S.next();)switch(S.tag()){case 1:D[0]=S.getDouble();break;case 2:D[1]=S.getDouble();break;case 4:D[2]=S.getDouble();break;case 3:D[3]=S.getDouble();break;default:S.skip()}I.translate=D;break;default:M.skip()}C.transform=I;break;case 9:var Q=x.getBool();C.exceededTransferLimit=Q;break;case 13:u.addField(C,p(x.getMessage()));break;case 15:y||(u.prepareFeatures(C),y=!0);u.addFeature(C,b(u,C,x.getMessage(),
C.fields));break;default:x.skip()}u.finishFeatureResult(C);v.featureResult=C;break;default:m.skip()}h.queryResult=v;break;default:f.skip()}return c}catch(J){return f=new n("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:J}),a.error(f),{queryResult:{featureResult:d.createFeatureResult()}}}}})},"esri/core/pbf":function(){define(["require","exports"],function(h,d){return function(){function d(d,h,g,e){this._tag=0;this._dataType=99;this._data=d;this._dataView=h;this._pos=g||0;
this._end=e||d.byteLength}d.prototype.clone=function(){return new d(this._data,this._dataView,this._pos,this._end)};d.prototype.pos=function(){return this._pos};d.prototype.next=function(d){for(;;){if(this._pos===this._end)return!1;var f=this._decodeVarint();this._tag=f>>3;this._dataType=f&7;if(!d||d===this._tag)break;this.skip()}return!0};d.prototype.empty=function(){return this._pos>=this._end};d.prototype.tag=function(){return this._tag};d.prototype.getInt32=function(){return this._decodeVarint()};
d.prototype.getInt64=function(){return this._decodeVarint()};d.prototype.getUInt32=function(){var d=4294967295,d=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return d};
d.prototype.getUInt64=function(){return this._decodeVarint()};d.prototype.getSInt32=function(){var d=this.getUInt32();return d>>>1^-(d&1)|0};d.prototype.getSInt64=function(){return this._decodeSVarint()};d.prototype.getBool=function(){var d=0!==this._data[this._pos];this._skip(1);return d};d.prototype.getEnum=function(){return this._decodeVarint()};d.prototype.getFixed64=function(){var d=this._dataView,h=this._pos,d=d.getUint32(h,!0)+4294967296*d.getUint32(h+4,!0);this._skip(8);return d};d.prototype.getSFixed64=
function(){var d=this._dataView,h=this._pos,d=d.getUint32(h,!0)+4294967296*d.getInt32(h+4,!0);this._skip(8);return d};d.prototype.getDouble=function(){var d=this._dataView.getFloat64(this._pos,!0);this._skip(8);return d};d.prototype.getFixed32=function(){var d=this._dataView.getUint32(this._pos,!0);this._skip(4);return d};d.prototype.getSFixed32=function(){var d=this._dataView.getInt32(this._pos,!0);this._skip(4);return d};d.prototype.getFloat=function(){var d=this._dataView.getFloat32(this._pos,
!0);this._skip(4);return d};d.prototype.getString=function(){var d=this._getLength(),h=this._pos,h=this._toString(this._data,h,h+d);this._skip(d);return h};d.prototype.getBytes=function(){var d=this._getLength(),h=this._pos,h=this._toBytes(this._data,h,h+d);this._skip(d);return h};d.prototype.getMessage=function(){var f=this._getLength(),h=this._pos,h=new d(this._data,this._dataView,h,h+f);this._skip(f);return h};d.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;
case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};d.prototype._skip=function(d){if(this._pos+d>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=d};d.prototype._decodeVarint=function(){var d=this._data,h=this._pos,g=0,e;if(10<=this._end-h){if(e=d[h++],g|=e&127,0!==(e&128)&&(e=d[h++],g|=(e&127)<<7,0!==(e&128)&&(e=d[h++],g|=(e&127)<<14,0!==(e&128)&&(e=d[h++],g|=(e&127)<<21,0!==(e&128)&&
(e=d[h++],g+=268435456*(e&127),0!==(e&128)&&(e=d[h++],g+=34359738368*(e&127),0!==(e&128)&&(e=d[h++],g+=4398046511104*(e&127),0!==(e&128)&&(e=d[h++],g+=562949953421312*(e&127),0!==(e&128)&&(e=d[h++],g+=72057594037927936*(e&127),0!==(e&128)&&(e=d[h++],g+=0x7fffffffffffffff*(e&127),0!==(e&128)))))))))))throw Error("Varint too long!");}else{for(var c=1;h!==this._end;){e=d[h];if(0===(e&128))break;++h;g+=(e&127)*c;c*=128}if(h===this._end)throw Error("Varint overrun!");++h;g+=e*c}this._pos=h;return g};d.prototype._decodeSVarint=
function(){var d=this._decodeVarint();return d%2?-(d+1)/2:d/2};d.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};d.prototype._toString=function(d,h,g){var e="",c="";for(g=Math.min(this._end,g);h<g;++h){var f=d[h];f&128?c+="%"+f.toString(16):(e+=decodeURIComponent(c)+String.fromCharCode(f),c="")}c.length&&(e+=decodeURIComponent(c));return e};d.prototype._toBytes=function(d,h,g){g=Math.min(this._end,g);return new Uint8Array(d.buffer,
h,g-h)};return d}()})},"esri/tasks/operations/pbfDehydratedFeatureSet":function(){define("require exports ../../Graphic ../../core/compilerUtils ../../geometry/SpatialReference ../../layers/support/Field".split(" "),function(h,d,n,f,l,g){function e(a,b,c,d){return b}function c(a,b,c,d){switch(c){case 0:return m(a,b+d,0);case 1:return a.translate[1]-(b+d)*a.scale[1]}}function p(a,b,c,d){switch(c){case 0:return m(a,b+d,0);case 1:return a.translate[1]-(b+d)*a.scale[1];case 2:return m(a,b,2)}}function b(a,
b,c,d){switch(c){case 0:return m(a,b+d,0);case 1:return a.translate[1]-(b+d)*a.scale[1];case 2:return m(a,b,3)}}function a(a,b,c,d){switch(c){case 0:return m(a,b+d,0);case 1:return a.translate[1]-(b+d)*a.scale[1];case 2:return m(a,b,3);case 3:return m(a,b,3)}}function m(a,b,c){return a.translate[c]+b*a.scale[c]}Object.defineProperty(d,"__esModule",{value:!0});h=function(){function d(a){this.options=a;this.geometryTypes=["point","multipoint","polyline","polygon"];this.previousCoordinate=[0,0];this.transform=
null;this.applyTransform=e;this.lengths=[];this.vertexDimension=this.toAddInCurrentPath=this.currentLengthIndex=0;this.coordinateBuffer=null;this.coordinateBufferPtr=0}d.prototype.createFeatureResult=function(){return{exceededTransferLimit:!1,features:[],fields:[],hasM:!1,hasZ:!1,geometryType:null,objectIdFieldName:null,globalIdFieldName:null,geometryProperties:null,geohashFieldName:null,spatialReference:null,transform:null}};d.prototype.finishFeatureResult=function(a){this.options.applyTransform&&
(a.transform=null)};d.prototype.createSpatialReference=function(){return new l};d.prototype.addField=function(a,b){a.fields.push(g.fromJSON(b))};d.prototype.addFeature=function(a,b){var c=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(0<c)for(var d in b.attributes){var e=b.attributes[d];"string"===typeof e&&e.length>c&&delete b.attributes[d]}a.features.push(b)};d.prototype.prepareFeatures=function(a){this.options.applyTransform&&a.transform&&(this.transform=a.transform,
this.applyTransform=this.deriveApplyTransform(a));this.vertexDimension=2;a.hasZ&&this.vertexDimension++;a.hasM&&this.vertexDimension++;switch(a.geometryType){case "point":this.addCoordinate=this.addCoordinatePoint.bind(this);this.createGeometry=this.createPointGeometry.bind(this);break;case "polygon":this.addCoordinate=this.addCoordinatePolygon.bind(this);this.createGeometry=this.createPolygonGeometry.bind(this);break;case "polyline":this.addCoordinate=this.addCoordinatePolyline.bind(this);this.createGeometry=
this.createPolylineGeometry.bind(this);break;case "multipoint":this.addCoordinate=this.addCoordinateMultipoint.bind(this);this.createGeometry=this.createMultipointGeometry.bind(this);break;default:f.neverReached(a.geometryType)}};d.prototype.createFeature=function(a){this.currentLengthIndex=this.lengths.length=0;this.previousCoordinate[0]=0;this.previousCoordinate[1]=0;this.coordinateBuffer=null;this.coordinateBufferPtr=0;return{uid:n.generateUID(),objectId:null,attributes:{},geometry:null,visible:!0}};
d.prototype.addLength=function(a,b,c){0===this.lengths.length&&(this.toAddInCurrentPath=b);this.lengths.push(b)};d.prototype.createPointGeometry=function(a){a={type:"point",x:0,y:0,spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM};a.hasZ&&(a.z=0);a.hasM&&(a.m=0);return a};d.prototype.addCoordinatePoint=function(a,b,c,d){b=this.applyTransform(this.transform,b,d,0);switch(d){case 0:a.x=b;break;case 1:a.y=b;break;case 2:a.hasZ?a.z=b:a.m=b;break;case 3:a.m=b}};d.prototype.transformPathLikeValue=
function(a,b){var c=0;1>=b&&(c=this.previousCoordinate[b],this.previousCoordinate[b]+=a);return this.applyTransform(this.transform,a,b,c)};d.prototype.addCoordinatePolyline=function(a,b,c,d){this.dehydratedAddPointsCoordinate(a.paths,b,c,d)};d.prototype.addCoordinatePolygon=function(a,b,c,d){this.dehydratedAddPointsCoordinate(a.rings,b,c,d)};d.prototype.addCoordinateMultipoint=function(a,b,c){0===c&&a.points.push([]);b=this.transformPathLikeValue(b,c);a.points[a.points.length-1].push(b)};d.prototype.createPolygonGeometry=
function(a){return{type:"polygon",rings:[[]],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};d.prototype.createPolylineGeometry=function(a){return{type:"polyline",paths:[[]],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};d.prototype.createMultipointGeometry=function(a){return{type:"multipoint",points:[],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};d.prototype.dehydratedAddPointsCoordinate=function(a,b,c,d){null===this.coordinateBuffer&&(c=
this.lengths.reduce(function(a,b){return a+b},0),this.coordinateBuffer=new Float64Array(c*this.vertexDimension));0===d&&0===this.toAddInCurrentPath--&&(a.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);b=this.transformPathLikeValue(b,d);a=a[a.length-1];0===d&&a.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension));this.coordinateBuffer[this.coordinateBufferPtr++]=
b};d.prototype.deriveApplyTransform=function(d){var e=d.hasZ;d=d.hasM;return e&&d?a:e?p:d?b:c};return d}();d.Context=h})},"esri/Graphic":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./PopupTemplate ./core/JSONSupport ./core/lang ./core/accessorSupport/decorators ./geometry/support/typeUtils ./symbols/support/jsonUtils ./symbols/support/typeUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k){h=function(c){function d(a,
b,d,e){a=c.call(this,a,b,d,e)||this;a.layer=null;a.popupTemplate=null;a.sourceLayer=null;Object.defineProperty(a,"uid",{value:h.generateUID()});return a}f(d,c);h=d;d.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:d}};Object.defineProperty(d.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{set:function(a){var b=this._get("visible");b!==a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,
configurable:!0});d.prototype.getEffectivePopupTemplate=function(){return this.popupTemplate||this.sourceLayer&&this.sourceLayer.popupTemplate};d.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};d.prototype.setAttribute=function(a,b){var c;this.attributes?(c=this.getAttribute(a),this.attributes[a]=b,this._notifyLayer("attributes",c,b,a)):(this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",void 0,b,a))};d.prototype.toJSON=function(){return{geometry:this.geometry&&
this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:n({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};d.prototype.clone=function(){return new h({attributes:p.clone(this.attributes),geometry:this.geometry&&this.geometry.clone()||null,layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:this.symbol&&this.symbol.clone()||null,visible:this.visible})};d.prototype._notifyLayer=function(a,
b,c,d){this.layer&&(b={graphic:this,property:a,oldValue:b,newValue:c},"attributes"===a&&(b.attributeName=d),this.layer.graphicChanged(b))};var h;l([b.property({value:null})],d.prototype,"attributes",null);l([b.property({value:null,types:a.types,json:{read:g.fromJSON}})],d.prototype,"geometry",null);l([b.property()],d.prototype,"layer",void 0);l([b.property({type:e})],d.prototype,"popupTemplate",void 0);l([b.property()],d.prototype,"sourceLayer",void 0);l([b.property({value:null,types:k.types,json:{read:m.read}})],
d.prototype,"symbol",null);l([b.property({type:Boolean,value:!0,set:function(a){}})],d.prototype,"visible",null);return d=h=l([b.subclass("esri.Graphic")],d)}(b.declared(c));var q=0;(function(a){a.generateUID=function(){return q++}})(h||(h={}));return h})},"esri/PopupTemplate":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Collection ./core/JSONSupport ./core/lang ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./support/arcadeUtils ./support/ContentElement ./support/ExpressionInfo ./support/FieldInfo ./support/LayerOptions ./support/RelatedRecordsInfo ./support/ContentElement/Attachments ./support/ContentElement/ContentElement ./support/ContentElement/Fields ./support/ContentElement/Media ./support/ContentElement/Text ./support/ContentElement/Media/types ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A,x,C,y,E,D){var F=g.ofType({key:"type",defaultKeyValue:"button",base:y,typeMap:{button:E,toggle:D}}),L={base:z,key:"type",typeMap:{media:A,text:x,attachments:w,fields:B}},P=p.getLogger("esri.PopupTemplate");return function(d){function e(){var a=null!==d&&d.apply(this,arguments)||this;a.actions=null;a.content="";a.expressionInfos=null;a.fieldInfos=null;a.layerOptions=null;a.lastEditInfoEnabled=!0;a.outFields=null;a.overwriteActions=!1;a.title="";
a.relatedRecordsInfo=null;return a}f(e,d);h=e;e.prototype.castContent=function(a){if(Array.isArray(a))return a.map(function(a){return m.ensureOneOfType(L,a)});if("string"===typeof a||"function"===typeof a||a instanceof HTMLElement||b.isThenable(a))return a;P.error("content error","unsupported content value",{value:a});return null};e.prototype.readContent=function(a,b){var c=b.description,d=b.mediaInfos;a=b.popupElements;b=b.showAttachments;if(Array.isArray(a)&&0<a.length)return a.map(function(a){if("media"===
a.type)return!a.mediaInfos&&d&&(a.mediaInfos=d),A.fromJSON(a);if("text"===a.type)return!a.text&&c&&(a.text=c),x.fromJSON(a);if("attachments"===a.type)return w.fromJSON(a);if("fields"===a.type)return B.fromJSON(a)}).filter(Boolean);a=[];c?a.push(new x({text:c})):a.push(new B);Array.isArray(d)&&d.length&&a.push(A.fromJSON({mediaInfos:d}));b&&a.push(w.fromJSON({displayType:"list"}));return a.length?a:c};e.prototype.writeContent=function(a,b){b.showAttachments=!1;"string"===typeof a?b.description=a:Array.isArray(a)&&
(b.popupElements=a.map(function(a){return a&&a.toJSON()}),b.popupElements.forEach(function(a){"attachments"!==a.type||b.showAttachments?"media"!==a.type||b.mediaInfos?"text"!==a.type||b.description||(a.text&&(b.description=a.text),delete a.text):(a.mediaInfos&&(b.mediaInfos=c.clone(a.mediaInfos)),delete a.mediaInfos):b.showAttachments=!0}))};e.prototype.writeLayerOptions=function(a,b){b.layerOptions=a&&null!==a.showNoDataRecords?a.toJSON():null};e.prototype.writeTitle=function(a,b){b.title=a||""};
Object.defineProperty(e.prototype,"requiredFields",{get:function(){return this.collectRequiredFields()},enumerable:!0,configurable:!0});e.prototype.clone=function(){var a=this.actions,a=a?c.clone(a.toArray()):[];return new h({actions:a,content:Array.isArray(this.content)?c.clone(this.content):this.content,fieldInfos:Array.isArray(this.fieldInfos)?c.clone(this.fieldInfos):null,layerOptions:this.layerOptions?c.clone(this.layerOptions):null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?
c.clone(this.relatedRecordsInfo):null,title:this.title})};e.prototype.collectRequiredFields=function(){var a=(this.outFields||[]).concat(this._getActionsFields(this.actions),this._getTitleFields(this.title),this._getContentFields(this.content),this._getExpressionInfoFields(this.expressionInfos));return-1!==a.indexOf("*")?["*"]:a.filter(function(a,b,c){return a&&b===c.indexOf(a)})};e.prototype._getContentElementFields=function(a){var b=this;if(!a||"attachments"===a.type)return[];if("fields"===a.type)return this._getFieldInfoFields(a.fieldInfos||
this.fieldInfos);if("media"===a.type)return(a.mediaInfos||[]).reduce(function(a,c){return a.concat(b._getMediaInfoFields(c))},[]);if("text"===a.type)return this._extractFieldNames(a.text)};e.prototype._getMediaInfoFields=function(a){var b=a.caption,c=a.value||{},d=c.fields,e=void 0===d?[]:d,d=c.normalizeField,f=c.tooltipField,g=c.sourceURL,c=c.linkURL;a=this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(g),this._extractFieldNames(c),e);d&&a.push(d);f&&a.push(f);
return a};e.prototype._getContentFields=function(a){var b=this;return"string"===typeof a?this._extractFieldNames(a):Array.isArray(a)?a.reduce(function(a,c){return a.concat(b._getContentElementFields(c))},[]):[]};e.prototype._getExpressionInfoFields=function(a){return a?a.reduce(function(a,b){return a.concat(k.extractFieldNames(b.expression))},[]):[]};e.prototype._getFieldInfoFields=function(a){return a?a.filter(function(a){return"undefined"===typeof a.visible?!0:!!a.visible}).map(function(a){return a.fieldName}).filter(function(a){return-1===
a.indexOf("relationships/")&&-1===a.indexOf("expression/")}):[]};e.prototype._getActionsFields=function(a){var b=this;return a?a.toArray().reduce(function(a,c){return a.concat(b._getActionFields(c))},[]):[]};e.prototype._getActionFields=function(a){var b=a.className,c=a.type,c="button"===c||"toggle"===c?a.image:"";return this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(c))};e.prototype._getTitleFields=function(a){return"string"===typeof a?this._extractFieldNames(a):
[]};e.prototype._extractFieldNames=function(a){if(!a||"string"!==typeof a)return[];a=a.match(/{[^}]*}/g);if(!a)return[];var b=/\{(\w+):.+\}/;return(a=a.filter(function(a){return!(0===a.indexOf("{relationships/")||0===a.indexOf("{expression/"))}).map(function(a){return a.replace(b,"{$1}")}))?a.map(function(a){return a.slice(1,-1)}):[]};var h;l([a.property({type:F})],e.prototype,"actions",void 0);l([a.property()],e.prototype,"content",void 0);l([a.cast("content")],e.prototype,"castContent",null);l([a.reader("content",
["description","popupElements","mediaInfos","showAttachments"])],e.prototype,"readContent",null);l([a.writer("content",{popupElements:{type:g.ofType(q.types)},showAttachments:{type:Boolean},mediaInfos:{type:g.ofType(C.default)},description:{type:String}})],e.prototype,"writeContent",null);l([a.property({type:[v],json:{write:!0}})],e.prototype,"expressionInfos",void 0);l([a.property({type:[u],json:{write:!0}})],e.prototype,"fieldInfos",void 0);l([a.property({type:t})],e.prototype,"layerOptions",void 0);
l([a.writer("layerOptions")],e.prototype,"writeLayerOptions",null);l([a.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],e.prototype,"lastEditInfoEnabled",void 0);l([a.property()],e.prototype,"outFields",void 0);l([a.property()],e.prototype,"overwriteActions",void 0);l([a.property({json:{type:String}})],e.prototype,"title",void 0);l([a.writer("title")],e.prototype,"writeTitle",null);l([a.property({type:r,json:{write:!0}})],e.prototype,
"relatedRecordsInfo",void 0);l([a.property({dependsOn:"actions title content fieldInfos expressionInfos outFields".split(" "),readOnly:!0})],e.prototype,"requiredFields",null);return e=h=l([a.subclass("esri.PopupTemplate")],e)}(a.declared(e))})},"esri/support/ContentElement":function(){define("require exports ./ContentElement/Attachments ./ContentElement/ContentElement ./ContentElement/Fields ./ContentElement/Media ./ContentElement/Text".split(" "),function(h,d,n,f,l,g,e){Object.defineProperty(d,
"__esModule",{value:!0});d.AttachmentsContentElement=n;d.BaseContentElement=f;d.FieldsContentElement=l;d.MediaContentElement=g;d.TextContentElement=e;d.isContentElement=function(c){return c instanceof d.BaseContentElement};d.types={base:null,key:"type",typeMap:{attachment:d.AttachmentsContentElement,fields:d.FieldsContentElement,media:d.MediaContentElement,text:d.TextContentElement}}})},"esri/support/ContentElement/Attachments":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../../layers/support/AttachmentInfo ./ContentElement".split(" "),
function(h,d,n,f,l,g,e,c){return function(c){function b(a){a=c.call(this)||this;a.attachmentInfos=null;a.displayType=null;a.type="attachments";return a}n(b,c);a=b;b.prototype.clone=function(){return new a({displayType:this.displayType,attachmentInfos:this.attachmentInfos?l.clone(this.attachmentInfos):null})};var a;f([g.property({type:[e]})],b.prototype,"attachmentInfos",void 0);f([g.property({type:String,json:{write:!0}})],b.prototype,"displayType",void 0);f([g.property({type:String,readOnly:!0,json:{read:!1,
write:!0}})],b.prototype,"type",void 0);return b=a=f([g.subclass("esri.support.ContentElement.Attachments")],b)}(g.declared(c))})},"esri/layers/support/AttachmentInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this)||this;a.contentType=null;a.id=null;a.keywords=
null;a.name=null;a.parentObjectId=null;a.size=null;a.url=null;return a}n(d,c);b=d;d.prototype.clone=function(){return new b({contentType:this.contentType,id:this.id,keywords:this.keywords,name:this.name,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};var b;f([g.property({type:String})],d.prototype,"contentType",void 0);f([g.property({type:e.Integer})],d.prototype,"id",void 0);f([g.property({type:String})],d.prototype,"keywords",void 0);f([g.property({type:String})],d.prototype,"name",
void 0);f([g.property({json:{read:!1}})],d.prototype,"parentObjectId",void 0);f([g.property({type:e.Integer})],d.prototype,"size",void 0);f([g.property({json:{read:!1}})],d.prototype,"url",void 0);return d=b=f([g.subclass("esri.layers.support.AttachmentInfo")],d)}(g.declared(l))})},"esri/support/ContentElement/ContentElement":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g){return function(d){function c(c){c=d.call(this)||this;c.type=null;return c}n(c,d);f([g.property({type:["attachments","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=f([g.subclass("esri.support.ContentElement.ContentElement")],c)}(g.declared(l))})},"esri/support/ContentElement/Fields":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../../support/FieldInfo ./ContentElement".split(" "),
function(h,d,n,f,l,g,e,c){return function(c){function b(a){a=c.call(this)||this;a.fieldInfos=null;a.type="fields";return a}n(b,c);a=b;b.prototype.writeFieldInfos=function(a,b){b.fieldInfos=a&&a.map(function(a){return a.toJSON()})};b.prototype.clone=function(){return new a({fieldInfos:Array.isArray(this.fieldInfos)?l.clone(this.fieldInfos):null})};var a;f([g.property({type:[e]})],b.prototype,"fieldInfos",void 0);f([g.writer("fieldInfos")],b.prototype,"writeFieldInfos",null);f([g.property({type:String,
readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=a=f([g.subclass("esri.support.ContentElement.Fields")],b)}(g.declared(c))})},"esri/support/FieldInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ./FieldInfo/Format".split(" "),function(h,d,n,f,l,g,e,c,p){var b=g({richtext:"rich-text",textarea:"text-area",textbox:"text-box"});
return function(a){function d(b){b=a.call(this)||this;b.fieldName=null;b.format=null;b.isEditable=!1;b.label=null;b.stringFieldOption="text-box";b.statisticType=null;b.tooltip=null;b.visible=!0;return b}n(d,a);g=d;d.prototype.writeStringFieldOption=function(a,c){c.stringFieldOption=b.toJSON(a)};d.prototype.readStringFieldOption=function(a){if(a)return b.fromJSON(a)};d.prototype.clone=function(){return new g({fieldName:this.fieldName,format:this.format?e.clone(this.format):null,isEditable:this.isEditable,
label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})};var g;f([c.property({type:String,json:{write:!0}})],d.prototype,"fieldName",void 0);f([c.property({type:p,json:{write:!0}})],d.prototype,"format",void 0);f([c.property({type:Boolean,json:{write:!0,default:!1}})],d.prototype,"isEditable",void 0);f([c.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);f([c.property({type:b.apiValues,json:{write:!0,
default:"text-box",type:b.jsonValues}})],d.prototype,"stringFieldOption",void 0);f([c.writer("stringFieldOption")],d.prototype,"writeStringFieldOption",null);f([c.reader("stringFieldOption")],d.prototype,"readStringFieldOption",null);f([c.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],d.prototype,"statisticType",void 0);f([c.property({type:String,json:{write:!0}})],d.prototype,"tooltip",void 0);f([c.property({type:Boolean,json:{write:!0}})],d.prototype,"visible",void 0);
return d=g=f([c.subclass("esri.support.FieldInfo")],d)}(c.declared(l))})},"esri/support/FieldInfo/Format":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/date ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(h,d,n,f,l,g,e,c){return function(d){function b(a){a=d.call(this)||this;a.dateFormat=null;a.digitSeparator=!1;a.places=null;return a}n(b,d);a=b;b.prototype.clone=
function(){return new a({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})};var a;f([e.enumeration.serializable()(l.dictionary)],b.prototype,"dateFormat",void 0);f([e.property({type:Boolean,json:{write:!0}})],b.prototype,"digitSeparator",void 0);f([e.property({type:c.Integer,json:{write:!0}})],b.prototype,"places",void 0);return b=a=f([e.subclass("esri.support.FieldInfo.Format")],b)}(e.declared(g))})},"esri/core/date":function(){define(["require","exports","./kebabDictionary"],
function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});var f={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",
"short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",
"short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};d.dictionary=n.strict()({shortDate:"short-date",shortDateLE:"short-date-le",longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",shortDateLELongTime:"short-date-le-long-time",
shortDateShortTime:"short-date-short-time",shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",shortDateLELongTime24:"short-date-le-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});d.toJSON=d.dictionary.toJSON.bind(d.dictionary);d.fromJSON=d.dictionary.fromJSON.bind(d.dictionary);d.getFormat=function(d){return f[d]}})},
"esri/support/ContentElement/Media":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./ContentElement ./Media/BarChart ./Media/ColumnChart ./Media/Image ./Media/LineChart ./Media/PieChart ./Media/types".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k){return function(d){function e(a){a=d.call(this)||this;a.mediaInfos=null;a.type="media";return a}n(e,d);h=e;e.prototype.readMediaInfos=
function(d){return d&&d.map(function(d){if("image"===d.type)return b.fromJSON(d);if("barchart"===d.type)return c.fromJSON(d);if("columnchart"===d.type)return p.fromJSON(d);if("linechart"===d.type)return a.fromJSON(d);if("piechart"===d.type)return m.fromJSON(d)}).filter(Boolean)};e.prototype.writeMediaInfos=function(a,b){b.mediaInfos=a&&a.map(function(a){return a.toJSON()})};e.prototype.clone=function(){return new h({mediaInfos:this.mediaInfos?l.clone(this.mediaInfos):null})};var h;f([g.property({types:[k.default]})],
e.prototype,"mediaInfos",void 0);f([g.reader("mediaInfos")],e.prototype,"readMediaInfos",null);f([g.writer("mediaInfos")],e.prototype,"writeMediaInfos",null);f([g.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0);return e=h=f([g.subclass("esri.support.ContentElement.Media")],e)}(g.declared(e))})},"esri/support/ContentElement/Media/BarChart":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Chart ./Chart/utils".split(" "),
function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this)||this;a.type="bar-chart";return a}n(d,c);b=d;d.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;f([l.property({type:["bar-chart"],readOnly:!0,json:{read:!1,write:e.chartTypeKebabDict.write}})],d.prototype,"type",void 0);return d=b=f([l.subclass("esri.support.ContentElement.Media.BarChart")],d)}(l.declared(g))})},"esri/support/ContentElement/Media/Chart":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Media ./Chart/Value".split(" "),
function(h,d,n,f,l,g,e){return function(c){function d(b){b=c.call(this)||this;b.type=null;b.value=null;return b}n(d,c);f([l.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],d.prototype,"type",void 0);f([l.property({type:e,json:{write:!0}})],d.prototype,"value",void 0);return d=f([l.subclass("esri.support.ContentElement.Media.Chart")],d)}(l.declared(g))})},"esri/support/ContentElement/Media/Media":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g){return function(d){function c(c){c=d.call(this)||this;c.caption="";c.title="";c.type=null;return c}n(c,d);f([g.property({type:String,json:{write:!0}})],c.prototype,"caption",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);f([g.property({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=f([g.subclass("esri.support.ContentElement.Media.Media")],c)}(g.declared(l))})},
"esri/support/ContentElement/Media/Chart/Value":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/JSONSupport ../../../../core/lang ../../../../core/accessorSupport/decorators ./Series".split(" "),function(h,d,n,f,l,g,e,c){return function(d){function b(a){a=d.call(this)||this;a.fields=[];a.normalizeField=null;a.series=[];a.theme=null;a.tooltipField=null;return a}n(b,d);a=b;b.prototype.clone=function(){return new a({fields:g.clone(this.fields),
normalizeField:this.normalizeField,tooltipField:this.tooltipField})};var a;f([e.property({type:[String],json:{write:!0}})],b.prototype,"fields",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"normalizeField",void 0);f([e.property({type:[c],json:{read:!1}})],b.prototype,"series",void 0);f([e.property({type:String,json:{read:!1}})],b.prototype,"theme",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"tooltipField",void 0);return b=a=f([e.subclass("esri.support.Media.Chart.Value")],
b)}(e.declared(l))})},"esri/support/ContentElement/Media/Chart/Series":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this)||this;b.tooltip=null;b.x=null;b.y=null;return b}n(c,d);e=c;c.prototype.clone=function(){return new e({tooltip:this.tooltip,x:this.x,y:this.y})};var e;f([g.property()],
c.prototype,"tooltip",void 0);f([g.property()],c.prototype,"x",void 0);f([g.property()],c.prototype,"y",void 0);return c=e=f([g.subclass("esri.support.Media.Chart.Series")],c)}(g.declared(l))})},"esri/support/ContentElement/Media/Chart/utils":function(){define(["require","exports","../../../../core/kebabDictionary"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.chartTypeKebabDict=n.strict()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})})},
"esri/support/ContentElement/Media/ColumnChart":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Chart ./Chart/utils".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this)||this;a.type="column-chart";return a}n(d,c);b=d;d.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;f([l.property({type:["column-chart"],
readOnly:!0,json:{read:!1,write:e.chartTypeKebabDict.write}})],d.prototype,"type",void 0);return d=b=f([l.subclass("esri.support.ContentElement.Media.ColumnChart")],d)}(l.declared(g))})},"esri/support/ContentElement/Media/Image":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Media ./Image/Value".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this)||this;
a.refreshInterval=null;a.type="image";a.value=null;return a}n(d,c);b=d;d.prototype.clone=function(){return new b({title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})};var b;f([l.property({type:Number,json:{write:!0}})],d.prototype,"refreshInterval",void 0);f([l.property({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],d.prototype,"type",void 0);f([l.property({type:e,json:{write:!0}})],d.prototype,"value",void 0);return d=b=f([l.subclass("esri.support.ContentElement.Media.Image")],
d)}(l.declared(g))})},"esri/support/ContentElement/Media/Image/Value":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/JSONSupport ../../../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this)||this;b.linkURL=null;b.sourceURL=null;return b}n(c,d);e=c;c.prototype.clone=function(){return new e({linkURL:this.linkURL,sourceURL:this.sourceURL})};var e;
f([g.property({type:String,json:{write:!0}})],c.prototype,"linkURL",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"sourceURL",void 0);return c=e=f([g.subclass("esri.support.MediaInfo.Image.Value")],c)}(g.declared(l))})},"esri/support/ContentElement/Media/LineChart":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Chart ./Chart/utils".split(" "),function(h,d,n,f,l,g,
e){return function(c){function d(a){a=c.call(this)||this;a.type="line-chart";return a}n(d,c);b=d;d.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;f([l.property({type:["line-chart"],readOnly:!0,json:{read:!1,write:e.chartTypeKebabDict.write}})],d.prototype,"type",void 0);return d=b=f([l.subclass("esri.support.ContentElement.Media.LineChart")],d)}(l.declared(g))})},"esri/support/ContentElement/Media/PieChart":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Chart ./Chart/utils".split(" "),
function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this)||this;a.type="pie-chart";return a}n(d,c);b=d;d.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;f([l.property({type:["pie-chart"],readOnly:!0,json:{read:!1,write:e.chartTypeKebabDict.write}})],d.prototype,"type",void 0);return d=b=f([l.subclass("esri.support.ContentElement.Media.PieChart")],d)}(l.declared(g))})},"esri/support/ContentElement/Media/types":function(){define("require exports ./BarChart ./ColumnChart ./Image ./LineChart ./Media ./PieChart".split(" "),
function(h,d,n,f,l,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});d.types={base:e,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":n,"column-chart":f,"line-chart":g,"pie-chart":c,image:l}};d.default=d.types})},"esri/support/ContentElement/Text":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ContentElement".split(" "),function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this)||
this;b.text=null;b.type="text";return b}n(c,d);e=c;c.prototype.clone=function(){return new e({text:this.text})};var e;f([l.property({type:String,json:{write:!0}})],c.prototype,"text",void 0);f([l.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=e=f([l.subclass("esri.support.ContentElement.Text")],c)}(l.declared(g))})},"esri/support/ExpressionInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this)||this;b.name=null;b.title=null;b.expression=null;b.returnType=null;return b}n(c,d);e=c;c.prototype.clone=function(){return new e({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})};var e;f([g.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"expression",
void 0);f([g.property({type:["string","number"],json:{write:!0}})],c.prototype,"returnType",void 0);return c=e=f([g.subclass("esri.support.ExpressionInfo")],c)}(g.declared(l))})},"esri/support/LayerOptions":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this)||this;b.showNoDataRecords=null;return b}n(c,d);e=c;
c.prototype.clone=function(){return new e({showNoDataRecords:this.showNoDataRecords})};var e;f([g.property({type:Boolean,json:{write:!0}})],c.prototype,"showNoDataRecords",void 0);return c=e=f([g.subclass("esri.support.LayerOptions")],c)}(g.declared(l))})},"esri/support/RelatedRecordsInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./RelatedRecordsInfo/FieldOrder".split(" "),
function(h,d,n,f,l,g,e,c){return function(d){function b(a){a=d.call(this)||this;a.showRelatedRecords=null;a.orderByFields=null;return a}n(b,d);a=b;b.prototype.clone=function(){return new a({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?g.clone(this.orderByFields):null})};var a;f([e.property({type:Boolean,json:{write:!0}})],b.prototype,"showRelatedRecords",void 0);f([e.property({type:[c],json:{write:!0}})],b.prototype,"orderByFields",void 0);return b=a=f([e.subclass("esri.support.RelatedRecordsInfo")],
b)}(e.declared(l))})},"esri/support/RelatedRecordsInfo/FieldOrder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this)||this;b.field=null;b.order=null;return b}n(c,d);e=c;c.prototype.clone=function(){return new e({field:this.field,order:this.order})};var e;f([g.property({type:String,json:{write:!0}})],
c.prototype,"field",void 0);f([g.property({type:["asc","desc"],json:{write:!0}})],c.prototype,"order",void 0);return c=e=f([g.subclass("esri.support.RelatedRecordsInfo.FieldOrder")],c)}(g.declared(l))})},"esri/support/actions/ActionBase":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(a){a=
c.call(this)||this;a.active=!1;a.className=null;a.disabled=!1;a.id=null;a.indicator=!1;a.title=null;a.type=null;a.visible=!0;return a}n(d,c);b=d;d.prototype.clone=function(){return new b({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};var b;f([e.property()],d.prototype,"active",void 0);f([e.property()],d.prototype,"className",void 0);f([e.property()],d.prototype,"disabled",void 0);f([e.property()],d.prototype,
"id",void 0);f([e.property()],d.prototype,"indicator",void 0);f([e.property()],d.prototype,"title",void 0);f([e.property()],d.prototype,"type",void 0);f([e.property()],d.prototype,"visible",void 0);return d=b=f([e.subclass("esri.support.actions.ActionBase")],d)}(e.declared(l,g.Identifiable))})},"esri/support/actions/ActionButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),
function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this)||this;b.image=null;b.type="button";return b}n(c,d);e=c;c.prototype.clone=function(){return new e({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};var e;f([l.property()],c.prototype,"image",void 0);return c=e=f([l.subclass("esri.support.Action.ActionButton")],c)}(l.declared(g))})},"esri/support/actions/ActionToggle":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),
function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this)||this;b.image=null;b.type="toggle";b.value=!1;return b}n(c,d);e=c;c.prototype.clone=function(){return new e({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};var e;f([l.property()],c.prototype,"image",void 0);f([l.property()],c.prototype,"value",void 0);return c=e=f([l.subclass("esri.support.Action.ActionToggle")],
c)}(l.declared(g))})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w){function z(a,b,c){b=a?A[a.type]||null:
null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new f("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function B(a,b,c){if(!a)return null;if(!c||"web-scene"!==c.origin||a.isInstanceOf(v)||a.isInstanceOf(t))return a.write(b,c);var d=w.to3D(a);if(d.symbol)return d.symbol.write(b,c);c.messages&&c.messages.push(new n("symbol:unsupported","Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",
{symbol:a,context:c,error:d.error}));return null}Object.defineProperty(d,"__esModule",{value:!0});var A={esriSMS:q,esriPMS:p,esriTS:u,esriSLS:k,esriSFS:m,esriPFS:c,PointSymbol3D:b,LineSymbol3D:g,PolygonSymbol3D:a,MeshSymbol3D:e,LabelSymbol3D:l,styleSymbolReference:t};d.read=z;d.writeTarget=function(a,b,c,d){(a=B(a,{},d))&&(b[c]=a)};d.write=B;d.fromJSON=function(a,b){return z(a,null,b)};d.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new r}c&&c.read(a,
b);return c}})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),function(h,d,n,f,l,g,e,c,p,b,a){var m=l.ofType({base:null,key:"type",typeMap:{text:p}});return function(c){function d(a){a=c.call(this)||this;a.verticalOffset=null;a.callout=null;a.styleOrigin=
null;a.symbolLayers=new m;a.type="label-3d";return a}n(d,c);h=d;d.prototype.supportsCallout=function(){return!0};d.prototype.hasVisibleCallout=function(){return b.hasVisibleCallout(this)};d.prototype.hasVisibleVerticalOffset=function(){return b.hasVisibleVerticalOffset(this)};d.prototype.clone=function(){return new h({styleOrigin:g.clone(this.styleOrigin),symbolLayers:g.clone(this.symbolLayers),thumbnail:g.clone(this.thumbnail),callout:g.clone(this.callout),verticalOffset:g.clone(this.verticalOffset)})};
var h;f([e.property({type:a.default,json:{write:!0}})],d.prototype,"verticalOffset",void 0);f([e.property(b.calloutProperty)],d.prototype,"callout",void 0);f([e.property({json:{read:!1,write:!1}})],d.prototype,"styleOrigin",void 0);f([e.property({type:m})],d.prototype,"symbolLayers",void 0);f([e.enumeration.serializable()({LabelSymbol3D:"label-3d"})],d.prototype,"type",void 0);return d=h=f([e.subclass("esri.symbols.LabelSymbol3D")],d)}(e.declared(c))})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/kebabDictionary ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A,x){var C={icon:v,object:t,line:u,path:r,fill:q,extrude:k,text:B},y=l.ofType({base:z,key:"type",typeMap:C}),E=e.strict()({PointSymbol3D:"point-3d",PolygonSymbol3D:"polygon-3d",LineSymbol3D:"line-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),D=c.getLogger("esri.symbols.Symbol3D");return function(c){function d(a){a=c.call(this)||this;a.styleOrigin=null;a.thumbnail=null;a.type=null;var b=a.__accessor__&&a.__accessor__.metadatas&&a.__accessor__.metadatas.symbolLayers;
a._set("symbolLayers",new (b&&b.type||l));return a}n(d,c);Object.defineProperty(d.prototype,"color",{get:function(){return null},set:function(a){D.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"symbolLayers",{set:function(a){g.referenceSetter(a,this._get("symbolLayers"))},enumerable:!0,configurable:!0});d.prototype.readSymbolLayers=function(a,c,d){c=[];
for(var e=0;e<a.length;e++){var f=a[e],g=z.typeJSONDictionary.read(f.type),h=g&&C[g];h?(f=new h,f.read(a[e],d),c.push(f)):(D.warn("Unknown symbol layer type: "+g),d&&d.messages&&d.messages.push(new b("symbol-layer:unsupported","Symbol layers of type '"+(g||f.type||"unknown")+"' are not supported",{definition:f,context:d})))}return c};d.prototype.readStyleOrigin=function(a,c,d){if(a.styleUrl&&a.name)return c=p.fromJSON(a.styleUrl,d),new A({styleUrl:c,name:a.name});if(a.styleName&&a.name)return new A({portal:d&&
d.portal||m.getDefault(),styleName:a.styleName,name:a.name});d&&d.messages&&d.messages.push(new b("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:d,definition:a}))};d.prototype.writeStyleOrigin=function(a,c,d,e){a.styleUrl&&a.name?(d=p.toJSON(a.styleUrl,e),p.isAbsolute(d)&&(d=p.normalize(d)),c.styleOrigin={styleUrl:d,name:a.name}):a.styleName&&a.name&&(a.portal&&e&&e.portal&&!p.hasSamePortal(a.portal.restUrl,e.portal.restUrl)?
e&&e.messages&&e.messages.push(new b("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):c.styleOrigin={styleName:a.styleName,name:a.name})};d.prototype.normalizeCtorArgs=function(a){return a instanceof z||a&&C[a.type]?{symbolLayers:[a]}:Array.isArray(a)?{symbolLayers:a}:a};f([a.property({json:{read:!1,write:!1}})],d.prototype,"color",null);f([a.property({type:y,nonNullable:!0,json:{write:!0}}),
a.cast(g.castForReferenceSetter)],d.prototype,"symbolLayers",null);f([a.reader("symbolLayers")],d.prototype,"readSymbolLayers",null);f([a.property({type:A})],d.prototype,"styleOrigin",void 0);f([a.reader("styleOrigin")],d.prototype,"readStyleOrigin",null);f([a.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],d.prototype,"writeStyleOrigin",null);f([a.property({type:x.default,json:{read:!1}})],d.prototype,"thumbnail",
void 0);f([a.property({type:E.apiValues,readOnly:!0,json:{type:E.jsonValues,read:!1}})],d.prototype,"type",void 0);return d=f([a.subclass("esri.symbols.Symbol3D")],d)}(a.declared(w))})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this)||this;a.type="extrude";
a.size=void 0;a.material=null;a.edges=null;return a}n(d,c);b=d;d.prototype.clone=function(){return new b({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var b;f([l.enumeration.serializable()({Extrude:"extrude"})],d.prototype,"type",void 0);f([l.property({type:Number,json:{write:!0}})],d.prototype,"size",void 0);f([l.property()],d.prototype,"material",void 0);f([l.property(e.symbol3dEdgesProperty)],
d.prototype,"edges",void 0);return d=b=f([l.subclass("esri.symbols.ExtrudeSymbol3DLayer")],d)}(l.declared(g))})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/ElevationInfo ./support/Symbol3DMaterial".split(" "),function(h,d,n,f,l,g,e,c,p){var b=g.strict()({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",
Extrude:"extrude",Text:"text"});h=function(a){function d(b){b=a.call(this)||this;b.enabled=!0;b.material=null;b.type=null;return b}n(d,a);d.prototype.writeEnabled=function(a,b,c){a||(b[c]=a)};f([e.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],d.prototype,"enabled",void 0);f([e.writer("enabled")],d.prototype,"writeEnabled",null);f([e.property({type:c,json:{read:!1,write:!1}})],d.prototype,"elevationInfo",void 0);f([e.property({type:p.default,json:{write:!0}})],d.prototype,
"material",void 0);f([e.property({type:b.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:b.write}}})],d.prototype,"type",void 0);return d=f([e.subclass("esri.symbols.Symbol3DLayer")],d)}(e.declared(l));(h||(h={})).typeJSONDictionary=b;return h})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(h,d,n,f,l,g,e){Object.defineProperty(d,"__esModule",{value:!0});h=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}n(d,c);b=d;d.prototype.clone=function(){return new b({color:this.color?this.color.clone():null})};var b;f([g.property(e.colorAndTransparencyProperty)],d.prototype,"color",void 0);return d=b=f([g.subclass("esri.symbols.support.Symbol3DMaterial")],d)}(g.declared(l));d.Symbol3DMaterial=h;d.default=h})},"esri/symbols/support/materialUtils":function(){define("require exports ../../Color ../../core/screenUtils ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),
function(h,d,n,f,l,g){function e(c,b){c=null!=b.transparency?g.transparencyToOpacity(b.transparency):1;if((b=b.color)&&Array.isArray(b))return new n([b[0]||0,b[1]||0,b[2]||0,c])}function c(c,b){b.color=c.toJSON().slice(0,3);c=g.opacityToTransparency(c.a);0!==c&&(b.transparency=c)}Object.defineProperty(d,"__esModule",{value:!0});d.readColorAndTransparency=e;d.writeColorAndTransparency=c;d.colorAndTransparencyProperty={type:n,json:{type:[l.Integer],read:{source:["color","transparency"],reader:e},write:{target:{color:{type:[l.Integer]},
transparency:{type:l.Integer}},writer:c}}};d.screenSizeProperty={type:Number,cast:f.toPt,json:{write:!0}}})},"esri/core/screenUtils":function(){define(["require","exports"],function(h,d){function n(f){return f?72*f/d.DPI:0}Object.defineProperty(d,"__esModule",{value:!0});var f=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;d.DPI=96;d.pt2px=function(f){return f?f/72*d.DPI:0};d.px2pt=n;d.toPt=function(d){if("string"===typeof d){if(f.test(d)){var g=d.match(f),e=Number(g[1]),g=g[3]&&g[3].toLowerCase();d="-"===d.charAt(0);
e="px"===g?n(e):e;return d?-e:e}console.warn("screenUtils.toPt: input not recognized!");return null}return d}})},"esri/symbols/edges/utils":function(){define(["require","exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(h,d,n,f,l){function g(d,c,g){if(!d)return d;switch(d.type){case "solid":return c=new l,c.read(d,g),c;case "sketch":return c=new f,c.read(d,g),c}}Object.defineProperty(d,"__esModule",{value:!0});d.read=g;d.symbol3dEdgesProperty={types:{key:"type",base:n,typeMap:{solid:l,
sketch:f}},json:{read:g,write:!0}}})},"esri/symbols/edges/Edges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b,a){return function(d){function e(a){a=d.call(this)||this;a.color=new g([0,0,0,1]);a.extensionLength=0;a.size=
p.px2pt(1);return a}n(e,d);e.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=l({},a),delete a.type);return a};e.prototype.clone=function(){};e.prototype.cloneProperties=function(){return{color:c.clone(this.color),size:this.size,extensionLength:this.extensionLength}};f([b.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],e.prototype,"type",void 0);f([b.property(a.colorAndTransparencyProperty)],e.prototype,"color",void 0);f([b.property(l({},a.screenSizeProperty,
{json:{write:{overridePolicy:function(a){return{enabled:!!a}}}}}))],e.prototype,"extensionLength",void 0);f([b.property(a.screenSizeProperty)],e.prototype,"size",void 0);return e=f([b.subclass("esri.symbols.edges.Edges3D")],e)}(b.declared(e))})},"esri/symbols/edges/SketchEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(h,d,n,f,l,g){return function(d){function c(b){b=
d.call(this)||this;b.type="sketch";return b}n(c,d);e=c;c.prototype.clone=function(){return new e(this.cloneProperties())};var e;f([l.property({type:["sketch"]})],c.prototype,"type",void 0);return c=e=f([l.subclass("esri.symbols.edges.SketchEdges3D")],c)}(l.declared(g))})},"esri/symbols/edges/SolidEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(h,d,n,f,l,g){return function(d){function c(b){b=
d.call(this)||this;b.type="solid";return b}n(c,d);e=c;c.prototype.clone=function(){return new e(this.cloneProperties())};var e;f([l.property({type:["solid"]})],c.prototype,"type",void 0);return c=e=f([l.subclass("esri.symbols.support.SolidEdges3D")],c)}(l.declared(g))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(h,d,n,f,l,g,e,c,p){return function(b){function a(a){a=b.call(this)||this;a.type="fill";a.material=null;a.outline=null;a.edges=null;return a}n(a,b);d=a;a.prototype.clone=function(){return new d({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})};var d;f([l.enumeration.serializable()({Fill:"fill"})],a.prototype,"type",void 0);f([l.property({type:c.default})],
a.prototype,"material",void 0);f([l.property({type:p.default,json:{write:!0}})],a.prototype,"outline",void 0);f([l.property(e.symbol3dEdgesProperty)],a.prototype,"edges",void 0);return a=d=f([l.subclass("esri.symbols.FillSymbol3DLayer")],a)}(l.declared(g))})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Symbol3DMaterial".split(" "),function(h,d,n,
f,l,g){Object.defineProperty(d,"__esModule",{value:!0});h=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}n(c,d);e=c;c.prototype.clone=function(){return new e({color:this.color?this.color.clone():null,colorMixMode:this.colorMixMode})};var e;f([l.enumeration.serializable()({multiply:"multiply",replace:"replace",tint:"tint"})],c.prototype,"colorMixMode",void 0);return c=e=f([l.subclass("esri.symbols.support.Symbol3DFillMaterial")],c)}(l.declared(g.default));d.Symbol3DFillMaterial=
h;d.default=h})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(h,d,n,f,l,g,e,c,p){Object.defineProperty(d,"__esModule",{value:!0});h=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.color=new l([0,0,0,1]);a.size=e.px2pt(1);return a}n(a,b);
d=a;a.prototype.clone=function(){return new d({color:this.color?this.color.clone():null,size:this.size})};var d;f([c.property(p.colorAndTransparencyProperty)],a.prototype,"color",void 0);f([c.property(p.screenSizeProperty)],a.prototype,"size",void 0);return a=d=f([c.subclass("esri.symbols.support.Symbol3DOutline")],a)}(c.declared(g));d.Symbol3DOutline=h;d.default=h})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DOutline".split(" "),
function(h,d,n,f,l,g,e,c,p){return function(b){function a(a){a=b.call(this)||this;a.material=null;a.resource=null;a.type="icon";a.size=12;a.anchor=void 0;a.outline=void 0;return a}n(a,b);d=a;a.prototype.clone=function(){return new d({anchor:this.anchor,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})};var d;f([l.property()],
a.prototype,"material",void 0);f([l.property({type:e.default,json:{write:!0}})],a.prototype,"resource",void 0);f([l.enumeration.serializable()({Icon:"icon"})],a.prototype,"type",void 0);f([l.property(c.screenSizeProperty)],a.prototype,"size",void 0);f([l.enumeration.serializable()({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"})],a.prototype,"anchor",void 0);f([l.property({type:p.default,
json:{write:!0}})],a.prototype,"outline",void 0);return a=d=f([l.subclass("esri.symbols.IconSymbol3DLayer")],a)}(l.declared(g))})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});var p=g.strict()({circle:"circle",
square:"square",cross:"cross",x:"x",kite:"kite"});h=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}n(a,b);d=a;a.prototype.readHref=function(a,b,c){return a?e.fromJSON(a,c):b.dataURI};a.prototype.writeHref=function(a,b,c,d){a&&(e.isDataProtocol(a)?b.dataURI=a:(b.href=e.toJSON(a,d),e.isAbsolute(b.href)&&(b.href=e.normalize(b.href))))};a.prototype.clone=function(){return new d({href:this.href,primitive:this.primitive})};var d;f([c.property({type:String,json:{write:!0,read:{source:["href",
"dataURI"]}}})],a.prototype,"href",void 0);f([c.reader("href")],a.prototype,"readHref",null);f([c.writer("href",{href:{type:String},dataURI:{type:String}})],a.prototype,"writeHref",null);f([c.enumeration.serializable()(p)],a.prototype,"primitive",void 0);return a=d=f([c.subclass("esri.symbols.support.IconSymbol3DLayerResource")],a)}(c.declared(l));d.IconSymbol3DLayerResource=h;d.default=h})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/materialUtils".split(" "),
function(h,d,n,f,l,g,e,c){return function(d){function b(a){a=d.call(this)||this;a.material=null;a.type="line";a.size=l.px2pt(1);return a}n(b,d);a=b;b.prototype.clone=function(){return new a({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var a;f([g.property()],b.prototype,"material",void 0);f([g.enumeration.serializable()({Line:"line"})],b.prototype,"type",void 0);f([g.property(c.screenSizeProperty)],
b.prototype,"size",void 0);return b=a=f([g.subclass("esri.symbols.LineSymbol3DLayer")],b)}(g.declared(e))})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition ./support/Symbol3DMaterial".split(" "),function(h,d,n,f,l,g,e,c,p){return function(b){function a(a){a=b.call(this)||this;a.material=
null;a.resource=null;a.type="object";a.width=void 0;a.height=void 0;a.depth=void 0;a.anchor=void 0;a.anchorPosition=void 0;a.heading=void 0;a.tilt=void 0;a.roll=void 0;return a}n(a,b);d=a;a.prototype.clone=function(){return new d({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),height:this.height,material:this.material&&
this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})};Object.defineProperty(a.prototype,"isPrimitive",{get:function(){return!this.resource||"string"!==typeof this.resource.href},enumerable:!0,configurable:!0});var d;f([l.property({type:p.default})],a.prototype,"material",void 0);f([l.property({type:e.default,json:{write:!0}})],a.prototype,"resource",void 0);f([l.enumeration.serializable()({Object:"object"})],a.prototype,"type",void 0);f([l.property({type:Number,json:{write:!0}})],
a.prototype,"width",void 0);f([l.property({type:Number,json:{write:!0}})],a.prototype,"height",void 0);f([l.property({type:Number,json:{write:!0}})],a.prototype,"depth",void 0);f([l.enumeration.serializable()({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"})],a.prototype,"anchor",void 0);f([l.property({type:c.default,json:{read:{reader:function(a){return new c.default({x:a[0],y:a[1],z:a[2]})}},write:{writer:function(a,b){b.anchorPosition=[a.x,a.y,a.z]},overridePolicy:function(){return{enabled:"relative"===
this.anchor}}}}})],a.prototype,"anchorPosition",void 0);f([l.property({type:Number,json:{write:!0}})],a.prototype,"heading",void 0);f([l.property({type:Number,json:{write:!0}})],a.prototype,"tilt",void 0);f([l.property({type:Number,json:{write:!0}})],a.prototype,"roll",void 0);f([l.property({readOnly:!0,dependsOn:["resource","resource.href"]})],a.prototype,"isPrimitive",null);return a=d=f([l.subclass("esri.symbols.ObjectSymbol3DLayer")],a)}(l.declared(g))})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});var p=g.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});h=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}n(a,b);d=a;a.prototype.clone=function(){return new d({href:this.href,primitive:this.primitive})};var d;f([c.property({type:String,json:{read:e.read,write:e.write}})],a.prototype,"href",void 0);f([c.enumeration.serializable()(p)],
a.prototype,"primitive",void 0);return a=d=f([c.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],a)}(c.declared(l));d.ObjectSymbol3DLayerResource=h;d.default=h})},"esri/symbols/support/Symbol3DAnchorPosition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){Object.defineProperty(d,"__esModule",{value:!0});h=function(d){function c(){var b=
null!==d&&d.apply(this,arguments)||this;b.x=0;b.y=0;b.z=0;return b}n(c,d);e=c;c.prototype.clone=function(){return new e({x:this.x,y:this.y,z:this.z})};var e;f([g.property({type:Number})],c.prototype,"x",void 0);f([g.property({type:Number})],c.prototype,"y",void 0);f([g.property({type:Number})],c.prototype,"z",void 0);return c=e=f([g.subclass("esri.symbols.support.Symbol3DAnchorPosition")],c)}(g.declared(l));d.Symbol3DAnchorPosition=h;d.default=h})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer".split(" "),
function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this)||this;b.material=null;b.type="path";b.size=void 0;return b}n(c,d);e=c;c.prototype.readSize=function(b,a){return b||a.width||0};c.prototype.clone=function(){return new e({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var e;f([l.property()],c.prototype,"material",void 0);f([l.enumeration.serializable()({Path:"path"})],c.prototype,"type",
void 0);f([l.property({type:Number,json:{write:{enabled:!0,target:{size:{type:Number},width:{type:Number}}}}})],c.prototype,"size",void 0);f([l.reader("size",["size","width"])],c.prototype,"readSize",null);return c=e=f([l.subclass("esri.symbols.PathSymbol3DLayer")],c)}(l.declared(g))})},"esri/symbols/Symbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e,c){var p=e({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),b=0;return function(a){function d(c){c=a.call(this,c)||this;c.id="sym"+b++;c.type=null;return c}n(d,a);Object.defineProperty(d.prototype,"color",{set:function(a){this._set("color",
a)},enumerable:!0,configurable:!0});d.prototype.readColor=function(a,b,c){return a&&null!=a[0]?[a[0],a[1],a[2],a[3]/255]:a};d.prototype.clone=function(){};f([c.property({type:p.apiValues,json:{read:p.read,write:{ignoreOrigin:!0,writer:p.write}}})],d.prototype,"type",void 0);f([c.property({type:l,value:new l([0,0,0,1]),json:{write:{allowNull:!0}}})],d.prototype,"color",null);f([c.reader("color")],d.prototype,"readColor",null);return d=f([c.subclass("esri.symbols.Symbol")],d)}(c.declared(g))})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/accessorSupport/decorators ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a){return function(d){function h(a){a=d.call(this)||this;a._userSize=void 0;a.halo=null;a.material=null;a.text=void 0;a.type="text";return a}n(h,d);m=h;Object.defineProperty(h.prototype,"font",{get:function(){return this._get("font")||null},set:function(a){a&&this._userSize&&(a.size=this._userSize);this._set("font",a)},enumerable:!0,configurable:!0});h.prototype.writeFont=function(a,b,c,d){c=l({},d,{textSymbol3D:!0});b.font=a.write({},c);delete b.font.size};Object.defineProperty(h.prototype,
"size",{get:function(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9},set:function(a){this._userSize=a;this.font&&(this.font.size=this._userSize);this.notifyChange("size")},enumerable:!0,configurable:!0});h.prototype.clone=function(){return new m({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&g.clone(this.font),halo:this.halo&&g.clone(this.halo),material:this.material&&this.material.clone(),size:this.size,
text:this.text})};var m;f([e.property({type:c,json:{write:!0}})],h.prototype,"font",null);f([e.writer("font")],h.prototype,"writeFont",null);f([e.property({type:a.default,json:{write:!0}})],h.prototype,"halo",void 0);f([e.property()],h.prototype,"material",void 0);f([e.property(b.screenSizeProperty),e.property({dependsOn:["font.size"]})],h.prototype,"size",null);f([e.property({type:String,json:{write:!0}})],h.prototype,"text",void 0);f([e.enumeration.serializable()({Text:"text"})],h.prototype,"type",
void 0);return h=m=f([e.subclass("esri.symbols.TextSymbol3DLayer")],h)}(e.declared(p))})},"esri/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this)||this;a.decoration="none";a.family="sans-serif";a.size=9;a.style="normal";a.weight="normal";return a}n(d,c);b=d;d.prototype.castSize=
function(a){return g.toPt(a)};d.prototype.clone=function(){return new b({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};var b;f([e.property({type:["underline","line-through","none"],json:{default:"none",write:!0}})],d.prototype,"decoration",void 0);f([e.property({type:String,json:{write:!0}})],d.prototype,"family",void 0);f([e.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:!c||!c.textSymbol3D}}}}})],d.prototype,
"size",void 0);f([e.cast("size")],d.prototype,"castSize",null);f([e.property({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],d.prototype,"style",void 0);f([e.property({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],d.prototype,"weight",void 0);return d=b=f([e.subclass("esri.symbols.Font")],d)}(e.declared(l))})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(h,d,n,f,l,g,e,c,p){Object.defineProperty(d,"__esModule",{value:!0});h=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.color=new l([0,0,0,1]);a.size=0;return a}n(a,b);d=a;a.prototype.clone=function(){return new d({color:e.clone(this.color),size:this.size})};var d;f([c.property(p.colorAndTransparencyProperty)],a.prototype,"color",void 0);f([c.property(p.screenSizeProperty)],a.prototype,"size",void 0);return a=d=f([c.subclass("esri.symbols.support.Symbol3DHalo")],a)}(c.declared(g));
d.Symbol3DHalo=h;d.default=h})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../portal/Portal".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a.portal=null;return a}n(d,c);b=d;d.prototype.clone=function(){return new b({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,
portal:this.portal})};var b;f([g.property({type:String})],d.prototype,"name",void 0);f([g.property({type:String})],d.prototype,"styleUrl",void 0);f([g.property({type:String})],d.prototype,"styleName",void 0);f([g.property({type:e})],d.prototype,"portal",void 0);return d=b=f([g.subclass("esri.symbols.support.StyleOrigin")],d)}(g.declared(l))})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g){Object.defineProperty(d,"__esModule",{value:!0});h=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}n(c,d);e=c;c.prototype.clone=function(){return new e({url:this.url})};var e;f([g.property({type:String})],c.prototype,"url",void 0);return c=e=f([g.subclass("esri.symbols.support.Thumbnail")],c)}(g.declared(l));d.Thumbnail=h;d.default=h})},"esri/symbols/callouts/calloutUtils":function(){define(["require","exports","./Callout3D","./LineCallout3D"],function(h,
d,n,f){function l(d){if(!d)return!1;d=d.verticalOffset;return!d||0>=d.screenLength||0>=d.maxWorldLength?!1:!0}function g(d,c,g){if(!d)return d;switch(d.type){case "line":return c=new f,c.read(d,g),c}}Object.defineProperty(d,"__esModule",{value:!0});d.hasVisibleVerticalOffset=l;d.hasVisibleCallout=function(d){if(!d||!d.supportsCallout||!d.supportsCallout())return!1;var c=d.callout;return c&&c.visible?l(d)?!0:!1:!1};d.isCalloutSupport=function(d){return"point-3d"===d.type||"label-3d"===d.type};d.read=
g;d.calloutProperty={types:{key:"type",base:n,typeMap:{line:f}},json:{read:g,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(b){b=c.call(this)||this;b.visible=!0;return b}f(d,c);d.prototype.normalizeCtorArgs=function(b){b&&b.type&&
(b=n({},b),delete b.type);return b};d.prototype.clone=function(){};l([e.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],d.prototype,"type",void 0);l([e.property({readOnly:!0})],d.prototype,"visible",void 0);return d=l([e.subclass("esri.symbols.callouts.Callout3D")],d)}(e.declared(g))})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a){return function(d){function h(a){a=d.call(this)||this;a.type="line";a.color=new l([0,0,0,1]);a.size=e.px2pt(1);a.border=null;return a}n(h,d);m=h;Object.defineProperty(h.prototype,"visible",{get:function(){return 0<this.size&&0<this.color.a},enumerable:!0,configurable:!0});h.prototype.clone=function(){return new m({color:g.clone(this.color),size:this.size,border:g.clone(this.border)})};var m;f([c.property({type:["line"]})],h.prototype,"type",void 0);f([c.property(a.colorAndTransparencyProperty)],
h.prototype,"color",void 0);f([c.property(a.screenSizeProperty)],h.prototype,"size",void 0);f([c.property({type:b.default,json:{write:!0}})],h.prototype,"border",void 0);f([c.property({dependsOn:["size","color"],readOnly:!0})],h.prototype,"visible",null);return h=m=f([c.subclass("esri.symbols.callouts.LineCallout3D")],h)}(c.declared(p))})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(h,d,n,f,l,g,e,c,p){Object.defineProperty(d,"__esModule",{value:!0});h=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.color=new l("white");return a}n(a,b);d=a;a.prototype.clone=function(){return new d({color:e.clone(this.color)})};var d;f([c.property(p.colorAndTransparencyProperty)],a.prototype,"color",void 0);return a=d=f([c.subclass("esri.symbols.callouts.LineCallout3DBorder")],a)}(c.declared(g));d.LineCallout3DBorder=h;d.default=h})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(h,d,n,f,l,g,e){Object.defineProperty(d,"__esModule",{value:!0});h=function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a.screenLength=0;a.minWorldLength=0;return a}n(d,c);b=d;d.prototype.clone=function(){return new b({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};var b;f([g.property(e.screenSizeProperty)],d.prototype,"screenLength",void 0);f([g.property({type:Number,json:{write:!0,default:0}})],d.prototype,"minWorldLength",
void 0);f([g.property({type:Number,json:{write:!0}})],d.prototype,"maxWorldLength",void 0);return d=b=f([g.subclass("esri.symbols.support.Symbol3DVerticalOffset")],d)}(g.declared(l));d.Symbol3DVerticalOffset=h;d.default=h})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){var k=l.ofType({base:null,key:"type",typeMap:{line:p,text:m,path:b}}),q=l.ofType({base:null,key:"type",typeMap:{line:p,path:b}});return function(a){function b(b){b=a.call(this)||this;b.symbolLayers=new k;b.type="line-3d";return b}n(b,a);d=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new g("symbol-layer:unsupported",
"Symbol layers of type 'text' cannot be persisted in LineSymbol3D",{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.clone=function(){return new d({styleOrigin:e.clone(this.styleOrigin),symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail)})};var d;f([c.property({type:k,json:{type:q}})],b.prototype,"symbolLayers",void 0);f([c.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);f([c.enumeration.serializable()({LineSymbol3D:"line-3d"})],
b.prototype,"type",void 0);return b=d=f([c.subclass("esri.symbols.LineSymbol3D")],b)}(c.declared(a))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./FillSymbol3DLayer ./Symbol3D".split(" "),function(h,d,n,f,l,g,e,c,p){var b=l.ofType({base:null,key:"type",typeMap:{fill:c}});return function(a){function c(c){c=a.call(this)||this;c.symbolLayers=
new b;c.type="mesh-3d";return c}n(c,a);d=c;c.prototype.clone=function(){return new d({styleOrigin:g.clone(this.styleOrigin),symbolLayers:g.clone(this.symbolLayers),thumbnail:g.clone(this.thumbnail)})};var d;f([e.property({type:b})],c.prototype,"symbolLayers",void 0);f([e.enumeration.serializable()({MeshSymbol3D:"mesh-3d"})],c.prototype,"type",void 0);return c=d=f([e.subclass("esri.symbols.MeshSymbol3D")],c)}(e.declared(p))})},"esri/symbols/PictureFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./FillSymbol ./support/urlUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b){return function(a){function d(b,c,d,e){b=a.call(this,b)||this;b.type="picture-fill";b.url=null;b.xscale=1;b.yscale=1;b.width=12;b.height=12;b.xoffset=0;b.yoffset=0;b.source=null;return b}n(d,a);h=d;d.prototype.normalizeCtorArgs=function(a,b,c,d){if(a&&"string"!==typeof a&&null==a.imageData)return a;var f={};a&&(f.url=a);b&&(f.outline=b);null!=c&&(f.width=e.toPt(c));null!=d&&(f.height=e.toPt(d));return f};d.prototype.clone=function(){var a=new h({color:g.clone(this.color),
height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});a._set("source",g.clone(this.source));return a};var h;f([c.enumeration.serializable()({esriPFS:"picture-fill"})],d.prototype,"type",void 0);f([c.property(b.urlPropertyDefinition)],d.prototype,"url",void 0);f([c.property({type:Number,json:{write:!0}})],d.prototype,"xscale",void 0);f([c.property({type:Number,json:{write:!0}})],
d.prototype,"yscale",void 0);f([c.property({type:Number,cast:e.toPt,json:{write:!0}})],d.prototype,"width",void 0);f([c.property({type:Number,cast:e.toPt,json:{write:!0}})],d.prototype,"height",void 0);f([c.property({type:Number,cast:e.toPt,json:{write:!0}})],d.prototype,"xoffset",void 0);f([c.property({type:Number,cast:e.toPt,json:{write:!0}})],d.prototype,"yoffset",void 0);f([c.property(b.sourcePropertyDefinition)],d.prototype,"source",void 0);return d=h=f([c.subclass("esri.symbols.PictureFillSymbol")],
d)}(c.declared(p))})},"esri/symbols/FillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/accessorSupport/decorators ./SimpleLineSymbol ./Symbol".split(" "),function(h,d,n,f,l,g,e,c){var p=l({esriSFS:"simple-fill",esriPFS:"picture-fill"});return function(b){function a(a){a=b.call(this,a)||this;a.outline=null;a.type=null;return a}n(a,b);f([g.property({type:e,json:{default:null,write:!0}})],a.prototype,
"outline",void 0);f([g.property({type:p.apiValues,readOnly:!0,json:{type:p.jsonValues}})],a.prototype,"type",void 0);return a=f([g.subclass("esri.symbols.FillSymbol")],a)}(g.declared(c))})},"esri/symbols/SimpleLineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./LineSymbol".split(" "),function(h,d,n,f,l,g,e,c,p){var b=l({esriSLSSolid:"solid",
esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});return function(a){function d(b,c,d,e,f,g){b=a.call(this,b)||this;b.type="simple-line";b.style="solid";b.cap="round";b.join="round";b.miterLimit=
7.5;return b}n(d,a);h=d;d.prototype.normalizeCtorArgs=function(a,b,c,d,f,g){if(a&&"string"!==typeof a)return a;var h={};null!=a&&(h.style=a);null!=b&&(h.color=b);null!=c&&(h.width=e.toPt(c));null!=d&&(h.cap=d);null!=f&&(h.join=f);null!=g&&(h.miterLimit=e.toPt(g));return h};d.prototype.clone=function(){return new h({color:g.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})};var h;f([c.enumeration.serializable()({esriSLS:"simple-line"})],d.prototype,
"type",void 0);f([c.property({type:b.apiValues,json:{read:b.read,write:b.write}})],d.prototype,"style",void 0);f([c.property({type:["butt","round","square"],json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}})],d.prototype,"cap",void 0);f([c.property({type:["miter","round","bevel"],json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}})],d.prototype,"join",void 0);f([c.property({type:Number,cast:e.toPt,
json:{read:!1,write:!1}})],d.prototype,"miterLimit",void 0);return d=h=f([c.subclass("esri.symbols.SimpleLineSymbol")],d)}(c.declared(p))})},"esri/symbols/LineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(b){b=c.call(this,b)||this;b.type="simple-line";b.width=.75;return b}n(d,c);f([g.enumeration.serializable()({esriSLS:"simple-line"})],
d.prototype,"type",void 0);f([g.property({type:Number,cast:l.toPt,json:{write:!0}})],d.prototype,"width",void 0);return d=f([g.subclass("esri.symbols.LineSymbol")],d)}(g.declared(e))})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(h,d,n){function f(d,c,f){return c.imageData?n.makeData({mediaType:c.contentType||"image/png",isBase64:!0,data:c.imageData}):l(c.url,f)}function l(d,c){return!c||"service"!==c.origin&&"portal-item"!==c.origin||!c.layer||
"feature"!==c.layer.type&&"stream"!==c.layer.type||n.isAbsolute(d)||!c.layer.parsedUrl?n.fromJSON(d,c):n.join(c.layer.parsedUrl.path,"images",d)}function g(d,c,f,b){n.isDataProtocol(d)?(d=n.dataComponents(d),c.contentType=d.mediaType,c.imageData=d.data,f&&f.imageData===c.imageData&&f.url&&n.write(f.url,c,"url",b)):n.write(d,c,"url",b)}Object.defineProperty(d,"__esModule",{value:!0});d.readImageDataOrUrl=f;d.read=l;d.writeImageDataAndUrl=g;d.urlPropertyDefinition={json:{read:{source:["imageData","url"],
reader:f},write:{writer:function(d,c,f,b){g(d,c,this.source,b)}}}};d.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(d,c,f){d={};c.imageData&&(d.imageData=c.imageData);c.contentType&&(d.contentType=c.contentType);c.url&&(d.url=l(c.url,f));return d}}}}})},"esri/symbols/PictureMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./support/urlUtils".split(" "),
function(h,d,n,f,l,g,e,c,p){return function(b){function a(a,c,d){a=b.call(this,a)||this;a.color=null;a.type="picture-marker";a.url=null;a.source=null;a.height=12;a.width=12;a.size=null;return a}n(a,b);c=a;a.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a&&null==a.imageData)return a;var d={};a&&(d.url=a);null!=b&&(d.width=g.toPt(b));null!=c&&(d.height=g.toPt(c));return d};a.prototype.readHeight=function(a,b){return b.size||a};a.prototype.readWidth=function(a,b){return b.size||
a};a.prototype.clone=function(){var a=new c({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});a._set("source",l.clone(this.source));return a};var c;f([e.property({json:{write:!1}})],a.prototype,"color",void 0);f([e.enumeration.serializable()({esriPMS:"picture-marker"})],a.prototype,"type",void 0);f([e.property(p.urlPropertyDefinition)],a.prototype,"url",void 0);f([e.property(p.sourcePropertyDefinition)],a.prototype,"source",void 0);f([e.property({type:Number,
cast:g.toPt,json:{write:!0}})],a.prototype,"height",void 0);f([e.reader("height",["height","size"])],a.prototype,"readHeight",null);f([e.property({type:Number,cast:g.toPt,json:{write:!0}})],a.prototype,"width",void 0);f([e.property({json:{write:!1}})],a.prototype,"size",void 0);return a=c=f([e.subclass("esri.symbols.PictureMarkerSymbol")],a)}(e.declared(c))})},"esri/symbols/MarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),
function(h,d,n,f,l,g,e,c){var p=l({esriSMS:"simple-marker",esriPMS:"picture-marker"});return function(b){function a(a){a=b.call(this,a)||this;a.angle=0;a.type=null;a.xoffset=0;a.yoffset=0;a.size=9;return a}n(a,b);f([e.property({type:Number,json:{read:function(a){return a&&-1*a},write:function(a,b){return b.angle=a&&-1*a}}})],a.prototype,"angle",void 0);f([e.property({type:p.apiValues,readOnly:!0,json:{type:p.jsonValues}})],a.prototype,"type",void 0);f([e.property({type:Number,cast:g.toPt,json:{write:!0}})],
a.prototype,"xoffset",void 0);f([e.property({type:Number,cast:g.toPt,json:{write:!0}})],a.prototype,"yoffset",void 0);f([e.property({type:Number,cast:function(a){return"auto"===a?a:g.toPt(a)},json:{write:!0}})],a.prototype,"size",void 0);return a=f([e.subclass("esri.symbols.MarkerSymbol")],a)}(e.declared(c))})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q){var v=l.ofType({base:null,key:"type",typeMap:{icon:p,object:b,text:m}}),u=l.ofType({base:null,key:"type",typeMap:{icon:p,object:b}});return function(a){function b(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.symbolLayers=new v;b.type="point-3d";return b}n(b,a);d=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new g("symbol-layer:unsupported",
"Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.supportsCallout=function(){if(1!==(this.symbolLayers?this.symbolLayers.length:0))return!1;switch(this.symbolLayers.getItemAt(0).type){case "icon":case "text":case "object":return!0}return!1};b.prototype.hasVisibleCallout=function(){return k.hasVisibleCallout(this)};b.prototype.hasVisibleVerticalOffset=function(){return k.hasVisibleVerticalOffset(this)};
b.prototype.clone=function(){return new d({verticalOffset:e.clone(this.verticalOffset),callout:e.clone(this.callout),styleOrigin:e.clone(this.styleOrigin),symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail)})};var d;f([c.property({type:q.default,json:{write:!0}})],b.prototype,"verticalOffset",void 0);f([c.property(k.calloutProperty)],b.prototype,"callout",void 0);f([c.property({type:v,json:{type:u}})],b.prototype,"symbolLayers",void 0);f([c.writer("web-scene","symbolLayers")],
b.prototype,"writeSymbolLayers",null);f([c.enumeration.serializable()({PointSymbol3D:"point-3d"})],b.prototype,"type",void 0);return b=d=f([c.subclass("esri.symbols.PointSymbol3D")],b)}(c.declared(a))})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v){var u=l.ofType({base:null,key:"type",typeMap:{extrude:p,fill:b,icon:a,line:m,object:k,text:v}}),t=l.ofType({base:null,key:"type",typeMap:{extrude:p,fill:b,icon:a,line:m,object:k}});return function(a){function b(b){b=a.call(this)||this;b.type="polygon-3d";return b}n(b,a);d=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new g("symbol-layer:unsupported",
"Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.clone=function(){return new d({styleOrigin:e.clone(this.styleOrigin),symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail)})};b.fromJSON=function(a){var b=new d;b.read(a);if(2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var c=b.symbolLayers.getItemAt(0),e=
b.symbolLayers.getItemAt(1);!e.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||(c.outline={size:e.size,color:e.material.color});b.symbolLayers.removeAt(1)}return b};var d;f([c.property({type:u,json:{type:t}})],b.prototype,"symbolLayers",void 0);f([c.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);f([c.enumeration.serializable()({PolygonSymbol3D:"polygon-3d"})],b.prototype,"type",void 0);return b=d=f([c.subclass("esri.symbols.PolygonSymbol3D")],
b)}(c.declared(q))})},"esri/symbols/SimpleFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../Color ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ./FillSymbol".split(" "),function(h,d,n,f,l,g,e,c,p,b){var a=e({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",
esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"}),m={outline:{type:"simple-line"}};return function(b){function d(a,c,d){a=b.call(this,a)||this;a.color=new g([0,0,0,.25]);a.type="simple-fill";a.style="solid";return a}n(d,b);e=d;d.prototype.getDefaults=function(){return l({},this.inherited(arguments),m)};d.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.style=a);b&&(d.outline=b);c&&(d.color=c);return d};d.prototype.clone=function(){return new e({color:c.clone(this.color),
outline:this.outline&&this.outline.clone(),style:this.style})};var e;f([p.property()],d.prototype,"color",void 0);f([p.enumeration.serializable()({esriSFS:"simple-fill"})],d.prototype,"type",void 0);f([p.property({type:a.apiValues,json:{read:a.read,write:a.write}})],d.prototype,"style",void 0);return d=e=f([p.subclass("esri.symbols.SimpleFillSymbol")],d)}(p.declared(b))})},"esri/symbols/SimpleMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/kebabDictionary ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a){var m=g({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});return function(b){function d(c,d,e,f){c=b.call(this,c)||this;c.color=new l([255,255,255,.25]);c.type="simple-marker";c.size=12;c.style="circle";c.outline=new a;return c}n(d,b);g=d;d.prototype.normalizeCtorArgs=function(a,b,d,e){if(a&&"string"!==typeof a)return a;var f={};a&&(f.style=a);null!=b&&(f.size=c.toPt(b));
d&&(f.outline=d);e&&(f.color=e);return f};d.prototype.writeColor=function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())};Object.defineProperty(d.prototype,"path",{set:function(a){this.style="path";this._set("path",a)},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new g({angle:this.angle,color:e.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})};var g;f([p.property()],
d.prototype,"color",void 0);f([p.writer("color")],d.prototype,"writeColor",null);f([p.enumeration.serializable()({esriSMS:"simple-marker"})],d.prototype,"type",void 0);f([p.property()],d.prototype,"size",void 0);f([p.property({type:m.apiValues,json:{read:m.read,write:m.write}})],d.prototype,"style",void 0);f([p.property({type:String,json:{write:!0}})],d.prototype,"path",null);f([p.property({type:a,json:{default:null,write:!0}})],d.prototype,"outline",void 0);return d=g=f([p.subclass("esri.symbols.SimpleMarkerSymbol")],
d)}(p.declared(b))})},"esri/symbols/TextSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./Font ./Symbol".split(" "),function(h,d,n,f,l,g,e,c,p,b){return function(a){function b(b,c,d){b=a.call(this,b)||this;b.backgroundColor=null;b.borderLineColor=null;b.borderLineSize=null;b.font=new p;b.horizontalAlignment="center";b.kerning=!0;b.haloColor=null;b.haloSize=
null;b.rightToLeft=null;b.rotated=!1;b.text="";b.type="text";b.verticalAlignment=null;b.xoffset=0;b.yoffset=0;b.angle=0;b.width=null;return b}n(b,a);d=b;b.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.text=a);b&&(d.font=b);c&&(d.color=c);return d};b.prototype.clone=function(){return new d({angle:this.angle,backgroundColor:g.clone(this.backgroundColor),borderLineColor:g.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:g.clone(this.color),
font:this.font&&this.font.clone(),haloColor:g.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};var d;f([c.property({type:l,json:{write:!0}})],b.prototype,"backgroundColor",void 0);f([c.property({type:l,json:{write:!0}})],b.prototype,"borderLineColor",void 0);f([c.property({type:Number,
json:{write:!0}})],b.prototype,"borderLineSize",void 0);f([c.property({type:p,json:{write:!0}})],b.prototype,"font",void 0);f([c.property({type:["left","right","center","justify"],json:{write:!0}})],b.prototype,"horizontalAlignment",void 0);f([c.property({type:Boolean,json:{write:!0}})],b.prototype,"kerning",void 0);f([c.property({type:l,json:{write:!0}})],b.prototype,"haloColor",void 0);f([c.property({type:Number,cast:e.toPt,json:{write:!0}})],b.prototype,"haloSize",void 0);f([c.property({type:Boolean,
json:{write:!0}})],b.prototype,"rightToLeft",void 0);f([c.property({type:Boolean,json:{write:!0}})],b.prototype,"rotated",void 0);f([c.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);f([c.property({type:String,readOnly:!0})],b.prototype,"type",void 0);f([c.property({type:["baseline","top","middle","bottom"],json:{write:!0}})],b.prototype,"verticalAlignment",void 0);f([c.property({type:Number,cast:e.toPt,json:{write:!0}})],b.prototype,"xoffset",void 0);f([c.property({type:Number,
cast:e.toPt,json:{write:!0}})],b.prototype,"yoffset",void 0);f([c.property({type:Number,json:{read:function(a){return a&&-1*a},write:function(a,b){return b.angle=a&&-1*a}}})],b.prototype,"angle",void 0);f([c.property({type:Number,json:{write:!0}})],b.prototype,"width",void 0);return b=d=f([c.subclass("esri.symbols.TextSymbol")],b)}(c.declared(b))})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../portal/Portal ./Symbol ./support/Thumbnail".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){var k=g.getLogger("esri.symbols.WebStyleSymbol"),q=l.strict()({styleSymbolReference:"web-style"});return function(a){function d(b){b=a.call(this,b)||this;b.styleName=null;b.portal=null;b.styleUrl=null;b.thumbnail=null;b.name=null;b.type="web-style";return b}n(d,a);g=d;d.prototype.read=function(a,b){this.portal=b?b.portal:void 0;this.inherited(arguments,[a,b]);return this};d.prototype.clone=function(){return new g({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,
portal:this.portal})};d.prototype.fetchSymbol=function(){var a=this;return e.create(function(a){return h(["./support/styleUtils"],a)}).then(function(b){b=b.resolveWebStyleSymbol(a,{portal:a.portal});b.catch(function(a){k.error("#fetchSymbol()","Failed to create symbol from style",a)});return b})};var g;f([p.property({json:{write:!1}})],d.prototype,"color",void 0);f([p.property({type:String,json:{write:!0}})],d.prototype,"styleName",void 0);f([p.property({type:b,json:{write:!1}})],d.prototype,"portal",
void 0);f([p.property({type:String,json:{read:c.read,write:c.write}})],d.prototype,"styleUrl",void 0);f([p.property({type:m.default,json:{read:!1}})],d.prototype,"thumbnail",void 0);f([p.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);f([p.property({type:q.apiValues,readOnly:!0,json:{type:q.jsonValues,read:!1,write:q.write}})],d.prototype,"type",void 0);return d=g=f([p.subclass("esri.symbols.WebStyleSymbol")],d)}(p.declared(a))})},"esri/symbols/support/symbolConversion":function(){define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../Font".split(" "),
function(h,d,n,f,l,g,e){function c(b){var a=b.color?b.color.clone():new n([255,255,255]),c,d,e;b instanceof f.PictureMarkerSymbol?(b.color&&0===b.color.r&&0===b.color.g&&0===b.color.b&&(a=new n([255,255,255])),c={href:b.url},d=b.width<=b.height?b.height:b.width):(c=b.style,c in p?c=p[c]:(console.log(c+' cannot be mapped to Icon symbol. Fallback to "circle"'),c="circle"),c={primitive:c},d=b.size,b.outline&&0<b.outline.width&&(e={size:b.outline.width,color:b.outline.color?b.outline.color.clone():[255,
255,255]}));return new f.PointSymbol3D(new f.IconSymbol3DLayer({size:d,resource:c,material:{color:a},outline:e}))}Object.defineProperty(d,"__esModule",{value:!0});var p={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x"};d.to3D=function(b,a,d,h){void 0===a&&(a=!1);void 0===d&&(d=!1);void 0===h&&(h=!0);if(!b)return{symbol:null};if(f.isSymbol3D(b)||b instanceof f.WebStyleSymbol)h=b.clone();else if(b instanceof f.SimpleLineSymbol)h=new f.LineSymbol3D(new f.LineSymbol3DLayer({size:b.width||
1,material:{color:b.color?b.color.clone():[255,255,255]}}));else if(b instanceof f.SimpleMarkerSymbol)h=c(b);else if(b instanceof f.PictureMarkerSymbol)h=c(b);else if(b instanceof f.SimpleFillSymbol)h=new f.FillSymbol3DLayer({material:{color:b.color?b.color.clone():[255,255,255,0]}}),b.outline&&(h.outline={size:b.outline.width||0,color:b.outline.color?b.outline.color.clone():[255,255,255]}),h=new f.PolygonSymbol3D(h);else if(b instanceof f.TextSymbol){var k;k=b.haloColor;var m=b.haloSize;k=k&&0<m?
{color:g.clone(k),size:m}:null;m=b.font?b.font.clone():new e;h=new (h?f.LabelSymbol3D:f.PointSymbol3D)(new f.TextSymbol3DLayer({size:m.size,font:m,halo:k,material:{color:b.color.clone()},text:b.text}))}else return{error:new l("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(b.type||b.declaredClass)+"' is unsupported in 3D",{symbol:b})};a&&(h.id=b.id);if(d&&f.isSymbol3D(h))for(b=0;b<h.symbolLayers.length;++b)h.symbolLayers.getItemAt(b)._ignoreDrivers=!0;return{symbol:h}}})},"esri/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./symbols/callouts/LineCallout3DBorder ./symbols/support/Symbol3DVerticalOffset ./symbols/support/jsonUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A,x,C,y,E,D,F,L,P,M){Object.defineProperty(d,"__esModule",{value:!0});d.ExtrudeSymbol3DLayer=n;d.BaseFillSymbol=f;d.FillSymbol3DLayer=l;d.Font=g;d.IconSymbol3DLayer=e;d.LabelSymbol3D=c;d.LineSymbol3D=p;d.LineSymbol3DLayer=b;d.BaseMarkerSymbol=a;d.MeshSymbol3D=m;d.ObjectSymbol3DLayer=k;d.PathSymbol3DLayer=q;d.PictureFillSymbol=v;d.PictureMarkerSymbol=u;d.PointSymbol3D=t;d.PolygonSymbol3D=r;d.SimpleFillSymbol=w;d.SimpleLineSymbol=z;d.SimpleMarkerSymbol=
B;d.BaseSymbol=A;d.BaseSymbol3D=x;d.BaseSymbol3DLayer=C;d.TextSymbol=y;d.TextSymbol3DLayer=E;d.WebStyleSymbol=D;d.LineCallout3D=F;d.LineCallout3DBorder=L;d.Symbol3DVerticalOffset=P.Symbol3DVerticalOffset;d.fromJSON=M.fromJSON;d.isSymbol=function(a){return a instanceof d.BaseSymbol};d.isSymbol2D=function(a){if(!a)return!1;switch(a.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};d.isSymbol3D=function(a){if(!a)return!1;
switch(a.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}}})},"esri/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(h,d,n,f,l,g,e,c,
p,b,a,m,k,q,v,u){Object.defineProperty(d,"__esModule",{value:!0});d.types={base:q,key:"type",typeMap:{"simple-fill":a,"picture-fill":e,"picture-marker":c,"simple-line":m,"simple-marker":k,text:v,"label-3d":f,"line-3d":l,"mesh-3d":g,"point-3d":p,"polygon-3d":b,"web-style":u}};d.rendererTypes={base:q,key:"type",typeMap:{"simple-fill":a,"picture-fill":e,"picture-marker":c,"simple-line":m,"simple-marker":k,text:v,"line-3d":l,"mesh-3d":g,"point-3d":p,"polygon-3d":b,"web-style":u}};d.labelTypes={base:q,
key:"type",typeMap:{text:v,"label-3d":f}};d.types3D={base:q,key:"type",typeMap:{"label-3d":f,"line-3d":l,"mesh-3d":g,"point-3d":p,"polygon-3d":b,"web-style":u}};d.rendererTypes3D={base:q,key:"type",typeMap:{"line-3d":l,"mesh-3d":g,"point-3d":p,"polygon-3d":b,"web-style":u}};d.labelTypes3D={base:q,key:"type",typeMap:{"label-3d":f}};d.ensureType=n.ensureOneOfType(d.types)})},"esri/tasks/operations/pbfOptimizedFeatureSet":function(){define(["require","exports","../../layers/graphics/OptimizedFeature",
"../../layers/graphics/OptimizedFeatureSet","../../layers/graphics/OptimizedGeometry"],function(h,d,n,f,l){Object.defineProperty(d,"__esModule",{value:!0});h=function(){function d(d){this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}d.prototype.createFeatureResult=function(){return new f.default};d.prototype.prepareFeatures=function(){};d.prototype.finishFeatureResult=function(){};d.prototype.addFeature=function(d,c){d.features.push(c)};
d.prototype.createFeature=function(){return new n.default};d.prototype.createSpatialReference=function(){return{wkid:0}};d.prototype.createGeometry=function(){return new l.default};d.prototype.addField=function(d,c){d.fields.push(c)};d.prototype.addCoordinate=function(d,c){d.coords.push(c)};d.prototype.addCoordinatePoint=function(d,c){d.coords.push(c)};d.prototype.addLength=function(d,c){d.lengths.push(c)};d.prototype.createPointGeometry=function(){return new l.default};return d}();d.Context=h})},
"esri/tasks/operations/PBFWorker":function(){define("require exports ../../Graphic ../../core/promiseUtils ../../geometry/SpatialReference ./pbfQueryUtils".split(" "),function(h,d,n,f,l,g){return function(){function d(){}d.prototype.parseFeatureQuery=function(c,d){return c&&0!==c.byteLength?this.thread?this.thread.invoke("_parseFeatureQuery",{buffer:c,options:d},{transferList:[c]}).then(function(b){var a=b.featureSet;if(b.sr){var c=l.fromJSON(b.sr);a.spatialReference=c}for(var c=a.spatialReference,
d=0,a=a.features;d<a.length;d++){var e=a[d];e.uid=n.generateUID();e.geometry&&(e.geometry.spatialReference=c)}return b.featureSet}):f.resolve(g.parsePBFFeatureQuery(c,d)):f.resolve(null)};d.prototype._parseFeatureQuery=function(c){var d=g.parsePBFFeatureQuery(c.buffer,c.options),b;c.options&&"dehydrated"===c.options.type&&(b=d.spatialReference.toJSON(),d.spatialReference=null);return f.resolve({featureSet:d,sr:b})};return d}()})},"esri/tasks/operations/urlUtils":function(){define(["require","exports"],
function(h,d){function n(d){var f={},g;for(g in d)if("declaredClass"!==g){var e=d[g];if(null!=e&&"function"!==typeof e)if(Array.isArray(e)){f[g]=[];for(var c=0;c<e.length;c++)f[g][c]=n(e[c])}else"object"===typeof e?e.toJSON&&(f[g]=JSON.stringify(e)):f[g]=e}return f}Object.defineProperty(d,"__esModule",{value:!0});d.mapParameters=n})},"esri/tasks/operations/queryAttachments":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/urlUtils ../../layers/support/AttachmentInfo ./urlUtils".split(" "),
function(h,d,n,f,l,g,e){function c(c){c=c.toJSON();c.attachmentTypes&&(c.attachmentTypes=c.attachmentTypes.join(","));c.globalIds&&(c.globalIds=c.globalIds.join(","));c.objectIds&&(c.objectIds=c.objectIds.join(","));c.size&&(c.size=c.size.join(","));return c}Object.defineProperty(d,"__esModule",{value:!0});d.processAttachmentQueryResult=function(c,b,a){for(var d={},e=0;e<c.length;e++)for(var f=c[e],h=f.parentObjectId,p=0,f=f.attachmentInfos;p<f.length;p++){var n=f[p],r=l.addProxy(b+"/"+h+"/attachments/"+
n.id+(a?"?token\x3d"+a:"")),n=g.fromJSON(n);n.set({url:r,parentObjectId:h});d[h]?d[h].push(n):d[h]=[n]}return d};d.executeAttachmentQuery=function(d,b,a){b={query:e.mapParameters(n({},d.query,{f:"json"},c(b)))};a&&(b=n({},a,b));return f(d.path+"/queryAttachments",b)}})},"esri/tasks/operations/queryRelatedRecords":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../request","./urlUtils"],function(h,d,n,f,l){function g(d){d=d.toJSON();d.objectIds&&(d.objectIds=d.objectIds.join(","));
d.outFields&&(d.outFields=d.outFields.join(","));d.outSpatialReference&&(d.outSR=d.outSR.wkid||JSON.stringify(d.outSR.toJSON()),delete d.outSpatialReference);d.source&&(d.layer=JSON.stringify({source:d.source}),delete d.source);return d}Object.defineProperty(d,"__esModule",{value:!0});d.toQueryStringParameters=g;d.executeRelationshipQuery=function(d,c,h){c={query:l.mapParameters(n({},d.query,{f:"json"},g(c)))};h&&(c=n({},h,c));return f(d.path+"/queryRelatedRecords",c).then(function(b){for(var a=b.data,
c=a.geometryType,d=a.spatialReference,e={},f=0,a=a.relatedRecordGroups;f<a.length;f++){var g=a[f],h={fields:void 0,objectIdFieldName:void 0,geometryType:c,spatialReference:d,features:g.relatedRecords};if(null!=g.objectId)e[g.objectId]=h;else for(var l in g)g.hasOwnProperty(l)&&"relatedRecords"!==l&&(e[g[l]]=h)}b.data=e;return b})}})},"esri/tasks/support/AttachmentQuery":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this,a)||this;a.attachmentTypes=null;a.definitionExpression=null;a.globalIds=null;a.num=null;a.objectIds=null;a.size=null;a.start=null;return a}n(d,c);b=d;d.prototype.writeStart=function(a,b,c){b.resultOffset=this.start;b.resultRecordCount=this.num||10};d.prototype.clone=function(){return new b(g.clone({attachmentTypes:this.attachmentTypes,definitionExpression:this.definitionExpression,globalIds:this.globalIds,num:this.num,objectIds:this.objectIds,
size:this.size,start:this.start}))};var b;f([e.property({type:[String],json:{write:!0}})],d.prototype,"attachmentTypes",void 0);f([e.property({type:String,json:{write:!0}})],d.prototype,"definitionExpression",void 0);f([e.property({type:[Number],json:{write:!0}})],d.prototype,"globalIds",void 0);f([e.property({type:Number,json:{read:{source:"resultRecordCount"}}})],d.prototype,"num",void 0);f([e.property({type:[Number],json:{write:!0}})],d.prototype,"objectIds",void 0);f([e.property({type:[Number],
json:{write:!0}})],d.prototype,"size",void 0);f([e.property({type:Number,json:{read:{source:"resultOffset"}}})],d.prototype,"start",void 0);f([e.writer("start"),e.writer("num")],d.prototype,"writeStart",null);return d=b=f([e.subclass("esri.tasks.support.AttachmentQuery")],d)}(e.declared(l))})},"esri/tasks/support/FeatureSet":function(){define("../../core/kebabDictionary ../../core/JSONSupport ../../core/lang ../../Graphic ../../layers/support/Field ../../geometry/SpatialReference ../../geometry/support/graphicsUtils ../../geometry/support/jsonUtils".split(" "),
function(h,d,n,f,l,g,e,c){h=h({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});return d.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",getDefaults:function(){return n.mixin(this.inherited(arguments),{features:[]})},properties:{displayFieldName:null,exceededTransferLimit:null,features:{value:null,json:{read:function(c,b){for(var a=g.fromJSON(b.spatialReference),d=[],e=0;e<c.length;e++){var h=
c[e],l=f.fromJSON(h),h=h.geometry&&h.geometry.spatialReference;l.geometry&&!h&&(l.geometry.spatialReference=a);d.push(l)}b.transform&&this._hydrate(b.transform,b.geometryType,d);return d}}},fields:{value:null,type:[l]},geometryType:{value:null,json:{read:h.read}},spatialReference:{type:g}},toJSON:function(d){var b={hasZ:this.hasZ,hasM:this.hasM};this.displayFieldName&&(b.displayFieldName=this.displayFieldName);this.fields&&(b.fields=this.fields.map(function(a){return a.toJSON()}));this.spatialReference?
b.spatialReference=this.spatialReference.toJSON():this.features[0]&&this.features[0].geometry&&(b.spatialReference=this.features[0].geometry.spatialReference.toJSON());this.features[0]&&(this.features[0].geometry&&(b.geometryType=c.getJsonType(this.features[0].geometry)),b.features=e._encodeGraphics(this.features,d));b.exceededTransferLimit=this.exceededTransferLimit;b.transform=this.transform;return n.fixJson(b)},quantize:function(c){var b=c.translate[0],a=c.translate[1],d=c.scale[0],e=c.scale[1],
f=this.features,g=function(a,b,c){var d,e,f,g,h,k,l=[];d=0;for(e=a.length;d<e;d++)if(f=a[d],0<d){if(k=b(f[0]),f=c(f[1]),k!==g||f!==h)l.push([k-g,f-h]),g=k,h=f}else g=b(f[0]),h=c(f[1]),l.push([g,h]);return 0<l.length?l:null},h=function(a,b,c){if("point"===a)return function(a){a.x=b(a.x);a.y=c(a.y);return a};if("polyline"===a||"polygon"===a)return function(a){var d,e,f,h,k;f=a.rings||a.paths;k=[];d=0;for(e=f.length;d<e;d++)h=f[d],(h=g(h,b,c))&&k.push(h);return 0<k.length?(a.rings?a.rings=k:a.paths=
k,a):null};if("multipoint"===a)return function(a){var d;d=g(a.points,b,c);return 0<d.length?(a.points=d,a):null};if("extent"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-b)/d)},function(b){return Math.round((a-b)/e)}),l,p;l=0;for(p=f.length;l<p;l++)h(f[l].geometry)||(f.splice(l,1),l--,p--);this.transform=c;return this},_hydrate:function(c,b,a){if(c){var d=c.translate[0],e=c.translate[1],f=c.scale[0],g=c.scale[1],h=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=
b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=a.rings||a.paths;var d,e,f,g,h,k,l,m;d=0;for(e=a.length;d<e;d++)for(h=a[d],f=0,g=h.length;f<g;f++)k=h[f],0<f?(l+=k[0],m+=k[1]):(l=k[0],m=k[1]),k[0]=b(l),k[1]=c(m)};if("esriGeometryEnvelope"===a)return function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,e,f,g,h;d=0;for(e=a.length;d<e;d++)f=a[d],0<d?(g+=f[0],
h+=f[1]):(g=f[0],h=f[1]),f[0]=b(g),f[1]=c(h)}}(b,function(a){return a*f+d},function(a){return e-a*g});c=0;for(b=a.length;c<b;c++)a[c].geometry&&h(a[c].geometry)}}})})},"esri/geometry/support/graphicsUtils":function(){define(["require","exports","../../core/Collection","../Extent"],function(h,d,n,f){Object.defineProperty(d,"__esModule",{value:!0});d.graphicsExtent=function(d){if(!d||!d.length)return null;var g=n.isCollection(d)?d.getItemAt(0).geometry:d[0].geometry,e=g.extent,c=g;null===e&&(e=new f(c.x,
c.y,c.x,c.y,g.spatialReference));for(var h=1;h<d.length;h++){var c=g=n.isCollection(d)?d.getItemAt(h).geometry:d[h].geometry,b=g.extent;null===b&&(b=new f(c.x,c.y,c.x,c.y,g.spatialReference));e=e.clone().union(b)}return 0>e.width&&0>e.height?null:e};d.getGeometries=function(d){return d.map(function(d){return d.geometry})};d._encodeGraphics=function(d,f){var e=[];d.forEach(function(c,d){c=c.toJSON();var b={};if(c.geometry){var a=f&&f[d];b.geometry=a&&a.toJSON()||c.geometry}c.attributes&&(b.attributes=
c.attributes);e[d]=b});return e}})},"esri/tasks/support/Query":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils ../../geometry/support/typeUtils ../../symbols/support/jsonUtils ../../symbols/support/typeUtils ./QuantizationParameters ./StatisticDefinition".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u){var t=c({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),r=c({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",
esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(c){function d(a){a=c.call(this,a)||this;a.datumTransformation=null;a.distance=void 0;a.gdbVersion=null;a.geometry=null;a.geometryPrecision=void 0;a.groupByFieldsForStatistics=null;a.having=null;a.historicMoment=null;a.maxAllowableOffset=void 0;a.maxRecordCountFactor=1;a.multipatchOption=null;a.num=void 0;a.objectIds=null;a.orderByFields=null;a.outFields=null;a.outSpatialReference=null;a.outStatistics=
null;a.parameterValues=null;a.pixelSize=null;a.quantizationParameters=null;a.rangeValues=null;a.relationParameter=null;a.resultType=null;a.returnDistinctValues=!1;a.returnGeometry=!1;a.returnCentroid=!1;a.returnExceededLimitFeatures=!0;a.returnM=void 0;a.returnZ=void 0;a.source=null;a.spatialRelationship="intersects";a.start=void 0;a.sqlFormat=null;a.text=null;a.timeExtent=null;a.units="meters";a.where=null;return a}n(d,c);e=d;d.prototype.castDatumTransformation=function(a){return"number"===typeof a||
"object"===typeof a?a:null};d.prototype.writeHistoricMoment=function(a,b,c){b.historicMoment=a&&a.getTime()};d.prototype.writeParameterValues=function(a,b,c){if(a){c={};for(var d in a){var e=a[d];Array.isArray(e)?c[d]=e.map(function(a){return a instanceof Date?a.getTime():a}):c[d]=e instanceof Date?e.getTime():e}b.parameterValues=c}};d.prototype.writeStart=function(a,b,c){b.resultOffset=this.start;b.resultRecordCount=this.num||10;b.where="1\x3d1"};d.prototype.writeWhere=function(a,b,c){b.where=a||
"1\x3d1"};d.prototype.clone=function(){return new e(p.clone({datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};var e;d.MAX_MAX_RECORD_COUNT_FACTOR=5;f([b.property({json:{write:!0}})],d.prototype,"datumTransformation",void 0);f([b.cast("datumTransformation")],d.prototype,"castDatumTransformation",null);f([b.property({type:Number,
json:{write:!0}})],d.prototype,"distance",void 0);f([b.property({type:String,json:{write:!0}})],d.prototype,"gdbVersion",void 0);f([b.property({types:m.types,json:{read:a.fromJSON,write:!0}})],d.prototype,"geometry",void 0);f([b.property({type:Number,json:{write:!0}})],d.prototype,"geometryPrecision",void 0);f([b.property({type:[String],json:{write:!0}})],d.prototype,"groupByFieldsForStatistics",void 0);f([b.property({type:String,json:{write:!0}})],d.prototype,"having",void 0);f([b.property({type:Date})],
d.prototype,"historicMoment",void 0);f([b.writer("historicMoment")],d.prototype,"writeHistoricMoment",null);f([b.property({type:Number,json:{write:!0}})],d.prototype,"maxAllowableOffset",void 0);f([b.property({type:Number,cast:function(a){return 1>a?1:a>e.MAX_MAX_RECORD_COUNT_FACTOR?e.MAX_MAX_RECORD_COUNT_FACTOR:a},json:{write:{overridePolicy:function(a){return{enabled:1<a}}}}})],d.prototype,"maxRecordCountFactor",void 0);f([b.property({type:String,json:{write:!0}})],d.prototype,"multipatchOption",
void 0);f([b.property({type:Number,json:{read:{source:"resultRecordCount"}}})],d.prototype,"num",void 0);f([b.property({type:[Number],json:{write:!0}})],d.prototype,"objectIds",void 0);f([b.property({type:[String],json:{write:!0}})],d.prototype,"orderByFields",void 0);f([b.property({type:[String],json:{write:!0}})],d.prototype,"outFields",void 0);f([b.property({type:l.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d.prototype,"outSpatialReference",void 0);f([b.property({type:[u],
json:{write:!0}})],d.prototype,"outStatistics",void 0);f([b.property({json:{write:!0}})],d.prototype,"parameterValues",void 0);f([b.writer("parameterValues")],d.prototype,"writeParameterValues",null);f([b.property({types:q.types,json:{read:k.read,write:!0}})],d.prototype,"pixelSize",void 0);f([b.property({type:v.default,json:{write:!0}})],d.prototype,"quantizationParameters",void 0);f([b.property({type:[Object],json:{write:!0}})],d.prototype,"rangeValues",void 0);f([b.property({type:String,json:{read:{source:"relationParam"},
write:{target:"relationParam",overridePolicy:function(a){return{enabled:"relation"===this.spatialRelationship}}}}})],d.prototype,"relationParameter",void 0);f([b.property({type:String,json:{write:!0}})],d.prototype,"resultType",void 0);f([b.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnDistinctValues",void 0);f([b.property({type:Boolean,json:{write:!0}})],d.prototype,"returnGeometry",void 0);f([b.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],
d.prototype,"returnCentroid",void 0);f([b.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:!a}}}}})],d.prototype,"returnExceededLimitFeatures",void 0);f([b.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnM",void 0);f([b.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnZ",void 0);f([b.property({json:{write:!0}})],d.prototype,"source",void 0);f([b.property({type:String,
json:{read:{source:"spatialRel",reader:t.read},write:{target:"spatialRel",writer:t.write}}})],d.prototype,"spatialRelationship",void 0);f([b.property({type:Number,json:{read:{source:"resultOffset"}}})],d.prototype,"start",void 0);f([b.writer("start"),b.writer("num")],d.prototype,"writeStart",null);f([b.property({type:String,json:{write:!0}})],d.prototype,"sqlFormat",void 0);f([b.property({type:String,json:{write:!0}})],d.prototype,"text",void 0);f([b.property({type:g,json:{write:!0}})],d.prototype,
"timeExtent",void 0);f([b.property({type:String,json:{read:r.read,write:{writer:r.write,overridePolicy:function(a){return{enabled:0<this.distance}}}}})],d.prototype,"units",void 0);f([b.property({type:String,json:{write:{overridePolicy:function(a){return{enabled:null!=a||0<this.start}}}}})],d.prototype,"where",void 0);f([b.writer("where")],d.prototype,"writeWhere",null);return d=e=f([b.subclass("esri.tasks.support.Query")],d)}(b.declared(e))})},"esri/TimeExtent":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g){var e={milliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},seconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},minutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},hours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},days:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},weeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},months:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},years:{getter:"getUTCFullYear",
setter:"setUTCFullYear",multiplier:1},decades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},centuries:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}};return function(c){function d(a,b){a=c.call(this)||this;a.endTime=null;a.startTime=null;return a}n(d,c);b=d;d.prototype.normalizeCtorArgs=function(a,b){return!a||a instanceof Date?{startTime:a,endTime:b}:a};d.prototype.readEndTime=function(a,b){return null!=b.endTime?new Date(b.endTime):null};d.prototype.writeEndTime=
function(a,b,c){b.endTime=a?a.getTime():null};d.prototype.readStartTime=function(a,b){return null!=b.startTime?new Date(b.startTime):null};d.prototype.writeStartTime=function(a,b,c){b.startTime=a?a.getTime():null};d.prototype.clone=function(){return new b({endTime:this.endTime,startTime:this.startTime})};d.prototype.intersection=function(a){if(!a)return null;var c=this.startTime?this.startTime.getTime():-Infinity,d=this.endTime?this.endTime.getTime():Infinity,e=a.startTime?a.startTime.getTime():-Infinity;
a=a.endTime?a.endTime.getTime():Infinity;var f,g;e>=c&&e<=d?f=e:c>=e&&c<=a&&(f=c);d>=e&&d<=a?g=d:a>=c&&a<=d&&(g=a);if(isNaN(f)||isNaN(g))return null;c=new b;c.startTime=-Infinity===f?null:new Date(f);c.endTime=Infinity===g?null:new Date(g);return c};d.prototype.offset=function(a,c){var d=new b,e=this.startTime,f=this.endTime;e&&(d.startTime=this._offsetDate(e,a,c));f&&(d.endTime=this._offsetDate(f,a,c));return d};d.prototype._offsetDate=function(a,b,c){a=new Date(a.getTime());b&&c&&(c=e[c],a[c.setter](a[c.getter]()+
b*c.multiplier));return a};var b;f([g.property({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"endTime",void 0);f([g.reader("endTime")],d.prototype,"readEndTime",null);f([g.writer("endTime")],d.prototype,"writeEndTime",null);f([g.property({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"startTime",void 0);f([g.reader("startTime")],d.prototype,"readStartTime",null);f([g.writer("startTime")],d.prototype,"writeStartTime",null);return d=b=f([g.subclass("esri.TimeExtent")],d)}(g.declared(l))})},
"esri/tasks/support/QuantizationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e,c,p){Object.defineProperty(d,"__esModule",{value:!0});var b=e({upperLeft:"upper-left",lowerLeft:"lower-left"});h=function(a){function d(b){b=a.call(this,b)||this;b.extent=null;b.mode="view";
b.originPosition="upper-left";b.tolerance=1;return b}n(d,a);e=d;d.prototype.clone=function(){return new e(c.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};var e;f([p.property({type:l.Extent,json:{write:!0}})],d.prototype,"extent",void 0);f([p.property({type:["view","edit"],json:{write:!0}})],d.prototype,"mode",void 0);f([p.property({type:String,json:{read:b.read,write:b.write}})],d.prototype,"originPosition",void 0);f([p.property({type:Number,
json:{write:!0}})],d.prototype,"tolerance",void 0);return d=e=f([p.subclass("esri.tasks.support.QuantizationParameters")],d)}(p.declared(g));d.default=h})},"esri/tasks/support/StatisticDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){return function(d){function c(b){b=d.call(this)||this;b.maxPointCount=void 0;b.maxRecordCount=void 0;
b.maxVertexCount=void 0;b.onStatisticField=null;b.outStatisticFieldName=null;b.statisticType=null;return b}n(c,d);e=c;c.prototype.clone=function(){return new e({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})};var e;f([g.property({type:Number,json:{write:!0}})],c.prototype,"maxPointCount",void 0);f([g.property({type:Number,
json:{write:!0}})],c.prototype,"maxRecordCount",void 0);f([g.property({type:Number,json:{write:!0}})],c.prototype,"maxVertexCount",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"onStatisticField",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"outStatisticFieldName",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"statisticType",void 0);return c=e=f([g.subclass("esri.tasks.support.StatisticDefinition")],c)}(g.declared(l))})},"esri/tasks/support/RelationshipQuery":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e,c){return function(d){function b(a){a=d.call(this,a)||this;a.definitionExpression=null;a.gdbVersion=null;a.geometryPrecision=void 0;a.historicMoment=null;a.maxAllowableOffset=void 0;a.objectIds=null;a.outFields=null;a.outSpatialReference=null;a.relationshipId=void 0;a.returnGeometry=!1;a.source=null;return a}n(b,d);a=b;b.prototype._writeHistoricMoment=function(a,b){b.historicMoment=a&&a.getTime()};b.prototype.clone=function(){return new a(e.clone({definitionExpression:this.definitionExpression,
gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source}))};var a;f([c.property({type:String,json:{write:!0}})],b.prototype,"definitionExpression",void 0);f([c.property({type:String,json:{write:!0}})],
b.prototype,"gdbVersion",void 0);f([c.property({type:Number,json:{write:!0}})],b.prototype,"geometryPrecision",void 0);f([c.property({type:Date})],b.prototype,"historicMoment",void 0);f([c.writer("historicMoment")],b.prototype,"_writeHistoricMoment",null);f([c.property({type:Number,json:{write:!0}})],b.prototype,"maxAllowableOffset",void 0);f([c.property({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0);f([c.property({type:[String],json:{write:!0}})],b.prototype,"outFields",void 0);
f([c.property({type:l.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);f([c.property({json:{write:!0}})],b.prototype,"relationshipId",void 0);f([c.property({json:{write:!0}})],b.prototype,"returnGeometry",void 0);f([c.property({json:{write:!0}})],b.prototype,"source",void 0);return b=a=f([c.subclass("esri.tasks.support.RelationshipQuery")],b)}(c.declared(g))})},"esri/layers/graphics/sources/MemorySource":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../geometry ../../../Graphic ../../../core/Accessor ../../../core/Collection ../../../core/Error ../../../core/has ../../../core/Loadable ../../../core/Logger ../../../core/promiseUtils ../../../core/requireUtils ../../../core/workers ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/typescript ../../../tasks/support/FeatureSet module".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z){Object.defineProperty(d,"__esModule",{value:!0});var B=0,A=m.getLogger("esri.layers.graphics.sources.MemorySource");e=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._idToClientGraphic=null;b.type="memory";return b}n(c,a);c.prototype.load=function(){var a=this,c;c=k.resolve();this.addResolvingPromise(c.then(function(){return v.open(q.getAbsMid("./support/MemorySourceWorker",h,z),{strategy:b("esri-workers-for-memory-layers")?
"dedicated":"local"}).then(function(b){a._connection=b;var c=a.layer,d=c.fields,e=c.spatialReference,f=c.objectIdField,g=c.hasM,c=c.hasZ,h=a._prepareAddFeatures(a.items);a.on("before-changes",function(a){A.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead");a.preventDefault()});return b.invoke("load",{features:h.features,fields:d&&d.map(function(a){return a.toJSON()}),geometryType:l.typeKebabDictionary.toJSON(a.workerGeometryType),hasM:g,
hasZ:c,objectIdField:f,spatialReference:e&&e.toJSON()}).then(function(b){for(var c=0,d=b.warnings;c<d.length;c++)A.warn(d[c]);b.featureErrors.length&&A.warn("Encountered "+b.featureErrors.length+" validation errors while loading features",b.featureErrors);c=b.layerDefinition;a._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(c.geometryType=l.typeKebabDictionary.toJSON(h.inferredGeometryType));a.layerDefinition=c;a._requiresClientGraphicMapping()&&(a._idToClientGraphic=new Map);
h.finish(b.assignedObjectIds)})})}));return this.when()};Object.defineProperty(c.prototype,"workerGeometryType",{get:function(){var a=this.layer&&this.layer.geometryType;return a?this._geometryTypeRequiresClientGraphicMapping(a)?"polygon":a:null},enumerable:!0,configurable:!0});c.prototype.applyEdits=function(a){var b=this;return this.load().then(function(){return b._applyEdits(a)})};c.prototype.openPorts=function(){var a=this;return this.load().then(function(){return a._connection.openPorts()})};
c.prototype.queryFeatures=function(a){var b=this;return this.load().then(function(){return b._connection.invoke("queryFeatures",a?a.toJSON():null)}).then(function(a){a=w.fromJSON(a);if(!b._idToClientGraphic)return a;for(var c=b.layer.objectIdField,d=0,e=a.features;d<e.length;d++){var f=e[d],g=b._idToClientGraphic.get(f.attributes[c]);g&&(f.geometry=g.geometry)}return a})};c.prototype.queryFeaturesJSON=function(a){var b=this;return this._requiresClientGraphicMapping()?k.reject(new p("query-features-json:unsupported",
"Cannot query in JSON format for client only geometry types (mesh and extent)")):this.load().then(function(){return b._connection.invoke("queryFeatures",a?a.toJSON():null)})};c.prototype.queryFeatureCount=function(a){var b=this;return this.load().then(function(){return b._connection.invoke("queryFeatureCount",a?a.toJSON():null)})};c.prototype.queryObjectIds=function(a){var b=this;return this.load().then(function(){return b._connection.invoke("queryObjectIds",a?a.toJSON():null)})};c.prototype.queryExtent=
function(a){var b=this;return this.load().then(function(){return b._connection.invoke("queryExtent",a?a.toJSON():null)}).then(function(a){return{count:a.count,extent:l.Extent.fromJSON(a.extent)}})};c.prototype._applyEdits=function(a){var b=this;if(!this._connection)throw new p("feature-layer-source:edit-failure","Memory source not loaded");var c=this.layer.objectIdField,d=null,e=[],f=[];a.addFeatures&&(d=this._prepareAddFeatures(a.addFeatures));if(a.deleteFeatures)for(var g=0,h=a.deleteFeatures;g<
h.length;g++){var k=h[g];"objectId"in k&&null!=k.objectId?e.push(k.objectId):"attributes"in k&&null!=k.attributes[c]&&e.push(k.attributes[c])}if(a.updateFeatures)for(c=0,a=a.updateFeatures;c<a.length;c++)k=a[c],f.push(this._serializeFeature(k));return this._connection.invoke("applyEdits",{adds:d?d.features:[],updates:f,deletes:e}).then(function(a){var c=a.featureEditResults;b.fullExtent=a.fullExtent;d&&d.finish(c.uidToObjectId);if(b._idToClientGraphic){a=0;for(var e=c.deleteResults;a<e.length;a++){var f=
e[a];f.success&&b._idToClientGraphic.delete(f.objectId)}}return b._createEditsResult(c)})};c.prototype._createEditsResult=function(a){return{addFeatureResults:a.addResults?a.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:a.updateResults?a.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:a.deleteResults?a.deleteResults.map(this._createFeatureEditResult,this):[]}};c.prototype._createFeatureEditResult=function(a){var b=!0===a.success?null:a.error||
{code:void 0,description:void 0};return{objectId:a.objectId,globalId:a.globalId,error:b?new p("feature-layer-source:edit-failure",b.description,{code:b.code}):null}};c.prototype._prepareAddFeatures=function(a){for(var b=new Map,c=Array(a.length),d=null,e=0;e<a.length;e++){var f=a[e],g=this._serializeFeature(f);!d&&f.geometry&&(d=f.geometry.type);c[e]=g;b.set(""+g.uid,f)}var h=this;return{features:c,inferredGeometryType:d,finish:function(a){var c=h.layerDefinition.objectIdField,d;for(d in a){var e=
a[d],f=b.get(d);f&&(f.attributes||(f.attributes={}),-1===e?delete f.attributes[c]:f.attributes[c]=e,h._addIdToClientGraphic(f))}}}};c.prototype._addIdToClientGraphic=function(a){if(this._idToClientGraphic){var b=this.layerDefinition.objectIdField,b=a.attributes&&a.attributes[b];null!=b&&this._idToClientGraphic.set(b,a)}};c.prototype._requiresClientGraphicMapping=function(){return this._geometryTypeRequiresClientGraphicMapping(this.layer.geometryType||this.layerDefinition.geometryType)};c.prototype._geometryRequiresClientGraphicMapping=
function(a){return this._geometryTypeRequiresClientGraphicMapping(a.type)};c.prototype._geometryTypeRequiresClientGraphicMapping=function(a){return"mesh"===a||"multipatch"===a||"extent"===a};c.prototype._serializeFeature=function(a){var b=a.attributes;a=this._geometryForSerialization(a);var c=(B++).toString();return a?{uid:c,geometry:a.toJSON(),attributes:b}:{uid:c,attributes:b}};c.prototype._geometryForSerialization=function(a){return(a=a.geometry)?this._geometryRequiresClientGraphicMapping(a)?l.Polygon.fromExtent(a.extent):
a:null};f([r.shared({Type:g,ensureType:t.ensureType(g)})],c.prototype,"itemType",void 0);f([u.property()],c.prototype,"type",void 0);f([u.property({constructOnly:!0})],c.prototype,"layer",void 0);f([u.property({readOnly:!0,dependsOn:["layer.geometryType"]})],c.prototype,"workerGeometryType",null);f([u.property()],c.prototype,"layerDefinition",void 0);return c=f([u.subclass("esri.layers.graphics.sources.MemorySource")],c)}(u.declared(e,c,a));d.MemorySource=e;d.default=e})},"esri/core/accessorSupport/typescript":function(){define(["../declare",
"../typescript","../JSONSupport","../lang"],function(h,d,n,f){function l(d,e){if(!d)return e;if(!e)return d;for(var c in e){var f=d[c],b=e[c];Array.isArray(b)&&Array.isArray(f)?d[c]=f.concat(b):d[c]="object"===typeof b&&"object"===typeof f?l(f,b):b}return d}return{subclass:function(g,e){return function(c){c=d.declareDefinition(c,g);e&&(c.instanceMembers.properties=l(e,c.instanceMembers.properties));var e=c.instanceMembers.properties;if(e)for(var b in e){var a=e[b];a&&!a.reader&&a.type&&(a.type===
Date?a.reader=function(a){return null!=a?new Date(a):null}:-1!==a.type._meta.bases.indexOf(n)&&(a.reader=function(a){return function(b){return a.fromJSON(b)}}(a.type)))}return f.mixin(h(c.bases,c.instanceMembers),c.classMembers)}},shared:d.shared,property:function(d){return function(e,c){var f=Object.getPrototypeOf(e),f=f&&f.properties;e.properties&&e.properties!==f||(e.properties={});e.properties=e.properties||{};e.properties[c]=d||{}}}}})},"esri/core/typescript":function(){define(["./declare","./lang"],
function(h,d){var n={declareDefinition:function(d,h){var f=[],e=Object.getPrototypeOf(d.prototype),c;if(e!==Object.prototype){var l=e.constructor;c=l.prototype;f.push(l)}h&&(f=f.concat(h));h={};for(var l=Object.getOwnPropertyNames(d.prototype),b=0;b<l.length;b++){var a=l[b];if("constructor"!==a){var m=a;"dojoConstructor"===a&&(m="constructor");c&&d.prototype[a]===c[a]||(h[m]=d.prototype[a])}}l=Object.getOwnPropertyNames(d);e=Object.getOwnPropertyNames(e.constructor);c={};for(b=0;b<l.length;b++)a=
l[b],-1===e.indexOf(a)&&(c[a]=d[a]);return{bases:f,instanceMembers:h,classMembers:c}},subclass:function(f){return function(l){l=n.declareDefinition(l,f);return d.mixin(h(l.bases,l.instanceMembers),l.classMembers)}},shared:function(d){return function(f,g){f[g]=d}}};return n})},"esri/layers/TileLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/io-query ../geometry ../request ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ./Layer ./mixins/ArcGISCachedService ./mixins/ArcGISMapService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/SublayersOwner ./support/arcgisLayers ./support/arcgisLayerUrl ./support/commonProperties".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A){var x="Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" ");return function(d){function k(a,b){a=d.call(this)||
this;a.spatialReference=null;a.sublayers=null;a.type="tile";a.url=null;return a}f(k,d);k.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};k.prototype.load=function(){var a=this;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]}).then(function(){return a._fetchService()},function(){return a._fetchService()}));return this.when()};Object.defineProperty(k.prototype,"attributionDataUrl",{get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))},
enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"operationalLayerType",{get:function(){if(this.capabilities)return this.capabilities.operations.supportsExportMap?"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var a=this.url||this.portalItem&&this.portalItem.url;return a&&/\/ImageServer(\/|\/?$)/i.test(a)?"ArcGISTiledImageServiceLayer":"ArcGISTiledMapServiceLayer"},enumerable:!0,configurable:!0});k.prototype.readSpatialReference=function(a,b){return(a=a||b.tileInfo&&
b.tileInfo.spatialReference)&&e.SpatialReference.fromJSON(a)};Object.defineProperty(k.prototype,"tileServers",{get:function(){return this._getDefaultTileServers(this.parsedUrl.path)},enumerable:!0,configurable:!0});k.prototype.castTileServers=function(a){return Array.isArray(a)?a.map(function(a){return b.urlToObject(a).path}):null};k.prototype.fetchTile=function(a,b,d,e){a=this.getTileUrl(a,b,d);b={responseType:"image"};e&&e.timestamp&&(b.query={_ts:e.timestamp});return c(a,b).then(function(a){return a.data})};
k.prototype.getTileUrl=function(a,b,c){var d=g.objectToQuery(n({},this.parsedUrl.query,{blankTile:!this.tilemapCache&&this.supportsBlankTile?!1:null,token:this.token?encodeURIComponent(this.token):null})),e=this.tileServers;return(e&&e.length?e[b%e.length]:this.parsedUrl.path)+"/tile/"+a+"/"+b+"/"+c+(d?"?"+d:"")};k.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return p.create(function(a){return h(["../views/2d/layers/TileLayerView2D"],a)});case "3d":return p.create(function(a){return h(["../views/3d/layers/TileLayerView3D"],
a)})}};k.prototype._fetchService=function(){var a=this;return p.create(function(b,d){a.resourceInfo?b({data:a.resourceInfo}):c(a.parsedUrl.path,{query:n({f:"json"},a.parsedUrl.query),responseType:"json"}).then(b,d)}).then(function(b){b.ssl&&(a.url=a.url.replace(/^http:/i,"https:"));a.read(b.data,{origin:"service",url:a.parsedUrl});if(10.1===a.version&&!B.isHostedAgolService(a.url))return z.fetchServerVersion(a.url).then(function(b){a.read({currentVersion:b})}).catch(function(){})})};k.prototype._getMapName=
function(a){return(a=a.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))&&a[2]};k.prototype._getDefaultAttribution=function(a){if(a){var c;a=a.toLowerCase();for(var d=0,e=x.length;d<e;d++)if(c=x[d],-1<c.toLowerCase().indexOf(a))return b.makeAbsolute("//static.arcgis.com/attribution/"+c)}};k.prototype._getDefaultTileServers=function(a){var b=-1!==a.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),c=-1!==a.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);
return b||c?[a,a.replace(b?/server\.arcgisonline/i:/services\.arcgisonline/i,b?"services.arcgisonline":"server.arcgisonline")]:[]};l([a.property({readOnly:!0,dependsOn:["parsedUrl"]})],k.prototype,"attributionDataUrl",null);l([a.property({readOnly:!0})],k.prototype,"operationalLayerType",null);l([a.property()],k.prototype,"popupTemplates",void 0);l([a.property({type:e.SpatialReference})],k.prototype,"spatialReference",void 0);l([a.reader("spatialReference",["spatialReference","tileInfo"])],k.prototype,
"readSpatialReference",null);l([a.property()],k.prototype,"resourceInfo",void 0);l([a.property({readOnly:!0})],k.prototype,"sublayers",void 0);l([a.property({dependsOn:["parsedUrl"],readOnly:!0})],k.prototype,"tileServers",null);l([a.cast("tileServers")],k.prototype,"castTileServers",null);l([a.property({readOnly:!0,json:{read:!1}})],k.prototype,"type",void 0);l([a.property(A.url)],k.prototype,"url",void 0);return k=l([a.subclass("esri.layers.TileLayer")],k)}(a.declared(m,w.default,q,k,r,v,u,t))})},
"esri/layers/mixins/ArcGISMapService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/SpatialReference ./ArcGISService ../support/commonProperties".split(" "),function(h,d,n,f,l,g,e,c,p){return function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.capabilities=void 0;a.copyright=null;a.fullExtent=null;a.legendEnabled=!0;a.spatialReference=null;
a.version=null;return a}n(a,b);a.prototype.readCapabilities=function(a,b){var c=b.capabilities&&b.capabilities.split(",").map(function(a){return a.toLowerCase().trim()});if(!c)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};a=this.type;var d=-1!==c.indexOf("query"),e=-1!==c.indexOf("map"),f=!!b.exportTilesAllowed,c=-1!==c.indexOf("tilemap"),g="tile"!==a&&!!b.supportsDynamicLayers,h="tile"!==a&&(!b.tileInfo||g),k=
"tile"!==a&&(!b.tileInfo||g);return{operations:{supportsQuery:d,supportsExportMap:e,supportsExportTiles:f,supportsTileMap:c},exportMap:e?{supportsSublayersChanges:"tile"!==a,supportsDynamicLayers:g,supportsSublayerVisibility:h,supportsSublayerDefinitionExpression:k}:null,exportTiles:f?{maxExportTilesCount:+b.maxExportTilesCount}:null}};a.prototype.readVersion=function(a,b){(a=b.currentVersion)||(a=b.hasOwnProperty("capabilities")||b.hasOwnProperty("tables")?10:b.hasOwnProperty("supportedImageFormatTypes")?
9.31:9.3);return a};f([l.property({readOnly:!0})],a.prototype,"capabilities",void 0);f([l.reader("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],a.prototype,"readCapabilities",null);f([l.property({json:{read:{source:"copyrightText"}}})],a.prototype,"copyright",void 0);f([l.property({type:g})],a.prototype,"fullExtent",void 0);f([l.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],a.prototype,"id",void 0);
f([l.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],a.prototype,"legendEnabled",void 0);f([l.property(p.popupEnabled)],a.prototype,"popupEnabled",void 0);f([l.property({type:e})],a.prototype,"spatialReference",void 0);f([l.property()],a.prototype,"version",void 0);f([l.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],a.prototype,"readVersion",null);return a=f([l.subclass("esri.layers.mixins.ArcGISMapService")],
a)}(l.declared(c))})},"esri/layers/mixins/RefreshableLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){return function(d){function c(){var c=null!==d&&d.apply(this,arguments)||this;c.refreshInterval=0;return c}n(c,d);c.prototype.refresh=function(){this.emit("refresh")};f([g.property({type:Number,cast:function(c){return.1<=c?c:0>=c?0:.1},
json:{write:!0,origins:{"web-document":{default:0,write:!0}}}})],c.prototype,"refreshInterval",void 0);return c=f([g.subclass("esri.layers.mixins.RefreshableLayer")],c)}(g.declared(l))})},"esri/layers/mixins/ScaleRangeLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){return function(d){function c(){var c=null!==d&&d.apply(this,arguments)||
this;c.minScale=0;c.maxScale=0;return c}n(c,d);f([g.property({type:Number,json:{write:!0}})],c.prototype,"minScale",void 0);f([g.property({type:Number,json:{write:!0}})],c.prototype,"maxScale",void 0);return c=f([g.subclass("esri.layers.mixins.ScaleRangeLayer")],c)}(g.declared(l))})},"esri/layers/mixins/SublayersOwner":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/CollectionFlattener ../../core/Error ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/PropertyOrigin ../support/Sublayer ../support/sublayerUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u){function t(a,b,c){var d=[],e={};a.forEach(function(a){var f=new v;f.read(a,b);c&&(-1===c.indexOf(f.id)?f.visible=!1:f.visible=!0);e[f.id]=f;null!=a.parentLayerId&&-1!==a.parentLayerId?(a=e[a.parentLayerId],a.sublayers||(a.sublayers=[]),a.sublayers.unshift(f)):d.unshift(f)});return d}function r(a,c){var d=c.get(a.id);d?(b.mixin(a.__accessor__.store._values,d.__accessor__.store._values),d.__accessor__.overridden&&(a.__accessor__.overridden=b.mixin(a.__accessor__.overridden||
{},d.__accessor__.overridden)),d.sublayers&&(a.sublayers=d.sublayers.map(function(a){return r(a,c)}))):a.sublayers&&a.sublayers.forEach(function(a){return r(a,c)});return a}Object.defineProperty(d,"__esModule",{value:!0});var w=a.getLogger("esri.layers.TileLayer");h=function(a){function b(){var b=a.call(this)||this;b.allSublayers=new c({root:b,rootCollectionNames:["sublayers"],getChildrenFunction:function(a){return a.sublayers}});b.watch("sublayers",function(a,c){return b._handleSublayersChange(a,
c)},!0);return b}f(b,a);b.prototype.readServiceSublayers=function(a,b,c){return t(b.layers,c)};b.prototype.readSublayersFromItemOrWebMap=function(a,b,c){return!b.layers&&b.visibleLayers?b.visibleLayers.map(function(a){return{id:a}}):t(b.layers,c,b.visibleLayers)};b.prototype.readSublayers=function(a,b,c){a=t(b.layers,c);this._updateSublayersForOrigin(q.OriginId.PORTAL_ITEM,a);this._updateSublayersForOrigin(q.OriginId.WEB_MAP,a);this._updateSublayersForOrigin(q.OriginId.WEB_SCENE,a);return a};b.prototype.writeSublayers=
function(a,b,c,d){a=a.flatten(function(a){return(a=a.sublayers)&&a.toArray().reverse()}).toArray().reverse();var e=this.serviceSublayers.flatten(function(a){return(a=a.sublayers)&&a.toArray().reverse()}).toArray().reduce(function(a,b){a.set(b.id,b);return a},new Map),f=!1,g=!0;this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers?(f=u.isExportDynamic(a,this.serviceSublayers,this),g=!f&&u.sameStructureAsService(a,this.serviceSublayers)):
g=u.sameStructureAsService(a,this.serviceSublayers);b.layers=[];a.forEach(function(a){var c=e.get(a.id),c=n({writeAsDynamic:f,writeOverridesOnly:g,serviceSublayer:c},d);a=a.write({},c);(!g||g&&1<Object.keys(a).length)&&b.layers.push(a)});b.visibleLayers=a.filter(function(a){return a.visible}).map(function(a){return a.id})};b.prototype.findSublayerById=function(a){return this.allSublayers.find(function(b){return b.id===a})};b.prototype.createServiceSublayers=function(){return this.serviceSublayers.map(function(a){return a.clone()})};
b.prototype._updateSublayersForOrigin=function(a,b){var c=this.__accessor__.store;if(c.has("sublayers",a)){var d=c.get("sublayers",a).flatten(function(a){return a.sublayers});if(d.every(function(a){return!a.__accessor__.store._values.hasOwnProperty("minScale")})){var f=d.reduce(function(a,b){a.set(b.id,b);return a},new Map);b=b.map(function(a){return r(a.clone(),f)});c.set("sublayers",new (e.ofType(v))(b),a)}}};b.prototype._handleSublayersChange=function(a,b){var c=this;b&&(b.forEach(function(a){a.parent=
null;a.layer=null}),this._sublayersHandles.forEach(function(a){return a.remove()}),this._sublayersHandles=null);a&&(a.forEach(function(a){a.parent=c;a.layer=c}),this._sublayersHandles=[a.on("after-add",function(a){a=a.item;a.parent=c;a.layer=c}),a.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null})],"tile"===this.type&&this._sublayersHandles.push(a.on("before-changes",function(a){w.error(new p("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",
{layer:c}));a.preventDefault()})))};l([m.property({readOnly:!0})],b.prototype,"allSublayers",void 0);l([m.property({readOnly:!0,type:e.ofType(v)})],b.prototype,"serviceSublayers",void 0);l([m.reader("service","serviceSublayers",["layers"])],b.prototype,"readServiceSublayers",null);l([m.property({value:null,type:e.ofType(v),json:{type:[Number],write:{target:"subLayerIds",allowNull:!0}}})],b.prototype,"sublayers",void 0);l([m.reader(["web-map","web-scene","portal-item"],"sublayers",["layers","visibleLayers"])],
b.prototype,"readSublayersFromItemOrWebMap",null);l([m.reader("service","sublayers",["layers"])],b.prototype,"readSublayers",null);l([m.writer(["web-map","web-scene","portal-item"],"sublayers",{layers:{type:[v]},visibleLayers:{type:[k.Integer]}})],b.prototype,"writeSublayers",null);return b=l([m.subclass("esri.layers.mixins.SublayersOwner")],b)}(m.declared(g));d.default=h})},"esri/layers/support/Sublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper dojo/io-query ../../PopupTemplate ../../core/Collection ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/write ../FeatureLayer ./commonProperties ./LabelClass ./layerSourceUtils ../../renderers/support/jsonUtils ../../renderers/support/typeUtils ../../symbols/Symbol3D ../../tasks/QueryTask ../../tasks/support/Query".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A,x,C){var y=m.getLogger("esri.layers.support.Sublayer"),E=0;return function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a._sublayersHandles=null;return a}n(d,b);h=d;Object.defineProperty(d.prototype,"definitionExpression",{get:function(){return this._get("definitionExpression")},set:function(a){this._setAndNotifyLayer("definitionExpression",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"id",{get:function(){var a=
this._get("id");return null==a?E++:a},set:function(a){this._get("id")!==a&&(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id"):this._set("id",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"labelingInfo",{get:function(){return this._get("labelingInfo")},set:function(a){this._setAndNotifyLayer("labelingInfo",a)},enumerable:!0,configurable:!0});d.prototype.writeLabelingInfo=function(a,b,c,d){(!d||d.writeAsDynamic)&&a&&a.length&&(b.layerDefinition=
{drawingInfo:{labelingInfo:a.map(function(a){return a.write({},d)})}})};Object.defineProperty(d.prototype,"labelsVisible",{get:function(){return this._get("labelsVisible")},set:function(a){this._setAndNotifyLayer("labelsVisible",a)},enumerable:!0,configurable:!0});d.prototype.writeLabelsVisible=function(a,b,c,d){if(!d||d.writeAsDynamic)b.showLabels=a};Object.defineProperty(d.prototype,"layer",{set:function(a){this._set("layer",a);this.sublayers&&this.sublayers.forEach(function(b){return b.layer=a})},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"legendEnabled",{get:function(){return this._get("legendEnabled")},set:function(a){this._set("legendEnabled",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"minScale",{get:function(){return this._get("minScale")},set:function(a){this._setAndNotifyLayer("minScale",a)},enumerable:!0,configurable:!0});d.prototype.readMinScale=function(a,b){return b.minScale||b.layerDefinition&&b.layerDefinition.minScale||0};d.prototype.writeMinScale=
function(a,b,c,d){if(d&&d.writeOverridesOnly&&(c=d&&d.serviceSublayer)&&c.minScale===a&&c.maxScale===this.maxScale)return;b.minScale=a};Object.defineProperty(d.prototype,"maxScale",{get:function(){return this._get("maxScale")},set:function(a){this._setAndNotifyLayer("maxScale",a)},enumerable:!0,configurable:!0});d.prototype.readMaxScale=function(a,b){return b.maxScale||b.layerDefinition&&b.layerDefinition.maxScale||0};d.prototype.writeMaxScale=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(c=d&&d.serviceSublayer)&&
c.maxScale===a&&c.minScale===this.minScale)return;b.maxScale=a};Object.defineProperty(d.prototype,"opacity",{get:function(){return this._get("opacity")},set:function(a){this._setAndNotifyLayer("opacity",a)},enumerable:!0,configurable:!0});d.prototype.readOpacity=function(a,b){a=b.layerDefinition;return 1-.01*(null!=a.transparency?a.transparency:a.drawingInfo.transparency)};d.prototype.writeOpacity=function(a,b,c,d){if(!d||d.writeAsDynamic)b.layerDefinition={drawingInfo:{transparency:100-100*a}}};
d.prototype.writeParent=function(a,b,c,d){d&&d.writeOverridesOnly||(b.parentLayerId=this.parent&&this.parent!==this.layer?this.parent.id:-1)};Object.defineProperty(d.prototype,"popupEnabled",{get:function(){return this._get("popupEnabled")},set:function(a){this._set("popupEnabled",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"popupTemplate",{get:function(){return this._get("popupTemplate")},set:function(a){this._set("popupTemplate",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"renderer",{get:function(){return this._get("renderer")},set:function(a){if(a)for(var b=0,c=a.getSymbols();b<c.length;b++)if(c[b].isInstanceOf(A)){y.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",a)},enumerable:!0,configurable:!0});d.prototype.readRenderer=function(a,b,c){if(a=b.layerDefinition.drawingInfo.renderer||void 0)(a=z.read(a,b,c)||void 0)||y.error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,layer:this,context:c});return a};
d.prototype.writeRenderer=function(a,b,c,d){if(!d||d.writeAsDynamic)b.layerDefinition={drawingInfo:{renderer:a.toJSON()}}};Object.defineProperty(d.prototype,"source",{get:function(){return this._get("source")||{mapLayerId:this.id,type:w.MAPLAYER}},set:function(a){this._setAndNotifyLayer("source",a)},enumerable:!0,configurable:!0});d.prototype.writeSource=function(a,b,c,d){d&&!d.writeAsDynamic&&d.writeOverridesOnly||(b.layerDefinition={source:w.sourceToJSON(a)})};Object.defineProperty(d.prototype,
"sublayers",{set:function(a){this._handleSublayersChange(a,this._get("sublayers"));this._set("sublayers",a)},enumerable:!0,configurable:!0});d.prototype.castSublayers=function(a){return q.default(c.ofType(h),a)};d.prototype.writeSublayers=function(a,b,c,d){d&&d.writeOverridesOnly||(b[c]=this.get("sublayers.length")?this.sublayers.map(function(a){return a.id}).toArray().reverse():null)};Object.defineProperty(d.prototype,"title",{get:function(){return this._get("title")},set:function(a){this._set("title",
a)},enumerable:!0,configurable:!0});d.prototype.writeTitle=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(d=d&&d.serviceSublayer)&&d.title===a)return;b[c]=a};Object.defineProperty(d.prototype,"url",{get:function(){var a=this.layer,b=this.source;if(!a)return null;if(w.isMapLayerSource(b))return a.parsedUrl.path+"/"+b.mapLayerId;b={layer:JSON.stringify({source:w.sourceToJSON(this.source)})};return a.parsedUrl.path+"/dynamicLayer?"+g.objectToQuery(b)},set:function(a){a?this._override("url",a):this._clearOverride("url")},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{get:function(){return this._get("visible")},set:function(a){this._setAndNotifyLayer("visible",a)},enumerable:!0,configurable:!0});d.prototype.writeVisible=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(d=d&&d.serviceSublayer)&&d.visible===a)return;b[c]=a};d.prototype.clone=function(){var b=new h;this.hasOwnProperty("definitionExpression")&&(b.definitionExpression=this.definitionExpression);this.hasOwnProperty("id")&&(b.id=
this.id);this.hasOwnProperty("labelingInfo")&&(b.labelingInfo=a.clone(this.labelingInfo));this.hasOwnProperty("labelsVisible")&&(b.labelsVisible=this.labelsVisible);this.hasOwnProperty("legendEnabled")&&(b.legendEnabled=this.legendEnabled);this.hasOwnProperty("visible")&&(b.visible=this.visible);this.hasOwnProperty("layer")&&(b.layer=this.layer);this.hasOwnProperty("minScale")&&(b.minScale=this.minScale);this.hasOwnProperty("maxScale")&&(b.maxScale=this.maxScale);this.hasOwnProperty("opacity")&&(b.opacity=
this.opacity);this.hasOwnProperty("parent")&&(b.parent=this.parent);this.hasOwnProperty("popupEnabled")&&(b.popupEnabled=this.popupEnabled);this.hasOwnProperty("popupTemplate")&&(b.popupTemplate=this.popupTemplate?this.popupTemplate.clone():this.popupTemplate);this.hasOwnProperty("renderer")&&(b.renderer=this.renderer?this.renderer.clone():this.renderer);this.hasOwnProperty("source")&&(b.source=a.clone(this.source));this.hasOwnProperty("sublayers")&&(b.sublayers=this.sublayers?this.sublayers.clone():
this.sublayers);this.hasOwnProperty("title")&&(b.title=this.title);return b};d.prototype.createQuery=function(){return new C({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};d.prototype.createFeatureLayer=function(){if(this.hasOwnProperty("sublayers"))return null;var b=this.layer&&this.layer.parsedUrl,c=this.source,d=null;b&&(d=w.isMapLayerSource(c)?b.path+"/"+c.mapLayerId:b.path+"/dynamicLayer");b=new u({url:d});this.hasOwnProperty("definitionExpression")&&(b.definitionExpression=
this.definitionExpression);this.hasOwnProperty("labelingInfo")&&(b.labelingInfo=a.clone(this.labelingInfo));this.hasOwnProperty("labelsVisible")&&(b.labelsVisible=this.labelsVisible);this.hasOwnProperty("legendEnabled")&&(b.legendEnabled=this.legendEnabled);this.hasOwnProperty("visible")&&(b.visible=this.visible);this.hasOwnProperty("minScale")&&(b.minScale=this.minScale);this.hasOwnProperty("maxScale")&&(b.maxScale=this.maxScale);this.hasOwnProperty("opacity")&&(b.opacity=this.opacity);this.hasOwnProperty("popupTemplate")&&
(b.popupTemplate=this.popupTemplate?this.popupTemplate.clone():this.popupTemplate);this.hasOwnProperty("renderer")&&(b.renderer=this.renderer?this.renderer.clone():this.renderer);this.hasOwnProperty("source")&&w.isDataLayerSource(this.source)&&(b.dynamicDataSource=a.clone(this.source));this.hasOwnProperty("title")&&(b.title=this.title);return b};d.prototype.queryFeatures=function(a){var b=this;void 0===a&&(a=this.createQuery());return(new x({url:this.url})).execute(a).then(function(a){a&&a.features&&
a.features.forEach(function(a){a.sourceLayer=b});return a})};d.prototype.toExportImageJSON=function(){var a={id:this.id,source:w.sourceToJSON(this.source)};this.definitionExpression&&(a.definitionExpression=this.definitionExpression);if(this.renderer||this.labelingInfo||null!=this.opacity||null!=this.labelsVisible){var b=a.drawingInfo={};this.renderer&&(b.renderer=this.renderer.toJSON());null!=this.labelsVisible&&(b.showLabels=this.labelsVisible);!1!==this.labelsVisible&&this.labelingInfo&&(b.labelingInfo=
this.labelingInfo.map(function(a){return a.write({},{origin:"service"})}),b.showLabels=!0);null!=this.opacity&&(b.transparency=100-100*this.opacity)}return a};d.prototype._setAndNotifyLayer=function(a,b){var c=this.layer,d=this._get(a),e;switch(a){case "definitionExpression":e="supportsSublayerDefinitionExpression";case "minScale":case "maxScale":case "visible":e="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":e="supportsDynamicLayers"}e&&
!1===this.get("layer.capabilities.exportMap."+e)?this._logLockedError(a):(this._set(a,b),d!==b&&c&&c.emit&&c.emit("sublayer-update",{propertyName:a}))};d.prototype._handleSublayersChange=function(a,b){var c=this;b&&(b.forEach(function(a){a.parent=null;a.layer=null}),this._sublayersHandles.forEach(function(a){return a.remove()}),this._sublayersHandles=null);a&&(a.forEach(function(a){a.parent=c;a.layer=c.layer}),this._sublayersHandles=[a.on("after-add",function(a){a=a.item;a.parent=c;a.layer=c.layer}),
a.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null}),a.on("before-changes",function(a){var b=c.get("layer.capabilities.exportMap.supportsSublayersChanges");null==b||b||(y.error(new p("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:c})),a.preventDefault())})])};d.prototype._logLockedError=function(a){y.error(new p("sublayer:locked","Property '"+a+"' can't be changed on Sublayer from the layer '"+this.layer.id+"'",{sublayer:this,
layer:this.layer}))};var h;f([k.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],d.prototype,"definitionExpression",null);f([k.property({type:Number,json:{write:{ignoreOrigin:!0}}})],d.prototype,"id",null);f([k.property({value:null,type:[r],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],d.prototype,"labelingInfo",null);f([k.writer("labelingInfo")],
d.prototype,"writeLabelingInfo",null);f([k.property({type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}})],d.prototype,"labelsVisible",null);f([k.writer("labelsVisible")],d.prototype,"writeLabelsVisible",null);f([k.property({value:null})],d.prototype,"layer",null);f([k.property(t.legendEnabled)],d.prototype,"legendEnabled",null);f([k.property({type:Number,value:0,json:{write:{overridePolicy:function(a,b,c){if(v.willPropertyWrite(this,"maxScale",{},c))return{ignoreOrigin:!0}}}}})],
d.prototype,"minScale",null);f([k.reader("portal-item","minScale",["minScale","layerDefinition.minScale"])],d.prototype,"readMinScale",null);f([k.writer("minScale")],d.prototype,"writeMinScale",null);f([k.property({type:Number,value:0,json:{write:{overridePolicy:function(a,b,c){if(v.willPropertyWrite(this,"minScale",{},c))return{ignoreOrigin:!0}}}}})],d.prototype,"maxScale",null);f([k.reader("portal-item","maxScale",["maxScale","layerDefinition.maxScale"])],d.prototype,"readMaxScale",null);f([k.writer("maxScale")],
d.prototype,"writeMaxScale",null);f([k.property({type:Number,json:{write:{target:"layerDefinition.drawingInfo.transparency"}}})],d.prototype,"opacity",null);f([k.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],d.prototype,"readOpacity",null);f([k.writer("opacity")],d.prototype,"writeOpacity",null);f([k.property({json:{type:Number,write:{target:"parentLayerId",allowNull:!0}}})],d.prototype,"parent",void 0);f([k.writer("parent")],d.prototype,"writeParent",
null);f([k.property(t.popupEnabled)],d.prototype,"popupEnabled",null);f([k.property({value:null,type:e,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],d.prototype,"popupTemplate",null);f([k.property({types:B.types,value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],d.prototype,"renderer",null);f([k.reader("renderer",["layerDefinition.drawingInfo.renderer"])],d.prototype,"readRenderer",null);f([k.writer("renderer")],d.prototype,"writeRenderer",null);f([k.property({cast:w.castSource,
json:{read:{source:"layerDefinition.source",reader:w.sourceFromJSON},write:{target:"layerDefinition.source"}}})],d.prototype,"source",null);f([k.writer("source")],d.prototype,"writeSource",null);f([k.property({value:null,json:{type:[q.Integer],write:{target:"subLayerIds",allowNull:!0}}})],d.prototype,"sublayers",null);f([k.cast("sublayers")],d.prototype,"castSublayers",null);f([k.writer("sublayers")],d.prototype,"writeSublayers",null);f([k.property({type:String,value:null,json:{read:{source:"name"},
write:{target:"name",allowNull:!0,ignoreOrigin:!0}}})],d.prototype,"title",null);f([k.writer("title")],d.prototype,"writeTitle",null);f([k.property({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:function(){return{enabled:this._isOverridden("url")}}}}})],d.prototype,"url",null);f([k.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility"}}})],d.prototype,"visible",null);f([k.writer("visible")],
d.prototype,"writeVisible",null);f([l(0,k.cast(C))],d.prototype,"queryFeatures",null);return d=h=f([k.subclass("esri.layers.support.Sublayer")],d)}(k.declared(b))})},"esri/layers/FeatureLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../Graphic ../PopupTemplate ../renderers ../request ../symbols ../core/Collection ../core/Error ../core/Handles ../core/kebabDictionary ../core/lang ../core/Logger ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ../geometry/support/normalizeUtils ./Layer ./graphics/sources/MemorySource ./mixins/ArcGISService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/arcgisLayerUrl ./support/commonProperties ./support/FeatureIndex ./support/FeatureProcessing ./support/FeatureReduction ./support/FeatureReductionSelection ./support/FeatureTemplate ./support/FeatureType ./support/Field ./support/fieldUtils ./support/LabelClass ./support/labelingInfo ./support/layerSourceUtils ./support/Relationship ../renderers/support/jsonUtils ../renderers/support/styleUtils ../renderers/support/typeUtils ../symbols/support/jsonUtils ../tasks/support/AttachmentQuery ../tasks/support/FeatureSet ../tasks/support/Query ../tasks/support/RelationshipQuery".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A,x,C,y,E,D,F,L,P,M,I,ba,K,S,Q,J,R,H,W,aa,ia,V,Z,ga,da,ja,pa,sa,na,ya,qa,ta,ra){function Da(a){return a&&null!=a.applyEdits}function Aa(a){return a&&a.isInstanceOf&&a.isInstanceOf(m)}function fa(a,b,c){return!(a&&a.hasOwnProperty(b)?!a[b]:!c)}var wa=v({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),ua=t.getLogger("esri.layers.FeatureLayer");
return function(d){function r(a){a=d.call(this)||this;a._handles=new q;a.capabilities=null;a.copyright=null;a.displayField=null;a.definitionExpression=null;a.dynamicDataSource=null;a.editFieldsInfo=null;a.editingEnabled=!0;a.elevationInfo=null;a.featureReduction=null;a.fields=null;a.fullExtent=null;a.gdbVersion=null;a.geometryType=null;a.hasM=void 0;a.hasZ=void 0;a.heightModelInfo=null;a.historicMoment=null;a.isTable=!1;a.labelsVisible=!0;a.labelingInfo=null;a.layerId=void 0;a.legendEnabled=!0;a.maxRecordCount=
void 0;a.tileMaxRecordCount=void 0;a.minScale=0;a.maxScale=0;a.objectIdField=null;a.popupEnabled=!0;a.popupTemplate=null;a.relationships=null;a.returnM=void 0;a.returnZ=void 0;a.screenSizePerspectiveEnabled=!0;a.serviceDefinitionExpression=null;a.spatialReference=C.WGS84;a.templates=null;a.timeInfo=null;a.title=null;a.sublayerTitleMode="item-title";a.trackIdField=null;a.type="feature";a.typeIdField=null;a.types=null;a.indexes=new (m.ofType(S.FeatureIndex));a.userIsAdmin=!1;a.version=void 0;a.visible=
!0;return a}f(r,d);r.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};r.prototype.load=function(){var a=this;if(this.portalItem&&this.portalItem.loaded&&this.source)this.addResolvingPromise(this.createGraphicsSource().then(function(b){return a._initLayerProperties(b)}));else{var b=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]}).catch(function(a){return a}).then(function(){if(a.url&&null==a.layerId&&/FeatureServer|MapServer\/*$/i.test(a.url))return a._fetchFirstLayerId().then(function(b){null!=
b&&(a.layerId=b)})}).then(function(){if(!a.url&&!a._hasMemorySource())throw new k("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return a.createGraphicsSource().then(function(b){return a._initLayerProperties(b)})});this.addResolvingPromise(b);return this.when()}};Object.defineProperty(r.prototype,"allRenderers",{get:function(){return this._getAllRenderers(this.renderer)},enumerable:!0,configurable:!0});r.prototype.readCapabilities=function(a,b){b=
b.layerDefinition||b;return{data:this._readDataCapabilities(b),operations:this._readOperationsCapabilities(b.capabilities||a,b),query:this._readQueryCapabilities(b),queryRelated:this._readQueryRelatedCapabilities(b),editing:this._readEditingCapabilities(b)}};r.prototype.readEditingEnabled=function(a,b){return"Query"===b.capabilities?!1:!0};r.prototype.writeEditingEnabled=function(a,b,c,d){a||(b.capabilities="Query")};Object.defineProperty(r.prototype,"hasAttachments",{get:function(){ua.warn("FeatureLayer.hasAttachments is deprecated. Use FeatureLayer.capabilities.data.supportsAttachment instead.");
return this.hasService&&this._get("hasAttachments")||!1},enumerable:!0,configurable:!0});r.prototype.readIsTable=function(a,b){b=b&&b.layerDefinition||b;return"Table"===b.type};Object.defineProperty(r.prototype,"hasService",{get:function(){return!this._hasMemorySource()},enumerable:!0,configurable:!0});r.prototype.readMinScale=function(a,b){return b.effectiveMinScale||a||0};r.prototype.readMaxScale=function(a,b){return b.effectiveMaxScale||a||0};r.prototype.readObjectIdFieldFromService=function(a,
b){b=b.layerDefinition||b;if(b.objectIdField)return b.objectIdField;if(b.fields)for(a=0,b=b.fields;a<b.length;a++){var c=b[a];if("esriFieldTypeOID"===c.type)return c.name}};Object.defineProperty(r.prototype,"outFields",{get:function(){var a=this,b=this._userOutFields,c=this.requiredFields,b=b&&b.slice(0),c=c&&c.slice(0);b?-1===b.indexOf("*")&&c.forEach(function(a){-1===b.indexOf(a)&&b.push(a)}):b=c;-1!==b.indexOf("*")?b=["*"]:this.loaded&&(b=b.filter(function(b){var c=!!a.getField(b);b&&!c&&ua.error("[outFields] Invalid field: ",
b);return c},this),b=b.map(function(b){return a.getField(b).name},this),b=b.filter(function(a,b,c){return c.indexOf(a)===b}));return b},set:function(a){var b=this,c=this.requiredFields&&this.requiredFields.slice(0);a?-1===a.indexOf("*")&&c.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=c;this.loaded&&(a=a.filter(function(a){var c="*"===a||!!b.getField(a,b.fields);a&&!c&&ua.error("[outFields] Invalid field: ",a);return c},this),a=a.map(function(a){return"*"===a?a:b.getField(a,b.fields).name},
this));this._userOutFields=a},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"parsedUrl",{get:function(){var a=this.url?z.urlToObject(this.url):null;if(null!=a)if(null!=this.layerId)a.path=z.join(a.path,this.layerId.toString());else if(null!=this.dynamicDataSource){var b={source:ga.sourceToJSON(this.dynamicDataSource)};a.query={layer:JSON.stringify(b)}}return a},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"renderer",{set:function(a){var b=this._getAllRenderers(a);
ia.fixRendererFields(b,this.fields);this._set("renderer",a)},enumerable:!0,configurable:!0});r.prototype.readRenderer=function(b,c,d){c=c.layerDefinition||c;var e=c.drawingInfo&&c.drawingInfo.renderer||void 0,f,g;if(e)(f=ja.read(e,c,d)||void 0)||ua.error("Failed to create renderer",{rendererDefinition:c.drawingInfo.renderer,layer:this,context:d});else if(c.defaultSymbol)na.read(c.defaultSymbol,c,d),c.types&&c.types.length?(f=new p.UniqueValueRenderer({defaultSymbol:g,field:c.typeIdField}),c.types.forEach(function(a){e.addUniqueValueInfo(a.id,
na.read(a.symbol,a,d))})):f=new p.SimpleRenderer({symbol:g});else if("Table"!==c.type){switch(c.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":g=new a.SimpleMarkerSymbol;break;case "esriGeometryPolyline":g=new a.SimpleLineSymbol;break;case "esriGeometryPolygon":g=new a.SimpleFillSymbol}f=g&&new p.SimpleRenderer({symbol:g})}return f};r.prototype.writeRenderer=function(a,b,c,d){ja.writeTarget(a,b,c,d)};Object.defineProperty(r.prototype,"requiredFields",{get:function(){var a=this.timeInfo,
b=[],c=[],a=[this.objectIdField,this.typeIdField,this.editFieldsInfo&&this.editFieldsInfo.creatorField,this.editFieldsInfo&&this.editFieldsInfo.creationDateField,this.editFieldsInfo&&this.editFieldsInfo.editorField,this.editFieldsInfo&&this.editFieldsInfo.editDateField,a&&a.startTimeField,a&&a.endTimeField,this.trackIdField];this.allRenderers.forEach(function(a){b=b.concat(a.requiredFields)});this.labelingInfo&&this.labelingInfo.length&&this.labelingInfo.forEach(function(a){c=c.concat(a.requiredFields)});
var c=c.map(function(a){return a.replace(/['"]+/g,"")}),a=a.concat(b),a=a.concat(c),d=this.elevationInfo&&this.elevationInfo.featureExpressionInfo;d&&(a=a.concat(d.requiredFields));this.popupTemplate&&(a=a.concat(this.popupTemplate.requiredFields));return a.filter(function(a,b,c){return!!a&&c.indexOf(a)===b&&"function"!==typeof a})},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"source",{set:function(a){var b=this._get("source");b!==a&&(b&&Aa(b)&&this._resetMemorySource(b),a&&
Aa(a)&&this._initMemorySource(a),this._set("source",a))},enumerable:!0,configurable:!0});r.prototype.castSource=function(a){return a?Array.isArray(a)||Aa(a)?new D.default({layer:this,items:a}):a:null};r.prototype.readSource=function(a,b){a=qa.fromJSON(b.featureSet);return new D.default({layer:this,items:a&&a.features||[]})};r.prototype.readTemplates=function(a,b){var c=b.editFieldsInfo;b=c&&c.creatorField;c=c&&c.editorField;a=a&&a.map(function(a){return H.fromJSON(a)});this._fixTemplates(a,b);this._fixTemplates(a,
c);return a};r.prototype.readTitle=function(a,b){a=b.layerDefinition&&b.layerDefinition.name||b.name;b=b.title||b.layerDefinition&&b.layerDefinition.title;if(a){b=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?ba.titleFromUrlAndName(this.url,a):a;if(a=a||this.url&&ba.parse(this.url).title)return"item-title-and-service-name"===this.sublayerTitleMode&&b&&(a=b+" - "+a),ba.cleanTitle(a)}else if("item-title"===this.sublayerTitleMode&&b)return b};r.prototype.readTitleFromWebMap=
function(a,b){return b.title||b.layerDefinition&&b.layerDefinition.name};r.prototype.readTypeIdField=function(a,b){b=b.layerDefinition||b;if(a=b.typeIdField)if(b=this.getField(a,b.fields))a=b.name;return a};r.prototype.readTypes=function(a,b){var c=this;b=b.layerDefinition||b;a=b.types;var d=(b=b.editFieldsInfo)&&b.creatorField,e=b&&b.editorField;return a&&a.map(function(a){a=W.fromJSON(a);c._fixTemplates(a.templates,d);c._fixTemplates(a.templates,e);return a})};Object.defineProperty(r.prototype,
"url",{set:function(a){a=ba.sanitizeUrlWithLayerId(this,a,ua);this._set("url",a.url);null!=a.layerId&&this._set("layerId",a.layerId)},enumerable:!0,configurable:!0});r.prototype.writeUrl=function(a,b,c,d){ba.writeUrlWithLayerId(this,a,null,b,d)};r.prototype.readVersion=function(a,b){b=b.layerDefinition||b;return b.currentVersion?b.currentVersion:b.hasOwnProperty("capabilities")||b.hasOwnProperty("drawingInfo")||b.hasOwnProperty("hasAttachments")||b.hasOwnProperty("htmlPopupType")||b.hasOwnProperty("relationships")||
b.hasOwnProperty("timeInfo")||b.hasOwnProperty("typeIdField")||b.hasOwnProperty("types")?10:9.3};r.prototype.readVisible=function(a,b){if(b.layerDefinition&&null!=b.layerDefinition.defaultVisibility)return!!b.layerDefinition.defaultVisibility;if(null!=b.visibility)return!!b.visibility};r.prototype.addAttachment=function(a,b){var c=this;return this.load().then(function(){return c._checkAttachmentSupport(a)}).then(function(){return"addAttachment"in c.source?c.source.addAttachment(a,b):w.reject(new k("FeatureLayer",
"Layer source does not support addAttachment capability"))})};r.prototype.updateAttachment=function(a,b,c){var d=this;return this.load().then(function(){return d._checkAttachmentSupport(a)}).then(function(){return"updateAttachment"in d.source?d.source.updateAttachment(a,b,c):w.reject(new k("FeatureLayer","Layer source does not support updateAttachment capability"))})};r.prototype.applyEdits=function(a){var b=this,c,d,e={edits:a,result:w.create(function(a,b){c=a;d=b})};this.emit("apply-edits",e);return this.load().then(function(){return Da(b.source)?
b.editingEnabled?b._processApplyEditsParams(a):w.reject(new k("FeatureLayer","Editing is disabled for layer",{layer:b})):w.reject(new k("FeatureLayer","Layer source does not support applyEdits capability",{layer:b}))}).then(function(a){if(Da(b.source))return b.source.applyEdits(a).then(function(a){var d=function(a){return a.filter(function(a){return!a.error}).map(u.clone)},d={addedFeatures:d(a.addFeatureResults),updatedFeatures:d(a.updateFeatureResults),deletedFeatures:d(a.deleteFeatureResults)};
(d.addedFeatures.length||d.updatedFeatures.length||d.deletedFeatures.length)&&b.emit("edits",d);c(d);return a})}).catch(function(a){d(a);throw a;})};r.prototype.on=function(a,b){return this.inherited(arguments)};r.prototype.createGraphicsSource=function(){var a=this;return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),this.source.load()):w.create(function(a){return h(["./graphics/sources/FeatureLayerSource"],a)}).then(function(b){return(new b.default({layer:a})).load()}).then(function(b){a.emit("graphics-source-create",
{graphicsSource:b});return b})};r.prototype.createGraphicsController=function(a){var b=this,c=a.layerView,d=m.ofType(e),f=this.source,g=f&&Aa(f),k=n({},a.options,{layer:this,layerView:c,graphics:g?f:new d});return(g?w.create(function(a){return h(["./graphics/controllers/MemoryController"],a)}):"2d"===c.view.type?w.create(function(a){return h(["./graphics/controllers/AutoController2D"],a)}):w.create(function(a){return h(["./graphics/controllers/SnapshotController"],a)})).then(function(a){return new a(k)}).then(function(a){b.emit("graphics-controller-create",
{graphicsController:a});return a.when()})};r.prototype.createQuery=function(){var a=new ta,b=this.get("capabilities.data");a.gdbVersion=this.gdbVersion;a.historicMoment=this.historicMoment;a.returnGeometry=!0;b&&(b.supportsZ&&null!=this.returnZ&&(a.returnZ=this.returnZ),b.supportsM&&null!=this.returnM&&(a.returnM=this.returnM));a.outFields=this.outFields;a.where=this.definitionExpression||"1\x3d1";a.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null;return a};r.prototype.deleteAttachments=
function(a,b){var c=this;return this.load().then(function(){return c._checkAttachmentSupport(a)}).then(function(){return"deleteAttachments"in c.source?c.source.deleteAttachments(a,b):w.reject(new k("FeatureLayer","Layer source does not support deleteAttachments capability"))})};r.prototype.getFeatureType=function(a){var b=this.typeIdField;if(!b||!a)return null;var c=a.attributes?a.attributes[b]:void 0;if(null==c)return null;var d=null;this.types.some(function(a){var b=a.id;if(null==b)return!1;b.toString()===
c.toString()&&(d=a);return!!d});return d};r.prototype.getFieldDomain=function(a,b){var c=this,d,e=!1;b=(b=b&&b.feature)&&b.attributes;var f=this.typeIdField&&b&&b[this.typeIdField];null!=f&&this.types&&(e=this.types.some(function(b){return b.id==f?((d=b.domains&&b.domains[a])&&"inherited"===d.type&&(d=c._getLayerDomain(a)),!0):!1}));e||d||(d=this._getLayerDomain(a));return d};r.prototype.getField=function(a,b){var c=this.processing?this.fields.concat(this.processing.fields):this.fields;return ia.getField(a,
b||c)};r.prototype.graphicChanged=function(a){this.emit("graphic-update",a)};r.prototype.queryAttachments=function(a){var b=this;return this.load().then(function(){if(!b.get("capabilities.data.supportsAttachment"))return w.reject(new k("FeatureLayer","this layer doesn't support attachments"));var c=a.attachmentTypes,d=a.objectIds,e=a.globalIds,f=a.num,g=a.size,h=a.start,l=a.definitionExpression;return!b.get("capabilities.operations.supportsQueryAttachments")&&(c=c&&c.length,e=e&&e.length,g=g&&g.length,
d&&1<d.length||c||e||g||f||h||l)?w.reject(new k("FeatureLayer","when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",a)):d&&d.length||l?"queryAttachments"in b.source?b.source.queryAttachments(a):w.reject(new k("FeatureLayer","Layer source does not support queryAttachments capability",a)):w.reject(new k("FeatureLayer","objectIds or definitionExpression are required to perform attachment query",a))})};r.prototype.queryFeatures=function(a,b){var c=this;return this.load().then(function(){return c.source.queryFeatures(a||
c.createQuery(),b)}).then(function(a){if(a&&a.features)for(var b=0,d=a.features;b<d.length;b++){var e=d[b];e.layer=e.sourceLayer=c}return a})};r.prototype.queryObjectIds=function(a,b){var c=this;return this.load().then(function(){return c.source.queryObjectIds?c.source.queryObjectIds(a||c.createQuery(),b):w.reject(new k("FeatureLayer","Layer source does not support queryObjectIds capability"))})};r.prototype.queryFeatureCount=function(a,b){var c=this;return this.load().then(function(){return c.source.queryFeatureCount?
c.source.queryFeatureCount(a||c.createQuery(),b):w.reject(new k("FeatureLayer","Layer source does not support queryFeatureCount capability"))})};r.prototype.queryExtent=function(a,b){var c=this;return this.load().then(function(){return c.source.queryExtent?c.source.queryExtent(a||c.createQuery(),b):w.reject(new k("FeatureLayer","Layer source does not support queryExtent capability"))})};r.prototype.queryRelatedFeatures=function(a){var b=this;return this.load().then(function(){return"queryRelatedFeatures"in
b.source?b.source.queryRelatedFeatures(a):w.reject(new k("FeatureLayer","Layer source does not support queryRelatedFeatures capability"))})};r.prototype.read=function(a,b){var c=a.featureCollection;if(c){var d=c.layers;d&&1===d.length&&(this.inherited(arguments,[d[0],b]),null!=c.showLegend&&this.inherited(arguments,[{showLegend:c.showLegend},b]))}this.inherited(arguments,[a,b]);b&&"service"===b.origin&&this.revert(["objectIdField","fields"],"service");return this};r.prototype.write=function(a,b){return b&&
"web-scene"===b.origin&&b.messages&&this.isTable?(b.messages.push(new k("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes",{layer:this})),null):this.inherited(arguments)};r.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return w.create(function(a){return h(["../views/2d/layers/FeatureLayerView2D"],a)});case "3d":return w.create(function(a){return h(["../views/3d/layers/FeatureLayerView3D"],
a)})}};r.prototype._checkAttachmentSupport=function(a){var b=a.attributes,c=this.objectIdField;if(!this.get("capabilities.data.supportsAttachment"))return w.reject(new k("FeatureLayer","this layer doesn't support attachments"));if(!a)return w.reject(new k("FeatureLayer","A feature is required to add/delete/update attachments"));if(!b)return w.reject(new k("FeatureLayer","'attributes' are required on a feature to query attachments"));if(!b[c])return w.reject(new k("FeatureLayer","feature is missing the identifying attribute "+
c))};r.prototype._getLayerDomain=function(a){if(!this.fields)return null;var b=null;this.fields.some(function(c){c.name===a&&(b=c.domain);return!!b});return b};r.prototype._fetchFirstLayerId=function(){return b(this.url,{query:{f:"json"},responseType:"json"}).then(function(a){if((a=a.data)&&Array.isArray(a.layers)&&0<a.layers.length)return a.layers[0].id})};r.prototype._initLayerProperties=function(a){this._set("source",a);a.layerDefinition&&this.read(a.layerDefinition,{origin:"service",url:this.parsedUrl});
this._verifySource();this._verifyFields();ia.fixRendererFields(this._getAllRenderers(this.renderer),this.fields);return pa.loadStyleRenderer(this,{origin:"service"})};r.prototype._getAllRenderers=function(a){if(!a)return[];var b=[];[a,a.trackRenderer,a.observationRenderer,a.latestObservationRenderer].forEach(function(a){a&&(b.push(a),a.rendererInfos&&a.rendererInfos.forEach(function(a){a.renderer&&b.push(a.renderer)}))});return b};r.prototype._verifyFields=function(){var a=this.parsedUrl&&this.parsedUrl.path||
"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+a+")");this.isTable||this._hasMemorySource()||-1!==a.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(a){return"geometry"===a.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+a+")")};r.prototype._fixTemplates=function(a,b){a&&a.forEach(function(a){(a=
a.prototype&&a.prototype.attributes)&&b&&delete a[b]})};r.prototype._verifySource=function(){if(this._hasMemorySource()){if(this.url)throw new k("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url");}else{if(this.isTable)throw new k("feature-layer:source-type-not-supported","The table feature service type is not yet supported",{sourceType:"Table"});if(!this.url)throw new k("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source");
}};r.prototype._initMemorySource=function(a){var b=this;a.forEach(function(a){a.layer=b;a.sourceLayer=b});this._handles.add([a.on("after-add",function(a){a.item.layer=b;a.item.sourceLayer=b}),a.on("after-remove",function(a){a.item.layer=null;a.item.sourceLayer=null})],"fl-source")};r.prototype._resetMemorySource=function(a){a.forEach(function(a){a.layer=null;a.sourceLayer=null});this._handles.remove("fl-source")};r.prototype._hasMemorySource=function(){return!(this.url||!this.source)};r.prototype._readDataCapabilities=
function(a){return{supportsAttachment:fa(a,"hasAttachments",!1),supportsM:fa(a,"hasM",!1),supportsZ:fa(a,"hasZ",!1)}};r.prototype._readOperationsCapabilities=function(a,b){a=a?a.toLowerCase().split(",").map(function(a){return a.trim()}):[];var c=-1!==a.indexOf("editing"),d=c&&-1!==a.indexOf("create"),e=c&&-1!==a.indexOf("delete"),f=c&&-1!==a.indexOf("update");!c||d||e||f||(d=e=f=!0);return{supportsCalculate:fa(b,"supportsCalculate",!1),supportsTruncate:fa(b,"supportsTruncate",!1),supportsValidateSql:fa(b,
"supportsValidateSql",!1),supportsAdd:d,supportsDelete:e,supportsEditing:c,supportsQuery:-1!==a.indexOf("query"),supportsQueryAttachments:fa(b.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:fa(b,"supportsAttachmentsResizing",!1),supportsUpdate:f,supportsExceedsLimitStatistics:fa(b,"supportsExceedsLimitStatistics",!1)}};r.prototype._readQueryCapabilities=function(a){var b=a.advancedQueryCapabilities,c=a.ownershipBasedAccessControlForFeatures,d=a.archivingInfo,e=
(a.supportedQueryFormats||"").split(",").reduce(function(a,b){(b=b.toLowerCase().trim())&&a.add(b);return a},new Set);return{supportsStatistics:fa(b,"supportsStatistics",a.supportsStatistics),supportsCentroid:fa(b,"supportsReturningGeometryCentroid",!1),supportsDistance:fa(b,"supportsQueryWithDistance",!1),supportsDistinct:fa(b,"supportsDistinct",a.supportsAdvancedQueries),supportsExtent:fa(b,"supportsReturningQueryExtent",!1),supportsGeometryProperties:fa(b,"supportsReturningGeometryProperties",
!1),supportsHavingClause:fa(b,"supportsHavingClause",!1),supportsOrderBy:fa(b,"supportsOrderBy",a.supportsAdvancedQueries),supportsPagination:fa(b,"supportsPagination",!1),supportsQuantization:fa(a,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:fa(a,"supportsQuantizationEditMode",!1),supportsResultType:fa(b,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:fa(b,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:fa(b,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:fa(a,
"useStandardizedQueries",!1),supportsQueryByOthers:fa(c,"allowOthersToQuery",!0),supportsHistoricMoment:fa(d,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:e.has("pbf")}};r.prototype._readQueryRelatedCapabilities=function(a){a=a.advancedQueryCapabilities;var b=fa(a,"supportsAdvancedQueryRelated",!1);return{supportsPagination:fa(a,"supportsQueryRelatedPagination",!1),supportsCount:b,supportsOrderBy:b}};r.prototype._readEditingCapabilities=function(a){var b=a.ownershipBasedAccessControlForFeatures;
return{supportsGeometryUpdate:fa(a,"allowGeometryUpdates",!0),supportsGlobalId:fa(a,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:fa(a,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:fa(a,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:fa(a,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:fa(b,"allowAnonymousToDelete",!0),supportsDeleteByOthers:fa(b,"allowOthersToDelete",!0),supportsUpdateByAnonymous:fa(b,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:fa(b,
"allowOthersToUpdate",!0)}};r.prototype._processApplyEditsParams=function(a){if(!a)return w.reject(new k("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"));a=n({},a);a.addFeatures=a.addFeatures||[];a.updateFeatures=a.updateFeatures||[];a.deleteFeatures=a.deleteFeatures||[];if(a.addFeatures.length||a.updateFeatures.length||a.deleteFeatures.length){var b=function(a){var b=new e;a.attributes||(a.attributes={});b.geometry=a.geometry;b.attributes=
a.attributes;return b};a.addFeatures=a.addFeatures.map(b);a.updateFeatures=a.updateFeatures.map(b);return this._normalizeGeometries(a)}return w.reject(new k("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"))};r.prototype._normalizeGeometries=function(a){var b=a.addFeatures,c=a.updateFeatures,d=b.concat(c).map(function(a){return a.geometry});return y.normalizeCentralMeridian(d).then(function(d){var e=b.length,f=c.length;d.slice(0,e).forEach(function(b,
c){a.addFeatures[c].geometry=b});d.slice(e,e+f).forEach(function(b,c){a.updateFeatures[c].geometry=b});return a})};l([B.property({readOnly:!0,dependsOn:["loaded","renderer","fields"]})],r.prototype,"allRenderers",null);l([B.property({readOnly:!0,json:{read:!1}})],r.prototype,"capabilities",void 0);l([B.reader("service","capabilities","advancedQueryCapabilities archivingInfo supportsStatistics supportsAdvancedQueries hasAttachments hasM hasZ supportsAttachmentsResizing supportsCalculate supportsTruncate supportsValidateSql supportsCoordinatesQuantization supportsQuantizationEditMode useStandardizedQueries ownershipBasedAccessControlForFeatures allowGeometryUpdates supportsApplyEditsWithGlobalIds supportsRollbackOnFailureParameter allowUpdateWithoutMValues supportsAttachmentsByUploadId capabilities supportedQueryFormats supportsExceedsLimitStatistics".split(" "))],
r.prototype,"readCapabilities",null);l([B.property({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],r.prototype,"copyright",void 0);l([B.property({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],r.prototype,"displayField",void 0);l([B.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],
r.prototype,"definitionExpression",void 0);l([B.property({readOnly:!0,json:{read:na.read}})],r.prototype,"defaultSymbol",void 0);l([B.property()],r.prototype,"dynamicDataSource",void 0);l([B.property({readOnly:!0})],r.prototype,"editFieldsInfo",void 0);l([B.property({type:Boolean})],r.prototype,"editingEnabled",void 0);l([B.reader(["portal-item","web-map","web-scene"],"editingEnabled",["capabilities"])],r.prototype,"readEditingEnabled",null);l([B.writer(["portal-item","web-map","web-scene"],"editingEnabled")],
r.prototype,"writeEditingEnabled",null);l([B.property(K.elevationInfo)],r.prototype,"elevationInfo",void 0);l([B.property({types:{key:"type",base:J.default,typeMap:{selection:R.default}},json:{origins:{"web-scene":{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}})],r.prototype,"featureReduction",void 0);l([B.property({type:[aa],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}})],r.prototype,"fields",void 0);l([B.property({type:A,
json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],r.prototype,"fullExtent",void 0);l([B.property()],r.prototype,"gdbVersion",void 0);l([B.property({type:"point polygon polyline multipoint multipatch mesh".split(" "),json:{origins:{service:{read:wa.read}},read:{source:"layerDefinition.geometryType",reader:wa.read}}})],r.prototype,"geometryType",void 0);l([B.property({readOnly:!0,dependsOn:["loaded"],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasAttachments"}}})],
r.prototype,"hasAttachments",null);l([B.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],r.prototype,"hasM",void 0);l([B.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],r.prototype,"hasZ",void 0);l([B.property({readOnly:!0,type:x})],r.prototype,"heightModelInfo",void 0);l([B.property({type:Date})],r.prototype,"historicMoment",void 0);l([B.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],
r.prototype,"id",void 0);l([B.property({readOnly:!0})],r.prototype,"isTable",void 0);l([B.reader("service","isTable",["type"]),B.reader("isTable",["layerDefinition.type"])],r.prototype,"readIsTable",null);l([B.property({dependsOn:["loaded","url","source"],readOnly:!0})],r.prototype,"hasService",null);l([B.property(K.labelsVisible)],r.prototype,"labelsVisible",void 0);l([B.property({type:[V],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Z.reader},write:{target:"drawingInfo.labelingInfo",
enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Z.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],r.prototype,"labelingInfo",void 0);l([B.property({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],r.prototype,"layerId",void 0);l([B.property(K.legendEnabled)],r.prototype,"legendEnabled",void 0);l([B.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.maxRecordCount"}}})],r.prototype,"maxRecordCount",
void 0);l([B.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.tileMaxRecordCount"}}})],r.prototype,"tileMaxRecordCount",void 0);l([B.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],r.prototype,"minScale",void 0);l([B.reader("service","minScale",["minScale","effectiveMinScale"])],r.prototype,"readMinScale",null);l([B.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},
read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],r.prototype,"maxScale",void 0);l([B.reader("service","maxScale",["maxScale","effectiveMaxScale"])],r.prototype,"readMaxScale",null);l([B.property({type:String})],r.prototype,"objectIdField",void 0);l([B.reader("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),B.reader("service","objectIdField",["objectIdField","fields"])],r.prototype,"readObjectIdFieldFromService",null);l([B.property({value:"ArcGISFeatureLayer",
type:["ArcGISFeatureLayer"]})],r.prototype,"operationalLayerType",void 0);l([B.property({dependsOn:["requiredFields"]})],r.prototype,"outFields",null);l([B.property({readOnly:!0,dependsOn:["layerId"]})],r.prototype,"parsedUrl",null);l([B.property(K.popupEnabled)],r.prototype,"popupEnabled",void 0);l([B.property({type:c,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],r.prototype,"popupTemplate",void 0);l([B.property({type:Q})],r.prototype,"processing",void 0);l([B.property({type:[da],
readOnly:!0})],r.prototype,"relationships",void 0);l([B.property({types:sa.types,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],r.prototype,"renderer",null);l([B.reader("service","renderer",["drawingInfo.renderer","defaultSymbol","type"]),B.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"])],r.prototype,"readRenderer",null);l([B.writer("renderer")],
r.prototype,"writeRenderer",null);l([B.property({readOnly:!0,dependsOn:["allRenderers","labelingInfo","elevationInfo.featureExpressionInfo","popupTemplate.requiredFields"]})],r.prototype,"requiredFields",null);l([B.property()],r.prototype,"resourceInfo",void 0);l([B.property({type:Boolean})],r.prototype,"returnM",void 0);l([B.property({type:Boolean})],r.prototype,"returnZ",void 0);l([B.property(K.screenSizePerspectiveEnabled)],r.prototype,"screenSizePerspectiveEnabled",void 0);l([B.property()],r.prototype,
"source",null);l([B.cast("source")],r.prototype,"castSource",null);l([B.reader("portal-item","source",["featureSet"]),B.reader("web-map","source",["featureSet"])],r.prototype,"readSource",null);l([B.property({readOnly:!0,json:{origins:{service:{read:{source:"definitionExpression"}}}}})],r.prototype,"serviceDefinitionExpression",void 0);l([B.property({type:C,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],r.prototype,"spatialReference",
void 0);l([B.property({type:[H]})],r.prototype,"templates",void 0);l([B.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],r.prototype,"readTemplates",null);l([B.property()],r.prototype,"timeInfo",void 0);l([B.property()],r.prototype,"title",void 0);l([B.reader("service","title",["name"]),B.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],r.prototype,"readTitle",null);l([B.reader("web-map","title",["layerDefinition.name","title"])],
r.prototype,"readTitleFromWebMap",null);l([B.property({type:String})],r.prototype,"sublayerTitleMode",void 0);l([B.property({type:String,readOnly:!0,json:{read:{source:"timeInfo.trackIdField"}}})],r.prototype,"trackIdField",void 0);l([B.property({json:{read:!1}})],r.prototype,"type",void 0);l([B.property({type:String,readOnly:!0})],r.prototype,"typeIdField",void 0);l([B.reader("service","typeIdField"),B.reader("typeIdField",["layerDefinition.typeIdField"])],r.prototype,"readTypeIdField",null);l([B.property({type:[W]})],
r.prototype,"types",void 0);l([B.reader("service","types",["types"]),B.reader("types",["layerDefinition.types"])],r.prototype,"readTypes",null);l([B.property({type:m.ofType(S.FeatureIndex),readOnly:!0})],r.prototype,"indexes",void 0);l([B.property(K.url)],r.prototype,"url",null);l([B.writer("url")],r.prototype,"writeUrl",null);l([B.property({readOnly:!0})],r.prototype,"userIsAdmin",void 0);l([B.property({json:{origins:{"portal-item":{read:!1}}}})],r.prototype,"version",void 0);l([B.reader("service",
"version","currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" ")),B.reader("version","layerDefinition.currentVersion layerDefinition.capabilities layerDefinition.drawingInfo layerDefinition.hasAttachments layerDefinition.htmlPopupType layerDefinition.typeIdField layerDefinition.types".split(" "))],r.prototype,"readVersion",null);l([B.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],
r.prototype,"visible",void 0);l([B.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],r.prototype,"readVisible",null);l([g(0,B.cast(ya))],r.prototype,"queryAttachments",null);l([g(0,B.cast(ta))],r.prototype,"queryFeatures",null);l([g(0,B.cast(ta))],r.prototype,"queryObjectIds",null);l([g(0,B.cast(ta))],r.prototype,"queryFeatureCount",null);l([g(0,B.cast(ta))],r.prototype,"queryExtent",null);l([g(0,B.cast(ra))],r.prototype,"queryRelatedFeatures",null);return r=l([B.subclass("esri.layers.FeatureLayer")],
r)}(B.declared(E,L,P,I,M,F,r))})},"esri/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),function(h,d,n,f,l,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});d.ClassBreaksRenderer=n;d.HeatmapRenderer=f;d.BaseRenderer=l;d.SimpleRenderer=g;d.UniqueValueRenderer=e;d.isRenderer=function(c){return c instanceof d.BaseRenderer};
d.fromJSON=c.fromJSON})},"esri/renderers/ClassBreaksRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/kebabDictionary ../core/lang ../core/Logger ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./Renderer ./mixins/VisualVariablesRenderer ./support/ClassBreakInfo ./support/LegendOptions ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r){var w=p.getLogger("esri.renderers.ClassBreaksRenderer"),z=e({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),B=a.ensureType(q.ClassBreakInfo);return function(d){function e(a){a=d.call(this)||this;a.backgroundFillSymbol=null;a.classBreakInfos=null;a.defaultLabel=null;a.defaultSymbol=null;a.field=null;a.isMaxInclusive=!0;a.legendOptions=null;a.normalizationField=null;a.normalizationTotal=null;a.type=
"class-breaks";a.valueExpression=null;a.valueExpressionTitle=null;a._set("classBreakInfos",[]);return a}n(e,d);h=e;e.prototype.readClassBreakInfos=function(a,b,c){if(Array.isArray(a)){var d=b.minValue;return a.map(function(a){var b=new q.ClassBreakInfo;b.read(a,c);null==b.minValue&&(b.minValue=d);null==b.maxValue&&(b.maxValue=b.minValue);d=b.maxValue;return b})}};e.prototype.writeClassBreakInfos=function(a,b,c,d){a=a.map(function(a){return a.write({},d)});this._areClassBreaksConsecutive()&&a.forEach(function(a){return delete a.classMinValue});
b[c]=a};Object.defineProperty(e.prototype,"compiledFunc",{get:function(){return u.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});e.prototype.readDefaultSymbol=function(a,b,c){return t.read(a,b,c)};e.prototype.writeDefaultSymbolWebScene=function(a,b,c,d){t.writeTarget(a,b,c,d)};e.prototype.writeDefaultSymbol=function(a,b,c,d){t.writeTarget(a,b,c,d)};e.prototype.castField=function(b){return null==b?b:"function"===typeof b?(w.error(".field: field must be a string value"),null):
a.ensureString(b)};Object.defineProperty(e.prototype,"minValue",{get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"normalizationType",{get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total"||null,b&&c&&w.warn("warning: both normalizationField and normalizationTotal are set!");
else if("field"===a||"percent-of-total"===a)a=null;return a},set:function(a){this._set("normalizationType",a)},enumerable:!0,configurable:!0});e.prototype.addClassBreakInfo=function(a,b,d){var e=null,e="number"===typeof a?new q.ClassBreakInfo({minValue:a,maxValue:b,symbol:d}):B(c.clone(a));this.classBreakInfos.push(e);1===this.classBreakInfos.length&&this.notifyChange("minValue")};e.prototype.removeClassBreakInfo=function(a,b){for(var c=this.classBreakInfos.length,d=0;d<c;d++){var e=[this.classBreakInfos[d].minValue,
this.classBreakInfos[d].maxValue];if(e[0]===a&&e[1]===b){this.classBreakInfos.splice(d,1);break}}};e.prototype.getBreakIndex=function(a,b){var c=this.field,d=a.attributes,e=this.isMaxInclusive,f=null;if(this.valueExpression)f=u.executeFunction(this.compiledFunc,u.createExecContext(a,u.getViewInfo(b)));else if(f=parseFloat(d[c]),a=this.normalizationType)if(b=this.normalizationTotal,d=parseFloat(d[this.normalizationField]),"log"===a)f=Math.log(f)*Math.LOG10E;else if("percent-of-total"===a&&!isNaN(b))f=
f/b*100;else if("field"===a&&!isNaN(d)){if(isNaN(f)||isNaN(d))return-1;f/=d}if(null!=f&&"number"===typeof f&&!isNaN(f))for(d=0;d<this.classBreakInfos.length;d++)if(a=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],a[0]<=f&&(e?f<=a[1]:f<a[1]))return d;return-1};e.prototype.getClassBreakInfo=function(a,b){a=this.getBreakIndex(a,b);return-1!==a?this.classBreakInfos[a]:null};e.prototype.getSymbol=function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol};
e.prototype.getSymbols=function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a};e.prototype.clone=function(){return new h({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:c.clone(this.classBreakInfos),
isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:c.clone(this.visualVariables),legendOptions:c.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};e.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&"string"===typeof b&&(a[b]=!0)});this.valueExpression&&
u.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})};e.prototype._areClassBreaksConsecutive=function(){for(var a=this.classBreakInfos,b=a.length,c=1;c<b;c++)if(a[c-1].maxValue!==a[c].minValue)return!1;return!0};var h;f([b.property({types:{base:g.BaseSymbol,key:"type",typeMap:{"simple-fill":r.rendererTypes.typeMap["simple-fill"],"picture-fill":r.rendererTypes.typeMap["picture-fill"],"polygon-3d":r.rendererTypes.typeMap["polygon-3d"]}},json:{origins:{"web-scene":{read:t.read,write:{target:{backgroundFillSymbol:{type:g.PolygonSymbol3D}},
writer:t.writeTarget}}},read:t.read,write:t.writeTarget}})],e.prototype,"backgroundFillSymbol",void 0);f([b.property({type:[q.ClassBreakInfo]})],e.prototype,"classBreakInfos",void 0);f([b.reader("classBreakInfos")],e.prototype,"readClassBreakInfos",null);f([b.writer("classBreakInfos")],e.prototype,"writeClassBreakInfos",null);f([b.property({dependsOn:["valueExpression"]})],e.prototype,"compiledFunc",null);f([b.property({type:String,json:{write:!0}})],e.prototype,"defaultLabel",void 0);f([b.property({types:r.rendererTypes})],
e.prototype,"defaultSymbol",void 0);f([b.reader("defaultSymbol")],e.prototype,"readDefaultSymbol",null);f([b.writer("web-scene","defaultSymbol",{defaultSymbol:{types:r.rendererTypes3D}})],e.prototype,"writeDefaultSymbolWebScene",null);f([b.writer("defaultSymbol")],e.prototype,"writeDefaultSymbol",null);f([b.property({type:String,json:{write:!0}})],e.prototype,"field",void 0);f([b.cast("field")],e.prototype,"castField",null);f([b.property({type:Boolean})],e.prototype,"isMaxInclusive",void 0);f([b.property({type:v.default,
json:{write:!0}})],e.prototype,"legendOptions",void 0);f([b.property({type:Number,readOnly:!0,value:null,dependsOn:["classBreakInfos"],json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],e.prototype,"minValue",null);f([b.property({type:String,json:{write:!0}})],e.prototype,"normalizationField",void 0);f([b.property({type:Number,cast:function(b){return a.ensureNumber(b)},json:{write:!0}})],e.prototype,
"normalizationTotal",void 0);f([b.property({type:z.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],json:{type:z.jsonValues,read:z.read,write:z.write}})],e.prototype,"normalizationType",null);f([b.property({dependsOn:["field","normalizationField","valueExpression"],readOnly:!0})],e.prototype,"requiredFields",void 0);f([b.enumeration.serializable()({classBreaks:"class-breaks"})],e.prototype,"type",void 0);f([b.property({type:String,json:{write:!0}})],e.prototype,"valueExpression",
void 0);f([b.property({type:String,json:{write:!0}})],e.prototype,"valueExpressionTitle",void 0);f([l(2,b.cast(r.ensureType))],e.prototype,"addClassBreakInfo",null);return e=h=f([b.subclass("esri.renderers.ClassBreaksRenderer")],e)}(b.declared(m,k))})},"esri/renderers/Renderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/AuthoringInfo".split(" "),
function(h,d,n,f,l,g,e,c){var p=g({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap"},{ignoreUnknown:!0});return function(b){function a(a){a=b.call(this,a)||this;a.authoringInfo=null;a.type=null;return a}n(a,b);a.prototype.getSymbol=function(a,b){};a.prototype.getSymbols=function(){return[]};f([e.property({type:c,json:{write:!0}})],a.prototype,"authoringInfo",void 0);f([e.property({type:p.apiValues,readOnly:!0,json:{type:p.jsonValues,read:!1,write:{writer:p.write,
ignoreOrigin:!0}}})],a.prototype,"type",void 0);return a=f([e.subclass("esri.renderers.Renderer")],a)}(e.declared(l))})},"esri/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./AuthoringInfoVisualVariable".split(" "),function(h,d,n,f,l,g,e,c,p,b){var a=g({esriClassifyDefinedInterval:"defined-interval",
esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),m=g({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance"}),k="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");return function(d){function g(a){a=
d.call(this)||this;a.lengthUnit=null;a.visualVariables=null;return a}n(g,d);h=g;Object.defineProperty(g.prototype,"classificationMethod",{get:function(){var a=this._get("classificationMethod"),b=this.type;return b&&"relationship"!==b?"class-breaks-size"===b||"class-breaks-color"===b?a||"manual":null:a},set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"fields",{get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},
set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"field1",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(a){this._set("field1",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"field2",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(a){this._set("field2",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"focus",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(a){this._set("focus",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"numClasses",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(a){this._set("numClasses",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"standardDeviationInterval",{get:function(){var a=this.type;return a&&"relationship"!==a&&
"class-breaks-size"!==a&&"class-breaks-color"!==a?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(a){this._set("standardDeviationInterval",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",b)},enumerable:!0,configurable:!0});
g.prototype.clone=function(){return new h({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:e.clone(this.field1),field2:e.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(a){return a.clone()})})};var h;f([c.property({type:a.apiValues,value:null,dependsOn:["type"],json:{type:a.jsonValues,
read:a.read,write:a.write,origins:{"web-document":{default:"manual",type:a.jsonValues,read:a.read,write:a.write}}}})],g.prototype,"classificationMethod",null);f([c.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],g.prototype,"fields",null);f([c.property({value:null,dependsOn:["type"],json:{write:!0}})],g.prototype,"field1",null);f([c.property({value:null,dependsOn:["type"],json:{write:!0}})],g.prototype,"field2",null);f([c.property({type:["HH","HL","LH","LL"],value:null,dependsOn:["type"],
json:{write:!0}})],g.prototype,"focus",null);f([c.property({type:Number,value:null,dependsOn:["type"],json:{type:p.Integer,write:!0}})],g.prototype,"numClasses",null);f([c.property({type:k,json:{type:k,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],g.prototype,"lengthUnit",void 0);f([c.property({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],g.prototype,"standardDeviationInterval",null);f([c.property({type:String,value:null,
json:{type:m.jsonValues,read:m.read,write:m.write}})],g.prototype,"type",null);f([c.property({type:[b],json:{write:!0}})],g.prototype,"visualVariables",void 0);return g=h=f([c.subclass("esri.renderers.support.AuthoringInfo")],g)}(c.declared(l))})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),
function(h,d,n,f,l,g,e,c){var p=g({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),b=g({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),a={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null},m=["high-to-low","above-and-below","centered-on","extremes"],k="seconds minutes hours days months years".split(" ");return function(d){function g(a){a=d.call(this)||this;a.endTime=null;a.field=null;
a.maxSliderValue=null;a.minSliderValue=null;a.startTime=null;a.type=null;a.units=null;return a}n(g,d);h=g;g.prototype.castEndTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};g.prototype.castStartTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};Object.defineProperty(g.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});g.prototype.clone=function(){return new h({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};var h;f([e.property({types:a,json:{write:!0}})],g.prototype,"endTime",void 0);f([c.cast("endTime")],
g.prototype,"castEndTime",null);f([e.property({type:String,json:{write:!0}})],g.prototype,"field",void 0);f([e.property({type:Number,json:{write:!0}})],g.prototype,"maxSliderValue",void 0);f([e.property({type:Number,json:{write:!0}})],g.prototype,"minSliderValue",void 0);f([e.property({types:a,json:{write:!0}})],g.prototype,"startTime",void 0);f([c.cast("startTime")],g.prototype,"castStartTime",null);f([e.property({type:p.apiValues,value:null,dependsOn:["type"],json:{type:p.jsonValues,read:p.read,
write:p.write}})],g.prototype,"style",null);f([e.property({type:m,value:null,dependsOn:["type"],json:{type:m,write:!0}})],g.prototype,"theme",null);f([e.property({type:b.apiValues,json:{type:b.jsonValues,read:b.read,write:b.write}})],g.prototype,"type",void 0);f([e.property({type:k,json:{type:k,write:!0}})],g.prototype,"units",void 0);return g=h=f([e.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],g)}(e.declared(l))})},"esri/renderers/mixins/VisualVariablesRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory ../../support/arcadeUtils ../../symbols/support/utils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q){function v(a){return a&&"opacity"in a?a.opacity*v(a.parent):1}var u={base:a,key:"type",typeMap:{opacity:c,color:e,rotation:p,size:b}};return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._vvFactory=new m;return b}n(b,a);Object.defineProperty(b.prototype,"requiredFields",{get:function(){var a=Object.create(null);this.collectRequiredFields(a);return Object.keys(a).sort()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"visualVariables",{set:function(a){this._vvFactory.visualVariables=a;this._set("visualVariables",this._vvFactory.visualVariables)},enumerable:!0,configurable:!0});b.prototype.readVisualVariables=function(a,b,c){return this._vvFactory.readVariables(a,b,c)};b.prototype.writeVisualVariables=function(a,b,c,d){b[c]=this._vvFactory.writeVariables(a,d)};b.prototype.getDisplayedSymbol=function(a,b){if(a){var c=v(a.layer||a.sourceLayer),d=this.getSymbol(a);if(d){d=d.clone();if(!this.visualVariables)return d;
var e=this._vvFactory,f=e.colorVariables,g=e.opacityVariables,h=e.sizeVariables,e=e.rotationVariables,f=!!f.length&&f[f.length-1].getColor(a,b),g=g.length?g[g.length-1].getOpacity(a,b):null;null!=c&&(g=null!=g?g*c:c);q.applyColorToSymbol(d,f,g);h.forEach(function(c){return q.applySizeToSymbol(d,c.getSize(a,b),c.axis)});e.forEach(function(c){return q.applyRotationToSymbol(d,c.getRotationAngle(a,b),c.axis)});return d}}};b.prototype.getVisualVariableValues=function(a,b){return this._vvFactory.getVisualVariableValues(a,
b)};b.prototype.hasVisualVariables=function(a,b){return a?!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))};b.prototype.getVisualVariablesForType=function(a,b){var c=this.visualVariables;if(c&&(c=c.filter(function(c){return c.type===a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}),!c||0!==c.length))return c};b.prototype.getSize=
function(a,b){return this._vvFactory.getSize(a,b)};b.prototype.getSizeRangeAtScale=function(a,b,c){return a?a.getSizeRangeAtScale(b,c):this._vvFactory.getSizeRangeAtScale(b,c)};b.prototype.getColor=function(a,b){return this._vvFactory.getColor(a,b)};b.prototype.getOpacity=function(a,b){return this._vvFactory.getOpacity(a,b)};b.prototype.getRotationAngle=function(a,b){return this._vvFactory.getRotationAngle(a,b)};b.prototype.collectRequiredFields=function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));
b.forEach(function(b){b&&(b.field&&(a[b.field]=!0),b.normalizationField&&(a[b.normalizationField]=!0),b.valueExpression&&k.extractFieldNames(b.valueExpression).forEach(function(b){a[b]=!0}))})};f([g.property({type:[String],dependsOn:["visualVariables"]})],b.prototype,"requiredFields",null);f([g.property({types:[u],value:null,json:{write:!0}})],b.prototype,"visualVariables",null);f([g.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],b.prototype,"readVisualVariables",
null);f([g.writer("visualVariables")],b.prototype,"writeVisualVariables",null);return b=f([g.subclass("esri.renderers.mixins.VisualVariablesRenderer")],b)}(g.declared(l))})},"esri/renderers/visualVariables/ColorVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/accessorSupport/decorators ./VisualVariable ./support/ColorStop ./support/utils ../../support/arcadeUtils".split(" "),function(h,d,n,f,l,g,e,c,p,
b){return function(a){function d(b){b=a.call(this,b)||this;b.type="color";b.normalizationField=null;return b}n(d,a);e=d;Object.defineProperty(d.prototype,"_cache",{get:function(){var a=b.createSyntaxTree(this.valueExpression);return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:b.createFunction(a)}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"stops",{set:function(a){a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,
b){return a.value-b.value}));this._set("stops",a)},enumerable:!0,configurable:!0});d.prototype.getColor=function(a,c){var d="number"===typeof a,e=d?null:a,f=e&&e.attributes,g=d?a:null,h=this._cache;a=h.ipData;var k=h.hasExpression,h=h.compiledFunc,m=this.field;if(!m&&!k)return(c=this.stops)&&c[0]&&c[0].color;"number"!==typeof g&&(k?(g=b.getViewInfo(c),e=b.createExecContext(e,g),g=b.executeFunction(h,e)):f&&(g=f[m]));e=this.normalizationField;f=f?parseFloat(f[e]):void 0;if(null!=g&&(!e||d||!isNaN(f)&&
0!==f)&&(isNaN(f)||d||(g/=f),d=p.lookupData(g,a)))return f=d[0],a=d[1],c=f===a?this.stops[f].color:l.blendColors(this.stops[f].color,this.stops[a].color,d[2],c&&c.color),new l(c)};d.prototype.clone=function(){return new e({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(a){return a.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})};d.prototype._interpolateData=
function(){return this.stops&&this.stops.map(function(a){return a.value||0})};var e;f([g.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],d.prototype,"_cache",null);f([g.property({type:["color"],json:{type:["colorInfo"]}})],d.prototype,"type",void 0);f([g.property({type:String,json:{write:!0}})],d.prototype,"normalizationField",void 0);f([g.property({type:[c],json:{write:!0}})],d.prototype,"stops",null);return d=e=f([g.subclass("esri.renderers.visualVariables.ColorVariable")],d)}(g.declared(e))})},
"esri/renderers/visualVariables/VisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./support/VisualVariableLegendOptions".split(" "),function(h,d,n,f,l,g,e,c,p,b){var a=e.getLogger("esri.renderers.visualVariables.VisualVariable"),m=g({colorInfo:"color",transparencyInfo:"opacity",
rotationInfo:"rotation",sizeInfo:"size"});return function(d){function e(a){a=d.call(this,a)||this;a.index=null;a.type=null;a.field=null;a.valueExpression=null;a.valueExpressionTitle=null;a.legendOptions=null;return a}n(e,d);e.prototype.castField=function(b){return null==b?b:"function"===typeof b?(a.error(".field: field must be a string value"),null):p.ensureString(b)};e.prototype.clone=function(){};f([c.property()],e.prototype,"index",void 0);f([c.property({type:m.apiValues,readOnly:!0,json:{read:m.read,
write:m.write}})],e.prototype,"type",void 0);f([c.property({type:String,json:{write:!0}})],e.prototype,"field",void 0);f([c.cast("field")],e.prototype,"castField",null);f([c.property({type:String,json:{write:!0}})],e.prototype,"valueExpression",void 0);f([c.property({type:String,json:{write:!0}})],e.prototype,"valueExpressionTitle",void 0);f([c.property({type:b,json:{write:!0}})],e.prototype,"legendOptions",void 0);return e=f([c.subclass("esri.renderers.visualVariables.VisualVariable")],e)}(c.declared(l))})},
"esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../support/LegendOptions".split(" "),function(h,d,n,f,l,g){return function(d){function c(){var b=null!==d&&d.apply(this,arguments)||this;b.showLegend=null;return b}n(c,d);e=c;c.prototype.clone=function(){return new e({title:this.title,showLegend:this.showLegend})};var e;
f([l.property({type:Boolean,json:{write:!0}})],c.prototype,"showLegend",void 0);return c=e=f([l.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],c)}(l.declared(g.default))})},"esri/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){Object.defineProperty(d,"__esModule",{value:!0});
h=function(d){function c(){var b=null!==d&&d.apply(this,arguments)||this;b.title=null;return b}n(c,d);e=c;c.prototype.clone=function(){return new e({title:this.title})};var e;f([g.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=e=f([g.subclass("esri.renderers.support.LegendOptions")],c)}(g.declared(l));d.LegendOptions=h;d.default=h})},"esri/renderers/visualVariables/support/ColorStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this,a)||this;a.color=null;a.label=null;a.value=null;return a}n(d,c);b=d;d.prototype.writeValue=function(a,b,c){b[c]=null==a?0:a};d.prototype.clone=function(){return new b({color:this.color&&this.color.clone(),label:this.label,value:this.value})};var b;f([e.property({type:l,json:{type:[Number],write:!0}})],d.prototype,"color",void 0);f([e.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);f([e.property({type:Number,
json:{write:{allowNull:!0}}})],d.prototype,"value",void 0);f([e.writer("value")],d.prototype,"writeValue",null);return d=b=f([e.subclass("esri.renderers.visualVariables.support.ColorStop")],d)}(e.declared(g))})},"esri/renderers/visualVariables/OpacityVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./VisualVariable ./support/OpacityStop ./support/utils ../../support/arcadeUtils".split(" "),
function(h,d,n,f,l,g,e,c,p){return function(b){function a(a){a=b.call(this,a)||this;a.type="opacity";a.normalizationField=null;return a}n(a,b);d=a;Object.defineProperty(a.prototype,"_cache",{get:function(){var a=p.createSyntaxTree(this.valueExpression);return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:p.createFunction(a)}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"stops",{set:function(a){a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),
a.sort(function(a,b){return a.value-b.value}));this._set("stops",a)},enumerable:!0,configurable:!0});a.prototype.getOpacity=function(a,b){var d="number"===typeof a,e=d?null:a,f=e&&e.attributes,g=d?a:null,h=this._cache;a=h.ipData;var k=h.hasExpression,h=h.compiledFunc,l=this.field;if(!l&&!k)return(d=this.stops)&&d[0]&&d[0].opacity;"number"!==typeof g&&(k?(g=p.getViewInfo(b),e=p.createExecContext(e,g),g=p.executeFunction(h,e)):f&&(g=f[l]));e=this.normalizationField;f=f?parseFloat(f[e]):void 0;if(null!=
g&&(!e||d||!isNaN(f)&&0!==f)&&(isNaN(f)||d||(g/=f),d=c.lookupData(g,a))){a=d[0];f=d[1];if(a===f)return this.stops[a].opacity;a=this.stops[a].opacity;return a+(this.stops[f].opacity-a)*d[2]}};a.prototype.clone=function(){return new d({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(a){return a.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})};
a.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(a){return a.value||0})};var d;f([l.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],a.prototype,"_cache",null);f([l.property({type:["opacity"],json:{type:["transparencyInfo"]}})],a.prototype,"type",void 0);f([l.property({type:String,json:{write:!0}})],a.prototype,"normalizationField",void 0);f([l.property({type:[e],json:{write:!0}})],a.prototype,"stops",null);return a=d=f([l.subclass("esri.renderers.visualVariables.OpacityVariable")],
a)}(l.declared(g))})},"esri/renderers/visualVariables/support/OpacityStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ../../../webdoc/support/opacityUtils".split(" "),function(h,d,n,f,l,g,e,c){return function(d){function b(a){a=d.call(this,a)||this;a.label=null;a.opacity=null;a.value=null;return a}n(b,d);a=b;b.prototype.readOpacity=
function(a,b){return c.transparencyToOpacity(b.transparency)};b.prototype.writeOpacity=function(a,b,d){b[d]=c.opacityToTransparency(a)};b.prototype.clone=function(){return new a({label:this.label,opacity:this.opacity,value:this.value})};var a;f([g.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);f([g.property({type:Number,json:{type:e.Integer,write:{target:"transparency"}}})],b.prototype,"opacity",void 0);f([g.reader("opacity",["transparency"])],b.prototype,"readOpacity",null);
f([g.writer("opacity")],b.prototype,"writeOpacity",null);f([g.property({type:Number,json:{write:!0}})],b.prototype,"value",void 0);return b=a=f([g.subclass("esri.renderers.visualVariables.support.OpacityStop")],b)}(g.declared(l))})},"esri/renderers/visualVariables/RotationVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Error ../../core/accessorSupport/decorators ./VisualVariable ../../support/arcadeUtils".split(" "),
function(h,d,n,f,l,g,e,c){return function(d){function b(a){a=d.call(this,a)||this;a.axis=null;a.type="rotation";a.rotationType="geographic";a.valueExpressionTitle=null;return a}n(b,d);a=b;Object.defineProperty(b.prototype,"_cache",{get:function(){var a=c.createSyntaxTree(this.valueExpression);return{hasExpression:!!this.valueExpression,compiledFunc:c.createFunction(a)}},enumerable:!0,configurable:!0});b.prototype.writeValueExpressionTitleWebScene=function(a,b,c,d){d&&d.messages&&d.messages.push(new l("property:unsupported",
this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"visualVariables["+this.index+"].valueExpressionTitle",context:d}))};b.prototype.getRotationAngle=function(a,b){var d=this.axis||"heading",e="heading"===d&&"arithmetic"===this.rotationType?90:0,d="heading"===d&&"arithmetic"===this.rotationType?-1:1,f=(a="number"===typeof a?null:a)&&a.attributes,g=this.field,h=this._cache,k=h.hasExpression,h=
h.compiledFunc,l=0;if(!g&&!k)return l;k?(b=c.getViewInfo(b),b=c.createExecContext(a,b),l=c.executeFunction(h,b)):f&&(l=f[g]||0);return l="number"!==typeof l||isNaN(l)?null:e+d*l};b.prototype.clone=function(){return new a({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})};var a;f([g.property({readOnly:!0,dependsOn:["valueExpression"]})],b.prototype,
"_cache",null);f([g.property({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],b.prototype,"axis",void 0);f([g.property({type:["rotation"],json:{type:["rotationInfo"]}})],b.prototype,"type",void 0);f([g.property({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],b.prototype,"rotationType",void 0);f([g.property({type:String,json:{write:!0}})],b.prototype,"valueExpressionTitle",void 0);f([g.writer("web-scene",
"valueExpressionTitle")],b.prototype,"writeValueExpressionTitleWebScene",null);return b=a=f([g.subclass("esri.renderers.visualVariables.RotationVariable")],b)}(g.declared(e))})},"esri/renderers/visualVariables/SizeVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Graphic ../../core/Error ../../core/kebabDictionary ../../core/Logger ../../core/screenUtils ../../core/accessorSupport/decorators ./VisualVariable ./support/SizeStop ./support/SizeVariableLegendOptions ./support/sizeVariableUtils ../../support/arcadeUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u){function t(a){if(null!=a){if("string"===typeof a||"number"===typeof a)return b.toPt(a);if("size"===a.type){if(v.isSizeVariable(a))return a;a=l({},a);delete a.type;return new C(a)}}}function r(a,b,c){if("object"!==typeof a)return a;b=new C;b.read(a,c);return b}var w=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,z=new g,B=p.getLogger("esri.renderers.visualVariables.SizeVariable"),A=c({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",
all:"all"}),x=c({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"}),C=function(b){function c(a){a=b.call(this,a)||this;a.axis=null;a.legendOptions=null;a.normalizationField=null;a.scaleBy=null;a.target=null;a.type="size";a.useSymbolValue=null;a.valueExpression=null;a.valueRepresentation=null;a.valueUnit=
null;return a}n(c,b);d=c;Object.defineProperty(c.prototype,"_cache",{get:function(){var a=u.createSyntaxTree(this.valueExpression);return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:u.createFunction(a),isScaleDriven:w.test(this.valueExpression)}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"expression",{set:function(a){B.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'.");
"view.scale"===a?(this.valueExpression="$view.scale",this._set("expression",a)):this._set("expression",null)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"index",{set:function(a){v.isSizeVariable(this.maxSize)&&(this.maxSize.index="visualVariables["+a+"].maxSize");v.isSizeVariable(this.minSize)&&(this.minSize.index="visualVariables["+a+"].minSize");this._set("index",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"inputValueType",{get:function(){return v.getInputValueType(this)},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxDataValue",{set:function(a){a&&this.stops&&(B.warn("cannot set maxDataValue when stops is not null."),a=null);this._set("maxDataValue",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxSize",{set:function(a){a&&this.stops&&(B.warn("cannot set maxSize when stops is not null."),a=null);this._set("maxSize",a)},enumerable:!0,configurable:!0});c.prototype.castMaxSize=function(a){return t(a)};c.prototype.readMaxSize=
function(a,b,c){return r(a,b,c)};Object.defineProperty(c.prototype,"minDataValue",{set:function(a){a&&this.stops&&(B.warn("cannot set minDataValue when stops is not null."),a=null);this._set("minDataValue",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minSize",{set:function(a){a&&this.stops&&(B.warn("cannot set minSize when stops is not null."),a=null);this._set("minSize",a)},enumerable:!0,configurable:!0});c.prototype.castMinSize=function(a){return t(a)};c.prototype.readMinSize=
function(a,b,c){return r(a,b,c)};Object.defineProperty(c.prototype,"stops",{set:function(a){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,b){return a.value-b.value})):a&&(B.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),a=null);this._set("stops",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"transformationType",
{get:function(){return v.getTransformationType(this,this.inputValueType)},enumerable:!0,configurable:!0});c.prototype.readValueExpression=function(a,b){return a||b.expression&&"$view.scale"};c.prototype.writeValueExpressionWebScene=function(a,b,c,d){"$view.scale"===a?d&&d.messages&&(a=this.index,d.messages.push(new e("property:unsupported",this.type+"VisualVariable.valueExpression \x3d '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,
propertyName:("string"===typeof a?a:"visualVariables["+a+"]")+".valueExpression",context:d}))):b[c]=a};c.prototype.readValueUnit=function(a,b,c){return a?x.read(a):null};c.prototype.getSize=function(a,b){var c=this._getInputValue(a,b);a=v.getSizeForValue(c,this,a,b,this._cache.ipData);return null===a||void 0===a||isNaN(a)?0:a};c.prototype.getSizeRangeAtScale=function(a,b){var c=b&&"3d"===b.type;if(!(this._cache.isScaleDriven&&c||a))return null;b={scale:a,view:b};a=v.getSizeFromNumberOrVariable(this.minSize,
z,b);b=v.getSizeFromNumberOrVariable(this.maxSize,z,b);if(null!=a||null!=b)return a>b&&(c=b,b=a,a=c),{minSize:a,maxSize:b}};c.prototype.clone=function(){return new d({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:v.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:v.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,
stops:this.stops&&this.stops.map(function(a){return a.clone()}),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})};c.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(a){return a.value||0})};c.prototype._getInputValue=function(a,b){var c="number"===typeof a,d=c?null:a,e=d&&d.attributes,f=c?a:null,g=this._cache;a=g.compiledFunc;if(g.isScaleDriven)d=
b&&b.scale,b=b&&b.view,f=null==d||b&&"3d"===b.type?this._getAverageSizeValue():d;else if(!c)switch(this.inputValueType){case "expression":b=u.getViewInfo(b);b=u.createExecContext(d,b);f=u.executeFunction(a,b);break;case "field":e&&(f=e[this.field]);break;case "unknown":f=null}if(!v.isValidNumber(f))return null;if(c||!this.normalizationField)return f;c=e?parseFloat(e[this.normalizationField]):null;return v.isValidNumber(c)&&0!==c?f/c:null};c.prototype._getAverageSizeValue=function(){var a=null,b=null;
(b=this.stops)?(a=b[0].value,b=b[b.length-1].value):(a=this.minDataValue||0,b=this.maxDataValue||0);return(a+b)/2};var d;f([a.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],c.prototype,"_cache",null);f([a.property({type:A.apiValues,json:{type:A.jsonValues,origins:{"web-map":{read:!1}},read:A.read,write:A.write}})],c.prototype,"axis",void 0);f([a.property({type:String,value:null,json:{read:!1}})],c.prototype,"expression",null);f([a.property()],c.prototype,"index",null);f([a.property({type:String,
readOnly:!0,dependsOn:["field","valueExpression"]})],c.prototype,"inputValueType",null);f([a.property({type:q,json:{write:!0}})],c.prototype,"legendOptions",void 0);f([a.property({type:Number,value:null,json:{write:!0}})],c.prototype,"maxDataValue",null);f([a.property({type:Number,value:null,json:{write:!0}})],c.prototype,"maxSize",null);f([a.cast("maxSize")],c.prototype,"castMaxSize",null);f([a.reader("maxSize")],c.prototype,"readMaxSize",null);f([a.property({type:Number,value:null,json:{write:!0}})],
c.prototype,"minDataValue",null);f([a.property({type:Number,value:null,json:{write:!0}})],c.prototype,"minSize",null);f([a.cast("minSize")],c.prototype,"castMinSize",null);f([a.reader("minSize")],c.prototype,"readMinSize",null);f([a.property({type:String,json:{write:!0}})],c.prototype,"normalizationField",void 0);f([a.property({type:String})],c.prototype,"scaleBy",void 0);f([a.property({type:[k],value:null,json:{write:!0}})],c.prototype,"stops",null);f([a.property({type:["outline"],json:{write:!0}})],
c.prototype,"target",void 0);f([a.property({type:String,readOnly:!0,dependsOn:"minDataValue maxDataValue minSize maxSize valueUnit inputValueType stops".split(" ")})],c.prototype,"transformationType",null);f([a.property({type:["size"],json:{type:["sizeInfo"]}})],c.prototype,"type",void 0);f([a.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],c.prototype,"useSymbolValue",void 0);f([a.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0);f([a.reader("valueExpression",
["valueExpression","expression"])],c.prototype,"readValueExpression",null);f([a.writer("web-scene","valueExpression")],c.prototype,"writeValueExpressionWebScene",null);f([a.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],c.prototype,"valueRepresentation",void 0);f([a.property({type:x.apiValues,json:{write:x.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],c.prototype,"valueUnit",void 0);f([a.reader("valueUnit")],c.prototype,"readValueUnit",null);return c=
d=f([a.subclass("esri.renderers.visualVariables.SizeVariable")],c)}(a.declared(m));return C})},"esri/renderers/visualVariables/support/SizeStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/screenUtils ../../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(a){a=c.call(this,a)||this;a.label=null;a.size=null;a.value=null;return a}n(d,c);
b=d;d.prototype.clone=function(){return new b({label:this.label,size:this.size,value:this.value})};var b;f([e.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);f([e.property({type:Number,cast:g.toPt,json:{write:!0}})],d.prototype,"size",void 0);f([e.property({type:Number,json:{write:!0}})],d.prototype,"value",void 0);return d=b=f([e.subclass("esri.renderers.visualVariables.support.SizeStop")],d)}(e.declared(l))})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./VisualVariableLegendOptions".split(" "),
function(h,d,n,f,l,g){return function(d){function c(){var b=null!==d&&d.apply(this,arguments)||this;b.customValues=null;return b}n(c,d);e=c;c.prototype.clone=function(){return new e({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})};var e;f([l.property({type:[Number],json:{write:!0}})],c.prototype,"customValues",void 0);return c=e=f([l.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],c)}(l.declared(g))})},"esri/renderers/visualVariables/VisualVariableFactory":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/kebabDictionary ../../core/Logger ../../core/Warning ../../core/accessorSupport/decorators ./ColorVariable ./OpacityVariable ./RotationVariable ./SizeVariable".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k){var q=e.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),v={color:b,size:k,opacity:a,rotation:m},u=g({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),t=/^\[([^\]]+)\]$/i;return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.colorVariables=null;b.opacityVariables=null;b.rotationVariables=null;b.sizeVariables=null;return b}n(b,a);Object.defineProperty(b.prototype,"visualVariables",{set:function(a){this._resetVariables();
if((a=a&&a.filter(function(a){return!!a}))&&a.length){for(var b=0,c=a;b<c.length;b++){var d=c[b];switch(d.type){case "color":this.colorVariables.push(d);break;case "opacity":this.opacityVariables.push(d);break;case "rotation":this.rotationVariables.push(d);break;case "size":this.sizeVariables.push(d)}}this.sizeVariables.length&&this.sizeVariables.some(function(a){return!!a.target})&&a.sort(function(a,b){var c=null;return c=a.target===b.target?0:a.target?1:-1});for(b=0;b<a.length;b++)d=a[b],d.index=
b}this._set("visualVariables",a)},enumerable:!0,configurable:!0});b.prototype.readVariables=function(a,b,d){var e=b.rotationExpression;b=b.rotationType;if(e=(e=e&&e.match(t))&&e[1])a||(a=[]),a.push({type:"rotationInfo",rotationType:b,field:e});if(a)return a.map(function(a){var b=u.read(a.type),e=v[b];e||(q.warn("Unknown variable type: "+b),d&&d.messages&&d.messages.push(new c("visual-variable:unsupported","visualVariable of type '"+b+"' is not supported",{definition:a,context:d})));b=new e;b.read(a,
d);return b})};b.prototype.writeVariables=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d].toJSON(b);e&&c.push(e)}return c};b.prototype.getVisualVariableValues=function(a,b){var c=[];this.colorVariables.forEach(function(d){var e=d.getColor(a,b);c.push({variable:d,value:e})});this.opacityVariables.forEach(function(d){var e=d.getOpacity(a,b);c.push({variable:d,value:e})});this.rotationVariables.forEach(function(d){var e=d.getRotationAngle(a,b);c.push({variable:d,value:e})});this.sizeVariables.forEach(function(d){var e=
d.getSize(a,b);c.push({variable:d,value:e})});return c.filter(function(a){return null!=a.value})};b.prototype.getColor=function(a,b){if(this.colorVariables.length)return this.colorVariables[0].getColor(a,b)};b.prototype.getOpacity=function(a,b){if(this.opacityVariables.length)return this.opacityVariables[0].getOpacity(a,b)};b.prototype.getRotationAngle=function(a,b){if(this.rotationVariables.length)return this.rotationVariables[0].getRotationAngle(a,b)};b.prototype.getSize=function(a,b){if(this.sizeVariables.length)return this.sizeVariables[0].getSize(a,
b)};b.prototype.getSizeRangeAtScale=function(a,b){if(this.sizeVariables.length)return this.sizeVariables[0].getSizeRangeAtScale(a,b)};b.prototype._resetVariables=function(){this.colorVariables=[];this.opacityVariables=[];this.rotationVariables=[];this.sizeVariables=[]};f([p.property()],b.prototype,"visualVariables",null);return b=f([p.subclass("esri.renderers.visualVariables.VisualVariableFactory")],b)}(p.declared(l))})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/compilerUtils ../../core/has ../../core/Logger ../../core/screenUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(h,d,n,f,l,g,e,c,p,b){function a(a,b){if(null==b)return a;a=a.toRgba();a[3]*=b;return new n(a)}function m(c,d,e){(c=c.symbolLayers)&&c.forEach(function(c){if(c){var f=c.material;d=d||f&&f.color||null!=e&&u;var g=a(d,e);f?c.material.color=g:c.material=new b.default({color:g});null!=e&&"outline"in c&&c.outline&&c.outline.color&&(c.outline.color=a(c.outline.color,e))}})}function k(a,b,c){(a=a.symbolLayers)&&a.forEach(function(a){if(a)switch(a.type){case "icon":case "line":case "path":case "extrude":case "text":a.size=
b;break;case "object":switch(c){case "width":a.width=b;break;case "depth":a.depth=b;break;case "height":a.height=b;break;case "width-and-depth":a.width=b;a.depth=b;break;default:a.width=b,a.depth=b,a.height=b}break;default:q.warn("symbolUtils: applySizeToSymbol","symbolLayer not supported")}})}Object.defineProperty(d,"__esModule",{value:!0});var q=e.getLogger("esri.symbols.support.utils"),v=/\/resource\/(.*?)\.svg$/,u=new n("white");d.getSymbolOutlineSize=function(a){if(!a)return 0;if(f.isSymbol3D(a)){var b=
a.symbolLayers&&a.symbolLayers.length;b?(a=a.symbolLayers.getItemAt(b-1),a="outline"in a&&a.outline&&a.outline.size):a=void 0;return a||0}return(a=p.getStroke(a))&&c.px2pt(a.width)||0};d.isVolumetricSymbol=function(a){if(!a||!a.symbolLayers)return!1;switch(a.type){case "point-3d":return a.symbolLayers.some(function(a){return"object"===a.type});case "line-3d":return a.symbolLayers.some(function(a){return"path"===a.type});case "polygon-3d":return a.symbolLayers.some(function(a){return"object"===a.type||
"extrude"===a.type});default:return!1}};d.getIconHref=function(a,b){b=b.resource.href;return!g("esri-canvas-svg-support")&&a.styleOrigin&&v.test(b)?b.replace(v,"/resource/png/$1.png"):b};d.applyOpacityToColor=a;d.applyColorToSymbol=function(b,c,d){if(b&&(c||null!=d))if(c&&(c=new n(c)),f.isSymbol3D(b))m(b,c,d);else if(f.isSymbol2D(b)){if(c=c||b.color)b.color=a(c,d);null!=d&&"outline"in b&&b.outline&&b.outline.color&&(b.outline.color=a(b.outline.color,d))}};d.applySizeToSymbol=function(a,b,c){if(a&&
null!=b)if(f.isSymbol3D(a))k(a,b,c);else if(f.isSymbol2D(a))switch(a.type){case "simple-marker":a.size=b;break;case "picture-marker":c=a.width/a.height;1<c?(a.width=b,a.height=b*c):(a.width=b*c,a.height=b);break;case "simple-line":a.width=b;break;case "text":a.font.size=b;break;case "simple-fill":case "picture-fill":break;default:l.neverReached(a)}};d.applyRotationToSymbol=function(a,b,c){a&&null!=b&&(f.isSymbol3D(a)?(a=a.symbolLayers)&&a.forEach(function(a){if(a&&"object"===a.type)switch(c){case "tilt":a.tilt=
b;break;case "roll":a.roll=b;break;default:a.heading=b}}):!f.isSymbol2D(a)||"simple-marker"!==a.type&&"picture-marker"!==a.type&&"text"!==a.type||(a.angle=b))}})},"esri/symbols/support/gfxUtils":function(){define("require exports ../../core/tsSupport/assignHelper dojox/gfx/_base ../../Color ../../request ../../core/ItemCache ../../core/promiseUtils ../../core/screenUtils".split(" "),function(h,d,n,f,l,g,e,c,p){function b(a){if(!a)return null;var c,d=p.pt2px(a.width);switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":c=
b(a.outline);break;case "simple-line":"none"!==a.style&&0!==d&&(c={color:a.color,style:v(a.style),width:d,cap:a.cap,join:"miter"===a.join?p.pt2px(a.miterLimit):a.join});break;default:c=null}return c}Object.defineProperty(d,"__esModule",{value:!0});var a=h.toUrl("../../symbols/patterns/"),m={left:"start",center:"middle",right:"end",justify:"start"},k={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},q=new e(1E3);d.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&
m[a.toLowerCase()]||"middle"};d.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&k[a.toLowerCase()]||"alphabetic"};d.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};d.getFill=function(b){var c=b.style,d=null;if(b)switch(b.type){case "simple-marker":"cross"!==c&&"x"!==c&&(d=b.color);break;case "simple-fill":"solid"===c?d=b.color:"none"!==c&&(d=n({},f.defaultPattern,{src:a+c+".png",width:8,height:8}));break;case "picture-fill":d=n({},f.defaultPattern,{src:b.url,
width:p.pt2px(b.width)*b.xscale,height:p.pt2px(b.height)*b.yscale,x:p.pt2px(b.xoffset),y:p.pt2px(b.yoffset)});break;case "text":d=b.color}return d};d.getPatternUrlWithColor=function(a,b){var d=a+"-"+b;return void 0!==q.get(d)?c.resolve(q.get(d)):g(a,{responseType:"image"}).then(function(a){a=a.data;var c=a.naturalWidth,e=a.naturalHeight,f=document.createElement("canvas");f.width=c;f.height=e;var g=f.getContext("2d");g.fillStyle=b;g.fillRect(0,0,c,e);g.globalCompositeOperation="destination-in";g.drawImage(a,
0,0);a=f.toDataURL();q.put(d,a);return a})};d.getStroke=b;d.create2DColorRamp=function(a){var b=a.colors,c=a.numClasses,d=a.size;a=a.surface.createGroup();for(var d=(d||75)/c,e=0;e<c;e++)for(var f=e*d,g=0;g<c;g++){var h=b[e][g];a.createRect({x:g*d,y:f,width:d,height:d}).setFill(h).setStroke(null)}return a};var v=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();d.defaultThematicColor=new l([128,128,128])})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(h,d,n,f,l,g,e,c,p){var b=d.getObject("dojox.gfx",!0),a=b._base={};b._hasClass=function(a,b){return(a=a.getAttribute("className"))&&0<=(" "+a+" ").indexOf(" "+b+" ")};b._addClass=function(a,b){var c=a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};b._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};a._getFontMeasurements=function(){var a=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b,d;f("ie")&&(d=l.doc.documentElement.style.fontSize||"",d||(l.doc.documentElement.style.fontSize="100%"));var e=c.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},l.body());for(b in a)e.style.fontSize=b,a[b]=16*Math.round(12*e.offsetHeight/16)/12/1E3;
f("ie")&&(l.doc.documentElement.style.fontSize=d);l.body().removeChild(e);return a};var m=null;a._getCachedFontMeasurements=function(b){if(b||!m)m=a._getFontMeasurements();return m};var k=null,q={};a._getTextBox=function(a,b,d){var e,f,g=arguments.length,h;k||(k=c.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},l.body()));e=k;e.className="";f=e.style;f.borderWidth="0";f.margin="0";f.padding="0";f.outline="0";if(1<g&&b)for(h in b)h in q||(f[h]=b[h]);2<g&&d&&(e.className=
d);e.innerHTML=a;e.getBoundingClientRect?(f=e.getBoundingClientRect(),f={l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||f.bottom-f.top}):f=p.getMarginBox(e);e.innerHTML="";return f};a._computeTextLocation=function(a,b,c,d){var e={};switch(a.align){case "end":e.x=a.x-b;break;case "middle":e.x=a.x-b/2;break;default:e.x=a.x}e.y=a.y-c*(d?.75:1);return e};a._computeTextBoundingBox=function(c){if(!b._base._isRendered(c))return{x:0,y:0,width:0,height:0};var d;d=c.getShape();var e=c.getFont()||b.defaultFont;
c=c.getTextWidth();e=b.normalizedLength(e.size);d=a._computeTextLocation(d,c,e,!0);return{x:d.x,y:d.y,width:c,height:e}};a._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var v=0;a._getUniqueId=function(){var a;do a=h._scopeName+"xUnique"+ ++v;while(e.byId(a));return a};var u=f("pointer-events")?"touchAction":null;a._fixMsTouchAction=u?function(a){a.rawNode.style[u]="none"}:function(){};d.mixin(b,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",
points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",
color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(c){var d=
a[c];if(d)return new d;d=a[c]=new Function;d.prototype=b["default"+c];return new d}}(),normalizeColor:function(a){return a instanceof n?a:new n(a)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return d.delegate(a);var e={};for(c in a)c in e||(e[c]=d.clone(c in b?b[c]:a[c]));return e},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");
0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var c=b.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){c.style=a[0];c.variant=a[1];c.weight=a[2];var d=a[3].indexOf("/");c.size=0>d?a[3]:a[3].substring(0,d);var e=4;0>d&&("/"==a[4]?e=6:"/"==a[4].charAt(0)&&(e=5));e<a.length&&(c.family=a.slice(e).join(" "))}return c},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return b._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(a){return a*b.px_in_pt()},px2pt:function(a){return a/b.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var c=b.px_in_pt(),d=parseFloat(a);switch(a.slice(-2)){case "px":return d;case "pt":return d*c;case "in":return 72*d*c;case "pc":return 12*d*c;case "mm":return d*b.mm_in_pt*c;case "cm":return d*b.cm_in_pt*c}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var c="string"==typeof a?b[a]:a;c&&(g.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),function(a){b[a]=c[a]}),"string"==typeof a?b.renderer=a:g.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return b.renderer=b[a]&&b[a].Surface===b.Surface?a:null}))}});return b})},"esri/core/ItemCache":function(){define(["require","exports","./MemCache"],
function(h,d,n){return function(){function d(d,f){this._storage=new n.Storage;this._storage.maxSize=d;f&&this._storage.registerRemoveFunc("",f)}d.prototype.put=function(d,f){this._storage.put(d,f,1)};d.prototype.pop=function(d){return this._storage.pop(d)};d.prototype.get=function(d){return this._storage.get(d)};d.prototype.clear=function(){this._storage.clearAll()};d.prototype.destroy=function(){this._storage.clearAll()};return d}()})},"esri/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(h,d,n,f,l,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});h=function(d){function b(){var a=null!==d&&d.apply(this,arguments)||this;a.description=null;a.label=null;a.minValue=null;a.maxValue=0;a.symbol=null;return a}n(b,d);a=b;b.prototype.clone=function(){return new a({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};var a;f([g.property({type:String,json:{write:!0}})],b.prototype,"description",
void 0);f([g.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);f([g.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],b.prototype,"minValue",void 0);f([g.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],b.prototype,"maxValue",void 0);f([g.property({types:c.rendererTypes,json:{origins:{"web-scene":{read:e.read,write:{target:{symbol:{types:c.rendererTypes3D}},writer:e.writeTarget}}},read:e.read,
write:e.writeTarget}})],b.prototype,"symbol",void 0);return b=a=f([g.subclass("esri.renderers.support.ClassBreakInfo")],b)}(g.declared(l));d.ClassBreakInfo=h;d.default=h})},"esri/renderers/HeatmapRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/accessorSupport/decorators ./Renderer ./support/HeatmapColorStop".split(" "),function(h,d,n,f,l,g,e,c,p){return function(b){function a(a){a=b.call(this)||this;
a.blurRadius=10;a.colorStops=[new p.HeatmapColorStop({ratio:0,color:new l("rgba(255, 140, 0, 0)")}),new p.HeatmapColorStop({ratio:.75,color:new l("rgba(255, 140, 0, 1)")}),new p.HeatmapColorStop({ratio:.9,color:new l("rgba(255, 0,   0, 1)")})];a.field=null;a.fieldOffset=0;a.maxPixelIntensity=100;a.minPixelIntensity=0;a.type="heatmap";return a}n(a,b);c=a;a.prototype.clone=function(){return new c({blurRadius:this.blurRadius,colorStops:g.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,
minPixelIntensity:this.minPixelIntensity})};var c;f([e.property({type:Number,json:{write:!0}})],a.prototype,"blurRadius",void 0);f([e.property({type:[p.HeatmapColorStop],json:{write:!0}})],a.prototype,"colorStops",void 0);f([e.property({type:String,json:{write:!0}})],a.prototype,"field",void 0);f([e.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:null==c}}}}})],a.prototype,"fieldOffset",void 0);f([e.property({type:Number,json:{write:!0}})],a.prototype,"maxPixelIntensity",
void 0);f([e.property({type:Number,json:{write:!0}})],a.prototype,"minPixelIntensity",void 0);f([e.property({dependsOn:["field"],readOnly:!0})],a.prototype,"requiredFields",void 0);f([e.enumeration.serializable()({heatmap:"heatmap"})],a.prototype,"type",void 0);return a=c=f([e.subclass("esri.renderers.HeatmapRenderer")],a)}(e.declared(c))})},"esri/renderers/support/HeatmapColorStop":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e){Object.defineProperty(d,"__esModule",{value:!0});h=function(c){function d(a){a=c.call(this)||this;a.color=null;a.ratio=null;return a}n(d,c);b=d;d.prototype.clone=function(){return new b({color:this.color,ratio:this.ratio})};var b;f([e.property({type:l,json:{write:!0}})],d.prototype,"color",void 0);f([e.property({type:Number,json:{write:!0}})],d.prototype,"ratio",void 0);return d=b=f([e.subclass("esri.renderers.support.HeatmapColorStop")],d)}(e.declared(g));d.HeatmapColorStop=
h;d.default=h})},"esri/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ./mixins/VisualVariablesRenderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b){return function(a){function c(b){b=a.call(this)||this;b.description=null;b.label=null;b.symbol=null;b.type="simple";return b}n(c,a);d=c;c.prototype.writeSymbolWebScene=
function(a,b,c,d){p.writeTarget(a,b,c,d)};c.prototype.writeSymbol=function(a,b,c,d){p.writeTarget(a,b,c,d)};c.prototype.readSymbol=function(a,b,c){return p.read(a,b,c)};c.prototype.getSymbol=function(a,b){return this.symbol};c.prototype.getSymbols=function(){return this.symbol?[this.symbol]:[]};c.prototype.clone=function(){return new d({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:l.clone(this.visualVariables),authoringInfo:this.authoringInfo&&
this.authoringInfo.clone()})};var d;f([g.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);f([g.property({types:b.rendererTypes})],c.prototype,"symbol",void 0);f([g.writer("web-scene","symbol",{symbol:{types:b.rendererTypes3D}})],c.prototype,"writeSymbolWebScene",null);f([g.writer("symbol")],c.prototype,"writeSymbol",null);f([g.reader("symbol")],c.prototype,"readSymbol",null);f([g.enumeration.serializable()({simple:"simple"})],
c.prototype,"type",void 0);return c=d=f([g.subclass("esri.renderers.SimpleRenderer")],c)}(g.declared(e,c))})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./mixins/VisualVariablesRenderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A,x){var C=b.getLogger("esri.renderers.UniqueValueRenderer"),y=k.ensureType(w.default);return function(b){function d(a){a=b.call(this)||this;a._valueInfoMap={};a._isDefaultSymbolDerived=!1;a.type="unique-value";a.backgroundFillSymbol=null;a.field=null;a.field2=null;a.field3=null;a.valueExpression=null;a.valueExpressionTitle=null;a.legendOptions=null;a.defaultLabel=null;a.fieldDelimiter=null;a.portal=null;a.styleOrigin=null;a.diff={uniqueValueInfos:function(a,
b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,d={type:"collection",added:[],removed:[],changed:[],unchanged:[]},f=function(f){var g=e.find(a,function(a){return a.value===b[f].value});g?t.diff(g,b[f])?(d.changed.push({type:"complete",oldValue:g,newValue:b[f]}),c=!0):d.unchanged.push({oldValue:g,newValue:b[f]}):(d.added.push(b[f]),c=!0)},g=0;g<b.length;g++)f(g);f=function(f){e.find(b,function(b){return b.value===a[f].value})||(d.removed.push(a[f]),c=!0)};for(g=0;g<
a.length;g++)f(g);return c?d:void 0}}};a._set("uniqueValueInfos",[]);return a}n(d,b);h=d;d.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,d){B.writeTarget(a,b,c,d)};d.prototype.castField=function(a){return null==a?a:"function"===typeof a?a:k.ensureString(a)};d.prototype.writeField=function(a,b,d,e){"string"===typeof a?b[d]=a:e&&e.messages?e.messages.push(new c("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):C.error(".field: cannot write field to JSON since it's not a string value")};
Object.defineProperty(d.prototype,"compiledFunc",{get:function(){return z.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});d.prototype.readDefaultSymbol=function(a,b,c){return B.read(a,b,c)};d.prototype.writeDefaultSymbolWebScene=function(a,b,c,d){this._isDefaultSymbolDerived||B.writeTarget(a,b,c,d)};d.prototype.writeDefaultSymbol=
function(a,b,c,d){this._isDefaultSymbolDerived||B.writeTarget(a,b,c,d)};d.prototype.readPortal=function(a,b,c){return c.portal||q.getDefault()};d.prototype.readStyleOrigin=function(b,c,d){if(c.styleName)return Object.freeze({styleName:c.styleName});if(c.styleUrl)return b=a.fromJSON(c.styleUrl,d),Object.freeze({styleUrl:b})};d.prototype.writeStyleOrigin=function(b,c,d,e){b.styleName?c.styleName=b.styleName:b.styleUrl&&(c.styleUrl=a.toJSON(b.styleUrl,e))};Object.defineProperty(d.prototype,"uniqueValueInfos",
{set:function(a){this.styleOrigin?C.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});d.prototype.addUniqueValueInfo=function(a,b){this.styleOrigin?C.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(a="object"===typeof a?y(a):new w.default({value:a,symbol:b}),this.uniqueValueInfos.push(a),
this._valueInfoMap[a.value]=a)};d.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)C.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};d.prototype.getUniqueValueInfo=function(a,b){var c=this.field,d=a.attributes,e;this.valueExpression?e=z.executeFunction(this.compiledFunc,
z.createExecContext(a,z.getViewInfo(b))):"function"!==typeof c&&this.field2?(a=this.field2,b=this.field3,e=[],c&&e.push(d[c]),a&&e.push(d[a]),b&&e.push(d[b]),e=e.join(this.fieldDelimiter||"")):"function"===typeof c?e=c(a):c&&(e=d[c]);return this._valueInfoMap[e+""]};d.prototype.getSymbol=function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol};d.prototype.getSymbols=function(){for(var a=[],b=0,c=this.uniqueValueInfos;b<c.length;b++){var d=c[b];d.symbol&&a.push(d.symbol)}this.defaultSymbol&&
a.push(this.defaultSymbol);return a};d.prototype.clone=function(){var a=new h({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:p.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:p.clone(this.visualVariables),legendOptions:p.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:p.clone(this.backgroundFillSymbol)});
this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=p.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(p.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};d.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.field2,this.field3].forEach(function(b){b&&"string"===typeof b&&(a[b]=!0)});this.valueExpression&&z.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=
!0})};d.prototype.populateFromStyle=function(){var a=this;return A.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new g.WebStyleSymbol({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e=new w.default({value:d.name,symbol:e});c.push(e);a._valueInfoMap[d.name]=
e});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};d.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};d.fromPortalStyle=function(a,b){var c=new h(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||q.getDefault());b=c.populateFromStyle();
b.catch(function(b){C.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",b)});return b};d.fromStyleUrl=function(a,b){b=new h(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.catch(function(b){C.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",b)});return b};var h;f([m.enumeration.serializable()({uniqueValue:"unique-value"})],d.prototype,"type",void 0);f([m.property({types:{base:g.BaseSymbol,
key:"type",typeMap:{"simple-fill":x.rendererTypes.typeMap["simple-fill"],"picture-fill":x.rendererTypes.typeMap["picture-fill"],"polygon-3d":x.rendererTypes.typeMap["polygon-3d"]}},json:{read:B.read,write:B.writeTarget}})],d.prototype,"backgroundFillSymbol",void 0);f([m.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:g.PolygonSymbol3D}})],d.prototype,"writeBackgroundFillSymbolWebScene",null);f([m.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],
d.prototype,"field",void 0);f([m.cast("field")],d.prototype,"castField",null);f([m.writer("field")],d.prototype,"writeField",null);f([m.property({type:String,json:{write:!0}})],d.prototype,"field2",void 0);f([m.property({type:String,json:{write:!0}})],d.prototype,"field3",void 0);f([m.property({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0);f([m.property({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0);f([m.property({dependsOn:["valueExpression"]})],
d.prototype,"compiledFunc",null);f([m.property({type:r.default,json:{write:!0}})],d.prototype,"legendOptions",void 0);f([m.property({type:String,json:{write:!0}})],d.prototype,"defaultLabel",void 0);f([m.property({types:x.rendererTypes})],d.prototype,"defaultSymbol",null);f([m.reader("defaultSymbol")],d.prototype,"readDefaultSymbol",null);f([m.writer("web-scene","defaultSymbol",{defaultSymbol:{types:x.rendererTypes3D}})],d.prototype,"writeDefaultSymbolWebScene",null);f([m.writer("defaultSymbol")],
d.prototype,"writeDefaultSymbol",null);f([m.property({type:String,json:{write:!0}})],d.prototype,"fieldDelimiter",void 0);f([m.property({type:q,readOnly:!0})],d.prototype,"portal",void 0);f([m.reader("portal",["styleName"])],d.prototype,"readPortal",null);f([m.property({readOnly:!0})],d.prototype,"styleOrigin",void 0);f([m.reader("styleOrigin",["styleName","styleUrl"])],d.prototype,"readStyleOrigin",null);f([m.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],d.prototype,"writeStyleOrigin",
null);f([m.property({type:[w.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],d.prototype,"uniqueValueInfos",null);f([m.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],d.prototype,"requiredFields",void 0);f([l(1,m.cast(x.ensureType))],d.prototype,"addUniqueValueInfo",null);return d=h=f([m.subclass("esri.renderers.UniqueValueRenderer")],d)}(m.declared(v,u))})},"esri/renderers/support/diffUtils":function(){define(["require",
"exports","../../core/Accessor","../../core/Collection","../../core/accessorSupport/utils"],function(h,d,n,f,l){function g(a){return a instanceof f?Object.keys(a.items):a instanceof n?l.getProperties(a).keys():a?Object.keys(a):[]}function e(a,b){return a instanceof f?a.items[b]:a[b]}function c(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function p(a){return a?a.declaredClass:null}function b(d,f){var h=d.diff;if(h&&"function"===typeof h)return h(d,f);var k=g(d),l=g(f);if(0!==
k.length||0!==l.length){if(!k.length||!l.length||c(d,f))return{type:"complete",oldValue:d,newValue:f};var m=l.filter(function(a){return-1===k.indexOf(a)}),r=k.filter(function(a){return-1===l.indexOf(a)}),m=k.filter(function(a){return-1<l.indexOf(a)&&e(d,a)!==e(f,a)}).concat(m,r).sort();if((r=p(d))&&-1<a.indexOf(r)&&m.length)return{type:"complete",oldValue:d,newValue:f};var w,r=d instanceof n&&f instanceof n,z;for(z in m){var B=m[z],A=e(d,B),x=e(f,B),C=void 0;(r||"function"!==typeof A&&"function"!==
typeof x)&&A!==x&&(null!=A||null!=x)&&(C=h&&h[B]&&"function"===typeof h[B]?h[B](A,x):"object"===typeof A&&"object"===typeof x&&p(A)===p(x)?b(A,x):{type:"complete",oldValue:A,newValue:x})&&(w=w||{type:"partial",diff:{}},w.diff[B]=C)}return w}}Object.defineProperty(d,"__esModule",{value:!0});var a=["esri.Color","esri.portal.Portal"];d.diff=function(a,c){if("function"!==typeof a&&"function"!==typeof c&&(a||c))return!a||!c||"object"===typeof a&&"object"===typeof c&&p(a)!==p(c)?{type:"complete",oldValue:a,
newValue:c}:b(a,c)}})},"esri/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(h,d,n,f,l,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});h=function(d){function b(){var a=null!==d&&d.apply(this,arguments)||this;a.description=null;a.label=null;a.symbol=
null;a.value=null;return a}n(b,d);a=b;b.prototype.clone=function(){return new a({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};var a;f([g.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);f([g.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);f([g.property({types:c.rendererTypes,json:{origins:{"web-scene":{read:e.read,write:{target:{symbol:{types:c.rendererTypes3D}},writer:e.writeTarget}}},
read:e.read,write:e.writeTarget}})],b.prototype,"symbol",void 0);f([g.property({type:String,json:{write:!0}})],b.prototype,"value",void 0);return b=a=f([g.subclass("esri.renderers.support.UniqueValueInfo")],b)}(g.declared(l));d.UniqueValueInfo=h;d.default=h})},"esri/symbols/support/styleUtils":function(){define("require exports ../../request ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/has ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q){function v(a,b){return B(a).then(function(b){return{data:b.data,baseUrl:p.removeFile(a),styleUrl:a}})}function u(a,c){c=c.portal||b.getDefault();var d,e=c.url+" - "+(c.user&&c.user.username)+" - "+a;A[e]||(A[e]=t(a,c).then(function(a){d=a;return a.fetchData()}).then(function(b){return{data:b,baseUrl:d.itemUrl,styleName:a}}));return A[e]}function t(b,c){return c.load().then(function(){var d=new a({disableExtraQuery:!0,query:"owner:"+x+" AND type:"+C+' AND typekeywords:"'+
b+'"'});return c.queryItems(d)}).then(function(a){a=a.results;var c=null,d=b.toLowerCase();if(a&&Array.isArray(a))for(var e=0;e<a.length;e++){var f=a[e];if(f.typeKeywords.some(function(a){return a.toLowerCase()===d})&&f.type===C&&f.owner===x){c=f;break}}if(c)return c.load();throw new g("symbolstyleutils:style-not-found","The style '"+b+"' could not be found",{styleName:b});})}function r(a,b){return a.styleUrl?v(a.styleUrl,b):a.styleName?u(a.styleName,b):c.reject(new g("symbolstyleutils:style-url-and-name-missing",
"Either styleUrl or styleName is required to resolve a style"))}function w(a,b,d){for(var e=a.data,h={portal:d.portal,url:p.urlToObject(a.baseUrl),origin:"portal-item"},n=function(c){if(c.name!==b)return"continue";var e=p.fromJSON(z(c),h),g=c.thumbnail&&c.thumbnail.href,n=c.thumbnail&&c.thumbnail.imageData;l.isDevEnvironment()&&(e=l.adjustStaticAGOUrl(e),g=l.adjustStaticAGOUrl(g));var r={portal:d.portal,url:p.urlToObject(p.removeFile(e)),origin:"portal-item"};return{value:B(e).then(function(c){if((c=
m.fromJSON(c.data,r))&&c.isInstanceOf(f.BaseSymbol3D)){if(g){var e=p.fromJSON(g,h);c.thumbnail=new q.default({url:e})}else n&&(c.thumbnail=new q.default({url:"data:image/png;base64,"+n}));a.styleUrl?c.styleOrigin=new k({portal:d.portal,styleUrl:a.styleUrl,name:b}):a.styleName&&(c.styleOrigin=new k({portal:d.portal,styleName:a.styleName,name:b}))}return c})}},r=0,e=e.items;r<e.length;r++){var u=n(e[r]);if("object"===typeof u)return u.value}return c.reject(new g("symbolstyleutils:symbol-name-not-found",
"The symbol name '"+b+"' could not be found",{symbolName:b}))}function z(a){if(a.formatInfos&&!e("enable-feature:jschmid/force-wosr"))for(var b=0,c=a.formatInfos;b<c.length;b++){var d=c[b];if("gltf"===d.type)return d.href}return a.webRef}function B(a){return n(p.normalize(a),{responseType:"json",query:{f:"json"}})}Object.defineProperty(d,"__esModule",{value:!0});var A={};d.fetchStyle=r;d.resolveWebStyleSymbol=function(a,b){return a.name?r(a,b).then(function(c){return w(c,a.name,b)}):c.reject(new g("symbolstyleutils:style-symbol-reference-name-missing",
"Missing name in style symbol reference"))};d.fetchSymbolFromStyle=w;d.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c)&&"Esri Style"!==c)return c}};var x="esri_en",C="Style"})},"esri/core/devEnvironmentUtils":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.isDevEnvironment=function(c){c=c||window.location.hostname;return e.some(function(d){return null!=c.match(d)})};d.adjustStaticAGOUrl=
function(c,d){if(!c)return c;d=d||window.location.hostname;return null!=d.match(n)||null!=d.match(l)?c.replace("static.arcgis.com","staticdev.arcgis.com"):null!=d.match(f)||null!=d.match(g)?c.replace("static.arcgis.com","staticqa.arcgis.com"):c};d.isTelemetryDevEnvironment=function(c){c=c||window.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(e).some(function(d){return null!=c.match(d)})};var n=/^devext.arcgis.com$/,f=/^qaext.arcgis.com$/,l=/^[\w-]*\.mapsdevext.arcgis.com$/,g=/^[\w-]*\.mapsqa.arcgis.com$/,
e=[n,f,/^jsapps.esri.com$/,l,g]})},"esri/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(h,d,n,f,l,g,e,c,p){function b(a,b,c){if(!a)return null;if(a&&(a.styleName||a.styleUrl)&&"uniqueValue"!==a.type)return c&&c.messages&&c.messages.push(new l("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+
a.type+"'",{definition:a,context:c})),null;b=a?m[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new l("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function a(a,b,c){return a?c&&"web-scene"===c.origin&&"heatmap"===a.type?(c.messages&&c.messages.push(new n("renderer:unsupported","Renderer of type '"+a.declaredClass+"' are not supported in scenes.",{renderer:a,context:c})),null):a.write(b,
c):null}Object.defineProperty(d,"__esModule",{value:!0});var m={simple:c,uniqueValue:p,classBreaks:g,heatmap:e};d.read=b;d.writeTarget=function(b,c,d,e){(b=a(b,{},e))&&f.setDeepValue(d,b,c)};d.write=a;d.fromJSON=function(a,c){return b(a,null,c)}})},"esri/layers/support/FeatureIndex":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){Object.defineProperty(d,
"__esModule",{value:!0});h=function(d){function c(b){return d.call(this,b)||this}n(c,d);e=c;c.prototype.clone=function(){return new e({name:this.name,fields:this.fields,isAscending:this.isAscending,isUnique:this.isUnique,description:this.description})};var e;f([g.property({constructOnly:!0})],c.prototype,"name",void 0);f([g.property({constructOnly:!0})],c.prototype,"fields",void 0);f([g.property({constructOnly:!0})],c.prototype,"isAscending",void 0);f([g.property({constructOnly:!0})],c.prototype,
"isUnique",void 0);f([g.property({constructOnly:!0})],c.prototype,"description",void 0);return c=e=f([g.subclass("esri.layers.support.FeatureIndex")],c)}(g.declared(l));d.FeatureIndex=h;d.default=h})},"esri/layers/support/FeatureProcessing":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/accessorSupport/decorators ./Field ./fieldUtils".split(" "),function(h,d,n,f,l,g,e,c,p){return function(b){function a(){return null!==
b&&b.apply(this,arguments)||this}n(a,b);d=a;a.fromWorker=function(a){if(!a)return null;a=JSON.parse(a);var b=new d;b.fields=a.fields&&a.fields.map(function(a){return c.fromJSON(a)});b.options=a.options;b.process=new (Function.bind.apply(Function,[void 0].concat(a.process.args,[a.process.body])));return b};Object.defineProperty(a.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new d(g.clone({fields:this.fields,
options:this.options,process:this.process}))};a.prototype.getField=function(a){return p.getField(a,this.fields)};a.prototype.refresh=function(){this.notifyChange("version")};a.prototype.toWorker=function(){var a=this.process.toString();return JSON.stringify({fields:this.fields,options:this.options,process:{body:a.substring(a.indexOf("{")+1,a.lastIndexOf("}")),args:a.slice(a.indexOf("(")+1,a.indexOf(")")).match(/([^\s,]+)/g)}})};var d;f([e.property({type:[c]})],a.prototype,"fields",void 0);f([e.property()],
a.prototype,"options",void 0);f([e.property()],a.prototype,"process",void 0);f([e.property({readOnly:!0,dependsOn:["process","options","fields"]})],a.prototype,"version",null);return a=d=f([e.subclass("esri.layers.support.FeatureProcessing")],a)}(e.declared(l))})},"esri/layers/support/fieldUtils":function(){define(["require","exports","@dojo/framework/shim/Set","../../core/object","./domains"],function(h,d,n,f,l){function g(a,b,c){if(a)for(var d=0;d<a.length;d++){var g=a[d],h=f.getDeepValue(g,b);
(h=h&&"function"!==typeof h&&e(h,c))&&f.setDeepValue(g,h.name,b)}}function e(a,b){if("string"!==typeof a)return null;if(null!=b){a=a.toLowerCase();for(var c=0;c<b.length;c++){var d=b[c];if(d&&d.name.toLowerCase()===a)return d}}return null}function c(a){return"number"===typeof a&&!isNaN(a)&&isFinite(a)}function p(a){return null===a||c(a)}function b(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function a(a){return null===a||b(a)}function m(a){return null!=a&&"string"===typeof a}function k(a){return null===
a||m(a)}function q(a){return!0}function v(d,e){var f;switch(d.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":f=d.nullable?a:b;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":f=d.nullable?p:c;break;case "string":case "esriFieldTypeString":f=d.nullable?k:m;break;default:f=q}return 1===arguments.length?f:f(e)}function u(a){return null!=
a&&z.has(a.type)}function t(a,b){return a.nullable&&null===b?null:u(a)&&!r(a.type,b)?B.OUT_OF_RANGE:v(a,b)?a.domain?l.validateDomainValue(a.domain,b):null:A.INVALID_TYPE}function r(a,b){return(a=w(a))?b>=a.min&&b<=a.max:!1}function w(a){switch(a){case "esriFieldTypeSmallInteger":case "small-integer":return d.smallIntegerRange;case "esriFieldTypeInteger":case "integer":return d.integerRange;case "esriFieldTypeSingle":case "single":return d.singleRange;case "esriFieldTypeDouble":case "double":return d.doubleRange}}
Object.defineProperty(d,"__esModule",{value:!0});d.fixRendererFields=function(a,b){if(null!=a&&null!=b){var c=0;for(a=Array.isArray(a)?a:[a];c<a.length;c++){var e=a[c];g(d.rendererFields,e,b);if("visualVariables"in e&&e.visualVariables)for(var f=0,e=e.visualVariables;f<e.length;f++)g(d.visualVariableFields,e[f],b)}}};d.getField=e;d.getFieldDefaultValue=function(a){var b=a.defaultValue;if(void 0!==b&&v(a,b))return b;if(a.nullable)return null};d.isValueMatchingFieldType=v;d.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");
d.visualVariableFields=["field","normalizationField"];d.numericTypes=["integer","small-integer","single","double"];var z=new n.default(d.numericTypes.concat(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]));d.isNumericField=u;d.isStringField=function(a){return null!=a&&("string"===a.type||"esriFieldTypeString"===a.type)};d.isDateField=function(a){return null!=a&&("date"===a.type||"esriFieldTypeDate"===a.type)};d.isValidFieldValue=function(a,b){return null===
t(a,b)};var B;(B=d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";var A;(A=d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";d.sanitizeNullFieldValue=function(a){return null==a?null:a};d.validateFieldValue=t;d.isNumberInRange=r;d.getFieldRange=function(a){var b=l.getDomainRange(a.domain);if(b)return b;if(u(a))return w(a.type)};d.smallIntegerRange={min:-32768,max:32767};
d.integerRange={min:-2147483648,max:2147483647};d.singleRange={min:-3.4E38,max:1.2E38};d.doubleRange={min:-Number.MAX_VALUE,max:Number.MAX_VALUE};d.validationErrorToString=function(a,b,c){switch(a){case l.DomainValidationError.INVALID_CODED_VALUE:return"Value "+c+" is not in the coded domain - field: "+b.name+", domain: "+JSON.stringify(b.domain);case l.DomainValidationError.VALUE_OUT_OF_RANGE:return"Value "+c+" is out of the range of valid values - field: "+b.name+", domain: "+JSON.stringify(b.domain);
case A.INVALID_TYPE:return"Value "+c+" is not a valid value for the field type - field: "+b.name+", type: "+b.type+", nullable: "+b.nullable;case B.OUT_OF_RANGE:return a=w(b.type),"Value "+c+" is out of range for the number type - field: "+b.name+", type: "+b.type+", value range is "+a.min+" to "+a.max}}})},"@dojo/framework/shim/Set":function(){(function(h){"object"===typeof module&&"object"===typeof module.exports?(h=h(require,exports),void 0!==h&&(module.exports=h)):"function"===typeof define&&
define.amd&&define("require exports tslib ./global ./iterator ./support/has ./Symbol".split(" "),h)})(function(h,d){Object.defineProperty(d,"__esModule",{value:!0});var n=h("tslib"),f=h("./global"),l=h("./iterator"),g=h("./support/has");h("./Symbol");d.Set=f.default.Set;g.default("es6-set")||(d.Set=(e=function(){function c(c){this._setData=[];this[Symbol.toStringTag]="Set";if(c)if(l.isArrayLike(c))for(var b=0;b<c.length;b++)this.add(c[b]);else try{for(var b=n.__values(c),a=b.next();!a.done;a=b.next())this.add(a.value)}catch(q){d=
{error:q}}finally{try{a&&!a.done&&(e=b.return)&&e.call(b)}finally{if(d)throw d.error;}}var d,e}c.prototype.add=function(c){if(this.has(c))return this;this._setData.push(c);return this};c.prototype.clear=function(){this._setData.length=0};c.prototype.delete=function(c){c=this._setData.indexOf(c);if(-1===c)return!1;this._setData.splice(c,1);return!0};c.prototype.entries=function(){return new l.ShimIterator(this._setData.map(function(c){return[c,c]}))};c.prototype.forEach=function(c,b){for(var a=this.values(),
d=a.next();!d.done;)c.call(b,d.value,d.value,this),d=a.next()};c.prototype.has=function(c){return-1<this._setData.indexOf(c)};c.prototype.keys=function(){return new l.ShimIterator(this._setData)};Object.defineProperty(c.prototype,"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0});c.prototype.values=function(){return new l.ShimIterator(this._setData)};c.prototype[Symbol.iterator]=function(){return new l.ShimIterator(this._setData)};return c}(),e[Symbol.species]=e,e));
d.default=d.Set;var e})},"esri/layers/support/FeatureReduction":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g){Object.defineProperty(d,"__esModule",{value:!0});h=function(d){function c(){var c=null!==d&&d.apply(this,arguments)||this;c.type=null;return c}n(c,d);f([g.property({type:["selection"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,
"type",void 0);return c=f([g.subclass("esri.layers.support.FeatureReduction")],c)}(g.declared(l));d.FeatureReduction=h;d.default=h})},"esri/layers/support/FeatureReductionSelection":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./FeatureReduction".split(" "),function(h,d,n,f,l,g){Object.defineProperty(d,"__esModule",{value:!0});h=function(d){function c(){var c=null!==d&&d.apply(this,arguments)||
this;c.type="selection";return c}n(c,d);f([l.property({type:["selection"]})],c.prototype,"type",void 0);return c=f([l.subclass("esri.layers.support.FeatureReductionSelection")],c)}(l.declared(g.default));d.FeatureReductionSelection=h;d.default=h})},"esri/layers/support/FeatureTemplate":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e,c){var p=g({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",
esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});return function(b){function a(a){a=b.call(this,a)||this;a.name=null;a.description=null;a.drawingTool=null;a.prototype=null;a.thumbnail=null;return a}n(a,b);a.prototype.writeDrawingTool=function(a,b){b.drawingTool=p.toJSON(a)};a.prototype.writePrototype=function(a,b){b.prototype=e.fixJson(e.clone(a),!0)};a.prototype.writeThumbnail=function(a,b){b.thumbnail=e.fixJson(e.clone(a))};f([c.property({json:{write:!0}})],a.prototype,
"name",void 0);f([c.property({json:{write:!0}})],a.prototype,"description",void 0);f([c.property({json:{read:p.read,write:p.write}})],a.prototype,"drawingTool",void 0);f([c.writer("drawingTool")],a.prototype,"writeDrawingTool",null);f([c.property({json:{write:!0}})],a.prototype,"prototype",void 0);f([c.writer("prototype")],a.prototype,"writePrototype",null);f([c.property({json:{write:!0}})],a.prototype,"thumbnail",void 0);f([c.writer("thumbnail")],a.prototype,"writeThumbnail",null);return a=f([c.subclass("esri.layers.support.FeatureTemplate")],
a)}(c.declared(l))})},"esri/layers/support/FeatureType":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./domains ./FeatureTemplate".split(" "),function(h,d,n,f,l,g,e,c,p){return function(b){function a(a){a=b.call(this,a)||this;a.id=null;a.name=null;a.domains=null;a.templates=null;return a}n(a,b);a.prototype.readDomains=function(a){var b={},d;for(d in a)if(a.hasOwnProperty(d)){var e=
a[d];switch(e.type){case "range":b[d]=c.RangeDomain.fromJSON(e);break;case "codedValue":b[d]=c.CodedValueDomain.fromJSON(e);break;case "inherited":b[d]=c.InheritedDomain.fromJSON(e)}}return b};a.prototype.writeDomains=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]&&a[d].toJSON());g.fixJson(c);b.domains=c};a.prototype.readTemplates=function(a){return a&&a.map(function(a){return new p(a)})};a.prototype.writeTemplates=function(a,b){b.templates=a&&a.map(function(a){return a.toJSON()})};
f([e.property({json:{write:!0}})],a.prototype,"id",void 0);f([e.property({json:{write:!0}})],a.prototype,"name",void 0);f([e.property({json:{write:!0}})],a.prototype,"domains",void 0);f([e.reader("domains")],a.prototype,"readDomains",null);f([e.writer("domains")],a.prototype,"writeDomains",null);f([e.property({json:{write:!0}})],a.prototype,"templates",void 0);f([e.reader("templates")],a.prototype,"readTemplates",null);f([e.writer("templates")],a.prototype,"writeTemplates",null);return a=f([e.subclass("esri.layers.support.FeatureType")],
a)}(e.declared(l))})},"esri/layers/support/LabelClass":function(){define("../../core/date ../../core/JSONSupport ../../core/lang ../../core/kebabDictionary dojo/number ./LabelExpressionInfo ./labelUtils ./types ../../support/arcadeUtils ../../arcade/Feature ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m){function k(a){a=(a=p.createSyntaxTree(a))&&a.body&&a.body[0]&&a.body[0].body&&a.body[0].body.body;if(!a||1!==a.length)return null;a="ExpressionStatement"===
a[0].type&&a[0].expression;if(!a||"MemberExpression"!==a.type)return null;var b=a.object;if(!b||"Identifier"!==b.type||"$feature"!==b.name)return null;a=a.property;if(!a)return null;switch(a.type){case "Literal":return a.value;case "Identifier":return a.name}return null}function q(a){return a?"service"===a.origin?!1:!a.layer||!c.isOfType(a.layer,"map-image"):!0}f=f({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",
esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",
esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",
esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});var v=new b,u=d.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{name:{type:String,value:null,json:{write:!0}},labelExpression:{type:String,value:null,json:{read:function(a,b,c,d){b=b.labelExpressionInfo;if(!b||!b.value&&!b.expression)return a},write:{allowNull:!0,writer:function(a,b,c,d){this.labelExpressionInfo&&q(d)&&(null!=this.labelExpressionInfo.value?a=this._templateStringToSql(this.labelExpressionInfo.value):
null!=this.labelExpressionInfo.expression&&(d=k(this.labelExpressionInfo.expression))&&(a="["+d+"]"));null!=a&&(b[c]=a)}}}},labelExpressionInfo:{value:null,type:g,json:{write:{overridePolicy:function(a,b,c){return q(c)?{allowNull:!0}:{enabled:!1}},writer:function(a,b,c,d){if(null==a&&null!=this.labelExpression&&q(d))a=new g({expression:this.getLabelExpressionArcade()});else if(!a)return;a=a.toJSON(d);a.expression&&(b[c]=a)}}}},labelPlacement:{type:f.apiValues,value:null,json:{type:f.jsonValues,read:f.read,
write:f.write}},maxScale:{type:Number,value:0,json:{write:function(a,b){if(a||this.minScale)b.maxScale=a}}},minScale:{type:Number,value:0,json:{write:function(a,b){if(a||this.maxScale)b.minScale=a}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],get:function(){var a=Object.create(null);this._collectRequiredFields(a);return Object.keys(a)}},symbol:{value:null,types:m.labelTypes,json:{origins:{"web-scene":{read:a.read,write:{target:{symbol:{types:m.labelTypes3D}},
writer:a.writeTarget}}},read:a.read,write:a.writeTarget}},useCodedValues:{type:Boolean,value:null,json:{write:!0}},where:{type:String,value:null,json:{write:!0}}},getLabelExpression:function(){var a={expression:"",type:"none"};this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type="conventional"):this.labelExpressionInfo.expression&&(a.expression=this.labelExpressionInfo.expression,a.type="arcade"):null!=this.labelExpression&&(a.expression=this._sqlToTemplateString(this.labelExpression),
a.type="conventional");return a},getLabelExpressionArcade:function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return e.convertTemplatedStringToArcade(a.expression);case "arcade":return a.expression}return null},getOptions:function(a){a={spatialReference:a};var b=this.labelExpressionInfo;if(b){var c=b.expression;c&&!b.value&&(a.hasArcadeExpression=!0,a.compiledArcadeFunc=p.createFunction(c))}return a},getLabelExpressionSingleField:function(){var a=this.getLabelExpression();
if(!a)return null;switch(a.type){case "conventional":return(a=a.expression.match(t))&&a[1].trim()||null;case "arcade":return k(a.expression)}return null},clone:function(){return new u({labelExpression:this.labelExpression,labelExpressionInfo:n.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:this.symbol.clone(),where:this.where,useCodedValues:this.useCodedValues})},_collectRequiredFields:function(a){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),
a);this._collectWhereRequiredFields(this.where,a)},_sqlToTemplateString:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_templateStringToSql:function(a){return a.replace(/\{/g,"[").replace(/\}/g,"]")},_collectWhereRequiredFields:function(a,b){null!=a&&(a=a.split(" "),3===a.length&&(b[a[0]]=!0),7===a.length&&(b[a[0]]=!0,b[a[4]]=!0))},_collectLabelExpressionRequiredFields:function(a,b){"arcade"===a.type?p.extractFieldNames(a.expression).forEach(function(a){b[a]=!0}):(a=a.expression.match(/{[^}]*}/g))&&
a.forEach(function(a){b[a.slice(1,-1)]=!0})}});u.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;var d=a.split(" ");if(3===d.length)return c(b[d[0]],d[1],d[2]);if(7===d.length){var e=c(b[d[0]],d[1],d[2]),f=d[3],g=c(b[d[4]],d[5],d[6]);switch(f){case "AND":return e&&
g;case "OR":return e||g}}return!1}catch(y){console.log("Error.: can't parse \x3d "+a)}};u.buildLabelText=function(a,b,c,d){var e="";if(d&&d.hasArcadeExpression)d.compiledArcadeFunc&&(v.repurposeFromGraphicLikeObject(b.geometry,b.attributes,{fields:c}),a=p.executeFunction(d.compiledArcadeFunc,{vars:{$feature:v,$view:d.view},spatialReference:d.spatialReference}),null!=a&&(e=a.toString()));else var f=b&&b.attributes||{},e=a.replace(/{[^}]*}/g,function(a){return u.formatField(a.slice(1,-1),a,f,c,d)});
return e};u.formatField=function(a,b,c,d,e){var f=a.toLowerCase();for(a=0;a<d.length;a++)if(d[a].name.toLowerCase()===f){b=c[d[a].name];var g=d[a].domain;if(g&&"object"===typeof g){if("codedValue"==g.type)for(c=0;c<g.codedValues.length;c++)g.codedValues[c].code==b&&(b=g.codedValues[c].name);else"range"==g.type&&g.minValue<=b&&b<=g.maxValue&&(b=g.name);break}g=d[a].type;"date"==g?(g=h.fromJSON(e&&e.dateFormat||"shortDate"),(g="DateFormat"+h.getFormat(g))&&(b=n.substitute({myKey:b},"{myKey:"+g+"}"))):
("integer"==g||"small-integer"==g||"long"==g||"double"==g)&&e&&e.numberFormat&&e.numberFormat.digitSeparator&&e.numberFormat.places&&(b=l.format(b,{places:e.numberFormat.places}))}return null==b?"":b};var t=/^\s*\{([^}]+)\}\s*$/i;return u})},"esri/layers/support/LabelExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./labelUtils".split(" "),function(h,d,n,f,l,
g,e){return function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a.value=null;a.expression=null;return a}n(d,c);b=d;d.prototype.readExpression=function(a,b){return b.value?e.convertTemplatedStringToArcade(b.value):a};d.prototype.writeExpression=function(a,b,c){null!=this.value&&(a=e.convertTemplatedStringToArcade(this.value));b[c]=a};d.prototype.clone=function(){return new b({value:this.value,expression:this.expression})};var b;f([g.property({json:{read:!1,write:!1}})],d.prototype,
"value",void 0);f([g.property({type:String,json:{write:{allowNull:!0}}})],d.prototype,"expression",void 0);f([g.reader("expression",["expression","value"])],d.prototype,"readExpression",null);f([g.writer("expression")],d.prototype,"writeExpression",null);return d=b=f([g.subclass("esri.layers.support.LabelExpressionInfo")],d)}(g.declared(l))})},"esri/layers/support/labelUtils":function(){define(["require","exports","../../core/string"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});
var f=/__begin__/ig,l=/__end__/ig,g=/^__begin__/i,e=/__end__$/i;d.convertTemplatedStringToArcade=function(c){c?(c=n.replace(c,function(c,b){return'__begin__$feature["'+b+'"]__end__'}),c=g.test(c)?c.replace(g,""):'"'+c,c=e.test(c)?c.replace(e,""):c+'"',c=c.replace(f,'" + ').replace(l,' + "')):c='""';return c}})},"esri/core/string":function(){define(["require","exports","./object"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.replace=function(d,h,g){void 0===g&&(g=/\{([^\}]+)\}/g);
return d.replace(g,"object"===typeof h?function(d,c){return n.getDeepValue(c,h)}:h)}})},"esri/layers/support/labelingInfo":function(){define(["require","exports","./LabelClass"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});var f=/\[([^\[\]]+)\]/gi;d.reader=function(d,g,e){var c=this;return d?d.map(function(d){var b=new n;b.read(d,e);if(b.labelExpression){var a=g.fields||g.layerDefinition&&g.layerDefinition.fields||c.fields;b.labelExpression=b.labelExpression.replace(f,function(b,
c){a:if(a){b=c.toLowerCase();for(var d=0;d<a.length;d++){var e=a[d].name;if(e.toLowerCase()===b){c=e;break a}}}return"["+c+"]"})}return b}):null}})},"esri/layers/support/layerSourceUtils":function(){define(["require","exports","../../core/kebabDictionary","../../core/lang"],function(h,d,n,f){function l(a){return null!=a&&a.hasOwnProperty("mapLayerId")}function g(a){return null!=a&&a.hasOwnProperty("dataSource")}function e(a){if(!a)return a;l(a)&&(a.type=d.MAPLAYER);if(g(a)&&(a.type=d.DATALAYER,!a.dataSource.type)){var b=
a.dataSource;b.workspaceId?b.type=b.gdbVersion?"table":b.query||b.oidFields?"query-table":"raster":b.leftTableKey&&b.rightTableKey&&b.leftTableSource&&b.rightTableSource&&(b.type="join-table",b.leftTableSource=e(b.leftTableSource),b.rightTableSource=e(b.rightTableSource))}return a}function c(e){var g={};if(e.type===d.MAPLAYER)g.mapLayerId=e.mapLayerId,e.gdbVersion&&(g.gdbVersion=e.gdbVersion);else if(e.type===d.DATALAYER){e.fields&&(g.fields=e.fields);var h;h=e.dataSource;var l;switch(h.type){case "table":l=
{dataSourceName:h.dataSourceName,workspaceId:h.workspaceId,gdbVersion:h.gdbVersion};break;case "query-table":l={geometryType:b.toJSON(h.geometryType),workspaceId:h.workspaceId,query:h.query,oidFields:h.oidFields,spatialReference:h.spatialReference};break;case "join-table":l={leftTableSource:c(h.leftTableSource),rightTableSource:c(h.rightTableSource),leftTableKey:h.leftTableKey,rightTableKey:h.rightTableKey,joinType:k.toJSON(h.joinType)};break;case "raster":l={workspaceId:h.workspaceId,dataSourceName:h.dataSourceName}}l.type=
m.toJSON(h.type);h=f.fixJson(l);g.dataSource=h}g.type=a.toJSON(e.type);return f.fixJson(g)}function p(c){var e={};if(a.fromJSON(c.type)===d.MAPLAYER)e.mapLayerId=c.mapLayerId,c.gdbVersion&&(e.gdbVersion=c.gdbVersion);else if(a.fromJSON(c.type)===d.DATALAYER){c.fields&&(e.fields=c.fields);var g;g=c.dataSource;var h;switch(g.type){case "table":h={dataSourceName:g.dataSourceName,workspaceId:g.workspaceId,gdbVersion:g.gdbVersion};break;case "queryTable":h={geometryType:b.fromJSON(g.geometryType),workspaceId:g.workspaceId,
query:g.query,oidFields:g.oidFields,spatialReference:g.spatialReference};break;case "joinTable":h={leftTableSource:p(g.leftTableSource),rightTableSource:p(g.rightTableSource),leftTableKey:g.leftTableKey,rightTableKey:g.rightTableKey,joinType:k.fromJSON(g.joinType)};break;case "raster":h={workspaceId:g.workspaceId,dataSourceName:g.dataSourceName}}h.type=m.fromJSON(g.type);g=f.fixJson(h);e.dataSource=g}e.type=a.fromJSON(c.type);return f.fixJson(e)}Object.defineProperty(d,"__esModule",{value:!0});d.MAPLAYER=
"map-layer";d.DATALAYER="data-layer";var b=n({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),a=n({mapLayer:d.MAPLAYER,dataLayer:d.DATALAYER}),m=n({joinTable:"join-table",queryTable:"query-table"}),k=n({esriLeftOuterJoin:"left-outer-join",esriLeftInnerJoin:"left-inner-join"});d.isMapLayerSource=l;d.isDataLayerSource=g;d.castSource=e;d.sourceToJSON=c;d.sourceFromJSON=p})},"esri/layers/support/Relationship":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e){var c=g({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"});return function(d){function b(a){a=d.call(this,a)||this;a.cardinality=null;a.id=null;a.keyField=null;a.name=null;a.relatedTableId=null;return a}n(b,d);f([e.property({json:{read:c.read,write:c.write}})],b.prototype,"cardinality",void 0);f([e.property({json:{read:!0,write:!0}})],b.prototype,"id",void 0);f([e.property({json:{read:!0,write:!0}})],
b.prototype,"keyField",void 0);f([e.property({json:{read:!0,write:!0}})],b.prototype,"name",void 0);f([e.property({json:{read:!0,write:!0}})],b.prototype,"relatedTableId",void 0);return b=f([e.subclass("esri.layers.support.Relationship")],b)}(e.declared(l))})},"esri/renderers/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Warning"],function(h,d,n,f){Object.defineProperty(d,"__esModule",{value:!0});d.loadStyleRenderer=function(d,g){var e=d&&d.getAtOrigin&&
d.getAtOrigin("renderer",g.origin);return e&&"unique-value"===e.type&&e.styleOrigin?e.populateFromStyle().catch(function(c){g&&g.messages&&g.messages.push(new f("renderer:style-reference","Failed to create unique value renderer from style reference: "+c.message,{error:c,context:g}));d.clear("renderer",g.origin)}).then(function(){return null}):n.resolve(null)}})},"esri/renderers/support/typeUtils":function(){define("require exports ../ClassBreaksRenderer ../HeatmapRenderer ../Renderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),
function(h,d,n,f,l,g,e){Object.defineProperty(d,"__esModule",{value:!0});d.types={key:"type",base:l,typeMap:{heatmap:f,simple:g,"unique-value":e,"class-breaks":n}}})},"esri/layers/support/sublayerUtils":function(){define(["require","exports","./layerSourceUtils"],function(h,d,n){function f(d,f){function e(a){var b=a.sublayers;c.unshift(a.id);b&&b.forEach(e)}if(!d||!d.length)return!0;var c=[];f.forEach(e);if(d.length>c.length)return!1;f=0;for(var g=c.length,b=0;b<d.length;b++){for(var a=d[b].id;f<
g&&c[f]!==a;)f++;if(f>=g)return!1}return!0}Object.defineProperty(d,"__esModule",{value:!0});d.isExportDynamic=function(d,g,e){return d.some(function(c){var d=c.source;return!(!d||d.type===n.MAPLAYER&&d.mapLayerId===c.id&&(!d.gdbVersion||d.gdbVersion===e.gdbVersion))||null!=c.renderer||null!=c.labelingInfo||c.hasOwnProperty("opacity")&&null!=c.opacity||c.hasOwnProperty("labelsVisible")&&null!=c.labelsVisible})?!0:!f(d,g)};d.sameStructureAsService=function(d,f){return f.flatten(function(d){return(d=
d.sublayers)&&d.toArray().reverse()}).toArray().reverse().every(function(e,c){return(c=d[c])&&e.id===c.id&&(null==e.sublayers&&null==c.sublayers||null!=e.sublayers&&null!=c.sublayers&&e.sublayers.map(function(c){return c.id}).join(",")===c.sublayers.map(function(c){return c.id}).join(","))})}})},"esri/layers/support/arcgisLayers":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Error ../../core/promiseUtils ./arcgisLayerUrl ./arcgisLayerUrl ./lazyLayerLoader".split(" "),
function(h,d,n,f,l,g,e,c,p){function b(a,b){return a.sublayerIds.map(function(c){return new a.Constructor(n({},b,{layerId:c,sublayerTitleMode:"service-name"}))})}function a(a){var b=c.parse(a);if(!b)return g.reject(new l("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:a}));var d=b.serverType,e=b.sublayer,f={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(d){case "MapServer":d=null!=e?"FeatureLayer":k(a).then(function(a){return a?
"TileLayer":"MapImageLayer"});break;case "ImageServer":d=v(a).then(function(a){var b=a.tileInfo&&a.tileInfo.format;return a.tileInfo?b&&"LERC"===b.toUpperCase()&&a.cacheType&&"elevation"===a.cacheType.toLowerCase()?"ElevationLayer":"TileLayer":"ImageryLayer"});break;case "SceneServer":d=v(b.url.path).then(function(a){var b={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return a&&Array.isArray(a.layers)&&
0<a.layers.length&&(a=a.layers[0].layerType,null!=b[a])?b[a]:"SceneLayer"});break;default:d=f[d]}var h={FeatureLayer:!0,SceneLayer:!0},n={parsedUrl:b,Constructor:null,sublayerIds:null},q;return g.when(d).then(function(b){q=b;if(h[b]&&null==e)return m(a).then(function(a){1!==a.length&&(n.sublayerIds=a)})}).then(function(){return(0,p.layerLookupMap[q])()}).then(function(a){n.Constructor=a;return n})}function m(a){return v(a).then(function(a){return a&&Array.isArray(a.layers)?a.layers.map(function(a){return a.id}).reverse():
[]})}function k(a){return v(a).then(function(a){return a.tileInfo})}function q(a,b){a=a.Constructor.prototype.declaredClass;return"esri.layers.FeatureLayer"===a||"esri.layers.StreamLayer"===a?n({outFields:["*"]},b):b}function v(a){return f(a,{responseType:"json",query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(d,"__esModule",{value:!0});d.fromUrl=function(c){return a(c.url).then(function(a){var d=q(a,n({},c.properties,{url:c.url}));return a.sublayerIds?g.create(function(a){return h(["../GroupLayer"],
a)}).then(function(c){var e=new c({title:a.parsedUrl.title});b(a,d).forEach(function(a){return e.add(a)});return g.resolve(e)}):g.resolve(new a.Constructor(d))})};d.fetchServerVersion=function(a){if(!e.test(a))return g.reject();a=a.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return f(a,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data&&a.data.currentVersion?a.data.currentVersion:g.reject()})}})},"esri/layers/support/lazyLayerLoader":function(){define(["require","exports","../../core/promiseUtils"],
function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.layerLookupMap={CSVLayer:function(){return n.create(function(d){return h(["../CSVLayer"],d)})},ElevationLayer:function(){return n.create(function(d){return h(["../ElevationLayer"],d)})},FeatureLayer:function(){return n.create(function(d){return h(["../FeatureLayer"],d)})},GroupLayer:function(){return n.create(function(d){return h(["../GroupLayer"],d)})},GeoRSSLayer:function(){return n.create(function(d){return h(["../GeoRSSLayer"],
d)})},ImageryLayer:function(){return n.create(function(d){return h(["../ImageryLayer"],d)})},KMLLayer:function(){return n.create(function(d){return h(["../KMLLayer"],d)})},MapImageLayer:function(){return n.create(function(d){return h(["../MapImageLayer"],d)})},MapNotesLayer:function(){return n.create(function(d){return h(["../MapNotesLayer"],d)})},OpenStreetMapLayer:function(){return n.create(function(d){return h(["../OpenStreetMapLayer"],d)})},PointCloudLayer:function(){return n.create(function(d){return h(["../PointCloudLayer"],
d)})},SceneLayer:function(){return n.create(function(d){return h(["../SceneLayer"],d)})},BuildingSceneLayer:function(){return n.create(function(d){return h(["../BuildingSceneLayer"],d)})},IntegratedMeshLayer:function(){return n.create(function(d){return h(["../IntegratedMeshLayer"],d)})},StreamLayer:function(){return n.create(function(d){return h(["../StreamLayer"],d)})},TileLayer:function(){return n.create(function(d){return h(["../TileLayer"],d)})},UnknownLayer:function(){return n.create(function(d){return h(["../UnknownLayer"],
d)})},UnsupportedLayer:function(){return n.create(function(d){return h(["../UnsupportedLayer"],d)})},VectorTileLayer:function(){return n.create(function(d){return h(["../VectorTileLayer"],d)})},WebTileLayer:function(){return n.create(function(d){return h(["../WebTileLayer"],d)})},WMSLayer:function(){return n.create(function(d){return h(["../WMSLayer"],d)})},WMTSLayer:function(){return n.create(function(d){return h(["../WMTSLayer"],d)})},BingMapsLayer:function(){return n.create(function(d){return h(["../BingMapsLayer"],
d)})}}})},"esri/portal/support/layersCreator":function(){define("require exports ../../core/has ../../core/promiseUtils ../../layers/Layer ../../layers/support/lazyLayerLoader ../PortalItem ./mapNotesUtils ./portalLayers ../../renderers/support/styleUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b){function a(a,c,d){var e,g={};c.itemId&&(g.portalItem={id:c.itemId,portal:d.context.portal});e=new a(g);e.read(c,d.context);return b.loadStyleRenderer(e,d.context).then(function(){return f.resolve(e)})}function m(b,
c){return k(b,c).then(function(d){return a(d,b,c)})}function k(a,b){var d=b.context,f=q(d),h=a.layerType||a.type;!h&&b&&b.defaultLayerType&&(h=b.defaultLayerType);b=(b=f[h])?g.layerLookupMap[b]:g.layerLookupMap.UnknownLayer;if("Feature Collection"===a.type){if(a.itemId)return(new e({id:a.itemId,portal:d&&d.portal})).load().then(p.selectLayerClassPath).then(function(a){return g.layerLookupMap[a.className||"UnknownLayer"]}).then(function(a){return a()})}else"ArcGISFeatureLayer"===h&&c.isMapNotesLayer(a)&&
(b=g.layerLookupMap.MapNotesLayer);a.wmtsInfo&&(b=g.layerLookupMap.WMTSLayer);return b()}function q(a){switch(a.origin){case "web-scene":switch(a.layerContainerType){case "basemap":a=w;break;case "ground":a=r;break;default:a=t}break;default:switch(a.layerContainerType){case "basemap":a=B;break;default:a=z}}return a}function v(a,b,c){return b&&b.filter?c.then(function(a){var c=b.filter(a);return void 0===c?f.resolve(a):c instanceof l?f.resolve(c):c}):c}function u(a,b,c){if(!b)return[];for(var d=[],
e=[],g=0;g<b.length;g++){var h=b[g],k=m(h,c);d.push(k);e.push(null);if("GroupLayer"===h.layerType&&h.layers&&Array.isArray(h.layers)&&0<h.layers.length){h=h.layers.map(function(a){return m(a,c)});d.push.apply(d,h);for(var l=0;l<h.length;l++)e.push(k)}}var n={};return d.map(function(b,d){var g=function(a,b){n[b.id]=d;var c=a.findIndex(function(a){if(!a.id)return!1;a=n[a.id];return void 0===a?!1:d<a});0>c&&(c=void 0);a.add(b,c)};return v(a,c,b).then(function(b){if(null===e[d])g(a,b);else return e[d].then(function(a){g(a.layers,
b);return f.resolve(b)});return f.resolve(b)})})}Object.defineProperty(d,"__esModule",{value:!0});var t={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",
WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},r={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer"},w={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},
z={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",KML:"KMLLayer",WMS:"WMSLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",DefaultTileLayer:"TileLayer"},
B={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};d.createLayer=m;d.processLayer=v;d.populateLayers=u;d.populateOperationalLayers=
function(a,b,c){return u(a,b,c)}})},"esri/portal/support/mapNotesUtils":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.isMapNotesLayer=function(d){var f=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"];if((d=d.layers||d.featureCollection&&d.featureCollection.layers)&&Array.isArray(d))return d=d[0],d.layerDefinition&&Array.isArray(d.layerDefinition.fields)&&d.layerDefinition.fields.forEach(function(d){d=f.indexOf(d.name);-1<d&&f.splice(d,
1)}),f.length?!1:!0}})},"esri/portal/support/portalLayers":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Collection ../../core/Error ../../core/promiseUtils ../../layers/support/lazyLayerLoader ../PortalItem ./mapNotesUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b){function a(a){switch(a.type){case "Map Service":return k(a);case "Feature Service":return q(a);case "Feature Collection":return u(a);case "Scene Service":return v(a);case "Image Service":return t(a);
case "Stream Service":return{className:"StreamLayer"};case "Vector Tile Service":return{className:"VectorTileLayer"};case "KML":return{className:"KMLLayer"};case "WMTS":return{className:"WMTSLayer"};case "WMS":return{className:"WMSLayer"};default:return e.reject(new g("portal:unknown-item-type","Unknown item type '${type}'",{type:a.type}))}}function m(a){return(0,c.layerLookupMap[a.className])().then(function(b){return{constructor:b,properties:a.properties}})}function k(a){return r(a).then(function(a){return a?
{className:"TileLayer"}:{className:"MapImageLayer"}})}function q(a){return w(a).then(function(a){if("object"===typeof a){var b={outFields:["*"]};null!=a.id&&(b.layerId=a.id);return{className:"FeatureLayer",properties:b}}return{className:"GroupLayer"}})}function v(a){return w(a).then(function(b){if("object"===typeof b){var c={},d=void 0;null!=b.id?(c.layerId=b.id,d=a.url+"/layers/"+b.id):d=a.url;if(Array.isArray(a.typeKeywords)&&0<a.typeKeywords.length){b={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",
Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(var e=0,f=Object.keys(b);e<f.length;e++){var g=f[e];if(-1!==a.typeKeywords.indexOf(g))return{className:b[g]}}}return z(d).then(function(a){var b="SceneLayer",d={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};a&&a.layerType&&d[a.layerType]&&(b=d[a.layerType]);return{className:b,properties:c}})}return{className:"GroupLayer"}})}
function u(a){return a.load().then(function(){return a.fetchData()}).then(function(a){if(a&&Array.isArray(a.layers)){if(b.isMapNotesLayer(a))return{className:"MapNotesLayer"};if(1===a.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}})}function t(a){return r(a).then(function(b){var c=new l(a.typeKeywords);return b?c.find(function(a){return"elevation 3d layer"===a.toLowerCase()})?{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}})}function r(a){return z(a.url).then(function(a){return a.tileInfo})}
function w(a){return!a.url||a.url.match(/\/\d+$/)?e.resolve({}):a.load().then(function(){return a.fetchData()}).then(function(b){return b&&Array.isArray(b.layers)?1===b.layers.length?{id:b.layers[0].id}:!1:z(a.url).then(function(a){return a&&Array.isArray(a.layers)?1===a.layers.length?{id:a.layers[0].id}:!1:{}})})}function z(a){return f(a,{responseType:"json",query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(d,"__esModule",{value:!0});d.fromItem=function(b){!b.portalItem||
b.portalItem instanceof p||b.portalItem.constructor&&b.portalItem.constructor._meta||(b=n({},b,{portalItem:new p(b.portalItem)}));return b.portalItem.load().then(a).then(m).then(function(a){var c=n({portalItem:b.portalItem},a.properties);a=a.constructor;"esri.layers.FeatureLayer"===a.declaredClass&&(c.outFields=["*"]);return e.resolve(new a(c))})};d.selectLayerClassPath=a})},"esri/views/layers/LayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/HandleOwner ../../core/Identifiable ../../core/Logger ../../core/Promise ../../core/promiseUtils ../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a){return function(d){function e(a){a=d.call(this)||this;a.layer=null;a.parent=null;a.view=null;return a}n(e,d);e.prototype.initialize=function(){var a=this;this.addResolvingPromise(this.layer);this.when().catch(function(d){if("layerview:create-error"!==d.name){var e=a.layer&&a.layer.id||"no id",f=a.layer&&a.layer.title||"no title";c.getLogger(a.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+f+"', id: '"+e+"')",d);return b.reject(d)}})};
e.prototype.destroy=function(){this.layer=this.view=this.parent=null};Object.defineProperty(e.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(a){void 0===a?this._clearOverride("visible"):this._override("visible",
a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"fullOpacity",{get:function(){var a=this.get("layer.opacity"),a=null!=a?a:1,b=this.get("parent.fullOpacity");return a*(null!=b?b:1)},enumerable:!0,configurable:!0});e.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1};e.prototype.isUpdating=function(){return!1};f([a.property()],e.prototype,"layer",void 0);f([a.property()],e.prototype,"parent",void 0);
f([a.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],e.prototype,"suspended",null);f([a.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],e.prototype,"updating",null);f([a.property()],e.prototype,"view",void 0);f([a.property({dependsOn:["layer.visible"]})],e.prototype,"visible",null);f([a.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],e.prototype,"fullOpacity",null);return e=f([a.subclass("esri.views.layers.LayerView")],e)}(a.declared(g,
l,e.Identifiable,p))})},"esri/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(){for(var b=0;b<arguments.length;b++);b=c.call(this)||this;b.handles=new g;return b}n(d,c);d.prototype.destroy=function(){this.handles.destroy()};f([e.property({readOnly:!0})],d.prototype,"handles",void 0);return d=f([e.subclass("esri.core.HandleOwner")],
d)}(e.declared(l))})},"esri/views/View":function(){define("../Graphic ../core/Accessor ../core/Collection ../core/CollectionFlattener ../core/Evented ../core/Handles ../core/lang ../core/Logger ../core/Promise ../core/watchUtils ../core/promiseUtils ../core/scheduling ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ./LayerViewManager ./RefreshManager ./BasemapView ./GroundView ./support/DefaultsFromMap ./input/Input ./navigation/Navigation ./interactive/interactiveToolUtils".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v,u,t,r,w,z,B,A,x){var C=c.getLogger("esri.views.View");return d.createSubclass([p,l],{declaredClass:"esri.views.View",properties:{allLayerViews:{readOnly:!0},basemapView:{},animation:{},resizing:{},interacting:{},graphics:{type:n.ofType(h)},groundView:{},defaultsFromMap:z,heightModelInfo:{readOnly:!0,type:q,dependsOn:["map.heightModelInfo?","defaultsFromMap.heightModelInfo"]},initialExtent:{readOnly:!0,type:k,dependsOn:["defaultsFromMap.extent"]},initialExtentRequired:{},
layerViews:{type:n},map:{},ready:{readOnly:!0,dependsOn:"map spatialReference width height initialExtentRequired initialExtent defaultsFromMap.isSpatialReferenceDone defaultsFromMap.isTileInfoDone map.loaded?".split(" ")},size:{readOnly:!0,dependsOn:["width","height"],get:function(){return[this.width,this.height]}},spatialReference:{type:v,dependsOn:["defaultsFromMap.spatialReference","defaultsFromMap.vcsWkid","defaultsFromMap.latestVcsWkid"]},stationary:{dependsOn:["animation","interacting","resizing"]},
tools:{readOnly:!0,type:n},type:{},updating:{},padding:{},width:{},height:{},cursor:{},spatialReferenceWarningDelay:1E3,renderContext:{},suspended:!1,input:{readOnly:!0},navigation:{readOnly:!0}},constructor:function(a){this._viewHandles=new g;this._toolHandles=new g;this._viewHandles.add(this.watch("ready",function(a,b){this._currentSpatialReference=a?this.spatialReference:null;this.notifyChange("spatialReference");!a&&b&&this.layerViewManager.clear();!a&&b?this.tools.forEach(this._detachTool.bind(this)):
a&&!b&&this.whenReady().then(function(){this.tools.forEach(this._attachTool.bind(this))}.bind(this))}.bind(this)));this.allLayerViews=new f({root:this,rootCollectionNames:["basemapView.baseLayerViews","groundView.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return a.layerViews}});this.defaultsFromMap=new z({view:this});this.input=new B;this.navigation=new A},getDefaults:function(){return e.mixin(this.inherited(arguments),{layerViews:[],graphics:[],padding:{left:0,
top:0,right:0,bottom:0},tools:[]})},initialize:function(){var c=this.validate().then(function(){this._isValid=!0;this.notifyChange("ready");var c=function(){return b.whenOnce(this,"ready").then(function(){return a.after(0)}.bind(this)).then(function(){if(!this.ready)return c()}.bind(this))}.bind(this);return c()}.bind(this));this.addResolvingPromise(c);this.basemapView=new r({view:this});this.groundView=new w({view:this});this.layerViewManager=new u({view:this});this.refreshManager=new t({view:this});
this._resetInitialViewPropertiesFromContent();var d;b.init(this.defaultsFromMap,"isSpatialReferenceDone",function(b){var c=!!(this.map&&0<this.map.allLayers.length);b&&!this.spatialReference&&c||!d?b&&!this.spatialReference&&c&&!d&&(d=a.after(this.spatialReferenceWarningDelay),d.then(function(){C.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}).catch(function(){})):(d.cancel(),d=null)}.bind(this),!0);this._viewHandles.add(x.setupCollectionHandlers(this,
this._refreshToolCursorWatchers.bind(this)))},destroy:function(){this.destroyed||(this.tools.forEach(this._detachTool.bind(this)),this.basemapView.destroy(),this.groundView.destroy(),this.destroyLayerViews(),this.refreshManager.destroy(),this.defaultsFromMap.destroy(),this.defaultsFromMap=null,this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this._viewHandles.destroy(),this._toolHandles.destroy(),this.map=null)},destroyLayerViews:function(){this.layerViewManager.destroy()},
whenReady:function(){return a.resolve()},_viewHandles:null,_toolHandles:null,_isValid:!1,_readyCycleForced:!1,_userSpatialReference:null,_currentSpatialReference:null,activeTool:null,_activeToolSetter:function(a){a&&!this.ready?C.error("#activeTool\x3d","cannot set active tool while view is not ready"):x.swap(this,a)},tools:null,animation:null,basemapView:null,groundView:null,graphics:null,heightModelInfo:null,_heightModelInfoGetter:function(){return this.getDefaultHeightModelInfo()},interacting:!1,
layerViews:null,map:null,_mapSetter:function(a){var b=this._get("map");a!==b&&(a&&a.load&&a.load(),this._forceReadyCycle(),this._resetInitialViewPropertiesFromContent(),this._set("map",a))},padding:null,_readyGetter:function(){return!!(this._isValid&&!this._readyCycleForced&&this.map&&0!==this.width&&0!==this.height&&this.spatialReference&&(!this.map.load||this.map.loaded)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&
this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone&&this.isSpatialReferenceSupported(this.spatialReference))},spatialReference:null,_spatialReferenceGetter:function(){var a=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;a&&this.isHeightModelInfoRequired&&this.defaultsFromMap&&(a=a.clone(),a.vcsWkid=this.defaultsFromMap.vcsWkid,a.latestVcsWkid=this.defaultsFromMap.latestVcsWkid);return a},_spatialReferenceSetter:function(a){this._userSpatialReference=
a;this._set("spatialReference",a)},stationary:!0,_stationaryGetter:function(){return!this.animation&&!this.interacting&&!this.resizing},type:null,updating:!1,initialExtentRequired:!0,initialExtent:null,_initialExtentGetter:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent},cursor:"default",renderContext:null,input:null,navigation:null,whenLayerView:function(a){return this.layerViewManager.whenLayerView(a)},getDefaultSpatialReference:function(){return this.get("defaultsFromMap.spatialReference")},
getDefaultHeightModelInfo:function(){return this.get("map.supportsHeightModelInfo")&&this.get("map.heightModelInfo")||this.get("defaultsFromMap.heightModelInfo")||null},validate:function(){return a.resolve()},isSpatialReferenceSupported:function(){return!0},isTileInfoRequired:function(){return!1},when:function(a,b,c){this.isResolved()&&!this.ready&&C.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.');
return this.inherited(arguments)},_resetInitialViewPropertiesFromContent:function(){if(this.defaultsFromMap){var a=this.defaultsFromMap.start.bind(this.defaultsFromMap);this.defaultsFromMap.reset();this._currentSpatialReference=null;this.notifyChange("spatialReference");this._viewHandles.remove("defaultsFromMap");this._viewHandles.add([b.watch(this,"spatialReference",a),b.watch(this,"initialExtentRequired",a),m.schedule(a)],"defaultsFromMap")}},_forceReadyCycle:function(){this.ready&&(this._readyCycleForced=
!0,b.whenFalseOnce(this,"ready",function(){this._readyCycleForced=!1;this.notifyChange("ready")}.bind(this)),this.notifyChange("ready"))},_attachTool:function(a){x.attachTool(a,this._refreshToolCursorWatchers.bind(this))},_detachTool:function(a){x.detachTool(a,this._refreshToolCursorWatchers.bind(this))},_refreshToolCursorWatchers:function(){this._toolHandles.removeAll();this._setToolCursor();this.tools.forEach(function(a){a=b.watch(a,["cursor","visible"],this._setToolCursor.bind(this));this._toolHandles.add(a)}.bind(this))},
_setToolCursor:function(){this._clearOverride("cursor");for(var a=0;a<this.tools.length;a++){var b=this.tools.getItemAt(a);if(null!=b.cursor&&!1!==b.visible){this._override("cursor",b.cursor);break}}}})})},"esri/views/LayerViewManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Error ../core/Handles ../core/promiseUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./LayerViewFactory".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){return function(d){function h(){var a=d.call(this)||this;a._promisesMap=new Map;a._layerViewsMap=new Map;a._handles=new e;a.factory=new m;a.ready=!1;a.layersToLayerViews=function(){var a=new Map;a.set("view.map.basemap.baseLayers","view.basemapView.baseLayerViews");a.set("view.map.ground.layers","view.groundView.layerViews");a.set("view.map.layers","view.layerViews");a.set("view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews");return a}();a._doWork=
a._doWork.bind(a);a.refresh=a.refresh.bind(a);a._handles.add(b.init(a,"view.ready",function(b){return a.ready=b}));a._handles.add(a.watch(["view.map.basemap","view.map.ground","view.map.layers","ready"],a.refresh),"watcher");return a}n(h,d);h.prototype.destroy=function(){this._handles&&(this.clear(),this.view=null,this.factory.destroy(),this.factory=null,this._handles.destroy(),this._map=this._layerViewsMap=this._promisesMap=this._handles=null)};h.prototype.clear=function(){this.destroyed||(this._layerViewsMap.forEach(this._disposeLayerView,
this),this._promisesMap.forEach(function(a){return a.cancel()}),this._layerViewsMap.clear(),this._promisesMap.clear(),this._refreshCollections())};h.prototype.refresh=function(){var a=this._handles;a.remove("refresh");a.add(p.schedule(this._doWork),"refresh")};h.prototype.whenLayerView=function(a){this.refresh();this._doWork();return this._promisesMap.has(a)?this._promisesMap.get(a):c.reject(new g("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:a}))};h.prototype._doWork=
function(){var a=this,b=this._handles,c=this.get("view.map");this._map!==c&&(this.clear(),this._map=c);if(b.has("refresh")){b.remove("refresh");b.remove("collection-change");this.factory.paused=!this.ready;var d=this._map&&this._map.allLayers;d&&(d.forEach(this._createLayerView,this),this._refreshCollections(),this._promisesMap.forEach(function(b,c){d.includes(c)||a._disposeLayerView(a._layerViewsMap.get(c),c)}),b.add(d.on("change",this.refresh),"collection-change"))}};h.prototype._refreshCollections=
function(){var a=this;this.layersToLayerViews.forEach(function(b,c){a._populateLayerViewsOwners(a.get(c),a.get(b),a.view)})};h.prototype._populateLayerViewsOwners=function(a,b,c){var d=this;if(a&&b){var e=0;a.forEach(function(a){var f=d._layerViewsMap.get(a);f&&(f.layer=a,f.parent=c,b.getItemAt(e)!==f&&b.splice(e,0,f),a.layers&&d._populateLayerViewsOwners(a.layers,f.layerViews,f),e+=1)});e<b.length&&b.splice(e,b.length)}else b&&b.removeAll()};h.prototype._createLayerView=function(a){var b=this,c=
this.view,d=this.factory,e=this._layerViewsMap,f=this._promisesMap;e.has(a)?a.load():f.has(a)||(d=d.create(c,a).then(function(d){if(!b._map||!b._map.allLayers.some(function(b){return a===b}))throw new g("view:no-layerview-for-layer","The layer has been removed from the map",{layer:a});e.set(a,d);b._refreshCollections();a.emit("layerview-create",{view:c,layerView:d});c.emit("layerview-create",{layer:a,layerView:d});return d.when()}),f.set(a,d),d.then(this.refresh,this.refresh))};h.prototype._disposeLayerView=
function(a,b){if(this._promisesMap.has(b)&&(this._promisesMap.get(b).cancel(),this._promisesMap.delete(b),a)){b=a.layer;var c=a.view;this.factory.dispose(a);a.layer=a.parent=a.view=null;this._layerViewsMap.delete(b);b.emit("layerview-destroy",{view:c,layerView:a});c.emit("layerview-destroy",{layer:b,layerView:a})}};f([a.property()],h.prototype,"ready",void 0);f([a.property()],h.prototype,"view",void 0);return h=f([a.subclass("esri.views.LayerViewManager")],h)}(a.declared(l))})},"esri/views/LayerViewFactory":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/Deferred ../core/Accessor ../core/Collection ../core/Error ../core/Logger ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m){var k=p.getLogger("esri.views.LayerViewFactory");return function(d){function g(){var a=null!==d&&d.apply(this,arguments)||this;a.creationRequests=new e;a.paused=!0;return a}n(g,d);g.prototype.initialize=function(){var b=this;a.whenFalse(this,"paused",function(){b.creationRequests.toArray().forEach(b._processRequest,b)},!0)};g.prototype.destroy=function(){this.creationRequests.drain(function(a){return a.deferred.cancel(void 0)})};Object.defineProperty(g.prototype,
"working",{get:function(){return 0<this.creationRequests.length},enumerable:!0,configurable:!0});g.prototype.create=function(a,b){var d=this.getLayerViewPromise(b);if(d)return d;var e=this.creationRequests,f={deferred:new l(function(){var a=new c("cancelled:layerview-create","layerview creation cancelled",{layer:b});e.remove(f);f.creationPromise&&f.creationPromise.cancel(a);return a}),view:a,layer:b,started:!1,creationPromise:null};e.push(f);this.paused?b.load():this._processRequest(f);return f.deferred.promise};
g.prototype.dispose=function(a){a.layer.destroyLayerView(a)};g.prototype.getLayerViewPromise=function(a){var b=this.creationRequests&&this.creationRequests.find(function(b){return b.layer===a});return b&&b.deferred.promise};g.prototype._processRequest=function(a){var d=this;if(!a.started){a.started=!0;var e=a.deferred,f=a.layer,g=a.view;f&&"importLayerViewModule"in f&&f.importLayerViewModule(g);f.load().then(function(b){if(!e.isCanceled())return a.creationPromise=b.createLayerView(g),a.creationPromise}).then(function(c){return e.isCanceled()?
c:a.creationPromise=b.when(c.when())}).catch(function(a){e.isCanceled()||(k.error("Failed to create view for layer '"+f.title+", id:"+f.id+"' of type '"+f.type+"'.",{error:a}),e.reject(new c("layerview:create-error","layerview creation failed",{layer:f,error:a})))}).then(function(b){d.creationRequests&&d.creationRequests.remove(a);e.isFulfilled()?b&&d.dispose(b):e.resolve(b);return b})}};f([m.property()],g.prototype,"creationRequests",void 0);f([m.property()],g.prototype,"paused",void 0);f([m.property()],
g.prototype,"view",void 0);f([m.property({dependsOn:["paused","creationRequests.length"],readOnly:!0})],g.prototype,"working",null);return g=f([m.subclass("esri.views.LayerViewFactory")],g)}(m.declared(g))})},"esri/views/RefreshManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Handles ../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(){var b=null!==c&&c.apply(this,
arguments)||this;b._handles=new g;b._currentTick=0;return b}n(d,c);d.prototype.initialize=function(){var b=this;this.view.allLayerViews.on("after-changes",function(){b.notifyChange("tickInterval");b._handles.remove("layerViewsUpdating");b._handles.add(b._getLayerViewHandles(),"layerViewsUpdating")});this.watch("tickInterval",function(){return b._restartTicking()});this.watch("view.ready",function(){return b._restartTicking()});this._restartTicking()};d.prototype.destroy=function(){this._handles&&
(this._handles.destroy(),this._handles=null,this._intervalID&&clearInterval(this._intervalID),this._currentTick=0)};Object.defineProperty(d.prototype,"tickInterval",{get:function(){var b=this.view.allLayerViews.filter(function(a){return!!a.refresh});return this._getCommonInterval(b)},enumerable:!0,configurable:!0});d.prototype._restartTicking=function(){var b=this;this._currentTick=0;this._intervalID&&clearInterval(this._intervalID);this.get("view.ready")&&this.tickInterval&&(this._intervalID=setInterval(function(){var a=
Date.now();b._currentTick+=b.tickInterval;b.view.allLayerViews.forEach(function(c){if(c.refresh){var d=Math.round(6E4*c.refreshInterval),e=0===b._currentTick%d,f=6E3>a-c.refreshTimestamp;d&&e&&!f&&c.refresh(a)}})},this.tickInterval))};d.prototype._getLayerViewHandles=function(){var b=this,a=[],c=function(){return b.notifyChange("tickInterval")};this.view.allLayerViews.forEach(function(b){b.refresh&&b.layer&&a.push(b.watch("refreshInterval",c),b.layer.on("refresh",function(){b.refresh(Date.now())}))});
return a};d.prototype._getCommonInterval=function(b){var a=function(b,c){return isNaN(b)||isNaN(c)?0:0>=c?b:a(c,b%c)};return b.toArray().reduce(function(b,c){return a(Math.round(6E4*c.refreshInterval),b)},0)};f([e.property()],d.prototype,"view",void 0);f([e.property({readOnly:!0})],d.prototype,"tickInterval",null);return d=f([e.subclass("esri.views.RefreshManager")],d)}(e.declared(l))})},"esri/views/BasemapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/watchUtils ../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g,e,c){return function(d){function b(a){a=d.call(this)||this;a.view=null;a.baseLayerViews=new g;a.referenceLayerViews=new g;a._loadingHdl=e.init(a,"view.map.basemap",function(a){a&&a.load()});return a}n(b,d);b.prototype.destroy=function(){this._set("view",null);this._loadingHdl&&(this._loadingHdl.remove(),this._loadingHdl=null)};Object.defineProperty(b.prototype,"suspented",{get:function(){return this.view?this.view.suspended:!0},enumerable:!0,configurable:!0});f([c.property({constructOnly:!0})],
b.prototype,"view",void 0);f([c.property({readOnly:!0})],b.prototype,"baseLayerViews",void 0);f([c.property({readOnly:!0})],b.prototype,"referenceLayerViews",void 0);f([c.property({dependsOn:["view.suspended"]})],b.prototype,"suspented",null);return b=f([c.subclass("esri.views.BasemapView")],b)}(c.declared(l))})},"esri/views/GroundView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./support/GroundViewElevationSampler".split(" "),
function(h,d,n,f,l,g,e,c,p,b){return function(a){function d(b){b=a.call(this)||this;b.handles=new e;b.view=null;b.layerViews=new g;return b}n(d,a);d.prototype.initialize=function(){var a=this;this.handles.add(c.when(this,"view.map.ground",function(a){return a.load()}));this.handles.add(this.layerViews.on("after-changes",function(){return a.layerViewsAfterChangesHandler()}))};d.prototype.destroy=function(){this._set("view",null);this.handles&&(this.handles.destroy(),this.handles=null)};Object.defineProperty(d.prototype,
"elevationSampler",{get:function(){return this.view&&"2d"!==this.view.type&&this.view.ready&&this.view.basemapTerrain&&this.view.basemapTerrain.ready?new b({view:this.view}):null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updating",{get:function(){return this.suspended?!1:this.layerViews.some(function(a){return a.updating})},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"suspended",{get:function(){return!this.view||this.view.suspended},enumerable:!0,configurable:!0});
d.prototype.layerViewsAfterChangesHandler=function(){var a=this;this.handles.remove("updating");this.handles.add(this.layerViews.map(function(b){return b.watch("updating",function(){return a.updateUpdating()},!0)}).toArray(),"updating");this.updateUpdating()};d.prototype.updateUpdating=function(){this.notifyChange("updating")};f([p.property({readOnly:!0,dependsOn:["view.ready","view.basemapTerrain?.ready"]})],d.prototype,"elevationSampler",null);f([p.property({type:Boolean,dependsOn:["suspended"],
readOnly:!0})],d.prototype,"updating",null);f([p.property({constructOnly:!0})],d.prototype,"view",void 0);f([p.property({type:g,readOnly:!0})],d.prototype,"layerViews",void 0);f([p.property({readOnly:!0,dependsOn:["view.suspended"]})],d.prototype,"suspended",null);return d=f([p.subclass("esri.views.GroundView")],d)}(p.declared(l))})},"esri/views/support/GroundViewElevationSampler":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/aaBoundingRect ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../layers/support/ElevationSampler ../3d/terrain/TerrainConst".split(" "),
function(h,d,n,f,l,g,e,c,p,b,a,m,k){var q=e.getLogger("esri.views.support.GroundViewElevationSampler");return function(d){function e(a){a=d.call(this,a)||this;a.demResolution={min:-1,max:-1};a.noDataValue=k.noDataValueOpt.noDataValue;return a}n(e,d);e.prototype.initialize=function(){var a=this;this.view.basemapTerrain.on("elevation-change",function(){return a.emit("changed",{})})};Object.defineProperty(e.prototype,"extent",{get:function(){var a=this.view.basemapTerrain;return a.extent&&a.spatialReference?
p.toExtent(a.extent,a.spatialReference):null},enumerable:!0,configurable:!0});e.prototype.elevationAt=function(c){var d=c.spatialReference,e=this.spatialReference;if(!a.canProject(d,e))return q.error("Cannot sample elevation at a location with spatial reference ("+(d?d.wkid:"unknown")+") different from the view ("+e.wkid+")"),null;b.extentContainsPoint(this.extent,c)||(d=this.extent,q.warn("#elevationAt()","Point used to sample elevation ("+c.x+", "+c.y+") is outside of the sampler extent ("+(d.xmin+
", "+d.ymin+", "+d.xmax+", "+d.ymax)+")"));return this.view.basemapTerrain.getElevation(c)};e.prototype.queryElevation=function(a){return m.updateGeometryElevation(a.clone(),this)};f([c.property({readOnly:!0})],e.prototype,"demResolution",void 0);f([c.property({readOnly:!0,dependsOn:["view.basemapTerrain.extent","view.basemapTerrain.spatialReference"]})],e.prototype,"extent",null);f([c.property({readOnly:!0})],e.prototype,"noDataValue",void 0);f([c.property({readOnly:!0,aliasOf:"view.basemapTerrain.spatialReference"})],
e.prototype,"spatialReference",void 0);f([c.property({constructOnly:!0})],e.prototype,"view",void 0);return e=f([c.subclass("esri.views.support.GroundViewElevationSampler")],e)}(c.declared(l,g))})},"esri/views/3d/terrain/TerrainConst":function(){define(["require","exports","../../../geometry/support/aaBoundingRect","./TilingScheme"],function(h,d,n,f){Object.defineProperty(d,"__esModule",{value:!0});(function(d){d[d.MAP=0]="MAP";d[d.ELEVATION=1]="ELEVATION";d[d.COUNT=2]="COUNT"})(d.LayerClass||(d.LayerClass=
{}));(function(d){d[d.NONE=0]="NONE";d[d.SPLIT=1]="SPLIT";d[d.VSPLITMERGE=2]="VSPLITMERGE";d[d.MERGE=4]="MERGE";d[d.DECODE_ELEVATION=8]="DECODE_ELEVATION";d[d.UPDATE_GEOMETRY=16]="UPDATE_GEOMETRY";d[d.UPDATE_TEXTURE=32]="UPDATE_TEXTURE"})(d.TileUpdateTypes||(d.TileUpdateTypes={}));d.TILE_LOADING_DEBUGLOG=!1;d.MAX_ROOT_TILES=64;d.MAX_TILE_TESSELATION=512;d.ELEVATION_NODATA_VALUE=3.40282347E38/10;d.noDataValueOpt={noDataValue:d.ELEVATION_NODATA_VALUE};d.ELEVATION_DESIRED_RESOLUTION_LEVEL=4;d.TILEMAP_SIZE_EXP=
5;d.TILEMAP_SIZE=1<<d.TILEMAP_SIZE_EXP;d.WEBMERCATOR_WORLD_EXTENT=n.create();f.WebMercatorAuxiliarySphere.getExtent(0,0,0,d.WEBMERCATOR_WORLD_EXTENT);d.GEOGRAPHIC_WORLD_EXTENT=n.create([-180,-90,180,90]);d.TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR="Cannot extend surface to encompass all layers because it would result in too many root tiles.";d.TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR="Surface extent is too large for tile resolution at level 0.";d.DEFAULT_TILE_BACKGROUND="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA2JJREFUeNrs3d1O20AQgFFvRJInQLQBhHj/h0JVW34El1yQ2F73DVq3jTys55zrqUBbPrErZUSZ+vcOsto4AjK76Lqu1vr8+G3mPzjc3D/+eJj/Bcz/cd75R80fbu79BsAVCAQAAgABgABAACAAEAAIAAQAAgABQPOKfQAy83Ho+HnnHzXv49B4A4AAQAAgABAACAAEAAIAAYAAQAAgABAANM4+AKnZB4ifd/5R8/YB8AYAAYAAQAAgABAACAAEAAIAAYAAQAAgAGicfQBSsw8QP+/8o+btA+ANAAIAAYAAQAAgABAACAAEAAIAAYAAQADQOPsApGYfIH7e+UfN2wfAGwAEAAIAAYAAQAAgABAACAAEAAIAAXA201QdggAggH0AUrMPED8/jsPL03fns/y8fQC8AUAAIAAQAAgABAACAAGAAEAAIAAQAAgAGmcfgNTsA8TP2weImrcPgDcACAAEAAIAAYAAQAAgABAACAAEAAIAAUDj7AOQmn2A+Hn7AFHz9gHwBgABgABAACAAEAAIAAQAAgABgABgNS4cAf9pu9u3O1+m/n2aplKK/0j+TX86/tVP5+eZ3+729gFIfwWyDxA7bx8gat4+ANkJAAGAAEAAIAAQAAgABAACAAGAAEAAIABonn0AUrMPED9vHyBq3j4A3gAgABAACAAEAAIAAYAAQAAgABAA51VrdQgCAAHAsuwDkJp9gPj5vj+9vvx0PsvP2wfAGwAEAAIAAYAAQAAgABAACAAEAAIAAYAAoHH2AUjNPkD8vH2AqHn7AHgDgABAACAAEAAIAAQAAgABgABAACAAEAA0zj4AqdkHiJ+3DxA1bx8AbwAQACQ0DL0AyKuOowBwBYKUSikCIHUBAsAVCAQAAgABgABAALBy9gFIzT5A/Lx9gKj5y6trVyC8AUAAIAAQAAgAVq90Pg5N5gA2AsAVCAQAAgABgABAALB29gFIzT5A/Lx9gKj5q6+3rkB4A4AAQAAgABAACADWzB/IIHsCAsAVCARAlKlWhyAAEAAIABZjH4DU7APEz5+OH2+vT85n+fkvhztXILwBQAAgABAACAAEAGtWigBIHcBGALgCgQBAACAAyPMO9nHosxuHodZx5vB2t691HIdh/nx/Os7/Zsz/fvgXAAAA//8DAF1P1hM2ICMfAAAAAElFTkSuQmCC"})},
"esri/views/3d/terrain/TilingScheme":function(){define("require exports ../../../geometry ../../../core/Error ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ../../../geometry/support/scaleUtils ../../../layers/support/TileInfo ../support/mathUtils ../support/projectionUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b){var a=b.webMercator.x2lon,m=b.webMercator.y2lat;h=function(){function b(a){var c=b._checkUnsupported(a);if(c)throw c;this.spatialReference=a.spatialReference;
this._isWebMercator=this.spatialReference.isWebMercator;this._isWGS84=this.spatialReference.isWGS84;this.origin=[a.origin.x,a.origin.y];this.pixelSize=[a.size[0],a.size[1]];this.dpi=a.dpi;var d=a.lods.reduce(function(a,b,c){b.level<a.min&&(a.min=b.level,a.minIndex=c);a.max=Math.max(a.max,b.level);return a},{min:Infinity,minIndex:0,max:-Infinity}),e=a.lods[d.minIndex],f=Math.pow(2,e.level),c=e.resolution*f,e=e.scale*f;this.levels=Array(d.max+1);for(d=0;d<this.levels.length;d++)this.levels[d]={resolution:c,
scale:e,tileSize:[c*a.size[0],c*a.size[1]]},c/=2,e/=2}b.prototype.clone=function(){return new b(this.toTileInfo())};b.prototype.toTileInfo=function(){return new c({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:this.pixelSize,spatialReference:this.spatialReference,lods:this.levels.map(function(a,b){return{level:b,scale:a.scale,resolution:a.resolution}})})};b.prototype.getExtent=function(b,c,d,e,f){void 0===e&&(e=g.create());var h=this.levels[b];
b=h.tileSize[0];h=h.tileSize[1];e[0]=this.origin[0]+d*b;e[2]=e[0]+b;e[3]=this.origin[1]-c*h;e[1]=e[3]-h;f&&(this._isWebMercator?(f[0]=a(e[0]),f[1]=m(e[1]),f[2]=a(e[2]),f[3]=m(e[3])):this._isWGS84&&(f[0]=p.deg2rad(e[0]),f[1]=p.deg2rad(e[1]),f[2]=p.deg2rad(e[2]),f[3]=p.deg2rad(e[3])));return e};b.prototype.getExtentGeometry=function(a,b,c,d){void 0===d&&(d=new n.Extent);this.getExtent(a,b,c,k);d.spatialReference=this.spatialReference;d.xmin=k[0];d.ymin=k[1];d.xmax=k[2];d.ymax=k[3];d.zmin=void 0;d.zmax=
void 0;return d};b.prototype.ensureMaxLod=function(a){for(;this.levels.length<=a;){var b=this.levels[this.levels.length-1],c=b.resolution/2;this.levels.push({resolution:c,scale:b.scale/2,tileSize:[c*this.pixelSize[0],c*this.pixelSize[1]]})}};b.prototype.capMaxLod=function(a){this.levels.length>a+1&&(this.levels.length=a+1)};b.prototype.getMaxLod=function(){return this.levels.length-1};b.prototype.scaleAtLevel=function(a){return this.levels[0].scale/Math.pow(2,a)};b.prototype.levelAtScale=function(a){var b=
this.levels[0].scale;return a>=b?0:Math.log(b/a)*Math.LOG2E};b.prototype.resolutionAtLevel=function(a){return this.levels[0].resolution/Math.pow(2,a)};b.prototype.compatibleWith=function(a){if(!(a instanceof b)){if(b._checkUnsupported(a))return!1;a=new b(a)}if(!a.spatialReference.equals(this.spatialReference)||a.pixelSize[0]!==this.pixelSize[0]||a.pixelSize[1]!==this.pixelSize[1])return!1;var c=Math.min(this.levels.length,a.levels.length)-1,d=this.levels[c].resolution,e=.5*d;if(!p.floatEqualAbsolute(a.origin[0],
this.origin[0],e)||!p.floatEqualAbsolute(a.origin[1],this.origin[1],e))return!1;e=.5*d/Math.pow(2,c)/Math.max(this.pixelSize[0],this.pixelSize[1])*12;return p.floatEqualAbsolute(d,a.levels[c].resolution,e)};b.prototype.rootTilesInExtent=function(a,c,d){var e=this.levels[0].tileSize;if(0===e[0]||0===e[1])return[];b.computeRowColExtent(a,e,this.origin,k);a=k[1];var f=k[3],g=k[0],h=k[2],l=h-g,m=f-a;l*m>d&&(d=Math.floor(Math.sqrt(d)),m>d&&(a=a+Math.floor(.5*m)-Math.floor(.5*d),f=a+d),l>d&&(g=g+Math.floor(.5*
l)-Math.floor(.5*d),h=g+d));d=Array((h-g)*(f-a));l=0;for(m=a;m<f;m++)for(var n=g;n<h;n++)d[l++]=[0,m,n];c&&(c[0]=this.origin[0]+g*e[0],c[1]=this.origin[1]-f*e[1],c[2]=this.origin[0]+h*e[0],c[3]=this.origin[1]-a*e[1]);return d};b.computeRowColExtent=function(a,b,c,d){var e=.001*(a[2]-a[0]+(a[3]-a[1]));d[0]=Math.floor((a[0]+e-c[0])/b[0]);d[2]=Math.ceil((a[2]-e-c[0])/b[0]);d[1]=Math.floor((c[1]-a[3]+e)/b[1]);d[3]=Math.ceil((c[1]-a[1]-e)/b[1])};b.isPowerOfTwo=function(a){a=a.lods;var b=a[0].resolution*
Math.pow(2,a[0].level);return!a.some(function(a){return!p.floatEqualRelative(a.resolution,b/Math.pow(2,a.level))})};b.hasGapInLevels=function(a){a=a.lods.map(function(a){return a.level});a.sort(function(a,b){return a-b});for(var b=1;b<a.length;b++)if(a[b]!==a[0]+b)return!0;return!1};b.tileSizeSupported=function(a){var b=a.size[1];return b===a.size[0]&&0===(b&b-1)&&128<=b&&512>=b};b._checkUnsupported=function(a){return a?1>a.lods.length?new f("tilingscheme:generic","Tiling scheme must have at least one level"):
b.isPowerOfTwo(a)?null:new f("tilingscheme:power-of-two","Tiling scheme must be power of two"):new f("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")};b.checkUnsupported=function(a){var c=b._checkUnsupported(a);return c?c:b.hasGapInLevels(a)?new f("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):b.tileSizeSupported(a)?null:new f("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]")};b.fromExtent=
function(a,d){var f=a[2]-a[0],g=a[3]-a[1],h=e.getMetersPerUnitForSR(d),k=1.2*Math.max(f,g);a=new b(new c({size:[256,256],origin:{x:a[0]-.5*(k-f),y:a[3]+.5*(k-g)},lods:[{level:0,resolution:k/256,scale:1/(256/96*.0254/(k*h))}],spatialReference:d}));a.ensureMaxLod(20);return a};b.makeWebMercatorAuxiliarySphere=function(a){void 0===a&&(a=19);var c=new b(b.WebMercatorAuxiliarySphereTileInfo);c.ensureMaxLod(a);return c};b.makeWGS84WithTileSize=function(a,d){void 0===d&&(d=16);var e=256/a;a=new b(new c({size:[a,
a],origin:{x:-180,y:90,spatialReference:l.WGS84},spatialReference:l.WGS84,lods:[{level:0,resolution:.703125*e,scale:2.95497598570834E8*e}]}));a.ensureMaxLod(d);return a};b.WebMercatorAuxiliarySphereTileInfo=new c({size:[256,256],origin:{x:-2.0037508342787E7,y:2.0037508342787E7,spatialReference:l.WebMercator},spatialReference:l.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:5.91657527591555E8}]});b.WebMercatorAuxiliarySphere=b.makeWebMercatorAuxiliarySphere(19);return b}();var k=g.create();
return h})},"esri/views/support/DefaultsFromMap":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/arrayUtils ../../core/Handles ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/heightModelInfoUtils ../../geometry/support/webMercatorUtils ../../portal/support/geometryServiceUtils".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k){function q(a){return a?JSON.stringify(a.toJSON()):
"undefined"}function v(a){switch(a){case 0:return"Waiting";case 1:return"Found";case 2:return"Exhausted"}return"Unknown: "+a}var u=c.getLogger("esri.views.support.DefaultsFromMap");return function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a._handles=new e;a._waitTask=null;a._isStarted=!1;a._spatialReferenceCandidates=null;a._extentCandidates=null;a.logDebugInformation=!1;a.isSpatialReferenceDone=!1;a.isTileInfoDone=!1;a.isHeightModelInfoSearching=!1;a.spatialReference=null;a.extent=
null;a.heightModelInfo=null;a.vcsWkid=null;a.latestVcsWkid=null;a.mapCollectionPaths=h.DefaultMapCollectionPaths.slice();a.tileInfo=null;return a}n(d,c);h=d;d.prototype.initialize=function(){var a=this;this.watch("mapCollectionPaths",function(){a._isStarted&&(a.reset(),a.start())})};d.prototype.destroy=function(){this._set("view",null);this._handles&&(this._handles.destroy(),this._handles=null,this._isStarted=!1);this._cancelLoading()};d.prototype.reset=function(){this._handles.removeAll();this._isStarted=
!1;this._set("isSpatialReferenceDone",!1);this._set("isTileInfoDone",!1);this._set("isHeightModelInfoSearching",!1);this._set("spatialReference",null);this._set("extent",null);this._set("heightModelInfo",null);this._set("vcsWkid",null);this._set("latestVcsWkid",null);this._set("tileInfo",null);this._extentCandidates=this._spatialReferenceCandidates=null};d.prototype.start=function(){this._handles.removeAll();this._isStarted=!0;for(var a=this._updateLayerChange.bind(this),b=0,c=this.mapCollectionPaths;b<
c.length;b++)this._handles.add(p.on(this.view,"map."+c[b],"change",a,a,a,!0))};d.prototype._ownerNameFromCollectionName=function(a){var b=a.lastIndexOf(".");return-1===b?"view":"view."+a.slice(0,b)};d.prototype._ensureLoadedOwnersFromCollectionName=function(a){for(var b=this._ownerNameFromCollectionName(a).split("."),c,d=0;d<b.length;d++){c=this.get(b.slice(0,d+1).join("."));if(!c)break;if(c.load&&!c.isFulfilled())return{collectionName:a,owner:null,loading:c.load()}}return{collectionName:a,owner:c}};
d.prototype._cancelLoading=function(){this._waitTask=null;this._extentProjectTask&&(this._extentProjectTask.cancel(),this._extentProjectTask=null)};d.prototype._updateWhen=function(a){var b=this,c=!0,d=!1,e=a.catch(function(a){}).then(function(){c?d=!0:e===b._waitTask&&b._update()}),c=!1;d||(this._waitTask=e);return d};d.prototype._updateLayerChange=function(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1);this._update()};d.prototype._update=function(){var b=
this;this._cancelLoading();if(this.view){if(!this.isSpatialReferenceDone){this._debugLog("Starting search for spatial reference...");var c=this._processMapCollections(function(a){return b._processSpatialReferenceSource(a)});this._debugLog("Search ended with status '"+v(c)+"'");if(0!==c){var d=null,c=this._spatialReferenceCandidates;!c||1>c.length?(d=this.defaultSpatialReference,this._debugLog("No spatial reference found, locking to default ("+q(d)+")")):(this.defaultSpatialReference&&1<c.length&&
-1<g.findIndex(c,function(a){return a.equals(b.defaultSpatialReference)})&&(c=[this.defaultSpatialReference]),d=c[0],this._debugLog("Locking to "+q(d)));this._set("spatialReference",d);this._set("isSpatialReferenceDone",!0);d&&(c=this.logDebugInformation,this.logDebugInformation=!1,this._processMapCollections(function(a){return b._findExtent(a,d)}),this.extent||this._projectExtentCandidate(),this.logDebugInformation=c)}}null==this.heightModelInfo&&this.view.isHeightModelInfoRequired&&(this._debugLog("Starting search for height model info..."),
c=this._processMapCollections(function(a){return b._processHeightModelInfoSource(a)},function(b){return a.mayHaveHeightModelInfo(b)}),this._debugLog("Search ended with status "+v(c)),this._set("isHeightModelInfoSearching",0===c));null==this.tileInfo&&(c=!1,this.view.isTileInfoRequired()&&(c=this._deriveTileInfo()),c||this._set("isTileInfoDone",!0))}};d.prototype._processMapCollections=function(a,b){var c=this;this._preloadMapCollections(b);var d=2;this._forAllMapCollectionSources(function(a){if(2!==
d)return!1;c._debugLog("Processing collection "+a.collectionName+"...");if(a.loading&&!c._updateWhen(a.loading))return c._debugLog("Collection "+a.collectionName+" owner is loading -\x3e wait"),d=0,!1},function(e){if(2!==d)return!1;if(null==b||b(e)){if(e.load&&!e.isFulfilled()&&!c._updateWhen(e.load()))return c._debugLog("Source "+e.id+" is loading -\x3e wait"),d=0,!1;if((!e.load||e.isResolved())&&a(e))return d=1,!1}else return c._debugLog("Source "+e.id+" is skipped due to predicate"),!1});return d};
d.prototype._preloadMapCollections=function(a){var b=this,c=10,d=this.logDebugInformation;this.logDebugInformation=!1;this._forAllMapCollectionSources(function(a){return!0},function(e){if(0===c||null!=a&&!a(e))return!1;e.load&&!e.isFulfilled()&&(b.logDebugInformation=d,b._debugLog("Pre-loading source "+e.id),b.logDebugInformation=!1,e.load(),c--)});this.logDebugInformation=d};d.prototype._forAllMapCollectionSources=function(a,b){for(var c=0,d=this.mapCollectionPaths;c<d.length;c++){var e="map."+d[c],
f=this._ensureLoadedOwnersFromCollectionName(e);!1!==a(f)&&(f=f.owner,!f||f.isRejected&&f.isRejected()?this._debugLog("Collection "+e+" owner is invalid or rejected -\x3e skip"):(f=this.view.get(e))?this._forEachSource(f,b):this._debugLog("Collection "+e+" does not exist -\x3e skip"))}};d.prototype._forEachSource=function(a,b){var c=0;for(a=a.items;c<a.length;c++){var d=a[c];!1!==b(d)&&d.layers&&this._forEachSource(d.layers,b)}};d.prototype._processSpatialReferenceSource=function(a){var b=this._getSupportedSpatialReferences(a);
if(0===b.length)return!1;this._spatialReferenceCandidates?(b=g.intersect(b,this._spatialReferenceCandidates,function(a,b){return a.equals(b)}),0<b.length?this._spatialReferenceCandidates=b:this._debugLog("Layer "+a.id+" is ignored because its supported spatial\n          references are not compatible with the previous candidates")):this._spatialReferenceCandidates=b;return 1===this._spatialReferenceCandidates.length};d.prototype._findExtent=function(a,b){var c=a.fullExtents||(a.fullExtent?[a.fullExtent]:
[]),d=g.find(c,function(a){return a.spatialReference.equals(b)});if(d)return this._set("extent",d),!0;0<this._getSupportedSpatialReferences(a).length&&(c=c.map(function(b){return{extent:b,layer:a}}),this._extentCandidates=(this._extentCandidates||[]).concat(c));return!1};d.prototype._projectExtentCandidate=function(){var a=this;if(this._extentCandidates&&this._extentCandidates.length){var b=this.spatialReference,c=g.find(this._extentCandidates,function(a){return m.canProject(a.extent.spatialReference,
b)});c?this._set("extent",m.project(c.extent,b)):(c=this._extentCandidates[0],this._extentProjectTask=k.projectGeometry(c.extent,b,c.layer.portalItem).then(function(b){a._set("extent",b)}))}};d.prototype._getSupportedSpatialReferences=function(a){var b=this,c=a.supportedSpatialReferences||(a.spatialReference?[a.spatialReference]:[]);if(0===c.length)return this._debugLog("Layer "+a.id+" is ignored because it does not have any spatial references"),[];c=c.filter(function(c){return b.view.isSpatialReferenceSupported(c,
a,function(a){return b._debugLog(a)})});0===c.length?this._debugLog("Layer "+a.id+" has spatial references but none of them are supported (or layer doesn't require locking)"):this._debugLog("Layer "+a.id+" has spatial references. Resulting candidate set: "+c.map(q).join(", "));return c};d.prototype._processHeightModelInfoSource=function(b){var c=a.deriveHeightModelInfoFromLayer(b);return c?(this._set("heightModelInfo",c),this._set("isHeightModelInfoSearching",!1),b.spatialReference&&(this._set("vcsWkid",
b.spatialReference.vcsWkid),this._set("latestVcsWkid",b.spatialReference.latestVcsWkid)),!0):!1};d.prototype._deriveTileInfo=function(){if(!this.isSpatialReferenceDone)return!0;var a=this.get("view.map");if(!a)return!0;var b=a.basemap,c=b&&b.get("baseLayers.0"),a=a.get("layers.0"),d=!1,e=null;b&&"failed"!==b.loadStatus?b.loaded?c&&"failed"!==c.loadStatus?c.loaded?e=c.tileInfo:(this._updateWhen(c.load()),d=!0):a&&"failed"!==a.loadStatus?a.loaded?e=a.tileInfo:(this._updateWhen(a.load()),d=!0):d=!0:
(this._updateWhen(b.load()),d=!0):a&&"failed"!==a.loadStatus&&(a.loaded?e=a.tileInfo:(this._updateWhen(a.load()),d=!0));e&&!e.spatialReference.equals(this.spatialReference)&&(e=null);d||this._set("tileInfo",e);return d};d.prototype._debugLog=function(a){this.logDebugInformation&&u.info(a)};var h;d.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"];f([b.property()],d.prototype,"logDebugInformation",void 0);f([b.property({readOnly:!0})],d.prototype,"isSpatialReferenceDone",
void 0);f([b.property({readOnly:!0})],d.prototype,"isTileInfoDone",void 0);f([b.property({readOnly:!0})],d.prototype,"isHeightModelInfoSearching",void 0);f([b.property({constructOnly:!0})],d.prototype,"view",void 0);f([b.property({readOnly:!0})],d.prototype,"spatialReference",void 0);f([b.property({readOnly:!0})],d.prototype,"extent",void 0);f([b.property({readOnly:!0})],d.prototype,"heightModelInfo",void 0);f([b.property({readOnly:!0})],d.prototype,"vcsWkid",void 0);f([b.property({readOnly:!0})],
d.prototype,"latestVcsWkid",void 0);f([b.property()],d.prototype,"mapCollectionPaths",void 0);f([b.property()],d.prototype,"defaultSpatialReference",void 0);f([b.property({readOnly:!0})],d.prototype,"tileInfo",void 0);return d=h=f([b.subclass("esri.views.support.DefaultsFromMap")],d)}(b.declared(l))})},"esri/geometry/support/heightModelInfoUtils":function(){define("require exports ../../core/compilerUtils ../../core/Error ../HeightModelInfo ../../layers/support/arcgisLayerUrl".split(" "),function(h,
d,n,f,l,g){function e(a,b,d){if(c(a)&&c(b)){if(null==a||null==b)return 0;if(d||a.heightUnit===b.heightUnit){if(a.heightModel!==b.heightModel)return 2;switch(a.heightModel){case "gravity-related-height":return 0;case "ellipsoidal":return a.vertCRS===b.vertCRS?0:3;default:return 4}}else return 1}else return 4}function c(a){return null==a||null!=a.heightModel&&null!=a.heightUnit}function p(a){var c=a.url&&g.parse(a.url);return null==(a.spatialReference&&a.spatialReference.vcsWkid)&&c&&"ImageServer"===
c.serverType||!a.heightModelInfo?b(a)?l.deriveUnitFromSR(k,a.spatialReference):null:a.heightModelInfo}function b(b){return a(b)?!!(b.capabilities&&b.capabilities.data&&b.capabilities.data.supportsZ):m(b)}function a(a){switch(a.type){case "feature":case "csv":case "stream":return!0;default:return!1}}function m(a){switch(a.type){case "building-scene":case "elevation":case "integrated-mesh":case "point-cloud":case "scene":return!0;case "base-dynamic":case "base-elevation":case "base-tile":case "bing-maps":case "csv":case "feature":case "geo-rss":case "graphics":case "group":case "imagery":case "kml":case "map-image":case "map-notes":case "open-street-map":case "stream":case "tile":case "unknown":case "unsupported":case "vector-tile":case "web-tile":case "wms":case "wmts":break;
default:n.neverReached(a.type)}return!1}Object.defineProperty(d,"__esModule",{value:!0});d.validateWebSceneError=function(a,b){if(!a)return null;if(!c(a))return new f("webscene:unsupported-height-model-info","The vertical coordinate system of the scene is not supported",{heightModelInfo:a});var d=a.heightUnit;a=l.deriveUnitFromSR(a,b).heightUnit;return d!==a?new f("webscene:incompatible-height-unit","The vertical units of the scene ("+d+") must match the horizontal units of the scene ("+a+")",{verticalUnit:d,
horizontalUnit:a}):null};d.rejectLayerError=function(a,c,d){var g=p(a),h=e(g,c,d),k=null;if(g){var m=l.deriveUnitFromSR(g,a.spatialReference).heightUnit;d||m===g.heightUnit||(k=new f("layerview:unmatched-height-unit","The vertical units of the layer must match the horizontal units ("+m+")",{horizontalUnit:m}))}if(null==a.heightModelInfo&&null==a.spatialReference&&b(a)||4===h||k)return new f("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:g,
error:k});k=null;switch(h){case 1:a=g.heightUnit||"unknown";d=c.heightUnit||"unknown";k=new f("layerview:incompatible-height-unit","The vertical units of the layer ("+a+") must match the vertical units of the scene ("+d+")",{layerUnit:a,sceneUnit:d});break;case 2:a=g.heightModel||"unknown";d=c.heightModel||"unknown";k=new f("layerview:incompatible-height-model","The height model of the layer ("+a+") must match the height model of the scene ("+d+")",{layerHeightModel:a,sceneHeightModel:d});break;case 3:a=
g.vertCRS||"unknown",d=c.vertCRS||"unknown",k=new f("layerview:incompatible-vertical-datum","The vertical datum of the layer ("+a+") must match the vertical datum of the scene ("+d+")",{layerDatum:a,sceneDatum:d})}return k?new f("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:g,sceneHeightModelInfo:c,error:k}):null};d.deriveHeightModelInfoFromLayer=p;d.mayHaveHeightModelInfo=function(b){return null!=b.layers||
m(b)||a(b)||b.hasOwnProperty("heightModelInfo")};var k=new l({heightModel:"gravity-related-height"})})},"esri/portal/support/geometryServiceUtils":function(){define("require exports ../../config ../../core/Error ../../core/promiseUtils ../Portal ../PortalItem ../../tasks/GeometryService ../../tasks/support/ProjectParameters".split(" "),function(h,d,n,f,l,g,e,c,p){function b(a){void 0===a&&(a=null);if(n.geometryServiceUrl)return l.resolve(new c({url:n.geometryServiceUrl}));if(!a)return l.reject(new f("internal:geometry-service-url-not-configured"));
var b;a.isInstanceOf(e)?b=a.portal||g.getDefault():a.isInstanceOf(g)&&(b=a);return b.load().then(function(a){if(a.helperServices&&a.helperServices.geometry&&a.helperServices.geometry.url)return l.resolve(new c({url:a.helperServices.geometry.url}));throw new f("internal:geometry-service-url-not-configured");})}Object.defineProperty(d,"__esModule",{value:!0});d.create=b;d.projectGeometry=function(a,c,d){void 0===d&&(d=null);return b(d).then(function(b){var d=new p;d.geometries=[a];d.outSpatialReference=
c;return b.project(d)}).then(function(a){return a&&Array.isArray(a)&&1===a.length?a[0]:l.reject()})}})},"esri/views/input/Input":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./gamepad/GamepadSettings".split(" "),function(h,d,n,f,l,g,e){return function(c){function d(){var b=null!==c&&c.apply(this,arguments)||this;b.gamepad=new e;return b}n(d,c);f([g.property({readOnly:!0})],
d.prototype,"gamepad",void 0);return d=f([g.subclass("esri.views.input.Input")],d)}(g.declared(l))})},"esri/views/input/gamepad/GamepadSettings":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators ./GamepadInputDevice".split(" "),function(h,d,n,f,l,g,e,c){return function(d){function b(){var a=d.call(this)||this;a.devices=new g;a.enabledFocusMode=
"document";return a}n(b,d);f([e.property({type:g.ofType(c),readOnly:!0})],b.prototype,"devices",void 0);f([e.property({type:["document","view","none"]})],b.prototype,"enabledFocusMode",void 0);return b=f([e.subclass("esri.views.input.gamepad.GamepadSettings")],b)}(e.declared(l))})},"esri/views/input/gamepad/GamepadInputDevice":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(h,d,n,f,l,g){var e=/^(3dconnexion|space(mouse|navigator|pilot|explorer))/i,c={standard:.15,spacemouse:.025,unknown:0};return function(d){function b(a){var b=d.call(this)||this;b.native=null;b._detectedDeviceType="unknown";"standard"===a.mapping?b._detectedDeviceType="standard":e.test(a.id)?b._detectedDeviceType="spacemouse":b._detectedDeviceType="unknown";b.native=a;return b}n(b,d);Object.defineProperty(b.prototype,"deviceType",{get:function(){return this._detectedDeviceType},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"axisThreshold",{get:function(){return c[this.deviceType]},enumerable:!0,configurable:!0});f([g.property({nonNullable:!0,readOnly:!0})],b.prototype,"native",void 0);f([g.property({type:String,readOnly:!0})],b.prototype,"deviceType",null);f([g.property({type:Number,readOnly:!0})],b.prototype,"axisThreshold",null);return b=f([g.subclass("esri.views.input.gamepad.GamepadInputDevice")],b)}(g.declared(l))})},"esri/views/navigation/Navigation":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./gamepad/GamepadSettings".split(" "),
function(h,d,n,f,l,g,e){return function(c){function d(b){b=c.call(this,b)||this;b.gamepad=new e;return b}n(d,c);f([g.property({readOnly:!0})],d.prototype,"gamepad",void 0);return d=f([g.subclass("esri.views.navigation.Navigation")],d)}(g.declared(l))})},"esri/views/navigation/gamepad/GamepadSettings":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../input/gamepad/GamepadInputDevice".split(" "),
function(h,d,n,f,l,g,e){return function(c){function d(){var b=c.call(this)||this;b.enabled=!0;b.device=null;b.mode="pan";b.tiltDirection="forward-down";b.velocityFactor=1;return b}n(d,c);f([g.property({type:Boolean,nonNullable:!0})],d.prototype,"enabled",void 0);f([g.property({type:e})],d.prototype,"device",void 0);f([g.property({type:["pan","zoom"],nonNullable:!0})],d.prototype,"mode",void 0);f([g.property({type:["forward-down","forward-up"],nonNullable:!0})],d.prototype,"tiltDirection",void 0);
f([g.property({type:Number,nonNullable:!0})],d.prototype,"velocityFactor",void 0);return d=f([g.subclass("esri.views.navigation.gamepad.GamepadSettings")],d)}(g.declared(l))})},"esri/views/interactive/interactiveToolUtils":function(){define(["require","exports"],function(h,d){function n(d,f){d.attach&&d.attach();f&&f()}function f(d,f){d.detach&&d.detach();f&&f()}Object.defineProperty(d,"__esModule",{value:!0});d.setActive=function(d,f){var e=d.view;f&&e.ready&&e.activeTool!==d?(e.activeTool=d,e.focus()):
f||e.activeTool!==d||(e.activeTool=null)};d.swap=function(d,f){var e=d.activeTool;f!==e&&(e&&e.deactivate&&e.deactivate(),d._set("activeTool",f),f&&f.activate&&f.activate(),d.tools.forEach(function(c){var d=!f||f===c;"enableEditing"in c&&"disableEditing"in c?d?c.enableEditing():c.disableEditing():"editable"in c&&(c.editable=d)}))};d.setupCollectionHandlers=function(d,g){return[d.tools.on("after-add",function(e){d.ready&&n(e.item,g)}),d.tools.on("after-remove",function(d){f(d.item,g)})]};d.attachTool=
n;d.detachTool=f})},"esri/views/ViewAnimation":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Error ../core/Promise ../core/promiseUtils ../core/promiseUtils ../core/scheduling ../core/accessorSupport/decorators".split(" "),function(h,d,n,f,l,g,e,c,p,b,a){h=function(d){function e(a){a=d.call(this)||this;a.state="running";a.target=null;return a}n(e,d);e.prototype.initialize=function(){var a=this;this.addResolvingPromise(c.create(function(b,
c){a._dfd={resolve:b,reject:c}}))};Object.defineProperty(e.prototype,"done",{get:function(){return"finished"===this.state||"stopped"===this.state},enumerable:!0,configurable:!0});e.prototype.stop=function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),b.schedule(this._dfd.reject.bind(this._dfd,new g("ViewAnimation stopped"))))};e.prototype.finish=function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),b.schedule(this._dfd.resolve))};
e.prototype.update=function(a,b){b||(b=p.isThenable(a)?"waiting-for-target":"running");this._set("target",a);this._set("state",b)};f([a.property({readOnly:!0,dependsOn:["state"]})],e.prototype,"done",null);f([a.property({readOnly:!0,type:String})],e.prototype,"state",void 0);f([a.property()],e.prototype,"target",void 0);return e=f([a.subclass("esri.views.ViewAnimation")],e)}(a.declared(l,e));(h||(h={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};
return h})},"esri/widgets/Widget":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/dom ../core/Accessor ../core/Collection ../core/Evented ../core/Handles ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators ./support/widget maquette".split(" "),function(h,d,n,f,l,g,e,c,p,b,a,m,k,q,v){var u=a.getLogger("esri.widgets.Widget"),t=0;return function(a){function d(c,d){c=a.call(this)||this;c._attached=
!1;c.destroyed=!1;c.domNode=null;c.iconClass="esri-icon-checkbox-unchecked";c.visible=!0;c._internalHandles=new b;c.render=c.render.bind(c);return c}f(d,a);d.prototype.normalizeCtorArgs=function(a,b){a=n({},a);b&&(a.container=b);return a};d.prototype.initialize=function(){var a=this;this._internalHandles.add(this._renderableProps.map(function(b){return m.init(a,b,function(a,d){var e=this;c.isCollection(d)&&this._internalHandles.remove(this.declaredClass+":"+b+"-collection-change-event-listener");
c.isCollection(a)&&(a=a.on("change",function(){return e.scheduleRender()}),this._internalHandles.add(a,this.declaredClass+":"+b+"-collection-change-event-listener"));this.scheduleRender()})}));this._delegatedEventNames.length&&this._internalHandles.add(m.init(this,"viewModel",function(){a._get("viewModel")&&a._internalHandles.remove("delegated-events");a._delegatedEventNames.map(function(b){return a.viewModel.on(b,function(c){a.emit(b,c)})})}),"delegated-events");this.postInitialize();this._internalHandles.add(m.whenOnce(this,
"container",function(b){return a._attach(b)}))};d.prototype.postInitialize=function(){};d.prototype.destroy=function(){this.destroyed||(this.viewModel&&this.viewModel.destroy(),this._detach(this.container),this._internalHandles.destroy(),this._set("destroyed",!0))};d.prototype.startup=function(){u.warn("Widget.startup() is deprecated and no longer needed")};Object.defineProperty(d.prototype,"container",{set:function(a){this._get("container")||this._set("container",a)},enumerable:!0,configurable:!0});
d.prototype.castContainer=function(a){return g.byId(a)};Object.defineProperty(d.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+t++},set:function(a){a&&this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"label",{get:function(){return this.declaredClass.split(".").pop()},enumerable:!0,configurable:!0});d.prototype.scheduleRender=function(){this._projector.scheduleRender()};d.prototype.on=function(a,
b){var c=this.inherited(arguments);this._internalHandles.add(c);return c};d.prototype.classes=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return q.classes.apply(this,a)};d.prototype.own=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments));this._internalHandles.add(a)};d.prototype.renderNow=function(){this._projector.renderNow()};d.prototype._attach=function(a){a&&(this._projector.merge(a,this.render),this._attached=!0)};d.prototype._detach=function(a){a&&
this._attached&&(this._projector.detach(this.render),a.parentNode&&a.parentNode.removeChild(a),this._attached=!1)};l([k.shared(v.createProjector())],d.prototype,"_projector",void 0);l([k.shared([])],d.prototype,"_renderableProps",void 0);l([k.shared([])],d.prototype,"_delegatedEventNames",void 0);l([k.property({value:null})],d.prototype,"container",null);l([k.cast("container")],d.prototype,"castContainer",null);l([k.property({readOnly:!0})],d.prototype,"destroyed",void 0);l([k.property({aliasOf:"container"})],
d.prototype,"domNode",void 0);l([k.property({readOnly:!0})],d.prototype,"iconClass",void 0);l([k.property({dependsOn:["container"]})],d.prototype,"id",null);l([k.property({readOnly:!0})],d.prototype,"label",null);l([k.property()],d.prototype,"viewModel",void 0);l([k.property()],d.prototype,"visible",void 0);return d=l([k.subclass("esri.widgets.Widget")],d)}(k.declared(e,p))})},"esri/widgets/support/widget":function(){define("require exports ./decorators ./jsxFactory ./widgetUtils ./shim/SVGElement".split(" "),
function(h,d,n,f,l){function g(e){for(var c in e)d.hasOwnProperty(c)||(d[c]=e[c])}Object.defineProperty(d,"__esModule",{value:!0});g(n);g(f);g(l);d.isWidget=function(d){return d&&"function"===typeof d.render};d.isWidgetBase=function(d){return d&&"function"===typeof d.postMixInProperties&&"function"===typeof d.buildRendering&&"function"===typeof d.postCreate&&"function"===typeof d.startup}})},"esri/widgets/support/decorators":function(){define(["require","exports","./decorators/accessibleHandler",
"./decorators/renderable","./decorators/vmEvent"],function(h,d,n,f,l){function g(e){for(var c in e)d.hasOwnProperty(c)||(d[c]=e[c])}Object.defineProperty(d,"__esModule",{value:!0});g(n);g(f);g(l)})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["require","exports","dojo/keys"],function(h,d,n){function f(d){return function(f){for(var e=[],c=1;c<arguments.length;c++)e[c-1]=arguments[c];c=f.type;if(f instanceof KeyboardEvent||"keyup"===c||"keydown"===c||"keypress"===c){if(f.keyCode===
n.ENTER||f.keyCode===n.SPACE)f.preventDefault(),f.target.click()}else d.call.apply(d,[this,f].concat(e))}}Object.defineProperty(d,"__esModule",{value:!0});d.accessibleHandler=function(){return function(d,g){return{value:f(d[g])}}}})},"esri/widgets/support/decorators/renderable":function(){define(["require","exports","./propUtils"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.renderable=function(d){var f="string"===typeof d?n.splitProps(d):d;return function(d,e){d._renderableProps||
(d._renderableProps=[]);d=d._renderableProps;f?d.push.apply(d,n.normalizePropNames(f,e)):d.push(e)}}})},"esri/widgets/support/decorators/propUtils":function(){define(["require","exports"],function(h,d){Object.defineProperty(d,"__esModule",{value:!0});d.splitProps=function(d){return d.split(",").map(function(d){return d.trim()})};d.normalizePropNames=function(d,f){return d.map(function(d){d=0===d.indexOf(f)?d:f+"."+d;return d})}})},"esri/widgets/support/decorators/vmEvent":function(){define(["require",
"exports","./propUtils"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vmEvent=function(d){return function(f){f._delegatedEventNames||(f._delegatedEventNames=[]);var g=Array.isArray(d)?d:n.splitProps(d);f._delegatedEventNames=f._delegatedEventNames.concat(g)}}})},"esri/widgets/support/jsxFactory":function(){define(["require","exports","maquette-jsx"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.tsx=n.jsx})},"maquette-jsx/dist/maquette-jsx.umd":function(){(function(h,
d){"object"===typeof exports&&"undefined"!==typeof module?d(exports):"function"===typeof define&&define.amd?define(["exports"],d):d(h.maquetteCssTransitions={})})(this,function(h){var d=function(f,h){for(var g=0,e=f.length;g<e;g++){var c=f[g];Array.isArray(c)?d(c,h):null!==c&&void 0!==c&&!1!==c&&(c.hasOwnProperty("vnodeSelector")||(c={vnodeSelector:"",properties:void 0,children:void 0,text:c.toString(),domNode:null}),h.push(c))}},n=function(f,h){for(var g=[],e=2;e<arguments.length;e++)g[e-2]=arguments[e];
if(1===g.length&&"string"===typeof g[0])return{vnodeSelector:f,properties:h||void 0,children:void 0,text:g[0],domNode:null};e=[];d(g,e);return{vnodeSelector:f,properties:h||void 0,children:e,text:void 0,domNode:null}};h.jsx=n;h.enableGlobalJsx=function(){window.jsx=n};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/support/widgetUtils":function(){define("require exports ../../core/ArrayPool ../../core/has ../../core/Logger maquette-css-transitions".split(" "),function(h,d,n,f,l,
g){Object.defineProperty(d,"__esModule",{value:!0});l.getLogger("esri.widgets.support.widgetUtils");d.join=function(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];return d.join(" ")};d.classes=function(d){for(var c=n.acquire(),e=0;e<arguments.length;e++){var b=arguments[e],a=typeof b;if("string"===a)c.push(b);else if(Array.isArray(b))c.push.apply(c,b);else if("object"===a)for(var f in b)b[f]&&c.push(f)}e=c.join(" ");n.release(c);return e};d.isRTL=function(){return"rtl"===document.dir};
d.storeNode=function(d){this[d.getAttribute("data-node-ref")]=d};d.cssTransition=function(d,c){return("enter"===d?g.createEnterCssTransition:g.createExitCssTransition)(c)}})},"maquette-css-transitions/dist/maquette-css-transitions.umd":function(){(function(h,d){"object"===typeof exports&&"undefined"!==typeof module?d(exports):"function"===typeof define&&define.amd?define(["exports"],d):d(h.maquetteCssTransitions={})})(this,function(h){var d,n,f=function(f){if("WebkitTransition"in f.style)d="webkitTransitionEnd",
n="webkitAnimationEnd";else if("transition"in f.style)d="transitionend",n="animationend";else throw Error("Your browser is not supported!");};h.createEnterCssTransition=function(h,g){void 0===g&&(g=h+"-active");return function(e){d||f(e);var c=!1,l=function(b){c||(c=!0,e.removeEventListener(d,l),e.removeEventListener(n,l),e.classList.remove(h),e.classList.remove(g))};e.classList.add(h);e.addEventListener(d,l);e.addEventListener(n,l);requestAnimationFrame(function(){e.classList.add(g)})}};h.createExitCssTransition=
function(h,g){void 0===g&&(g=h+"-active");return function(e,c){d||f(e);var l=!1,b=function(a){l||(l=!0,e.removeEventListener(d,b),e.removeEventListener(n,b),c())};e.classList.add(h);e.addEventListener(d,b);e.addEventListener(n,b);requestAnimationFrame(function(){e.classList.add(g)})}};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/support/shim/SVGElement":function(){define(["require","exports","../../../core/has"],function(h,d,n){Object.defineProperty(d,"__esModule",{value:!0});
n.add("esri-svg-classlist","classList"in SVGElement.prototype);var f=function(){function d(d){this._node=d}d.prototype.add=function(d){var e=this._node;e.className.baseVal=(e.className.baseVal+" "+d).trim()};d.prototype.contains=function(d){return-1<this._node.className.baseVal.split(" ").indexOf(d)};d.prototype.remove=function(d){for(var e=this._node,c="",f=0,b=e.className.baseVal.split(" ");f<b.length;f++){var a=b[f];a!==d&&(c+=a+" ")}e.className.baseVal=c.trim()};d.prototype.toggle=function(d,
e){var c=this.contains(d),f;if(f=c?!0!==e&&"remove":!1!==e&&"add")this[f](d);return void 0!==e?e:!c};return d}();d.DOMTokenListSubset=f;n("esri-svg-classlist")||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){return new f(this)}})})},"maquette/dist/maquette.umd":function(){(function(h,d){"object"===typeof exports&&"undefined"!==typeof module?d(exports):"function"===typeof define&&define.amd?define(["exports"],d):d(h.maquette={})})(this,function(h){var d=[],n=function(a,b){var c=
{};Object.keys(a).forEach(function(b){c[b]=a[b]});b&&Object.keys(b).forEach(function(a){c[a]=b[a]});return c},f=function(a,b){return a.vnodeSelector!==b.vnodeSelector?!1:a.properties&&b.properties?a.properties.key!==b.properties.key?!1:a.properties.bind===b.properties.bind:!a.properties&&!b.properties},l=function(a){if("string"!==typeof a)throw Error("Style values must be strings");},g=function(a,b,c,d){var e=a[b];if(""!==e.vnodeSelector){var g=e.properties;if(!(g&&(void 0===g.key?g.bind:g.key)))for(g=
0;g<a.length;g++)if(g!==b&&f(a[g],e))throw Error(c.vnodeSelector+" had a "+e.vnodeSelector+" child "+("added"===d?d:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");}},e=[],c=!1,p=function(a){(a.children||[]).forEach(p);a.properties&&a.properties.afterRemoved&&a.properties.afterRemoved.apply(a.properties.bind||a.properties,[a.domNode])},b=function(){c=!1;e.forEach(p);e.length=0},a=function(a){e.push(a);c||(c=!0,"undefined"!==typeof window&&
"requestIdleCallback"in window?window.requestIdleCallback(b,{timeout:16}):setTimeout(b,16))},m=function(b){var c=b.domNode;if(b.properties){var d=b.properties.exitAnimation;if(d){c.style.pointerEvents="none";d(c,function(){c.parentNode&&(c.parentNode.removeChild(c),a(b))},b.properties);return}}c.parentNode&&(c.parentNode.removeChild(c),a(b))},k=function(a,b,c){if(b)for(var d=c.eventHandlerInterceptor,e=Object.keys(b),f=e.length,g=function(f){f=e[f];var g=b[f];if("className"===f)throw Error('Property "className" is not supported, use "class".');
if("class"===f)t(a,g,!0);else if("classes"===f){var h=Object.keys(g),k=h.length;for(f=0;f<k;f++){var m=h[f];g[m]&&a.classList.add(m)}}else if("styles"===f)for(h=Object.keys(g),k=h.length,f=0;f<k;f++){var m=h[f],n=g[m];n&&(l(n),c.styleApplyer(a,m,n))}else"key"!==f&&null!==g&&void 0!==g&&(h=typeof g,"function"===h?0===f.lastIndexOf("on",0)&&(d&&(g=d(f,g,a,b)),"oninput"===f&&function(){var a=g;g=function(b){a.apply(this,[b]);b.target["oninput-value"]=b.target.value}}(),a[f]=g):"http://www.w3.org/2000/svg"===
c.namespace?"href"===f?a.setAttributeNS("http://www.w3.org/1999/xlink",f,g):a.setAttribute(f,g):"string"===h&&"value"!==f&&"innerHTML"!==f?a.setAttribute(f,g):a[f]=g)},h=0;h<f;h++)g(h)},q=function(a,b,c){var d=b.children;if(d)for(var e=0;e<d.length;e++)v(d[e],a,void 0,c);b.text&&(a.textContent=b.text);k(a,b.properties,c);b.properties&&b.properties.afterCreate&&b.properties.afterCreate.apply(b.properties.bind||b.properties,[a,c,b.vnodeSelector,b.properties,b.children])},v=function(a,b,c,d){var e,f=
0,g=a.vnodeSelector,h=b.ownerDocument;if(""===g)e=a.domNode=h.createTextNode(a.text),void 0!==c?b.insertBefore(e,c):b.appendChild(e);else{for(var k=0;k<=g.length;++k){var l=g.charAt(k);if(k===g.length||"."===l||"#"===l)l=g.charAt(f-1),f=g.slice(f,k),"."===l?e.classList.add(f):"#"===l?e.id=f:("svg"===f&&(d=n(d,{namespace:"http://www.w3.org/2000/svg"})),void 0!==d.namespace?e=a.domNode=h.createElementNS(d.namespace,f):(e=a.domNode=a.domNode||h.createElement(f),"input"===f&&a.properties&&void 0!==a.properties.type&&
e.setAttribute("type",a.properties.type)),void 0!==c?b.insertBefore(e,c):e.parentNode!==b&&b.appendChild(e)),f=k+1}q(e,a,d)}},u,t=function(a,b,c){b&&b.split(" ").forEach(function(b){return a.classList.toggle(b,c)})};u=function(a,b,c){var e=a.domNode;if(a===b)return!1;var h=!1;if(""===b.vnodeSelector){if(b.text!==a.text)return a=e.ownerDocument.createTextNode(b.text),e.parentNode.replaceChild(a,e),b.domNode=a,!0;b.domNode=e}else{0===b.vnodeSelector.lastIndexOf("svg",0)&&(c=n(c,{namespace:"http://www.w3.org/2000/svg"}));
a.text!==b.text&&(h=!0,void 0===b.text?e.removeChild(e.firstChild):e.textContent=b.text);b.domNode=e;var k;k=a.children;var p=b.children,q=c;if(k===p)k=!1;else{k=k||d;for(var p=p||d,r=k.length,y=p.length,w=0,A=0,z=!1;A<y;){var x=w<r?k[w]:void 0,B=p[A];if(void 0!==x&&f(x,B))z=u(x,B,q)||z,w++;else{b:{var x=k,C=B;if(""!==C.vnodeSelector)for(var D=w+1;D<x.length;D++)if(f(x[D],C)){x=D;break b}x=-1}if(0<=x){for(;w<x;w++)m(k[w]),g(k,w,b,"removed");z=u(k[x],B,q)||z;w=x+1}else v(B,e,w<r?k[w].domNode:void 0,
q),B.properties&&(x=B.properties.enterAnimation)&&x(B.domNode,B.properties),g(p,A,b,"added")}A++}if(r>w)for(;w<r;w++)m(k[w]),g(k,w,b,"removed");k=z}h=k||h;k=a.properties;p=b.properties;q=c;if(p){r=!1;y=Object.keys(p);A=y.length;for(z=0;z<A;z++)if(x=y[z],B=p[x],w=k[x],"class"===x)w!==B&&(t(e,w,!1),t(e,B,!0));else if("classes"===x)for(var C=e.classList,D=Object.keys(B),E=D.length,x=0;x<E;x++){var V=D[x],Z=!!B[V];Z!==!!w[V]&&(r=!0,Z?C.add(V):C.remove(V))}else if("styles"===x)for(C=Object.keys(B),D=C.length,
x=0;x<D;x++)E=C[x],V=B[E],V!==w[E]&&(r=!0,V?(l(V),q.styleApplyer(e,E,V)):q.styleApplyer(e,E,""));else B||"string"!==typeof w||(B=""),"value"===x?(C=e[x],C!==B&&(e["oninput-value"]?C===e["oninput-value"]:B!==w)&&(e[x]=B,e["oninput-value"]=void 0),B!==w&&(r=!0)):B!==w&&(w=typeof B,"function"===w&&q.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===q.namespace?"href"===x?e.setAttributeNS("http://www.w3.org/1999/xlink",x,B):e.setAttribute(x,B):"string"===w&&"innerHTML"!==x?"role"===x&&""===B?e.removeAttribute(x):
e.setAttribute(x,B):e[x]!==B&&(e[x]=B),r=!0));k=r}else k=void 0;h=k||h;b.properties&&b.properties.afterUpdate&&b.properties.afterUpdate.apply(b.properties.bind||b.properties,[e,c,b.vnodeSelector,b.properties,b.children])}h&&b.properties&&b.properties.updateAnimation&&b.properties.updateAnimation(e,b.properties,a.properties);return!1};var r=function(a,b){return{getLastRender:function(){return a},update:function(c){if(a.vnodeSelector!==c.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");
var d=a;a=c;u(d,c,b)},domNode:a.domNode}},w={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(a,b,c){a.style[b]=c}},z={create:function(a,b){b=n(w,b);v(a,document.createElement("div"),void 0,b);return r(a,b)},append:function(a,b,c){c=n(w,c);v(b,a,void 0,c);return r(b,c)},insertBefore:function(a,b,c){c=n(w,c);v(b,a.parentNode,a,c);return r(b,c)},merge:function(a,b,c){c=n(w,c);b.domNode=a;q(a,b,c);return r(b,c)},replace:function(a,b,c){c=n(w,c);v(b,
a.parentNode,a,c);a.parentNode.removeChild(a);return r(b,c)}},B=function(a,b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];Array.isArray(f)?B(a,f,c):null!==f&&void 0!==f&&!1!==f&&("string"===typeof f&&(f={vnodeSelector:"",properties:void 0,children:void 0,text:f.toString(),domNode:null}),c.push(f))}},A;A=Array.prototype.find?function(a,b){return a.find(b)}:function(a,b){return a.filter(b)[0]};var x=function(a,b){var c=a;b.forEach(function(a){c=c&&c.children?A(c.children,function(b){return b.domNode===
a}):void 0});return c},C=function(a,b,c){var d=function(d){c("domEvent",d);var e=b(),f;f=d.currentTarget;for(var g=e.domNode,h=[];f!==g;)h.push(f),f=f.parentNode;f=h;f.reverse();e=x(e.getLastRender(),f);a.scheduleRender();var k;e&&(k=e.properties["on"+d.type].apply(e.properties.bind||this,arguments));c("domEventProcessed",d);return k};return function(a,b,c,e){return d}};h.dom=z;h.h=function(a,b,c){if(Array.isArray(b))c=b,b=void 0;else if(b&&("string"===typeof b||b.hasOwnProperty("vnodeSelector"))||
c&&("string"===typeof c||c.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");var d,e;c&&1===c.length&&"string"===typeof c[0]?d=c[0]:c&&(e=[],B(a,c,e),0===e.length&&(e=void 0));return{vnodeSelector:a,properties:b,children:e,text:""===d?void 0:d,domNode:null}};h.createProjector=function(a){var b,c=n(w,a),d=c.performanceLogger,e=!0,f,g=!1,h=[],k=[],l=function(a,e,f){var g;c.eventHandlerInterceptor=C(b,function(){return g},d);g=a(e,f(),c);h.push(g);k.push(f)},m=function(){f=
void 0;if(e){e=!1;d("renderStart",void 0);for(var a=0;a<h.length;a++){var b=k[a]();d("rendered",void 0);h[a].update(b);d("patched",void 0)}d("renderDone",void 0);e=!0}};return b={renderNow:m,scheduleRender:function(){f||g||(f=requestAnimationFrame(m))},stop:function(){f&&(cancelAnimationFrame(f),f=void 0);g=!0},resume:function(){g=!1;e=!0;b.scheduleRender()},append:function(a,b){l(z.append,a,b)},insertBefore:function(a,b){l(z.insertBefore,a,b)},merge:function(a,b){l(z.merge,a,b)},replace:function(a,
b){l(z.replace,a,b)},detach:function(a){for(var b=0;b<k.length;b++)if(k[b]===a)return k.splice(b,1),h.splice(b,1)[0];throw Error("renderFunction was not found");}}};h.createCache=function(){var a,b;return{invalidate:function(){a=b=void 0},result:function(c,d){if(a)for(var e=0;e<c.length;e++)a[e]!==c[e]&&(b=void 0);b||(b=d(),a=c);return b}}};h.createMapping=function(a,b,c){var d=[],e=[];return{results:e,map:function(f){for(var g=f.map(a),h=e.slice(),k=0,l=0;l<f.length;l++){var m=f[l],n=g[l];if(n===
d[k])e[l]=h[k],c(m,h[k],l),k++;else{for(var p=!1,q=1;q<d.length+1;q++){var r=(k+q)%d.length;if(d[r]===n){e[l]=h[r];c(f[l],h[r],l);k=r+1;p=!0;break}}p||(e[l]=b(m,l))}}e.length=f.length;d=g}}};Object.defineProperty(h,"__esModule",{value:!0})})},"*now":function(h){h(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
require.boot&&require.apply(null,require.boot);