// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define(["../Component","../GroupBrowser/index"],function(h,k){return function(g){function a(b){if(d[b])return d[b].exports;var c=d[b]={i:b,l:!1,exports:{}};return g[b].call(c.exports,c,c.exports,a),c.l=!0,c.exports}var d={};return a.m=g,a.c=d,a.d=function(b,c,e){a.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:e})},a.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},a.t=
function(b,c){if((1&c&&(b=a(b)),8&c)||4&c&&"object"==typeof b&&b&&b.__esModule)return b;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:b}),2&c&&"string"!=typeof b)for(var d in b)a.d(e,d,function(c){return b[c]}.bind(null,d));return e},a.n=function(b){var c=b&&b.__esModule?function(){return b.default}:function(){return b};return a.d(c,"a",c),c},a.o=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)},a.p="",a(a.s=301)}({0:function(g,a,d){function b(b,
a){function d(){this.constructor=b}c(b,a);b.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}d.d(a,"b",function(){return b});d.d(a,"a",function(){return e});var c=function(b,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])})(b,a)},e=function(){return(e=Object.assign||function(b){for(var a,c=1,d=arguments.length;c<d;c++)for(var f in a=arguments[c])Object.prototype.hasOwnProperty.call(a,
f)&&(b[f]=a[f]);return b}).apply(this,arguments)}},1:function(g,a){g.exports=h},301:function(g,a,d){d.r(a);d.d(a,"GroupBrowserWrapper",function(){return k});var b=d(0),c=d(1),e=d(49),h=d.n(e);d.d(a,"initialState",function(){return e.initialState});var k=function(){function a(a,f){this.options=f;this.listener=this.listener.bind(this);this.renderContainer=document.createElement("div");this.renderContainer.style.width="100%";this.renderContainer.style.height="100%";this.renderContainer.id="group-browser-wrapper";
a.appendChild(this.renderContainer);a=f.initialState?f.initialState:e.initialState;this.initialState=b.a({},a,{config:a.config,utils:{request:4===f.apiVersion?f.request:this.shimmedRequest.bind(this),portal:4===f.apiVersion?f.portal:b.a({},f.portal,{restUrl:f.portal.portalUrl.slice(0,-1),credential:f.portal.user&&f.portal.user.credential?f.portal.user.credential:void 0})}});this.store=Object(c.applyMiddleware)(c.thunk,Object(c.addListener)(this.listener))(c.createStore)(e.reducers,this.initialState);
this.projector=Object(c.createProjector)(this.store,function(a){return a(h.a,{key:"gb"})},this.renderContainer);this.store.dispatch(Object(e.search)())}return a.prototype.shimmedRequest=function(a,c){var d=b.a({},c.query);return this.options.portal.user&&this.options.portal.user.credential&&-1<a.indexOf(this.options.portal.restUrl)&&(d.token=this.options.portal.user.credential.token),this.options.request({url:a,content:c.query},{usePost:"post"===c.method}).then(function(a){return{data:a}})},a.prototype.getState=
function(){return this.store?this.store.getState():this.initialState},a.prototype.deselectGroups=function(a){if(this.store){var b=this.store.getState();a=a.filter(function(a){return!!b.results.groups.selectedGroups[a]}).map(function(a){return b.results.groups.selectedGroups[a]});this.store.dispatch(Object(e.deselectGroups)(a))}},a.prototype.selectGroups=function(a){this.store&&this.store.dispatch(Object(e.selectGroups)(a))},a.prototype.listener=function(a,b){switch(a.type){case "DESELECT_GROUPS":this.options.onGroupDeselect&&
this.options.onGroupDeselect(a.payload);break;case "SELECT_GROUPS":this.options.onGroupSelect&&this.options.onGroupSelect(a.payload)}this.options.listener&&this.options.listener(a,b)},a}()},49:function(g,a){g.exports=k}})});