// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../core/lang ../../core/wgs84Constants ../SpatialReference ./spatialReferenceUtils".split(" "),function(y,l,n,x,p,c){function q(a,b,f,m,d){var e;if("x"in a&&"x"in d)b=b(a.x,a.y,t,0,m),d.x=b[0],d.y=b[1];else if("xmin"in a&&"xmin"in d)e=b(a.xmin,a.ymin,t,0,m),d.xmin=e[0],d.ymin=e[1],b=b(a.xmax,a.ymax,t,0,m),d.xmax=b[0],d.ymax=b[1];else if("paths"in a&&"paths"in d||"rings"in a&&"rings"in d){e="paths"in a?a.paths:a.rings;var g=[],k=void 0;for(a=0;a<e.length;a++){var c=e[a],
k=[];g.push(k);for(var h=0;h<c.length;h++)k.push(b(c[h][0],c[h][1],[0,0],0,m)),2<c[h].length&&k[h].push(c[h][2]),3<c[h].length&&k[h].push(c[h][3])}"paths"in d?d.paths=g:d.rings=g}else if("points"in a&&"points"in d){e=a.points;g=[];for(a=0;a<e.length;a++)g[a]=b(e[a][0],e[a][1],[0,0],0,m),2<e[a].length&&g[a].push(e[a][2]),3<e[a].length&&g[a].push(e[a][3]);d.points=g}else if("type"in a&&"mesh"===a.type&&"type"in d&&"mesh"===d.type&&(e=a.vertexAttributes&&a.vertexAttributes.position,g=d.vertexAttributes&&
d.vertexAttributes.position,e))for(k=[0,0],a=0;a<e.length;a+=3)b(e[a],e[a+1],k,0,m),g[a]=k[0],g[a+1]=k[1];d.spatialReference=f;return d}function w(a,b){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?c.equals(b,a)?!0:c.isWebMercator(b)&&c.isWGS84(a)||c.isWebMercator(a)&&c.isWGS84(b):!1}function u(a,b,f,c){void 0===f&&(f=[0,0]);void 0===c&&(c=0);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=.017453292519943;f[c]=.017453292519943*
a*r;f[c+1]=.5*r*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return f}function v(a,b,f,c,d){void 0===f&&(f=[0,0]);void 0===c&&(c=0);void 0===d&&(d=!1);a=a/r*57.29577951308232;f[c]=d?a:a-360*Math.floor((a+180)/360);f[c+1]=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*b/r)));return f}Object.defineProperty(l,"__esModule",{value:!0});var r=x.wgs84Radius,t=[0,0];l.canProject=w;l.project=function(a,b){var f=a&&a.spatialReference;b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return w(f,b)?c.equals(f,
b)?n.clone(a):c.isWebMercator(b)?q(a,u,p.WebMercator,!1,n.clone(a)):c.isWGS84(b)?q(a,v,p.WGS84,!1,n.clone(a)):null:null};l.lngLatToXY=u;l.xyToLngLat=v;l.geographicToWebMercator=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=n.clone(a));return q(a,u,p.WebMercator,b,c)};l.webMercatorToGeographic=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=n.clone(a));return q(a,v,p.WGS84,b,c)}});