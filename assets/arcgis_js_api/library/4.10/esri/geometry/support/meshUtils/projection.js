// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../core/Logger","../../../core/libs/gl-matrix-2/gl-matrix","../../../views/3d/support/projectionUtils"],function(v,h,u,g,k){function p(q,d,e,f,c,h){if(d){c=c.isWGS84;for(var n=0;n<d.length;n+=3){for(var b=0;3>b;b++)l[b]=f[n+b],m[b]=d[n+b];k.computeLinearTransformation(k.SphericalECEFSpatialReference,l,r,k.SphericalECEFSpatialReference);g.mat3.fromMat4(a,r);c?g.vec3.transformMat3(m,m,a):(b=k.webMercator.y2lat(e[n+1]),b=Math.cos(b),0===q&&(b=1/b),a[0]*=b,a[1]*=b,a[2]*=
b,a[3]*=b,a[4]*=b,a[5]*=b,1===q&&g.mat3.transpose(a,a),g.vec3.transformMat3(m,m,a),g.vec3.normalize(m,m));for(b=0;3>b;b++)h[n+b]=m[b]}return h}}Object.defineProperty(h,"__esModule",{value:!0});var t=u.getLogger("esri.geometry.support.meshUtils.normalProjection");h.projectNormalToECEF=function(a,d,e,f,c){return f.isWebMercator||f.isWGS84?p(0,a,d,e,f,c):(t.error("Cannot convert PCS spatial reference buffer to ECEF"),c)};h.projectNormalFromECEF=function(a,d,e,f,c){return f.isWebMercator||f.isWGS84?p(1,
a,d,e,f,c):(t.error("Cannot convert to PCS spatial reference buffer from ECEF"),c)};h.projectToECEF=function(a,d,e){k.bufferToBuffer(a,d,0,e,k.SphericalECEFSpatialReference,0,a.length/3);return e};h.projectFromECEF=function(a,d,e){k.bufferToBuffer(a,k.SphericalECEFSpatialReference,0,d,e,0,a.length/3);return d};h.transformBufferInPlace=function(a,d,e){void 0===e&&(e=!1);if(a)for(var f=0;f<a.length;f+=3){for(var c=0;3>c;c++)l[c]=a[f+c];g.vec3.transformMat4(l,l,d);e&&g.vec3.normalize(l,l);for(c=0;3>
c;c++)a[f+c]=l[c]}};var l=g.vec3f64.create(),m=g.vec3f64.create(),r=g.mat4f64.create(),a=g.mat3f64.create()});