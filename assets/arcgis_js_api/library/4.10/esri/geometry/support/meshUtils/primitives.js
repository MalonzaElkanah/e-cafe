// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../core/libs/gl-matrix-2/gl-matrix","./georeference"],function(B,v,x,A){Object.defineProperty(v,"__esModule",{value:!0});v.createUnitSizeBox=function(){for(var a=z.faceDescriptions,e=z.faceVertexOffsets,m=z.uvScales,b=4*a.length,f=new Float64Array(3*b),c=new Float32Array(3*b),b=new Float32Array(2*b),g=new Uint32Array(6*a.length),t=0,p=0,h=0,d=0,n=0;n<a.length;n++){for(var u=a[n],l=t/3,r=0,q=e;r<q.length;r++){var k=q[r];g[d++]=l+k}l=u.corners;for(r=0;4>r;r++){q=l[r];
k=0;b[h++]=.25*m[r][0]+u.uvOrigin[0];b[h++]=u.uvOrigin[1]-.25*m[r][1];for(var w=0;3>w;w++)0!==u.axis[w]?(f[t++]=.5*u.axis[w],c[p++]=u.axis[w]):(f[t++]=.5*q[k++],c[p++]=0)}}return{position:f,normal:c,uv:b,faces:g}};v.createUnitSizeSphere=function(a){void 0===a&&(a=0);a=Math.round(8*Math.pow(2,a));for(var e=2*a,m=(a-1)*(e+1)+2*e,b=new Float64Array(3*m),f=new Float32Array(3*m),m=new Float32Array(2*m),c=new Uint32Array((a-1)*e*6),l=0,t=0,p=0,h=0,d=0,n=0;n<=a;n++){var u=n/a*Math.PI+.5*Math.PI,v=Math.cos(u);
g[2]=Math.sin(u);for(var r=(u=0===n||n===a)?e-1:e,q=0;q<=r;q++){var k=q/r*2*Math.PI;g[0]=-Math.sin(k)*v;g[1]=Math.cos(k)*v;for(k=0;3>k;k++)b[l++]=.5*g[k],f[t++]=g[k];m[p++]=(q+(u?.5:0))/e;m[p++]=n/a;0!==n&&q!==e&&(n!==a&&(c[h++]=d,c[h++]=d+1,c[h++]=d-e),1!==n&&(c[h++]=d,c[h++]=d-e,c[h++]=d-e-1));d++}}return{position:b,normal:f,uv:m,faces:c}};v.createUnitSizeCylinder=function(a){void 0===a&&(a=0);a=Math.round(16*Math.pow(2,a));for(var e=4*(a+1)+2*a,m=new Float64Array(3*e),b=new Float32Array(3*e),e=
new Float32Array(2*e),f=new Uint32Array(12*a),c=0,l=0,t=0,p=0,h=0,d=0;5>=d;d++)for(var n=0===d||5===d,u=1>=d||4<=d,v=2===d||4===d,r=n?a-1:a,q=0;q<=r;q++){var k=q/r*2*Math.PI,w=n?0:.5;g[0]=w*Math.sin(k);g[1]=w*-Math.cos(k);g[2]=2>=d?.5:-.5;for(k=0;3>k;k++)m[c++]=g[k],u?b[l++]=2===k?1>=d?1:-1:0:b[l++]=2===k?0:g[k]/w;e[t++]=(q+(n?.5:0))/a;1>=d?e[t++]=1*d/3:3>=d?e[t++]=1*(d-2)/3+1/3:e[t++]=1*(d-4)/3+2/3;v||0===d||q===a||(5!==d&&(f[p++]=h,f[p++]=h+1,f[p++]=h-a),1!==d&&(f[p++]=h,f[p++]=h-a,f[p++]=h-a-1));
h++}return{position:m,normal:b,uv:e,faces:f}};v.createUnitSizePlane=function(a){a=y.facingAxisOrderSwap[a];for(var e=y.position,g=y.normal,b=new Float64Array(e.length),f=new Float32Array(g.length),c=0,l=0;4>l;l++)for(var t=c,p=0;3>p;p++){var h=a[p],d=Math.abs(h)-1,h=0<=h?1:-1;b[c]=e[t+d]*h;f[c]=g[t+d]*h;c++}return{position:b,normal:f,uv:new Float32Array(y.uv),faces:new Uint32Array(y.faces)}};var y={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],
faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};v.convertUnitGeometry=function(a,e,m){for(var b=0;b<a.position.length;b+=3)a.position[b+2]+=.5;b=m&&m.size;if(null!=b){b="number"===typeof b?[b,b,b]:[null!=b.width?b.width:1,null!=b.depth?b.depth:1,null!=b.height?b.height:1];l[0]=b[0];l[4]=b[1];l[8]=b[2];for(var f=0;f<a.position.length;f+=3){for(var c=0;3>c;c++)g[c]=a.position[f+c];x.vec3.transformMat3(g,g,l);for(c=0;3>c;c++)a.position[f+
c]=g[c]}if(b[0]!==b[1]||b[1]!==b[2])for(l[0]=1/b[0],l[4]=1/b[1],l[8]=1/b[2],f=0;f<a.normal.length;f+=3){for(c=0;3>c;c++)g[c]=a.normal[f+c];x.vec3.transformMat3(g,g,l);x.vec3.normalize(g,g);for(c=0;3>c;c++)a.normal[f+c]=g[c]}}b=A.georeference(a,e,m);return{vertexAttributes:{position:b.position,normal:b.normal,uv:a.uv},components:[{faces:a.faces,material:m&&m.material||null}],spatialReference:e.spatialReference}};var z={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],
[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]};v.boxFaceOrder={south:0,east:1,north:2,west:3,up:4,down:5};var g=
x.vec3f64.create(),l=x.mat3f64.create()});