// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(l,g,e,c,a,b,m){function n(b){b&&(b=m.getOrigin(b),d&&-1===d.indexOf(b)&&d.push(b))}function p(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];for(var d=void 0,h=0;h<b.length;++h)m.isProtocolRelative(b[h])?d&&(d=d.split("://")[0]+":"+b[h].trim()):d=m.isAbsolute(b[h])?b[h]:
m.join(d,b[h]);return d}function h(d,c,e){var f,g,q;"string"===typeof c?(c=m.normalize(c),n(c),f=m.urlToObject(c),f=a(f.path,{query:{f:"json"},responseType:"json"}),q=g=c):(f=b.resolve({data:c}),g=c.jsonUrl||null,q=e);return f.then(function(c){var a=c.data;c.ssl&&(g&&(g=g.replace(/^http:/i,"https:")),q&&(q=q.replace(/^http:/i,"https:")));if(a.sources){d.styleUrl=g||null;c=q?m.removeFile(q):m.appBaseUrl;d.styleBase=c;d.style=a;d.styleUrl&&n(d.styleUrl);if(d.source)a=b.resolve();else{b:if(a=a.sources,
a.esri)a=a.esri;else{for(var f=0,e=Object.keys(a);f<e.length;f++){var l=e[f];if("vector"===a[l].type){a=a[l];break b}}a=null}a=a.url?h(d,p(c,a.url)):h(d,a,c)}return a}if(a.sources)return b.reject("You must specify the URL or the JSON for a service or for a style.");d.sourceUrl=g||null;c=q?m.removeTrailingSlash(q)+"/":m.appBaseUrl;d.sourceBase=c;d.source=a;if(a.hasOwnProperty("tileInfo"))f=a;else{for(var f={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,
spatialReference:{wkid:102100}},l=(f.xmax-f.xmin)/512,e=[],r=a.hasOwnProperty("minzoom")?parseFloat(a.minzoom):0,t=a.hasOwnProperty("maxzoom")?parseFloat(a.maxzoom):16;r<t;r++){var u=l/Math.pow(2,r);e.push({level:r,scale:Math.floor(3779.527559055118*u),resolution:u})}l=0;for(t=a.tiles;l<t.length;l++)n(p(c,t[l]));f={capabilities:"TilesOnly",initialExtent:f,fullExtent:f,minScale:e[0].scale,maxScale:e[e.length-1].scale,tiles:a.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,
y:2.0037508342787E7},lods:e,spatialReference:{wkid:102100}}}}d.validatedSource=f;d.sourceUrl&&n(d.sourceUrl);a=d.style?b.resolve():null==a.defaultStyles?b.reject():"string"===typeof a.defaultStyles?h(d,p(c,a.defaultStyles,"root.json")):h(d,a.defaultStyles,p(c,"root.json"));return a})}Object.defineProperty(g,"__esModule",{value:!0});var d=c.defaults&&c.defaults.io.corsEnabledServers;g.loadMetadata=function(b){var d={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,
styleUrl:null},a="string"===typeof b?[b,null]:[null,b.jsonUrl],c=a[0],a=a[1],f=c?m.urlToObject(c):null;return h(d,b,a).then(function(){var b={layerDefinition:d.validatedSource,url:c,parsedUrl:f,serviceUrl:d.sourceUrl,style:d.style,styleUrl:d.styleUrl,spriteUrl:d.style.sprite&&p(d.styleBase,d.style.sprite),glyphsUrl:d.style.glyphs&&p(d.styleBase,d.style.glyphs)};n(b.spriteUrl);n(b.glyphsUrl);return b})}})},"esri/portal/support/jsonContext":function(){define(["require","exports","../../core/urlUtils",
"../Portal"],function(l,g,e,c){Object.defineProperty(g,"__esModule",{value:!0});g.createForItem=function(a){return{origin:"portal-item",url:e.urlToObject(a.itemUrl),portal:a.portal||c.getDefault()}}})},"esri/views/vectorTiles/SchemaHelper":function(){define(["require","exports"],function(l,g){return function(){function e(c,a){this.lockedSchemaPixelSize=c;this.isWGS84=a}e.prototype.getLevelRowColumn=function(c){return this.isWGS84?[c[0],c[1]>>1,c[2]>>1]:256===this.lockedSchemaPixelSize&&0<c[0]?[c[0]-
1,c[1]>>1,c[2]>>1]:c};e.prototype.adjustLevel=function(c){return this.isWGS84?c:256===this.lockedSchemaPixelSize?0<c?c-1:0:c};e.prototype.getShift=function(c,a){var b=0,m=0;if(256===this.lockedSchemaPixelSize||this.isWGS84)c[2]%2&&(b=2*a),c[1]%2&&(m=2*a);return[b,m]};e.prototype.getScale=function(c){if(this.isWGS84){if(512===this.lockedSchemaPixelSize)return 2}else if(256===this.lockedSchemaPixelSize&&0===c)return.5;return 1};e.create256x256CompatibleTileInfo=function(c){if(!c)return null;if(256===
c.rows&&256===c.cols)return c;for(var a=4326===c.spatialReference.wkid,b=[],m=c.lods.length,n=0;n<m;n++){var p=c.lods[n];b.push({level:p.level,scale:p.scale,resolution:a?p.resolution:2*p.resolution})}return{rows:256,cols:256,dpi:c.dpi,format:c.format,compressionQuality:c.compressionQuality,origin:c.origin,spatialReference:c.spatialReference,lods:b}};e.create512x512CompatibleTileInfo=function(c){if(!c||256===c.rows||256===c.cols)return null;for(var a=[],b=c.lods.length,m=0;m<b;m++){var n=c.lods[m];
a.push({level:n.level,scale:n.scale,resolution:.5*n.resolution})}return{rows:512,cols:512,dpi:c.dpi,format:c.format,compressionQuality:c.compressionQuality,origin:c.origin,spatialReference:c.spatialReference,lods:a}};return e}()})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","../../../core/has","./StyleLayer"],function(l,g,e,c){return function(){function a(b,c){this._layerByName={};this.styleJSON=b;this.version=parseFloat(b.version);this.sprite=c?c.spriteUrl:
b.sprite;this.glyphs=c?c.glyphsUrl:b.glyphs;if(this.layers=(b.layers||[]).map(a._create))for(b=void 0,c=0;c<this.layers.length;c++)b=this.layers[c],this._layerByName[b.id.toLowerCase()]=b;this._identifyRefLayers()}a.prototype.getStyleLayerId=function(b){return b>=this.layers.length?null:this.layers[b].id};a.prototype.getLayoutProperties=function(b){return(b=this._layerByName[b.toLowerCase()])?b.layout:null};a.prototype.getPaintProperties=function(b){return(b=this._layerByName[b.toLowerCase()])?b.paint:
null};a.prototype.setPaintProperties=function(b,c){b=this._layerByName[b.toLowerCase()];if(!b)return"";var n=this.layers.indexOf(b);this.styleJSON.layers[n].paint=c;c=a._recreateLayer({id:b.id,type:b.typeName,source:b.source,sourceLayer:b["source-layer"],minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:b.layout,paint:c},b);this.layers[n]=c;this._layerByName[b.id.toLowerCase()]=c;return b.id};a.prototype.setLayoutProperties=function(b,c){b=this._layerByName[b.toLowerCase()];if(!b)return"";
var n=this.layers.indexOf(b);this.styleJSON.layers[n].layout=c;c=a._recreateLayer({id:b.id,type:b.typeName,source:b.source,sourceLayer:b["source-layer"],minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:c,paint:b.paint},b);this.layers[n]=c;this._layerByName[b.id.toLowerCase()]=c;return b.id};a.prototype._identifyRefLayers=function(){for(var b=[],c=[],a=0,p=0,h=this.layers;p<h.length;p++){var d=h[p];if(1===d.type){var f=d,e=d.sourceLayer,e=e+("|"+JSON.stringify(d.minzoom)),e=e+("|"+JSON.stringify(d.maxzoom)),
e=e+("|"+JSON.stringify(d.filter));if(f.hasDataDrivenFill||f.hasDataDrivenOutline)e+="|"+JSON.stringify(a);b.push({key:e,layer:d})}2===d.type&&(f=d,e=d.sourceLayer,e+="|"+JSON.stringify(d.minzoom),e+="|"+JSON.stringify(d.maxzoom),e+="|"+JSON.stringify(d.filter),e+="|"+JSON.stringify(d.layout&&d.layout["line-cap"]),e+="|"+JSON.stringify(d.layout&&d.layout["line-join"]),f.hasDataDrivenLine&&(e+="|"+JSON.stringify(a)),c.push({key:e,layer:d}));++a}this._assignRefLayers(b);this._assignRefLayers(c)};a.prototype._assignRefLayers=
function(b){b.sort(function(d,b){return d.key<b.key?-1:d.key>b.key?1:0});for(var c,a,p=b.length,h=0;h<p;h++){var d=b[h];if(d.key===c)d.layer.refLayerId=a;else if(c=d.key,a=d.layer.id,1===d.layer.type&&!d.layer.getPaintProperty("fill-outline-color"))for(var f=h+1;f<p;f++){var e=b[f];if(e.key===c){if(e.layer.getPaintProperty("fill-outline-color")){b[h]=e;b[f]=d;a=e.layer.id;break}}else break}}};a._create=function(b,a,n){a=1-1/(n.length+1)*(1+a);switch(b.type){case "background":return new c.BackgroundStyleLayer(0,
b,a);case "fill":return new c.FillStyleLayer(1,b,a);case "line":return new c.LineStyleLayer(2,b,a);case "symbol":return new c.SymbolStyleLayer(3,b,a);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new c.CircleStyleLayer(4,b,a)}throw Error("Unknown vector tile layer");};a._recreateLayer=function(b,a){switch(b.type){case "background":return new c.BackgroundStyleLayer(0,b,a.z);case "fill":return new c.FillStyleLayer(1,b,a.z);case "line":return new c.LineStyleLayer(2,
b,a.z);case "symbol":return new c.SymbolStyleLayer(3,b,a.z);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new c.CircleStyleLayer(4,b,a.z)}};return a}()})},"esri/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),function(l,g,e,c,a,b,m){Object.defineProperty(g,"__esModule",{value:!0});l=function(){function c(c,
a,d){this.type=c;this.typeName=a.type;this.id=a.id;this.source=a.source;this.sourceLayer=a["source-layer"];this.minzoom=a.minzoom;this.maxzoom=a.maxzoom;this.filter=a.filter;this.layout=a.layout;this.paint=a.paint;this.z=d;switch(c){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=b.StyleDefinition.fillLayoutDefinition;this._paintDefinition=b.StyleDefinition.fillPaintDefinition;
break;case 2:this._layoutDefinition=b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=b.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=b.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=b.StyleDefinition.circleLayoutDefinition,this._paintDefinition=b.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}
c.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=a.createFilter(this.filter)};c.prototype.getLayoutProperty=function(b){var a=this._layoutProperties;if(a)return a[b]};c.prototype.getPaintProperty=function(b){var a=this._paintProperties;if(a)return a[b]};c.prototype.getLayoutValue=function(b,a,d){var c,h=this._layoutProperties;h&&(h=h[b])&&(c=h.getValue(a,d));b=this._layoutDefinition[b];void 0===c&&(c=b["default"]);"enum"===b.type&&
(c=b.values.indexOf(c));return c};c.prototype.getPaintValue=function(b,a,d){var c,h=this._paintProperties;h&&(h=h[b])&&(c=h.getValue(a,d));b=this._paintDefinition[b];void 0===c&&(c=b["default"]);"enum"===b.type&&(c=b.values.indexOf(c));return c};c.prototype._parseLayout=function(b){var a={},d;for(d in b){var c=this._layoutDefinition[d];c&&(a[d]=new m(d,c,b[d]))}return a};c.prototype._parsePaint=function(b){var a={},d;for(d in b){var c=this._paintDefinition[d];c&&(a[d]=new m(d,c,b[d]))}return a};return c}();
g.StyleLayer=l;c=function(b){function a(a,d,c){return b.call(this,a,d,c)||this}e(a,b);return a}(l);g.BackgroundStyleLayer=c;c=function(b){function a(a,d,c){a=b.call(this,a,d,c)||this;d=a.getPaintProperty("fill-color");a.hasDataDrivenColor=d?d.isDataDriven:!1;d=a.getPaintProperty("fill-opacity");a.hasDataDrivenOpacity=d?d.isDataDriven:!1;a.hasDataDrivenFill=a.hasDataDrivenColor||a.hasDataDrivenOpacity;d=a.getPaintProperty("fill-outline-color");a.outlineUsesFillColor=!d;a.hasDataDrivenOutlineColor=
d?d.isDataDriven:!1;a.hasDataDrivenOutline=(d?a.hasDataDrivenOutlineColor:a.hasDataDrivenColor)||a.hasDataDrivenOpacity;return a}e(a,b);return a}(l);g.FillStyleLayer=c;c=function(b){function a(a,d,c){a=b.call(this,a,d,c)||this;d=a.getPaintProperty("line-color");a.hasDataDrivenColor=d?d.isDataDriven:!1;d=a.getPaintProperty("line-opacity");a.hasDataDrivenOpacity=d?d.isDataDriven:!1;d=a.getPaintProperty("line-width");a.hasDataDrivenWidth=d?d.isDataDriven:!1;a.hasDataDrivenLine=a.hasDataDrivenColor||
a.hasDataDrivenOpacity||a.hasDataDrivenWidth;return a}e(a,b);return a}(l);g.LineStyleLayer=c;c=function(b){function a(a,d,c){a=b.call(this,a,d,c)||this;d=a.getPaintProperty("icon-color");a.hasDataDrivenIconColor=d?d.isDataDriven:!1;d=a.getPaintProperty("icon-opacity");a.hasDataDrivenIconOpacity=d?d.isDataDriven:!1;d=a.getLayoutProperty("icon-size");a.hasDataDrivenIconSize=d?d.isDataDriven:!1;a.hasDataDrivenIcon=a.hasDataDrivenIconColor||a.hasDataDrivenIconOpacity||a.hasDataDrivenIconSize;d=a.getPaintProperty("text-color");
a.hasDataDrivenTextColor=d?d.isDataDriven:!1;d=a.getPaintProperty("text-opacity");a.hasDataDrivenTextOpacity=d?d.isDataDriven:!1;d=a.getLayoutProperty("text-size");a.hasDataDrivenTextSize=d?d.isDataDriven:!1;a.hasDataDrivenText=a.hasDataDrivenTextColor||a.hasDataDrivenTextOpacity||a.hasDataDrivenTextSize;return a}e(a,b);return a}(l);g.SymbolStyleLayer=c;l=function(a){function b(b,d,c){b=a.call(this,b,d,c)||this;d=b.getPaintProperty("circle-radius");b.hasDataDrivenRadius=d?d.isDataDriven:!1;d=b.getPaintProperty("circle-color");
b.hasDataDrivenColor=d?d.isDataDriven:!1;d=b.getPaintProperty("circle-opacity");b.hasDataDrivenOpacity=d?d.isDataDriven:!1;d=b.getPaintProperty("circle-stroke-width");b.hasDataDrivenStrokeWidth=d?d.isDataDriven:!1;d=b.getPaintProperty("circle-stroke-color");b.hasDataDrivenStrokeColor=d?d.isDataDriven:!1;d=b.getPaintProperty("circle-stroke-opacity");b.hasDataDrivenStrokeOpacity=d?d.isDataDriven:!1;d=b.getPaintProperty("circle-blur");b.hasDataDrivenBlur=d?d.isDataDriven:!1;return b}e(b,a);return b}(l);
g.CircleStyleLayer=l;l=function(){return function(a,b,c){this.cap=a.getLayoutValue("line-cap",b,c);this.join=a.getLayoutValue("line-join",b,c);this.miterLimit=a.getLayoutValue("line-miter-limit",b,c);this.roundLimit=a.getLayoutValue("line-round-limit",b,c)}}();g.LineLayout=l;l=function(){return function(a,b,c,d){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b,d);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b,d);this.optional=a.getLayoutValue("icon-optional",b,d);this.rotationAlignment=
a.getLayoutValue("icon-rotation-alignment",b,d);this.size=a.getLayoutValue("icon-size",b,d);this.rotate=a.getLayoutValue("icon-rotate",b,d);this.padding=a.getLayoutValue("icon-padding",b,d);this.keepUpright=a.getLayoutValue("icon-keep-upright",b,d);this.offset=a.getLayoutValue("icon-offset",b,d);2===this.rotationAlignment&&(this.rotationAlignment=c?0:1)}}();g.IconLayout=l;l=function(){return function(a,b,c,d){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b,d);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",
b,d);this.optional=a.getLayoutValue("text-optional",b,d);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b,d);this.fontArray=a.getLayoutValue("text-font",b,d);this.maxWidth=a.getLayoutValue("text-max-width",b,d);this.lineHeight=a.getLayoutValue("text-line-height",b,d);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b,d);this.justify=a.getLayoutValue("text-justify",b,d);this.anchor=a.getLayoutValue("text-anchor",b,d);this.maxAngle=a.getLayoutValue("text-max-angle",b,d);
this.size=a.getLayoutValue("text-size",b,d);this.rotate=a.getLayoutValue("text-rotate",b,d);this.padding=a.getLayoutValue("text-padding",b,d);this.keepUpright=a.getLayoutValue("text-keep-upright",b,d);this.transform=a.getLayoutValue("text-transform",b,d);this.offset=a.getLayoutValue("text-offset",b,d);2===this.rotationAlignment&&(this.rotationAlignment=c?0:1)}}();g.TextLayout=l})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(l,g){return function(){function e(c,
a,b){this._op=c;"$type"===a?(this._val=b instanceof Array?b.map(function(a){return e._types.indexOf(a)}):e._types.indexOf(b),this._op+=11):(this._key=a,this._val=b)}e.prototype.filter=function(c){switch(this._op){case 0:return this._val;case 1:return c.values[this._key]===this._val;case 2:return c.values[this._key]!==this._val;case 3:return c.values[this._key]<this._val;case 4:return c.values[this._key]>this._val;case 5:return c.values[this._key]<=this._val;case 6:return c.values[this._key]>=this._val;
case 7:return-1!==this._val.indexOf(c.values[this._key]);case 8:return-1===this._val.indexOf(c.values[this._key]);case 9:for(var a=0,b=this._val;a<b.length;a++){var e=b[a];if(e.filter(c))return!0}return!1;case 10:a=0;for(b=this._val;a<b.length;a++)if(e=b[a],!e.filter(c))return!1;return!0;case 11:a=0;for(b=this._val;a<b.length;a++)if(e=b[a],e.filter(c))return!1;return!0;case 12:return c.type===this._val;case 13:return c.type!==this._val;case 14:return c.type<this._val;case 15:return c.type>this._val;
case 16:return c.type>=this._val;case 17:return c.type<=this._val;case 18:return-1!==this._val.indexOf(c.type);case 19:return-1===this._val.indexOf(c.type);case 20:return void 0!==c.values[this._key];case 21:return void 0===c.values[this._key]}};e.createFilter=function(c){if(!c)return new e(0,void 0,!0);var a=c[0];if(1>=c.length)return new e(0,void 0,"any"!==a);switch(a){case "\x3d\x3d":return new e(1,c[1],c[2]);case "!\x3d":return new e(2,c[1],c[2]);case "\x3e":return new e(4,c[1],c[2]);case "\x3c":return new e(3,
c[1],c[2]);case "\x3e\x3d":return new e(6,c[1],c[2]);case "\x3c\x3d":return new e(5,c[1],c[2]);case "in":return new e(7,c[1],c.slice(2));case "!in":return new e(8,c[1],c.slice(2));case "any":return new e(9,void 0,c.slice(1).map(e.createFilter.bind(this)));case "all":return new e(10,void 0,c.slice(1).map(e.createFilter.bind(this)));case "none":return new e(11,void 0,c.slice(1).map(e.createFilter.bind(this)));case "has":return new e(20,c[1],void 0);case "!has":return new e(21,c[1],void 0);default:throw Error("invalid operator: "+
a);}};e._types=["Unknown","Point","LineString","Polygon"];return e}()})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(l,g){Object.defineProperty(g,"__esModule",{value:!0});l=function(){function e(){}e.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};e.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};e.lineLayoutDefinition={visibility:{type:"enum",values:["visible",
"none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};e.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",
default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",
length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},
"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",
default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}};e.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};e.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}};e.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",
default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}};e.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",
values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}};e.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},
"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,
default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};e.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},
"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};e.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],
default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}};return e}();g.StyleDefinition=l})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(l,g,e,c){return function(){function a(b,c,e){this.isDataDriven=!1;switch(c.type){case "number":b=!0;break;case "color":b=!0;e=a._parseColor(e);
break;case "array":b="number"===c.value;break;default:b=!1}null==e&&(e=c.default);b&&"interval"===e.type&&(b=!1);var m=e&&e.stops&&0<e.stops.length;if(m)for(var h=0,d=e.stops;h<d.length;h++){var f=d[h];f[1]=this._validate(f[1],c)}if(this.isDataDriven=e?!!e.property:!1)if(void 0!==e.default&&(e.default=this._validate(e.default,c)),m)switch(e.type){case "identity":this.getValue=this._buildIdentity(e,c);break;case "categorical":this.getValue=this._buildCategorical(e,c);break;default:this.getValue=b?
this._buildInterpolate(e,c):this._buildInterval(e,c)}else this.getValue=this._buildIdentity(e,c);else m?this.getValue=b?this._buildZoomInterpolate(e):this._buildZoomInterval(e):(e=this._validate(e,c),this.getValue=this._buildSimple(e))}a.prototype._validate=function(a,c){if("number"===c.type){if(a<c.minimum)return c.minimum;if(a>c.maximum)return c.maximum}return a};a.prototype._buildSimple=function(a){return function(){return a}};a.prototype._buildIdentity=function(b,c){var e=this;return function(m,
h){var d;h&&(d=h.values[b.property],"color"===c.type&&(d=a._parseColor(d)));void 0===d&&(d=b.default);return void 0!==d?e._validate(d,c):c.default}};a.prototype._buildCategorical=function(a,c){var b=this;return function(e,h){var d;h&&(d=h.values[a.property]);d=b._categorical(d,a.stops);return void 0!==d?d:void 0!==a.default?a.default:c.default}};a.prototype._buildInterval=function(a,c){var b=this;return function(e,h){var d;h&&(d=h.values[a.property]);return"number"===typeof d?b._interval(d,a.stops):
void 0!==a.default?a.default:c.default}};a.prototype._buildInterpolate=function(a,c){var b=this;return function(e,h){var d;h&&(d=h.values[a.property]);return"number"===typeof d?b._interpolate(d,a.stops,a.base||1):void 0!==a.default?a.default:c.default}};a.prototype._buildZoomInterpolate=function(a){var b=this;return function(c){return b._interpolate(c,a.stops,a.base||1)}};a.prototype._buildZoomInterval=function(a){var b=this;return function(c){return b._interval(c,a.stops)}};a.prototype._categorical=
function(a,c){for(var b=c.length,e=0;e<b;e++)if(c[e][0]===a)return c[e][1]};a.prototype._interval=function(a,c){for(var b=c.length,e=0,h=0;h<b;h++)if(c[h][0]<=a)e=h;else break;return c[e][1]};a.prototype._interpolate=function(a,e,g){for(var b,h,d=e.length,f=0;f<d;f++){var m=e[f];if(m[0]<=a)b=m;else{h=m;break}}if(b&&h){f=h[0]-b[0];a-=b[0];g=1===g?a/f:(Math.pow(g,a)-1)/(Math.pow(g,f)-1);if(Array.isArray(b[1])){b=b[1];h=h[1];a=[];for(f=0;f<b.length;f++)a.push(c.interpolate(b[f],h[f],g));return a}return c.interpolate(b[1],
h[1],g)}if(b)return b[1];if(h)return h[1]};a._isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};a._parseColor=function(b){if(Array.isArray(b))return b;if("string"===typeof b){if(b=new e(b),!this._isEmpty(b))return e.toUnitRGBA(b)}else return b&&b.default&&(b.default=a._parseColor(b.default)),b&&b.stops&&(b.stops=b.stops.map(function(b){return[b[0],a._parseColor(b[1])]})),b};return a}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(l,
g){function e(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(g,"__esModule",{value:!0});g.C_INFINITY=Number.POSITIVE_INFINITY;g.C_PI=Math.PI;g.C_2PI=2*g.C_PI;g.C_PI_BY_2=g.C_PI/2;g.C_RAD_TO_256=128/g.C_PI;g.C_256_TO_RAD=g.C_PI/128;g.C_DEG_TO_256=256/360;g.C_DEG_TO_RAD=g.C_PI/180;g.C_SQRT2=1.414213562;g.C_SQRT2_INV=1/g.C_SQRT2;var c=1/Math.LN2;g.positiveMod=e;g.radToByte=function(a){return e(a*g.C_RAD_TO_256,256)};g.degToByte=function(a){return e(a*g.C_DEG_TO_256,256)};g.log2=function(a){return Math.log(a)*
c};g.sqr=function(a){return a*a};g.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};g.interpolate=function(a,b,c){return a*(1-c)+b*c};g.between=function(a,b,c){return a>=b&&a<=c||a>=c&&a<=b}})},"*noref":1}});
define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../request ../core/Error ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../views/vectorTiles/SchemaHelper ../views/vectorTiles/style/StyleRepository".split(" "),function(l,
g,e,c,a,b,m,n,p,h,d,f,q,r,t,y,u,z,A,v,w,B,C,x,D){return function(g){function k(a,b){a=g.call(this)||this;a.capabilities=null;a.currentStyleInfo=null;a.fullExtent=null;a.style=null;a.operationalLayerType="VectorTileLayer";a.tileInfo=null;a.tilemapCache=null;a.type="vector-tile";a.url=null;return a}c(k,g);k.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?e({url:a},b):a};k.prototype.load=function(){var a=this,c=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1}).then(function(){if(a.portalItem&&
a.portalItem.id){var c=a.portalItem.itemUrl+"/resources/styles/root.json";return b(c,{query:{f:"json"}}).then(function(b){b.data&&a.read({url:c},C.createForItem(a.portalItem))})}}).then(function(){return a.loadStyle()},function(){return a.loadStyle()});this.addResolvingPromise(c);return this.when()};Object.defineProperty(k.prototype,"attributionDataUrl",{get:function(){var a=this.currentStyleInfo;return(a=a&&a.serviceUrl&&d.urlToObject(a.serviceUrl))?this._getDefaultAttribution(a.path):null},enumerable:!0,
configurable:!0});k.prototype.readCapabilities=function(a,b){var c=b.capabilities&&b.capabilities.split(",").map(function(a){return a.toLowerCase().trim()});a=!!b.exportTilesAllowed;c=-1!==c.indexOf("tilemap");return{operations:{supportsExportTiles:a,supportsTileMap:c},exportTiles:a?{maxExportTilesCount:+b.maxExportTilesCount}:null}};Object.defineProperty(k.prototype,"parsedUrl",{get:function(){return this.serviceUrl?h.urlToObject(this.serviceUrl):null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,
"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0});k.prototype.writeStyleUrl=function(a,b){a&&d.isProtocolRelative(a)&&
(a="https:"+a);b.styleUrl=a};k.prototype.readTileIndexType=function(a,b){return b.type};k.prototype.readTileIndexUrl=function(a,b){return d.join(this.serviceUrl,b.tileMap)};k.prototype.readTilemapCache=function(a,b){return b.capabilities&&-1<b.capabilities.indexOf("Tilemap")?new w({layer:this}):null};k.prototype.readTileServers=function(a,b){a=b.tiles;var c=this.serviceUrl||this.styleUrl&&d.removeFile(this.styleUrl);c&&a.forEach(function(a,b,e){d.isAbsolute(a)?e[b]=a:e[b]=d.join(c,a)});return a};
k.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)};k.prototype.readCompatibleTileInfo256=function(a,b){return v.fromJSON(x.create256x256CompatibleTileInfo(b.tileInfo))};k.prototype.readCompatibleTileInfo512=function(a,b){return v.fromJSON(x.create512x512CompatibleTileInfo(b.tileInfo))};k.prototype.loadStyle=function(a){a=a||this.style||this.url;if(this._loadingPromise&&"string"===typeof a&&this.url===a)return this._loadingPromise;var b=this._loadingPromise;
this._loadingPromise=this._getSourceAndStyle(a);b&&!b.isFulfilled()&&b.cancel();return this._loadingPromise};k.prototype.getStyleLayerId=function(a){return this.styleRepository.getStyleLayerId(a)};k.prototype.getPaintProperties=function(a){return this.styleRepository.getPaintProperties(a)};k.prototype.setPaintProperties=function(a,b){a=this.styleRepository.setPaintProperties(a,b);this.emit("paint-change",{layer:a,paint:b})};k.prototype.getLayoutProperties=function(a){return this.styleRepository.getLayoutProperties(a)};
k.prototype.setLayoutProperties=function(a,b){a=this.styleRepository.setLayoutProperties(a,b);this.emit("layout-change",{layer:a,layout:b})};k.prototype.getTileUrl=function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,c.toString())};k.prototype.write=function(a,b){return b&&b.origin&&!this.styleUrl?(b.messages&&b.messages.push(new m("vectortilelayer:unsupported","VectorTileLayer ("+this.title+
", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[a,b])};k.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return p.create(function(a){return l(["../views/2d/layers/VectorTileLayerView2D"],a)});case "3d":return p.create(function(a){return l(["../views/3d/layers/VectorTileLayerView3D"],a)})}};k.prototype._getSourceAndStyle=function(a){var b=this;return a?B.loadMetadata(a).then(function(c){b._set("currentStyleInfo",
{serviceUrl:c.serviceUrl,styleUrl:c.styleUrl,spriteUrl:c.spriteUrl,glyphsUrl:c.glyphsUrl,style:c.style,layerDefinition:c.layerDefinition});"string"===typeof a?(b.url=a,b.style=null):(b.url=null,b.style=a);b._set("styleRepository",new D(c.style,c));b.read(c.layerDefinition,{origin:"service"})}):p.reject(Error("invalid style!"))};k.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);
if(b&&(a=b[3]&&b[3].toLowerCase()))for(var b=b[2]||"",c=0,e="OpenStreetMap_v2 OpenStreetMap_Export_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84".split(" ");c<e.length;c++){var f=e[c];if(-1<f.toLowerCase().indexOf(a))return d.normalize("//static.arcgis.com/attribution/Vector"+b+"/"+f)}};a([f.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],k.prototype,"attributionDataUrl",null);a([f.property({readOnly:!0})],k.prototype,
"capabilities",void 0);a([f.reader("capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount"])],k.prototype,"readCapabilities",null);a([f.property({readOnly:!0})],k.prototype,"currentStyleInfo",void 0);a([f.property({type:q,readOnly:!0})],k.prototype,"fullExtent",void 0);a([f.property()],k.prototype,"style",void 0);a([f.property({type:["VectorTileLayer"]})],k.prototype,"operationalLayerType",void 0);a([f.property({readOnly:!0,dependsOn:["serviceUrl"]})],k.prototype,"parsedUrl",null);
a([f.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],k.prototype,"serviceUrl",null);a([f.property({type:r,dependsOn:["tileInfo"],readOnly:!0})],k.prototype,"spatialReference",null);a([f.property({readOnly:!0})],k.prototype,"styleRepository",void 0);a([f.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],k.prototype,"styleUrl",null);a([f.writer(["portal-item","web-document"],"styleUrl")],
k.prototype,"writeStyleUrl",null);a([f.property({readOnly:!0})],k.prototype,"tileIndexType",void 0);a([f.reader("tileIndexType",["tileIndexType","type"])],k.prototype,"readTileIndexType",null);a([f.property({readOnly:!0})],k.prototype,"tileIndexUrl",void 0);a([f.reader("tileIndexUrl",["tileIndexUrl","tileMap"])],k.prototype,"readTileIndexUrl",null);a([f.property({readOnly:!0,type:v})],k.prototype,"tileInfo",void 0);a([f.property({readOnly:!0,type:w})],k.prototype,"tilemapCache",void 0);a([f.reader("tilemapCache",
["capabilities"])],k.prototype,"readTilemapCache",null);a([f.property({readOnly:!0})],k.prototype,"tileServers",void 0);a([f.reader("tileServers",["tiles"])],k.prototype,"readTileServers",null);a([f.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],k.prototype,"type",void 0);a([f.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],k.prototype,"url",void 0);a([f.property({readOnly:!0})],k.prototype,"version",void 0);
a([f.reader("version",["version","currentVersion"])],k.prototype,"readVersion",null);a([f.property({readOnly:!0})],k.prototype,"compatibleTileInfo256",void 0);a([f.reader("compatibleTileInfo256",["tileInfo"])],k.prototype,"readCompatibleTileInfo256",null);a([f.property({readOnly:!0})],k.prototype,"compatibleTileInfo512",void 0);a([f.reader("compatibleTileInfo512",["tileInfo"])],k.prototype,"readCompatibleTileInfo512",null);return k=a([f.subclass("esri.layers.VectorTileLayer")],k)}(f.declared(t,u,
z,A,n,y))});