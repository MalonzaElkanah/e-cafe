// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/SpatialReference ./ArcGISService ../support/commonProperties".split(" "),function(p,q,f,c,b,g,l,m,n){return function(e){function a(){var d=null!==e&&e.apply(this,arguments)||this;d.capabilities=void 0;d.copyright=null;d.fullExtent=null;d.legendEnabled=!0;d.spatialReference=null;d.version=null;return d}f(a,e);a.prototype.readCapabilities=
function(d,a){var b=a.capabilities&&a.capabilities.split(",").map(function(a){return a.toLowerCase().trim()});if(!b)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};d=this.type;var c=-1!==b.indexOf("query"),k=-1!==b.indexOf("map"),e=!!a.exportTilesAllowed,b=-1!==b.indexOf("tilemap"),h="tile"!==d&&!!a.supportsDynamicLayers,f="tile"!==d&&(!a.tileInfo||h),g="tile"!==d&&(!a.tileInfo||h);return{operations:{supportsQuery:c,
supportsExportMap:k,supportsExportTiles:e,supportsTileMap:b},exportMap:k?{supportsSublayersChanges:"tile"!==d,supportsDynamicLayers:h,supportsSublayerVisibility:f,supportsSublayerDefinitionExpression:g}:null,exportTiles:e?{maxExportTilesCount:+a.maxExportTilesCount}:null}};a.prototype.readVersion=function(a,b){(a=b.currentVersion)||(a=b.hasOwnProperty("capabilities")||b.hasOwnProperty("tables")?10:b.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3);return a};c([b.property({readOnly:!0})],a.prototype,
"capabilities",void 0);c([b.reader("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],a.prototype,"readCapabilities",null);c([b.property({json:{read:{source:"copyrightText"}}})],a.prototype,"copyright",void 0);c([b.property({type:g})],a.prototype,"fullExtent",void 0);c([b.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],a.prototype,"id",void 0);c([b.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},
read:{source:"showLegend"},write:{target:"showLegend"}}})],a.prototype,"legendEnabled",void 0);c([b.property(n.popupEnabled)],a.prototype,"popupEnabled",void 0);c([b.property({type:l})],a.prototype,"spatialReference",void 0);c([b.property()],a.prototype,"version",void 0);c([b.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],a.prototype,"readVersion",null);return a=c([b.subclass("esri.layers.mixins.ArcGISMapService")],a)}(b.declared(m))});