// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../geometry ../../Graphic ../../core/compilerUtils ../../core/lang ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/quantizationUtils ../support/Field ../../views/3d/support/buffer/typedArrayUtil ./dehydratedFeatureComparison".split(" "),function(K,d,E,p,l,q,F,f,k,m,G,n,H){function r(a,b,c){if(!a)return null;switch(b){case "point":return a={x:a.x,y:a.y,z:a.z,m:a.m,hasZ:null!=a.z,hasM:null!=
a.m,type:b,spatialReference:c};case "polyline":return a={paths:a.paths,hasZ:!!a.hasZ,hasM:!!a.hasM,type:b,spatialReference:c};case "polygon":return a={rings:a.rings,hasZ:!!a.hasZ,hasM:!!a.hasM,type:b,spatialReference:c};case "multipoint":return a={points:a.points,hasZ:!!a.hasZ,hasM:!!a.hasM,type:b,spatialReference:c}}}function t(a,b,c,h){return{x:a,y:b,z:c,hasZ:null!=c,hasM:!1,spatialReference:h,type:"point"}}function u(a){return"declaredClass"in a}function v(a){return"declaredClass"in a}function w(a){if(!a)return 0;
switch(a.type){case "point":return 1;case "polyline":var b=0,c=0;for(a=a.paths;c<a.length;c++)b+=a[c].length;return b;case "polygon":c=b=0;for(a=a.rings;c<a.length;c++)b+=a[c].length;return b;case "multipoint":return a.points.length;case "extent":return 2;case "mesh":return(b=a.vertexAttributes&&a.vertexAttributes.position)?b.length/3:0;default:l.neverReached(a)}}function I(a){var b=a.spatialReference.toJSON();switch(a.type){case "point":return{x:a.x,y:a.y,z:a.z,m:a.m,spatialReference:b};case "polygon":var c=
a.hasZ,h=a.hasM;return{rings:x(a.rings),hasZ:c,hasM:h,spatialReference:b};case "polyline":var d=a.paths,c=a.hasZ,h=a.hasM;return{paths:x(d),hasZ:c,hasM:h,spatialReference:b};case "extent":var d=a.xmin,g=a.xmax,e=a.ymin,f=a.ymax,k=a.zmin,m=a.zmax,n=a.mmin,p=a.mmax,c=a.hasZ,h=a.hasM;return{xmin:d,xmax:g,ymin:e,ymax:f,zmin:k,zmax:m,mmin:n,mmax:p,hasZ:c,hasM:h,spatialReference:b};case "multipoint":return d=a.points,c=a.hasZ,h=a.hasM,{points:y(d)?z(d):d,hasZ:c,hasM:h,spatialReference:b};default:l.neverReached(a)}}
function x(a){if(J(a))return a.map(function(a){return z(a)})}function z(a){return a.map(function(a){return n.toArray(a)})}function J(a){for(var b=0;b<a.length;b++){var c=a[b];if(0!==c.length)return y(c)}return!1}function y(a){return a.length&&(n.isFloat32Array(a[0])||n.isFloat64Array(a[0]))}function A(a,b){f.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[3]=a.x;b[1]=b[4]=a.y;a.hasZ&&(b[2]=b[5]=a.z);break;case "polyline":for(var c=0;c<a.paths.length;c++)f.expandWithNestedArray(b,
a.paths[c],a.hasZ);break;case "polygon":for(c=0;c<a.rings.length;c++)f.expandWithNestedArray(b,a.rings[c],a.hasZ);break;case "multipoint":f.expandWithNestedArray(b,a.points,a.hasZ);break;case "extent":b[0]=a.xmin;b[1]=a.ymin;b[3]=a.xmax;b[4]=a.ymax;null!=a.zmin&&(b[2]=a.zmin);null!=a.zmax&&(b[5]=a.zmax);break;default:l.neverReached(a)}}function B(a,b){k.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[2]=a.x;b[1]=b[3]=a.y;break;case "polyline":for(var c=0;c<a.paths.length;c++)k.expandWithNestedArray(b,
a.paths[c]);break;case "polygon":for(c=0;c<a.rings.length;c++)k.expandWithNestedArray(b,a.rings[c]);break;case "multipoint":k.expandWithNestedArray(b,a.points);break;case "extent":b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;break;default:l.neverReached(a)}}Object.defineProperty(d,"__esModule",{value:!0});d.equals=H.equals;d.isPoint=function(a){return"point"===a.type};d.fromFeatureSetJSON=function(a){var b=E.featureGeometryTypeKebabDictionary.fromJSON(a.geometryType),c=F.fromJSON(a.spatialReference),
d=a.transform,f=a.features.map(function(g){var e=a.objectIdFieldName;g={uid:p.generateUID(),objectId:e&&g.attributes?g.attributes[e]:null,attributes:g.attributes,geometry:r(g.geometry,b,c),visible:!0};if((e=g.geometry)&&d)switch(e.type){case "point":g.geometry=m.hydratePoint(d,e,e,e.hasZ,e.hasM);break;case "multipoint":g.geometry=m.hydrateMultipoint(d,e,e,e.hasZ,e.hasM);break;case "polygon":g.geometry=m.hydratePolygon(d,e,e,e.hasZ,e.hasM);break;case "polyline":g.geometry=m.hydratePolyline(d,e,e,e.hasZ,
e.hasM);break;default:l.neverReached(e)}return g});return{geometryType:b,features:f,spatialReference:c,fields:a.fields?a.fields.map(function(a){return G.fromJSON(a)}):null,objectIdFieldName:a.objectIdFieldName,globalIdFieldName:a.globalIdFieldName,geohashFieldName:a.geohashFieldName,geometryProperties:a.geometryProperties,hasZ:a.hasZ,hasM:a.hasM,exceededTransferLimit:a.exceededTransferLimit,transform:null}};d.fromJSONGeometry=r;d.makeDehydratedPoint=t;d.isHydratedGeometry=u;d.isHydratedGraphic=v;
d.hydrateGraphic=function(a,b){if(!a||v(a))return a;b=new p({layer:b,sourceLayer:b});b.visible=a.visible;b.symbol=q.clone(a.symbol);b.attributes=q.clone(a.attributes);a.geometry&&("mesh"===a.geometry.type?b.geometry=a.geometry:b.read({geometry:I(a.geometry)}));return b};d.clonePoint=function(a){if(!a)return null;if(u(a))return a.clone();var b=t(a.x,a.y,a.z,a.spatialReference);a.hasM&&(b.m=a.m,b.hasM=!0);return b};d.estimateSize=function(a){for(var b=32,c=0,d=Object.keys(a.attributes);c<d.length;c++){var f=
d[c],b=b+f.length,f=a.attributes[f];switch(typeof f){case "string":b+=f.length;break;default:case "number":b+=8}}a=a.geometry?"mesh"===a.geometry.type?0:w(a.geometry):0;return b+12*a};d.numVertices=w;d.hasVertices=function(a){if(!a)return!1;switch(a.type){case "extent":case "point":return!0;case "polyline":var b=0;for(a=a.paths;b<a.length;b++)if(0<a[b].length)return!0;return!1;case "polygon":b=0;for(a=a.rings;b<a.length;b++)if(0<a[b].length)return!0;return!1;case "multipoint":return 0<a.points.length;
case "mesh":return a.vertexAttributes&&a.vertexAttributes.position&&0<a.vertexAttributes.position.length;default:l.neverReached(a)}};d.computeAABB=A;d.expandAABB=function(a,b){A(a,C);f.expand(b,C)};d.computeAABR=B;d.expandAABR=function(a,b){B(a,D);k.expand(b,D)};var C=f.create(),D=k.create()});