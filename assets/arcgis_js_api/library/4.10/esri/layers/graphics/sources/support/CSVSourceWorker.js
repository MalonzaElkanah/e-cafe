// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
require({cache:{"dstore/Csv":function(){define(["dojo/_base/lang","dojo/_base/declare"],function(w,a){function v(a,c){var g={},k=a.length,l;for(l=0;l<k;l++)g[a[l]]=c[l];return g}var m=/^\s*"([\S\s]*)"\s*$/,c=/""/g,g=/"/g;return a(null,{fieldNames:null,delimiter:",",newline:"\r\n",trim:!1,parse:function(a){var g=[];a=a.split(this.newline);var l=this.fieldNames,u=0,x=[],q="",A="",h,p,n,b,e,E,I;e=0;n=a.length;a:for(;e<n;e++)if(w.trim(a[e])){h=a[e].split(this.delimiter);E=0;for(b=h.length;E<b;E++){p=
h[E];I=-1;q+=A+p;for(A="";0<=(I=p.indexOf('"',I+1));)u++;if(0===u%2){if(0<u)if(u=m.exec(q))x.push(u[1].replace(c,'"'));else{console.warn("Csv: discarding row with invalid value: "+q);x=[];q="";u=0;continue a}else x.push(this.trim||!l?w.trim(q):q);q="";u=0}else A=this.delimiter}0===u?(l?g.push(v(l,x)):l=this.fieldNames=x,x=[]):A=this.newline}return g},toCsv:function(a){return this.stringify(this.data,a)},stringify:function(a,c){c=c||{};var k=c.alwaysQuote,l=this.fieldNames,m=this.delimiter,q=this.newline,
A="",h,p,n,b;for(h=-1;h<a.length;h++)for(-1<h&&(A+=q),p=0;p<l.length;p++){n=0>h?l[p]:a[h][l[p]];if(null===n||void 0===n)n="";"string"!==typeof n&&(n=n.toString());b=k||0<=n.indexOf('"')||0<=n.indexOf(m);A+=(0<p?m:"")+(b?'"'+n.replace(g,'""')+'"':n)}c.trailingNewline&&(A+=q);return A}})})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),function(w,a,v,m,c,g){function l(a,l,h,p,n){void 0===p&&(p=
null);void 0===n&&(n=!1);if(null===p){var b=g.cacheKey(l,h);void 0!==x[b]?p=x[b]:(p=k(l,h,null),null===p&&(p=new g),x[b]=p)}return t._project(a,l,h instanceof c||!1===n?h:new c(h),p,n)}function k(a,c,h){void 0===h&&(h=null);a=t._getTransformation(a,c,h);return null!==a?g.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});var t=null;a.isLoaded=function(){return!!t&&m.isLoaded()};a.isSupported=function(){return m.isSupported()};var u=null;a.load=function(){return u?u:u=v.create(function(a,
c){var h=m.load();w(["./geometryEngine"],function(p){t=p;h.then(function(){t._enableProjection(m);a()},function(a){c(a)})})})};a.project=function(a,c,h){void 0===h&&(h=null);return a instanceof Array?0===a.length?[]:l(a,a[0].spatialReference,c,h):l([a],a.spatialReference,c,h)[0]};var x={};a.projectMany=l;a.getTransformation=k;a.getTransformations=function(a,c,h){void 0===h&&(h=null);a=t._getTransformationBySuitability(a,c,h);if(null!==a){c=[];for(h=0;h<a.length;h++)c.push(g.fromGE(a[h]));return c}return[]}})},
"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","../core/has","../core/promiseUtils"],function(w,a,v,m,c){function g(b){function e(a,b,e){a[b]=e(a[b])}a._pe=b;q.init();A.init();h.init();p.init();n.init();a.PeGCSExtent=function(b){function e(){return null!==b&&b.apply(this,arguments)||this}v(e,b);e.prototype.destroy=function(){a._pe.destroy(this)};return e}(a._pe.PeGCSExtent);for(var c=0,I=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,
a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];c<I.length;c++)b=I[c],e(b.prototype,"getName",function(a){return function(){return a.call(this,Array(q.PE_NAME_MAX))}});c=0;for(I=[a._pe.PeGeogtran,a._pe.PeProjcs];c<I.length;c++)b=I[c],e(b.prototype,"getParameters",function(b){return function(){for(var e=Array(q.PE_PARM_MAX),h=b.call(this),c=0;c<e.length;c++){var p=a._pe.getValue(h,"*");e[c]=p?a._pe.wrapPointer(p,a._pe.PeParameter):null;h+=Int32Array.BYTES_PER_ELEMENT}return e}});e(a._pe.PeHorizon.prototype,
"getCoord",function(a){return function(){var b=this.getSize();if(!b)return null;var e=[],h=a.call(this);u(e,b,h);return e}});e(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var e=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var h=null,c=b.call(this);if(!a._pe.compare(c,a._pe.NULL)){var h=[c],p=this.getSteps();if(1<p)for(var c=a._pe.getPointer(c),n=1;n<p;n++)h.push(a._pe.wrapPointer(c+e*n,a._pe.PeGTlistExtendedGTs))}return h}});var g=a._pe._pe_getPeHorizonSize();b=function(b){return function(){var e=
this._cache;e||(this._cache=e=new Map);if(e.has(b))return e.get(b);var h=null,c=b.call(this);if(!a._pe.compare(c,a._pe.NULL)){var h=[c],p=c.getNump();if(1<p)for(var c=a._pe.getPointer(c),n=1;n<p;n++)h.push(a._pe.wrapPointer(c+g*n,a._pe.PeHorizon))}e.set(b,h);return h}};e(a._pe.PeProjcs.prototype,"horizonGcsGenerate",b);e(a._pe.PeProjcs.prototype,"horizonPcsGenerate",b);a._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=q.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var e=a._pe.getPointer(this),
h=a._pe.ensureInt8(Array(q.PE_BUFFER_MAX));return a._pe.Pointer_stringify(a._pe._pe_object_to_string_ext(e,b,h))}}function l(b){if(b){var e=a._pe.getClass(b);e&&(e=a._pe.getCache(e))&&(b=a._pe.getPointer(b))&&delete e[b]}}function k(b,e){var h=[];e=Array(e);for(var c=0;c<b;c++)h.push(a._pe.ensureInt8(e));return h}function t(a){var b;Array.isArray(a[0])?(b=[],a.forEach(function(a){b.push(a[0],a[1])})):b=a;return b}function u(b,e,h,c){void 0===c&&(c=!1);if(c)for(c=0;c<2*e;c++)b[c]=a._pe.getValue(h+
c*Float64Array.BYTES_PER_ELEMENT,"double");else{var p=0===b.length;for(c=0;c<e;c++)p&&(b[c]=Array(2)),b[c][0]=a._pe.getValue(h,"double"),b[c][1]=a._pe.getValue(h+Float64Array.BYTES_PER_ELEMENT,"double"),h+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",{value:!0});var x;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!m("esri-wasm")};a.load=function(){return x?x:x=c.create(function(a,e){w(["./support/pe-wasm"],function(b){b({locateFile:function(a){return w.toUrl("./support/"+
a)},onAbort:function(a){e(Error(a))}}).then(function(b){g(b);a()})})})};(function(b){function e(b,e,h){a._pe.ensureCache.prepare();var c=t(h),p=h===c,c=a._pe.ensureFloat64(c);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),e,c))&&u(h,e,c,p);return b}function h(a,b,e){return c(a,b,e,0)}function c(b,e,h,c){a._pe.ensureCache.prepare();var p=t(h),n=h===p,p=a._pe.ensureFloat64(p);(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),e,p,c))&&u(h,e,p,n);return b}b.geogToProj=e;b.projGeog=function(a,b,c,p){switch(p){case q.PE_TRANSFORM_P_TO_G:return h(a,
b,c);case q.PE_TRANSFORM_G_TO_P:return e(a,b,c)}return 0};b.projToGeog=h;b.projToGeogCenter=c})(a.PeCSTransformations||(a.PeCSTransformations={}));var q;(function(b){b.init=function(){b.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;
b.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=
a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(q=a.PeDefs||(a.PeDefs={}));(function(b){function e(b,e){var p=null,n=c[b];n||(n={},c[b]=n);n.hasOwnProperty(String(e))?p=n[e]:(b=a._pe.PeFactory.prototype.factoryByType(b,e),a._pe.compare(b,a._pe.NULL)||(p=b,n[e]=p));return p=h(p)}function h(b){if(b){var e=b.getType();
switch(e){case q.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case q.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case q.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:e&q.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var c={},p={};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(a){return e(q.PE_TYPE_COORDSYS,a)};b.factoryByType=e;b.fromString=function(b,e){var c=null,n=p[b];n||(n={},p[b]=n);n.hasOwnProperty(e)?
c=n[e]:(b=a._pe.PeFactory.prototype.fromString(b,e),a._pe.compare(b,a._pe.NULL)||(c=b,n[e]=c));return c=h(c)};b.geogcs=function(a){return e(q.PE_TYPE_GEOGCS,a)};b.geogtran=function(a){return e(q.PE_TYPE_GEOGTRAN,a)};b.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};b.projcs=function(a){return e(q.PE_TYPE_PROJCS,a)};b.unit=function(a){return e(q.PE_TYPE_UNIT,a)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;var A;(function(b){var e;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;
e=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(b,h,c,p,n,g){var E=null,k=new a._pe.PeInteger(g);try{var I=a._pe.PeGTlistExtended.prototype.getGTlist(b,h,c,p,n,k);if(g=k.val)if(E=[I],1<g){var B=a._pe.getPointer(I);for(b=1;b<g;b++)E.push(a._pe.wrapPointer(B+e*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(k)}return E}})(A=a.PeGTlistExtended||(a.PeGTlistExtended={}));(function(b){b.destroy=function(b){if(b&&b.length){for(var e=0;e<b.length;e++){var h=b[e];l(h);h.getEntries().forEach(function(a){l(a);
a=a.getGeogtran();l(a);a.getParameters().forEach(l);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){l(a);var b=a.getDatum();l(b);l(b.getSpheroid());l(a.getPrimem());l(a.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(b){b.geogToGeog=function(b,h,c,p,n){a._pe.ensureCache.prepare();var e=t(c),g=c===e,e=a._pe.ensureFloat64(e),E=0;p&&(E=a._pe.ensureFloat64(p));(b=a._pe._pe_geog_to_geog(a._pe.getPointer(b),h,e,E,
n))&&u(c,h,e,g);return b}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(b){function e(b,e,h,c,p,n){a._pe.ensureCache.prepare();var g,E;switch(b){case "dd":g=a._pe._pe_geog_to_dd;E=q.PE_DD_MAX;break;case "ddm":g=a._pe._pe_geog_to_ddm;E=q.PE_DDM_MAX;break;case "dms":g=a._pe._pe_geog_to_dms,E=q.PE_DMS_MAX}b=0;e&&(b=a._pe.getPointer(e));e=t(c);e=a._pe.ensureFloat64(e);E=k(h,E);c=a._pe.ensureInt32(E);if(p=g(b,h,e,p,c))for(g=0;g<h;g++)n[g]=a._pe.Pointer_stringify(E[g]);return p}function h(b,
e,h,c,p){a._pe.ensureCache.prepare();var n;switch(b){case "dd":n=a._pe._pe_dd_to_geog;break;case "ddm":n=a._pe._pe_ddm_to_geog;break;case "dms":n=a._pe._pe_dms_to_geog}b=0;e&&(b=a._pe.getPointer(e));e=c.map(function(b){return a._pe.ensureString(b)});c=a._pe.ensureInt32(e);e=a._pe.ensureFloat64(Array(2*h));(n=n(b,h,c,e))&&u(p,h,e);return n}b.geog_to_dms=function(a,b,h,c,p){return e("dms",a,b,h,c,p)};b.dms_to_geog=function(a,b,e,c){return h("dms",a,b,e,c)};b.geog_to_ddm=function(a,b,h,c,p){return e("ddm",
a,b,h,c,p)};b.ddm_to_geog=function(a,b,e,c){return h("ddm",a,b,e,c)};b.geog_to_dd=function(a,b,h,c,p){return e("dd",a,b,h,c,p)};b.dd_to_geog=function(a,b,e,c){return h("dd",a,b,e,c)}})(a.PeNotationDms||(a.PeNotationDms={}));var h;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(b,h,c,p,n,g,l){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=t(c);c=a._pe.ensureFloat64(b);b=k(h,q.PE_MGRS_MAX);var E=a._pe.ensureInt32(b);if(p=a._pe._pe_geog_to_mgrs_extended(e,h,c,p,n,g,E))for(n=0;n<h;n++)l[n]=a._pe.Pointer_stringify(b[n]);return p};b.mgrs_to_geog_extended=function(b,h,c,p,n){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=c.map(function(b){return a._pe.ensureString(b)});
c=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*h));(p=a._pe._pe_mgrs_to_geog_extended(e,h,c,p,b))&&u(n,h,b);return p}})(h=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(b){b.geog_to_usng=function(b,h,c,p,n,g,l){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=t(c);c=a._pe.ensureFloat64(b);b=k(h,q.PE_MGRS_MAX);var E=a._pe.ensureInt32(b);if(p=a._pe._pe_geog_to_usng(e,h,c,p,n,g,E))for(n=0;n<h;n++)l[n]=a._pe.Pointer_stringify(b[n]);return p};b.usng_to_geog=function(b,h,c,p){a._pe.ensureCache.prepare();
var e=0;b&&(e=a._pe.getPointer(b));b=c.map(function(b){return a._pe.ensureString(b)});c=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*h));(e=a._pe._pe_usng_to_geog(e,h,c,b))&&u(p,h,b);return e}})(a.PeNotationUsng||(a.PeNotationUsng={}));var p;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(b,
h,c,p,n){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=t(c);c=a._pe.ensureFloat64(b);b=k(h,q.PE_UTM_MAX);var g=a._pe.ensureInt32(b);if(p=a._pe._pe_geog_to_utm(e,h,c,p,g))for(e=0;e<h;e++)n[e]=a._pe.Pointer_stringify(b[e]);return p};b.utm_to_geog=function(b,h,c,p,n){a._pe.ensureCache.prepare();var e=0;b&&(e=a._pe.getPointer(b));b=c.map(function(b){return a._pe.ensureString(b)});c=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*h));(p=a._pe._pe_utm_to_geog(e,h,c,p,b))&&u(n,h,b);
return p}})(p=a.PeNotationUtm||(a.PeNotationUtm={}));var n;(function(b){var e=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(h,c){void 0===c&&(c=b.PE_PCSINFO_OPTION_DOMAIN);var p,n;e.has(h)&&(n=e.get(h),n[c]&&(p=n[c]));
p||(p=a._pe.PePCSInfo.prototype.generate(h,c),n||(n=[],e.set(h,n)),n[c]=p);return p}})(n=a.PePCSInfo||(a.PePCSInfo={}));(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=g})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(w,a,v){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=
null;if(a&&a.steps){var c=0;for(a=a.steps;c<a.length;c++){var l=a[c];l instanceof v?this.steps.push(l):this.steps.push(new v({wkid:l.wkid,wkt:l.wkt,isInverse:l.isInverse}))}}}a.cacheKey=function(a,g){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==g.wkid&&null!==g.wkid?g.wkid.toString():"-1",void 0!==g.wkt&&null!==g.wkt?g.wkt.toString():""].join()};a.fromGE=function(c){var g=new a,l="",k=0;for(c=c.steps;k<c.length;k++){var m=v.fromGE(c[k]);
g.steps.push(m);l+=m.uid.toString()+","}g._cached_projection={};g._gtlistentry=null;g._chain=l;return g};a.prototype.getInverse=function(){var c=new a;c.steps=[];for(var g=this.steps.length-1;0<=g;g--)c.steps.push(this.steps[g].getInverse());return c};a.prototype.getGTListEntry=function(){for(var a="",g=0,l=this.steps;g<l.length;g++)a+=l[g].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(c,
g,l){this._cached_projection[a.cacheKey(c,g)]=l};a.prototype.getCachedGeTransformation=function(c,g){for(var l="",k=0,m=this.steps;k<m.length;k++)l+=m[k].uid.toString()+",";l!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=l);c=this._cached_projection[a.cacheKey(c,g)];return void 0===c?null:c};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(w,a){var v=0;return function(){function a(a){void 0===a&&(a=
null);this.uid=v++;a?(this._wkt=void 0!==a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(c){var g=new a;g._wkt=c.wkt;g._wkid=c.wkid;g._isInverse=c.isInverse;return g};Object.defineProperty(a.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=v++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},
set:function(a){this._wkid=a;this.uid=v++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=v++},enumerable:!0,configurable:!0});a.prototype.getInverse=function(){var c=new a;c._wkt=this.wkt;c._wkid=this._wkid;c._isInverse=!this.isInverse;return c};return a}()})},"esri/layers/graphics/data/FeatureStore":function(){define("require exports @dojo/framework/shim/Map ../../../core/Error ../../../core/has ../../../core/Logger ../../../core/libs/rbush/rbush ../../../geometry/support/aaBoundingRect ../featureConversionUtils".split(" "),
function(w,a,v,m,c,g,l,k,t){Object.defineProperty(a,"__esModule",{value:!0});var u=[],x=g.getLogger("esri.layers.graphics.data.FeatureStore"),q={minX:0,minY:0,maxX:0,maxY:0};w=function(){function a(a){this._featuresById=new v.default;this._boundsByFeature=new v.default;this._featuresByBounds=new v.default;this._index=l(9,c("csp-restrictions")?function(a){return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}}:["[0]","[1]","[2]","[3]"]);this._geometryInfo=a}Object.defineProperty(a.prototype,"geometryType",
{get:function(){return this._geometryInfo.geometryType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasM",{get:function(){return this._geometryInfo.hasM},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasZ",{get:function(){return this._geometryInfo.hasZ},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"numFeatures",{get:function(){return this._featuresById.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fullBounds",
{get:function(){if(!this.numFeatures)return null;var a=k.create(k.NEGATIVE_INFINITY);this._boundsByFeature.forEach(function(h){h&&(a[0]=Math.min(h[0],a[0]),a[1]=Math.min(h[1],a[1]),a[2]=Math.max(h[2],a[2]),a[3]=Math.max(h[3],a[3]))});return a},enumerable:!0,configurable:!0});a.prototype.setEngine=function(a){this._engine=a};a.prototype.add=function(a){this._add(a,u);this._index.load(u);this._clearCache();u.length=0};a.prototype.addMany=function(a){for(var h=0;h<a.length;h++)this._add(a[h],u);this._index.load(u);
this._clearCache();u.length=0};a.prototype.clear=function(){this._featuresById.clear();this._boundsByFeature.clear();this._featuresByBounds.clear();this._index.clear();this._clearCache()};a.prototype.removeManyById=function(a){for(var h=0;h<a.length;h++){var c=a[h],b=this._featuresById.get(c);if(b){var e=this._boundsByFeature.get(b);e&&(this._index.remove(e),this._featuresByBounds.delete(e));this._boundsByFeature.delete(b)}this._featuresById.delete(c)}this._clearCache()};a.prototype.forEachBounds=
function(a,c){for(var h=0;h<a.length;h++){var b=a[h],e=this._boundsByFeature.get(b);e&&c(e,b)}};a.prototype.getFeature=function(a){return this._featuresById.get(a)};a.prototype.hasFeature=function(a){return this._featuresById.has(a)};a.prototype.forEachFeature=function(a){this._featuresById.forEach(function(h){return a(h)})};a.prototype.forEachFeatureInBounds=function(a,c){var h=0,b=this._index;q.minX=a[0];q.minY=a[1];q.maxX=a[2];q.maxY=a[3];for(a=b.search(q);h<a.length;h++)c(this._featuresByBounds.get(a[h]))};
a.prototype.transferIds=function(a,c){for(var h=[],b=0;b<c.length;b++){var e=this._featuresById.get(c[b]);e&&(this._remove(e),h.push(e))}a.addMany(h);this._clearCache()};a.prototype.transferIdRange=function(a,c,n){for(var b=[];c<n;c++){var e=this._featuresById.get(c);e&&(this._remove(e),b.push(e))}a.addMany(b);this._clearCache()};a.prototype.transferIf=function(a,c){var h=this,b=[];this._featuresById.forEach(function(a,p){c(a)&&(h._remove(a),b.push(a))});a.addMany(b);this._clearCache()};a.prototype.transferAll=
function(a){var h=this,c=[];this._featuresById.forEach(function(a,e){h._remove(a);c.push(a)});a.addMany(c);this._clearCache()};a.prototype._clearCache=function(){this._engine&&this._engine.clearCache()};a.prototype._add=function(a,c){if(a){var h=a.objectId;if(null==h)x.error(new m("featurestore:invalid-feature","feature id is missing",{feature:a}));else{var b=this._featuresById.get(h),e;b&&(e=this._boundsByFeature.get(b))&&(this._index.remove(e),this._boundsByFeature.delete(b),this._featuresByBounds.delete(e));
a.geometry?(e=t.getBoundsOptimizedGeometry(e||k.create(),a.geometry,this._geometryInfo.hasZ,this._geometryInfo.hasM),this._boundsByFeature.set(a,e),this._featuresByBounds.set(e,a),this._featuresById.set(h,a),c.push(e)):(this._boundsByFeature.set(a,null),this._featuresById.set(h,a))}}};a.prototype._remove=function(a){var h;if(a){if(h=this._boundsByFeature.get(a))this._index.remove(h),this._boundsByFeature.delete(a),this._featuresByBounds.delete(h);this._featuresById.delete(a.objectId)}};return a}();
a.default=w})},"@dojo/framework/shim/Map":function(){(function(w){"object"===typeof module&&"object"===typeof module.exports?(w=w(require,exports),void 0!==w&&(module.exports=w)):"function"===typeof define&&define.amd&&define("require exports tslib ./iterator ./global ./object ./support/has ./Symbol".split(" "),w)})(function(w,a){Object.defineProperty(a,"__esModule",{value:!0});var v=w("tslib"),m=w("./iterator"),c=w("./global"),g=w("./object"),l=w("./support/has");w("./Symbol");a.Map=c.default.Map;
l.default("es6-map")||(a.Map=(k=function(){function a(a){this._keys=[];this._values=[];this[Symbol.toStringTag]="Map";if(a)if(m.isArrayLike(a))for(var c=0;c<a.length;c++){var g=a[c];this.set(g[0],g[1])}else try{for(var c=v.__values(a),k=c.next();!k.done;k=c.next())g=k.value,this.set(g[0],g[1])}catch(n){h={error:n}}finally{try{k&&!k.done&&(p=c.return)&&p.call(c)}finally{if(h)throw h.error;}}var h,p}a.prototype._indexOfKey=function(a,c){for(var k=0,l=a.length;k<l;k++)if(g.is(a[k],c))return k;return-1};
Object.defineProperty(a.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._keys.length=this._values.length=0};a.prototype.delete=function(a){a=this._indexOfKey(this._keys,a);if(0>a)return!1;this._keys.splice(a,1);this._values.splice(a,1);return!0};a.prototype.entries=function(){var a=this,c=this._keys.map(function(c,g){return[c,a._values[g]]});return new m.ShimIterator(c)};a.prototype.forEach=function(a,c){for(var g=this._keys,
k=this._values,h=0,p=g.length;h<p;h++)a.call(c,k[h],g[h],this)};a.prototype.get=function(a){a=this._indexOfKey(this._keys,a);return 0>a?void 0:this._values[a]};a.prototype.has=function(a){return-1<this._indexOfKey(this._keys,a)};a.prototype.keys=function(){return new m.ShimIterator(this._keys)};a.prototype.set=function(a,c){var g=this._indexOfKey(this._keys,a),g=0>g?this._keys.length:g;this._keys[g]=a;this._values[g]=c;return this};a.prototype.values=function(){return new m.ShimIterator(this._values)};
a.prototype[Symbol.iterator]=function(){return this.entries()};return a}(),k[Symbol.species]=k,k));a.default=a.Map;var k})},"@dojo/framework/shim/object":function(){(function(w){"object"===typeof module&&"object"===typeof module.exports?(w=w(require,exports),void 0!==w&&(module.exports=w)):"function"===typeof define&&define.amd&&define(["require","exports","./global","./support/has","./Symbol"],w)})(function(w,a){Object.defineProperty(a,"__esModule",{value:!0});var v=w("./global"),m=w("./support/has"),
c=w("./Symbol");m.default("es6-object")?(w=v.default.Object,a.assign=w.assign,a.getOwnPropertyDescriptor=w.getOwnPropertyDescriptor,a.getOwnPropertyNames=w.getOwnPropertyNames,a.getOwnPropertySymbols=w.getOwnPropertySymbols,a.is=w.is,a.keys=w.keys):(a.keys=function(a){return Object.keys(a).filter(function(a){return!a.match(/^@@.+/)})},a.assign=function(c){for(var g=[],k=1;k<arguments.length;k++)g[k-1]=arguments[k];if(null==c)throw new TypeError("Cannot convert undefined or null to object");var m=
Object(c);g.forEach(function(c){c&&a.keys(c).forEach(function(a){m[a]=c[a]})});return m},a.getOwnPropertyDescriptor=function(a,l){c.isSymbol(l);return Object.getOwnPropertyDescriptor(a,l)},a.getOwnPropertyNames=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!a.match(/^@@.+/)})},a.getOwnPropertySymbols=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!!a.match(/^@@.+/)}).map(function(a){return Symbol.for(a.substring(2))})},a.is=function(a,c){return a===
c?0!==a||1/a===1/c:a!==a&&c!==c});m.default("es2017-object")?(w=v.default.Object,a.getOwnPropertyDescriptors=w.getOwnPropertyDescriptors,a.entries=w.entries,a.values=w.values):(a.getOwnPropertyDescriptors=function(c){return a.getOwnPropertyNames(c).reduce(function(g,k){g[k]=a.getOwnPropertyDescriptor(c,k);return g},{})},a.entries=function(c){return a.keys(c).map(function(a){return[a,c[a]]})},a.values=function(c){return a.keys(c).map(function(a){return c[a]})})})},"esri/core/libs/rbush/rbush":function(){define(["../quickselect/quickselect"],
function(w){function a(c,p){if(!(this instanceof a))return new a(c,p);this._maxEntries=Math.max(4,c||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));p&&("function"===typeof p?this.toBBox=p:this._initFormat(p));this.clear()}function v(a,c){m(a,0,a.children.length,c,a)}function m(a,p,n,b,e){e||(e=q(null));e.minX=Infinity;e.minY=Infinity;e.maxX=-Infinity;e.maxY=-Infinity;for(var h;p<n;p++)h=a.children[p],c(e,a.leaf?b(h):h);return e}function c(a,c){a.minX=Math.min(a.minX,c.minX);a.minY=
Math.min(a.minY,c.minY);a.maxX=Math.max(a.maxX,c.maxX);a.maxY=Math.max(a.maxY,c.maxY);return a}function g(a,c){return a.minX-c.minX}function l(a,c){return a.minY-c.minY}function k(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function t(a){return a.maxX-a.minX+(a.maxY-a.minY)}function u(a,c){return a.minX<=c.minX&&a.minY<=c.minY&&c.maxX<=a.maxX&&c.maxY<=a.maxY}function x(a,c){return c.minX<=a.maxX&&c.minY<=a.maxY&&c.maxX>=a.minX&&c.maxY>=a.minY}function q(a){return{children:a,height:1,leaf:!0,minX:Infinity,
minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function A(a,c,n,b,e){for(var h=[c,n],p;h.length;)n=h.pop(),c=h.pop(),n-c<=b||(p=c+Math.ceil((n-c)/b/2)*b,w(a,p,c,n,e),h.push(c,p,p,n))}a.prototype={all:function(){return this._all(this.data,[])},search:function(a){var c=this.data,h=[],b=this.toBBox;if(!x(a,c))return h;for(var e=[],g,k,l,m;c;){g=0;for(k=c.children.length;g<k;g++)l=c.children[g],m=c.leaf?b(l):l,x(a,m)&&(c.leaf?h.push(l):u(a,m)?this._all(l,h):e.push(l));c=e.pop()}return h},collides:function(a){var c=
this.data,h=this.toBBox;if(!x(a,c))return!1;for(var b=[],e,g,k,l;c;){e=0;for(g=c.children.length;e<g;e++)if(k=c.children[e],l=c.leaf?h(k):k,x(a,l)){if(c.leaf||u(a,l))return!0;b.push(k)}c=b.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var c=0,h=a.length;c<h;c++)this.insert(a[c]);return this}a=this._build(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(c=this.data,
this.data=a,a=c),this._insert(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this._insert(a,this.data.height-1);return this},clear:function(){this.data=q([]);return this},remove:function(a,c){if(!a)return this;for(var h=this.data,b=this.toBBox(a),e=[],p=[],g,k,l,m;h||e.length;){h||(h=e.pop(),k=e[e.length-1],g=p.pop(),m=!0);if(h.leaf){a:{l=a;var t=h.children,q=c;if(q){for(var x=0;x<t.length;x++)if(q(l,t[x])){l=x;break a}l=-1}else l=t.indexOf(l)}if(-1!==l){h.children.splice(l,
1);e.push(h);this._condense(e);break}}m||h.leaf||!u(h,b)?k?(g++,h=k.children[g],m=!1):h=null:(e.push(h),p.push(g),g=0,k=h,h=h.children[0])}return this},toBBox:function(a){return a},compareMinX:g,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,c){for(var h=[];a;)a.leaf?c.push.apply(c,a.children):h.push.apply(h,a.children),a=h.pop();return c},_build:function(a,c,n,b){var e=n-c+1,h=this._maxEntries,g;if(e<=h)return g=q(a.slice(c,n+1)),v(g,
this.toBBox),g;b||(b=Math.ceil(Math.log(e)/Math.log(h)),h=Math.ceil(e/Math.pow(h,b-1)));g=q([]);g.leaf=!1;g.height=b;var e=Math.ceil(e/h),h=e*Math.ceil(Math.sqrt(h)),p,k,l;for(A(a,c,n,h,this.compareMinX);c<=n;c+=h)for(k=Math.min(c+h-1,n),A(a,c,k,e,this.compareMinY),p=c;p<=k;p+=e)l=Math.min(p+e-1,k),g.children.push(this._build(a,p,l,b-1));v(g,this.toBBox);return g},_chooseSubtree:function(a,c,n,b){for(var e,h,g,p,l,m,t,q;;){b.push(c);if(c.leaf||b.length-1===n)break;t=q=Infinity;e=0;for(h=c.children.length;e<
h;e++)g=c.children[e],l=k(g),m=(Math.max(g.maxX,a.maxX)-Math.min(g.minX,a.minX))*(Math.max(g.maxY,a.maxY)-Math.min(g.minY,a.minY))-l,m<q?(q=m,t=l<t?l:t,p=g):m===q&&l<t&&(t=l,p=g);c=p||c.children[0]}return c},_insert:function(a,g,n){var b=this.toBBox;n=n?a:b(a);var b=[],e=this._chooseSubtree(n,this.data,g,b);e.children.push(a);for(c(e,n);0<=g;)if(b[g].children.length>this._maxEntries)this._split(b,g),g--;else break;this._adjustParentBBoxes(n,b,g)},_split:function(a,c){var h=a[c],b=h.children.length,
e=this._minEntries;this._chooseSplitAxis(h,e,b);b=this._chooseSplitIndex(h,e,b);b=q(h.children.splice(b,h.children.length-b));b.height=h.height;b.leaf=h.leaf;v(h,this.toBBox);v(b,this.toBBox);c?a[c-1].children.push(b):this._splitRoot(h,b)},_splitRoot:function(a,c){this.data=q([a,c]);this.data.height=a.height+1;this.data.leaf=!1;v(this.data,this.toBBox)},_chooseSplitIndex:function(a,c,g){var b,e,h,n,p,l,t;p=l=Infinity;for(b=c;b<=g-c;b++)e=m(a,0,b,this.toBBox),h=m(a,b,g,this.toBBox),n=Math.max(0,Math.min(e.maxX,
h.maxX)-Math.max(e.minX,h.minX))*Math.max(0,Math.min(e.maxY,h.maxY)-Math.max(e.minY,h.minY)),e=k(e)+k(h),n<p?(p=n,t=b,l=e<l?e:l):n===p&&e<l&&(l=e,t=b);return t},_chooseSplitAxis:function(a,c,n){var b=a.leaf?this.compareMinX:g,e=a.leaf?this.compareMinY:l,h=this._allDistMargin(a,c,n,b);c=this._allDistMargin(a,c,n,e);h<c&&a.children.sort(b)},_allDistMargin:function(a,g,n,b){a.children.sort(b);b=this.toBBox;var e=m(a,0,g,b),h=m(a,n-g,n,b),k=t(e)+t(h),p,l;for(p=g;p<n-g;p++)l=a.children[p],c(e,a.leaf?b(l):
l),k+=t(e);for(p=n-g-1;p>=g;p--)l=a.children[p],c(h,a.leaf?b(l):l),k+=t(h);return k},_adjustParentBBoxes:function(a,g,n){for(;0<=n;n--)c(g[n],a)},_condense:function(a){for(var c=a.length-1,h;0<=c;c--)0===a[c].children.length?0<c?(h=a[c-1].children,h.splice(h.indexOf(a[c]),1)):this.clear():v(a[c],this.toBBox)},_initFormat:function(a){var c=["return a"," - b",";"];this.compareMinX=new Function("a","b",c.join(a[0]));this.compareMinY=new Function("a","b",c.join(a[1]));this.toBBox=new Function("a","return {minX: a"+
a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};return a})},"esri/core/libs/quickselect/quickselect":function(){define([],function(){function w(m,c,g,l,k){for(;l>g;){if(600<l-g){var t=l-g+1,u=c-g+1,x=Math.log(t),q=.5*Math.exp(2*x/3),x=.5*Math.sqrt(x*q*(t-q)/t)*(0>u-t/2?-1:1);w(m,c,Math.max(g,Math.floor(c-u*q/t+x)),Math.min(l,Math.floor(c+(t-u)*q/t+x)),k)}t=m[c];u=g;q=l;a(m,g,c);for(0<k(m[l],t)&&a(m,g,l);u<q;){a(m,u,q);u++;for(q--;0>k(m[u],t);)u++;for(;0<k(m[q],t);)q--}0===k(m[g],t)?
a(m,g,q):(q++,a(m,q,l));q<=c&&(g=q+1);c<=q&&(l=q-1)}}function a(a,c,g){var l=a[c];a[c]=a[g];a[g]=l}function v(a,c){return a<c?-1:a>c?1:0}return function(a,c,g,l,k){w(a,c,g||0,l||a.length-1,k||v)}})},"esri/layers/graphics/data/QueryEngine":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/Map @dojo/framework/shim/Set ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/MemCache ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/aaBoundingRect ../../../geometry/support/normalizeUtils ../../../geometry/support/scaleUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./utils ../../../tasks/support/Query".split(" "),
function(w,a,v,m,c,g,l,k,t,u,x,q,A,h,p,n,b,e,E,I,F,X){function Y(a){return a?JSON.parse(JSON.stringify(a,["latestWkid","wkid","wkt"])):a}function D(a,b,c,e,h,g,n,k){n&&!g?e.forEachFeatureInBounds(h,function(b){var e=F.getCentroid(c,b,k);b=b.attributes;e&&a.push(new T(b,null,e))}):g&&!n?e.forEachFeatureInBounds(h,function(e){var h=e.attributes,g=F.getGeometry(c,e,0,k);g&&(b.add(e.objectId),a.push(new T(h,g)))}):e.forEachFeatureInBounds(h,function(e){var h=e.attributes,g=F.getGeometry(c,e,0,k),n=F.getCentroid(c,
e,k);g&&n&&(b.add(e.objectId),a.push(new T(h,g,n)))})}Object.defineProperty(a,"__esModule",{value:!0});var R=k.getLogger("esri.layers.graphics.data.QueryEngine"),T=function(){return function(a,b,c){this.attributes=a;this.geometry=b;this.centroid=c}}(),y={},B=new c.default,Q=new t.Storage(2E6),H=0;w=function(){function a(a){var b=this;this.capabilities={query:e.queryCapabilities};this.fieldsMap=new m.default;this.geometryType=a.geometryType;this.hasM=a.hasM;this.hasZ=a.hasZ;this.objectIdField=a.objectIdField;
this.spatialReference=a.spatialReference;this.definitionExpression=a.definitionExpression;this.cacheSpatialQueries=a.cacheSpatialQueries||!1;this.gdbVersion=a.gdbVersion;this.historicMoment=a.historicMoment;this.spatialIndex=a.spatialIndex;this.spatialIndex.setEngine(this);this.timeInfo=a.timeInfo;this.cacheSpatialQueries&&(this._geometryQueryCache=new t(H++ +"$$",Q));a.fields.forEach(function(a){b.fieldsMap.set(a.name.trim(),a);b.fieldsMap.set(a.name.trim().toLowerCase(),a)})}a.prototype.destroy=
function(){this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this.fieldsMap.clear()};Object.defineProperty(a.prototype,"fullExtent",{get:function(){var a=this.spatialIndex.fullBounds;return a?{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:Y(this.spatialReference)}:null},enumerable:!0,configurable:!0});a.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._allItems=null};a.prototype.executeQuery=function(a){var b=this;
void 0===a&&(a=new X);var c=a.clone();return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).catch(function(a){if(a===y)return new E.default([],b);throw a;}).then(function(a){return a.createQueryResponse(c)})};a.prototype.executeQueryForCount=function(a){var b=this;void 0===a&&(a=new X);var c=a.clone();c.returnGeometry=
!1;c.returnCentroid=!1;c.outSpatialReference=null;return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){return a.size}).catch(function(a){if(a===y)return 0;throw a;})};a.prototype.executeQueryForExtent=function(a){var c=this;void 0===a&&(a=new X);var e=a.clone(),g=e.outSpatialReference;return this._normalizeQuery(e).then(function(a){return c._checkQuerySupport(a)}).then(function(){e.returnGeometry=
!0;e.returnCentroid=!1;e.outSpatialReference=null;return e}).then(function(a){return c._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(e)}).then(function(a){return a.executeAttributesQuery(e)}).then(function(a){var e=a.size;if(!e)return{count:e,extent:null};var n={xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:Y(c.spatialReference)};c.spatialIndex.forEachBounds(a.items,function(a){n.xmin=
Math.min(a[0],n.xmin);n.ymin=Math.min(a[1],n.ymin);n.xmax=Math.max(a[2],n.xmax);n.ymax=Math.max(a[3],n.ymax)});a=b.project(n,a.spatialReference,g);a.spatialReference=Y(g&&g.toJSON()||c.spatialReference);if(0===a.xmax-a.xmin){var k=h.getMetersPerUnitForSR(a.spatialReference);a.xmin-=k;a.xmax+=k}0===a.ymax-a.ymin&&(k=h.getMetersPerUnitForSR(a.spatialReference),a.ymin-=k,a.ymax+=k);return{count:e,extent:a}}).catch(function(a){if(a===y)return{count:0,extent:null};throw a;})};a.prototype.executeQueryForIds=
function(a){var b=this;void 0===a&&(a=new X);var c=a.clone();c.returnGeometry=!1;c.returnCentroid=!1;c.outSpatialReference=null;return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){a=a.items;for(var b=[],c=0;c<a.length;c++)b[c]=a[c].objectId;return b}).catch(function(a){if(a===y)return[];throw a;
})};a.prototype.executeTileQuery=function(a,b){var e=this,h=b.returnGeometry,g=b.returnCentroid,n=b.pixelBuffer;b=new c.default;var k=[],n=n*a.resolution,B=q.pad(a.bounds,n,q.create());D(k,b,this,this.spatialIndex,B,h,g,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[a.bounds[0],a.bounds[3]]});if("esriGeometryPoint"===this.geometryType||g){var l=p.getInfo(this.spatialReference);if(l){var y=l.valid,l=y[0],y=y[1];if(B[0]<l){var S=q.fromValues(y-n,B[1],y,B[3]);D(k,b,this,this.spatialIndex,
S,h,g,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[y,a.bounds[3]]})}B[2]>y&&(n=q.fromValues(l,B[1],l+n,B[3]),D(k,b,this,this.spatialIndex,n,h,g,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[l-y+a.bounds[0],a.bounds[3]]}))}}k.sort(function(a,b){return a.attributes[e.objectIdField]-b.attributes[e.objectIdField]});return{features:k,objectIds:b}};a.prototype.executeTileQueryForIds=function(a,b){a=q.pad(a.bounds,b.pixelBuffer*a.resolution,q.create());
var c=[];this.spatialIndex.forEachFeatureInBounds(a,function(a){return c.push(a.objectId)});return c};a.prototype.executeQueryForLatestObservations=function(a){var b=this;if(this.timeInfo)return this.executeQuery(a).then(function(a){return b._filterLatest(a,b.timeInfo)});R.error(new l("invalid-query","Unable to make time-based query as the underlying service does include TimeInfo"))};a.prototype._filterLatest=function(a,b){var c=b.trackIdField,e=b.startTimeField;b=b.endTimeField||e;for(var e=new m.default,
h=[],g=0,n=a.features;g<n.length;g++){var k=n[g],B=k.attributes[c],p=k.attributes[b];(!e.has(B)||e.get(B).attributes[b]<p)&&e.set(B,k)}e.forEach(function(a){return h.push(a)});return v({},a,{features:h})};a.prototype._getAll=function(){if(!this._allItems){var a=[];this.spatialIndex.forEachFeature(function(b){return a.push(b)});this._allItems=new E.default(a,this)}return this._allItems};a.prototype._normalizeQuery=function(a){var c=this,e=this.definitionExpression,h=a.where,g=a.geometry,n=a.outFields,
k=a.orderByFields,B=a.groupByFieldsForStatistics,p=a.outStatistics;a.where=h=h&&h.trim();if(!h||/^1 *= *1$/.test(h)||e&&e===h)a.where=null;if(n)for(e=0;e<n.length;e++)n[e]=n[e].trim();if(k)for(e=0;e<k.length;e++)k[e]=k[e].trim();if(B)for(e=0;e<B.length;e++)B[e]=B[e].trim();if(p)for(e=0;e<p.length;e++)p[e].onStatisticField&&(p[e].onStatisticField=p[e].onStatisticField.trim());if(!g)return u.resolve(a);a.outSpatialReference||(a.outSpatialReference=g.spatialReference);return this._getInputGeometry(a).then(function(b){return a.geometry=
b}).then(function(a){return b.checkProjectionSupport(a.spatialReference,c.spatialReference)}).then(function(){return A.normalizeCentralMeridian(a.geometry)}).then(function(a){return b.project(a[0].toJSON(),a[0].spatialReference,c.spatialReference)}).then(function(b){if(!b)throw y;b.spatialReference=c.spatialReference;return a.read({geometry:b})})};a.prototype._executeGeometryQuery=function(a){var b=this,c=a.geometry,e=a.outSpatialReference,h=a.spatialRelationship,g=p.isValid(e)&&!p.equals(this.spatialReference,
e),n=g?JSON.stringify({geometry:c,spatialRelationship:h,outSpatialReference:e}):JSON.stringify({geometry:c,spatialRelationship:h});if(this.cacheSpatialQueries){var k=this._geometryQueryCache.get(n);if(void 0!==k)return u.resolve(k)}k=null;if(c){var B=this._searchSpatialIndex(this._getQueryBBoxes(c));if(!B.length)return c=new E.default([],this),this.cacheSpatialQueries&&this._geometryQueryCache.put(n,c,c.size||1),u.resolve(c);k="envelope-intersects"===a.spatialRelationship||"esriGeometryPoint"===this.geometryType&&
I.canQueryWithRBush(c)?u.resolve(new E.default(B,this)):I.getSpatialQueryOperator(h,c,this.geometryType).then(function(a){if(a){var c=B.filter(function(c){return a(F.getGeometry(b,c))});return new E.default(c,b)}})}else k=u.resolve(this._getAll());return k.then(function(c){if(g&&(a.returnGeometry||a.returnCentroid))return c.project(e).then(function(a){b.cacheSpatialQueries&&b._geometryQueryCache.put(n,a,a.size||1);return a});b.cacheSpatialQueries&&b._geometryQueryCache.put(n,c,c.size||1);return c})};
a.prototype._getInputGeometry=function(a){var c=a.geometry,e=a.distance,n=a.units;if(null==e)return u.resolve(c);a=c.spatialReference;var k=n||h.getUnitString(a),n=null,n=a&&(a.isGeographic||a.isWebMercator)?u.resolve(c):b.checkProjectionSupport(a,g.SpatialReference.WGS84).then(function(){return x.project(c,g.SpatialReference.WGS84)});return n.then(function(a){return I.getGeodesicBufferOperator().then(function(b){return b(a,e,k)})})};a.prototype._getQueryBBoxes=function(a){if("point"===a.type)return[q.fromValues(a.x,
a.y,a.x,a.y)];a=I.canQueryWithRBush(a)?a:a.extent;switch(a.type){case "extent":return[q.fromExtent(a)];case "polygon":return a.rings.map(function(a){return q.fromValues(a[0][0],a[0][1],a[2][0],a[2][1])})}};a.prototype._searchSpatialIndex=function(a){for(var b=[],c=0;c<a.length;c++)this.spatialIndex.forEachFeatureInBounds(a[c],function(a){B.has(a)||(b.push(a),B.add(a))});B.clear();return b};a.prototype._checkQuerySupport=function(a){return 0>a.distance||null!=a.geometryPrecision||a.multipatchOption||
a.pixelSize||a.relationParameter||a.text||a.timeExtent?u.reject(new l("feature-store:unsupported-query","Unsupported query options",{query:a})):u.all([this._checkAttributesQuerySupport(a),this._checkStatisticsQuerySupport(a),I.checkSpatialQuerySupport(a,this.geometryType,this.spatialReference),b.checkProjectionSupport(this.spatialReference,a.outSpatialReference)]).then(function(){return a})};a.prototype._checkAttributesQuerySupport=function(a){var b=a.outFields,c=a.orderByFields,e=a.returnDistinctValues;
c&&0<c.length&&(c=c.map(function(a){return-1<a.indexOf(" ASC")?a.split(" ASC")[0]:-1<a.indexOf(" DESC")?a.split(" DESC")[0]:a}),n.validateFields(this.fieldsMap,c,"orderByFields contains missing fields"));if(b&&0<b.length)n.validateFields(this.fieldsMap,b,"outFields contains missing fields");else if(e)throw new l("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:a});n.validateWhere(this.fieldsMap,a.where)};a.prototype._checkStatisticsQuerySupport=function(a){var b=
a.outStatistics,c=a.groupByFieldsForStatistics,e=a.having,h=c&&c.length,g=b&&b.length;if(e){if(!h||!g)return u.reject(new l("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:a}));n.validateHaving(this.fieldsMap,e,b)}if(g&&!b.some(function(a){return"exceedslimit"===a.statisticType}))for(e=b.map(function(a){return a.onStatisticField}),n.validateFields(this.fieldsMap,e,"onStatisticFields contains missing fields"),h&&n.validateFields(this.fieldsMap,
c,"groupByFieldsForStatistics contains missing fields"),c=0;c<b.length;c++){var e=b[c],g=e.onStatisticField,k=e.statisticType;if("exceedslimit"===k)return u.reject(new l("feature-store:unsupported-query","statistic type exceedslimit is not supported",{definition:e,query:a}));if((!h||"count"!==k)&&g&&n.hasInvalidFieldType(g,this.fieldsMap))return u.reject(new l("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:e,query:a}))}};return a}();a.default=w})},"esri/layers/graphics/data/attributeSupport":function(){define("require exports @dojo/framework/shim/Set ../../../core/Error ../../../core/ItemCache ../../../core/sql/WhereClause".split(" "),
function(w,a,v,m,c,g){function l(c){if(!c)return null;var k=a.invalidClauseCache.get(c);if(void 0!==k)return k;k=a.whereClausesCache.get(c);if(void 0!==k)return k;k=g.create(c);a.whereClausesCache.put(c,k);return k}function k(a,c,g,h){void 0===h&&(h=!0);for(var p=[],n=0;n<c.length;n++){var b=c[n];if("*"!==b&&!a.has(b))if(h){var e=t(b);try{var E=l(e);if(!E.isStandardized())throw new m("feature-store:unsupported-query","expression is not standard",{clause:E});k(a,E.getFields(),"expression contains missing fields")}catch(I){if((e=
I&&I.details)&&e.clause)throw I;e&&e.missingFields?Array.prototype.push.apply(p,e.missingFields):p.push(b)}}else p.push(b)}if(p.length)throw new m("feature-store:unsupported-query",g,{missingFields:p});}function t(a){return a.split(" as ")[0]}Object.defineProperty(a,"__esModule",{value:!0});a.invalidClauseCache=new c(500);a.whereClausesCache=new c(50);var u=new v.default("esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
a.validateWhere=function(c,l){if(!l)return!0;var t;try{t=g.create(l),a.whereClausesCache.put(l,t)}catch(h){throw a.invalidClauseCache.put(l,null),new m("feature-store:unsupported-query","invalid SQL expression",{where:l});}if(!t.isStandardized())throw new m("feature-store:unsupported-query","where clause is not standard",{where:l});l=t.getFields();k(c,l,"where clause contains missing fields");return!0};a.validateHaving=function(c,l,t){if(!l)return!0;var h;try{h=g.create(l),a.whereClausesCache.put(l,
h)}catch(n){throw a.invalidClauseCache.put(l,null),new m("feature-store:unsupported-query","invalid SQL expression",{having:l});}if(!h.isAggregate())throw new m("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:l});var p=h.getFields();k(c,p,"having contains missing fields");if(!h.getExpressions().every(function(a){var b=a.aggregateType;a=a.field;var e=c.has(a)&&c.get(a).name;return t.some(function(a){var h=a.statisticType;a=a.onStatisticField.toLowerCase().trim();
return(c.has(a)&&c.get(a).name)===e&&h.toLowerCase().trim()===b})}))throw new m("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:l});return!0};a.getWhereClause=l;a.validateFields=k;a.getExpressionFromFieldName=t;a.getAliasFromFieldName=function(a){return a.split(" as ")[1]};a.hasInvalidFieldType=function(a,c){var g=!1;-1!==l(a).getFields().indexOf(a)&&(a=c.get(a),g=!u.has(a.type));return g}})},"esri/core/sql/WhereClause":function(){define("require exports @dojo/framework/shim/array @dojo/framework/shim/Map ../../moment ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),
function(w,a,v,m,c,g,l,k){function t(a){return Array.isArray(a)?a:[a]}function u(a){return null!==a?!0!==a:null}function x(a,b){if(null==a)return null;for(var c=!1,h=0;h<b.length;h++){var g=b[h];if(null==g)c=null;else if(a===g){c=!0;break}}return c}function q(a,b,c){if(null==a)return null;for(var e="",h=0,g=0;g<b.length;g++){var k=b.charAt(g);switch(h){case 0:k===c?h=1:e=0<="-[]/{}()*+?.\\^$|".indexOf(k)?e+("\\"+k):"%"===k?e+".*":"_"===k?e+".":e+k;break;case 1:e=0<="-[]/{}()*+?.\\^$|".indexOf(k)?
e+("\\"+k):e+k,h=0}}return(new RegExp("^"+e+"$")).test(a)}function A(a){return a instanceof Date?a.valueOf():a}function h(a,b,c){if(null==b||null==c)return null;b=A(b);c=A(c);switch(a){case "\x3c\x3e":return b!==c;case "\x3d":return b===c;case "\x3e":return b>c;case "\x3c":return b<c;case "\x3e\x3d":return b>=c;case "\x3c\x3d":return b<=c}}function p(a){for(var b=[],c={},h=0;h<a.length;h++){var g=a[h],k=g.toLowerCase();void 0===c[k]&&(b.push(g),c[k]=1)}return b}return function(){function a(){this._hasAggregateFunctions=
this._hasStandardizedFunctions=this.parameters=this.parseTree=null}a.create=function(b){var c=new a;c.parseTree=k.WhereGrammar.parse(b);var h=!0,n=!0;c.visitAll(c.parseTree,function(a){if("function"===a.type){var b=a.name;a=a.args.value.length;h&&(h=l.isStandardized(b,a));n&&(n=g.isAggregate(b,a))}});c._hasStandardizedFunctions=h;c._hasAggregateFunctions=n;return c};a.prototype.isStandardized=function(){return this._hasStandardizedFunctions};a.prototype.isAggregate=function(){return this._hasAggregateFunctions};
a.prototype.setVariablesDictionary=function(a){this.parameters=a};a.prototype.testFeature=function(a){return!!this.evaluateNode(this.parseTree,a)};a.prototype.testSet=function(a){var b=this,c=new m.default;this.visitAll(this.parseTree,function(a){"column_ref"!==a.type||c.has(a.column)||c.set(a.column,a)});for(var h={},g=function(a){c.forEach(function(c,e){c=b.featureValue(a,e,c);h[e]?h[e].push(c):h[e]=[c]})},k=0;k<a.length;k++)g(a[k]);return!!this.evaluateNode(this.parseTree,{attributes:h})};a.prototype.calculateValue=
function(a){return this.evaluateNode(this.parseTree,a)};a.prototype.getFunctions=function(){var a=[];this.visitAll(this.parseTree,function(b){"function"===b.type&&a.push(b.name.toLowerCase())});return p(a)};a.prototype.getExpressions=function(){var a=new m.default;this.visitAll(this.parseTree,function(b){if("function"===b.type){var c=b.name.toLowerCase();b=b.args.value[0];if("column_ref"===b.type){b=b.column;var e=c+"-"+b;a.has(e)||a.set(e,{aggregateType:c,field:b})}}});return v.from(a.values())};
a.prototype.getFields=function(){var a=[];this.visitAll(this.parseTree,function(b){"column_ref"===b.type&&a.push(b.column)});return p(a)};a.prototype.getVariables=function(){var a=[];this.visitAll(this.parseTree,function(b){"param"===b.type&&a.push(b.value.toLowerCase())});return p(a)};a.prototype.featureValue=function(a,c,h){a=a&&"object"===typeof a.attributes?a.attributes:a;var b=a[c];if(void 0!==b)return b;for(var e in a)if(c.toLowerCase()===e.toLowerCase())return h.column=e,a[e];return null};
a.prototype.visitAll=function(a,c){if(null!=a)switch(c(a),a.type){case "when_clause":this.visitAll(a.operand,c);this.visitAll(a.value,c);break;case "case_expression":for(var b=0,e=a.clauses;b<e.length;b++){var h=e[b];this.visitAll(h,c)}"simple"===a.format&&this.visitAll(a.operand,c);null!==a.else&&this.visitAll(a.else,c);break;case "expr_list":b=0;for(a=a.value;b<a.length;b++)h=a[b],this.visitAll(h,c);break;case "unary_expr":this.visitAll(a.expr,c);break;case "binary_expr":this.visitAll(a.left,c);
this.visitAll(a.right,c);break;case "function":this.visitAll(a.args,c)}};a.prototype.evaluateNode=function(a,e){switch(a.type){case "case_expression":if("simple"===a.format)for(var b=A(this.evaluateNode(a.operand,e)),k=0;k<a.clauses.length;k++){if(b===A(this.evaluateNode(a.clauses[k].operand,e)))return this.evaluateNode(a.clauses[k].value,e)}else for(k=0;k<a.clauses.length;k++)if(!0===this.evaluateNode(a.clauses[k].operand,e))return this.evaluateNode(a.clauses[k].value,e);return null!==a.else?this.evaluateNode(a.else,
e):null;case "param":return this.parameters[a.value.toLowerCase()];case "expr_list":b=[];k=0;for(a=a.value;k<a.length;k++){var n=a[k];b.push(this.evaluateNode(n,e))}return b;case "unary_expr":return u(this.evaluateNode(a.expr,e));case "binary_expr":switch(a.operator){case "AND":return b=this.evaluateNode(a.left,e),e=this.evaluateNode(a.right,e),null!=b&&null!=e?!0===b&&!0===e:!1===b||!1===e?!1:null;case "OR":return b=this.evaluateNode(a.left,e),e=this.evaluateNode(a.right,e),null!=b&&null!=e?!0===
b||!0===e:!0===b||!0===e?!0:null;case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(a.left,e);case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(a.left,e);case "IN":return b=t(this.evaluateNode(a.right,e)),x(this.evaluateNode(a.left,e),b);case "NOT IN":return b=t(this.evaluateNode(a.right,e)),u(x(this.evaluateNode(a.left,e),b));case "BETWEEN":return b=this.evaluateNode(a.left,e),e=this.evaluateNode(a.right,
e),null==b||null==e[0]||null==e[1]?null:b>=e[0]&&b<=e[1];case "NOTBETWEEN":return b=this.evaluateNode(a.left,e),e=this.evaluateNode(a.right,e),null==b||null==e[0]||null==e[1]?null:b<e[0]||b>e[1];case "LIKE":return q(this.evaluateNode(a.left,e),this.evaluateNode(a.right,e),a.escape);case "NOT LIKE":return u(q(this.evaluateNode(a.left,e),this.evaluateNode(a.right,e),a.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return h(a.operator,this.evaluateNode(a.left,
e),this.evaluateNode(a.right,e));case "*":return this.evaluateNode(a.left,e)*this.evaluateNode(a.right,e);case "-":return this.evaluateNode(a.left,e)-this.evaluateNode(a.right,e);case "+":return this.evaluateNode(a.left,e)+this.evaluateNode(a.right,e);case "/":return this.evaluateNode(a.left,e)/this.evaluateNode(a.right,e)}throw Error("Not Supported Operator "+a.operator);case "null":case "bool":case "string":case "number":return a.value;case "date":return c(a.value,["YYYY-M-D"]).toDate();case "timestamp":return c(a.value,
["YYYY-M-D H:m:s","YYYY-M-D H:mZ","YYYY-M-D H:m:sZ","YYYY-M-D H:m","YYYY-m-d"]).toDate();case "column_ref":return"CURRENT_DATE"===a.column.toUpperCase()?(n=new Date,n.setHours(0,0,0,0),n):"CURRENT_TIMESTAMP"===a.column.toUpperCase()?new Date:this.featureValue(e,a.column,a);case "function":return e=this.evaluateNode(a.args,e),this.isAggregate()?g.aggregateFunction(a.name,e):l.evaluateFunction(a.name,e)}throw Error("Unsupported sql syntax "+a.type);};return a}()})},"esri/core/sql/AggregateFunctions":function(){define(["require",
"exports"],function(w,a){function v(a){for(var c=0,g=0;g<a.length;g++)c+=a[g];return c/a.length}function m(a){for(var c=v(a),g=a.length,m=0,u=0;u<a.length;u++)m+=Math.pow(a[u]-c,2);return 1<g?m/(g-1):0}Object.defineProperty(a,"__esModule",{value:!0});a.aggregateFunction=function(a,l){var g=c[a.toLowerCase()];if(null==g)throw Error("Function Not Recognised");if(l.length<g.minParams||l.length>g.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return g.evaluate(l)};a.isAggregate=
function(a,l){a=c[a.toLowerCase()];return null!=a&&l>=a.minParams&&l<=a.maxParams};var c={min:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.min.apply(Math,a[0])}},max:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.max.apply(Math,a[0])}},avg:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:v(a[0])}},sum:{minParams:1,maxParams:1,evaluate:function(a){if(null==a[0])a=null;else{a=a[0];for(var c=0,g=0;g<a.length;g++)c+=a[g];a=c}return a}},
stddev:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.sqrt(m(a[0]))}},count:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].length}},var:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:m(a[0])}}}})},"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","dojo/regexp"],function(w,a,v){Object.defineProperty(a,"__esModule",{value:!0});a.evaluateFunction=function(a,g){var c=m[a.toLowerCase()];if(null==c)throw Error("Function Not Recognised");
if(g.length<c.minParams||g.length>c.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return c.evaluate(g)};a.isStandardized=function(a,g){a=m[a.toLowerCase()];return null!=a&&g>=a.minParams&&g<=a.maxParams};var m={extract:{minParams:2,maxParams:2,evaluate:function(a){var c=a[0];a=a[1];if(null==a)return null;if(a instanceof Date)switch(c.toUpperCase()){case "SECOND":return a.getSeconds();case "MINUTE":return a.getMinutes();case "HOUR":return a.getHours();case "DAY":return a.getDate();
case "MONTH":return a.getMonth()+1;case "YEAR":return a.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(a){if(2===a.length){var c=a[0],l=a[1];return null==c||null==l?null:c.toString().substring(l-1)}if(3===a.length)return c=a[0],l=a[1],a=a[2],null==c||null==l||null==a?null:0>=a?"":c.toString().substring(l-1,l+a-1)}},position:{minParams:2,maxParams:2,evaluate:function(a){var c=a[0];a=a[1];return null==c||null==a?null:a.indexOf(c)+
1}},trim:{minParams:2,maxParams:3,evaluate:function(a){var c=3===a.length,l=c?a[1]:" ",c=c?a[2]:a[1];if(null==l||null==c)return null;l="("+v.escapeString(l)+")";switch(a[0]){case "BOTH":return c.replace(new RegExp("^"+l+"*|"+l+"*$","g"),"");case "LEADING":return c.replace(new RegExp("^"+l+"*","g"),"");case "TRAILING":return c.replace(new RegExp(l+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.abs(a[0])}},
ceiling:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.ceil(a[0])}},floor:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.floor(a[0])}},log:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])}},log10:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.sin(a[0])}},cos:{minParams:1,maxParams:1,
evaluate:function(a){return null==a[0]?null:Math.cos(a[0])}},tan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.tan(a[0])}},asin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.asin(a[0])}},acos:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.acos(a[0])}},atan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.atan(a[0])}},sign:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:
0<a[0]?1:0>a[1]?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:Math.pow(a[0],a[1])}},mod:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:a[0]%a[1]}},round:{minParams:1,maxParams:2,evaluate:function(a){var c=a[0];a=2===a.length?Math.pow(10,a[1]):1;return null==c?null:Math.round(c*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:function(a){return null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))}},
char_length:{minParams:1,maxParams:1,evaluate:function(a){return"string"===typeof a[0]||a[0]instanceof String?a[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(a){for(var c="",l=0;l<a.length;l++){if(null==a[l])return null;c+=a[l].toString()}return c}},lower:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toUpperCase()}}}})},"esri/core/sql/WhereGrammar":function(){define(["require",
"exports","./sql92grammar"],function(w,a,v){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(){}a.parse=function(a){return v.parse(a)};return a}();a.WhereGrammar=w})},"esri/core/sql/sql92grammar":function(){define([],function(){function w(a,v,m,c){this.message=a;this.expected=v;this.found=m;this.location=c;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,w)}(function(a,v){function m(){this.constructor=a}m.prototype=v.prototype;
a.prototype=new m})(w,Error);w.buildMessage=function(a,v){function m(a){return a.charCodeAt(0).toString(16).toUpperCase()}function c(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+m(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+m(a)})}function g(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+m(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+m(a)})}var l={literal:function(a){return'"'+c(a.text)+'"'},"class":function(a){var c="",k;for(k=0;k<a.parts.length;k++)c+=a.parts[k]instanceof Array?g(a.parts[k][0])+"-"+g(a.parts[k][1]):g(a.parts[k]);return"["+(a.inverted?"^":"")+c+"]"},any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};
return"Expected "+function(a){var c=Array(a.length),g;for(g=0;g<a.length;g++){var k=g,m;m=a[g];m=l[m.type](m);c[k]=m}c.sort();if(0<c.length){for(a=g=1;g<c.length;g++)c[g-1]!==c[g]&&(c[a]=c[g],a++);c.length=a}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}(a)+" but "+(v?'"'+c(v)+'"':"end of input")+" found."};return{SyntaxError:w,parse:function(a,v){function m(a,d){return{type:"literal",text:a,ignoreCase:d}}function c(a,
d,f){return{type:"class",parts:a,inverted:d,ignoreCase:f}}function g(d){var f=sa[d],b;if(!f){for(b=d-1;!sa[b];)b--;f=sa[b];for(f={line:f.line,column:f.column};b<d;)10===a.charCodeAt(b)?(f.line++,f.column=1):f.column++,b++;sa[d]=f}return f}function l(a,d){var f=g(a),b=g(d);return{start:{offset:a,line:f.line,column:f.column},end:{offset:d,line:b.line,column:b.column}}}function k(a){f<W||(f>W&&(W=f,ta=[]),ta.push(a))}function t(){var a,b,c;a=f;b=z();b!==d?(b=x(),b!==d?(c=z(),c!==d?a=b:(f=a,a=d)):(f=
a,a=d)):(f=a,a=d);return a}function u(){var a,b,c,e,h,g,k,n;a=f;b=x();if(b!==d){c=[];e=f;h=z();h!==d?(g=Sa(),g!==d?(k=z(),k!==d?(n=x(),n!==d?e=h=[h,g,k,n]:(f=e,e=d)):(f=e,e=d)):(f=e,e=d)):(f=e,e=d);for(;e!==d;)c.push(e),e=f,h=z(),h!==d?(g=Sa(),g!==d?(k=z(),k!==d?(n=x(),n!==d?e=h=[h,g,k,n]:(f=e,e=d)):(f=e,e=d)):(f=e,e=d)):(f=e,e=d);if(c!==d){a={type:"expr_list"};b=[b];for(e=0;e<c.length;e++)b.push(c[e][3]);a.value=b}else f=a,a=d}else f=a,a=d;return a}function x(){var a,b,c,e,h,g,k,n;a=f;b=q();if(b!==
d){c=[];e=f;h=z();h!==d?(g=J(),g!==d?(k=z(),k!==d?(n=q(),n!==d?e=h=[h,g,k,n]:(f=e,e=d)):(f=e,e=d)):(f=e,e=d)):(f=e,e=d);for(;e!==d;)c.push(e),e=f,h=z(),h!==d?(g=J(),g!==d?(k=z(),k!==d?(n=q(),n!==d?e=h=[h,g,k,n]:(f=e,e=d)):(f=e,e=d)):(f=e,e=d)):(f=e,e=d);c!==d?a=b=ea(b,c):(f=a,a=d)}else f=a,a=d;return a}function q(){var a,b,c,e,h,g,k,n;a=f;b=A();if(b!==d){c=[];e=f;h=z();h!==d?(g=P(),g!==d?(k=z(),k!==d?(n=A(),n!==d?e=h=[h,g,k,n]:(f=e,e=d)):(f=e,e=d)):(f=e,e=d)):(f=e,e=d);for(;e!==d;)c.push(e),e=f,h=
z(),h!==d?(g=P(),g!==d?(k=z(),k!==d?(n=A(),n!==d?e=h=[h,g,k,n]:(f=e,e=d)):(f=e,e=d)):(f=e,e=d)):(f=e,e=d);c!==d?a=b=ea(b,c):(f=a,a=d)}else f=a,a=d;return a}function A(){var c,e,g,l,y;c=f;e=O();e===d&&(e=f,33===a.charCodeAt(f)?(g=dd,f++):(g=d,0===r&&k(ed)),g!==d?(l=f,r++,61===a.charCodeAt(f)?(y=Ta,f++):(y=d,0===r&&k(Ua)),r--,y===d?l=void 0:(f=l,l=d),l!==d?e=g=[g,l]:(f=e,e=d)):(f=e,e=d));e!==d?(g=z(),g!==d?(l=A(),l!==d?c=e={type:"unary_expr",operator:"NOT",expr:l}:(f=c,c=d)):(f=c,c=d)):(f=c,c=d);if(c===
d)if(c=f,e=b(),e!==d)if(g=z(),g!==d){var m,H,t;g=[];l=f;y=z();y!==d?(m=h(),m!==d?(H=z(),H!==d?(t=b(),t!==d?l=y=[y,m,H,t]:(f=l,l=d)):(f=l,l=d)):(f=l,l=d)):(f=l,l=d);if(l!==d)for(;l!==d;)g.push(l),l=f,y=z(),y!==d?(m=h(),m!==d?(H=z(),H!==d?(t=b(),t!==d?l=y=[y,m,H,t]:(f=l,l=d)):(f=l,l=d)):(f=l,l=d)):(f=l,l=d);else g=d;g!==d&&(g={type:"arithmetic",tail:g});g===d&&(g=f,l=n(),l!==d?(y=z(),y!==d?(y=ka(),y!==d?(y=z(),y!==d?(y=u(),y!==d?(m=z(),m!==d?(m=la(),m!==d?g=l={op:l,right:y}:(f=g,g=d)):(f=g,g=d)):(f=
g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d),g===d&&(g=f,l=n(),l!==d?(y=z(),y!==d?(y=ka(),y!==d?(y=z(),y!==d?(y=la(),y!==d?g=l={op:l,right:{type:"expr_list",value:[]}}:(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d),g===d&&(g=f,l=n(),l!==d?(y=z(),y!==d?(y=T(),y!==d?g=l={op:l,right:y}:(f=g,g=d)):(f=g,g=d)):(f=g,g=d))),g===d&&(g=f,y=O(),y!==d?(l=z(),l!==d?(l=ra(),l!==d?(m=z(),m!==d?(m=b(),m!==d?(H=z(),H!==d?(H=P(),H!==d?(y=z(),y!==d?(y=b(),y!==d?g=y={op:"NOT"+l,right:{type:"expr_list",value:[m,
y]}}:(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d),g===d&&(g=f,y=ra(),y!==d?(l=z(),l!==d?(l=b(),l!==d?(m=z(),m!==d?(m=P(),m!==d?(H=z(),H!==d?(H=b(),H!==d?g=y={op:y,right:{type:"expr_list",value:[l,H]}}:(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)),g===d&&(g=f,l=ja(),l!==d?(y=z(),y!==d?(y=O(),y!==d?(y=z(),y!==d?(y=b(),y!==d?g=l={op:l+"NOT",right:y}:(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d),g===d&&(g=f,l=
ja(),l!==d?(y=z(),y!==d?(y=b(),y!==d?g=l={op:l,right:y}:(f=g,g=d)):(f=g,g=d)):(f=g,g=d)),g===d&&(g=f,l=p(),l!==d?(y=z(),y!==d?(y=B(),y!==d?(m=z(),m!==d?(m=f,a.substr(f,6).toLowerCase()===fd?(H=a.substr(f,6),f+=6):(H=d,0===r&&k(gd)),H!==d?(H=f,r++,t=D(),r--,t===d?H=void 0:(f=H,H=d),H!==d?m="ESCAPE":(f=m,m=d)):(f=m,m=d),m!==d?(m=z(),m!==d?(m=Q(),m!==d?g=l={op:l,right:y,escape:m.value}:(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d),g===d&&(g=f,l=p(),l!==d?(y=z(),y!==d?(y=
B(),y!==d?g=l={op:l,right:y,escape:""}:(f=g,g=d)):(f=g,g=d)):(f=g,g=d))))));g===d&&(g=null);g!==d?(c=e,e=g,""==e||void 0==e||null==e?e=c:(g=null,e=g="arithmetic"==e.type?ea(c,e.tail):Va(e.op,c,e.right,e.escape)),c=e):(f=c,c=d)}else f=c,c=d;else f=c,c=d;return c}function h(){var b;a.substr(f,2)===Wa?(b=Wa,f+=2):(b=d,0===r&&k(hd));b===d&&(62===a.charCodeAt(f)?(b=id,f++):(b=d,0===r&&k(jd)),b===d&&(a.substr(f,2)===Xa?(b=Xa,f+=2):(b=d,0===r&&k(kd)),b===d&&(a.substr(f,2)===Ya?(b=Ya,f+=2):(b=d,0===r&&k(ld)),
b===d&&(60===a.charCodeAt(f)?(b=md,f++):(b=d,0===r&&k(nd)),b===d&&(61===a.charCodeAt(f)?(b=Ta,f++):(b=d,0===r&&k(Ua)),b===d&&(a.substr(f,2)===Za?(b=Za,f+=2):(b=d,0===r&&k(od))))))));return b}function p(){var a,b,c,e;a=a=f;b=O();b!==d?(c=z(),c!==d?(e=Ra(),e!==d?a=b=[b,c,e]:(f=a,a=d)):(f=a,a=d)):(f=a,a=d);a!==d&&(a=a[0]+" "+a[2]);a===d&&(a=Ra());return a}function n(){var a,b,c,e;a=a=f;b=O();b!==d?(c=z(),c!==d?(e=jc(),e!==d?a=b=[b,c,e]:(f=a,a=d)):(f=a,a=d)):(f=a,a=d);a!==d&&(a=a[0]+" "+a[2]);a===d&&
(a=jc());return a}function b(){var a,b,c,g,h,k,l,n;a=f;b=E();if(b!==d){c=[];g=f;h=z();h!==d?(k=e(),k!==d?(l=z(),l!==d?(n=E(),n!==d?g=h=[h,k,l,n]:(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d);for(;g!==d;)c.push(g),g=f,h=z(),h!==d?(k=e(),k!==d?(l=z(),l!==d?(n=E(),n!==d?g=h=[h,k,l,n]:(f=g,g=d)):(f=g,g=d)):(f=g,g=d)):(f=g,g=d);c!==d?a=b=ea(b,c):(f=a,a=d)}else f=a,a=d;return a}function e(){var b;43===a.charCodeAt(f)?(b=$a,f++):(b=d,0===r&&k(ab));b===d&&(45===a.charCodeAt(f)?(b=bb,f++):(b=d,0===r&&k(cb)));
return b}function E(){var a,b,c,e,g,h,k,l;a=f;b=F();if(b!==d){c=[];e=f;g=z();g!==d?(h=I(),h!==d?(k=z(),k!==d?(l=F(),l!==d?e=g=[g,h,k,l]:(f=e,e=d)):(f=e,e=d)):(f=e,e=d)):(f=e,e=d);for(;e!==d;)c.push(e),e=f,g=z(),g!==d?(h=I(),h!==d?(k=z(),k!==d?(l=F(),l!==d?e=g=[g,h,k,l]:(f=e,e=d)):(f=e,e=d)):(f=e,e=d)):(f=e,e=d);c!==d?a=b=ea(b,c):(f=a,a=d)}else f=a,a=d;return a}function I(){var b;42===a.charCodeAt(f)?(b=pd,f++):(b=d,0===r&&k(qd));b===d&&(47===a.charCodeAt(f)?(b=rd,f++):(b=d,0===r&&k(sd)));return b}
function F(){var b,c,e,g,h,l,n;n=Q();if(n===d){var p,m,t,E;p=f;var q,v,w,I;q=f;v=Fb();v!==d?(w=zc(),w!==d?(I=Gb(),I!==d?q=v=parseFloat(v+w+I):(f=q,q=d)):(f=q,q=d)):(f=q,q=d);q===d&&(q=f,v=Fb(),v!==d?(w=zc(),w!==d?q=v=parseFloat(v+w):(f=q,q=d)):(f=q,q=d),q===d&&(q=f,v=Fb(),v!==d?(w=Gb(),w!==d?q=v=parseFloat(v+w):(f=q,q=d)):(f=q,q=d),q===d&&(q=f,v=Fb(),v!==d&&(v=parseFloat(v)),q=v)));m=q;m!==d?(t=f,r++,E=Y(),r--,E===d?t=void 0:(f=t,t=d),t!==d?p=m={type:"number",value:m}:(f=p,p=d)):(f=p,p=d);n=p;if(n===
d){var A,F;A=f;var ga,fa,J,Ra;ga=f;a.substr(f,4).toLowerCase()===td?(fa=a.substr(f,4),f+=4):(fa=d,0===r&&k(ud));fa!==d?(J=f,r++,Ra=D(),r--,Ra===d?J=void 0:(f=J,J=d),J!==d?ga=fa=[fa,J]:(f=ga,ga=d)):(f=ga,ga=d);F=ga;F!==d&&(F={type:"bool",value:!0});A=F;if(A===d){A=f;var O,P,ja,W;O=f;a.substr(f,5).toLowerCase()===vd?(P=a.substr(f,5),f+=5):(P=d,0===r&&k(wd));P!==d?(ja=f,r++,W=D(),r--,W===d?ja=void 0:(f=ja,ja=d),ja!==d?O=P=[P,ja]:(f=O,O=d)):(f=O,O=d);F=O;F!==d&&(F={type:"bool",value:!1});A=F}n=A;if(n===
d){var ra,ua,ea,Ja,sa;ua=f;a.substr(f,4).toLowerCase()===xd?(ea=a.substr(f,4),f+=4):(ea=d,0===r&&k(yd));ea!==d?(Ja=f,r++,sa=D(),r--,sa===d?Ja=void 0:(f=Ja,Ja=d),Ja!==d?ua=ea=[ea,Ja]:(f=ua,ua=d)):(f=ua,ua=d);ra=ua;ra!==d&&(ra={type:"null",value:null});n=ra;if(n===d){var ma,qa,Ia,ta;ma=f;var va,Hb,db,Sa;va=f;a.substr(f,4).toLowerCase()===zd?(Hb=a.substr(f,4),f+=4):(Hb=d,0===r&&k(Ad));Hb!==d?(db=f,r++,Sa=D(),r--,Sa===d?db=void 0:(f=db,db=d),db!==d?va=Hb="DATE":(f=va,va=d)):(f=va,va=d);qa=va;qa!==d?(Ia=
z(),Ia!==d?(ta=B(),ta!==d?ma=qa={type:"date",value:ta.value}:(f=ma,ma=d)):(f=ma,ma=d)):(f=ma,ma=d);n=ma;if(n===d){var na,kc,Ta,lc;na=f;var wa,Ib,eb,Ua;wa=f;a.substr(f,9).toLowerCase()===Bd?(Ib=a.substr(f,9),f+=9):(Ib=d,0===r&&k(Cd));Ib!==d?(eb=f,r++,Ua=D(),r--,Ua===d?eb=void 0:(f=eb,eb=d),eb!==d?wa=Ib="TIMESTAMP":(f=wa,wa=d)):(f=wa,wa=d);kc=wa;kc!==d?(Ta=z(),Ta!==d?(lc=B(),lc!==d?na=kc={type:"timestamp",value:lc.value}:(f=na,na=d)):(f=na,na=d)):(f=na,na=d);n=na}}}}}b=n;if(b===d){var M,mc,Va,Wa,Xa,
nc,Ya,Za,$a,oc,ab,bb;M=f;var xa,Jb,fb,cb;xa=f;a.substr(f,7).toLowerCase()===Dd?(Jb=a.substr(f,7),f+=7):(Jb=d,0===r&&k(Ed));Jb!==d?(fb=f,r++,cb=D(),r--,cb===d?fb=void 0:(f=fb,fb=d),fb!==d?xa=Jb="EXTRACT":(f=xa,xa=d)):(f=xa,xa=d);mc=xa;if(mc!==d)if(Va=z(),Va!==d)if(Wa=ka(),Wa!==d)if(Xa=z(),Xa!==d){var Z,ya,Kb,gb,ub;ya=f;a.substr(f,4).toLowerCase()===Fd?(Kb=a.substr(f,4),f+=4):(Kb=d,0===r&&k(Gd));Kb!==d?(gb=f,r++,ub=D(),r--,ub===d?gb=void 0:(f=gb,gb=d),gb!==d?ya=Kb="YEAR":(f=ya,ya=d)):(f=ya,ya=d);Z=
ya;if(Z===d){var za,Lb,hb,vb;za=f;a.substr(f,5).toLowerCase()===Hd?(Lb=a.substr(f,5),f+=5):(Lb=d,0===r&&k(Id));Lb!==d?(hb=f,r++,vb=D(),r--,vb===d?hb=void 0:(f=hb,hb=d),hb!==d?za=Lb="MONTH":(f=za,za=d)):(f=za,za=d);Z=za;if(Z===d){var Aa,Mb,ib,wb;Aa=f;a.substr(f,3).toLowerCase()===Jd?(Mb=a.substr(f,3),f+=3):(Mb=d,0===r&&k(Kd));Mb!==d?(ib=f,r++,wb=D(),r--,wb===d?ib=void 0:(f=ib,ib=d),ib!==d?Aa=Mb="DAY":(f=Aa,Aa=d)):(f=Aa,Aa=d);Z=Aa;if(Z===d){var Ba,Nb,jb,xb;Ba=f;a.substr(f,4).toLowerCase()===Ld?(Nb=
a.substr(f,4),f+=4):(Nb=d,0===r&&k(Md));Nb!==d?(jb=f,r++,xb=D(),r--,xb===d?jb=void 0:(f=jb,jb=d),jb!==d?Ba=Nb="HOUR":(f=Ba,Ba=d)):(f=Ba,Ba=d);Z=Ba;if(Z===d){var Ca,Ob,kb,yb;Ca=f;a.substr(f,6).toLowerCase()===Nd?(Ob=a.substr(f,6),f+=6):(Ob=d,0===r&&k(Od));Ob!==d?(kb=f,r++,yb=D(),r--,yb===d?kb=void 0:(f=kb,kb=d),kb!==d?Ca=Ob="MINUTE":(f=Ca,Ca=d)):(f=Ca,Ca=d);Z=Ca;if(Z===d){var Da,Pb,lb,zb;Da=f;a.substr(f,6).toLowerCase()===Pd?(Pb=a.substr(f,6),f+=6):(Pb=d,0===r&&k(Qd));Pb!==d?(lb=f,r++,zb=D(),r--,zb===
d?lb=void 0:(f=lb,lb=d),lb!==d?Da=Pb="SECOND":(f=Da,Da=d)):(f=Da,Da=d);Z=Da}}}}}nc=Z;nc!==d?(Ya=z(),Ya!==d?(Za=pc(),Za!==d?($a=z(),$a!==d?(oc=x(),oc!==d?(ab=z(),ab!==d?(bb=la(),bb!==d?M=mc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:nc},oc]}}:(f=M,M=d)):(f=M,M=d)):(f=M,M=d)):(f=M,M=d)):(f=M,M=d)):(f=M,M=d)):(f=M,M=d)}else f=M,M=d;else f=M,M=d;else f=M,M=d;else f=M,M=d;b=M;if(b===d){var L,qc,Ab,Bb,Cb,Qb,Db,Eb,Ac,Rb,Bc,V,Ka,rc,sc,tc;L=f;var Ea,Sb,mb,Cc;Ea=f;a.substr(f,
9).toLowerCase()===Rd?(Sb=a.substr(f,9),f+=9):(Sb=d,0===r&&k(Sd));Sb!==d?(mb=f,r++,Cc=D(),r--,Cc===d?mb=void 0:(f=mb,mb=d),mb!==d?Ea=Sb="SUBSTRING":(f=Ea,Ea=d)):(f=Ea,Ea=d);qc=Ea;if(qc!==d)if(Ab=z(),Ab!==d)if(Bb=ka(),Bb!==d)if(Cb=z(),Cb!==d)if(Qb=x(),Qb!==d)if(Db=z(),Db!==d)if(Eb=pc(),Eb!==d)if(Ac=z(),Ac!==d)if(Rb=x(),Rb!==d)if(Bc=z(),Bc!==d){V=f;var Fa,Tb,nb,Dc;Fa=f;a.substr(f,3).toLowerCase()===Td?(Tb=a.substr(f,3),f+=3):(Tb=d,0===r&&k(Ud));Tb!==d?(nb=f,r++,Dc=D(),r--,Dc===d?nb=void 0:(f=nb,nb=
d),nb!==d?Fa=Tb="FOR":(f=Fa,Fa=d)):(f=Fa,Fa=d);Ka=Fa;Ka!==d?(rc=z(),rc!==d?(sc=x(),sc!==d?(tc=z(),tc!==d?V=Ka=[Ka,rc,sc,tc]:(f=V,V=d)):(f=V,V=d)):(f=V,V=d)):(f=V,V=d);V===d&&(V=null);V!==d?(Ka=la(),Ka!==d?L=qc={type:"function",name:"substring",args:{type:"expr_list",value:V?[Qb,Rb,V[2]]:[Qb,Rb]}}:(f=L,L=d)):(f=L,L=d)}else f=L,L=d;else f=L,L=d;else f=L,L=d;else f=L,L=d;else f=L,L=d;else f=L,L=d;else f=L,L=d;else f=L,L=d;else f=L,L=d;else f=L,L=d;b=L;if(b===d){var C,La,Ub,Vb,Wb,aa,Xb,Ma,Yb,Zb,Ec,uc,
Fc,Gc;C=f;La=Hc();La!==d?(Ub=z(),Ub!==d?(Vb=ka(),Vb!==d?(Wb=z(),Wb!==d?(aa=y(),aa===d&&(aa=null),aa!==d?(Xb=z(),Xb!==d?(Ma=x(),Ma!==d?(Yb=z(),Yb!==d?(Zb=pc(),Zb!==d?(Ec=z(),Ec!==d?(uc=x(),uc!==d?(Fc=z(),Fc!==d?(Gc=la(),Gc!==d?C=La={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==aa?"BOTH":aa},Ma,uc]}}:(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d);C===d&&(C=f,La=Hc(),
La!==d?(Ub=z(),Ub!==d?(Vb=ka(),Vb!==d?(Wb=z(),Wb!==d?(aa=y(),aa===d&&(aa=null),aa!==d?(Xb=z(),Xb!==d?(Ma=x(),Ma!==d?(Yb=z(),Yb!==d?(Zb=la(),Zb!==d?C=La={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==aa?"BOTH":aa},Ma]}}:(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d)):(f=C,C=d));b=C;if(b===d){var N,vc,Ic,Jc,Kc,wc,Lc,Mc,Nc,xc,Oc,Pc;N=f;var Ga,$b,ob,Qc;Ga=f;a.substr(f,8).toLowerCase()===Vd?($b=a.substr(f,8),f+=8):($b=d,0===
r&&k(Wd));$b!==d?(ob=f,r++,Qc=D(),r--,Qc===d?ob=void 0:(f=ob,ob=d),ob!==d?Ga=$b="POSITION":(f=Ga,Ga=d)):(f=Ga,Ga=d);vc=Ga;vc!==d?(Ic=z(),Ic!==d?(Jc=ka(),Jc!==d?(Kc=z(),Kc!==d?(wc=x(),wc!==d?(Lc=z(),Lc!==d?(Mc=jc(),Mc!==d?(Nc=z(),Nc!==d?(xc=x(),xc!==d?(Oc=z(),Oc!==d?(Pc=la(),Pc!==d?N=vc={type:"function",name:"position",args:{type:"expr_list",value:[wc,xc]}}:(f=N,N=d)):(f=N,N=d)):(f=N,N=d)):(f=N,N=d)):(f=N,N=d)):(f=N,N=d)):(f=N,N=d)):(f=N,N=d)):(f=N,N=d)):(f=N,N=d)):(f=N,N=d);b=N;if(b===d){var U,ac,
Rc,Sc,Tc,Na,Uc,Vc;U=f;var ba,pb,qb,ha;ba=f;ba=pb=X();if(ba===d)if(ba=f,96===a.charCodeAt(f)?(pb=Wc,f++):(pb=d,0===r&&k(Xc)),pb!==d){qb=[];Yc.test(a.charAt(f))?(ha=a.charAt(f),f++):(ha=d,0===r&&k(Zc));if(ha!==d)for(;ha!==d;)qb.push(ha),Yc.test(a.charAt(f))?(ha=a.charAt(f),f++):(ha=d,0===r&&k(Zc));else qb=d;qb!==d?(96===a.charCodeAt(f)?(ha=Wc,f++):(ha=d,0===r&&k(Xc)),ha!==d?ba=pb=qb.join(""):(f=ba,ba=d)):(f=ba,ba=d)}else f=ba,ba=d;ac=ba;ac!==d?(Rc=z(),Rc!==d?(Sc=ka(),Sc!==d?(Tc=z(),Tc!==d?(Na=u(),Na===
d&&(Na=null),Na!==d?(Uc=z(),Uc!==d?(Vc=la(),Vc!==d?U=ac={type:"function",name:ac,args:Na?Na:{type:"expr_list",value:[]}}:(f=U,U=d)):(f=U,U=d)):(f=U,U=d)):(f=U,U=d)):(f=U,U=d)):(f=U,U=d)):(f=U,U=d);b=U;if(b===d){var bc,G,Oa,cc,Pa,dc,oa,ca,rb,$c,ad;G=f;Oa=ec();if(Oa!==d)if(cc=z(),cc!==d)if(Pa=x(),Pa!==d)if(dc=z(),dc!==d){oa=[];for(ca=ia();ca!==d;)oa.push(ca),ca=ia();oa!==d?(ca=z(),ca!==d?(rb=fc(),rb!==d?G=Oa={type:"case_expression",format:"simple",operand:Pa,clauses:oa,else:null}:(f=G,G=d)):(f=G,G=
d)):(f=G,G=d)}else f=G,G=d;else f=G,G=d;else f=G,G=d;else f=G,G=d;if(G===d)if(G=f,Oa=ec(),Oa!==d)if(cc=z(),cc!==d)if(Pa=x(),Pa!==d)if(dc=z(),dc!==d){oa=[];for(ca=ia();ca!==d;)oa.push(ca),ca=ia();oa!==d?(ca=z(),ca!==d?(rb=S(),rb!==d?($c=z(),$c!==d?(ad=fc(),ad!==d?G=Oa={type:"case_expression",format:"simple",operand:Pa,clauses:oa,else:rb.value}:(f=G,G=d)):(f=G,G=d)):(f=G,G=d)):(f=G,G=d)):(f=G,G=d)}else f=G,G=d;else f=G,G=d;else f=G,G=d;else f=G,G=d;bc=G;if(bc===d){var K,Qa,gc,pa,da,sb,bd,cd;K=f;Qa=
ec();if(Qa!==d)if(gc=z(),gc!==d){pa=[];for(da=H();da!==d;)pa.push(da),da=H();pa!==d?(da=z(),da!==d?(sb=fc(),sb!==d?K=Qa={type:"case_expression",format:"searched",clauses:pa,else:null}:(f=K,K=d)):(f=K,K=d)):(f=K,K=d)}else f=K,K=d;else f=K,K=d;if(K===d)if(K=f,Qa=ec(),Qa!==d)if(gc=z(),gc!==d){pa=[];for(da=H();da!==d;)pa.push(da),da=H();pa!==d?(da=z(),da!==d?(sb=S(),sb!==d?(bd=z(),bd!==d?(cd=fc(),cd!==d?K=Qa={type:"case_expression",format:"searched",clauses:pa,else:sb.value}:(f=K,K=d)):(f=K,K=d)):(f=
K,K=d)):(f=K,K=d)):(f=K,K=d)}else f=K,K=d;else f=K,K=d;bc=K}b=bc;if(b===d){var tb,Ha,yc,hc,ic;Ha=f;yc=Y();if(yc!==d){hc=[];for(ic=R();ic!==d;)hc.push(ic),ic=R();hc!==d?Ha=yc+=hc.join(""):(f=Ha,Ha=d)}else f=Ha,Ha=d;tb=Ha;tb!==d&&(tb={type:"column_ref",table:"",column:tb});b=tb;b===d&&(b=T(),b===d&&(b=f,c=ka(),c!==d?(e=z(),e!==d?(g=x(),g!==d?(h=z(),h!==d?(l=la(),l!==d?(g.paren=!0,b=c=g):(f=b,b=d)):(f=b,b=d)):(f=b,b=d)):(f=b,b=d)):(f=b,b=d)))}}}}}}}return b}function X(){var a,b,c,e;a=f;b=Y();if(b!==
d){c=[];for(e=D();e!==d;)c.push(e),e=D();c!==d?a=b+=c.join(""):(f=a,a=d)}else f=a,a=d;return a}function Y(){var b;Xd.test(a.charAt(f))?(b=a.charAt(f),f++):(b=d,0===r&&k(Yd));return b}function D(){var b;Zd.test(a.charAt(f))?(b=a.charAt(f),f++):(b=d,0===r&&k($d));return b}function R(){var b;ae.test(a.charAt(f))?(b=a.charAt(f),f++):(b=d,0===r&&k(be));return b}function T(){var b,c,e;b=f;64===a.charCodeAt(f)?(c=ce,f++):(c=d,0===r&&k(de));c!==d?(e=X(),e!==d?b=c=[c,e]:(f=b,b=d)):(f=b,b=d);b!==d&&(b={type:"param",
value:b[1]});return b}function y(){var b,c,e;b=f;a.substr(f,7).toLowerCase()===ee?(c=a.substr(f,7),f+=7):(c=d,0===r&&k(fe));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="LEADING":(f=b,b=d)):(f=b,b=d);b===d&&(b=f,a.substr(f,8).toLowerCase()===ge?(c=a.substr(f,8),f+=8):(c=d,0===r&&k(he)),c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="TRAILING":(f=b,b=d)):(f=b,b=d),b===d&&(b=f,a.substr(f,4).toLowerCase()===ie?(c=a.substr(f,4),f+=4):(c=d,0===r&&k(je)),c!==d?(c=f,r++,e=D(),r--,
e===d?c=void 0:(f=c,c=d),c!==d?b="BOTH":(f=b,b=d)):(f=b,b=d)));return b}function B(){var a;a=Q();a===d&&(a=T());return a}function Q(){var b,c,e;b=f;39===a.charCodeAt(f)?(c=ub,f++):(c=d,0===r&&k(vb));c===d&&(a.substr(f,2)===wb?(c=wb,f+=2):(c=d,0===r&&k(ke)));if(c!==d){c=[];e=f;a.substr(f,2)===qa?(e=qa,f+=2):(e=d,0===r&&k(xb));e!==d&&(e="'");e===d&&(yb.test(a.charAt(f))?(e=a.charAt(f),f++):(e=d,0===r&&k(zb)));for(;e!==d;)c.push(e),e=f,a.substr(f,2)===qa?(e=qa,f+=2):(e=d,0===r&&k(xb)),e!==d&&(e="'"),
e===d&&(yb.test(a.charAt(f))?(e=a.charAt(f),f++):(e=d,0===r&&k(zb)));c!==d?(39===a.charCodeAt(f)?(e=ub,f++):(e=d,0===r&&k(vb)),e!==d?b=c={type:"string",value:c.join("")}:(f=b,b=d)):(f=b,b=d)}else f=b,b=d;return b}function H(){var a,b,c;a=f;b=Ab();b!==d?(b=z(),b!==d?(b=x(),b!==d?(c=z(),c!==d?(c=Bb(),c!==d?(c=z(),c!==d?(c=x(),c!==d?a=b={type:"when_clause",operand:b,value:c}:(f=a,a=d)):(f=a,a=d)):(f=a,a=d)):(f=a,a=d)):(f=a,a=d)):(f=a,a=d)):(f=a,a=d);return a}function ia(){var a,b,c;a=f;b=Ab();b!==d?
(b=z(),b!==d?(b=x(),b!==d?(c=z(),c!==d?(c=Bb(),c!==d?(c=z(),c!==d?(c=x(),c!==d?a=b={type:"when_clause",operand:b,value:c}:(f=a,a=d)):(f=a,a=d)):(f=a,a=d)):(f=a,a=d)):(f=a,a=d)):(f=a,a=d)):(f=a,a=d);return a}function S(){var b,c;b=f;var e,g;c=f;a.substr(f,4).toLowerCase()===le?(e=a.substr(f,4),f+=4):(e=d,0===r&&k(me));e!==d?(e=f,r++,g=D(),r--,g===d?e=void 0:(f=e,e=d),e!==d?c="ELSE":(f=c,c=d)):(f=c,c=d);c!==d?(c=z(),c!==d?(c=x(),c!==d?b={type:"else_clause",value:c}:(f=b,b=d)):(f=b,b=d)):(f=b,b=d);return b}
function Fb(){var b,c,e;b=fa();b===d&&(b=f,45===a.charCodeAt(f)?(c=bb,f++):(c=d,0===r&&k(cb)),c===d&&(43===a.charCodeAt(f)?(c=$a,f++):(c=d,0===r&&k(ab))),c!==d?(e=fa(),e!==d?b=c=c[0]+e:(f=b,b=d)):(f=b,b=d));return b}function zc(){var b,c;b=f;46===a.charCodeAt(f)?(c=ne,f++):(c=d,0===r&&k(oe));c!==d?(c=fa(),c===d&&(c=null),c!==d?b="."+(null!=c?c:""):(f=b,b=d)):(f=b,b=d);return b}function Gb(){var b,c,e;c=b=f;pe.test(a.charAt(f))?(e=a.charAt(f),f++):(e=d,0===r&&k(qe));e!==d?(re.test(a.charAt(f))?(e=
a.charAt(f),f++):(e=d,0===r&&k(se)),e===d&&(e=null),e!==d?c="e"+(null===e?"":e):(f=c,c=d)):(f=c,c=d);c!==d?(e=fa(),e!==d?b=c+e:(f=b,b=d)):(f=b,b=d);return b}function fa(){var a,b;a=[];b=ga();if(b!==d)for(;b!==d;)a.push(b),b=ga();else a=d;a!==d&&(a=a.join(""));return a}function ga(){var b;te.test(a.charAt(f))?(b=a.charAt(f),f++):(b=d,0===r&&k(ue));return b}function jc(){var b,c,e;b=f;a.substr(f,2).toLowerCase()===ve?(c=a.substr(f,2),f+=2):(c=d,0===r&&k(we));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:
(f=c,c=d),c!==d?b="IN":(f=b,b=d)):(f=b,b=d);return b}function ja(){var b,c,e;b=f;a.substr(f,2).toLowerCase()===xe?(c=a.substr(f,2),f+=2):(c=d,0===r&&k(ye));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="IS":(f=b,b=d)):(f=b,b=d);return b}function Ra(){var b,c,e;b=f;a.substr(f,4).toLowerCase()===ze?(c=a.substr(f,4),f+=4):(c=d,0===r&&k(Ae));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="LIKE":(f=b,b=d)):(f=b,b=d);return b}function O(){var b,c,e;b=f;a.substr(f,3).toLowerCase()===
Be?(c=a.substr(f,3),f+=3):(c=d,0===r&&k(Ce));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="NOT":(f=b,b=d)):(f=b,b=d);return b}function P(){var b,c,e;b=f;a.substr(f,3).toLowerCase()===De?(c=a.substr(f,3),f+=3):(c=d,0===r&&k(Ee));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="AND":(f=b,b=d)):(f=b,b=d);return b}function J(){var b,c,e;b=f;a.substr(f,2).toLowerCase()===Fe?(c=a.substr(f,2),f+=2):(c=d,0===r&&k(Ge));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="OR":(f=
b,b=d)):(f=b,b=d);return b}function ra(){var b,c,e;b=f;a.substr(f,7).toLowerCase()===He?(c=a.substr(f,7),f+=7):(c=d,0===r&&k(Ie));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="BETWEEN":(f=b,b=d)):(f=b,b=d);return b}function pc(){var b,c,e;b=f;a.substr(f,4).toLowerCase()===Je?(c=a.substr(f,4),f+=4):(c=d,0===r&&k(Ke));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="FROM":(f=b,b=d)):(f=b,b=d);return b}function Hc(){var b,c,e;b=f;a.substr(f,4).toLowerCase()===Le?(c=a.substr(f,
4),f+=4):(c=d,0===r&&k(Me));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="TRIM":(f=b,b=d)):(f=b,b=d);return b}function ec(){var b,c,e;b=f;a.substr(f,4).toLowerCase()===Ne?(c=a.substr(f,4),f+=4):(c=d,0===r&&k(Oe));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="CASE":(f=b,b=d)):(f=b,b=d);return b}function fc(){var b,c,e;b=f;a.substr(f,3).toLowerCase()===Pe?(c=a.substr(f,3),f+=3):(c=d,0===r&&k(Qe));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="END":(f=b,b=d)):(f=
b,b=d);return b}function Ab(){var b,c,e;b=f;a.substr(f,4).toLowerCase()===Re?(c=a.substr(f,4),f+=4):(c=d,0===r&&k(Se));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="WHEN":(f=b,b=d)):(f=b,b=d);return b}function Bb(){var b,c,e;b=f;a.substr(f,4).toLowerCase()===Te?(c=a.substr(f,4),f+=4):(c=d,0===r&&k(Ue));c!==d?(c=f,r++,e=D(),r--,e===d?c=void 0:(f=c,c=d),c!==d?b="THEN":(f=b,b=d)):(f=b,b=d);return b}function Sa(){var b;44===a.charCodeAt(f)?(b=Ve,f++):(b=d,0===r&&k(We));return b}function ka(){var b;
40===a.charCodeAt(f)?(b=Xe,f++):(b=d,0===r&&k(Ye));return b}function la(){var b;41===a.charCodeAt(f)?(b=Ze,f++):(b=d,0===r&&k($e));return b}function z(){var a,b;a=[];for(b=Cb();b!==d;)a.push(b),b=Cb();return a}function Cb(){var b;af.test(a.charAt(f))?(b=a.charAt(f),f++):(b=d,0===r&&k(bf));return b}function Va(a,b,c,d){a={type:"binary_expr",operator:a,left:b,right:c};void 0!==d&&(a.escape=d);return a}function ea(a,b){for(var c=0;c<b.length;c++)a=Va(b[c][1],a,b[c][3]);return a}v=void 0!==v?v:{};var d=
{},Db={start:t},Eb=t,dd="!",ed=m("!",!1),Ta="\x3d",Ua=m("\x3d",!1),Wa="\x3e\x3d",hd=m("\x3e\x3d",!1),id="\x3e",jd=m("\x3e",!1),Xa="\x3c\x3d",kd=m("\x3c\x3d",!1),Ya="\x3c\x3e",ld=m("\x3c\x3e",!1),md="\x3c",nd=m("\x3c",!1),Za="!\x3d",od=m("!\x3d",!1),$a="+",ab=m("+",!1),bb="-",cb=m("-",!1),pd="*",qd=m("*",!1),rd="/",sd=m("/",!1),Xd=/^[A-Za-z_\x80-\uFFFF]/,Yd=c([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Zd=/^[A-Za-z0-9_]/,$d=c([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),ae=/^[A-Za-z0-9_.\x80-\uFFFF]/,
be=c([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),ce="@",de=m("@",!1),ub="'",vb=m("'",!1),wb="N'",ke=m("N'",!1),qa="''",xb=m("''",!1),yb=/^[^']/,zb=c(["'"],!0,!1),ne=".",oe=m(".",!1),te=/^[0-9]/,ue=c([["0","9"]],!1,!1),pe=/^[eE]/,qe=c(["e","E"],!1,!1),re=/^[+\-]/,se=c(["+","-"],!1,!1),xd="null",yd=m("NULL",!0),td="true",ud=m("TRUE",!0),vd="false",wd=m("FALSE",!0),ve="in",we=m("IN",!0),xe="is",ye=m("IS",!0),ze="like",Ae=m("LIKE",!0),fd="escape",gd=m("ESCAPE",!0),Be="not",Ce=m("NOT",
!0),De="and",Ee=m("AND",!0),Fe="or",Ge=m("OR",!0),He="between",Ie=m("BETWEEN",!0),Je="from",Ke=m("FROM",!0),Td="for",Ud=m("FOR",!0),Rd="substring",Sd=m("SUBSTRING",!0),Dd="extract",Ed=m("EXTRACT",!0),Le="trim",Me=m("TRIM",!0),Vd="position",Wd=m("POSITION",!0),Bd="timestamp",Cd=m("TIMESTAMP",!0),zd="date",Ad=m("DATE",!0),ee="leading",fe=m("LEADING",!0),ge="trailing",he=m("TRAILING",!0),ie="both",je=m("BOTH",!0),Fd="year",Gd=m("YEAR",!0),Hd="month",Id=m("MONTH",!0),Jd="day",Kd=m("DAY",!0),Ld="hour",
Md=m("HOUR",!0),Nd="minute",Od=m("MINUTE",!0),Pd="second",Qd=m("SECOND",!0),Ne="case",Oe=m("CASE",!0),Pe="end",Qe=m("END",!0),Re="when",Se=m("WHEN",!0),Te="then",Ue=m("THEN",!0),le="else",me=m("ELSE",!0),Ve=",",We=m(",",!1),Xe="(",Ye=m("(",!1),Ze=")",$e=m(")",!1),af=/^[ \t\n\r]/,bf=c([" ","\t","\n","\r"],!1,!1),Wc="`",Xc=m("`",!1),Yc=/^[^`]/,Zc=c(["`"],!0,!1),f=0,sa=[{line:1,column:1}],W=0,ta=[],r=0,Ia;if("startRule"in v){if(!(v.startRule in Db))throw Error("Can't start parsing from rule \""+v.startRule+
'".');Eb=Db[v.startRule]}Ia=Eb();if(Ia!==d&&f===a.length)return Ia;Ia!==d&&f<a.length&&k({type:"end"});throw function(a,b,c){return new w(w.buildMessage(a,b),a,b,c)}(ta,W<a.length?a.charAt(W):null,W<a.length?l(W,W+1):l(W,W));}}})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(w,
a,v,m,c,g,l){function k(a,b){var c;if(!b)return null;if("x"in b){var g={x:0,y:0};a=a(b.x,b.y,q,0);g.x=a[0];g.y=a[1];null!=b.z&&(g.z=b.z);null!=b.m&&(g.m=b.m);return g}if("xmin"in b)return g={xmin:0,ymin:0,xmax:0,ymax:0},c=a(b.xmin,b.ymin,q,0),g.xmin=c[0],g.ymin=c[1],a=a(b.xmax,b.ymax,q,0),g.xmax=a[0],g.ymax=a[1],b.hasZ&&(g.zmin=b.zmin,g.zmax=b.zmax,g.hasZ=!0),b.hasM&&(g.mmin=b.mmin,g.mmax=b.mmax,g.hasM=!0),g;if("rings"in b)return{rings:t(b.rings,a),hasM:b.hasM,hasZ:b.hasZ};if("paths"in b)return{paths:t(b.paths,
a),hasM:b.hasM,hasZ:b.hasZ};if("points"in b)return{points:u(b.points,a),hasM:b.hasM,hasZ:b.hasZ}}function t(a,b){for(var c=[],g=0;g<a.length;g++)c.push(u(a[g],b));return c}function u(a,b){for(var c=[],g=0;g<a.length;g++){var h=a[g],k=b(h[0],h[1],[0,0],0);c.push(k);2<h.length&&k.push(h[2]);3<h.length&&k.push(h[3])}return c}function x(a,b){return!g.isValid(a)||!g.isValid(b)||g.equals(a,b)||l.canProject(a,b)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});var q=[0,0];a.checkProjectionSupport=
function(a,b){if(Array.isArray(a)){for(var e=0;e<a.length;e++){var g=a[e];if(x(g.geometry&&g.geometry.spatialReference,b))return c.isSupported()?c.load():m.reject(new v("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:b}))}return m.resolve()}return x(a,b)?c.isSupported()?c.load():m.reject(new v("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:b})):m.resolve()};var A=k.bind(null,l.lngLatToXY),
h=k.bind(null,l.xyToLngLat);a.project=function(a,b,e){return g.isValid(b)&&g.isValid(e)&&!g.equals(b,e)?l.canProject(b,e)?g.isWebMercator(e)?A(a):h(a):c.projectMany([a],b,e,null,!0)[0]:a};var p=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a,c,h){var b=this;a&&a.length&&c&&h&&!g.equals(c,h)||m.resolve(a);var e={geometries:a,inSpatialReference:c,outSpatialReference:h,resolve:null};this._jobs.push(e);return m.create(function(a){e.resolve=
a;null===b._timer&&(b._timer=setTimeout(b._process,10))},function(){var a=b._jobs.indexOf(e);-1<a&&b._jobs.splice(a,1)})};a.prototype._process=function(){this._timer=null;var a=this._jobs.shift();if(a){var e=a.geometries,k=a.inSpatialReference,n=a.outSpatialReference,a=a.resolve;l.canProject(k,n)?g.isWebMercator(n)?a(e.map(A)):a(e.map(h)):a(c.projectMany(e,k,n,null,!0));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());a.projectMany=function(a,b,c){return p.push(a,b,c)}})},
"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["require","exports"],function(w,a){Object.defineProperty(a,"__esModule",{value:!0});a.queryCapabilities={supportsStatistics:!0,supportsCentroid:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,
supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1}})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports @dojo/framework/shim/Set ../../../core/promiseUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./utils".split(" "),function(w,a,v,m,c,g,l,k,t,u,x){function q(a){return a?JSON.parse(JSON.stringify(a,
["latestWkid","wkid","wkt"])):a}Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,c){this.items=a;this.definitionExpression=c.definitionExpression;this.geometryType=c.geometryType;this.hasM=c.hasM;this.hasZ=c.hasZ;this.objectIdField=c.objectIdField;this.spatialReference=c.spatialReference;this.fieldsMap=c.fieldsMap}Object.defineProperty(a.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0});a.prototype.createQueryResponse=function(a){return a.outStatistics?
a.outStatistics.some(function(a){return"exceedslimit"===a.statisticType})?this._createExceedsLimitQueryResponse(a):this._createStatisticsQueryResponse(a):this._createFeatureQueryResponse(a)};a.prototype.executeAttributesQuery=function(a){var c=t.getWhereClause(a.where);if(!c)return m.resolve(this);if(c.isStandardized()){for(var g=0,b=[],e=0,h=this.items;e<h.length;e++){var k=h[e];c.testFeature(k.attributes)&&(b[g++]=k)}c=this._createNew(b);c.definitionExpression=a.where;return m.resolve(c)}return m.reject(new TypeError("Where clause is not standardized"))};
a.prototype.executeObjectIdsQuery=function(a){if(!a.objectIds||!a.objectIds.length)return m.resolve(this);var c=new v.default(a.objectIds);return m.resolve(this._createNew(this.items.filter(function(a){return c.has(a.objectId)})))};a.prototype.project=function(c){var h=this;return!c||g.equals(this.spatialReference,c)?m.resolve(this):u.projectMany(this.items.map(function(a){return x.getGeometry(h,a)}),this.spatialReference,c).then(function(g){for(var b=[],e=0;e<h.items.length;e++)b[e]={attributes:h.items[e].attributes,
geometry:g[e]};g=[];l.convertFromFeatures(g,b,h.geometryType,h.hasZ,h.hasM,h.objectIdField);return new a(g,{definitionExpression:h.definitionExpression,geometryType:h.geometryType,hasM:h.hasM,hasZ:h.hasZ,objectIdField:h.objectIdField,spatialReference:c,fieldsMap:h.fieldsMap})})};a.prototype._createFeatureQueryResponse=function(a){var g=this,h=this.items,b=this.geometryType,e=this.hasM,k=this.hasZ,l=this.objectIdField,m=this.spatialReference,t=a.outFields,u=a.outSpatialReference,v=a.quantizationParameters,
x=!1;if(null!=a.num&&null!=a.start)var w=a.start+a.num,x=h.length>w,h=h.slice(a.start,Math.min(h.length,w));return{exceededTransferLimit:x,features:this._createFeatures(a,h),fields:t&&t.map(function(a){return g.fieldsMap.get(a)}),geometryType:b,hasM:e,hasZ:k,objectIdFieldName:l,spatialReference:q(u?u.toJSON():m),transform:v&&c.toTransform(v)}};a.prototype._createFeatures=function(a,g){var h=new k.default(a,this.fieldsMap),b=a.quantizationParameters,e=a.returnGeometry,l=a.returnCentroid,m=a.maxAllowableOffset,
p=a.orderByFields;a=[];var t=0;if(g.length&&p&&p.length){var p=p[0].split(" "),q=p[0],u="DESC"===p[1];g.sort(function(a,b){a=h.getFieldValue(a,q);b=h.getFieldValue(b,q);if("number"===typeof a&&"number"===typeof b)return u?b-a:a-b;if("string"===typeof a&&"string"===typeof b)return a=a.toUpperCase(),b=b.toUpperCase(),(u?a>b:a<b)?-1:(u?a<b:a>b)?1:0})}if(e||l)if(b=c.toTransform(b),e&&!l)for(l=0;l<g.length;l++)e=g[l],a[t++]={attributes:h.getAttributes(e),geometry:x.getGeometry(this,e,m,b)};else if(!e&&
l)for(m=0;m<g.length;m++)e=g[m],a[t++]={attributes:h.getAttributes(e),centroid:x.getCentroid(this,e,b)};else for(l=0;l<g.length;l++)e=g[l],a[t++]={attributes:h.getAttributes(e),centroid:x.getCentroid(this,e,b),geometry:x.getGeometry(this,e,m,b)};else for(m=0;m<g.length;m++)e=g[m],(e=h.getAttributes(e))&&(a[t++]={attributes:e});return a};a.prototype._createNew=function(c){return new a(c,this)};a.prototype._createExceedsLimitQueryResponse=function(a){var c=!1,g=null;a.outStatistics.some(function(a){g=
a;return"exceedslimit"===a.statisticType});var c=null!=g.maxPointCount?g.maxPointCount:Number.POSITIVE_INFINITY,b=null!=g.maxRecordCount?g.maxRecordCount:Number.POSITIVE_INFINITY;a=null!=g.maxVertexCount?g.maxVertexCount:Number.POSITIVE_INFINITY;"esriGeometryPoint"===this.geometryType?c=this.items.length>c:this.items.length>b?c=!0:(c=this.hasZ?this.hasM?4:3:this.hasM?3:2,c=this.items.reduce(function(a,b){return a+(b.geometry&&b.geometry.coords.length||0)},0)/c>a);return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(c)}}]}};a.prototype._createStatisticsQueryResponse=function(a){var c=new k.default(a,this.fieldsMap),g=[],b=[],e=a.groupByFieldsForStatistics,h=a.having,l=e&&e.length,e=l&&e[0],m={},t={},q={},u={attributes:{}},v=0;for(a=a.outStatistics;v<a.length;v++){var x=a[v],y=x.onStatisticField,B=x.outStatisticFieldName,Q=x.statisticType,H="1"===y;if(l&&(y===e||
H)&&"count"===Q){m[y]||(m[y]=this._calculateUniqueValues(c,H?e:y));var Q=m[y],ia;for(ia in Q){var S=Q[ia],w=S.count,x=S.data,A=S.items,S=t[x]||{attributes:{}};if(!h||c.validateItems(A,h))S.attributes[B]=w,S.attributes[H?"EXPR_1":y]=x,t[x]=S}b.push({name:B,alias:B,type:"esriFieldTypeString"})}else{if(l)for(ia in H=this._calculateUniqueValues(c,e),H){if(S=H[ia],x=S.data,A=S.items,!h||c.validateItems(A,h))S=t[x]||{attributes:{}},A=this._calculateStatistics(A,c,y),w="var"===Q?"variance":Q,S.attributes[B]=
A[w],S.attributes[e]=x,t[x]=S}else q[y]||(q[y]=this._calculateStatistics(this.items,c,y)),A=q[y],w="var"===Q?"variance":Q,u.attributes[B]=A[w];b.push({name:B,alias:B,type:"esriFieldTypeDouble"})}}if(l)for(var Gb in t)g.push(t[Gb]);else g.push(u);return{fields:b,features:g}};a.prototype._calculateStatistics=function(a,c,g){for(var b=a.length,e=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,k=null,l=null,n=null,m=null,p=[],t=0;t<b;t++){var q=p[t]=c.getFieldValue(a[t],g);isNaN(q)||(k+=q,e=Math.min(e,
q),h=Math.max(h,q))}if(b){l=k/b;for(c=a=0;c<p.length;c++)q=p[c],a+=Math.pow(q-l,2);m=1<b?a/(b-1):0;n=Math.sqrt(m)}else h=e=null;return{avg:l,count:b,max:h,min:e,stddev:n,sum:k,variance:m}};a.prototype._calculateUniqueValues=function(a,c){for(var g={},b=0,e=this.items;b<e.length;b++){var h=e[b],k=a.getFieldValue(h,c);if(null==k||"string"===typeof k&&""===k.trim())k=null;null==g[k]?g[k]={count:1,data:k,items:[h]}:(g[k].count++,g[k].items.push(h))}return g};return a}();a.default=w})},"esri/geometry/support/quantizationUtils":function(){define(["require",
"exports","./jsonUtils"],function(w,a,v){function m(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function c(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function g(a,b,e){for(var g=[],h,k,l,B,y=0;y<e.length;y++){var n=e[y];if(0<y){if(l=m(a,n[0]),B=c(a,n[1]),l!==h||B!==k)g.push(b(n,l-h,B-k)),h=l,k=B}else h=m(a,n[0]),k=c(a,n[1]),g.push(b(n,h,k))}return 0<g.length?g:null}function l(a,b,c,e){return g(a,c?e?T:R:e?R:D,b)}function k(a,b,c,e){var h=[];c=c?e?T:R:e?R:D;for(e=0;e<b.length;e++){var k=
g(a,c,b[e]);k&&3<=k.length&&h.push(k)}return h.length?h:null}function t(a,b,c,e){var h=[];c=c?e?T:R:e?R:D;for(e=0;e<b.length;e++){var k=g(a,c,b[e]);k&&2<=k.length&&h.push(k)}return h.length?h:null}function u(a,b){return b*a.scale[0]+a.translate[0]}function x(a,b){return a.translate[1]-b*a.scale[1]}function q(a,b,c){var e=Array(c.length);if(!c.length)return e;var g=a.scale,h=g[0],g=g[1],k=u(a,c[0][0]);a=x(a,c[0][1]);e[0]=b(c[0],k,a);for(var l=1;l<c.length;l++){var B=c[l],k=k+B[0]*h;a-=B[1]*g;e[l]=
b(B,k,a)}return e}function A(a,b,c){for(var e=Array(c.length),g=0;g<c.length;g++)e[g]=q(a,b,c[g]);return e}function h(a,b,c,e){return q(a,c?e?T:R:e?R:D,b)}function p(a,b,c,e){return A(a,c?e?T:R:e?R:D,b)}function n(a,b,c,e){return A(a,c?e?T:R:e?R:D,b)}function b(a,b,c){var e=c[0],g=e[0],e=e[1],h=Math.min(g,b[0]),k=Math.min(e,b[1]),l=Math.max(g,b[2]);b=Math.max(e,b[3]);for(var n=1;n<c.length;n++){var m=c[n],B=m[0],m=m[1],g=g+B,e=e+m;0>B&&(h=Math.min(h,g));0<B&&(l=Math.max(l,g));0>m?k=Math.min(k,e):
0<m&&(b=Math.max(b,e))}a[0]=h;a[1]=k;a[2]=l;a[3]=b;return a}function e(a,c){if(!c.length)return null;a[0]=a[1]=Number.POSITIVE_INFINITY;a[2]=a[3]=Number.NEGATIVE_INFINITY;for(var e=0;e<c.length;e++)b(a,a,c[e]);return a}function E(a,b,e,g,h){b.xmin=m(a,e.xmin);b.ymin=c(a,e.ymin);b.xmax=m(a,e.xmax);b.ymax=c(a,e.ymax);b!==e&&(g&&(b.zmin=e.zmin,b.zmax=e.zmax),h&&(b.mmin=e.mmin,b.mmax=e.mmax));return b}function I(a,b,c,e,g){b.points=l(a,c.points,e,g);return b}function F(a,b,e,g,h){b.x=m(a,e.x);b.y=c(a,
e.y);b!==e&&(g&&(b.z=e.z),h&&(b.m=e.m));return b}function X(a,b,c,e,g){a=k(a,c.rings,e,g);if(!a)return null;b.rings=a;return b}function Y(a,b,c,e,g){a=t(a,c.paths,e,g);if(!a)return null;b.paths=a;return b}Object.defineProperty(a,"__esModule",{value:!0});var D=function(a,b,c){return[b,c]},R=function(a,b,c){return[b,c,a[2]]},T=function(a,b,c){return[b,c,a[2],a[3]]};a.toTransform=function(a){return a?{originPosition:"upperLeft",scale:[a.tolerance,a.tolerance],translate:[a.extent.xmin,a.extent.ymax]}:
null};a.equals=function(a,b){if(a===b||null==a&&null==b)return!0;if(null==a||null==b)return!1;var c,e,g,h;a&&"upperLeft"===a.originPosition?(c=a.translate[0],e=a.translate[1],a=a.scale[0]):(c=a.extent.xmin,e=a.extent.ymax,a=a.tolerance);b&&"upperLeft"===b.originPosition?(g=b.translate[0],h=b.translate[1],b=b.scale[0]):(g=b.extent.xmin,h=b.extent.ymax,b=b.tolerance);return c===g&&e===h&&a===b};a.quantizeX=m;a.quantizeY=c;a.quantizeBounds=function(a,b,e){b[0]=m(a,e[0]);b[3]=c(a,e[1]);b[2]=m(a,e[2]);
b[1]=c(a,e[3]);return b};a.quantizePoints=l;a.quantizeRings=k;a.quantizePaths=t;a.hydrateX=u;a.hydrateY=x;a.hydrateCoordsArray=q;a.hydrateCoordsArrayArray=A;a.hydrateBounds=function(a,b,c){return c?(b[0]=u(a,c[0]),b[1]=x(a,c[3]),b[2]=u(a,c[2]),b[3]=x(a,c[1]),b):[u(a,b[0]),x(a,b[3]),u(a,b[2]),x(a,b[1])]};a.hydratePoints=h;a.hydratePaths=p;a.hydrateRings=n;a.getQuantizedBoundsCoordsArray=b;a.getQuantizedBoundsCoordsArrayArray=e;a.getQuantizedBoundsPoints=function(a){var c=[Number.POSITIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return b(c,c,a)};a.getQuantizedBoundsPaths=function(a){return e([0,0,0,0],a)};a.getQuantizedBoundsRings=function(a){return e([0,0,0,0],a)};a.quantizeExtent=E;a.quantizeMultipoint=I;a.quantizePoint=F;a.quantizePolygon=X;a.quantizePolyline=Y;a.quantizeGeometry=function(a,b){return a&&b?v.isPoint(b)?F(a,{},b,!1,!1):v.isPolyline(b)?Y(a,{},b,!1,!1):v.isPolygon(b)?X(a,{},b,!1,!1):v.isMultipoint(b)?I(a,{},b,!1,!1):v.isExtent(b)?
E(a,{},b,!1,!1):null:null};a.hydrateExtent=function(a,b,c,e,g){b.xmin=u(a,c.xmin);b.ymin=x(a,c.ymin);b.xmax=u(a,c.xmax);b.ymax=x(a,c.ymax);b!==c&&(e&&(b.zmin=c.zmin,b.zmax=c.zmax),g&&(b.mmin=c.mmin,b.mmax=c.mmax));return b};a.hydrateMultipoint=function(a,b,c,e,g){b.points=h(a,c.points,e,g);return b};a.hydratePoint=function(a,b,c,e,g){b.x=u(a,c.x);b.y=x(a,c.y);b!==c&&(e&&(b.z=c.z),g&&(b.m=c.m));return b};a.hydratePolygon=function(a,b,c,e,g){b.rings=n(a,c.rings,e,g);return b};a.hydratePolyline=function(a,
b,c,e,g){b.paths=p(a,c.paths,e,g);return b}})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["require","exports","@dojo/framework/shim/Map","./attributeSupport"],function(w,a,v,m){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,c){this._fieldDataCache=new v.default;this._returnDistinctMap=new v.default;this.returnDistinctValues=a.returnDistinctValues;this.fieldsMap=c;if((a=a.outFields)&&-1===a.indexOf("*")){this.outFields=a;for(var g=c=0;g<a.length;g++){var l=
a[g],u=m.getExpressionFromFieldName(l),x=this.fieldsMap.has(u),u=x?null:m.getWhereClause(u),x=x?this.fieldsMap.get(l).name:m.getAliasFromFieldName(l)||"FIELD_EXP_"+c++;this._fieldDataCache.set(l,{alias:x,clause:u})}}}a.prototype.getAttributes=function(a){a=a.attributes;a=this._processAttributesForOutFields(a);return a=this._processAttributesForDistinctValues(a)};a.prototype.getFieldValue=function(a,c){a=a.attributes;var g=this.fieldsMap.has(c),l=g?this.fieldsMap.get(c).name:c,u=null;this._fieldDataCache.has(l)?
u=this._fieldDataCache.get(l).clause:g||(u=m.getWhereClause(c),this._fieldDataCache.set(l,{alias:l,clause:u}));return g?a[l]:u.calculateValue(a)};a.prototype.validateItem=function(a,c){this._fieldDataCache.has(c)||this._fieldDataCache.set(c,{alias:c,clause:m.getWhereClause(c)});return this._fieldDataCache.get(c).clause.testFeature(a.attributes)};a.prototype.validateItems=function(a,c){var g=this;this._fieldDataCache.has(c)||this._fieldDataCache.set(c,{alias:c,clause:m.getWhereClause(c)});a=a.map(function(a){return g.getAttributes(a)});
return this._fieldDataCache.get(c).clause.testSet(a)};a.prototype._processAttributesForOutFields=function(a){var c=this.outFields;if(!a||!c||!c.length)return a;for(var g={},m=0;m<c.length;m++){var u=this._fieldDataCache.get(c[m]),v=u.alias,u=u.clause;g[v]=u?u.calculateValue(a):a[v]}return g};a.prototype._processAttributesForDistinctValues=function(a){if(!a||!this.returnDistinctValues)return a;var c=this.outFields,g=[];if(c)for(var m=0;m<c.length;m++){var u=this._fieldDataCache.get(c[m]).alias;g.push(a[u])}else for(u in a)g.push(a[u]);
c=(c||["*"]).join(",")+"\x3d"+g.join(",");g=this._returnDistinctMap.get(c)||0;this._returnDistinctMap.set(c,++g);return 1<g?null:a};return a}();a.default=w})},"esri/layers/graphics/data/utils":function(){define(["require","exports","../featureConversionUtils","../OptimizedGeometry"],function(w,a,v,m){Object.defineProperty(a,"__esModule",{value:!0});var c=new m.default,g=new m.default,l={esriGeometryPoint:v.convertToPoint,esriGeometryPolyline:v.convertToPolyline,esriGeometryPolygon:v.convertToPolygon,
esriGeometryMultipoint:v.convertToMultipoint};a.getCentroid=function(a,c,l){if("esriGeometryPolygon"!==a.geometryType||!c.centroid&&!c.geometry)return null;c.centroid||(c.centroid=v.getCentroidOptimizedGeometry(new m.default,c.geometry,a.hasZ,a.hasM));return l?(c=v.quantizeOptimizedGeometry(g,c.centroid,a.hasZ,a.hasM,"esriGeometryPoint",l),v.convertToPoint(c,a.hasZ,a.hasM)):v.convertToPoint(c.centroid,a.hasZ,a.hasM)};a.getGeometry=function(a,m,u,x){return m.geometry?u?(m=v.generalizeOptimizedGeometry(c,
m.geometry,a.hasZ,a.hasM,a.geometryType,u),x&&(m=v.quantizeOptimizedGeometry(g,m,a.hasZ,a.hasM,a.geometryType,x)),l[a.geometryType](m,a.hasZ,a.hasM)):x?(m=v.quantizeOptimizedGeometry(g,m.geometry,a.hasZ,a.hasM,a.geometryType,x),l[a.geometryType](m,a.hasZ,a.hasM)):l[a.geometryType](m.geometry,a.hasZ,a.hasM):null}})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),
function(w,a,v,m,c,g,l,k){function t(){return m.create(function(a){return w(["../../../geometry/geometryEngine"],a)})}Object.defineProperty(a,"__esModule",{value:!0});var u={intersects:!0,contains:!0,within:!0,crosses:!0,touches:!0,overlaps:!0,"envelope-intersects":!0},x={point:!0,multipoint:!0,polyline:!0,polygon:!0,extent:!0},q={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0};a.importGeometryEngine=t;a.getGeodesicBufferOperator=function(){return t().then(function(a){return a.geodesicBuffer})};
a.getSpatialQueryOperator=function(a,h,l){if("intersects"===a){if("polygon"===h.type&&"esriGeometryPoint"===l)return m.resolve(c.polygonContainsPoint.bind(null,h.toJSON()));if("extent"===h.type)return m.resolve(g.getExtentIntersector(l).bind(null,h))}return t().then(function(c){return c[a].bind(null,h.toJSON())})};a.checkSpatialQuerySupport=function(a,c,g){var h=a.geometry;return h?!0!==u[a.spatialRelationship]?m.reject(new v("feature-store:unsupported-query","Unsupported query spatial relationship",
{query:a})):l.isValid(h.spatialReference)&&l.isValid(g)?!0!==x[h.type]?m.reject(new v("feature-store:unsupported-query","Unsupported query geometry type",{query:a})):!0!==q[c]?m.reject(new v("feature-store:unsupported-query","Unsupported layer geometry type",{query:a})):k.checkProjectionSupport(a.geometry&&a.geometry.spatialReference,a.outSpatialReference):m.resolve():null};a.canQueryWithRBush=function(a){switch(a.type){case "extent":return!0;case "polygon":return a.rings.every(function(a){return 5!==
a.length?!1:a[0][0]===a[1][0]&&a[0][0]===a[4][0]&&a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[0][1]===a[4][1]&&a[1][1]===a[2][1]});default:return!1}}})},"*noref":1}});
define("require exports ../../../../core/tsSupport/generatorHelper @dojo/framework/shim/Set dojo/number dstore/Csv ../../../../geometry ../../../../request ../../../../core/Error ../../../../core/has ../../../../core/lang ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/QueryEngine ../../../../tasks/support/Query".split(" "),function(w,
a,v,m,c,g,l,k,t,u,x,q,A,h,p,n,b,e,E,I,F){Object.defineProperty(a,"__esModule",{value:!0});var X=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"];a.csvLatitudeFieldNames="lat latitude y ycenter latitude83 latdecdeg point-y".split(" ");a.csvLongitudeFieldNames="lon lng long longitude x xcenter longitude83 longdecdeg point-x".split(" ");a.csvDetectedDelimiters=[","," ",";","|","\t"];var Y=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
D=[0,0],R=function(){return function(a,b){this.x=a;this.y=b}}(),T=function(){var a=c._parseInfo(),b=new RegExp("^"+a.regexp+"$"),e=new RegExp("["+a.group+"\\s\\xa0]","g"),g=a.factor;return function(c){c=b.exec(c);a.factor=g;if(!c)return NaN;var h=c[1];if(!c[1]){if(!c[2])return NaN;h=c[2];a.factor*=-1}h=h.replace(e,"").replace(a.decimal,".");return+h*a.factor}}();w=function(){function c(){this._queryEngine=null}c.prototype.load=function(a){var b=this;return q.all([this._fetch(a.url),this._checkProjection(a)]).then(function(c){c=
c[0];var e=b._parse(c,a.parsing);b._queryEngine=b._createQueryEngine(c,e);e.layerDefinition.extent=b._queryEngine.fullExtent;return e})};c.prototype.applyEdits=function(a){return q.reject(new t("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer"))};c.prototype.queryFeatures=function(a){void 0===a&&(a={});return this._queryEngine.executeQuery(F.fromJSON(a))};c.prototype.queryFeatureCount=function(a){void 0===a&&(a={});return this._queryEngine.executeQueryForCount(F.fromJSON(a))};
c.prototype.queryObjectIds=function(a){void 0===a&&(a={});return this._queryEngine.executeQueryForIds(F.fromJSON(a))};c.prototype.queryExtent=function(a){void 0===a&&(a={});return this._queryEngine.executeQueryForExtent(F.fromJSON(a))};c.prototype._fetch=function(a){if(!a)return q.reject(new t("csv-source:invalid-source","url not defined"));a=A.urlToObject(a);return k(a.path,{query:a.query,responseType:"text"}).then(function(a){return a.data})};c.prototype._parse=function(a,b){void 0===b&&(b={});
for(var c={columnDelimiter:b.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:b.latitudeField,longitudeFieldName:b.longitudeField}};a&&"\n"===a[0];)a=a.slice(1);"\n"!==a[a.length-1]&&(a+="\n");var e=this._readFirstLine(a);if(!e)throw new t("csv","CSV is empty",{csv:a});if(!b.columnDelimiter){var g=this._inferDelimiter(e);if(!g)throw new t("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");c.columnDelimiter=g}var e=e.split(c.columnDelimiter),h=c.layerDefinition=
{name:"csv",geometryType:"esriGeometryPoint",objectIdField:null,fields:[],extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:b.spatialReference||{wkid:102100}}};if(!b.latitudeField||!b.longitudeField){g=this._inferLocationInfo(e);if(!b.longitudeField&&!g.longitudeFieldName||!b.latitudeField&&!g.latitudeFieldName)throw new t("csv","Unable to identify latitudeField and/or longitudeField from CSV");c.locationInfo=
{longitudeFieldName:b.longitudeField||g.longitudeFieldName,latitudeFieldName:b.latitudeField||g.latitudeFieldName}}a=this._inferFields(a,c.columnDelimiter,e,c.locationInfo);if(b.fields&&b.fields.length){for(var e=new Map,g=0,l=b.fields;g<l.length;g++)b=l[g],e.set(b.name.toLowerCase(),b);for(g=0;g<a.length;g++)if(b=a[g],l=e.get(b.name.toLowerCase())){var k=b.name;x.mixin(b,l);b.name=k}}h.fields=a;h.fields.some(function(a){return"esriFieldTypeOID"===a.type?(h.objectIdField=a.name,!0):!1})||(h.objectIdField=
"__OBJECTID",h.fields.unshift({name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1}));return c};c.prototype._inferLocationInfo=function(b){var c=null,e=null;b.forEach(function(b){var g=b.toLowerCase(),h;h=a.csvLatitudeFieldNames.indexOf(g);-1===h||e||(e=b);h=a.csvLongitudeFieldNames.indexOf(g);-1===h||c||(c=b)});return{longitudeFieldName:c,latitudeFieldName:e}};c.prototype._inferFields=function(a,b,c,e){var g=[],h=this._sampleLines(a).map(function(a){return a.split(b).map(function(a){return a.trim()})});
a=function(a){var b=c[a];if(b===e.longitudeFieldName||b===e.latitudeFieldName)g.push({name:b,type:"esriFieldTypeDouble",alias:b});else{var k=h.map(function(b){return b[a]}),k=l._inferFieldType(k),b={name:b.replace(/[\s\'\u2019\u2018\.\-\/\(\)]+/g,"_"),type:null,alias:b};switch(k){case "integer":b.type="esriFieldTypeInteger";break;case "double":b.type="esriFieldTypeDouble";break;case "date":b.type="esriFieldTypeDate";b.length=36;break;default:b.type="esriFieldTypeString",b.length=255}g.push(b)}};for(var l=
this,k=0;k<c.length;k++)a(k);return g};c.prototype._inferFieldType=function(a){var b=this;if(!a.length)return"string";var c=/[^+-.,0-9]/;return a.map(function(a){var e=!1;if(""===a||c.test(a))e=!0;else if(e=T(a),isNaN(e))if(-1===a.indexOf("E"))e=!0;else if(e=Number(a),isNaN(e))if(-1===a.indexOf(","))e=!0;else if(a=a.replace(",","."),e=Number(a),isNaN(e))e=!0;else return"double";else return"double";else return/[.,]/.test(a)?"double":214783647<e||-214783648>e?"double":"integer";return e&&!/^[-]?\d*[.,]?\d*$/.test(a)&&
b._isValidDate(new Date(a),a)?"date":"string"}).reduce(function(a,b){if(a===b)return b;if("string"===a||"string"===b)return"string";if("double"===a||"double"===b)return"double"})};c.prototype._isValidDate=function(a,b){if(!a||"[object Date]"!==Object.prototype.toString.call(a)||isNaN(a.getTime()))return!1;a=!0;if(u("chrome")&&/\d+\W*$/.test(b)&&(b=b.match(/[a-zA-Z]{2,}/))){a=!1;for(var c=0;!a&&c<=b.length;)a=!Y.test(b[c]),c++;a=!a}return a};c.prototype._readFirstLine=function(a){return a.substring(0,
a.indexOf("\n")).trim()};c.prototype._sampleLines=function(a,b){void 0===b&&(b=10);for(var c=!1,e=[],g=a.indexOf("\n")+1;!c&&e.length<b;){var h=a.indexOf("\n",g);if(-1===h)c=!0;else{var l=void 0;(l=-1===h&&g<a.length-1?a.substring(g).trim():a.substring(g,h).trim())&&e.push(l);g=h+1}}return e};c.prototype._inferDelimiter=function(b){var c=0,e="";a.csvDetectedDelimiters.forEach(function(a){var g=b.split(a).length;g>c&&(c=g,e=a)});return""===e?null:e};c.prototype._createQueryEngine=function(a,c){var k,
q=c.locationInfo;k=q.latitudeFieldName;for(var t=q.longitudeFieldName,u=c.layerDefinition,q=u.objectIdField,v=u.fields,x=u.extent,u=[],y=[],w=new m.Set,B=new m.Set,A=[],F=0;F<v.length;F++){var O=v[F],P=O.name,O=O.type;"esriFieldTypeDate"===O?w.add(P):-1<X.indexOf(O)&&B.add(P);P!==q&&A.push(P)}v=new g;v.delimiter=c.columnDelimiter;v.fieldNames=A;v.newline="\n";a=v.parse(a);v=0;a.shift();for(A=0;A<a.length;A++)if(F=a[A],P=this._parseCoordinateValue(F[k]),O=this._parseCoordinateValue(F[t]),null!=O&&
null!=P&&!isNaN(P)&&!isNaN(O)){F[k]=P;F[t]=O;for(var J in F)if(J!==k&&J!==t)if(w.has(J)){var Q=new Date(F[J]);F[J]=this._isValidDate(Q,F[J])?Q.getTime():null}else B.has(J)&&(Q=T(F[J]),isNaN(Q)?F[J]=null:F[J]=Q);F[q]=v;v++;u.push(new R(O,P));y.push(F)}if(!p.equals({wkid:4326},x.spatialReference))if(p.isWebMercator(x.spatialReference))for(J=0,t=u;J<t.length;J++)w=t[J],k=n.lngLatToXY(w.x,w.y,D),w.x=k[0],w.y=k[1];else u=h.projectMany(u,l.SpatialReference.WGS84,x.spatialReference,null,!0);k=new E.default({geometryType:"esriGeometryPoint",
hasM:!1,hasZ:!1});c=new I.default({fields:c.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,objectIdField:q,spatialReference:x.spatialReference||{wkid:4326},cacheSpatialQueries:!0,spatialIndex:k});x=[];for(J=0;J<u.length;J++)w=u[J],t=w.x,w=w.y,B=y[J],B[q]=J+1,x.push(new b.default(new e.default([],[t,w]),B,null,B[q]));k.addMany(x);return c};c.prototype._parseCoordinateValue=function(a){if(null==a||""===a)return null;var b=T(a);if(isNaN(b)||181<Math.abs(b))b=parseFloat(a);return b};
c.prototype._checkProjection=function(a){if(!a||!a.parsing||!a.parsing.spatialReference)return q.resolve();a=a.parsing&&a.parsing.spatialReference;return!a||n.canProject(l.SpatialReference.WGS84,a)?q.resolve():h.isSupported()?h.load():q.reject(new t("csv-layer","Projection not supported"))};return c}();a.default=w});