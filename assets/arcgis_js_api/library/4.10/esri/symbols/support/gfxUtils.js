// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper dojox/gfx/_base ../../Color ../../request ../../core/ItemCache ../../core/promiseUtils ../../core/screenUtils".split(" "),function(n,b,h,l,p,q,r,t,e){function m(a){if(!a)return null;var c,d=e.pt2px(a.width);switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":c=m(a.outline);break;case "simple-line":"none"!==a.style&&0!==d&&(c={color:a.color,style:u(a.style),width:d,cap:a.cap,join:"miter"===a.join?e.pt2px(a.miterLimit):
a.join});break;default:c=null}return c}Object.defineProperty(b,"__esModule",{value:!0});var v=n.toUrl("../../symbols/patterns/"),w={left:"start",center:"middle",right:"end",justify:"start"},x={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},g=new r(1E3);b.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&w[a.toLowerCase()]||"middle"};b.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&x[a.toLowerCase()]||"alphabetic"};b.getSVGBaselineShift=
function(a){return"bottom"===a.verticalAlignment?"super":null};b.getFill=function(a){var c=a.style,d=null;if(a)switch(a.type){case "simple-marker":"cross"!==c&&"x"!==c&&(d=a.color);break;case "simple-fill":"solid"===c?d=a.color:"none"!==c&&(d=h({},l.defaultPattern,{src:v+c+".png",width:8,height:8}));break;case "picture-fill":d=h({},l.defaultPattern,{src:a.url,width:e.pt2px(a.width)*a.xscale,height:e.pt2px(a.height)*a.yscale,x:e.pt2px(a.xoffset),y:e.pt2px(a.yoffset)});break;case "text":d=a.color}return d};
b.getPatternUrlWithColor=function(a,c){var d=a+"-"+c;return void 0!==g.get(d)?t.resolve(g.get(d)):q(a,{responseType:"image"}).then(function(a){a=a.data;var b=a.naturalWidth,e=a.naturalHeight,f=document.createElement("canvas");f.width=b;f.height=e;var k=f.getContext("2d");k.fillStyle=c;k.fillRect(0,0,b,e);k.globalCompositeOperation="destination-in";k.drawImage(a,0,0);a=f.toDataURL();g.put(d,a);return a})};b.getStroke=m;b.create2DColorRamp=function(a){var c=a.colors,d=a.numClasses,b=a.size;a=a.surface.createGroup();
for(var b=(b||75)/d,e=0;e<d;e++)for(var g=e*b,f=0;f<d;f++){var h=c[e][f];a.createRect({x:f*b,y:g,width:b,height:b}).setFill(h).setStroke(null)}return a};var u=function(){var a={};return function(c){if(a[c])return a[c];var b=c.replace(/-/g,"");return a[c]=b}}();b.defaultThematicColor=new p([128,128,128])});