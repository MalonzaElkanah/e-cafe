// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports dojo/string ./adapters/CSVLayerAdapter ./adapters/FeatureLayerAdapter ./adapters/LayerAdapter ./adapters/PointCloudLayerAdapter ./adapters/SceneLayerAdapter ../../../support/arcadeUtils".split(" "),function(w,f,m,n,p,q,r,t,u){function g(a){return m.pad(a,2,"0")}function l(a,b,c){if("date"===b||"number"===b){"number"===b&&(a=new Date(a));b=c?a.getFullYear():a.getUTCFullYear();var d=g((c?a.getMonth():a.getUTCMonth())+1),v=g(c?a.getDate():a.getUTCDate()),f=g(c?a.getHours():a.getUTCHours()),
e=g(c?a.getMinutes():a.getUTCMinutes());a=g(c?a.getSeconds():a.getUTCSeconds());a="TIMESTAMP'"+b+"-"+d+"-"+v+" "+f+":"+e+":"+a+"'"}return a}function h(a,b){if(b instanceof Date)return"date";if("number"===typeof b)return"number";if("string"===typeof b&&(a=a.getField(b),"\x3cnow\x3e"!==b.toLowerCase()&&a&&"date"===a.type))return"field"}Object.defineProperty(f,"__esModule",{value:!0});var e,k=(e={},e[0]={adapter:n,type:"csv",label:"CSVLayer"},e[1]={adapter:p,type:"feature",label:"FeatureLayer"},e[2]=
{adapter:t,type:"scene",label:"SceneLayer"},e[3]={adapter:r,type:"point-cloud",label:"PointCloudLayer"},e);f.unitValueInDays={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5};f.getLayerTypeLabels=function(a){return a.map(function(a){return k[a].label})};f.createLayerAdapter=function(a,b){if(a instanceof q)return a;var c=null;b.some(function(b){var d=a.type===k[b].type;d&&(c=new k[b].adapter({layer:a}));return d});return c};f.getFieldsList=function(a){var b=
a.field,c=a.normalizationField;a=a.valueExpression;var d=[];a&&(d=u.extractFieldNames(a));b&&d.push(b);c&&d.push(c);return d};f.getNormalizationType=function(a){var b=a.normalizationType;b||(a.normalizationField?b="field":null!=a.normalizationTotal&&(b="percent-of-total"));return b};f.getDateDiffSQL=function(a,b,c,d){var e=a.hasQueryEngine;c=l(c,h(a,c),e);a=l(b,h(a,b),e);a="("+c+" - "+a+")";e&&(a="("+a+" * "+f.unitValueInDays.milliseconds+")");d=f.unitValueInDays[d];e="/";1>d&&(d=1/d,e="*");return{sqlExpression:1===
d?a:"("+a+" "+e+" "+d+")",sqlWhere:null}};f.getDateType=h});