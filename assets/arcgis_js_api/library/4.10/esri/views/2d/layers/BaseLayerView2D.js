// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper @dojo/framework/shim/Map ../../../core/accessorSupport/decorators ../../../geometry/support/aaBoundingRect ../tiling ./LayerView2D ./support/Display ../../layers/RefreshableLayerView".split(" "),function(C,D,r,f,t,d,u,v,w,x,y){var p=new Set,l=[],m=[],B=function(){return function(d,a,b,z,A,f,k,e,g){void 0===e&&(e=[0,0]);void 0===g&&(g=u.create());this.id=d;this.level=a;this.row=b;this.col=z;
this.world=A;this.resolution=f;this.scale=k;this.coords=e;this.bounds=g}}();return function(h){function a(){var b=null!==h&&h.apply(this,arguments)||this;b._tileMap=new t.default;b.container=new x.default(b);b.layer=null;b.tiles=[];return b}r(a,h);Object.defineProperty(a.prototype,"_tileInfoView",{get:function(){var b=this.layer&&this.layer.tileInfo;return b?new v.TileInfoView(b):null},enumerable:!0,configurable:!0});a.prototype.attach=function(){};a.prototype.detach=function(){};a.prototype.hitTest=
function(b,a){return null};a.prototype.render=function(b){};a.prototype.requestRender=function(){this.container.requestRender()};a.prototype.tilesChanged=function(b,a){};a.prototype.doRefresh=function(){};a.prototype.isUpdating=function(){return!1};a.prototype.update=function(b){var a=this._tileInfoView,d=this.tiles;if(a){a=a.getTileCoverage(b.state,0);b=a.spans;var a=a.lodInfo,f=a.level;if(b.length)for(var k=0;k<b.length;k++)for(var e=b[k],g=e.row,h=e.colTo,e=e.colFrom;e<=h;e++){var c=a.normalizeCol(e),
q=a.getWorldForColumn(e),n=f+"/"+g+"/"+c+"/"+q;this._tileMap.has(n)||(c=new B(n,f,g,c,q,a.resolution,a.scale),a.getTileCoords(c.coords,c,!1),a.getTileBounds(c.bounds,c,!0),this._tileMap.set(n,c),d.push(c),l.push(c));p.add(n)}}for(b=d.length-1;0<=b;b--)c=d[b],p.has(c.id)||(d.splice(b,1),m.push(c),this._tileMap.delete(c.id));if(l.length||m.length)this.tilesChanged(l,m),l.length=m.length=0;p.clear();this.requestRender()};a.prototype.moveStart=function(){};a.prototype.viewChange=function(){this.requestUpdate()};
a.prototype.moveEnd=function(){};f([d.property({dependsOn:["layer.loaded"]})],a.prototype,"_tileInfoView",null);f([d.property()],a.prototype,"container",void 0);f([d.property()],a.prototype,"layer",void 0);return a=f([d.subclass("esri.views.2d.layers.BaseLayerView2D")],a)}(d.declared(w,y))});