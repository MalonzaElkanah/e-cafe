// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(d,a){return function(a,f){a.__bases__=f.__bases__}})},"esri/core/tsSupport/awaiterHelper":function(){define(["../promiseUtils"],function(d){function a(a){return a&&"function"===typeof a.then?a:d.resolve(a)}return function(l,f,h,k){var b=null;return d.create(function(g,d){function e(a){try{n(k.next(a))}catch(q){d(q)}}function c(a){try{n(k["throw"](a))}catch(q){d(q)}}function n(m){m.done?(b=a(m.value),
b.then(g,d)):(b=a(m.value),b.then(e,c))}n((k=k.apply(l,f||[])).next())},function(a){b&&b.cancel(a)})}})},"esri/core/tsSupport/generatorHelper":function(){define([],function(){return function(d,a){function l(a){return function(c){return f([a,c])}}function f(e){if(k)throw new TypeError("Generator is already executing.");for(;h;)try{if(k=1,b&&(g=e[0]&2?b["return"]:e[0]?b["throw"]||((g=b["return"])&&g.call(b),0):b.next)&&!(g=g.call(b,e[1])).done)return g;if(b=0,g)e=[e[0]&2,g.value];switch(e[0]){case 0:case 1:g=
e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++;b=e[1];e=[0];continue;case 7:e=h.ops.pop();h.trys.pop();continue;default:if(!(g=h.trys,g=0<g.length&&g[g.length-1])&&(6===e[0]||2===e[0])){h=0;continue}if(3===e[0]&&(!g||e[1]>g[0]&&e[1]<g[3]))h.label=e[1];else if(6===e[0]&&h.label<g[1])h.label=g[1],g=e;else if(g&&h.label<g[2])h.label=g[2],h.ops.push(e);else{g[2]&&h.ops.pop();h.trys.pop();continue}}e=a.call(d,h)}catch(c){e=[6,c],b=0}finally{k=g=0}if(e[0]&5)throw e[1];return{value:e[0]?
e[1]:void 0,done:!0}}var h={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},k,b,g,p;return p={next:l(0),"throw":l(1),"return":l(2)},"function"===typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p}})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(d,a,l,f,h,k){a=a.default;d.before(function(a,k){d.hasMixin(a,b)&&
f.processPrototype(k)});d.after(function(a){d.hasMixin(a,b)&&(f.processClass(a),Object.defineProperties(a.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var b=d(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===
b)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{value:new a(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var g=[],k=0;k<arguments.length;k++)g.push(arguments[k]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,g)}},__accessor__:null,postscript:function(a){var g=this.__accessor__;a=g.ctorArgs||a;var e;null!=this.getDefaults&&(e=this.getDefaults(a||{}),this.set(e));g.initialize();
a&&(this.set(a),g.ctorArgs=null);g.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");}catch(g){console.warn(g.stack)}else k.removeTarget(this),this.__accessor__.destroy()},get:function(a){return l.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,
b){h.set(this,a,b);return this},watch:function(a,b,e){return k.watch(this,a,b,e)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,b){return this.__accessor__.override(a,b)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,b){return this.__accessor__.internalSet(a,b)}});return b})},"esri/core/declare":function(){define(["require",
"exports","dojo/_base/declare"],function(d,a,l){function f(a,b){a&&!Array.isArray(a)&&"function"!==typeof a&&(b=a,a=null);a=a||[];b=b||{};return h([this].concat(a),b)}function h(a,d){a&&!Array.isArray(a)&&"function"!==typeof a&&(d=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);d=d||{};var e,c;e=0;for(c=k.length;e<c;e++)k[e](a,d);a=l(a,d);a.createSubclass=f;e=0;for(c=b.length;e<c;e++)b[e](a);return a}var k=[],b=[];(function(a){a.hasMixin=function(a,e){a=Array.isArray(a)?a.reduce(function(a,c){return c._meta?
a.concat(c._meta.bases):a},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof e)for(var c=a.length-1;0<=c;c--)if(a[c].prototype.declaredClass===e)return!0;return-1!==a.indexOf(e)};a.safeMixin=function(a,e){return l.safeMixin(a,e)};a.before=function(a){k.push(a)};a.after=function(a){b.push(a)}})(h||(h={}));return h})},"esri/core/accessorSupport/Properties":function(){define("require exports ../has ../Logger ../ObjectPool ./extensions ./PropertyOrigin ./Store".split(" "),function(d,a,l,
f,h,k,b,g){Object.defineProperty(a,"__esModule",{value:!0});f.getLogger("esri.core.accessorSupport.Properties");d=function(){function a(a){this.host=a;this._origin=b.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new g.default;a=this.host.constructor.__accessorMetadata__;this.metadatas=a.properties;this.autoDestroy=a.autoDestroy}a.prototype.initialize=function(){this.lifecycle=1;k.instanceCreated(this.host,this.metadatas)};
a.prototype.constructed=function(){this.lifecycle=2};a.prototype.destroy=function(){this.destroyed=!0;var a=this.cursors;if(this.cursors)for(var e=0,m=Object.getOwnPropertyNames(a);e<m.length;e++){var q=m[e],b=a[q];if(b){for(;0<b.length;)b.pop().propertyDestroyed(this,q);a[q]=null}}if(this.autoDestroy)for(q in this.metadatas)(a=this.internalGet(q))&&a&&"function"===typeof a.destroy&&(a.destroy(),this.metadatas[q].nonNullable||this.internalSet(q,null))};Object.defineProperty(a.prototype,"initialized",
{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});a.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))};a.prototype.get=function(a){var c=this.metadatas[a];if(this.store.has(a)&&!this.dirties[a])return this.store.get(a);var e=c.get;return e?(c=e.call(this.host),this.store.set(a,c,b.OriginId.COMPUTED),this.propertyCommitted(a),c):c.value};a.prototype.originOf=function(a){var c=this.store.originOf(a);return void 0===
c&&(a=this.metadatas[a])&&a.hasOwnProperty("value")?"defaults":b.idToName(c)};a.prototype.has=function(a){return this.metadatas[a]?this.store.has(a):!1};a.prototype.internalGet=function(a){if(this.metadatas[a]){var c=this.store;return c.has(a)?c.get(a):this.metadatas[a].value}};a.prototype.internalSet=function(a,e){if(this.metadatas[a]){var c=this.initialized?this._origin:b.OriginId.DEFAULTS,n=this.store.get(a,c);if(e!==n||!this.store.has(a,c)||this.isOverridden(a))this.propertyInvalidated(a),this.store.set(a,
e,c),this.propertyCommitted(a)}};a.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]};a.prototype.keys=function(){return Object.keys(this.metadatas)};a.prototype.override=function(a,e){if(this.metadatas[a]){this.overridden||(this.overridden={});var c=this.metadatas[a];if(!c.nonNullable||null!=e){if(c=c.cast){e=this.cast(c,e);var c=e.valid,n=e.value;p.release(e);if(!c)return;e=n}this.overridden[a]=!0;this.internalSet(a,e)}}};a.prototype.set=function(a,e){if(this.metadatas[a]){var c=
this.metadatas[a];if(!c.nonNullable||null!=e){var n=c.set;if(c=c.cast){e=this.cast(c,e);var c=e.valid,b=e.value;p.release(e);if(!c)return;e=b}n?n.call(this.host,e):this.internalSet(a,e)}}};a.prototype.setDefaultOrigin=function(a){this._origin=b.nameToId(a)};a.prototype.propertyInvalidated=function(a){var c=this.dirties,e=this.isOverridden(a),q=this.cursors&&this.cursors[a],b=this.metadatas[a].computes;if(q)for(var g=0;g<q.length;g++)q[g].propertyInvalidated(this,a);e||(c[a]=!0);if(b)for(a=0;a<b.length;a++)this.propertyInvalidated(b[a])};
a.prototype.propertyCommitted=function(a){var c=this.cursors&&this.cursors[a];this.dirties[a]=!1;if(c)for(var e=0;e<c.length;e++)c[e].propertyCommitted(this,a)};a.prototype.addCursor=function(a,e){this.cursors||(this.cursors={});var c=this.cursors[a];c||(this.cursors[a]=c=[]);c.push(e)};a.prototype.removeCursor=function(a,e){var c=this.cursors[a];this.cursors[a]&&(c.splice(c.indexOf(e),1),0===c.length&&(this.cursors[a]=null))};a.prototype.cast=function(a,e){var c=p.acquire();c.valid=!0;c.value=e;
a&&(c.value=a.call(this.host,e,c));return c};return a}();l=function(){function a(){this.value=null;this.valid=!0}a.prototype.acquire=function(){this.valid=!0};a.prototype.release=function(){this.value=null};return a}();var p=new h(l);a.default=d})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(d,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});var k=
[l.default,f.default,h.default];a.processPrototypeMetadatas=function(a,g){for(var b=Object.getOwnPropertyNames(a),e=0;e<k.length;e++){var c=k[e];if(c.processPrototypePropertyMetadata)for(var n=0,m=b;n<m.length;n++){var q=m[n];c.processPrototypePropertyMetadata(q,a[q],a,g)}}};a.processClassMetadatas=function(a,g){for(var b=Object.getOwnPropertyNames(a),e=0;e<k.length;e++){var c=k[e];if(c.processClassPropertyMetadata)for(var n=0,m=b;n<m.length;n++){var q=m[n];c.processClassPropertyMetadata(q,a[q],a,
g)}}};a.instanceCreated=function(a,g){for(var b=Object.getOwnPropertyNames(g),e=0;e<k.length;e++){var c=k[e];c.instanceCreated&&c.instanceCreated(a,g,b)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports ../../has ../get ../set ../utils ../wire".split(" "),function(d,a,l,f,h,k,b){function g(a,e,c){var n=k.getProperties(a);return b.wire(a,c.aliasOf,function(){n.propertyInvalidated(e)})}Object.defineProperty(a,"__esModule",{value:!0});a.AliasedPropertyExtension=
{processClassPropertyMetadata:function(a,e,c,n){var m=e.aliasOf;if(m&&(a=m.split(".")[0],null!=c[a]&&!e.set&&!e.get)){var q;e.get=function(){var a=f.default(this,m);if("function"===typeof a){q||(q=m.split(".").slice(0,-1).join("."));var c=f.default(this,q);c&&(a=a.bind(c))}return a};e.readOnly||(e.set=function(a){return h.default(this,m,a)})}},instanceCreated:function(a,e,c){for(var n=0;n<c.length;n++){var m=c[n],q=e[m];q.aliasOf&&g(a,m,q)}}};a.default=a.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require",
"exports","./utils"],function(d,a,l){function f(a,b,e){if(null!=e.getItemAt||Array.isArray(e)){var c=parseInt(a,10);if(!isNaN(c))return Array.isArray(e)?e[c]:e.getItemAt(c)}c=l.getProperties(e);return b?l.isPropertyDeclared(c,a)?c.get(a):e[a]:l.isPropertyDeclared(c,a)?c.internalGet(a):e[a]}function h(a,b,e,c){if(null==a)return a;if((a=f(b[c],e,a))||!(c<b.length-1))return c===b.length-1?a:h(a,b,e,c+1)}function k(a,b,e,c){void 0===e&&(e=!1);void 0===c&&(c=0);return"string"===typeof b&&-1===b.indexOf(".")?
f(b,e,a):h(a,l.pathToArray(b),e,c)}function b(a,b){return k(a,b,!0)}Object.defineProperty(a,"__esModule",{value:!0});a.valueOf=k;a.get=b;a.exists=function(a,b){return void 0!==k(b,a,!0)};a.default=b})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(d,a,l){function f(a,b,e){return b?Object.keys(b).reduce(function(a,n){var c=null,q="merge";e&&(c=e.path?e.path+"."+n:n,q=e.policy(c));if("replace"===q)return a[n]=b[n],a;if(void 0===a[n])return a[n]=l.clone(b[n]),
a;var g=a[n],q=b[n];if(g===q)return a;if(Array.isArray(q)||Array.isArray(a))g=g?Array.isArray(g)?a[n]=g.concat():a[n]=[g]:a[n]=[],q&&(Array.isArray(q)||(q=[q]),q.forEach(function(a){-1===g.indexOf(a)&&g.push(a)}));else if(q&&"object"===typeof q)if(e){var k=e.path;e.path=c;a[n]=f(g,q,e);e.path=k}else a[n]=f(g,q,null);else if(!a.hasOwnProperty(n)||b.hasOwnProperty(n))a[n]=q;return a},a||{}):a}function h(a){return Array.isArray(a)?a:a.split(".")}function k(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=
Array.isArray(a)?a:a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return 1===a.length?a[0]:a}return a.trim()}function b(a){var b=!1;return function(){b||(b=!0,a())}}Object.defineProperty(a,"__esModule",{value:!0});a.getProperties=function(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null};a.isPropertyDeclared=function(a,b){return a&&a.metadatas&&null!=a.metadatas[b]};a.merge=function(a,b,e){return e?f(a,b,{policy:e,path:""}):f(a,b,null)};a.pathToStringOrArray=function(a){return a?
"string"===typeof a&&-1===a.indexOf(".")?a:h(a):a};a.pathToArray=h;a.splitPath=k;a.parseConditionalPath=function(a){if(-1===a.indexOf("?"))return null;a=h(a);for(var b=Array(a.length),e=0;e<a.length;e++){var c=a[e];b[e]="?"===c[c.length-1];b[e]&&(a[e]=c.slice(0,-1))}return{fullPath:a.join("."),conditional:b}};a.parse=function(a,f,e,c){f=k(f);if(Array.isArray(f)){var n=f.map(function(m){return c(a,m.trim(),e)});return{remove:b(function(){return n.forEach(function(a){return a.remove()})})}}return c(a,
f.trim(),e)};a.once=b})},"esri/core/accessorSupport/set":function(){define(["require","exports","../has","../Logger","./get"],function(d,a,l,f,h){function k(a,g,f){if(a&&g)if("object"===typeof g){f=0;for(var e=Object.getOwnPropertyNames(g);f<e.length;f++){var c=e[f];k(a,c,g[c])}}else"_"!==g[0]&&(-1!==g.indexOf(".")?(g=g.split("."),c=g.splice(g.length-1,1)[0],k(h.default(a,g),c,f)):a[g]=f)}Object.defineProperty(a,"__esModule",{value:!0});f.getLogger("esri.core.accessorSupport.set");a.set=k;a.default=
k})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(d,a,l){function f(a,c,n){c=l.splitPath(c);if(Array.isArray(c)){for(var e=[],q=0;q<c.length;q++)e.push((new h(c[q],n)).install(a));return new g(e)}a=(new h(c,n)).install(a);return new p(a)}Object.defineProperty(a,"__esModule",{value:!0});var h=function(){function a(a,e){this.path=a;this.callback=e;this.conditional=this.chain=null;if(-1<a.indexOf(".")){if(a=l.parseConditionalPath(a))this.path=a.fullPath,
this.conditional=a.conditional;this.chain=l.pathToArray(this.path)}this.callback=e;return this}a.prototype.install=function(a){a=this.chain?new b(this,a):new k(this,a);return a};a.prototype.notify=function(a){this.callback(a,this.path)};return a}(),k=function(){function a(a,e){this.binding=a;this.target=e;l.getProperties(e).addCursor(this.binding.path,this)}a.prototype.destroy=function(){this.target&&(l.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};
a.prototype.propertyDestroyed=function(a,e){l.getProperties(this.target).removeCursor(e,this)};a.prototype.propertyInvalidated=function(a,e){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,e){this.binding&&this.binding.notify(this.target)};return a}(),b=function(){function a(a,e){this.binding=a;this.target=e;this.stack=[];this.properties=l.getProperties(e);this.stack.push({properties:this.properties,propertyName:a.chain[0]});this.properties.addCursor(a.chain[0],
this);this.moveForward();return this}a.prototype.destroy=function(){for(;;){var a=this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};a.prototype.propertyDestroyed=function(a,e){this.moveBackward(a,e)};a.prototype.propertyInvalidated=function(a,e){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,e){this.binding&&(this.moveBackward(a,e),this.moveForward(),this.binding.notify(this.target))};a.prototype.moveBackward=
function(a,e){for(var c=this.stack,n=c[c.length-1];n.properties!==a&&n.propertyName!==e;)n.properties.removeCursor(n.propertyName,this),c.pop(),n=c[c.length-1]};a.prototype.moveForward=function(){var a=this.stack,e=a[a.length-1],e=e.properties.internalGet(e.propertyName);if((e=l.getProperties(e))&&a.length<this.binding.chain.length){var m=this.binding.chain[a.length];this.binding.conditional&&this.binding.conditional[a.length]&&!e.metadatas[m]||(this.stack.push({properties:e,propertyName:m}),e.addCursor(m,
this),this.moveForward())}};return a}(),g=function(){function a(a){this.cursors=a}a.prototype.remove=function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();this.cursors=null};return a}(),p=function(){function a(a){this.cursor=a}a.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return a}();a.create=function(a,c){a=l.splitPath(a);if(Array.isArray(a)){for(var e=[],m=0;m<a.length;m++)e.push(new h(a[m],c));return function(a){for(var c=[],m=0;m<e.length;m++)c[m]=e[m].install(a);
return new g(c)}}var q=new h(a,c);return function(a){return new p(q.install(a))}};a.wire=f;a.default=f})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports ../../has ../../Logger ../utils ../wire".split(" "),function(d,a,l,f,h,k){Object.defineProperty(a,"__esModule",{value:!0});f.getLogger("esri.core.accessorSupport.extensions.computedProperty");a.ComputedPropertyExtension={processClassPropertyMetadata:function(a,g,f,e){g.dependsOn&&(f=void 0,f=g.dependsOn.slice())&&
(g.wire=k.create(f,function(e){return h.getProperties(e).propertyInvalidated(a)}))},instanceCreated:function(a,g,k){for(var e=0;e<k.length;e++){var c=g[k[e]];c.wire&&c.wire(a)}}};a.default=a.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ../ensureType ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),function(d,a,l,f,h,k,b){function g(a,
e,c){var n=a&&a.json;a&&a.json&&a.json.origins&&c&&(a=a.json.origins[c.origin])&&e in a&&(n=a);return n}Object.defineProperty(a,"__esModule",{value:!0});a.originSpecificReadPropertyDefinition=function(a,e){return g(a,"read",e)};a.originSpecificWritePropertyDefinition=function(a,e){return g(a,"write",e)};a.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,e,c,n){if(k.process(e)){f.process(e);c=e.type;for(n=0;Array.isArray(c)&&!l.isOneOf(c);)c=c[0],n++;if(e.json.origins)for(var m in e.json.origins){var q=
e.json.origins[m];h.create(c,n,a,q);b.create(c,n,a,q)}h.create(c,n,a,e.json);b.create(c,n,a,e.json)}}};a.default=a.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){if(a.json&&a.json.origins){var f=a.json.origins,d={"web-document":["web-scene","web-map"]};a=function(a){if(f[a]){var b=f[a];d[a].forEach(function(a){f[a]=
b});delete f[a]}};for(var k in d)a(k)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(d,a,l,f){function h(a,c,q,b){if(1<c)return g(a,c);if(1===c)return p(a);if(e(a)){var m=p(a.prototype.itemType.Type);return function(e,c,q){return(e=m(e,c,q))?new a(e):e}}return k(a)}function k(a){return a.prototype.read?function(e,c,n){return null==e?e:(new a).read(e,n)}:a.fromJSON}function b(a,e,c,g){return 0!==g&&
Array.isArray(e)?e.map(function(e){return b(a,e,c,g-1)}):a(e,null,c)}function g(a,e){a=k(a);var c=b.bind(null,a);return function(a,m,q){if(null==a)return a;a=c(a,q,e);m=e;for(q=a;0<m&&Array.isArray(q);)m--,q=q[0];if(void 0!==q)for(q=0;q<m;q++)a=[a];return a}}function p(a){var e=k(a);return function(a,c,m){return null==a?a:Array.isArray(a)?a.map(function(a){return e(a,null,m)}):[e(a,null,m)]}}function e(a){return f.isCollection(a)?(a=a.prototype.itemType)&&a.Type&&"function"===typeof a.Type?c(a.Type):
!1:!1}function c(a){return Array.isArray(a)?!1:!!a&&a.prototype&&("read"in a.prototype||"fromJSON"in a||e(a))}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,e,q,b){(!b.read||!b.read.reader&&!1!==b.read.enabled)&&c(a)&&l.setDeepValue("read.reader",h(a,e,q,b),b)}})},"esri/core/object":function(){define(["require","exports"],function(d,a){function l(a,d,k){for(var b=0;b<a.length;b++){var g=a[b];if(!(g in k))if(d)k[g]={};else return;k=k[g]}return k}Object.defineProperty(a,"__esModule",
{value:!0});a.getDeepValue=function(a,d){return l(a.split("."),!1,d)};a.setDeepValue=function(a,d,k){var b=a.split(".");a=b.pop();(k=l(b,!0,k))&&a&&(k[a]=d)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.isCollection=function(a){return!!a&&a.prototype&&a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require",
"exports"],function(d,a){function l(a){"boolean"===typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&(a.read.enabled=!0)}function f(a){"boolean"===typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(a,"__esModule",{value:!0});a.process=
function(a){a.json||(a.json={});l(a.json);f(a.json);if(a.json.origins)for(var k in a.json.origins)l(a.json.origins[k]),f(a.json.origins[k]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(d,a,l,f){function h(a,c,n,m){l.setDeepValue(n,k(a,m),c)}function k(a,c){return a&&"function"===typeof a.write?a.write({},c):a&&"function"===typeof a.toJSON?a.toJSON():"number"===typeof a?-Infinity===a?-Number.MAX_VALUE:
Infinity===a?Number.MAX_VALUE:isNaN(a)?null:a:a}function b(a,c,n,m){null===a?a=null:a&&"function"===typeof a.map?(a=a.map(function(a){return k(a,m)}),"function"===typeof a.toArray&&(a=a.toArray())):a=[k(a,m)];l.setDeepValue(n,a,c)}function g(a,c,n){return 0!==n&&Array.isArray(a)?a.map(function(a){return g(a,c,n-1)}):k(a,c)}function p(a){return function(e,n,m,q){if(null===e)e=null;else{e=g(e,q,a);q=a;for(var c=e;0<q&&Array.isArray(c);)q--,c=c[0];if(void 0!==c)for(c=0;c<q;c++)e=[e]}l.setDeepValue(m,
e,n)}}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,c,n,m){m.write&&!m.write.writer&&!1!==m.write.enabled&&(1===c||f.isCollection(a)?m.write.writer=b:m.write.writer=1<c?p(c):h)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(d,a){function l(a){switch(a){case "defaults":return h.DEFAULTS;case "service":return h.SERVICE;case "portal-item":return h.PORTAL_ITEM;case "web-scene":return h.WEB_SCENE;case "web-map":return h.WEB_MAP;case "user":return h.USER}}
function f(a){switch(a){case h.DEFAULTS:return"defaults";case h.SERVICE:return"service";case h.PORTAL_ITEM:return"portal-item";case h.WEB_SCENE:return"web-scene";case h.WEB_MAP:return"web-map";case h.USER:return"user"}}Object.defineProperty(a,"__esModule",{value:!0});var h;(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(h=a.OriginId||
(a.OriginId={}));a.nameToId=l;a.idToName=f;a.readableNameToId=function(a){return l(a)};a.idToReadableName=function(a){return f(a)};a.writableNameToId=function(a){return l(a)};a.idToWritableName=function(a){return f(a)}})},"esri/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._values={}}a.prototype.get=function(a){return this._values[a]};a.prototype.originOf=function(a){return l.OriginId.USER};
a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,k){this._values[a]=k};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a){return a in this._values};return a}();a.default=d})},"esri/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),function(d,a,l,f,h,k,b,g){Object.defineProperty(a,"__esModule",{value:!0});var p=Object.prototype.hasOwnProperty,
e=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,c={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},n=/^_(set|get)([a-zA-Z0-9]+)Attr$/;a.processPrototype=function(a){for(var m=a.declaredClass,g=a.properties||{},d=0,t=Object.getOwnPropertyNames(g);d<t.length;d++){var u=t[d],z=g[u],D=typeof z;null==z?k.setPropertyMetadata(a,u,{value:z}):Array.isArray(z)?k.setPropertyMetadata(a,u,{type:[z[0]],value:null}):"object"===D?b.getProperties(z)||z instanceof
Date?k.setPropertyMetadata(a,u,{type:z.constructor,value:z}):k.setPropertyMetadata(a,u,z):"boolean"===D?k.setPropertyMetadata(a,u,{type:Boolean,value:z}):"string"===D?k.setPropertyMetadata(a,u,{type:String,value:z}):"number"===D?k.setPropertyMetadata(a,u,{type:Number,value:z}):"function"===D&&k.setPropertyMetadata(a,u,{type:z,value:null})}d=0;for(t=Object.getOwnPropertyNames(a);d<t.length;d++){var D=t[d],z=a[D],g=u=void 0,B=e.exec(D);if(B)u=B[1],g=c[B[2]];else if(B=n.exec(D))u=B[2][0].toLowerCase()+
B[2].substr(1),g=B[1].toLowerCase();u&&g&&(u=k.getPropertyMetadata(a,u),l.setDeepValue(g,z,u))}d=0;for(t=Object.getOwnPropertyNames(k.getPropertiesMetadata(a));d<t.length;d++)if(u=t[d],z=k.getPropertyMetadata(a,u),g=z.type,D=z.types,void 0===z.value&&p.call(a,u)&&(z.value=a[u]),!z.cast&&g){u=z;z=0;for(D=g;Array.isArray(D)&&1===D.length&&"string"!==typeof D[0]&&"number"!==typeof D[0];)D=D[0],z++;g=f.isOneOf(D)?0===z?f.ensureOneOf(D):f.ensureNArrayTyped(f.ensureOneOf(D),z):1===z?f.ensureArray(D):1<
z?f.ensureNArray(D,z):f.ensureType(g);u.cast=g}else!z.cast&&D&&(Array.isArray(D)?z.cast=f.ensureArrayTyped(f.ensureOneOfType(D[0])):z.cast=f.ensureOneOfType(D));h.processPrototypeMetadatas(k.getPropertiesMetadata(a),m);return k.getPropertiesMetadata(a)};a.processClass=function(a){for(var e=a.prototype,c=e.declaredClass,m=a._meta.bases,n={},b=m.length-1;0<=b;b--)k.merge(n,k.getMetadata(m[b].prototype));var f=n.properties;h.processClassMetadatas(f,c);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:f,
autoDestroy:!!n.autoDestroy}});for(var d={},c=function(a){var e=f[a];d[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):e.value},set:function(c){var m=this.__accessor__;if(!m)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:c});else if(!Object.isFrozen(this)){if(m.initialized&&e.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===m.lifecycle&&e.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
a+"' of "+this.declaredClass);m.set(a,c)}}}},m=0,b=Object.getOwnPropertyNames(f);m<b.length;m++)c(b[m]);Object.defineProperties(a.prototype,d);if(n.parameters)for(a=0,c=Object.getOwnPropertyNames(n.parameters);a<c.length;a++)m=c[a],b=Object.getOwnPropertyDescriptor(e,m)||{value:e[m]},(b=g.autocastMethod(e,m,b))&&Object.defineProperty(e,m,b);return n}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports","./utils"],function(d,a,l){function f(a){return null!=a.__accessorMetadata__}
function h(a){return f(a)&&null!=k(a).properties}function k(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function b(a){a=k(a);var e=a.properties;e||(e=a.properties={});return e}function g(a,e){var c=k(a);a=c.parameters;a||(a=c.parameters={});c=a[e];c||(c=[],a[e]=c);return c}function p(a){return c.test(a)?"replace":"merge"}function e(a){return n.test(a)?p(a.slice(11)):"merge"}Object.defineProperty(a,
"__esModule",{value:!0});a.hasMetadata=f;a.hasPropertiesMetadata=h;a.hasPropertyMetadata=function(a,e){return h(a)&&null!=b(a)[e]};a.hasParametersMetadata=function(a,e){return f(a)&&null!=k(a).parameters&&null!=k(a).parameters[e]};a.getMetadata=k;a.getPropertiesMetadata=b;a.getPropertyMetadata=function(a,e){a=b(a);var c=a[e];c||(c=a[e]={});return c};a.setPropertyMetadata=function(a,e,c){b(a)[e]=c};a.getParametersMetadata=g;a.getParameterMetadata=function(a,e,c){var m=g(a,e)[c];m||(g(a,e)[c]=m={index:c});
return m};a.merge=function(a,c){return l.merge(a,c,e)};a.mergeProperty=function(a,e){return l.merge(a,e,p)};var c=/^[^.]+\.(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/,n=/^properties\./})},"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(d,a,l,f){function h(a){var e="_meta"in a?l.ensureType(a):a;return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a.push(e);return"number"===typeof a[2]?b.apply(this,
a):k.apply(this,a)}}function k(a,c,n,m){f.getPropertyMetadata(a,c).cast=m}function b(a,c,n,m){f.getParameterMetadata(a,c,n).cast=m}function g(a){return function(e,n,m){f.getPropertyMetadata(e,a).cast=e[n]}}Object.defineProperty(a,"__esModule",{value:!0});var p=Object.prototype.toString;a.autocastMethod=function(a,c,n){if(f.hasParametersMetadata(a,c)){var e=f.getParametersMetadata(a,c).filter(function(a){return null!=a.cast});if(e.length){var q=n.value;n.value=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=
arguments[c];for(c=0;c<e.length;c++){var m=e[c];a[m.index]=m.cast(a[m.index])}return q.apply(this,a)};return n}console.warn("Method "+a.declaredClass+"::"+c+" is decorated with @cast but no parameters are decorated")}};a.cast=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(3!==a.length||"string"!==typeof a[1]){if(1===a.length&&"[object Function]"===p.call(a[0]))return h(a[0]);if(1===a.length&&"string"===typeof a[0])return g(a[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),
function(d,a,l,f,h,k,b,g,p){function e(a){u.has(a)?z.splice(z.indexOf(a),1):u.add(a);z.push(a);D||(D=k.schedule(n))}function c(a){if(!a.removed){var e=a.callback,c=a.path,m=a.oldValue,n=a.target,q=b.valueOf(n,a.propertyPath,!0);f.equals(m,q)||(a.oldValue=q,e.call(n,q,m,c,n))}}function n(){if(D){D=null;var a=z;z=t.acquire();u.clear();for(var e=t.acquire(),m=0;m<a.length;m++){var n=a[m];c(n);n.removed&&e.push(n)}for(m=0;m<z.length;m++)n=z[m],n.removed&&(e.push(n),u.delete(n),z.splice(m,1),--m);for(m=
0;m<e.length;m++)x.pool.release(e[m]);t.release(a);t.release(e);B.forEach(function(a){return a()})}}function m(a,c,m){var n=g.parse(a,c,m,function(a,c,m){var q=b.valueOf(a,c,!0),k,f=p.wire(a,c,function(a,c){a.__accessor__.destroyed?n.remove():(k||(k=x.pool.acquire(a,c,q,m),q=null),e(k))});return{remove:g.once(function(){f.remove();k&&(k.removed=!0,e(k),k=null);n=f=q=null})}});return n}function q(a,e,c){var m=g.parse(a,e,c,function(a,e,c){var n=b.valueOf(a,e,!0),q=!1;return p.wire(a,e,function(a,e){if(a.__accessor__.destroyed)m.remove();
else if(!q){q=!0;var g=b.valueOf(a,e,!0);f.equals(n,g)||c.call(a,g,n,e,a);n=b.valueOf(a,e,!0);q=!1}})});return m}function y(a,e,c,n){void 0===n&&(n=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:n?q(a,e,c):m(a,e,c)}Object.defineProperty(a,"__esModule",{value:!0});var x=function(){function a(a,e,c,m){this.target=a;this.path=e;this.oldValue=c;this.callback=m;this.removed=!1;this.propertyPath=g.pathToStringOrArray(e)}a.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};a.pool=new h(a,!0);return a}(),t=new l,u=new Set,z=t.acquire(),D;a.dispatchTarget=function(a){for(var e=t.copy(z),m=0;m<e.length;m++){var n=e[m];n.target===a&&(c(n),u.delete(n),z.splice(z.indexOf(n),1))}};a.removeTarget=function(a){for(var e=0;e<z.length;e++){var c=z[e];c.target===a&&(c.removed=!0)}};a.dispatch=n;var B=new Set;a.afterDispatch=function(a){B.add(a);return{remove:function(){B.delete(a)}}};a.watch=y;a.isValueInUse=function(a){return z.some(function(e){return e.oldValue===
a})};a.default=y})},"esri/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(d,a,l,f,h){function k(e){void 0===e&&(e=a.now());a.debug.rafId=null;0<D.length&&(a.debug.rafId=b());if(0<m){var c=e-m;x=Math.min(c,x);if(c<q)return}a.debug.executeFrameTasks(e)}function b(){return a.debug.requestNextFrame?a.debug.requestNextFrame(e):e()}function g(){for(var a=0;a<D.length;){var e=D[a];a++;if(e.removed){D.splice(a-1,1);for(var c=0;c<u.length;c++){var m=
u[c];if(e.phases[m]){var m=B[m],n=m.indexOf(e);-1!==n&&m.splice(n,1)}}}}}function p(){for(;z.length;){var e=z.shift();e.isActive&&(e.isActive=!1,e.callback())}a.debug.willDispatch=!1}function e(){return h(k)}Object.defineProperty(a,"__esModule",{value:!0});a.now=f;var c=function(){return function(a){this.phases=a;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),n=function(){function a(a){this.callback=a;this.isActive=!0}a.prototype.remove=function(){this.isActive=
!1};return a}(),m=-1,q=0,y=0,x=Number.POSITIVE_INFINITY,t={time:0,deltaTime:0,tickTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},u=["prepare","preRender","render","postRender","update"],z=[],D=[],B={prepare:[],preRender:[],render:[],postRender:[],update:[]},w=function(){function e(a){this._task=a}e.prototype.remove=function(){this._task.removed=!0};e.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=a.now())};e.prototype.resume=function(){this._task.paused&&
(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=a.now()-this._task.pausedAt))};return e}();a.FrameTaskHandle=w;a.debug={frameTasks:D,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===a&&(a=!1);for(var e=0;e<D.length;e++)D[e].removed=!0;a&&g()},dispatch:p,executeFrameTasks:function(e){void 0===e&&(e=a.now());0>m&&(m=e);var c=e-m,n=0<y?y:x,q=Math.max(0,c-n);m=e;for(var b=0;b<D.length;b++){var k=D[b];-1!==k.epoch&&(k.dt=c)}for(b=0;b<u.length;b++)for(var c=
u[b],f=B[c],d=0;d<f.length;d++)k=f[(d+C)%f.length],k.paused||k.removed||(0===b&&k.ticks++,-1===k.epoch&&(k.epoch=e),t.time=e,t.deltaTime=k.dt,t.tickTime=Math.min(x,33),t.elapsedFrameTime=a.now()-e,t.frameDuration=n-q,t.spendInTask=e-k.epoch,k.phases[c].call(k,t));g();++C}};a.schedule=function(e){e=new n(e);z.push(e);a.debug.willDispatch||(a.debug.willDispatch=!0,l(p));return e};a.addFrameTask=function(e){var n=new c(e);D.push(n);for(var q=0,g=u;q<g.length;q++){var k=g[q];e[k]&&B[k].push(n)}a.debug.rafId||
(m=-1,a.debug.rafId=b());return new w(n)};a.setFrameRate=function(a){if(0>=a)y=q=0;else{var e=1.05*x;a=Math.ceil(1E3/a/e);q=(a-1)*e;y=a*x}};var C=0;a.requestNextFrame=b})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(d,a,l,f){var h=f();d=l.requestAnimationFrame;if(!d){a=["ms","moz","webkit","o"];for(var k=0;k<a.length&&!d;++k)d=l[a[k]+"RequestAnimationFrame"];d||(d=function(a){var b=f(),k=Math.max(0,16-(b-h)),e=l.setTimeout(function(){a(f())},
k);h=b+k;return e})}return d})},"esri/core/asyncUtils":function(){define(["require","exports","./tsSupport/generatorHelper","./tsSupport/awaiterHelper","./promiseUtils"],function(d,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});a.forEach=function(a,b,g){return h.eachAlways(a.map(function(a,e){return b.apply(g,[a,e])}))};a.map=function(a,b,g){return h.eachAlways(a.map(function(a,e){return b.apply(g,[a,e])})).then(function(a){return a.map(function(a){return a.value})})};a.result=function(a){return a.then(function(a){return{ok:!0,
value:a}}).catch(function(a){return{ok:!1,error:a}})};a.assertResult=function(a){if(!0===a.ok)return a.value;throw a.error;};a.safeCast=function(a){return a};a.safeCastCall=function(a){return a()};a.safeCastReturn=function(a){return a}})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/enumeration ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n){function m(e){for(var c in e)a.hasOwnProperty(c)||(a[c]=e[c])}Object.defineProperty(a,"__esModule",{value:!0});m(l);m(f);m(h);m(k);m(b);m(g);m(p);m(e);m(c);m(n)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.aliasOf=function(a){return function(f,k){l.getPropertyMetadata(f,k).aliasOf=a}}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.autoDestroy=function(){return function(a,d,k){l.getMetadata(a).autoDestroy=!0;return a[d]}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.declared=function(a){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];d=function(){return this||{}};d.__bases__=[a].concat(f);return d}})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["require",
"exports","../../kebabDictionary","./property"],function(d,a,l,f){function h(a){return f.property({type:a})}Object.defineProperty(a,"__esModule",{value:!0});a.enumeration=h;(function(a){a.serializable=function(){return function(a){a=a instanceof l.KebabDictionary?a:new l.KebabDictionary(a,{ignoreUnknown:!0});return f.property({type:a.apiValues,json:{type:a.jsonValues,read:{reader:a.read},write:{writer:a.write}}})}}})(h=a.enumeration||(a.enumeration={}))})},"esri/core/kebabDictionary":function(){define(["require",
"exports"],function(d,a){function l(a,k){void 0===k&&(k={});return new f(a,k)}var f=function(){function a(a,b){void 0===b&&(b={ignoreUnknown:!1});var g=this;this.jsonToAPI=a;this.options=b;this.apiValues=[];this.jsonValues=[];this.apiToJSON=this.invertMap(a);this.apiValues=this.getKeysSorted(this.apiToJSON);this.jsonValues=this.getKeysSorted(this.jsonToAPI);this.read=function(a){return g.fromJSON(a)};this.write=function(a,e,c){a=g.toJSON(a);void 0!==a&&(e[c]=a)}}a.prototype.toJSON=function(a){return this.apiToJSON.hasOwnProperty(a)?
this.apiToJSON[a]:this.options.ignoreUnknown?void 0:a};a.prototype.fromJSON=function(a){return this.jsonToAPI.hasOwnProperty(a)?this.jsonToAPI[a]:this.options.ignoreUnknown?void 0:a};a.prototype.invertMap=function(a){var b={},g;for(g in a)b[a[g]]=g;return b};a.prototype.getKeysSorted=function(a){var b=[],g;for(g in a)b.push(g);b.sort();return b};return a}();(function(a){a.strict=function(){return function(k){return new a.KebabDictionary(k,{ignoreUnknown:!0})}};a.KebabDictionary=f})(l||(l={}));return l})},
"esri/core/accessorSupport/decorators/property":function(){define("require exports ../../has ../../lang ../../Logger ../metadata".split(" "),function(d,a,l,f,h,k){Object.defineProperty(a,"__esModule",{value:!0});h.getLogger("esri.core.accessorSupport.decorators.property");a.property=function(a){void 0===a&&(a={});return function(b,d){var e=b.constructor.prototype;e!==Function.prototype&&((b=Object.getOwnPropertyDescriptor(b,d))&&(b.get||b.set)?(a=f.clone(a),b.set&&(a.set=b.set),b.get&&(a.get=b.get)):
b&&b.hasOwnProperty("value")&&(a=f.clone(a),a.value=b.value),d=k.getPropertyMetadata(e,d),k.mergeProperty(d,a))}};a.propertyJSONMeta=function(a,g,f){a=k.getPropertyMetadata(a.constructor.prototype,f);a.json||(a.json={});a=a.json;void 0!==g&&(a.origins||(a.origins={}),a.origins[g]||(a.origins[g]={}),a=a.origins[g]);return a}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});
a.reader=function(a,k,b){var g,d;void 0===k||Array.isArray(k)?(d=a,b=k,g=[void 0]):(d=k,g=Array.isArray(a)?a:[a]);return function(a,c,n){var e=a.constructor.prototype;g.forEach(function(m){m=f.propertyJSONMeta(a,m,d);m.read&&"object"!==typeof m.read&&(m.read={});l.setDeepValue("read.reader",e[c],m);b&&(m.read.source=(m.read.source||[]).concat(b))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});
a.shared=function(a){return function(f,d){f[d]=a}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(d,a,l,f){function h(a,e){a.read&&("function"===typeof a.read?e.push(a.read):"object"===typeof a.read&&a.read.reader&&e.push(a.read.reader))}function k(a,e){a.write&&("function"===typeof a.write?e.push(a.write):"object"===typeof a.write&&a.write.writer&&e.push(a.write.writer))}function b(a){var e=[];a=f.getPropertiesMetadata(a.prototype);
if(!a)return e;for(var c in a){var q=a[c];q.cast&&e.push(q.cast);q.copy&&e.push(q.copy);if(q=q.json)if(h(q,e),k(q,e),q=q.origins)for(var b in q){var g=q[b];h(g,e);k(g,e)}}return e}function g(a){var c={values:{},descriptors:{}},m=["__bases__"],q=f.getPropertiesMetadata(a.prototype),g=b(a);Object.getOwnPropertyNames(a.prototype).filter(function(c){return-1!==m.indexOf(c)||q&&q.hasOwnProperty(c)||!e(Object.getOwnPropertyDescriptor(a.prototype,c))&&-1!==g.indexOf(a.prototype[c])?!1:!0}).forEach(function(m){var n=
Object.getOwnPropertyDescriptor(a.prototype,m);e(n)?c.descriptors[m]=n:c.values[m]=a.prototype[m]});return c}function p(a){var c=Object.getOwnPropertyNames(a),m=Object.getPrototypeOf(a.prototype).constructor,q=Object.getOwnPropertyNames(Function);q.push("__bases__");var b=Object.getOwnPropertyNames(m),g={values:{},descriptors:{}};c.filter(function(e){return-1!==q.indexOf(e)?!1:-1===b.indexOf(e)||m[e]!==a[e]?!0:!1}).forEach(function(c){var m=Object.getOwnPropertyDescriptor(a,c);e(m)?g.descriptors[c]=
m:g.values[c]=a[c]});return g}function e(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(a,"__esModule",{value:!0});a.subclass=function(a){return function(e){var c=g(e),n=p(e);null!=a&&(c.values.declaredClass=a);e=l(e.__bases__,c.values);Object.defineProperties(e.prototype,c.descriptors);for(var b in n.values)e[b]=n.values[b];Object.defineProperties(e,n.descriptors);return e}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],
function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});a.writer=function(a,k,b){var g,d;void 0===k?(d=a,g=[void 0]):"string"!==typeof k?(d=a,g=[void 0],b=k):(d=k,g=Array.isArray(a)?a:[a]);return function(a,c,n){var e=a.constructor.prototype;g.forEach(function(m){m=f.propertyJSONMeta(a,m,d);m.write&&"object"!==typeof m.write&&(m.write={});b&&l.setDeepValue("write.target",b,m);l.setDeepValue("write.writer",e[c],m)})}}})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y){var x=g({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(a){function b(e){e=a.call(this)||this;e.dpi=96;e.format=null;e.origin=null;e.minScale=0;e.maxScale=0;e.size=null;e.spatialReference=null;return e}f(b,a);g=b;b.create=function(a){void 0===a&&(a={size:256,spatialReference:k.SpatialReference.WebMercator});
var e=a.resolutionFactor||1,c=a.scales,q=a.size||256;a=a.spatialReference||k.SpatialReference.WebMercator;if(!m.isValid(a)){for(var e=[],b=5E-4,f=23;0<=f;f--)e.unshift({level:f,scale:b,resolution:b}),b*=2;return new g({dpi:96,lods:e,origin:new k.Point(0,0,a),size:q,spatialReference:a})}var d=(f=m.getInfo(a))?new k.Point(f.origin[0],f.origin[1],a):new k.Point(0,0,a),t=1/(39.37*n.getMetersPerUnitForSR(a)*96),u=[];if(c)for(f=0;f<c.length;f++){var h=c[f],b=h*t;u.push({level:f,scale:h,resolution:b})}else for(b=
m.isGeographic(a)?512/q*1.47748799285417E8:256/q*5.91657527591555E8,c=Math.ceil(24/e),u.push({level:0,scale:b,resolution:b*t}),f=1;f<c;f++)h=b/Math.pow(2,e),b=h*t,u.push({level:f,scale:h,resolution:b}),b=h;return new g({dpi:96,lods:u,origin:d,size:q,spatialReference:a})};Object.defineProperty(b.prototype,"isWrappable",{get:function(){var a=this.spatialReference,e=this.origin;if(a&&e){var c=m.getInfo(a);return a.isWrappable&&Math.abs(c.origin[0]-e.x)<=c.dx}return!1},enumerable:!0,configurable:!0});
b.prototype.readOrigin=function(a,e){return k.Point.fromJSON(l({spatialReference:e.spatialReference},a))};Object.defineProperty(b.prototype,"lods",{set:function(a){var e=this,c=0,m=0,n=[];this._levelToLOD={};a&&(c=-Infinity,m=Infinity,a.forEach(function(a){n.push(a.scale);c=a.scale>c?a.scale:c;m=a.scale<m?a.scale:m;e._levelToLOD[a.level]=a}));this._set("scales",n);this._set("minScale",c);this._set("maxScale",m);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});
b.prototype.readSize=function(a,e){return[e.cols,e.rows]};b.prototype.writeSize=function(a,e){e.cols=a[0];e.rows=a[0]};b.prototype.zoomToScale=function(a){var e=this.scales;if(0>=a)return e[0];if(a>=e.length)return e[e.length-1];var c=Math.round(a);return e[c]+(c-a)*(e[Math.round(a-.5)]-e[c])};b.prototype.scaleToZoom=function(a){for(var e=this.scales,c=e.length-1,m=0;m<c;m++){var n=e[m],b=e[m+1];if(n<=a)break;if(b===a)return m+1;if(n>a&&b<a)return m+1-(a-b)/(n-b)}return m};b.prototype.snapScale=function(a,
e){void 0===e&&(e=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=e?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};b.prototype.tileAt=function(a,e,n,b){var g=this.lodAt(a);if(!g)return null;var f;if("number"===typeof e)f=e,e=n;else{if(m.equals(e.spatialReference,this.spatialReference))f=e.x,e=e.y;else{b=q.project(e,this.spatialReference);if(!b)return null;f=b.x;e=b.y}b=n}n=g.resolution*this.size[0];g=g.resolution*this.size[1];b||(b={id:null,level:0,row:0,col:0,extent:c.create()});
b.level=a;b.row=Math.floor((this.origin.y-e)/g+.001);b.col=Math.floor((f-this.origin.x)/n+.001);this.updateTileInfo(b);return b};b.prototype.updateTileInfo=function(a){var e=this.lodAt(a.level);if(e){var m=e.resolution*this.size[0],e=e.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=c.create());a.extent[0]=this.origin.x+a.col*m;a.extent[1]=this.origin.y-(a.row+1)*e;a.extent[2]=a.extent[0]+m;a.extent[3]=a.extent[1]+e}};b.prototype.upsampleTile=function(a){var e=this._upsampleLevels[a.level];
if(!e||-1===e.parentLevel)return!1;a.level=e.parentLevel;a.row=Math.floor(a.row/e.factor+.001);a.col=Math.floor(a.col/e.factor+.001);this.updateTileInfo(a);return!0};b.prototype.getTileBounds=function(a,e){var c=this.lodAt(e.level).resolution,m=c*this.size[0],c=c*this.size[1];a[0]=this.origin.x+e.col*m;a[1]=this.origin.y-(e.row+1)*c;a[2]=a[0]+m;a[3]=a[1]+c;return a};b.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};b.prototype.clone=function(){return g.fromJSON(this.write({}))};
b.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var e=null,c=0;c<a.length;c++){var m=a[c];this._upsampleLevels[m.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/m.resolution:0};e=m}};var g;h([p.property({type:Number,json:{write:!0}})],b.prototype,"compressionQuality",void 0);h([p.property({type:Number,json:{write:!0}})],b.prototype,"dpi",void 0);h([p.property({type:String,json:{read:x.read,write:x.write,origins:{"web-scene":{read:!1,write:!1}}}})],
b.prototype,"format",void 0);h([p.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],b.prototype,"isWrappable",null);h([p.property({type:k.Point,json:{write:!0}})],b.prototype,"origin",void 0);h([p.reader("origin")],b.prototype,"readOrigin",null);h([p.property({type:[y],value:null,json:{write:!0}})],b.prototype,"lods",null);h([p.property({readOnly:!0})],b.prototype,"minScale",void 0);h([p.property({readOnly:!0})],b.prototype,"maxScale",void 0);h([p.property({readOnly:!0})],b.prototype,
"scales",void 0);h([p.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],b.prototype,"size",void 0);h([p.reader("size",["rows","cols"])],b.prototype,"readSize",null);h([p.writer("size",{cols:{type:e.Integer},rows:{type:e.Integer}})],b.prototype,"writeSize",null);h([p.property({type:k.SpatialReference,json:{write:!0}})],b.prototype,"spatialReference",void 0);return b=g=h([p.subclass("esri.layers.support.TileInfo")],b)}(p.declared(b))})},"esri/geometry":function(){define("require exports ./core/kebabDictionary ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m){Object.defineProperty(a,"__esModule",{value:!0});a.Extent=f;a.BaseGeometry=h;a.Mesh=k;a.Multipoint=b;a.Point=g;a.Polygon=p;a.Polyline=e;a.ScreenPoint=c;a.SpatialReference=n;a.isGeometry=function(e){return e instanceof a.BaseGeometry};a.fromJSON=m.fromJSON;a.typeKebabDictionary=l.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});a.featureGeometryTypeKebabDictionary=
l.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"})})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n,
m){function q(a,e,c){return null==e?c:null==c?e:a(e,c)}d=function(a){function b(){for(var e=0;e<arguments.length;e++);e=a.call(this)||this;e.type="extent";e.xmin=0;e.ymin=0;e.mmin=void 0;e.zmin=void 0;e.xmax=0;e.ymax=0;e.mmax=void 0;e.zmax=void 0;return e}l(b,a);d=b;b.prototype.normalizeCtorArgs=function(a,e,c,m,b){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null==a.spatialReference?p.WGS84:a.spatialReference,a):{xmin:a,ymin:e,
xmax:c,ymax:m,spatialReference:null==b?p.WGS84:b}:{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(b.prototype,"center",{get:function(){var a=new g({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},enumerable:!0,configurable:!0});
b.prototype.centerAt=function(a){var e=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-e.x,a.y-e.y,a.z-e.z):this.offset(a.x-e.x,a.y-e.y)};b.prototype.clone=function(){var a=new d;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};b.prototype.contains=function(a){if(!a)return!1;var c=this.spatialReference,b=a.spatialReference;
c&&b&&!c.equals(b)&&m.canProject(c,b)&&(a=c.isWebMercator?m.geographicToWebMercator(a):m.webMercatorToGeographic(a,!0));return"point"===a.type?e.extentContainsPoint(this,a):"extent"===a.type?e.extentContainsExtent(this,a):!1};b.prototype.equals=function(a){if(!a)return!1;var e=this.spatialReference,c=a.spatialReference;e&&c&&!e.equals(c)&&m.canProject(e,c)&&(a=e.isWebMercator?m.geographicToWebMercator(a):m.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&
this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax};b.prototype.expand=function(a){a=.5*(1-a);var e=this.width*a,c=this.height*a;this.xmin+=e;this.ymin+=c;this.xmax-=e;this.ymax-=c;this.hasZ&&(e=(this.zmax-this.zmin)*a,this.zmin+=e,this.zmax-=e);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};b.prototype.intersects=function(a){if(!a)return!1;var e=this.spatialReference,b=a.spatialReference;e&&b&&!e.equals(b)&&m.canProject(e,
b)&&(a=e.isWebMercator?m.geographicToWebMercator(a):m.webMercatorToGeographic(a,!0));e=c.getExtentIntersector(a.type);return"mesh"!==a.type?e(this,a):e(this,a.extent)};b.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};b.prototype.offset=function(a,e,c){this.xmin+=a;this.ymin+=e;this.xmax+=a;this.ymax+=e;null!=c&&(this.zmin+=c,this.zmax+=c);return this};b.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};b.prototype.union=function(a){this.xmin=
Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=q(Math.min,this.zmin,a.zmin),this.zmax=q(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=q(Math.min,this.mmin,a.mmin),this.mmax=q(Math.max,this.mmax,a.mmax);return this};b.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,a.ymin);this.xmax=
Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=q(Math.max,this.zmin,a.zmin),this.zmax=q(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=q(Math.max,this.mmin,a.mmin),this.mmax=q(Math.min,this.mmax,a.mmax);return this};b.prototype.toJSON=function(a){return this.write(null,a)};b.prototype._shiftCM=function(a){void 0===a&&(a=n.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var e=this.spatialReference,c=this._getCM(a);
if(c){var b=e.isWebMercator?m.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;e.isWebMercator||(b.x=this._normalizeX(b.x,a).x);this.spatialReference=new p(h.substitute({Central_Meridian:b.x},e.isWGS84?a.altTemplate:a.wkTemplate))}return this};b.prototype._getCM=function(a){var e=null,c=a.valid;a=c[0];var c=c[1],m=this.xmin,b=this.xmax;m>=a&&m<=c&&b>=a&&b<=c||(e=this.center);return e};b.prototype._normalize=function(a,e,c){var m=this.spatialReference;if(!m)return this;c=c||n.getInfo(m);
if(!c)return this;var b=this._getParts(c).map(function(a){return a.extent});if(2>b.length)return b[0]||this;if(2<b.length)return a?this._shiftCM(c):this.set({xmin:c.valid[0],xmax:c.valid[1]});if(a)return this._shiftCM(c);if(e)return b;var q=!0,g=!0;b.forEach(function(a){a.hasZ||(q=!1);a.hasM||(g=!1)});return{rings:b.map(function(a){var e=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(q)for(var c=(a.zmax-a.zmin)/2,m=0;m<e.length;m++)e[m].push(c);if(g)for(a=(a.mmax-
a.mmin)/2,m=0;m<e.length;m++)e[m].push(a);return e}),hasZ:q,hasM:g,spatialReference:m}};b.prototype._getParts=function(a){var e=this.cache._parts;if(!e){var e=[],c=this.ymin,m=this.ymax,b=this.spatialReference,q=this.width,g=this.xmin,f=this.xmax,k=void 0;a=a||n.getInfo(b);var t=a.valid,h=t[0],y=t[1],k=this._normalizeX(this.xmin,a),u=k.x,t=k.frameId,k=this._normalizeX(this.xmax,a),p=k.x;a=k.frameId;k=u===p&&0<q;if(q>2*y){q=new d(g<f?u:p,c,y,m,b);g=new d(h,c,g<f?p:u,m,b);f=new d(0,c,y,m,b);c=new d(h,
c,0,m,b);m=[];b=[];q.contains(f)&&m.push(t);q.contains(c)&&b.push(t);g.contains(f)&&m.push(a);g.contains(c)&&b.push(a);for(h=t+1;h<a;h++)m.push(h),b.push(h);e.push({extent:q,frameIds:[t]},{extent:g,frameIds:[a]},{extent:f,frameIds:m},{extent:c,frameIds:b})}else u>p||k?e.push({extent:new d(u,c,y,m,b),frameIds:[t]},{extent:new d(h,c,p,m,b),frameIds:[a]}):e.push({extent:new d(u,c,p,m,b),frameIds:[t]});this.cache._parts=e}a=this.hasZ;c=this.hasM;if(a||c)for(t={},a&&(t.zmin=this.zmin,t.zmax=this.zmax),
c&&(t.mmin=this.mmin,t.mmax=this.mmax),a=0;a<e.length;a++)e[a].extent.set(t);return e};b.prototype._normalizeX=function(a,e){var c=e.valid;e=c[0];var m=c[1],c=2*m,b=0;a>m?(e=Math.ceil(Math.abs(a-m)/c),a-=e*c,b=e):a<e&&(e=Math.ceil(Math.abs(a-e)/c),a+=e*c,b=-e);return{x:a,frameId:b}};var d;f([k.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],b.prototype,"cache",void 0);f([k.property({readOnly:!0,dependsOn:["cache"]})],b.prototype,"center",null);f([k.property({readOnly:!0,
dependsOn:["cache"]})],b.prototype,"extent",null);f([k.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasM",null);f([k.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasZ",null);f([k.property({readOnly:!0,dependsOn:["ymin","ymax"]})],b.prototype,"height",null);f([k.property({readOnly:!0,dependsOn:["xmin","xmax"]})],b.prototype,"width",null);f([k.property({type:Number,json:{write:!0}})],
b.prototype,"xmin",void 0);f([k.property({type:Number,json:{write:!0}})],b.prototype,"ymin",void 0);f([k.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"mmin",void 0);f([k.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,"zmin",void 0);f([k.property({type:Number,json:{write:!0}})],b.prototype,"xmax",void 0);f([k.property({type:Number,
json:{write:!0}})],b.prototype,"ymax",void 0);f([k.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"mmax",void 0);f([k.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,"zmax",void 0);return b=d=f([k.subclass("esri.geometry.Extent")],b)}(k.declared(b));d.prototype.toJSON.isDefaultToJSON=!0;return d})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),
function(d,a,l,f,h,k,b){return function(a){function g(){var e=a.call(this)||this;e.type=null;e.extent=null;e.hasM=!1;e.hasZ=!1;e.spatialReference=b.WGS84;return e}l(g,a);Object.defineProperty(g.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});g.prototype.readSpatialReference=function(a,c){if(a instanceof b)return a;if(null!=a){var e=new b;e.read(a,c);return e}return a};g.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};
g.prototype.clearCache=function(){this.notifyChange("cache")};g.prototype.getCacheValue=function(a){return this.cache[a]};g.prototype.setCacheValue=function(a,c){this.cache[a]=c};f([k.property()],g.prototype,"type",void 0);f([k.property({readOnly:!0,dependsOn:["spatialReference"]})],g.prototype,"cache",null);f([k.property({readOnly:!0,dependsOn:["spatialReference"]})],g.prototype,"extent",void 0);f([k.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],g.prototype,
"hasM",void 0);f([k.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],g.prototype,"hasZ",void 0);f([k.property({type:b,json:{write:!0}})],g.prototype,"spatialReference",void 0);f([k.reader("spatialReference")],g.prototype,"readSpatialReference",null);return g=f([k.subclass("esri.geometry.Geometry")],g)}(k.declared(h))})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),
function(d,a,l,f,h,k,b,g,p){function e(a,e){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var c=new this;c.read(a,e);return c}var c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);c.prototype.read=function(a,e){g.default(this,a,e);return this};c.prototype.write=function(a,e){return p.default(this,a||{},e)};c.prototype.toJSON=function(a){return this.write(null,a)};c.fromJSON=function(a,c){return e.call(this,a,c)};return c=f([b.subclass("esri.core.JSONSupport")],
c)}(b.declared(h));c.prototype.toJSON.isDefaultToJSON=!0;k.after(function(a){k.hasMixin(a,c)&&(a.fromJSON=e.bind(a))});return c})},"esri/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(d,a,l,f,h,k){function b(a,e,c){void 0===c&&(c=g);if(e&&"object"===typeof e){for(var b=h.getProperties(a),m=b.metadatas,q={},d=0,p=Object.getOwnPropertyNames(e);d<p.length;d++){var t=q,u=m,l=p[d],D=e,B=c,w=k.originSpecificReadPropertyDefinition(u[l],
B);w&&(!w.read||!1!==w.read.enabled&&!w.read.source)&&(t[l]=!0);for(var C=0,E=Object.getOwnPropertyNames(u);C<E.length;C++){var A=E[C],w=k.originSpecificReadPropertyDefinition(u[A],B),H;a:{H=l;var F=D;if(w&&w.read&&!1!==w.read.enabled&&w.read.source)if(w=w.read.source,"string"===typeof w){if(w===H||-1<w.indexOf(".")&&0===w.indexOf(H)&&f.exists(w,F)){H=!0;break a}}else for(var G=0;G<w.length;G++){var N=w[G];if(N===H||-1<N.indexOf(".")&&0===N.indexOf(H)&&f.exists(N,F)){H=!0;break a}}H=!1}H&&(t[A]=!0)}}b.setDefaultOrigin(c.origin);
p=0;for(t=Object.getOwnPropertyNames(q);p<t.length;p++)d=t[p],l=(u=k.originSpecificReadPropertyDefinition(m[d],c).read)&&u.source,D=void 0,D=l&&"string"===typeof l?f.valueOf(e,l):e[d],u&&u.reader&&(D=u.reader.call(a,D,e,c)),void 0!==D&&b.set(d,D);if(!c||!c.ignoreDefaults)for(e=0,m=Object.getOwnPropertyNames(m);e<m.length;e++)d=m[e],q[d]||(p=a,t=b,u=c,l=(l=k.originSpecificReadPropertyDefinition(t.metadatas[d],u))&&l.default,void 0!==l&&(p="function"===typeof l?l.call(p,d,u):l,void 0!==p&&t.set(d,p)));
b.setDefaultOrigin("user")}}Object.defineProperty(a,"__esModule",{value:!0});var g={origin:"service"};a.read=b;a.readLoadable=function(a,e,c,b){void 0===b&&(b=g);e=l({},b,{messages:[]});c(e);e.messages.forEach(function(e){"warning"!==e.type||a.loaded?b&&b.messages.push(e):a.loadWarnings.push(e)})};a.default=b})},"esri/core/accessorSupport/write":function(){define("require exports ../arrayUtils ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(d,a,l,
f,h,k,b,g){function p(a,e,b,g,d,t){if(!g||!g.write)return!1;var m=a.get(b);if(!d&&g.write.overridePolicy){var n=g.write.overridePolicy.call(a,m,b,t);void 0!==n&&(d=n)}d||(d=g.write);if(!d||!1===d.enabled)return!1;if((null===m&&!d.allowNull||void 0===m)&&d.isRequired)return(m=new f("web-document-write:property-required","Missing value for required property '"+b+"' on '"+a.declaredClass+"'",{propertyName:b,target:a}),t)&&t.messages?t.messages.push(m):m&&!t&&c.error(m.name,m.message),!1;if(void 0===
m||null===m&&!d.allowNull||!d.ignoreOrigin&&t&&t.origin&&e.store.originOf(b)<k.nameToId(t.origin))return!1;e=g.default;void 0===e?t=!1:"function"===typeof e?Array.isArray(m)?(t=e.call(a,b,t),t=l.equals(t,m)):t=!1:t=e===m;return t?!1:!0}function e(a,e,c){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return b.merge(e,a.toJSON());var m=b.getProperties(a),n=m.metadatas,q;for(q in n){var f=g.originSpecificWritePropertyDefinition(n[q],c);if(p(a,m,q,f,null,c)){var d=a.get(q),
h={};f.write.writer.call(a,d,h,"string"===typeof f.write.target?f.write.target:q,c);f=h;0<Object.keys(f).length&&(e=b.merge(e,f),c&&c.writtenProperties&&c.writtenProperties.push({target:a,propName:q,oldOrigin:k.idToReadableName(m.store.originOf(q)),newOrigin:c.origin}))}}return e}Object.defineProperty(a,"__esModule",{value:!0});var c=h.getLogger("esri.core.accessorSupport.write");a.willPropertyWrite=function(a,e,c,f){var m=b.getProperties(a),n=g.originSpecificWritePropertyDefinition(m.metadatas[e],
f);return n?p(a,m,e,n,c,f):!1};a.write=e;a.default=e})},"esri/core/arrayUtils":function(){define(["require","exports","@dojo/framework/shim/array","./RandomLCG"],function(d,a,l,f){function h(a,e,b,n){void 0===b&&(b=a.length);n=n||c;for(var m=Math.max(0,n.last-10),q=-1,g=m;g<b;++g)if(a[g]===e){q=g;break}if(-1===q){for(g=0;g<m;++g)if(a[g]===e){q=g;break}if(-1===q)return}a[q]=a[b-1];a.pop();n.last=q;return e}function k(a,e,c,b){void 0===c&&(c=a.length);var m=[];e.forEach(function(e){void 0!==h(a,e,c,
b)&&(m.push(e),--c)});return m}function b(a,e){return-1===a.indexOf(e)}function g(a,e,c){return!a.some(e.bind(null,c))}function p(a){return a}Object.defineProperty(a,"__esModule",{value:!0});a.find=l.find;a.findIndex=l.findIndex;a.unique=function(a){return a.filter(function(a,e,c){return c.indexOf(a)===e})};a.equals=function(a,e,c){if(!a&&!e)return!0;if(!a||!e||a.length!==e.length)return!1;if(c)for(var m=0;m<a.length;m++){if(!c(a[m],e[m]))return!1}else for(m=0;m<a.length;m++)if(a[m]!==e[m])return!1;
return!0};a.difference=function(a,e,c){var m;c?(m=e.filter(g.bind(null,a,c)),a=a.filter(g.bind(null,e,c))):(m=e.filter(b.bind(null,a)),a=a.filter(b.bind(null,e)));return{added:m,removed:a}};a.intersect=function(e,c,b){return e&&c?b?e.filter(function(e){return-1<a.findIndex(c,function(a){return b(e,a)})}):e.filter(function(a){return-1<c.indexOf(a)}):[]};a.constant=function(a,e){for(var c=Array(a),m=0;m<a;m++)c[m]=e;return c};a.range=function(a,e){void 0===e&&(e=a,a=0);for(var c=Array(e-a),m=a;m<e;m++)c[m-
a]=m;return c};a.binaryIndexOf=function(a,e,c){for(var m=a.length,b=0,n=m-1;b<n;){var q=b+Math.floor((n-b)/2);e>a[q]?b=q+1:n=q}n=a[b];return c?e>=a[m-1]?-1:n===e?b:b-1:n===e?b:-1};a.concatAll=function(a){return a.reduce(function(a,e){return a.concat(e||[])},[])};var e=function(){return function(){this.last=0}}();a.RemoveHint=e;var c=new e;d=function(){return function(a){var c=this;this._array=a;this._hint=new e;this.remove=function(a){return h(c._array,a,c._array.length,c._hint)};this.removeMany=
function(a){return k(c._array,a,c._array.length,c._hint)}}}();a.UnorderedRemover=d;a.removeUnordered=h;a.removeUnorderedMany=k;a.shuffle=function(a,e){e=(n.seed=e)?function(){return n.getFloat()}:Math.random;for(var c=a.length-1;0<c;c--){var m=Math.floor(e()*(c+1)),b=a[c];a[c]=a[m];a[m]=b}return a};var n=new f;a.keysOfMap=function(a){var e=[];a.forEach(function(a,c){return e.push(c)});return e};a.keysOfSet=function(a,e){void 0===e&&(e=p);var c=[];a.forEach(function(a){return c.push(e(a))});return c};
a.fromMapValues=function(a){if(Array.from)return Array.from(a.values());var e=Array(a.size),c=0;a.forEach(function(a){e[c++]=a});return e}})},"esri/core/RandomLCG":function(){define(["require","exports"],function(d,a){return function(){function a(a){void 0===a&&(a=1);this._seed=a}Object.defineProperty(a.prototype,"seed",{set:function(f){this._seed=null==f?Math.random()*a._m:f},enumerable:!0,configurable:!0});a.prototype.getInt=function(){return this._seed=(a._a*this._seed+a._c)%a._m};a.prototype.getFloat=
function(){return this.getInt()/(a._m-1)};a.prototype.getIntRange=function(a,d){return Math.round(this.getFloatRange(a,d))};a.prototype.getFloatRange=function(f,d){d-=f;var k=this.getInt()/a._m;return f+Math.floor(k*d)};a._m=2147483648;a._a=1103515245;a._c=12345;return a}()})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),
function(d,a,l,f,h,k,b,g){d=function(a){function e(e){e=a.call(this)||this;e.latestWkid=null;e.wkid=null;e.wkt=null;return e}l(e,a);c=e;e.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return c.WebMercator;if(4326===a.wkid)return c.WGS84}var e=new c;e.read(a);return e};e.prototype.normalizeCtorArgs=function(a){var e;return a&&"object"===typeof a?a:(e={},e["string"===typeof a?"wkt":"wkid"]=a,e)};Object.defineProperty(e.prototype,"isWGS84",{get:function(){return g.isWGS84(this)},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isWebMercator",{get:function(){return g.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isGeographic",{get:function(){return g.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isWrappable",{get:function(){return g.isWrappable(this)},enumerable:!0,configurable:!0});e.prototype.writeWkt=function(a,e){this.wkid||(e.wkt=a)};e.prototype.clone=function(){if(this===
c.WGS84)return c.WGS84;if(this===c.WebMercator)return c.WebMercator;var a=new c;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a};e.prototype.equals=function(a){return g.equals(this,a)};e.prototype.toJSON=function(a){return this.write(null,a)};var c;e.GCS_NAD_1927=null;e.WGS84=null;e.WebMercator=null;f([b.property({dependsOn:["wkid"],
readOnly:!0})],e.prototype,"isWGS84",null);f([b.property({dependsOn:["wkid"],readOnly:!0})],e.prototype,"isWebMercator",null);f([b.property({dependsOn:["wkid","wkt"],readOnly:!0})],e.prototype,"isGeographic",null);f([b.property({dependsOn:["wkid"],readOnly:!0})],e.prototype,"isWrappable",null);f([b.property({type:Number,json:{write:!0}})],e.prototype,"latestWkid",void 0);f([b.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?
!0:!1}}}}}}})],e.prototype,"wkid",void 0);f([b.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid?!0:!1}}}}}}})],e.prototype,"wkt",void 0);f([b.writer("wkt"),b.writer("web-scene","wkt")],e.prototype,"writeWkt",null);f([b.property({type:Number,json:{write:!0}})],e.prototype,"vcsWkid",void 0);f([b.property({type:Number,json:{write:!0}})],e.prototype,"latestVcsWkid",void 0);return e=c=f([b.subclass("esri.geometry.SpatialReference")],
e)}(b.declared(h));d.prototype.toJSON.isDefaultToJSON=!0;d.GCS_NAD_1927=new d({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});d.WGS84=new d(4326);d.WGS84.wkt=k.substitute({Central_Meridian:"0.0"},g.getInfo(d.WGS84).wkTemplate);d.WebMercator=new d({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(d.GCS_NAD_1927),Object.freeze(d.WGS84),Object.freeze(d.WebMercator));
return d})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(d,a,l){function f(a){return h(a)&&!0===k[a.wkid]}function h(a){return null!=a&&(null!=a.wkid&&2E3<=a.wkid||null!=a.wkt)}Object.defineProperty(a,"__esModule",{value:!0});var k={102113:!0,102100:!0,3857:!0,3785:!0},b={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};d=[-2.0037508342788905E7,2.0037508342788905E7];var g=[-2.0037508342787E7,2.0037508342787E7],p={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:d,origin:g,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:d,origin:g,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:d,origin:g,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:d,origin:g,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};a.equals=function(a,c){return a&&c?a===c?!0:null!=a.wkid||null!=c.wkid?a.wkid===c.wkid||f(a)&&f(c)||null!=c.latestWkid&&a.wkid===c.latestWkid||null!=a.latestWkid&&c.wkid===a.latestWkid:a.wkt&&c.wkt?a.wkt.toUpperCase()===c.wkt.toUpperCase():!1:!1};a.getInfo=function(a){return h(a)&&a.wkid?p[a.wkid]:null};a.isGeographic=function(a){return h(a)?a.wkid?null==l[a.wkid]:a.wkt?!!/^\s*GEOGCS/i.test(a.wkt):!1:!1};a.isWGS84=function(a){return h(a)&&4326===a.wkid};
a.isWebMercator=f;a.isWrappable=function(a){return h(a)&&!0===b[a.wkid]};a.isValid=h})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var d,a={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8082:0,8083:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,
8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,
8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,
8682:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,
28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,
102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,
103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,
103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,
103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,
103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(d=2E3;2045>=d;d++)a[d]=0;for(d=2056;2065>=d;d++)a[d]=0;for(d=2067;2135>=d;d++)a[d]=0;for(d=2137;2154>=d;d++)a[d]=0;for(d=2161;2170>=d;d++)a[d]=0;for(d=2172;2193>=d;d++)a[d]=0;for(d=2195;2198>=d;d++)a[d]=0;for(d=2200;2203>=d;d++)a[d]=0;for(d=2205;2217>=d;d++)a[d]=0;for(d=2222;2224>=d;d++)a[d]=1;for(d=2225;2250>=d;d++)a[d]=2;for(d=2251;2253>=d;d++)a[d]=1;for(d=2257;2264>=d;d++)a[d]=2;for(d=2274;2279>=d;d++)a[d]=2;for(d=2280;2282>=
d;d++)a[d]=1;for(d=2283;2289>=d;d++)a[d]=2;for(d=2290;2292>=d;d++)a[d]=0;for(d=2308;2313>=d;d++)a[d]=0;for(d=2315;2491>=d;d++)a[d]=0;for(d=2494;2866>=d;d++)a[d]=0;for(d=2867;2869>=d;d++)a[d]=1;for(d=2870;2888>=d;d++)a[d]=2;for(d=2891;2895>=d;d++)a[d]=2;for(d=2896;2898>=d;d++)a[d]=1;for(d=2902;2908>=d;d++)a[d]=2;for(d=2915;2920>=d;d++)a[d]=2;for(d=2921;2923>=d;d++)a[d]=1;for(d=2924;2930>=d;d++)a[d]=2;for(d=2931;2962>=d;d++)a[d]=0;for(d=2964;2968>=d;d++)a[d]=2;for(d=2969;2973>=d;d++)a[d]=0;for(d=2975;2991>=
d;d++)a[d]=0;for(d=2995;3051>=d;d++)a[d]=0;for(d=3054;3079>=d;d++)a[d]=0;for(d=3081;3088>=d;d++)a[d]=0;for(d=3092;3101>=d;d++)a[d]=0;for(d=3106;3138>=d;d++)a[d]=0;for(d=3146;3151>=d;d++)a[d]=0;for(d=3153;3166>=d;d++)a[d]=0;for(d=3168;3172>=d;d++)a[d]=0;for(d=3174;3203>=d;d++)a[d]=0;for(d=3294;3358>=d;d++)a[d]=0;for(d=3367;3403>=d;d++)a[d]=0;for(d=3408;3416>=d;d++)a[d]=0;for(d=3417;3438>=d;d++)a[d]=2;for(d=3441;3446>=d;d++)a[d]=2;for(d=3447;3450>=d;d++)a[d]=0;for(d=3451;3459>=d;d++)a[d]=2;for(d=3460;3478>=
d;d++)a[d]=0;for(d=3554;3559>=d;d++)a[d]=0;for(d=3560;3570>=d;d++)a[d]=2;for(d=3571;3581>=d;d++)a[d]=0;for(d=3594;3597>=d;d++)a[d]=0;for(d=3601;3604>=d;d++)a[d]=0;for(d=3637;3639>=d;d++)a[d]=0;for(d=3665;3667>=d;d++)a[d]=0;for(d=3693;3695>=d;d++)a[d]=0;for(d=3701;3727>=d;d++)a[d]=0;for(d=3728;3739>=d;d++)a[d]=2;for(d=3740;3751>=d;d++)a[d]=0;for(d=3753;3760>=d;d++)a[d]=2;for(d=3761;3773>=d;d++)a[d]=0;for(d=3775;3777>=d;d++)a[d]=0;for(d=3779;3781>=d;d++)a[d]=0;for(d=3783;3785>=d;d++)a[d]=0;for(d=3788;3791>=
d;d++)a[d]=0;for(d=3797;3802>=d;d++)a[d]=0;for(d=3814;3816>=d;d++)a[d]=0;for(d=3825;3829>=d;d++)a[d]=0;for(d=3832;3841>=d;d++)a[d]=0;for(d=3844;3852>=d;d++)a[d]=0;for(d=3873;3885>=d;d++)a[d]=0;for(d=3890;3893>=d;d++)a[d]=0;for(d=3907;3912>=d;d++)a[d]=0;for(d=3942;3950>=d;d++)a[d]=0;for(d=3968;3970>=d;d++)a[d]=0;for(d=3973;3976>=d;d++)a[d]=0;for(d=3986;3989>=d;d++)a[d]=0;for(d=3994;3997>=d;d++)a[d]=0;for(d=4048;4051>=d;d++)a[d]=0;for(d=4056;4063>=d;d++)a[d]=0;for(d=4093;4096>=d;d++)a[d]=0;for(d=4390;4398>=
d;d++)a[d]=0;for(d=4399;4413>=d;d++)a[d]=2;for(d=4418;4433>=d;d++)a[d]=2;for(d=4455;4457>=d;d++)a[d]=2;for(d=4484;4489>=d;d++)a[d]=0;for(d=4491;4554>=d;d++)a[d]=0;for(d=4568;4589>=d;d++)a[d]=0;for(d=4652;4656>=d;d++)a[d]=0;for(d=4766;4800>=d;d++)a[d]=0;for(d=5014;5016>=d;d++)a[d]=0;for(d=5069;5072>=d;d++)a[d]=0;for(d=5105;5130>=d;d++)a[d]=0;for(d=5173;5188>=d;d++)a[d]=0;for(d=5253;5259>=d;d++)a[d]=0;for(d=5269;5275>=d;d++)a[d]=0;for(d=5292;5311>=d;d++)a[d]=0;for(d=5329;5331>=d;d++)a[d]=0;for(d=5343;5349>=
d;d++)a[d]=0;for(d=5355;5357>=d;d++)a[d]=0;for(d=5387;5389>=d;d++)a[d]=0;for(d=5459;5463>=d;d++)a[d]=0;for(d=5479;5482>=d;d++)a[d]=0;for(d=5518;5520>=d;d++)a[d]=0;for(d=5530;5539>=d;d++)a[d]=0;for(d=5550;5552>=d;d++)a[d]=0;for(d=5562;5583>=d;d++)a[d]=0;for(d=5623;5625>=d;d++)a[d]=2;for(d=5631;5639>=d;d++)a[d]=0;for(d=5649;5653>=d;d++)a[d]=0;for(d=5663;5680>=d;d++)a[d]=0;for(d=5682;5685>=d;d++)a[d]=0;for(d=5875;5877>=d;d++)a[d]=0;for(d=5921;5940>=d;d++)a[d]=0;for(d=6050;6125>=d;d++)a[d]=0;for(d=6244;6275>=
d;d++)a[d]=0;for(d=6328;6348>=d;d++)a[d]=0;for(d=6350;6356>=d;d++)a[d]=0;for(d=6366;6372>=d;d++)a[d]=0;for(d=6381;6387>=d;d++)a[d]=0;for(d=6393;6404>=d;d++)a[d]=0;for(d=6480;6483>=d;d++)a[d]=0;for(d=6511;6514>=d;d++)a[d]=0;for(d=6579;6581>=d;d++)a[d]=0;for(d=6619;6624>=d;d++)a[d]=0;for(d=6625;6627>=d;d++)a[d]=2;for(d=6628;6632>=d;d++)a[d]=0;for(d=6634;6637>=d;d++)a[d]=0;for(d=6669;6692>=d;d++)a[d]=0;for(d=6707;6709>=d;d++)a[d]=0;for(d=6720;6723>=d;d++)a[d]=0;for(d=6732;6738>=d;d++)a[d]=0;for(d=6931;6933>=
d;d++)a[d]=0;for(d=6956;6959>=d;d++)a[d]=0;for(d=7005;7007>=d;d++)a[d]=0;for(d=7057;7070>=d;d++)a[d]=2;for(d=7074;7082>=d;d++)a[d]=0;for(d=7109;7118>=d;d++)a[d]=0;for(d=7119;7127>=d;d++)a[d]=1;for(d=7374;7376>=d;d++)a[d]=0;for(d=7528;7586>=d;d++)a[d]=0;for(d=7587;7645>=d;d++)a[d]=2;for(d=7755;7787>=d;d++)a[d]=0;for(d=7791;7795>=d;d++)a[d]=0;for(d=7799;7801>=d;d++)a[d]=0;for(d=7803;7805>=d;d++)a[d]=0;for(d=7825;7831>=d;d++)a[d]=0;for(d=7845;7859>=d;d++)a[d]=0;for(d=8013;8032>=d;d++)a[d]=0;for(d=8065;8068>=
d;d++)a[d]=1;for(d=8836;8840>=d;d++)a[d]=0;for(d=8857;8859>=d;d++)a[d]=0;for(d=20002;20032>=d;d++)a[d]=0;for(d=20062;20092>=d;d++)a[d]=0;for(d=20135;20138>=d;d++)a[d]=0;for(d=20248;20258>=d;d++)a[d]=0;for(d=20348;20358>=d;d++)a[d]=0;for(d=20436;20440>=d;d++)a[d]=0;for(d=20822;20824>=d;d++)a[d]=0;for(d=20934;20936>=d;d++)a[d]=0;for(d=21035;21037>=d;d++)a[d]=0;for(d=21095;21097>=d;d++)a[d]=0;for(d=21148;21150>=d;d++)a[d]=0;for(d=21413;21423>=d;d++)a[d]=0;for(d=21473;21483>=d;d++)a[d]=0;for(d=21780;21782>=
d;d++)a[d]=0;for(d=21891;21894>=d;d++)a[d]=0;for(d=21896;21899>=d;d++)a[d]=0;for(d=22171;22177>=d;d++)a[d]=0;for(d=22181;22187>=d;d++)a[d]=0;for(d=22191;22197>=d;d++)a[d]=0;for(d=22234;22236>=d;d++)a[d]=0;for(d=22521;22525>=d;d++)a[d]=0;for(d=22991;22994>=d;d++)a[d]=0;for(d=23028;23038>=d;d++)a[d]=0;for(d=23830;23853>=d;d++)a[d]=0;for(d=23866;23872>=d;d++)a[d]=0;for(d=23877;23884>=d;d++)a[d]=0;for(d=23886;23894>=d;d++)a[d]=0;for(d=23946;23948>=d;d++)a[d]=0;for(d=24311;24313>=d;d++)a[d]=0;for(d=24342;24347>=
d;d++)a[d]=0;for(d=24370;24374>=d;d++)a[d]=10;for(d=24375;24381>=d;d++)a[d]=0;for(d=24718;24721>=d;d++)a[d]=0;for(d=24817;24821>=d;d++)a[d]=0;for(d=24877;24882>=d;d++)a[d]=0;for(d=24891;24893>=d;d++)a[d]=0;for(d=25391;25395>=d;d++)a[d]=0;for(d=25828;25838>=d;d++)a[d]=0;for(d=26191;26195>=d;d++)a[d]=0;for(d=26391;26393>=d;d++)a[d]=0;for(d=26701;26722>=d;d++)a[d]=0;for(d=26729;26799>=d;d++)a[d]=2;for(d=26801;26803>=d;d++)a[d]=2;for(d=26811;26813>=d;d++)a[d]=2;for(d=26847;26870>=d;d++)a[d]=2;for(d=26891;26899>=
d;d++)a[d]=0;for(d=26901;26923>=d;d++)a[d]=0;for(d=26929;26946>=d;d++)a[d]=0;for(d=26948;26998>=d;d++)a[d]=0;for(d=27037;27040>=d;d++)a[d]=0;for(d=27205;27232>=d;d++)a[d]=0;for(d=27258;27260>=d;d++)a[d]=0;for(d=27391;27398>=d;d++)a[d]=0;for(d=27561;27564>=d;d++)a[d]=0;for(d=27571;27574>=d;d++)a[d]=0;for(d=27581;27584>=d;d++)a[d]=0;for(d=27591;27594>=d;d++)a[d]=0;for(d=28191;28193>=d;d++)a[d]=0;for(d=28348;28358>=d;d++)a[d]=0;for(d=28402;28432>=d;d++)a[d]=0;for(d=28462;28492>=d;d++)a[d]=0;for(d=29118;29122>=
d;d++)a[d]=0;for(d=29168;29172>=d;d++)a[d]=0;for(d=29177;29185>=d;d++)a[d]=0;for(d=29187;29195>=d;d++)a[d]=0;for(d=29900;29903>=d;d++)a[d]=0;for(d=30161;30179>=d;d++)a[d]=0;for(d=30491;30494>=d;d++)a[d]=0;for(d=30729;30732>=d;d++)a[d]=0;for(d=31251;31259>=d;d++)a[d]=0;for(d=31265;31268>=d;d++)a[d]=0;for(d=31275;31279>=d;d++)a[d]=0;for(d=31281;31297>=d;d++)a[d]=0;for(d=31461;31469>=d;d++)a[d]=0;for(d=31491;31495>=d;d++)a[d]=0;for(d=31917;31922>=d;d++)a[d]=0;for(d=31965;32E3>=d;d++)a[d]=0;for(d=32001;32003>=
d;d++)a[d]=2;for(d=32005;32031>=d;d++)a[d]=2;for(d=32033;32060>=d;d++)a[d]=2;for(d=32064;32067>=d;d++)a[d]=2;for(d=32074;32077>=d;d++)a[d]=2;for(d=32081;32086>=d;d++)a[d]=0;for(d=32107;32130>=d;d++)a[d]=0;for(d=32133;32158>=d;d++)a[d]=0;for(d=32164;32167>=d;d++)a[d]=2;for(d=32180;32199>=d;d++)a[d]=0;for(d=32201;32260>=d;d++)a[d]=0;for(d=32301;32360>=d;d++)a[d]=0;for(d=32601;32662>=d;d++)a[d]=0;for(d=32664;32667>=d;d++)a[d]=2;for(d=32701;32761>=d;d++)a[d]=0;for(d=53001;53004>=d;d++)a[d]=0;for(d=53008;53019>=
d;d++)a[d]=0;for(d=53021;53032>=d;d++)a[d]=0;for(d=53034;53037>=d;d++)a[d]=0;for(d=53042;53046>=d;d++)a[d]=0;for(d=53074;53080>=d;d++)a[d]=0;for(d=54001;54004>=d;d++)a[d]=0;for(d=54008;54019>=d;d++)a[d]=0;for(d=54021;54032>=d;d++)a[d]=0;for(d=54034;54037>=d;d++)a[d]=0;for(d=54042;54046>=d;d++)a[d]=0;for(d=54048;54053>=d;d++)a[d]=0;for(d=54074;54080>=d;d++)a[d]=0;for(d=102001;102040>=d;d++)a[d]=0;for(d=102042;102063>=d;d++)a[d]=0;for(d=102065;102067>=d;d++)a[d]=0;for(d=102070;102117>=d;d++)a[d]=0;
for(d=102122;102216>=d;d++)a[d]=0;for(d=102221;102377>=d;d++)a[d]=0;for(d=102382;102388>=d;d++)a[d]=0;for(d=102389;102398>=d;d++)a[d]=2;for(d=102399;102444>=d;d++)a[d]=0;for(d=102445;102447>=d;d++)a[d]=2;for(d=102448;102458>=d;d++)a[d]=0;for(d=102459;102468>=d;d++)a[d]=2;for(d=102469;102499>=d;d++)a[d]=0;for(d=102500;102519>=d;d++)a[d]=1;for(d=102520;102524>=d;d++)a[d]=0;for(d=102525;102529>=d;d++)a[d]=2;for(d=102530;102588>=d;d++)a[d]=0;for(d=102590;102598>=d;d++)a[d]=0;for(d=102601;102603>=d;d++)a[d]=
0;for(d=102605;102628>=d;d++)a[d]=0;for(d=102629;102646>=d;d++)a[d]=2;for(d=102648;102700>=d;d++)a[d]=2;for(d=102701;102703>=d;d++)a[d]=0;for(d=102707;102730>=d;d++)a[d]=2;for(d=102733;102758>=d;d++)a[d]=2;for(d=102767;102900>=d;d++)a[d]=0;for(d=102965;102969>=d;d++)a[d]=0;for(d=102971;102973>=d;d++)a[d]=0;for(d=102975;102989>=d;d++)a[d]=0;for(d=102990;102992>=d;d++)a[d]=1;for(d=102997;103002>=d;d++)a[d]=0;for(d=103003;103008>=d;d++)a[d]=2;for(d=103009;103011>=d;d++)a[d]=0;for(d=103012;103014>=d;d++)a[d]=
2;for(d=103019;103021>=d;d++)a[d]=0;for(d=103022;103024>=d;d++)a[d]=2;for(d=103029;103031>=d;d++)a[d]=0;for(d=103032;103034>=d;d++)a[d]=2;for(d=103065;103068>=d;d++)a[d]=0;for(d=103074;103076>=d;d++)a[d]=0;for(d=103077;103079>=d;d++)a[d]=1;for(d=103080;103082>=d;d++)a[d]=0;for(d=103083;103085>=d;d++)a[d]=2;for(d=103090;103093>=d;d++)a[d]=0;for(d=103097;103099>=d;d++)a[d]=0;for(d=103100;103102>=d;d++)a[d]=2;for(d=103107;103109>=d;d++)a[d]=0;for(d=103110;103112>=d;d++)a[d]=2;for(d=103113;103116>=d;d++)a[d]=
0;for(d=103117;103120>=d;d++)a[d]=2;for(d=103153;103157>=d;d++)a[d]=0;for(d=103158;103162>=d;d++)a[d]=2;for(d=103163;103165>=d;d++)a[d]=0;for(d=103166;103168>=d;d++)a[d]=1;for(d=103169;103171>=d;d++)a[d]=2;for(d=103186;103188>=d;d++)a[d]=0;for(d=103189;103191>=d;d++)a[d]=2;for(d=103192;103195>=d;d++)a[d]=0;for(d=103196;103199>=d;d++)a[d]=2;for(d=103200;103224>=d;d++)a[d]=0;for(d=103225;103227>=d;d++)a[d]=1;for(d=103232;103237>=d;d++)a[d]=0;for(d=103238;103243>=d;d++)a[d]=2;for(d=103244;103246>=d;d++)a[d]=
0;for(d=103247;103249>=d;d++)a[d]=2;for(d=103254;103256>=d;d++)a[d]=0;for(d=103257;103259>=d;d++)a[d]=2;for(d=103264;103266>=d;d++)a[d]=0;for(d=103267;103269>=d;d++)a[d]=2;for(d=103300;103375>=d;d++)a[d]=0;for(d=103381;103383>=d;d++)a[d]=0;for(d=103384;103386>=d;d++)a[d]=1;for(d=103387;103389>=d;d++)a[d]=0;for(d=103390;103392>=d;d++)a[d]=2;for(d=103397;103399>=d;d++)a[d]=0;for(d=103400;103471>=d;d++)a[d]=2;for(d=103476;103478>=d;d++)a[d]=0;for(d=103479;103481>=d;d++)a[d]=2;for(d=103486;103488>=d;d++)a[d]=
0;for(d=103489;103491>=d;d++)a[d]=2;for(d=103492;103495>=d;d++)a[d]=0;for(d=103496;103499>=d;d++)a[d]=2;for(d=103528;103543>=d;d++)a[d]=0;for(d=103544;103548>=d;d++)a[d]=2;for(d=103549;103551>=d;d++)a[d]=0;for(d=103552;103554>=d;d++)a[d]=1;for(d=103555;103557>=d;d++)a[d]=2;for(d=103558;103560>=d;d++)a[d]=0;for(d=103571;103573>=d;d++)a[d]=0;for(d=103574;103576>=d;d++)a[d]=2;for(d=103577;103580>=d;d++)a[d]=0;for(d=103581;103583>=d;d++)a[d]=2;for(d=103600;103694>=d;d++)a[d]=0;for(d=103700;103793>=d;d++)a[d]=
2;for(d=103794;103871>=d;d++)a[d]=0;for(d=103900;103971>=d;d++)a[d]=2;return a})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(d,a,l,f,h,k,b,g,p,e){function c(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var n=[0,0],m=h.getLogger("esri.geometry.Point");
d=function(a){function b(e,c,b,m,n){e=a.call(this)||this;e.x=0;e.y=0;e.z=void 0;e.m=void 0;e.type="point";return e}l(b,a);q=b;b.copy=function(a,e){e.x=a.x;e.y=a.y;e.z=a.z;e.m=a.m;e.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};b.distance=function(a,e){var c=a.x-e.x,b=a.y-e.y;a=a.hasZ&&e.hasZ?a.z-e.z:0;return Math.sqrt(c*c+b*b+a*a)};b.prototype.normalizeCtorArgs=function(a,b,q,f,k){var d;if(Array.isArray(a))d=a,k=b,a=d[0],b=d[1],q=d[2],f=d[3];else if(a&&
"object"===typeof a){if(d=a,a=null!=d.x?d.x:d.longitude,b=null!=d.y?d.y:d.latitude,q=null!=d.z?d.z:d.altitude,f=d.m,(k=d.spatialReference)&&"esri.geometry.SpatialReference"!==k.declaredClass&&(k=new g(k)),null!=d.longitude||null!=d.latitude)null==d.longitude?m.warn(".longitude\x3d","Latitude was defined without longitude"):null==d.latitude?m.warn(".latitude\x3d","Longitude was defined without latitude"):!d.declaredClass&&k&&k.isWebMercator&&(b=e.lngLatToXY(d.longitude,d.latitude,n),a=b[0],b=b[1])}else c(q)?
(k=q,q=null):c(f)&&(k=f,f=null);a={x:a,y:b};null==a.x&&null!=a.y?m.warn(".y\x3d","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&m.warn(".x\x3d","X coordinate was defined without a Y coordinate");null!=k&&(a.spatialReference=k);null!=q&&(a.z=q);null!=f&&(a.m=f);return a};Object.defineProperty(b.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(a){var e=this._get("hasM");a!==e&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(a){var e=this._get("hasZ");a!==e&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"latitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return e.xyToLngLat(this.x,this.y,n)[1];if(a.isWGS84)return this._get("y")}return null},set:function(a){var c=this._get("spatialReference");c&&(c.isWebMercator?this._set("y",
e.lngLatToXY(this.x,a,n)[1]):c.isWGS84&&this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return e.xyToLngLat(this._get("x"),this._get("y"),n)[0];if(a.isWGS84)return this._get("x")}return null},set:function(a){var c=this._get("spatialReference");c&&(c.isWebMercator?this._set("x",e.lngLatToXY(a,this._get("y"),n)[0]):c.isWGS84&&this._set("x",a),this._set("longitude",
a))},enumerable:!0,configurable:!0});b.prototype.writeX=function(a,e,c){e[c]=isNaN(a)?"NaN":a};b.prototype.readX=function(a){return"string"===typeof a?NaN:a};b.prototype.clone=function(){var a=new q;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a};b.prototype.copy=function(a){q.copy(a,this);return this};b.prototype.equals=function(a){var c;if(!a)return!1;var b=this.x,m=this.y,n=this.z,q=this.m,g=this.spatialReference,f=a.z,k=a.m,d=a.x;c=a.y;a=a.spatialReference;
if(!g.equals(a))if(g.isWebMercator&&a.isWGS84)c=e.lngLatToXY(d,c),d=c[0],c=c[1],a=g;else if(g.isWGS84&&a.isWebMercator)c=e.xyToLngLat(d,c),d=c[0],c=c[1],a=g;else return!1;return b===d&&m===c&&n===f&&q===k&&g.wkid===a.wkid};b.prototype.offset=function(a,e,c){this.x+=a;this.y+=e;null!=c&&this.hasZ&&(this.z+=c);return this};b.prototype.normalize=function(){if(!this.spatialReference)return this;var a=p.getInfo(this.spatialReference);if(!a)return this;var e=this.x,c=a.valid,a=c[0],b=c[1],c=2*b;e>b?(a=
Math.ceil(Math.abs(e-b)/c),e-=a*c):e<a&&(a=Math.ceil(Math.abs(e-a)/c),e+=a*c);this._set("x",e);return this};b.prototype.distance=function(a){return q.distance(this,a)};b.prototype.toArray=function(){var a=this.hasZ,e=this.hasM;return a&&e?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]};b.prototype.toJSON=function(a){return this.write(null,a)};var q;f([k.property({dependsOn:["x","y","z","m","spatialReference"]})],b.prototype,"cache",void 0);f([k.property({type:Boolean,
dependsOn:["m"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasM",null);f([k.property({type:Boolean,dependsOn:["z"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasZ",null);f([k.property({type:Number,dependsOn:["y"]})],b.prototype,"latitude",null);f([k.property({type:Number,dependsOn:["x"]})],b.prototype,"longitude",null);f([k.property({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}})],b.prototype,"x",void 0);f([k.writer("x")],
b.prototype,"writeX",null);f([k.reader("x")],b.prototype,"readX",null);f([k.property({type:Number,json:{write:!0}})],b.prototype,"y",void 0);f([k.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,"z",void 0);f([k.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"m",void 0);return b=q=f([k.subclass("esri.geometry.Point")],b)}(k.declared(b));d.prototype.toJSON.isDefaultToJSON=!0;return d})},
"esri/geometry/support/webMercatorUtils":function(){define("require exports ../../core/lang ../../core/wgs84Constants ../SpatialReference ./spatialReferenceUtils".split(" "),function(d,a,l,f,h,k){function b(a,e,c,b,g){var m;if("x"in a&&"x"in g)e=e(a.x,a.y,n,0,b),g.x=e[0],g.y=e[1];else if("xmin"in a&&"xmin"in g)m=e(a.xmin,a.ymin,n,0,b),g.xmin=m[0],g.ymin=m[1],e=e(a.xmax,a.ymax,n,0,b),g.xmax=e[0],g.ymax=e[1];else if("paths"in a&&"paths"in g||"rings"in a&&"rings"in g){m="paths"in a?a.paths:a.rings;var q=
[],f=void 0;for(a=0;a<m.length;a++){var k=m[a],f=[];q.push(f);for(var d=0;d<k.length;d++)f.push(e(k[d][0],k[d][1],[0,0],0,b)),2<k[d].length&&f[d].push(k[d][2]),3<k[d].length&&f[d].push(k[d][3])}"paths"in g?g.paths=q:g.rings=q}else if("points"in a&&"points"in g){m=a.points;q=[];for(a=0;a<m.length;a++)q[a]=e(m[a][0],m[a][1],[0,0],0,b),2<m[a].length&&q[a].push(m[a][2]),3<m[a].length&&q[a].push(m[a][3]);g.points=q}else if("type"in a&&"mesh"===a.type&&"type"in g&&"mesh"===g.type&&(m=a.vertexAttributes&&
a.vertexAttributes.position,q=g.vertexAttributes&&g.vertexAttributes.position,m))for(f=[0,0],a=0;a<m.length;a+=3)e(m[a],m[a+1],f,0,b),q[a]=f[0],q[a+1]=f[1];g.spatialReference=c;return g}function g(a,e){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);e=e&&(null!=e.wkid||null!=e.wkt?e:e.spatialReference);return a&&e?k.equals(e,a)?!0:k.isWebMercator(e)&&k.isWGS84(a)||k.isWebMercator(a)&&k.isWGS84(e):!1}function p(a,e,b,n){void 0===b&&(b=[0,0]);void 0===n&&(n=0);89.99999<e?e=89.99999:-89.99999>
e&&(e=-89.99999);e*=.017453292519943;b[n]=.017453292519943*a*c;b[n+1]=.5*c*Math.log((1+Math.sin(e))/(1-Math.sin(e)));return b}function e(a,e,b,n,g){void 0===b&&(b=[0,0]);void 0===n&&(n=0);void 0===g&&(g=!1);a=a/c*57.29577951308232;b[n]=g?a:a-360*Math.floor((a+180)/360);b[n+1]=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*e/c)));return b}Object.defineProperty(a,"__esModule",{value:!0});var c=f.wgs84Radius,n=[0,0];a.canProject=g;a.project=function(a,c){var m=a&&a.spatialReference;c=c&&(null!=
c.wkid||null!=c.wkt?c:c.spatialReference);return g(m,c)?k.equals(m,c)?l.clone(a):k.isWebMercator(c)?b(a,p,h.WebMercator,!1,l.clone(a)):k.isWGS84(c)?b(a,e,h.WGS84,!1,l.clone(a)):null:null};a.lngLatToXY=p;a.xyToLngLat=e;a.geographicToWebMercator=function(a,e,c){void 0===e&&(e=!1);void 0===c&&(c=l.clone(a));return b(a,p,h.WebMercator,e,c)};a.webMercatorToGeographic=function(a,c,n){void 0===c&&(c=!1);void 0===n&&(n=l.clone(a));return b(a,e,h.WGS84,c,n)}})},"esri/geometry/support/contains":function(){define(["require",
"exports"],function(d,a){function l(a,b,g,f){return b>=a.xmin&&b<=a.xmax&&g>=a.ymin&&g<=a.ymax?null!=f&&a.hasZ?f>=a.zmin&&f<=a.zmax:!0:!1}function f(a,b){if(a=a.rings)if(Array.isArray(a[0][0])){for(var g=!1,f=0,e=a.length;f<e;f++)g=h(g,a[f],b);b=g}else b=h(!1,a,b);else b=!1;return b}function h(a,b,g){var f=g[0];g=g[1];for(var e=0,c=0,n=b.length;c<n;c++){e++;e===n&&(e=0);var m=b[c],q=m[0],m=m[1],k=b[e],d=k[0],k=k[1];(m<g&&k>=g||k<g&&m>=g)&&q+(g-m)/(k-m)*(d-q)<f&&(a=!a)}return a}Object.defineProperty(a,
"__esModule",{value:!0});a.extentContainsPoint=function(a,b){return l(a,b.x,b.y,b.z)};a.extentContainsExtent=function(a,b){var g=b.xmin,f=b.ymin,e=b.zmin,c=b.xmax,n=b.ymax,m=b.zmax;return a.hasZ&&b.hasZ?l(a,g,f,e)&&l(a,g,n,e)&&l(a,c,n,e)&&l(a,c,f,e)&&l(a,g,f,m)&&l(a,g,n,m)&&l(a,c,n,m)&&l(a,c,f,m):l(a,g,f)&&l(a,g,n)&&l(a,c,n)&&l(a,c,f)};a.extentContainsCoords2D=function(a,b){return l(a,b[0],b[1])};a.extentContainsCoords3D=function(a,b){return l(a,b[0],b[1],b[2])};a.polygonContainsPoint=function(a,
b){return f(a,[b.x,b.y])};a.polygonContainsCoords=f})},"esri/geometry/support/intersects":function(){define(["require","exports","./contains"],function(d,a,l){function f(a,e){return l.extentContainsPoint(a,e)}function h(a,e){var c=a.hasZ&&e.hasZ,b;if(a.xmin<=e.xmin){if(b=e.xmin,a.xmax<b)return!1}else if(b=a.xmin,e.xmax<b)return!1;if(a.ymin<=e.ymin){if(b=e.ymin,a.ymax<b)return!1}else if(b=a.ymin,e.ymax<b)return!1;if(c&&e.hasZ)if(a.zmin<=e.zmin){if(c=e.zmin,a.zmax<c)return!1}else if(c=a.zmin,e.zmax<
c)return!1;return!0}function k(a,e){var c=e.hasZ?l.extentContainsCoords3D:l.extentContainsCoords2D,b=0;for(e=e.points;b<e.length;b++)if(c(a,e[b]))return!0;return!1}function b(a,e){c[0]=a.xmin;c[1]=a.ymax;n[0]=a.xmax;n[1]=a.ymax;m[0]=a.xmin;m[1]=a.ymin;q[0]=a.xmax;q[1]=a.ymin;for(var b=0,g=y;b<g.length;b++)if(l.polygonContainsCoords(e,g[b]))return!0;b=0;for(e=e.rings;b<e.length;b++)if(g=e[b],g.length){var f=g[0];if(l.extentContainsCoords2D(a,f))return!0;for(var k=1;k<g.length;k++){var d=g[k];if(l.extentContainsCoords2D(a,
d)||p(f,d,x))return!0;f=d}}return!1}function g(a,e){c[0]=a.xmin;c[1]=a.ymax;n[0]=a.xmax;n[1]=a.ymax;m[0]=a.xmin;m[1]=a.ymin;q[0]=a.xmax;q[1]=a.ymin;e=e.paths;for(var b=0;b<e.length;b++){var g=e[b];if(e.length){var f=g[0];if(l.extentContainsCoords2D(a,f))return!0;for(var k=1;k<g.length;k++){var d=g[k];if(l.extentContainsCoords2D(a,d)||p(f,d,x))return!0;f=d}}}return!1}function p(a,c,b){for(var m=0;m<b.length;m++)if(e(a,c,b[m][0],b[m][1]))return!0;return!1}function e(a,e,c,b,m){var n=a[0];a=a[1];var g=
e[0];e=e[1];var q=c[0],f=c[1];c=b[0]-q;var q=n-q,k=g-n;b=b[1]-f;var f=a-f,d=e-a,t=b*k-c*d;if(0===t)return!1;c=(c*f-b*q)/t;q=(k*f-d*q)/t;return 0<=c&&1>=c&&0<=q&&1>=q?(m&&(m[0]=n+c*(g-n),m[1]=a+c*(e-a)),!0):!1}Object.defineProperty(a,"__esModule",{value:!0});a.extentIntersectsPoint=f;a.extentIntersectsExtent=h;a.extentIntersectsMultipoint=k;var c=[0,0],n=[0,0],m=[0,0],q=[0,0],y=[c,n,m,q],x=[[m,c],[c,n],[n,q],[q,m]];a.extentIntersectsPolygon=b;a.extentIntersectsPolyline=g;var t=[0,0];a.isSelfIntersecting=
function(a){for(var c=0;c<a.length;c++){for(var b=a[c],m=0;m<b.length-1;m++)for(var n=b[m],g=b[m+1],q=c+1;q<a.length;q++)for(var f=0;f<a[q].length-1;f++){var k=a[q][f],d=a[q][f+1],h=e(n,g,k,d,t);if(h&&!(t[0]===n[0]&&t[1]===n[1]||t[0]===k[0]&&t[1]===k[1]||t[0]===g[0]&&t[1]===g[1]||t[0]===d[0]&&t[1]===d[1]))return!0}f=b.length;if(!(4>=f))for(m=0;m<f-3;m++){var p=f-1;0===m&&(p=f-2);n=b[m];g=b[m+1];for(q=m+2;q<p;q++)if(k=b[q],d=b[q+1],(h=e(n,g,k,d,t))&&!(t[0]===n[0]&&t[1]===n[1]||t[0]===k[0]&&t[1]===
k[1]||t[0]===g[0]&&t[1]===g[1]||t[0]===d[0]&&t[1]===d[1]))return!0}}return!1};a.segmentIntersects=e;a.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return h;case "esriGeometryMultipoint":case "multipoint":return k;case "esriGeometryPoint":case "point":return f;case "esriGeometryPolygon":case "polygon":return b;case "esriGeometryPolyline":case "polyline":return g;case "mesh":return h}}})},"esri/geometry/Mesh":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/lang ../core/Logger ../core/accessorSupport/decorators ../core/libs/gl-matrix-2/gl-matrix ./Extent ./Geometry ./support/MeshComponent ./support/MeshVertexAttributes ./support/triangulationUtils ./support/meshUtils/centerAt ./support/meshUtils/offset ./support/meshUtils/primitives ./support/meshUtils/rotate".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u){var z=b.getLogger("esri.geometry.Mesh");d=function(a){function c(e){e=a.call(this)||this;e.components=null;e.hasZ=!0;e.hasM=!1;e.vertexAttributes=new m.MeshVertexAttributes;e.type="mesh";return e}l(c,a);b=c;Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.spatialReference,c=this.vertexAttributes&&this.vertexAttributes.position;if(!c||0===c.length||this.components&&0===this.components.length)return new e({xmin:0,ymin:0,zmin:0,xmax:0,
ymax:0,zmax:0,spatialReference:a});a={xmin:Infinity,xmax:-Infinity,ymin:Infinity,ymax:-Infinity,zmin:Infinity,zmax:-Infinity,spatialReference:a};if(!this.components)return new e(this.extendExtent(a,c,null));for(var b=0,m=this.components;b<m.length;b++){var n=m[b];if(n.faces)this.extendExtent(a,c,n.faces);else{this.extendExtent(a,c,null);break}}return new e(a)},enumerable:!0,configurable:!0});c.prototype.addComponent=function(a){this.components||(this.components=[]);this.components.push(a);this.clearCache()};
c.prototype.removeComponent=function(a){if(this.components&&(a=this.components.indexOf(a),-1!==a)){this.components=this.components.splice(a,1);return}z.error("removeComponent()","Provided component is not part of the list of components")};c.prototype.rotate=function(a,e,c,b){u.axisAngleFrom(D.x,a/180*Math.PI,w);u.axisAngleFrom(D.y,e/180*Math.PI,C);u.axisAngleFrom(D.z,c/180*Math.PI,E);u.axisAngleMultiply(w,C,w);u.axisAngleMultiply(w,E,w);u.rotate(this,w,b);return this};c.prototype.offset=function(a,
e,c,b){B[0]=a;B[1]=e;B[2]=c;x.offset(this,B,b);return this};c.prototype.centerAt=function(a,e){y.centerAt(this,a,e);return this};c.prototype.clone=function(){return new b({components:k.clone(this.components),spatialReference:this.spatialReference,vertexAttributes:k.clone(this.vertexAttributes)})};c.prototype.vertexAttributesChanged=function(){this.clearCache()};c.prototype.toJSON=function(a){return this.write(null,a)};c.prototype.forEachVertex=function(a,e,c){if(e)for(m=0;m<e.length;m++){var b=3*
e[m];c(a[b+0],a[b+1],a[b+2])}else for(var m=0;m<a.length;m+=3)c(a[m+0],a[m+1],a[m+2])};c.prototype.extendExtent=function(a,e,c){this.forEachVertex(e,c,function(e,c,b){a.xmin=Math.min(a.xmin,e);a.xmax=Math.max(a.xmax,e);a.ymin=Math.min(a.ymin,c);a.ymax=Math.max(a.ymax,c);a.zmin=Math.min(a.zmin,b);a.zmax=Math.max(a.zmax,b)});return a};c.createBox=function(a,e){a=new b(t.convertUnitGeometry(t.createUnitSizeBox(),a,e));if(e&&e.imageFace&&"all"!==e.imageFace){var c=a.components[0],m=c.faces,g=t.boxFaceOrder[e.imageFace],
q=6*g;e=new Uint32Array(6);for(var f=new Uint32Array(m.length-6),k=0,d=0,h=0;h<m.length;h++)h>=q&&h<q+6?e[k++]=m[h]:f[d++]=m[h];m=new Float32Array(a.vertexAttributes.uv);g*=8;q=[0,1,1,1,1,0,0,0];for(h=0;h<q.length;h++)m[g+h]=q[h];a.vertexAttributes.uv=m;a.components=[new n({faces:e,material:c.material}),new n({faces:f})]}return a};c.createSphere=function(a,e){return new b(t.convertUnitGeometry(t.createUnitSizeSphere(e&&e.densificationFactor||0),a,e))};c.createCylinder=function(a,e){return new b(t.convertUnitGeometry(t.createUnitSizeCylinder(e&&
e.densificationFactor||0),a,e))};c.createPlane=function(a,e){return new b(t.convertUnitGeometry(t.createUnitSizePlane(e&&e.facing||"up"),a,e))};c.createFromPolygon=function(a,e){var c=q.triangulate(a);return new b({vertexAttributes:{position:c.position},components:[{faces:c.faces,shading:"flat",material:e&&e.material||null}],spatialReference:a.spatialReference})};var b;f([g.property({dependsOn:["vertexAttributes","vertexAttributes.position","components"],json:{read:!1}})],c.prototype,"cache",void 0);
f([g.property({type:[n]})],c.prototype,"components",void 0);f([g.property({dependsOn:["cache"],readOnly:!0,json:{read:!1}})],c.prototype,"extent",null);f([g.property({readOnly:!0,json:{read:!1,write:!1}})],c.prototype,"hasZ",void 0);f([g.property({readOnly:!0,json:{read:!1,write:!1}})],c.prototype,"hasM",void 0);f([g.property({type:m.MeshVertexAttributes,nonNullable:!0,json:{write:!0}})],c.prototype,"vertexAttributes",void 0);f([h(0,g.cast(n))],c.prototype,"addComponent",null);return c=b=f([g.subclass("esri.geometry.Mesh")],
c)}(g.declared(c));d.prototype.toJSON.isDefaultToJSON=!0;var D={x:p.vec3f64.fromValues(1,0,0),y:p.vec3f64.fromValues(0,1,0),z:p.vec3f64.fromValues(0,0,1)},B=p.vec3f64.create(),w=p.vec4f64.create(),C=p.vec4f64.create(),E=p.vec4f64.create();return d})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(d,a){return function(l,f){a(l,f,d)}}})},"esri/core/libs/gl-matrix-2/gl-matrix":function(){define("require exports ./factories/mat2df32 ./factories/mat2df64 ./factories/mat2f32 ./factories/mat2f64 ./factories/mat3f32 ./factories/mat3f64 ./factories/mat4f32 ./factories/mat4f64 ./factories/quat2f32 ./factories/quat2f64 ./factories/quatf32 ./factories/quatf64 ./factories/vec2f32 ./factories/vec2f64 ./factories/vec3f32 ./factories/vec3f64 ./factories/vec4f32 ./factories/vec4f64 ./math/common ./math/mat2 ./math/mat2d ./math/mat3 ./math/mat4 ./math/quat ./math/quat2 ./math/vec2 ./math/vec3 ./math/vec4".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D,B,w,C,E,A,H,F,G,N,O){Object.defineProperty(a,"__esModule",{value:!0});a.mat2df32=l;a.mat2df64=f;a.mat2f32=h;a.mat2f64=k;a.mat3f32=b;a.mat3f64=g;a.mat4f32=p;a.mat4f64=e;a.quat2f32=c;a.quat2f64=n;a.quatf32=m;a.quatf64=q;a.vec2f32=y;a.vec2f64=x;a.vec3f32=t;a.vec3f64=u;a.vec4f32=z;a.vec4f64=D;a.common=B;a.mat2=w;a.mat2d=C;a.mat3=E;a.mat4=A;a.quat=H;a.quat2=F;a.vec2=G;a.vec3=N;a.vec4=O})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require",
"exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(6);a[0]=1;a[3]=1;return a};a.clone=function(a){var f=new Float32Array(6);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];f[4]=a[4];f[5]=a[5];return f};a.fromValues=function(a,f,d,k,b,g){var h=new Float32Array(6);h[0]=a;h[1]=f;h[2]=d;h[3]=k;h[4]=b;h[5]=g;return h};a.createView=function(a,f){return new Float32Array(a,f,6)}})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require",
"exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,1,0,0]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5]]};a.fromValues=function(a,f,d,k,b,g){return[a,f,d,k,b,g]};a.createView=function(a,f){return new Float64Array(a,f,6)}})},"esri/core/libs/gl-matrix-2/factories/mat2f32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(4);a[0]=1;a[3]=1;
return a};a.clone=function(a){var f=new Float32Array(4);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];return f};a.fromValues=function(a,f,d,k){var b=new Float32Array(4);b[0]=a;b[1]=f;b[2]=d;b[3]=k;return b};a.createView=function(a,f){return new Float32Array(a,f,4)}})},"esri/core/libs/gl-matrix-2/factories/mat2f64":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,1]};a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=
function(a,f,d,k){return[a,f,d,k]};a.createView=function(a,f){return new Float64Array(a,f,4)}})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(9);a[0]=1;a[4]=1;a[8]=1;return a};a.clone=function(a){var f=new Float32Array(9);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];f[4]=a[4];f[5]=a[5];f[6]=a[6];f[7]=a[7];f[8]=a[8];return f};a.fromValues=function(a,f,d,k,b,
g,p,e,c){var n=new Float32Array(9);n[0]=a;n[1]=f;n[2]=d;n[3]=k;n[4]=b;n[5]=g;n[6]=p;n[7]=e;n[8]=c;return n};a.createView=function(a,f){return new Float32Array(a,f,9)}})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,0,1,0,0,0,1]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]};a.fromValues=function(a,f,d,k,b,g,p,e,c){return[a,f,d,k,b,g,
p,e,c]};a.createView=function(a,f){return new Float64Array(a,f,9)}})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(16);a[0]=1;a[5]=1;a[10]=1;a[15]=1;return a};a.clone=function(a){var f=new Float32Array(16);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];f[4]=a[4];f[5]=a[5];f[6]=a[6];f[7]=a[7];f[8]=a[8];f[9]=a[9];f[10]=a[10];f[11]=a[11];f[12]=a[12];f[13]=a[13];
f[14]=a[14];f[15]=a[15];return f};a.fromValues=function(a,f,d,k,b,g,p,e,c,n,m,q,y,x,t,u){var h=new Float32Array(16);h[0]=a;h[1]=f;h[2]=d;h[3]=k;h[4]=b;h[5]=g;h[6]=p;h[7]=e;h[8]=c;h[9]=n;h[10]=m;h[11]=q;h[12]=y;h[13]=x;h[14]=t;h[15]=u;return h};a.createView=function(a,f){return new Float32Array(a,f,16)}})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,0,0,1,0,0,0,
0,1,0,0,0,0,1]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]};a.fromValues=function(a,f,d,k,b,g,p,e,c,n,m,q,y,x,t,u){return[a,f,d,k,b,g,p,e,c,n,m,q,y,x,t,u]};a.createView=function(a,f){return new Float64Array(a,f,16)}})},"esri/core/libs/gl-matrix-2/factories/quat2f32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(8);a[3]=1;return a};
a.clone=function(a){var f=new Float32Array(8);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];f[4]=a[4];f[5]=a[5];f[6]=a[6];f[7]=a[7];return f};a.fromValues=function(a,f,d,k,b,g,p,e){var c=new Float32Array(8);c[0]=a;c[1]=f;c[2]=d;c[3]=k;c[4]=b;c[5]=g;c[6]=p;c[7]=e;return c};a.fromRotationTranslationValues=function(a,f,d,k,b,g,p){var e=new Float32Array(8);e[0]=a;e[1]=f;e[2]=d;e[3]=k;b*=.5;g*=.5;p*=.5;e[4]=b*k+g*d-p*f;e[5]=g*k+p*a-b*d;e[6]=p*k+b*f-g*a;e[7]=-b*a-g*f-p*d;return e};a.createView=function(a,f){return new Float32Array(a,
f,8)}})},"esri/core/libs/gl-matrix-2/factories/quat2f64":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[0,0,0,1,0,0,0,0]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]]};a.fromValues=function(a,f,d,k,b,g,p,e){return[a,f,d,k,b,g,p,e]};a.fromRotationTranslationValues=function(a,f,d,k,b,g,p){b*=.5;g*=.5;p*=.5;return[a,f,d,k,b*k+g*d-p*f,g*k+p*a-b*d,p*k+b*f-g*a,-b*a-g*f-p*d]};a.createView=function(a,
f){return new Float64Array(a,f,8)}})},"esri/core/libs/gl-matrix-2/factories/quatf32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(4);a[3]=1;return a};a.clone=function(a){var f=new Float32Array(4);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];return f};a.fromValues=function(a,f,d,k){var b=new Float32Array(4);b[0]=a;b[1]=f;b[2]=d;b[3]=k;return b};a.createView=function(a,f){return new Float32Array(a,f,4)}})},
"esri/core/libs/gl-matrix-2/factories/quatf64":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[0,0,0,1]};a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=function(a,f,d,k){return[a,f,d,k]};a.createView=function(a,f){return new Float64Array(a,f,4)}})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=
function(){return new Float32Array(2)};a.clone=function(a){var f=new Float32Array(2);f[0]=a[0];f[1]=a[1];return f};a.fromValues=function(a,f){var d=new Float32Array(2);d[0]=a;d[1]=f;return d};a.createView=function(a,f){return new Float32Array(a,f,2)}})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[0,0]};a.clone=function(a){return[a[0],a[1]]};a.fromValues=function(a,f){return[a,
f]};a.fromArray=function(a){for(var f=[0,0],d=Math.min(2,a.length),k=0;k<d;++k)f[k]=a[k];return f};a.createView=function(a,f){return new Float64Array(a,f,2)}})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return new Float32Array(3)};a.clone=function(a){var f=new Float32Array(3);f[0]=a[0];f[1]=a[1];f[2]=a[2];return f};a.fromValues=function(a,f,d){var k=new Float32Array(3);k[0]=
a;k[1]=f;k[2]=d;return k};a.createView=function(a,f){return new Float32Array(a,f,3)}})},"esri/core/libs/gl-matrix-2/factories/vec3f64":function(){define(["require","exports"],function(d,a){function l(){return[0,0,0]}Object.defineProperty(a,"__esModule",{value:!0});a.create=l;a.clone=function(a){return[a[0],a[1],a[2]]};a.fromValues=function(a,d,k){return[a,d,k]};a.fromArray=function(a){for(var f=l(),d=Math.min(3,a.length),b=0;b<d;++b)f[b]=a[b];return f};a.createView=function(a,d){return new Float64Array(a,
d,3)}})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return new Float32Array(4)};a.clone=function(a){var f=new Float32Array(4);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];return f};a.fromValues=function(a,f,d,k){var b=new Float32Array(4);b[0]=a;b[1]=f;b[2]=d;b[3]=k;return b};a.createView=function(a,f){return new Float32Array(a,f,4)}})},"esri/core/libs/gl-matrix-2/factories/vec4f64":function(){define(["require",
"exports"],function(d,a){function l(){return[0,0,0,0]}Object.defineProperty(a,"__esModule",{value:!0});a.create=l;a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=function(a,d,k,b){return[a,d,k,b]};a.fromArray=function(a){for(var f=l(),d=Math.min(4,a.length),b=0;b<d;++b)f[b]=a[b];return f};a.createView=function(a,d){return new Float64Array(a,d,4)}})},"esri/core/libs/gl-matrix-2/math/common":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});
a.EPSILON=1E-6;a.RANDOM=Math.random;var l=Math.PI/180,f=180/Math.PI;a.toRadian=function(a){return a*l};a.toDegree=function(a){return a*f};a.equals=function(f,d){return Math.abs(f-d)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))}})},"esri/core/libs/gl-matrix-2/math/mat2":function(){define(["require","exports","./common"],function(d,a,l){function f(a,b,g){var f=b[0],e=b[1],c=b[2];b=b[3];var n=g[0],m=g[1],q=g[2];g=g[3];a[0]=f*n+c*m;a[1]=e*n+b*m;a[2]=f*q+c*g;a[3]=e*q+b*g;return a}function h(a,b,g){a[0]=
b[0]-g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];a[3]=b[3]-g[3];return a}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a};a.set=function(a,b,g,f,e){a[0]=b;a[1]=g;a[2]=f;a[3]=e;return a};a.transpose=function(a,b){if(a===b){var g=b[1];a[1]=b[2];a[2]=g}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a};a.invert=function(a,b){var g=b[0],f=b[1],e=b[2];b=b[3];var c=g*b-e*f;if(!c)return null;
c=1/c;a[0]=b*c;a[1]=-f*c;a[2]=-e*c;a[3]=g*c;return a};a.adjoint=function(a,b){var g=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=g;return a};a.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};a.multiply=f;a.rotate=function(a,b,g){var f=b[0],e=b[1],c=b[2];b=b[3];var n=Math.sin(g);g=Math.cos(g);a[0]=f*g+c*n;a[1]=e*g+b*n;a[2]=f*-n+c*g;a[3]=e*-n+b*g;return a};a.scale=function(a,b,g){var f=b[1],e=b[2],c=b[3],n=g[0];g=g[1];a[0]=b[0]*n;a[1]=f*n;a[2]=e*g;a[3]=c*g;return a};a.fromRotation=function(a,b){var g=
Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=g;a[2]=-g;a[3]=b;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];return a};a.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};a.LDU=function(a,b,g,f){a[2]=f[2]/f[0];g[0]=f[0];g[1]=f[1];g[3]=f[3]-a[2]*g[1];return[a,b,g]};a.add=function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];a[3]=b[3]+g[3];return a};
a.subtract=h;a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};a.equals=function(a,b){var g=a[0],f=a[1],e=a[2];a=a[3];var c=b[0],n=b[1],m=b[2];b=b[3];return Math.abs(g-c)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(c))&&Math.abs(f-n)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(n))&&Math.abs(e-m)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(a-b)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.multiplyScalar=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=
b[2]*g;a[3]=b[3]*g;return a};a.multiplyScalarAndAdd=function(a,b,g,f){a[0]=b[0]+g[0]*f;a[1]=b[1]+g[1]*f;a[2]=b[2]+g[2]*f;a[3]=b[3]+g[3]*f;return a};a.mul=f;a.sub=h})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(d,a,l){function f(a,b,g){var f=b[0],e=b[1],c=b[2],n=b[3],m=b[4];b=b[5];var q=g[0],d=g[1],k=g[2],t=g[3],h=g[4];g=g[5];a[0]=f*q+c*d;a[1]=e*q+n*d;a[2]=f*k+c*t;a[3]=e*k+n*t;a[4]=f*h+c*g+m;a[5]=e*h+n*g+b;return a}function h(a,b,g){a[0]=b[0]-
g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];a[3]=b[3]-g[3];a[4]=b[4]-g[4];a[5]=b[5]-g[5];return a}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a};a.set=function(a,b,g,f,e,c,n){a[0]=b;a[1]=g;a[2]=f;a[3]=e;a[4]=c;a[5]=n;return a};a.invert=function(a,b){var g=b[0],f=b[1],e=b[2],c=b[3],n=b[4];b=b[5];var m=g*c-f*e;if(!m)return null;m=1/m;a[0]=c*m;
a[1]=-f*m;a[2]=-e*m;a[3]=g*m;a[4]=(e*b-c*n)*m;a[5]=(f*n-g*b)*m;return a};a.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};a.multiply=f;a.rotate=function(a,b,g){var f=b[0],e=b[1],c=b[2],n=b[3],m=b[4];b=b[5];var q=Math.sin(g);g=Math.cos(g);a[0]=f*g+c*q;a[1]=e*g+n*q;a[2]=f*-q+c*g;a[3]=e*-q+n*g;a[4]=m;a[5]=b;return a};a.scale=function(a,b,g){var f=b[1],e=b[2],c=b[3],n=b[4],m=b[5],q=g[0];g=g[1];a[0]=b[0]*q;a[1]=f*q;a[2]=e*g;a[3]=c*g;a[4]=n;a[5]=m;return a};a.translate=function(a,b,g){var f=b[0],e=
b[1],c=b[2],n=b[3],m=b[4];b=b[5];var q=g[0];g=g[1];a[0]=f;a[1]=e;a[2]=c;a[3]=n;a[4]=f*q+c*g+m;a[5]=e*q+n*g+b;return a};a.fromRotation=function(a,b){var g=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=g;a[2]=-g;a[3]=b;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};
a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};a.add=function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];a[3]=b[3]+g[3];a[4]=b[4]+g[4];a[5]=b[5]+g[5];return a};a.subtract=h;a.multiplyScalar=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*g;a[5]=b[5]*g;return a};a.multiplyScalarAndAdd=function(a,b,g,f){a[0]=b[0]+g[0]*f;a[1]=b[1]+g[1]*f;a[2]=b[2]+g[2]*f;a[3]=b[3]+g[3]*f;
a[4]=b[4]+g[4]*f;a[5]=b[5]+g[5]*f;return a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]};a.equals=function(a,b){var g=a[0],f=a[1],e=a[2],c=a[3],n=a[4];a=a[5];var m=b[0],q=b[1],d=b[2],k=b[3],t=b[4];b=b[5];return Math.abs(g-m)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(f-q)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(e-d)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(d))&&Math.abs(c-k)<=l.EPSILON*Math.max(1,
Math.abs(c),Math.abs(k))&&Math.abs(n-t)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(t))&&Math.abs(a-b)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.mul=f;a.sub=h})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(d,a,l){function f(a,b,g){var f=b[0],e=b[1],c=b[2],n=b[3],m=b[4],q=b[5],d=b[6],k=b[7];b=b[8];var t=g[0],h=g[1],z=g[2],l=g[3],B=g[4],w=g[5],C=g[6],E=g[7];g=g[8];a[0]=t*f+h*n+z*d;a[1]=t*e+h*m+z*k;a[2]=t*c+h*q+z*b;a[3]=l*f+B*n+w*d;a[4]=l*
e+B*m+w*k;a[5]=l*c+B*q+w*b;a[6]=C*f+E*n+g*d;a[7]=C*e+E*m+g*k;a[8]=C*c+E*q+g*b;return a}function h(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];a[3]=b[3]-g[3];a[4]=b[4]-g[4];a[5]=b[5]-g[5];a[6]=b[6]-g[6];a[7]=b[7]-g[7];a[8]=b[8]-g[8];return a}Object.defineProperty(a,"__esModule",{value:!0});a.fromMat4=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];
a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};a.set=function(a,b,g,f,e,c,n,m,q,d){a[0]=b;a[1]=g;a[2]=f;a[3]=e;a[4]=c;a[5]=n;a[6]=m;a[7]=q;a[8]=d;return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.transpose=function(a,b){if(a===b){var g=b[1],f=b[2],e=b[5];a[1]=b[3];a[2]=b[6];a[3]=g;a[5]=b[7];a[6]=f;a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a};a.invert=function(a,b){var g=b[0],f=b[1],
e=b[2],c=b[3],n=b[4],m=b[5],q=b[6],d=b[7];b=b[8];var k=b*n-m*d,t=-b*c+m*q,h=d*c-n*q,z=g*k+f*t+e*h;if(!z)return null;z=1/z;a[0]=k*z;a[1]=(-b*f+e*d)*z;a[2]=(m*f-e*n)*z;a[3]=t*z;a[4]=(b*g-e*q)*z;a[5]=(-m*g+e*c)*z;a[6]=h*z;a[7]=(-d*g+f*q)*z;a[8]=(n*g-f*c)*z;return a};a.adjoint=function(a,b){var g=b[0],f=b[1],e=b[2],c=b[3],n=b[4],m=b[5],q=b[6],d=b[7];b=b[8];a[0]=n*b-m*d;a[1]=e*d-f*b;a[2]=f*m-e*n;a[3]=m*q-c*b;a[4]=g*b-e*q;a[5]=e*c-g*m;a[6]=c*d-n*q;a[7]=f*q-g*d;a[8]=g*n-f*c;return a};a.determinant=function(a){var b=
a[3],g=a[4],f=a[5],e=a[6],c=a[7],n=a[8];return a[0]*(n*g-f*c)+a[1]*(-n*b+f*e)+a[2]*(c*b-g*e)};a.multiply=f;a.translate=function(a,b,g){var f=b[0],e=b[1],c=b[2],n=b[3],m=b[4],q=b[5],d=b[6],k=b[7];b=b[8];var t=g[0];g=g[1];a[0]=f;a[1]=e;a[2]=c;a[3]=n;a[4]=m;a[5]=q;a[6]=t*f+g*n+d;a[7]=t*e+g*m+k;a[8]=t*c+g*q+b;return a};a.rotate=function(a,b,g){var f=b[0],e=b[1],c=b[2],n=b[3],m=b[4],q=b[5],d=b[6],k=b[7];b=b[8];var t=Math.sin(g);g=Math.cos(g);a[0]=g*f+t*n;a[1]=g*e+t*m;a[2]=g*c+t*q;a[3]=g*n-t*f;a[4]=g*m-
t*e;a[5]=g*q-t*c;a[6]=d;a[7]=k;a[8]=b;return a};a.scale=function(a,b,g){var f=g[0];g=g[1];a[0]=f*b[0];a[1]=f*b[1];a[2]=f*b[2];a[3]=g*b[3];a[4]=g*b[4];a[5]=g*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};a.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a};a.fromRotation=function(a,b){var g=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=g;a[2]=0;a[3]=-g;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=
0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};a.fromQuat=function(a,b){var g=b[0],f=b[1],e=b[2];b=b[3];var c=g+g,n=f+f,m=e+e,g=g*c,q=f*c,f=f*n,d=e*c,h=e*n,e=e*m,c=b*c,n=b*n;b*=m;a[0]=1-f-e;a[3]=q-b;a[6]=d+n;a[1]=q+b;a[4]=1-g-e;a[7]=h-c;a[2]=d-n;a[5]=h+c;a[8]=1-g-f;return a};a.normalFromMat4=function(a,b){var g=b[0],f=b[1],e=b[2],c=b[4],n=b[5],m=b[6],q=b[8],d=b[9];b=b[10];var h=
b*n-m*d,t=-b*c+m*q,k=d*c-n*q,z=g*h+f*t+e*k;if(!z)return null;z=1/z;a[0]=h*z;a[1]=(-b*f+e*d)*z;a[2]=(m*f-e*n)*z;a[3]=t*z;a[4]=(b*g-e*q)*z;a[5]=(-m*g+e*c)*z;a[6]=k*z;a[7]=(-d*g+f*q)*z;a[8]=(n*g-f*c)*z;return a};a.projection=function(a,b,g){a[0]=2/b;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/g;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],
2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};a.add=function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];a[3]=b[3]+g[3];a[4]=b[4]+g[4];a[5]=b[5]+g[5];a[6]=b[6]+g[6];a[7]=b[7]+g[7];a[8]=b[8]+g[8];return a};a.subtract=h;a.multiplyScalar=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*g;a[5]=b[5]*g;a[6]=b[6]*g;a[7]=b[7]*g;a[8]=b[8]*g;return a};a.multiplyScalarAndAdd=function(a,b,g,f){a[0]=
b[0]+g[0]*f;a[1]=b[1]+g[1]*f;a[2]=b[2]+g[2]*f;a[3]=b[3]+g[3]*f;a[4]=b[4]+g[4]*f;a[5]=b[5]+g[5]*f;a[6]=b[6]+g[6]*f;a[7]=b[7]+g[7]*f;a[8]=b[8]+g[8]*f;return a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};a.equals=function(a,b){var f=a[0],d=a[1],e=a[2],c=a[3],n=a[4],m=a[5],q=a[6],h=a[7];a=a[8];var k=b[0],t=b[1],u=b[2],z=b[3],D=b[4],B=b[5],w=b[6],C=b[7];b=b[8];return Math.abs(f-k)<=l.EPSILON*Math.max(1,
Math.abs(f),Math.abs(k))&&Math.abs(d-t)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(e-u)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(c-z)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(n-D)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(m-B)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(q-w)<=l.EPSILON*Math.max(1,Math.abs(q),Math.abs(w))&&Math.abs(h-C)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(a-b)<=l.EPSILON*Math.max(1,Math.abs(a),
Math.abs(b))};a.mul=f;a.sub=h})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(d,a,l,f){function h(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function k(a,c,b){var e=c[0],n=c[1],f=c[2],g=c[3],d=c[4],h=c[5],k=c[6],p=c[7],l=c[8],w=c[9],C=c[10],E=c[11],A=c[12],H=c[13],F=c[14];c=c[15];var G=b[0],N=b[1],O=b[2],S=b[3];a[0]=G*e+N*d+O*l+S*A;a[1]=
G*n+N*h+O*w+S*H;a[2]=G*f+N*k+O*C+S*F;a[3]=G*g+N*p+O*E+S*c;G=b[4];N=b[5];O=b[6];S=b[7];a[4]=G*e+N*d+O*l+S*A;a[5]=G*n+N*h+O*w+S*H;a[6]=G*f+N*k+O*C+S*F;a[7]=G*g+N*p+O*E+S*c;G=b[8];N=b[9];O=b[10];S=b[11];a[8]=G*e+N*d+O*l+S*A;a[9]=G*n+N*h+O*w+S*H;a[10]=G*f+N*k+O*C+S*F;a[11]=G*g+N*p+O*E+S*c;G=b[12];N=b[13];O=b[14];S=b[15];a[12]=G*e+N*d+O*l+S*A;a[13]=G*n+N*h+O*w+S*H;a[14]=G*f+N*k+O*C+S*F;a[15]=G*g+N*p+O*E+S*c;return a}function b(a,c,b){var e=c[0],n=c[1],f=c[2],g=c[3],d=e+e,h=n+n,k=f+f;c=e*d;var p=e*h,e=
e*k,l=n*h,n=n*k,f=f*k,d=g*d,h=g*h,g=g*k;a[0]=1-(l+f);a[1]=p+g;a[2]=e-h;a[3]=0;a[4]=p-g;a[5]=1-(c+f);a[6]=n+d;a[7]=0;a[8]=e+h;a[9]=n-d;a[10]=1-(c+l);a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}function g(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];a[2]=c[2]-b[2];a[3]=c[3]-b[3];a[4]=c[4]-b[4];a[5]=c[5]-b[5];a[6]=c[6]-b[6];a[7]=c[7]-b[7];a[8]=c[8]-b[8];a[9]=c[9]-b[9];a[10]=c[10]-b[10];a[11]=c[11]-b[11];a[12]=c[12]-b[12];a[13]=c[13]-b[13];a[14]=c[14]-b[14];a[15]=c[15]-b[15];return a}Object.defineProperty(a,
"__esModule",{value:!0});a.copy=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};a.set=function(a,c,b,m,f,g,d,h,k,p,l,B,w,C,E,A,H){a[0]=c;a[1]=b;a[2]=m;a[3]=f;a[4]=g;a[5]=d;a[6]=h;a[7]=k;a[8]=p;a[9]=l;a[10]=B;a[11]=w;a[12]=C;a[13]=E;a[14]=A;a[15]=H;return a};a.identity=h;a.transpose=function(a,c){if(a===c){var e=c[1],b=c[2],f=c[3],g=c[6],d=c[7],h=c[11];
a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=e;a[6]=c[9];a[7]=c[13];a[8]=b;a[9]=g;a[11]=c[14];a[12]=f;a[13]=d;a[14]=h}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a};a.invert=function(a,c){var e=c[0],b=c[1],f=c[2],g=c[3],d=c[4],h=c[5],k=c[6],p=c[7],l=c[8],B=c[9],w=c[10],C=c[11],E=c[12],A=c[13],H=c[14];c=c[15];var F=e*h-b*d,G=e*k-f*d,N=e*p-g*d,O=b*k-f*h,S=b*p-g*h,J=f*p-
g*k,X=l*A-B*E,T=l*H-w*E,Z=l*c-C*E,U=B*H-w*A,M=B*c-C*A,fa=w*c-C*H,K=F*fa-G*M+N*U+O*Z-S*T+J*X;if(!K)return null;K=1/K;a[0]=(h*fa-k*M+p*U)*K;a[1]=(f*M-b*fa-g*U)*K;a[2]=(A*J-H*S+c*O)*K;a[3]=(w*S-B*J-C*O)*K;a[4]=(k*Z-d*fa-p*T)*K;a[5]=(e*fa-f*Z+g*T)*K;a[6]=(H*N-E*J-c*G)*K;a[7]=(l*J-w*N+C*G)*K;a[8]=(d*M-h*Z+p*X)*K;a[9]=(b*Z-e*M-g*X)*K;a[10]=(E*S-A*N+c*F)*K;a[11]=(B*N-l*S-C*F)*K;a[12]=(h*T-d*U-k*X)*K;a[13]=(e*U-b*T+f*X)*K;a[14]=(A*G-E*O-H*F)*K;a[15]=(l*O-B*G+w*F)*K;return a};a.adjoint=function(a,c){var e=
c[0],b=c[1],f=c[2],g=c[3],d=c[4],h=c[5],k=c[6],p=c[7],l=c[8],B=c[9],w=c[10],C=c[11],E=c[12],A=c[13],H=c[14];c=c[15];a[0]=h*(w*c-C*H)-B*(k*c-p*H)+A*(k*C-p*w);a[1]=-(b*(w*c-C*H)-B*(f*c-g*H)+A*(f*C-g*w));a[2]=b*(k*c-p*H)-h*(f*c-g*H)+A*(f*p-g*k);a[3]=-(b*(k*C-p*w)-h*(f*C-g*w)+B*(f*p-g*k));a[4]=-(d*(w*c-C*H)-l*(k*c-p*H)+E*(k*C-p*w));a[5]=e*(w*c-C*H)-l*(f*c-g*H)+E*(f*C-g*w);a[6]=-(e*(k*c-p*H)-d*(f*c-g*H)+E*(f*p-g*k));a[7]=e*(k*C-p*w)-d*(f*C-g*w)+l*(f*p-g*k);a[8]=d*(B*c-C*A)-l*(h*c-p*A)+E*(h*C-p*B);a[9]=
-(e*(B*c-C*A)-l*(b*c-g*A)+E*(b*C-g*B));a[10]=e*(h*c-p*A)-d*(b*c-g*A)+E*(b*p-g*h);a[11]=-(e*(h*C-p*B)-d*(b*C-g*B)+l*(b*p-g*h));a[12]=-(d*(B*H-w*A)-l*(h*H-k*A)+E*(h*w-k*B));a[13]=e*(B*H-w*A)-l*(b*H-f*A)+E*(b*w-f*B);a[14]=-(e*(h*H-k*A)-d*(b*H-f*A)+E*(b*k-f*h));a[15]=e*(h*w-k*B)-d*(b*w-f*B)+l*(b*k-f*h);return a};a.determinant=function(a){var e=a[0],b=a[1],m=a[2],f=a[3],g=a[4],d=a[5],h=a[6],k=a[7],p=a[8],l=a[9],B=a[10],w=a[11],C=a[12],E=a[13],A=a[14];a=a[15];return(e*d-b*g)*(B*a-w*A)-(e*h-m*g)*(l*a-w*
E)+(e*k-f*g)*(l*A-B*E)+(b*h-m*d)*(p*a-w*C)-(b*k-f*d)*(p*A-B*C)+(m*k-f*h)*(p*E-l*C)};a.multiply=k;a.translate=function(a,c,b){var e=b[0],f=b[1];b=b[2];var g=void 0,n=void 0,d=void 0,h=void 0,k=void 0,p=void 0,l=void 0,w=void 0,C=void 0,E=void 0,A=void 0,H=void 0;c===a?(a[12]=c[0]*e+c[4]*f+c[8]*b+c[12],a[13]=c[1]*e+c[5]*f+c[9]*b+c[13],a[14]=c[2]*e+c[6]*f+c[10]*b+c[14],a[15]=c[3]*e+c[7]*f+c[11]*b+c[15]):(g=c[0],n=c[1],d=c[2],h=c[3],k=c[4],p=c[5],l=c[6],w=c[7],C=c[8],E=c[9],A=c[10],H=c[11],a[0]=g,a[1]=
n,a[2]=d,a[3]=h,a[4]=k,a[5]=p,a[6]=l,a[7]=w,a[8]=C,a[9]=E,a[10]=A,a[11]=H,a[12]=g*e+k*f+C*b+c[12],a[13]=n*e+p*f+E*b+c[13],a[14]=d*e+l*f+A*b+c[14],a[15]=h*e+w*f+H*b+c[15]);return a};a.scale=function(a,c,b){var e=b[0],f=b[1];b=b[2];a[0]=c[0]*e;a[1]=c[1]*e;a[2]=c[2]*e;a[3]=c[3]*e;a[4]=c[4]*f;a[5]=c[5]*f;a[6]=c[6]*f;a[7]=c[7]*f;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};a.rotate=function(a,c,b,m){var e=m[0],g=m[1];m=m[2];var n=Math.sqrt(e*
e+g*g+m*m),d=void 0,h=void 0,k=void 0,p=void 0,l=void 0,w=void 0,C=void 0,E=void 0,A=void 0,H=void 0,F=void 0,G=void 0,N=void 0,O=void 0,S=void 0,J=void 0,X=void 0,T=void 0,Z=void 0,U=void 0,M=void 0,fa=void 0,h=d=void 0;if(n<f.EPSILON)return null;n=1/n;e*=n;g*=n;m*=n;d=Math.sin(b);h=Math.cos(b);k=1-h;p=c[0];l=c[1];w=c[2];C=c[3];E=c[4];A=c[5];H=c[6];F=c[7];G=c[8];N=c[9];O=c[10];S=c[11];J=e*e*k+h;X=g*e*k+m*d;T=m*e*k-g*d;Z=e*g*k-m*d;U=g*g*k+h;M=m*g*k+e*d;fa=e*m*k+g*d;d=g*m*k-e*d;h=m*m*k+h;a[0]=p*J+
E*X+G*T;a[1]=l*J+A*X+N*T;a[2]=w*J+H*X+O*T;a[3]=C*J+F*X+S*T;a[4]=p*Z+E*U+G*M;a[5]=l*Z+A*U+N*M;a[6]=w*Z+H*U+O*M;a[7]=C*Z+F*U+S*M;a[8]=p*fa+E*d+G*h;a[9]=l*fa+A*d+N*h;a[10]=w*fa+H*d+O*h;a[11]=C*fa+F*d+S*h;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};a.rotateX=function(a,c,b){var e=Math.sin(b);b=Math.cos(b);var f=c[4],g=c[5],n=c[6],d=c[7],h=c[8],k=c[9],p=c[10],l=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=f*b+h*e;a[5]=
g*b+k*e;a[6]=n*b+p*e;a[7]=d*b+l*e;a[8]=h*b-f*e;a[9]=k*b-g*e;a[10]=p*b-n*e;a[11]=l*b-d*e;return a};a.rotateY=function(a,c,b){var e=Math.sin(b);b=Math.cos(b);var f=c[0],g=c[1],n=c[2],d=c[3],h=c[8],k=c[9],p=c[10],l=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=f*b-h*e;a[1]=g*b-k*e;a[2]=n*b-p*e;a[3]=d*b-l*e;a[8]=f*e+h*b;a[9]=g*e+k*b;a[10]=n*e+p*b;a[11]=d*e+l*b;return a};a.rotateZ=function(a,c,b){var e=Math.sin(b);b=Math.cos(b);var f=c[0],g=
c[1],n=c[2],d=c[3],h=c[4],k=c[5],p=c[6],l=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=f*b+h*e;a[1]=g*b+k*e;a[2]=n*b+p*e;a[3]=d*b+l*e;a[4]=h*b-f*e;a[5]=k*b-g*e;a[6]=p*b-n*e;a[7]=l*b-d*e;return a};a.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};a.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromRotation=function(a,c,b){var e=b[0],g=b[1];b=b[2];var d=Math.sqrt(e*e+g*g+b*b),n=void 0,h=void 0,k=void 0;if(d<f.EPSILON)return null;d=1/d;e*=d;g*=d;b*=d;n=Math.sin(c);h=Math.cos(c);k=1-h;a[0]=e*e*k+h;a[1]=g*e*k+b*n;a[2]=b*e*k-g*n;a[3]=0;a[4]=e*g*k-b*n;a[5]=g*g*k+h;a[6]=b*g*k+e*n;a[7]=0;a[8]=e*b*k+g*n;a[9]=g*b*k-e*n;a[10]=b*b*k+h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromXRotation=function(a,
c){var e=Math.sin(c);c=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=e;a[7]=0;a[8]=0;a[9]=-e;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromYRotation=function(a,c){var e=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=0;a[2]=-e;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=e;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromZRotation=function(a,c){var e=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=e;a[2]=0;a[3]=0;a[4]=-e;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=
0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromRotationTranslation=b;a.fromQuat2=function(a,c){var e=p,m=-c[0],g=-c[1],f=-c[2],d=c[3],h=c[4],k=c[5],l=c[6],D=c[7],B=m*m+g*g+f*f+d*d;0<B?(e[0]=2*(h*d+D*m+k*f-l*g)/B,e[1]=2*(k*d+D*g+l*m-h*f)/B,e[2]=2*(l*d+D*f+h*g-k*m)/B):(e[0]=2*(h*d+D*m+k*f-l*g),e[1]=2*(k*d+D*g+l*m-h*f),e[2]=2*(l*d+D*f+h*g-k*m));b(a,c,e);return a};var p=l.create();a.getTranslation=function(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a};a.getScaling=function(a,c){var e=c[0],b=c[1],
g=c[2],f=c[4],d=c[5],h=c[6],k=c[8],p=c[9];c=c[10];a[0]=Math.sqrt(e*e+b*b+g*g);a[1]=Math.sqrt(f*f+d*d+h*h);a[2]=Math.sqrt(k*k+p*p+c*c);return a};a.getRotation=function(a,c){var e=c[0]+c[5]+c[10],b=0;0<e?(b=2*Math.sqrt(e+1),a[3]=.25*b,a[0]=(c[6]-c[9])/b,a[1]=(c[8]-c[2])/b,a[2]=(c[1]-c[4])/b):c[0]>c[5]&&c[0]>c[10]?(b=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/b,a[0]=.25*b,a[1]=(c[1]+c[4])/b,a[2]=(c[8]+c[2])/b):c[5]>c[10]?(b=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=(c[8]-c[2])/b,a[0]=(c[1]+c[4])/b,a[1]=
.25*b,a[2]=(c[6]+c[9])/b):(b=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/b,a[0]=(c[8]+c[2])/b,a[1]=(c[6]+c[9])/b,a[2]=.25*b);return a};a.fromRotationTranslationScale=function(a,c,b,m){var e=c[0],g=c[1],f=c[2],d=c[3],n=e+e,h=g+g,k=f+f;c=e*n;var p=e*h,e=e*k,l=g*h,g=g*k,f=f*k,n=d*n,h=d*h,d=d*k,k=m[0],C=m[1];m=m[2];a[0]=(1-(l+f))*k;a[1]=(p+d)*k;a[2]=(e-h)*k;a[3]=0;a[4]=(p-d)*C;a[5]=(1-(c+f))*C;a[6]=(g+n)*C;a[7]=0;a[8]=(e+h)*m;a[9]=(g-n)*m;a[10]=(1-(c+l))*m;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];
a[15]=1;return a};a.fromRotationTranslationScaleOrigin=function(a,c,b,g,f){var e=c[0],m=c[1],d=c[2],n=c[3],q=e+e,h=m+m,k=d+d;c=e*q;var p=e*h,l=e*k,e=m*h,m=m*k,E=d*k,d=n*q,h=n*h,A=n*k,H=g[0],F=g[1],k=g[2];g=f[0];n=f[1];f=f[2];var q=(1-(e+E))*H,G=(p+A)*H,H=(l-h)*H,p=(p-A)*F,E=(1-(c+E))*F,F=(m+d)*F,l=(l+h)*k,m=(m-d)*k;c=(1-(c+e))*k;a[0]=q;a[1]=G;a[2]=H;a[3]=0;a[4]=p;a[5]=E;a[6]=F;a[7]=0;a[8]=l;a[9]=m;a[10]=c;a[11]=0;a[12]=b[0]+g-(q*g+p*n+l*f);a[13]=b[1]+n-(G*g+E*n+m*f);a[14]=b[2]+f-(H*g+F*n+c*f);a[15]=
1;return a};a.fromQuat=function(a,c){var e=c[0],b=c[1],g=c[2];c=c[3];var f=e+e,d=b+b,h=g+g,e=e*f,k=b*f,b=b*d,p=g*f,l=g*d,g=g*h,f=c*f,d=c*d;c*=h;a[0]=1-b-g;a[1]=k+c;a[2]=p-d;a[3]=0;a[4]=k-c;a[5]=1-e-g;a[6]=l+f;a[7]=0;a[8]=p+d;a[9]=l-f;a[10]=1-e-b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.frustum=function(a,c,b,g,f,d,h){var e=1/(b-c),m=1/(f-g),n=1/(d-h);a[0]=2*d*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*d*m;a[6]=0;a[7]=0;a[8]=(b+c)*e;a[9]=(f+g)*m;a[10]=(h+d)*n;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*
d*2*n;a[15]=0;return a};a.perspective=function(a,c,b,g,f){c=1/Math.tan(c/2);var e=void 0;a[0]=c/b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=f&&Infinity!==f?(e=1/(g-f),a[10]=(f+g)*e,a[14]=2*f*g*e):(a[10]=-1,a[14]=-2*g);return a};a.perspectiveFromFieldOfView=function(a,c,b,g){var e=Math.tan(c.upDegrees*Math.PI/180),f=Math.tan(c.downDegrees*Math.PI/180),m=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var d=2/(m+
c),n=2/(e+f);a[0]=d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=n;a[6]=0;a[7]=0;a[8]=-((m-c)*d*.5);a[9]=(e-f)*n*.5;a[10]=g/(b-g);a[11]=-1;a[12]=0;a[13]=0;a[14]=g*b/(b-g);a[15]=0;return a};a.ortho=function(a,c,b,g,f,d,h){var e=1/(c-b),m=1/(g-f),n=1/(d-h);a[0]=-2*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*m;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*n;a[11]=0;a[12]=(c+b)*e;a[13]=(f+g)*m;a[14]=(h+d)*n;a[15]=1;return a};a.lookAt=function(a,c,b,g){var e=void 0,m=void 0,d=void 0,n=void 0,k=void 0,p=void 0,l=void 0,B=void 0,w=
void 0,C=void 0,E=c[0],A=c[1];c=c[2];d=g[0];n=g[1];g=g[2];l=b[0];B=b[1];b=b[2];if(Math.abs(E-l)<f.EPSILON&&Math.abs(A-B)<f.EPSILON&&Math.abs(c-b)<f.EPSILON)return h(a);l=E-l;B=A-B;w=c-b;C=1/Math.sqrt(l*l+B*B+w*w);l*=C;B*=C;w*=C;e=n*w-g*B;m=g*l-d*w;d=d*B-n*l;(C=Math.sqrt(e*e+m*m+d*d))?(C=1/C,e*=C,m*=C,d*=C):d=m=e=0;n=B*d-w*m;k=w*e-l*d;p=l*m-B*e;(C=Math.sqrt(n*n+k*k+p*p))?(C=1/C,n*=C,k*=C,p*=C):p=k=n=0;a[0]=e;a[1]=n;a[2]=l;a[3]=0;a[4]=m;a[5]=k;a[6]=B;a[7]=0;a[8]=d;a[9]=p;a[10]=w;a[11]=0;a[12]=-(e*E+
m*A+d*c);a[13]=-(n*E+k*A+p*c);a[14]=-(l*E+B*A+w*c);a[15]=1;return a};a.targetTo=function(a,c,b,g){var e=c[0],f=c[1];c=c[2];var m=g[0],d=g[1],n=g[2];g=e-b[0];var h=f-b[1];b=c-b[2];var k=g*g+h*h+b*b;0<k&&(k=1/Math.sqrt(k),g*=k,h*=k,b*=k);var p=d*b-n*h,n=n*g-m*b,m=m*h-d*g,k=p*p+n*n+m*m;0<k&&(k=1/Math.sqrt(k),p*=k,n*=k,m*=k);a[0]=p;a[1]=n;a[2]=m;a[3]=0;a[4]=h*m-b*n;a[5]=b*p-g*m;a[6]=g*n-h*p;a[7]=0;a[8]=g;a[9]=h;a[10]=b;a[11]=0;a[12]=e;a[13]=f;a[14]=c;a[15]=1;return a};a.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};a.add=function(a,c,
b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];a[3]=c[3]+b[3];a[4]=c[4]+b[4];a[5]=c[5]+b[5];a[6]=c[6]+b[6];a[7]=c[7]+b[7];a[8]=c[8]+b[8];a[9]=c[9]+b[9];a[10]=c[10]+b[10];a[11]=c[11]+b[11];a[12]=c[12]+b[12];a[13]=c[13]+b[13];a[14]=c[14]+b[14];a[15]=c[15]+b[15];return a};a.subtract=g;a.multiplyScalar=function(a,c,b){a[0]=c[0]*b;a[1]=c[1]*b;a[2]=c[2]*b;a[3]=c[3]*b;a[4]=c[4]*b;a[5]=c[5]*b;a[6]=c[6]*b;a[7]=c[7]*b;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12]*b;a[13]=c[13]*b;a[14]=c[14]*
b;a[15]=c[15]*b;return a};a.multiplyScalarAndAdd=function(a,c,b,g){a[0]=c[0]+b[0]*g;a[1]=c[1]+b[1]*g;a[2]=c[2]+b[2]*g;a[3]=c[3]+b[3]*g;a[4]=c[4]+b[4]*g;a[5]=c[5]+b[5]*g;a[6]=c[6]+b[6]*g;a[7]=c[7]+b[7]*g;a[8]=c[8]+b[8]*g;a[9]=c[9]+b[9]*g;a[10]=c[10]+b[10]*g;a[11]=c[11]+b[11]*g;a[12]=c[12]+b[12]*g;a[13]=c[13]+b[13]*g;a[14]=c[14]+b[14]*g;a[15]=c[15]+b[15]*g;return a};a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&
a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};a.equals=function(a,c){var b=a[0],e=a[1],g=a[2],d=a[3],h=a[4],k=a[5],p=a[6],l=a[7],D=a[8],B=a[9],w=a[10],C=a[11],E=a[12],A=a[13],H=a[14];a=a[15];var F=c[0],G=c[1],N=c[2],O=c[3],S=c[4],J=c[5],X=c[6],T=c[7],Z=c[8],U=c[9],M=c[10],fa=c[11],K=c[12],ca=c[13],ba=c[14];c=c[15];return Math.abs(b-F)<=f.EPSILON*Math.max(1,Math.abs(b),Math.abs(F))&&Math.abs(e-G)<=f.EPSILON*Math.max(1,Math.abs(e),
Math.abs(G))&&Math.abs(g-N)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(d-O)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(h-S)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(k-J)<=f.EPSILON*Math.max(1,Math.abs(k),Math.abs(J))&&Math.abs(p-X)<=f.EPSILON*Math.max(1,Math.abs(p),Math.abs(X))&&Math.abs(l-T)<=f.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(D-Z)<=f.EPSILON*Math.max(1,Math.abs(D),Math.abs(Z))&&Math.abs(B-U)<=f.EPSILON*Math.max(1,Math.abs(B),Math.abs(U))&&
Math.abs(w-M)<=f.EPSILON*Math.max(1,Math.abs(w),Math.abs(M))&&Math.abs(C-fa)<=f.EPSILON*Math.max(1,Math.abs(C),Math.abs(fa))&&Math.abs(E-K)<=f.EPSILON*Math.max(1,Math.abs(E),Math.abs(K))&&Math.abs(A-ca)<=f.EPSILON*Math.max(1,Math.abs(A),Math.abs(ca))&&Math.abs(H-ba)<=f.EPSILON*Math.max(1,Math.abs(H),Math.abs(ba))&&Math.abs(a-c)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};a.mul=k;a.sub=g})},"esri/core/libs/gl-matrix-2/math/quat":function(){define("require exports ../factories/mat3f64 ../factories/quatf64 ../factories/vec3f64 ./common ./vec3 ./vec4".split(" "),
function(d,a,l,f,h,k,b,g){function p(a,c,b){b*=.5;var e=Math.sin(b);a[0]=e*c[0];a[1]=e*c[1];a[2]=e*c[2];a[3]=Math.cos(b);return a}function e(a,c,b){var e=c[0],g=c[1],f=c[2];c=c[3];var m=b[0],d=b[1],n=b[2];b=b[3];a[0]=e*b+c*m+g*n-f*d;a[1]=g*b+c*d+f*m-e*n;a[2]=f*b+c*n+e*d-g*m;a[3]=c*b-e*m-g*d-f*n;return a}function c(a,c,b,e){var g=c[0],f=c[1],m=c[2];c=c[3];var d=b[0],n=b[1],q=b[2];b=b[3];var h,t,p;t=g*d+f*n+m*q+c*b;0>t&&(t=-t,d=-d,n=-n,q=-q,b=-b);1-t>k.EPSILON?(h=Math.acos(t),p=Math.sin(h),t=Math.sin((1-
e)*h)/p,e=Math.sin(e*h)/p):t=1-e;a[0]=t*g+e*d;a[1]=t*f+e*n;a[2]=t*m+e*q;a[3]=t*c+e*b;return a}function n(a,c){var b=c[0]+c[4]+c[8];if(0<b)b=Math.sqrt(b+1),a[3]=.5*b,b=.5/b,a[0]=(c[5]-c[7])*b,a[1]=(c[6]-c[2])*b,a[2]=(c[1]-c[3])*b;else{var e=0;c[4]>c[0]&&(e=1);c[8]>c[3*e+e]&&(e=2);var g=(e+1)%3,f=(e+2)%3,b=Math.sqrt(c[3*e+e]-c[3*g+g]-c[3*f+f]+1);a[e]=.5*b;b=.5/b;a[3]=(c[3*g+f]-c[3*f+g])*b;a[g]=(c[3*g+e]+c[3*e+g])*b;a[f]=(c[3*f+e]+c[3*e+f])*b}return a}Object.defineProperty(a,"__esModule",{value:!0});
a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.setAxisAngle=p;a.getAxisAngle=function(a,c){var b=2*Math.acos(c[3]),e=Math.sin(b/2);e>k.EPSILON?(a[0]=c[0]/e,a[1]=c[1]/e,a[2]=c[2]/e):(a[0]=1,a[1]=0,a[2]=0);return b};a.multiply=e;a.rotateX=function(a,c,b){b*=.5;var e=c[0],g=c[1],f=c[2];c=c[3];var m=Math.sin(b);b=Math.cos(b);a[0]=e*b+c*m;a[1]=g*b+f*m;a[2]=f*b-g*m;a[3]=c*b-e*m;return a};a.rotateY=function(a,c,b){b*=.5;var e=c[0],g=c[1],f=c[2];c=c[3];var m=Math.sin(b);b=Math.cos(b);a[0]=
e*b-f*m;a[1]=g*b+c*m;a[2]=f*b+e*m;a[3]=c*b-g*m;return a};a.rotateZ=function(a,c,b){b*=.5;var e=c[0],g=c[1],f=c[2];c=c[3];var m=Math.sin(b);b=Math.cos(b);a[0]=e*b+g*m;a[1]=g*b-e*m;a[2]=f*b+c*m;a[3]=c*b-f*m;return a};a.calculateW=function(a,c){var b=c[0],e=c[1];c=c[2];a[0]=b;a[1]=e;a[2]=c;a[3]=Math.sqrt(Math.abs(1-b*b-e*e-c*c));return a};a.slerp=c;a.random=function(a){var c=k.RANDOM(),b=k.RANDOM(),e=k.RANDOM(),g=Math.sqrt(1-c),c=Math.sqrt(c);a[0]=g*Math.sin(2*Math.PI*b);a[1]=g*Math.cos(2*Math.PI*b);
a[2]=c*Math.sin(2*Math.PI*e);a[3]=c*Math.cos(2*Math.PI*e);return a};a.invert=function(a,c){var b=c[0],e=c[1],g=c[2];c=c[3];var f=b*b+e*e+g*g+c*c,f=f?1/f:0;a[0]=-b*f;a[1]=-e*f;a[2]=-g*f;a[3]=c*f;return a};a.conjugate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=c[3];return a};a.fromMat3=n;a.fromEuler=function(a,c,b,e){var g=.5*Math.PI/180;c*=g;b*=g;e*=g;g=Math.sin(c);c=Math.cos(c);var f=Math.sin(b);b=Math.cos(b);var m=Math.sin(e);e=Math.cos(e);a[0]=g*b*e-c*f*m;a[1]=c*f*e+g*b*m;a[2]=c*b*m-g*
f*e;a[3]=c*b*e+g*f*m;return a};a.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};a.copy=g.copy;a.set=g.set;a.add=g.add;a.mul=e;a.scale=g.scale;a.dot=g.dot;a.lerp=g.lerp;a.length=g.length;a.len=a.length;a.squaredLength=g.squaredLength;a.sqrLen=a.squaredLength;a.normalize=g.normalize;a.exactEquals=g.exactEquals;a.equals=g.equals;a.rotationTo=function(c,e,g){var f=b.dot(e,g);if(-.999999>f)return b.cross(m,q,e),1E-6>b.len(m)&&b.cross(m,y,e),b.normalize(m,m),p(c,m,Math.PI),c;if(.999999<
f)return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c;b.cross(m,e,g);c[0]=m[0];c[1]=m[1];c[2]=m[2];c[3]=1+f;return a.normalize(c,c)};var m=h.create(),q=h.fromValues(1,0,0),y=h.fromValues(0,1,0);a.sqlerp=function(a,b,e,g,f,m){c(x,b,f,m);c(t,e,g,m);c(a,x,t,2*m*(1-m));return a};var x=f.create(),t=f.create();a.setAxes=function(c,b,e,g){var f=u;f[0]=e[0];f[3]=e[1];f[6]=e[2];f[1]=g[0];f[4]=g[1];f[7]=g[2];f[2]=-b[0];f[5]=-b[1];f[8]=-b[2];return a.normalize(c,n(c,f))};var u=l.create()})},"esri/core/libs/gl-matrix-2/math/vec3":function(){define(["require",
"exports","../factories/vec3f64","./common"],function(d,a,l,f){function h(a){var c=a[0],b=a[1];a=a[2];return Math.sqrt(c*c+b*b+a*a)}function k(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a}function b(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];a[2]=c[2]-b[2];return a}function g(a,c,b){a[0]=c[0]*b[0];a[1]=c[1]*b[1];a[2]=c[2]*b[2];return a}function p(a,c,b){a[0]=c[0]/b[0];a[1]=c[1]/b[1];a[2]=c[2]/b[2];return a}function e(a,c){var b=c[0]-a[0],e=c[1]-a[1];a=c[2]-a[2];return Math.sqrt(b*b+e*e+a*a)}function c(a,
c){var b=c[0]-a[0],e=c[1]-a[1];a=c[2]-a[2];return b*b+e*e+a*a}function n(a){var c=a[0],b=a[1];a=a[2];return c*c+b*b+a*a}function m(a,c){var b=c[0],e=c[1],g=c[2],b=b*b+e*e+g*g;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b);return a}function q(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]}Object.defineProperty(a,"__esModule",{value:!0});a.length=h;a.copy=k;a.set=function(a,c,b,e){a[0]=c;a[1]=b;a[2]=e;return a};a.add=function(a,c,b){a[0]=c[0]+b[0];a[1]=c[1]+b[1];a[2]=c[2]+b[2];return a};a.subtract=
b;a.multiply=g;a.divide=p;a.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);a[2]=Math.ceil(c[2]);return a};a.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);a[2]=Math.floor(c[2]);return a};a.min=function(a,c,b){a[0]=Math.min(c[0],b[0]);a[1]=Math.min(c[1],b[1]);a[2]=Math.min(c[2],b[2]);return a};a.max=function(a,c,b){a[0]=Math.max(c[0],b[0]);a[1]=Math.max(c[1],b[1]);a[2]=Math.max(c[2],b[2]);return a};a.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);a[2]=
Math.round(c[2]);return a};a.scale=function(a,c,b){a[0]=c[0]*b;a[1]=c[1]*b;a[2]=c[2]*b;return a};a.scaleAndAdd=function(a,c,b,e){a[0]=c[0]+b[0]*e;a[1]=c[1]+b[1]*e;a[2]=c[2]+b[2]*e;return a};a.distance=e;a.squaredDistance=c;a.squaredLength=n;a.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];return a};a.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];return a};a.normalize=m;a.dot=q;a.cross=function(a,c,b){var e=c[0],g=c[1];c=c[2];var f=b[0],m=b[1];b=b[2];a[0]=g*b-c*m;a[1]=c*f-e*b;a[2]=
e*m-g*f;return a};a.lerp=function(a,c,b,e){var g=c[0],f=c[1];c=c[2];a[0]=g+e*(b[0]-g);a[1]=f+e*(b[1]-f);a[2]=c+e*(b[2]-c);return a};a.hermite=function(a,c,b,e,g,f){var m=f*f,d=m*(2*f-3)+1,n=m*(f-2)+f,q=m*(f-1);f=m*(3-2*f);a[0]=c[0]*d+b[0]*n+e[0]*q+g[0]*f;a[1]=c[1]*d+b[1]*n+e[1]*q+g[1]*f;a[2]=c[2]*d+b[2]*n+e[2]*q+g[2]*f;return a};a.bezier=function(a,c,b,e,g,f){var m=1-f,d=m*m,n=f*f,q=d*m,d=3*f*d,m=3*n*m;f*=n;a[0]=c[0]*q+b[0]*d+e[0]*m+g[0]*f;a[1]=c[1]*q+b[1]*d+e[1]*m+g[1]*f;a[2]=c[2]*q+b[2]*d+e[2]*
m+g[2]*f;return a};a.random=function(a,c){c=c||1;var b=2*f.RANDOM()*Math.PI,e=2*f.RANDOM()-1,g=Math.sqrt(1-e*e)*c;a[0]=Math.cos(b)*g;a[1]=Math.sin(b)*g;a[2]=e*c;return a};a.transformMat4=function(a,c,b){var e=c[0],g=c[1];c=c[2];a[0]=b[0]*e+b[4]*g+b[8]*c+b[12];a[1]=b[1]*e+b[5]*g+b[9]*c+b[13];a[2]=b[2]*e+b[6]*g+b[10]*c+b[14];return a};a.transformMat3=function(a,c,b){var e=c[0],g=c[1];c=c[2];a[0]=e*b[0]+g*b[3]+c*b[6];a[1]=e*b[1]+g*b[4]+c*b[7];a[2]=e*b[2]+g*b[5]+c*b[8];return a};a.transformQuat=function(a,
c,b){var e=b[0],g=b[1],f=b[2],m=c[0],d=c[1];c=c[2];var n=g*c-f*d,q=f*m-e*c,h=e*d-g*m;b=2*b[3];a[0]=m+n*b+2*(g*h-f*q);a[1]=d+q*b+2*(f*n-e*h);a[2]=c+h*b+2*(e*q-g*n);return a};a.rotateX=function(a,c,b,e){var g=[],f=[];g[0]=c[0]-b[0];g[1]=c[1]-b[1];g[2]=c[2]-b[2];f[0]=g[0];f[1]=g[1]*Math.cos(e)-g[2]*Math.sin(e);f[2]=g[1]*Math.sin(e)+g[2]*Math.cos(e);a[0]=f[0]+b[0];a[1]=f[1]+b[1];a[2]=f[2]+b[2];return a};a.rotateY=function(a,c,b,e){var g=[],f=[];g[0]=c[0]-b[0];g[1]=c[1]-b[1];g[2]=c[2]-b[2];f[0]=g[2]*Math.sin(e)+
g[0]*Math.cos(e);f[1]=g[1];f[2]=g[2]*Math.cos(e)-g[0]*Math.sin(e);a[0]=f[0]+b[0];a[1]=f[1]+b[1];a[2]=f[2]+b[2];return a};a.rotateZ=function(a,c,b,e){var g=[],f=[];g[0]=c[0]-b[0];g[1]=c[1]-b[1];g[2]=c[2]-b[2];f[0]=g[0]*Math.cos(e)-g[1]*Math.sin(e);f[1]=g[0]*Math.sin(e)+g[1]*Math.cos(e);f[2]=g[2];a[0]=f[0]+b[0];a[1]=f[1]+b[1];a[2]=f[2]+b[2];return a};a.angle=function(a,c){k(y,a);k(x,c);m(y,y);m(x,x);a=q(y,x);return 1<a?0:-1>a?Math.PI:Math.acos(a)};var y=l.create(),x=l.create();a.str=function(a){return"vec3("+
a[0]+", "+a[1]+", "+a[2]+")"};a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]};a.equals=function(a,c){var b=a[0],e=a[1];a=a[2];var g=c[0],m=c[1];c=c[2];return Math.abs(b-g)<=f.EPSILON*Math.max(1,Math.abs(b),Math.abs(g))&&Math.abs(e-m)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(a-c)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};a.sub=b;a.mul=g;a.div=p;a.dist=e;a.sqrDist=c;a.len=h;a.sqrLen=n})},"esri/core/libs/gl-matrix-2/math/vec4":function(){define(["require",
"exports","./common"],function(d,a,l){function f(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];a[2]=b[2]-e[2];a[3]=b[3]-e[3];return a}function h(a,b,e){a[0]=b[0]*e[0];a[1]=b[1]*e[1];a[2]=b[2]*e[2];a[3]=b[3]*e[3];return a}function k(a,b,e){a[0]=b[0]/e[0];a[1]=b[1]/e[1];a[2]=b[2]/e[2];a[3]=b[3]/e[3];return a}function b(a,b){var c=b[0]-a[0],e=b[1]-a[1],g=b[2]-a[2];a=b[3]-a[3];return Math.sqrt(c*c+e*e+g*g+a*a)}function g(a,b){var c=b[0]-a[0],e=b[1]-a[1],g=b[2]-a[2];a=b[3]-a[3];return c*c+e*e+g*g+a*a}function p(a){var c=
a[0],b=a[1],e=a[2];a=a[3];return Math.sqrt(c*c+b*b+e*e+a*a)}function e(a){var c=a[0],b=a[1],e=a[2];a=a[3];return c*c+b*b+e*e+a*a}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};a.set=function(a,b,e,g,f){a[0]=b;a[1]=e;a[2]=g;a[3]=f;return a};a.add=function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];a[2]=b[2]+e[2];a[3]=b[3]+e[3];return a};a.subtract=f;a.multiply=h;a.divide=k;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);
a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};a.min=function(a,b,e){a[0]=Math.min(b[0],e[0]);a[1]=Math.min(b[1],e[1]);a[2]=Math.min(b[2],e[2]);a[3]=Math.min(b[3],e[3]);return a};a.max=function(a,b,e){a[0]=Math.max(b[0],e[0]);a[1]=Math.max(b[1],e[1]);a[2]=Math.max(b[2],e[2]);a[3]=Math.max(b[3],e[3]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);
a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};a.scale=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;return a};a.scaleAndAdd=function(a,b,e,g){a[0]=b[0]+e[0]*g;a[1]=b[1]+e[1]*g;a[2]=b[2]+e[2]*g;a[3]=b[3]+e[3]*g;return a};a.distance=b;a.squaredDistance=g;a.length=p;a.squaredLength=e;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};a.normalize=function(a,b){var c=b[0],
e=b[1],g=b[2];b=b[3];var f=c*c+e*e+g*g+b*b;0<f&&(f=1/Math.sqrt(f),a[0]=c*f,a[1]=e*f,a[2]=g*f,a[3]=b*f);return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};a.lerp=function(a,b,e,g){var c=b[0],f=b[1],m=b[2];b=b[3];a[0]=c+g*(e[0]-c);a[1]=f+g*(e[1]-f);a[2]=m+g*(e[2]-m);a[3]=b+g*(e[3]-b);return a};a.random=function(a,b){b=b||1;var c,e,g,f,d,n;do c=2*l.RANDOM()-1,e=2*l.RANDOM()-1,d=c*c+e*e;while(1<=d);do g=2*l.RANDOM()-1,f=2*l.RANDOM()-1,n=g*g+f*f;while(1<=n);d=Math.sqrt((1-d)/
n);a[0]=b*c;a[1]=b*e;a[2]=b*g*d;a[3]=b*f*d;return a};a.transformMat4=function(a,b,e){var c=b[0],g=b[1],f=b[2];b=b[3];a[0]=e[0]*c+e[4]*g+e[8]*f+e[12]*b;a[1]=e[1]*c+e[5]*g+e[9]*f+e[13]*b;a[2]=e[2]*c+e[6]*g+e[10]*f+e[14]*b;a[3]=e[3]*c+e[7]*g+e[11]*f+e[15]*b;return a};a.transformQuat=function(a,b,e){var c=b[0],g=b[1],f=b[2],d=e[0],m=e[1],n=e[2];e=e[3];var h=e*c+m*f-n*g,k=e*g+n*c-d*f,p=e*f+d*g-m*c,c=-d*c-m*g-n*f;a[0]=h*e+c*-d+k*-n-p*-m;a[1]=k*e+c*-m+p*-d-h*-n;a[2]=p*e+c*-n+h*-m-k*-d;a[3]=b[3];return a};
a.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};a.equals=function(a,b){var c=a[0],e=a[1],g=a[2];a=a[3];var f=b[0],d=b[1],n=b[2];b=b[3];return Math.abs(c-f)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(e-d)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(d))&&Math.abs(g-n)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(n))&&Math.abs(a-b)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};
a.sub=f;a.mul=h;a.div=k;a.dist=b;a.sqrDist=g;a.len=p;a.sqrLen=e})},"esri/core/libs/gl-matrix-2/math/quat2":function(){define("require exports ../factories/quatf64 ../factories/vec3f64 ./common ./mat4 ./quat".split(" "),function(d,a,l,f,h,k,b){function g(a,b,c){var e=.5*c[0],g=.5*c[1];c=.5*c[2];var f=b[0],d=b[1],m=b[2];b=b[3];a[0]=f;a[1]=d;a[2]=m;a[3]=b;a[4]=e*b+g*m-c*d;a[5]=g*b+c*f-e*m;a[6]=c*b+e*d-g*f;a[7]=-e*f-g*d-c*m;return a}function p(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=
b[5];a[6]=b[6];a[7]=b[7];return a}function e(a,b,c){var e=b[0],g=b[1],f=b[2],d=b[3],m=c[4],n=c[5],q=c[6],h=c[7],k=b[4],p=b[5],y=b[6];b=b[7];var l=c[0],G=c[1],N=c[2];c=c[3];a[0]=e*c+d*l+g*N-f*G;a[1]=g*c+d*G+f*l-e*N;a[2]=f*c+d*N+e*G-g*l;a[3]=d*c-e*l-g*G-f*N;a[4]=e*h+d*m+g*q-f*n+k*c+b*l+p*N-y*G;a[5]=g*h+d*n+f*m-e*q+p*c+b*G+y*l-k*N;a[6]=f*h+d*q+e*n-g*m+y*c+b*N+k*G-p*l;a[7]=d*h-e*m-g*n-f*q+b*c-k*l-p*G-y*N;return a}Object.defineProperty(a,"__esModule",{value:!0});a.fromRotationTranslation=g;a.fromTranslation=
function(a,b){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=.5*b[0];a[5]=.5*b[1];a[6]=.5*b[2];a[7]=0;return a};a.fromRotation=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=0;a[5]=0;a[6]=0;a[7]=0;return a};a.fromMat4=function(a,b){var e=c;k.getRotation(e,b);var f=n;k.getTranslation(f,b);g(a,e,f);return a};var c=l.create(),n=f.create();a.copy=p;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;a[6]=0;a[7]=0;return a};a.set=function(a,b,c,e,g,f,d,n,h){a[0]=b;a[1]=c;a[2]=e;a[3]=g;a[4]=
f;a[5]=d;a[6]=n;a[7]=h;return a};a.getReal=b.copy;a.getDual=function(a,b){a[0]=b[4];a[1]=b[5];a[2]=b[6];a[3]=b[7];return a};a.setReal=b.copy;a.setDual=function(a,b){a[4]=b[0];a[5]=b[1];a[6]=b[2];a[7]=b[3];return a};a.getTranslation=function(a,b){var c=b[4],e=b[5],g=b[6],f=b[7],d=-b[0],m=-b[1],n=-b[2];b=b[3];a[0]=2*(c*b+f*d+e*n-g*m);a[1]=2*(e*b+f*m+g*d-c*n);a[2]=2*(g*b+f*n+c*m-e*d);return a};a.translate=function(a,b,c){var e=b[0],g=b[1],f=b[2],d=b[3],m=.5*c[0],n=.5*c[1];c=.5*c[2];var q=b[4],h=b[5],
k=b[6];b=b[7];a[0]=e;a[1]=g;a[2]=f;a[3]=d;a[4]=d*m+g*c-f*n+q;a[5]=d*n+f*m-e*c+h;a[6]=d*c+e*n-g*m+k;a[7]=-e*m-g*n-f*c+b;return a};a.rotateX=function(a,c,e){var g=-c[0],f=-c[1],d=-c[2],m=c[3],n=c[4],q=c[5],h=c[6],k=c[7],p=n*m+k*g+q*d-h*f,y=q*m+k*f+h*g-n*d,l=h*m+k*d+n*f-q*g,n=k*m-n*g-q*f-h*d;b.rotateX(a,c,e);g=a[0];f=a[1];d=a[2];m=a[3];a[4]=p*m+n*g+y*d-l*f;a[5]=y*m+n*f+l*g-p*d;a[6]=l*m+n*d+p*f-y*g;a[7]=n*m-p*g-y*f-l*d;return a};a.rotateY=function(a,c,e){var g=-c[0],f=-c[1],d=-c[2],m=c[3],n=c[4],q=c[5],
h=c[6],k=c[7],p=n*m+k*g+q*d-h*f,y=q*m+k*f+h*g-n*d,l=h*m+k*d+n*f-q*g,n=k*m-n*g-q*f-h*d;b.rotateY(a,c,e);g=a[0];f=a[1];d=a[2];m=a[3];a[4]=p*m+n*g+y*d-l*f;a[5]=y*m+n*f+l*g-p*d;a[6]=l*m+n*d+p*f-y*g;a[7]=n*m-p*g-y*f-l*d;return a};a.rotateZ=function(a,c,e){var g=-c[0],f=-c[1],d=-c[2],m=c[3],n=c[4],q=c[5],h=c[6],k=c[7],p=n*m+k*g+q*d-h*f,y=q*m+k*f+h*g-n*d,l=h*m+k*d+n*f-q*g,n=k*m-n*g-q*f-h*d;b.rotateZ(a,c,e);g=a[0];f=a[1];d=a[2];m=a[3];a[4]=p*m+n*g+y*d-l*f;a[5]=y*m+n*f+l*g-p*d;a[6]=l*m+n*d+p*f-y*g;a[7]=n*
m-p*g-y*f-l*d;return a};a.rotateByQuatAppend=function(a,b,c){var e=c[0],g=c[1],f=c[2];c=c[3];var d=b[0],m=b[1],n=b[2],q=b[3];a[0]=d*c+q*e+m*f-n*g;a[1]=m*c+q*g+n*e-d*f;a[2]=n*c+q*f+d*g-m*e;a[3]=q*c-d*e-m*g-n*f;d=b[4];m=b[5];n=b[6];q=b[7];a[4]=d*c+q*e+m*f-n*g;a[5]=m*c+q*g+n*e-d*f;a[6]=n*c+q*f+d*g-m*e;a[7]=q*c-d*e-m*g-n*f;return a};a.rotateByQuatPrepend=function(a,b,c){var e=b[0],g=b[1],f=b[2];b=b[3];var d=c[0],m=c[1],n=c[2],q=c[3];a[0]=e*q+b*d+g*n-f*m;a[1]=g*q+b*m+f*d-e*n;a[2]=f*q+b*n+e*m-g*d;a[3]=
b*q-e*d-g*m-f*n;d=c[4];m=c[5];n=c[6];q=c[7];a[4]=e*q+b*d+g*n-f*m;a[5]=g*q+b*m+f*d-e*n;a[6]=f*q+b*n+e*m-g*d;a[7]=b*q-e*d-g*m-f*n;return a};a.rotateAroundAxis=function(a,b,c,e){if(Math.abs(e)<h.EPSILON)return p(a,b);var g=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);e*=.5;var f=Math.sin(e),d=f*c[0]/g,m=f*c[1]/g;c=f*c[2]/g;e=Math.cos(e);var g=b[0],f=b[1],n=b[2],q=b[3];a[0]=g*e+q*d+f*c-n*m;a[1]=f*e+q*m+n*d-g*c;a[2]=n*e+q*c+g*m-f*d;a[3]=q*e-g*d-f*m-n*c;g=b[4];f=b[5];n=b[6];b=b[7];a[4]=g*e+b*d+f*c-n*m;a[5]=
f*e+b*m+n*d-g*c;a[6]=n*e+b*c+g*m-f*d;a[7]=b*e-g*d-f*m-n*c;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];return a};a.multiply=e;a.mul=e;a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;return a};a.dot=b.dot;a.lerp=function(b,c,e,g){var f=1-g;0>a.dot(c,e)&&(g=-g);b[0]=c[0]*f+e[0]*g;b[1]=c[1]*f+e[1]*g;b[2]=c[2]*f+e[2]*g;b[3]=
c[3]*f+e[3]*g;b[4]=c[4]*f+e[4]*g;b[5]=c[5]*f+e[5]*g;b[6]=c[6]*f+e[6]*g;b[7]=c[7]*f+e[7]*g;return b};a.invert=function(b,c){var e=a.squaredLength(c);b[0]=-c[0]/e;b[1]=-c[1]/e;b[2]=-c[2]/e;b[3]=c[3]/e;b[4]=-c[4]/e;b[5]=-c[5]/e;b[6]=-c[6]/e;b[7]=c[7]/e;return b};a.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];a[4]=-b[4];a[5]=-b[5];a[6]=-b[6];a[7]=b[7];return a};a.length=b.length;a.len=a.length;a.squaredLength=b.squaredLength;a.sqrLen=a.squaredLength;a.normalize=function(b,c){var e=
a.squaredLength(c);if(0<e){var e=Math.sqrt(e),g=c[0]/e,f=c[1]/e,d=c[2]/e,m=c[3]/e,n=c[4],q=c[5],h=c[6];c=c[7];var k=g*n+f*q+d*h+m*c;b[0]=g;b[1]=f;b[2]=d;b[3]=m;b[4]=(n-g*k)/e;b[5]=(q-f*k)/e;b[6]=(h-d*k)/e;b[7]=(c-m*k)/e}return b};a.str=function(a){return"quat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]};a.equals=function(a,
b){var c=a[0],e=a[1],g=a[2],f=a[3],d=a[4],m=a[5],n=a[6];a=a[7];var q=b[0],k=b[1],p=b[2],l=b[3],H=b[4],F=b[5],G=b[6];b=b[7];return Math.abs(c-q)<=h.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(e-k)<=h.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(g-p)<=h.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(f-l)<=h.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(d-H)<=h.EPSILON*Math.max(1,Math.abs(d),Math.abs(H))&&Math.abs(m-F)<=h.EPSILON*Math.max(1,Math.abs(m),Math.abs(F))&&
Math.abs(n-G)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(G))&&Math.abs(a-b)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(d,a,l){function f(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];return a}function h(a,b,e){a[0]=b[0]*e[0];a[1]=b[1]*e[1];return a}function k(a,b,e){a[0]=b[0]/e[0];a[1]=b[1]/e[1];return a}function b(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)}function g(a,b){var c=b[0]-
a[0];a=b[1]-a[1];return c*c+a*a}function p(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function e(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};a.set=function(a,b,e){a[0]=b;a[1]=e;return a};a.add=function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];return a};a.subtract=f;a.multiply=h;a.divide=k;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=
Math.floor(b[1]);return a};a.min=function(a,b,e){a[0]=Math.min(b[0],e[0]);a[1]=Math.min(b[1],e[1]);return a};a.max=function(a,b,e){a[0]=Math.max(b[0],e[0]);a[1]=Math.max(b[1],e[1]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};a.scale=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;return a};a.scaleAndAdd=function(a,b,e,g){a[0]=b[0]+e[0]*g;a[1]=b[1]+e[1]*g;return a};a.distance=b;a.squaredDistance=g;a.length=p;a.squaredLength=e;a.negate=function(a,b){a[0]=-b[0];a[1]=
-b[1];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};a.normalize=function(a,b){var c=b[0],e=b[1],c=c*c+e*e;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};a.cross=function(a,b,e){b=b[0]*e[1]-b[1]*e[0];a[0]=a[1]=0;a[2]=b;return a};a.lerp=function(a,b,e,g){var c=b[0];b=b[1];a[0]=c+g*(e[0]-c);a[1]=b+g*(e[1]-b);return a};a.random=function(a,b){b=b||1;var c=2*l.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};
a.transformMat2=function(a,b,e){var c=b[0];b=b[1];a[0]=e[0]*c+e[2]*b;a[1]=e[1]*c+e[3]*b;return a};a.transformMat2d=function(a,b,e){var c=b[0];b=b[1];a[0]=e[0]*c+e[2]*b+e[4];a[1]=e[1]*c+e[3]*b+e[5];return a};a.transformMat3=function(a,b,e){var c=b[0];b=b[1];a[0]=e[0]*c+e[3]*b+e[6];a[1]=e[1]*c+e[4]*b+e[7];return a};a.transformMat4=function(a,b,e){var c=b[0];b=b[1];a[0]=e[0]*c+e[4]*b+e[12];a[1]=e[1]*c+e[5]*b+e[13];return a};a.rotate=function(a,b,e,g){var c=b[0]-e[0];b=b[1]-e[1];var f=Math.sin(g);g=Math.cos(g);
a[0]=c*g-b*f+e[0];a[1]=c*f+b*g+e[1];return a};a.angle=function(a,b){var c=a[0];a=a[1];var e=b[0];b=b[1];var g=c*c+a*a;0<g&&(g=1/Math.sqrt(g));var f=e*e+b*b;0<f&&(f=1/Math.sqrt(f));c=(c*e+a*b)*g*f;return 1<c?0:-1>c?Math.PI:Math.acos(c)};a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};a.equals=function(a,b){var c=a[0];a=a[1];var e=b[0];b=b[1];return Math.abs(c-e)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(a-b)<=l.EPSILON*
Math.max(1,Math.abs(a),Math.abs(b))};a.len=p;a.sub=f;a.mul=h;a.div=k;a.dist=b;a.sqrDist=g;a.sqrLen=e})},"esri/geometry/support/MeshComponent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ./MeshMaterial ./MeshVertexAttributes".split(" "),function(d,a,l,f,h,k,b,g,p,e){var c=b.getLogger("esri.geometry.support.MeshComponent");return function(a){function b(b){b=
a.call(this)||this;b.faces=null;b.material=null;b.shading="source";return b}l(b,a);d=b;b.prototype.castFaces=function(a){return e.castArray(a,Uint32Array,[Uint16Array],{loggerTag:".faces\x3d",stride:3},c)};b.prototype.clone=function(){return new d({faces:k.clone(this.faces),shading:this.shading,material:k.clone(this.material)})};var d;f([g.property({json:{write:!0}})],b.prototype,"faces",void 0);f([g.cast("faces")],b.prototype,"castFaces",null);f([g.property({type:p.MeshMaterial,json:{write:!0}})],
b.prototype,"material",void 0);f([g.property({type:String,json:{write:!0}})],b.prototype,"shading",void 0);return b=d=f([g.subclass("esri.geometry.support.MeshComponent")],b)}(g.declared(h))})},"esri/geometry/support/MeshMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ImageMeshColor ./MeshColor ./ValueMeshColor".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n){Object.defineProperty(a,"__esModule",{value:!0});var m={base:c.default,key:"type",defaultKeyValue:"value",typeMap:{value:n,image:e}};d=function(a){function c(b){b=a.call(this)||this;b.color=null;return b}l(c,a);d=c;c.prototype.castColor=function(a){return a?"string"===typeof a?q.test(a)||h.named[a]?new n({value:a}):new e({url:a}):Array.isArray(a)?new n({value:a}):a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof ImageData?new e({data:a}):
p.ensureOneOfType(m,a):a};c.prototype.readColor=function(a,b,c){if(a)switch(a.type){case "image":return new e(a);case "value":return new n(a)}};c.prototype.clone=function(){return new d({color:b.clone(this.color)})};var d;f([g.property({types:m,json:{write:!0}})],c.prototype,"color",void 0);f([g.cast("color")],c.prototype,"castColor",null);f([g.reader("color")],c.prototype,"readColor",null);return c=d=f([g.subclass("esri.geometry.support.MeshResources")],c)}(g.declared(k));a.MeshMaterial=d;var q=
/^\s*(#|rgba?\()/;a.default=d})},"esri/geometry/support/ImageMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/compilerUtils ../../core/Identifiable ../../core/urlUtils ../../core/accessorSupport/decorators ./MeshColor ../../views/support/screenshotUtils".split(" "),function(d,a,l,f,h,k,b,g,p,e){return function(a){function c(b){b=a.call(this)||this;b.type="image";return b}l(c,a);d=c;Object.defineProperty(c.prototype,
"url",{get:function(){return this._get("url")||null},set:function(a){this._set("url",a);a&&this._set("data",null)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"data",{get:function(){return this._get("data")||null},set:function(a){this._set("data",a);a&&this._set("url",null)},enumerable:!0,configurable:!0});c.prototype.writeData=function(a,c,e,g){a instanceof HTMLImageElement?a={type:"image-element",src:b.toJSON(a.src,g)}:a instanceof HTMLCanvasElement?(a=a.getContext("2d").getImageData(0,
0,a.width,a.height),a={type:"canvas-element",imageData:this.encodeImageData(a)}):a={type:"image-data",imageData:this.encodeImageData(a)};c[e]=a};c.prototype.readData=function(a,b){switch(a.type){case "image-element":return b=new Image,b.src=a.src,b;case "canvas-element":return a=this.decodeImageData(a.imageData),b=document.createElement("canvas"),b.width=a.width,b.height=a.height,b.getContext("2d").putImageData(a,0,0),b;case "image-data":return this.decodeImageData(a.imageData);default:h.neverReached(a)}};
Object.defineProperty(c.prototype,"transparent",{get:function(){var a=this.data;return a instanceof HTMLCanvasElement?this.imageDataContainsTransparent(a.getContext("2d").getImageData(0,0,a.width,a.height)):a instanceof ImageData?this.imageDataContainsTransparent(a):!1},set:function(a){null!=a?this._override("transparent",a):this._clearOverride("transparent")},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new d({url:this.url,data:this.data})};c.prototype.encodeImageData=function(a){for(var b=
"",c=0;c<a.data.length;c++)b+=String.fromCharCode(a.data[c]);return{data:btoa(b),width:a.width,height:a.height}};c.prototype.decodeImageData=function(a){for(var b=atob(a.data),c=new Uint8ClampedArray(b.length),g=0;g<b.length;g++)c[g]=b.charCodeAt(g);return e.wrapImageData(c,a.width,a.height)};c.prototype.imageDataContainsTransparent=function(a){for(var b=3;b<a.data.length;b+=4)if(255!==a.data[b])return!0;return!1};var d;f([g.property()],c.prototype,"type",void 0);f([g.property({type:String,json:{write:b.write}})],
c.prototype,"url",null);f([g.property({json:{write:{overridePolicy:function(){return{enabled:!this.url}}}}}),g.property()],c.prototype,"data",null);f([g.writer("data")],c.prototype,"writeData",null);f([g.reader("data")],c.prototype,"readData",null);f([g.property({type:Boolean,dependsOn:["data"],json:{write:{overridePolicy:function(){return{enabled:this._isOverridden("transparent")}}}}})],c.prototype,"transparent",null);return c=d=f([g.subclass("esri.geometry.support.ImageMeshColor")],c)}(g.declared(p.default,
k.Identifiable))})},"esri/core/compilerUtils":function(){define(["require","exports","./has"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.neverReached=function(a){};a.isSome=function(a){return null!=a};a.isNone=function(a){return null==a}})},"esri/core/Identifiable":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=0;d=function(){return function(){Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+
"-object-"+l++})}}();a.Identifiable=d})},"esri/geometry/support/MeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(b){return a.call(this)||this}l(b,a);b.prototype.clone=function(){throw Error("not implemented");};f([k.property({readOnly:!0,json:{read:!1,write:{isRequired:!0,
ignoreOrigin:!0,enabled:!0}}})],b.prototype,"type",void 0);return b=f([k.subclass("esri.geometry.support.MeshColor")],b)}(k.declared(h));a.MeshColor=d;a.default=d})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils"],function(d,a,l,f){function h(a,b){var c=a||{},e=c.format,d=c.quality,h=c.rotation,c=c.disableSlice,k=b.padding||q,p;p=b.width-k.left-k.right;b=b.height-k.top-k.bottom;var l=0,k=0,y=p,x=b;if(a&&a.area){var l=
Math.floor(a.area.x)||0,k=Math.floor(a.area.y)||0,H=null!=a.area.width?Math.floor(a.area.width):null,F=null!=a.area.height?Math.floor(a.area.height):null,y=y-l,x=x-k;null!=H&&null!=F?(y=Math.min(y,H),x=Math.min(x,F)):null==H&&null!=F?(H=Math.min(y,H),x*=H/y,y=H):null!=H&&null==F&&(H=Math.min(x,F),y*=H/x,x=H)}a&&null!=a.width&&null!=a.height&&(H=a.width/a.height,F=y/x,F!==H&&(F<H?y=Math.floor(x*H):x=Math.floor(y/H)));l=Math.floor(Math.max(l,0));k=Math.floor(Math.max(k,0));p={x:l,y:k,width:Math.floor(Math.min(y,
p-l)),height:Math.floor(Math.min(x,b-k))};b=p.width/p.height;k=y/x;k!==b&&(k>b?(b=Math.floor(p.width/k),p={x:p.x,y:Math.floor(p.y+(p.height-b)/2),width:p.width,height:b}):(b=Math.floor(p.height*k),p={x:Math.floor(p.x+(p.width-b)/2),y:p.y,width:b,height:p.height}));b=g(a,p);a=b.width;b=b.height;a:switch(e){case "png":case "jpg":case "jpeg":break a;case null:case void 0:e=n;break a;default:f.neverReached(e),e=n}k=m[e];d=null!=d?d:k;return{format:e,quality:0>d?0:100<d?100:d,area:p,width:a,height:b,rotation:h,
disableSlice:c||!1}}function k(a,b){return a.toDataURL(c[b.format],b.quality/100)}function b(a,b,c){c||(p||(p=document.createElement("canvas"),p.width=1,p.height=1),c=p);return c.getContext("2d").createImageData(a,b)}function g(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}Object.defineProperty(a,
"__esModule",{value:!0});a.completeUserSettings=h;a.toRenderSettings=function(a,b){var c=h(a,b),e=c.area,g=c.width/e.width,f=b.padding,d=f.left+f.right,m=f.top+f.bottom;return{framebufferWidth:Math.floor((b.width-d)*g+d),framebufferHeight:Math.floor((b.height-m)*g+m),region:{x:Math.floor(e.x*g)+f.left,y:Math.floor(e.y*g)+f.top,width:c.width,height:c.height},format:c.format,quality:c.quality,rotation:c.rotation,pixelRatio:g,layers:a&&a.layers?a.layers:[],disableSlice:c.disableSlice}};a.encodeResult=
function(a,b,c,e){if(e.premultipliedAlpha)for(var g=a.data,f=g.length,d=0;d<f;d+=4){var m=g[d+3];0<m&&(m/=255,g[d+0]/=m,g[d+1]/=m,g[d+2]/=m)}c.width=a.width;c.height=a.height;g=c.getContext("2d");g.putImageData(a,0,0);e.flipY&&(g.save(),g.globalCompositeOperation="copy",g.scale(1,-1),g.translate(0,-g.canvas.height),g.drawImage(g.canvas,0,0),g.restore());a=g.getImageData(0,0,a.width,a.height);b=k(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};a.toDataUrl=k;a.createEmptyImageData=function(a,c,
g){if(!a||!c)throw Error("Cannot construct image data without dimensions");if(e)try{return new ImageData(a,c)}catch(u){e=!1}return b(a,c,g)};a.wrapImageData=function(a,c,g,f){if(!c||!g)throw Error("Cannot construct image data without dimensions");if(e)try{return new ImageData(a,c,g)}catch(z){e=!1}c=b(c,g,f);c.data.set(a,0);return c};a.resampleHermite=function(a,b,c,e,g,f,d,m){void 0===e&&(e=0);void 0===g&&(g=0);void 0===f&&(f=a.width-e);void 0===d&&(d=a.height-g);void 0===m&&(m=!1);var n=a.data,h=
b.width,q=b.height,k=b.data;f/=h;d/=q;var p=Math.ceil(f/2),t=Math.ceil(d/2);a=a.width;for(var l=0;l<q;l++)for(var y=0;y<h;y++){for(var u=4*(y+(m?q-l-1:l)*h),x=0,z=0,D=0,w=0,B=0,M=0,fa=(l+.5)*d,K=Math.floor(l*d);K<(l+1)*d;K++)for(var ca=Math.abs(fa-(K+.5))/t,ba=(y+.5)*f,ca=ca*ca,ma=Math.floor(y*f);ma<(y+1)*f;ma++){var da=Math.abs(ba-(ma+.5))/p,da=Math.sqrt(ca+da*da);if(!(1<=da)){var da=2*da*da*da-3*da*da+1,ga=4*(e+ma+(g+K)*a),M=M+da*n[ga+3],z=z+da;!c&&255>n[ga+3]&&(da=da*n[ga+3]/255);D+=da*n[ga];w+=
da*n[ga+1];B+=da*n[ga+2];x+=da}}k[u]=D/x;k[u+1]=w/x;k[u+2]=B/x;k[u+3]=M/z}return b};a.screenshotSuperSampleSettings=function(a,b){if(!b)return a;b=a.framebufferWidth;var c=a.framebufferHeight,e=a.region,g=Math.min(8,2048/Math.max(b,c));return 1.5>g?a:l({},a,{framebufferWidth:Math.round(b*g),framebufferHeight:Math.round(c*g),pixelRatio:a.pixelRatio*g,resample:{region:{x:Math.round(e.x*g),y:Math.round(e.y*g),width:Math.round(e.width*g),height:Math.round(e.height*g)},width:b,height:c}})};var p=null,
e=!0,c={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},n="jpg",m={png:100,jpg:98,jpeg:98},q={top:0,right:0,bottom:0,left:0}})},"esri/geometry/support/ValueMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/accessorSupport/decorators ./MeshColor".split(" "),function(d,a,l,f,h,k,b,g){return function(a){function e(b){b=a.call(this)||this;b.type="value";b.value=null;return b}l(e,a);c=e;
e.prototype.clone=function(){return new c({value:k.clone(this.value)})};var c;f([b.property()],e.prototype,"type",void 0);f([b.property({type:h})],e.prototype,"value",void 0);return e=c=f([b.subclass("esri.geometry.support.ValueMeshColor")],e)}(b.declared(g.default))})},"esri/geometry/support/MeshVertexAttributes":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k,b,g){function p(a,b,c,e){var g=b.loggerTag;b=b.stride;return 0!==a.length%b?(e.error(g,"Invalid array length, expected a multiple of "+b),new c([])):a}function e(a,b,c,e,g){if(!a)return a;if(a instanceof b)return p(a,e,b,g);for(var f=0;f<c.length;f++)if(a instanceof c[f])return p(new b(a),e,b,g);if(Array.isArray(a))return p(new b(a),e,b,g);c=c.map(function(a){return"'"+a.name+"'"});g.error("Failed to set property, expected one of "+c+", but got "+a.constructor.name);return new b([])}
function c(a,b,c){for(var e=Array(a.length),g=0;g<a.length;g++)e[g]=a[g];b[c]=e}Object.defineProperty(a,"__esModule",{value:!0});var n=b.getLogger("esri.geometry.support.MeshVertexAttributes");d=function(a){function b(b){b=a.call(this)||this;b.color=null;b.position=new Float64Array(0);b.uv=null;b.normal=null;return b}l(b,a);d=b;b.prototype.castColor=function(a){return e(a,Uint8Array,[Uint8ClampedArray],{loggerTag:".color\x3d",stride:4},n)};b.prototype.castPosition=function(a){a&&a instanceof Float32Array&&
n.warn(".position\x3d","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return e(a,Float64Array,[Float32Array],{loggerTag:".position\x3d",stride:3},n)};b.prototype.castUv=function(a){return e(a,Float32Array,[Float64Array],{loggerTag:".uv\x3d",stride:2},n)};b.prototype.castNormal=function(a){return e(a,Float32Array,[Float64Array],{loggerTag:".normal\x3d",stride:3},n)};b.prototype.clone=function(){return new d({position:k.clone(this.position),
uv:k.clone(this.uv),normal:k.clone(this.normal)})};var d;f([g.property({json:{write:c}})],b.prototype,"color",void 0);f([g.cast("color")],b.prototype,"castColor",null);f([g.property({nonNullable:!0,json:{write:c}})],b.prototype,"position",void 0);f([g.cast("position")],b.prototype,"castPosition",null);f([g.property({json:{write:c}})],b.prototype,"uv",void 0);f([g.cast("uv")],b.prototype,"castUv",null);f([g.property({json:{write:c}})],b.prototype,"normal",void 0);f([g.cast("normal")],b.prototype,"castNormal",
null);return b=d=f([g.subclass("esri.geometry.support.MeshVertexAttributes")],b)}(g.declared(h));a.MeshVertexAttributes=d;a.castArray=e;a.default=d})},"esri/geometry/support/triangulationUtils":function(){define(["require","exports","../../core/libs/earcut/earcut","./coordsUtils"],function(d,a,l,f){function h(a,b,e){if(1===a.length)return a[0];b=new Float64Array(b);e=new Uint32Array(e);for(var c=0,g=0,f=0;f<a.length;f++){for(var d=a[f],h=0;h<d.position.length;h++)b[c++]=d.position[h];for(h=0;h<d.faces.length;h++)e[g++]=
d.faces[h]}return{position:b,faces:e}}function k(a,d){for(var e=a.length,c=Array(e),g=Array(e),m=Array(e),h=0,k=0,p=0,t=0,l=0;l<e;++l)t+=a[l].length;for(var t=new Float64Array(3*t),z=0,D=e-1;0<=D;D--){var B=a[D];if(f.isClockwise(B,!1,!1)||1===e){for(var w=B.length,l=0;l<h;++l)w+=c[l].length;l={index:z,pathLengths:Array(h+1),count:w,holeIndices:Array(h)};l.pathLengths[0]=B.length;0<B.length&&(m[p++]={index:z,count:B.length});z=b(B,0,t,z,B.length,d);for(B=0;B<h;++B)w=c[B],l.holeIndices[B]=z,l.pathLengths[B+
1]=w.length,0<w.length&&(m[p++]={index:z,count:w.length}),z=b(w,0,t,z,w.length,d);h=0;0<l.count&&(g[k++]=l)}else c[h++]=B}for(B=0;B<h;++B)w=c[B],0<w.length&&(m[p++]={index:z,count:w.length}),z=b(w,0,t,z,w.length,d);k<e&&(g.length=k);p<e&&(m.length=p);return{position:t,polygons:g,outlines:m}}function b(a,b,e,c,f,d){c*=3;for(var g=0;g<f;++g){var m=a[b++];e[c++]=m[0];e[c++]=m[1];e[c++]=d?m[2]:0}return c/3}Object.defineProperty(a,"__esModule",{value:!0});a.triangulate=function(a){var b=k(a.rings,a.hasZ),
e=[],c=0,g=0;a=function(a){var f=a.index,d=new Float64Array(b.position.buffer,3*f*b.position.BYTES_PER_ELEMENT,3*a.count);a=a.holeIndices.map(function(a){return a-f});a=new Uint32Array(l(d,a,3));e.push({position:d,faces:a});c+=d.length;g+=a.length};for(var f=0,d=b.polygons;f<d.length;f++)a(d[f]);return h(e,c,g)};a.pathsToTriangulationInfo=k})},"esri/geometry/support/coordsUtils":function(){define(["require","exports"],function(d,a){function l(a,f){var b=f[0]-a[0],g=f[1]-a[1];return 2<a.length&&2<
f.length?(a=a[2]-f[2],Math.sqrt(b*b+g*g+a*a)):Math.sqrt(b*b+g*g)}function f(a,f,b){var g=a[0]+b*(f[0]-a[0]),d=a[1]+b*(f[1]-a[1]);return 2<a.length&&2<f.length?[g,d,a[2]+b*(f[2]-a[2])]:[g,d]}Object.defineProperty(a,"__esModule",{value:!0});a.geometryToCoordinates=function(a){if(!a)return null;if(Array.isArray(a))return a;var f=a.hasZ,b=a.hasM;if("point"===a.type)return b&&f?[a.x,a.y,a.z,a.m]:f?[a.x,a.y,a.z]:b?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.paths.slice(0);
if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=a.clone().normalize();if(!a)return null;var g=!1,d=!1;a.forEach(function(a){a.hasZ&&(g=!0);a.hasM&&(d=!0)});return a.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(g&&a.hasZ)for(var e=.5*(a.zmax-a.zmin),f=0;f<b.length;f++)b[f].push(e);if(d&&a.hasM)for(a=.5*(a.mmax-a.mmin),f=0;f<b.length;f++)b[f].push(a);return b})}return null};a.getLength=l;a.getMidpoint=function(a,
d){return f(a,d,.5)};a.getPathLength=function(a){for(var f=a.length,b=0,g=0;g<f-1;++g)b+=l(a[g],a[g+1]);return b};a.getPointOnPath=function(a,d){if(0>=d)return a[0];for(var b=a.length,g=0,h=0;h<b-1;++h){var e=l(a[h],a[h+1]);if(d-g<e)return f(a[h],a[h+1],(d-g)/e);g+=e}return a[b-1]};a.isClockwise=function(a,f,b){for(var g=a.length,d=0,e=0,c=0,n=0;n<g;n++){var m=a[n],h=a[(n+1)%g],k=2,d=d+(m[0]*h[1]-h[0]*m[1]);2<m.length&&2<h.length&&b&&(e+=m[0]*h[2]-h[0]*m[2],k=3);m.length>k&&h.length>k&&f&&(c+=m[0]*
h[k]-h[0]*m[k])}return 0>=d&&0>=e&&0>=c}})},"esri/geometry/support/meshUtils/centerAt":function(){define("require exports ../../../core/Logger ../../../core/libs/gl-matrix-2/gl-matrix ./projection ../../../views/3d/support/projectionUtils".split(" "),function(d,a,l,f,h,k){Object.defineProperty(a,"__esModule",{value:!0});var b=l.getLogger("esri.geometry.support.meshUtils.centerAt");a.centerAt=function(a,d,q){if(a.vertexAttributes&&a.vertexAttributes.position){var m=a.spatialReference,n=q&&q.origin||
a.extent.center;if(m.isWGS84||m.isWebMercator&&(!q||!1!==q.geographic)){q=a.spatialReference;var m=p,t=g;if(k.pointToVector(d,t,k.SphericalECEFSpatialReference)){k.pointToVector(n,m,k.SphericalECEFSpatialReference)||k.pointToVector(a.extent.center,m,k.SphericalECEFSpatialReference);n=a.vertexAttributes.position;d=a.vertexAttributes.normal;var l=new Float64Array(n.length),z=new Float32Array(d?d.length:0);h.projectToECEF(n,q,l);d&&h.projectNormalToECEF(d,n,l,q,z);k.computeLinearTransformation(k.SphericalECEFSpatialReference,
m,e,k.SphericalECEFSpatialReference);k.computeLinearTransformation(k.SphericalECEFSpatialReference,t,c,k.SphericalECEFSpatialReference);f.mat4.invert(e,e);f.mat4.multiply(c,c,e);h.transformBufferInPlace(l,c);f.mat4.invert(c,c);f.mat4.transpose(c,c);d&&h.transformBufferInPlace(z,c,!0);h.projectFromECEF(l,n,q);d&&h.projectNormalFromECEF(z,n,l,q,d);a.clearCache()}else b.error("Failed to project centerAt location (wkid:"+d.spatialReference.wkid+") to ECEF")}else if(q=p,m=g,k.pointToVector(d,m,a.spatialReference)){k.pointToVector(n,
q,a.spatialReference)||(d=a.extent.center,q[0]=d.x,q[1]=d.y,q[2]=d.z,b.error("Failed to project specified origin (wkid:"+n.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+"). Using mesh extent.center instead"));if(n=a.vertexAttributes.position)for(d=0;d<n.length;d+=3)for(t=0;3>t;t++)n[d+t]+=m[t]-q[t];a.clearCache()}else b.error("Failed to project centerAt location (wkid:"+d.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+")")}};
var g=f.vec3f64.create(),p=f.vec3f64.create(),e=f.mat4f64.create(),c=f.mat4f64.create()})},"esri/geometry/support/meshUtils/projection":function(){define(["require","exports","../../../core/Logger","../../../core/libs/gl-matrix-2/gl-matrix","../../../views/3d/support/projectionUtils"],function(d,a,l,f,h){function k(a,b,d,k,l,t){if(b){l=l.isWGS84;for(var m=0;m<b.length;m+=3){for(var n=0;3>n;n++)g[n]=k[m+n],p[n]=b[m+n];h.computeLinearTransformation(h.SphericalECEFSpatialReference,g,e,h.SphericalECEFSpatialReference);
f.mat3.fromMat4(c,e);l?f.vec3.transformMat3(p,p,c):(n=h.webMercator.y2lat(d[m+1]),n=Math.cos(n),0===a&&(n=1/n),c[0]*=n,c[1]*=n,c[2]*=n,c[3]*=n,c[4]*=n,c[5]*=n,1===a&&f.mat3.transpose(c,c),f.vec3.transformMat3(p,p,c),f.vec3.normalize(p,p));for(n=0;3>n;n++)t[m+n]=p[n]}return t}}Object.defineProperty(a,"__esModule",{value:!0});var b=l.getLogger("esri.geometry.support.meshUtils.normalProjection");a.projectNormalToECEF=function(a,c,e,g,f){return g.isWebMercator||g.isWGS84?k(0,a,c,e,g,f):(b.error("Cannot convert PCS spatial reference buffer to ECEF"),
f)};a.projectNormalFromECEF=function(a,c,e,g,f){return g.isWebMercator||g.isWGS84?k(1,a,c,e,g,f):(b.error("Cannot convert to PCS spatial reference buffer from ECEF"),f)};a.projectToECEF=function(a,b,c){h.bufferToBuffer(a,b,0,c,h.SphericalECEFSpatialReference,0,a.length/3);return c};a.projectFromECEF=function(a,b,c){h.bufferToBuffer(a,h.SphericalECEFSpatialReference,0,b,c,0,a.length/3);return b};a.transformBufferInPlace=function(a,b,c){void 0===c&&(c=!1);if(a)for(var e=0;e<a.length;e+=3){for(var d=
0;3>d;d++)g[d]=a[e+d];f.vec3.transformMat4(g,g,b);c&&f.vec3.normalize(g,g);for(d=0;3>d;d++)a[e+d]=g[d]}};var g=f.vec3f64.create(),p=f.vec3f64.create(),e=f.mat4f64.create(),c=f.mat3f64.create()})},"esri/views/3d/support/projectionUtils":function(){define("require exports ../../../core/libs/gl-matrix-2/gl-matrix ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ./earthUtils ./mathUtils ../webgl-engine/lib/BufferVectorMath".split(" "),function(d,a,l,
f,h,k,b,g,p){function e(a,b,e,g){2===a.length?(F[0]=a[0],F[1]=a[1],F[2]=0,a=F):a===e&&(l.vec3.copy(F,a),a=F);return c(a,b,0,e,g,0,1)}function c(a,b,c,e,g,f,d){void 0===d&&(d=1);t!==b&&(u=n(b),t=b);z!==g&&(D=n(g),z=g);d=c+3*d;if(u!==D||u===x.UNKNOWN&&!b.equals(g))if(u>x.UNKNOWN&&D>x.UNKNOWN)if(D!==x.WGS84)if(b=B[D],u!==x.WGS84)for(g=w[u];c<d;c+=3,f+=3)g(a,c,G,0),b(G,0,e,f);else for(;c<d;c+=3,f+=3)b(a,c,e,f);else for(g=w[u];c<d;c+=3,f+=3)g(a,c,e,f);else return!1;else if(e!==a||c!==f)for(;c<d;c++,f++)e[f]=
a[c];return!0}function n(b){return b.wkt===a.SphericalECEFSpatialReference.wkt?x.SPHERICAL_ECEF:b.isWGS84?x.WGS84:b.isWebMercator?x.WEBMERC:b.wkt===a.WGS84ECEFSpatialReference.wkt?x.WGS84_ECEF:x.UNKNOWN}function m(a,b,c,e){c[e++]=a[b++];c[e++]=a[b++];c[e]=a[b]}function q(a,b,c,e){var f=.4999999*Math.PI,f=g.clamp(C*a[b+1],-f,f),f=Math.sin(f);c[e++]=C*a[b]*A;c[e++]=A/2*Math.log((1+f)/(1-f));c[e]=a[b+2]}function y(a,b,c,e){var g=A+a[b+2],f=C*a[b+1];a=C*a[b];b=Math.cos(f);c[e++]=Math.cos(a)*b*g;c[e++]=
Math.sin(a)*b*g;c[e]=Math.sin(f)*g}Object.defineProperty(a,"__esModule",{value:!0});a.SphericalECEFSpatialReference=new h({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",\' + earthUtils.earthRadius + \',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'});a.WGS84ECEFSpatialReference=new h({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'});
var x;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";a[a.WGS84=2]="WGS84";a[a.WEBMERC=3]="WEBMERC";a[a.WGS84_ECEF=4]="WGS84_ECEF"})(x||(x={}));var t,u,z,D;a.vectorToVector=e;a.pointToVector=function(a,b,e){F[0]=a.x;F[1]=a.y;var g=a.z;F[2]=void 0!==g?g:0;return c(F,a.spatialReference,0,b,e,0,1)};a.vectorToPoint=function(a,b,e,g){"esri.geometry.SpatialReference"===e.declaredClass?(g=e,e=new f({spatialReference:g})):g=g||e.spatialReference;return c(a,b,0,F,g,0,1)?(e.x=F[0],
e.y=F[1],e.z=F[2],e.spatialReference=g,e):null};a.xyzToVector=function(a,b,e,g,f,d){F[0]=a;F[1]=b;F[2]=e;return c(F,g,0,f,d,0,1)};a.bufferToBuffer=c;a.computeLinearTransformation=function(a,b,c,e){var g=n(a),f=n(e);if(g===f&&f!==x.SPHERICAL_ECEF&&(g!==x.UNKNOWN||a.equals(e)))return l.mat4.identity(c),l.mat4.translate(c,c,b),!0;if(f===x.SPHERICAL_ECEF){if(a=w[g])return a(b,0,G,0),y(G,0,N,0),e=C*G[0],a=C*G[1],b=Math.sin(e),e=Math.cos(e),g=Math.sin(a),a=Math.cos(a),c[0]=-b,c[4]=-g*e,c[8]=a*e,c[12]=N[0],
c[1]=e,c[5]=-g*b,c[9]=a*b,c[13]=N[1],c[2]=0,c[6]=a,c[10]=g,c[14]=N[2],c[3]=0,c[7]=0,c[11]=0,c[15]=1,!0}else if(f===x.WEBMERC&&(g===x.WGS84||g===x.SPHERICAL_ECEF))return w[g](b,0,G,0),b=C*G[1],q(G,0,N,0),l.mat4.identity(c),l.mat4.translate(c,c,N),b=1/Math.cos(b),l.mat4.scale(c,c,[b,b,1]),!0;return!1};a.transformDirection=function(a,b,c,g,f){l.vec3.copy(O,a);l.vec3.add(S,a,b);e(O,c,O,f);e(S,c,S,f);l.vec3.subtract(g,S,O);l.vec3.normalize(g,g)};a.mbsToMbs=function(a,b,c,e){var g=n(b),f=n(e);if(g===f&&
(g!==x.UNKNOWN||b.equals(e)))return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],!0;if(f===x.SPHERICAL_ECEF){if(b=w[g])return b(a,0,G,0),y(G,0,c,0),c[3]=a[3],!0}else if(f===x.WEBMERC&&(g===x.WGS84||g===x.SPHERICAL_ECEF))return w[g](a,0,G,0),b=Math.abs(C*G[1])+Math.asin(a[3]/(A+a[2])),q(G,0,c,0),c[3]=b>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(b)*a[3],!0;return!1};a.extentToBoundingBox=function(a,b,e){if(null==a)return!1;var g;F[0]=null!=a.xmin?a.xmin:0;F[1]=null!=a.ymin?a.ymin:0;F[2]=null!=a.zmin?a.zmin:
0;g=c(F,a.spatialReference,0,b,e,0,1);F[0]=null!=a.xmax?a.xmax:0;F[1]=null!=a.ymax?a.ymax:0;F[2]=null!=a.zmax?a.zmax:0;g=g&&c(F,a.spatialReference,0,b,e,3,1);null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);null==a.zmin&&(b[2]=-Infinity);null==a.xmax&&(b[3]=Infinity);null==a.ymax&&(b[4]=Infinity);null==a.zmax&&(b[5]=Infinity);return g};a.extentToBoundingRect=function(a,b,e){if(null==a)return!1;var g;F[0]=null!=a.xmin?a.xmin:0;F[1]=null!=a.ymin?a.ymin:0;F[2]=null!=a.zmin?a.zmin:0;g=c(F,
a.spatialReference,0,F,e,0,1);b[0]=F[0];b[1]=F[1];F[0]=null!=a.xmax?a.xmax:0;F[1]=null!=a.ymax?a.ymax:0;F[2]=null!=a.zmax?a.zmax:0;g=g&&c(F,a.spatialReference,0,F,e,0,1);b[2]=F[0];b[3]=F[1];null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);null==a.xmax&&(b[2]=Infinity);null==a.ymax&&(b[3]=Infinity);return g};a.boundingRectToBoundingRect=function(a,b,e,g){if(null==a)return!1;if(b.equals(g))return k.set(e,a),!0;var f;F[0]=a[0];F[1]=a[1];F[2]=0;f=c(F,b,0,F,g,0,1);e[0]=F[0];e[1]=F[1];F[0]=
a[2];F[1]=a[3];F[2]=0;f=f&&c(F,b,0,F,g,0,1);e[2]=F[0];e[3]=F[1];return f};(function(a){a.x2lon=function(a){return a/A};a.y2lat=function(a){return Math.PI/2-2*Math.atan(Math.exp(-1*a/A))};a.lon2x=function(a){return a*A};a.lat2y=function(a){a=Math.sin(a);return A/2*Math.log((1+a)/(1-a))}})(a.webMercator||(a.webMercator={}));var B=[void 0,y,m,q,function(a,b,c,e){var g=H,f=C*a[b],d=C*a[b+1];a=a[b+2];b=Math.sin(d);var d=Math.cos(d),m=g.a/Math.sqrt(1-g.e2*b*b);c[e++]=(m+a)*d*Math.cos(f);c[e++]=(m+a)*d*
Math.sin(f);c[e++]=(m*(1-g.e2)+a)*b}],w=[void 0,function(a,b,c,e){var f=p.Vec3Compact.length(a,b),d=g.asin(a[b+2]/f);a=(0<a[b+1]?1:-1)*g.acos(a[b]/(Math.cos(d)*f));c[e++]=E*a;c[e++]=E*d;c[e]=f-A},m,function(a,b,c,e){c[e++]=E*(a[b++]/A);c[e++]=E*(Math.PI/2-2*Math.atan(Math.exp(-1*a[b++]/A)));c[e]=a[b]},function(a,b,c,e){var g=H,f=a[b],d=a[b+1];a=a[b+2];var m,n,h,q,k,p;b=Math.abs(a);m=f*f+d*d;n=Math.sqrt(m);h=m+a*a;q=Math.sqrt(h);f=Math.atan2(d,f);k=a*a/h;h=m/h;d=g.a2/q;m=g.a3-g.a4/q;.3<h?(k=b/q*(1+
h*(g.a1+d+k*m)/q),q=Math.asin(k),d=k*k,h=Math.sqrt(1-d)):(h=n/q*(1-k*(g.a5-d-h*m)/q),q=Math.acos(h),d=1-h*h,k=Math.sqrt(d));p=1-g.e2*d;d=g.a/Math.sqrt(p);g=g.a6*d;d=n-d*h;m=b-g*k;b=h*d+k*m;n=h*m-k*d;g=n/(g/p+b);q+=g;0>a&&(q=-q);c[e++]=E*f;c[e++]=E*q;c[e]=b+n*g/2}],C=g.deg2rad(1),E=g.rad2deg(1),A=b.earthRadius,H={a:6378137,e2:.006694379990137799,a1:42697.67270715754,a2:1.8230912546075456E9,a3:142.91722289812412,a4:4.557728136518864E9,a5:42840.589930055656,a6:.9933056200098622},F=l.vec3f64.create(),
G=l.vec3f64.create(),N=l.vec3f64.create(),O=l.vec3f64.create(),S=l.vec3f64.create()})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../../core/compilerUtils","../Extent"],function(d,a,l,f){function h(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3]]}function k(a){return a[0]>=a[2]?0:a[2]-a[0]}function b(a){return a[1]>=a[3]?0:a[3]-a[1]}function g(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function p(a){return 4===a.length}function e(a,b,e){return a<
b?b:a>e?e:a}Object.defineProperty(a,"__esModule",{value:!0});a.create=h;a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=function(a,b,e,g,f){void 0===f&&(f=h());f[0]=a;f[1]=b;f[2]=e;f[3]=g;return f};a.fromExtent=function(a,b){void 0===b&&(b=h());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;return b};a.toExtent=function(a,b){return new f({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<
a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])};a.expand=function(a,b,e){void 0===e&&(e=a);if("length"in b)if(p(b))e[0]=Math.min(a[0],b[0]),e[1]=Math.min(a[1],b[1]),e[2]=Math.max(a[2],b[2]),e[3]=Math.max(a[3],b[3]);else{if(2===b.length||3===b.length)e[0]=Math.min(a[0],b[0]),e[1]=Math.min(a[1],b[1]),e[2]=Math.max(a[2],b[0]),e[3]=Math.max(a[3],b[1])}else switch(b.type){case "extent":e[0]=Math.min(a[0],b.xmin);e[1]=Math.min(a[1],b.ymin);e[2]=Math.max(a[2],b.xmax);e[3]=Math.max(a[3],b.ymax);break;case "point":e[0]=
Math.min(a[0],b.x);e[1]=Math.min(a[1],b.y);e[2]=Math.max(a[2],b.x);e[3]=Math.max(a[3],b.y);break;default:l.neverReached(b)}return e};a.expandWithNestedArray=function(a,b,e){void 0===e&&(e=a);var c=b.length,g=a[0],f=a[1],d=a[2];a=a[3];for(var m=0;m<c;m++){var n=b[m],g=Math.min(g,n[0]),f=Math.min(f,n[1]),d=Math.max(d,n[0]);a=Math.max(a,n[1])}e[0]=g;e[1]=f;e[2]=d;e[3]=a;return e};a.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=k;a.height=b;a.diameter=function(a){var c=
k(a);a=b(a);return Math.sqrt(c*c+a*a)};a.area=function(a){return k(a)*b(a)};a.center=function(a,e){void 0===e&&(e=[0,0]);e[0]=a[0]+k(a)/2;e[1]=a[1]+b(a)/2;return e};a.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[0]<=a[2]&&b[1]<=a[3]};a.containsPointWithMargin=function(a,b,e){return b[0]>=a[0]-e&&b[1]>=a[1]-e&&b[0]<=a[2]+e&&b[1]<=a[3]+e};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};a.contains=function(a,b){return b[0]>=
a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};a.intersection=function(a,b,g){void 0===g&&(g=a);var c=b[0],f=b[1],d=b[2];b=b[3];g[0]=e(a[0],c,d);g[1]=e(a[1],f,b);g[2]=e(a[2],c,d);g[3]=e(a[3],f,b);return g};a.distance=function(a,e){var c=(a[1]+a[3])/2,g=Math.max(Math.abs(e[0]-(a[0]+a[2])/2)-k(a)/2,0);a=Math.max(Math.abs(e[1]-c)-b(a)/2,0);return Math.sqrt(g*g+a*a)};a.offset=function(a,b,e,g){void 0===g&&(g=a);g[0]=a[0]+b;g[1]=a[1]+e;g[2]=a[2]+b;g[3]=a[3]+e;return g};a.pad=function(a,b,e){void 0===e&&(e=
a);e[0]=a[0]-b;e[1]=a[1]-b;e[2]=a[2]+b;e[3]=a[3]+b;return e};a.setMin=function(a,b,e){void 0===e&&(e=a);e[0]=b[0];e[1]=b[1];e!==a&&(e[2]=a[2],e[3]=a[3]);return e};a.setMax=function(a,b,e){void 0===e&&(e=a);e[2]=b[0];e[3]=b[1];e!==a&&(e[0]=a[0],e[1]=a[1]);return a};a.set=g;a.empty=function(b){return b?g(b,a.NEGATIVE_INFINITY):h(a.NEGATIVE_INFINITY)};a.is=p;a.isPoint=function(a){return(0===k(a)||!isFinite(a[0]))&&(0===b(a)||!isFinite(a[1]))};a.equals=function(a,b,e){if(null==a||null==b)return a===b;
if(!p(a)||!p(b))return!1;if(e)for(var c=0;c<a.length;c++){if(!e(a[c],b[c]))return!1}else for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0]})},"esri/views/3d/support/earthUtils":function(){define("require exports ../../../core/wgs84Constants ../../../core/libs/gl-matrix-2/gl-matrix ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/webMercatorUtils ./mathUtils".split(" "),
function(d,a,l,f,h,k,b,g){function p(b,c,e,f){var d,m;b instanceof h&&c instanceof h&&(e=c.longitude,f=c.latitude,m=b.latitude,d=b.longitude);b=g.deg2rad(m);f=g.deg2rad(f);d=g.deg2rad(d);c=g.deg2rad(e);e=Math.sin((b-f)/2);d=Math.sin((d-c)/2);e=2*g.asin(Math.sqrt(e*e+Math.cos(b)*Math.cos(f)*d*d))*a.earthRadius;return Math.round(1E4*e)/1E4}function e(b,c,e){b=e/a.earthRadius;c=g.deg2rad(c);b=Math.sin(b/2);c=Math.cos(c);c=2*g.asin(Math.sqrt(b*b/(c*c)));return g.rad2deg(c)}function c(b,c,e){return g.rad2deg(e/
a.earthRadius)}function n(a,b){a/=15;b||(a=Math.round(a));return a}Object.defineProperty(a,"__esModule",{value:!0});a.earthRadius=l.wgs84Radius;a.halfEarthCircumference=Math.PI*a.earthRadius;a.earthCircumference=2*a.halfEarthCircumference;a.metersPerDegree=a.halfEarthCircumference/180;var m=new h(0,0,k.WGS84);a.getGreatCircleDistance=p;a.getGreatCircleSpanAt=function(a,b,c){var e=b.spatialReference,g=new h(b.x,a.y,e),f=new h(c.x,a.y,e);b=new h(a.x,b.y,e);a=new h(a.x,c.y,e);return{lon:p(g,f),lat:p(b,
a)}};a.getLonDeltaForDistance=e;a.getLatDeltaForDistance=c;a.getLatLonDeltaForDistance=function(a,b,g){return{lat:c(a,b,g),lon:e(a,b,g)}};a.getMaxCameraAltitude=function(b){b=g.deg2rad(b/2);return(1-Math.sin(b))*a.earthRadius/Math.sin(b)};a.getViewExtentDistance=function(b,c){c=g.deg2rad(c/2);return 2*g.acos((Math.pow(b+a.earthRadius,2)+Math.pow(a.earthRadius,2)-Math.pow((b+a.earthRadius)*Math.cos(c)-Math.sqrt(Math.pow(Math.cos(c)*(b+a.earthRadius),2)-b*b-2*b*a.earthRadius),2))/(2*(b+a.earthRadius)*
a.earthRadius))*a.earthRadius};a.computeCarthesianDistance=function(b,c){function e(b){var c=g.deg2rad(b.latitude),e=g.deg2rad(b.longitude),f=Math.cos(c);b=a.earthRadius+(b.z||0);return[Math.cos(e)*f*b,Math.sin(c)*b,-Math.sin(e)*f*b]}b=e(b);c=e(c);c=[c[0]-b[0],c[1]-b[1],c[2]-b[2]];return Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2])};a.longitudeToTimezone=n;a.positionToTimezone=function(a,c){a.spatialReference.wkid!==k.WGS84.wkid?b.webMercatorToGeographic(a,!1,m):(m.x=a.x,m.y=a.y);m.z=a.z;c||(c={hours:0,
minutes:0,seconds:0});c.hours=n(m.x,!0);a=c.hours%1;c.hours-=a;c.minutes=60*a;a=c.minutes%1;c.minutes-=a;c.seconds=Math.round(60*a);return c};a.distanceToIdealHorizon=function(b,c){c=c||a.earthRadius;b=f.vec3.dot(b,b);return Math.sqrt(Math.abs(b-c*c))}})},"esri/views/3d/support/mathUtils":function(){define(["require","exports","../../../core/libs/gl-matrix-2/gl-matrix"],function(d,a,l){function f(a){return Math.asin(1<a?1:-1>a?-1:a)}function h(a){return Math.acos(1<a?1:-1>a?-1:a)}function k(a,b,c){return a<
b?b:a>c?c:a}function b(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(a,"__esModule",{value:!0});a.deg2rad=function(a){return a*Math.PI/180};a.rad2deg=function(a){return 180*a/Math.PI};a.asin=f;a.acos=h;a.cosCapped=function(a,b){return a>b?Math.cos(b):Math.cos(a)};a.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};a.log2=Math.log2||function(a){return Math.log(a)/Math.LN2};a.isPowerOfTwo=function(a){return 0===(a&a-1)};a.nextHighestPowerOfTwo=
function(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1};a.nextHighestPowerOfTen=function(a){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(a)))};a.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};a.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};a.maxScale=function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))};a.makeOrthonormal=function(a,b,c){c=c||
a;var e=l.vec3.dot(a,b);l.vec3.set(c,a[0]-e*b[0],a[1]-e*b[1],a[2]-e*b[2]);l.vec3.normalize(c,c)};a.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?l.vec3.set(b,0,1,0):l.vec3.set(b,1,0,0);l.vec3.cross(c,a,b);l.vec3.normalize(b,b);l.vec3.cross(b,c,a);l.vec3.normalize(c,c)};a.cartesianToSpherical=function(a,b){var c=l.vec3.length(a),e=f(a[2]/c);l.vec3.set(b,c,e,Math.atan2(a[1]/c,a[0]/c));return b};a.sphericalToCartesian=function(a,b){var c=a[0],e=a[1];a=a[2];var g=Math.cos(e);l.vec3.set(b,
c*g*Math.cos(a),c*g*Math.sin(a),c*Math.sin(e))};a.directionFromTo=function(a,b,c){var e=c[0]-b[0],g=c[1]-b[1];b=c[2]-b[2];c=e*e+g*g+b*b;if(!c)return a[0]=0,a[1]=0,a[2]=0,a;c=1/Math.sqrt(c);a[0]=e*c;a[1]=g*c;a[2]=b*c;return a};a.lerp=function(a,b,c){return a+(b-a)*c};a.bilerp=function(a,b,c,e,g,f){a+=(b-a)*g;return a+(c+(e-c)*g-a)*f};a.slerp=function(a,b,e,g){void 0===g&&(g=l.vec3f64.create());var f=l.vec3.length(a),d=l.vec3.length(b),h=l.vec3.dot(a,b)/(f*d);if(.9999999999999999>h){var h=Math.acos(h),
m=((1-e)*f+e*d)/Math.sin(h),d=m/d*Math.sin(e*h);l.vec3.scale(c,a,m/f*Math.sin((1-e)*h));l.vec3.scale(n,b,d);return l.vec3.add(g,c,n)}return l.vec3.lerp(g,a,b,e)};a.angle=function(a,b,g){a=l.vec3.normalize(c,a);b=l.vec3.normalize(n,b);var f=h(l.vec3.dot(a,b));return g&&(a=l.vec3.cross(e,a,b),0>l.vec3.dot(a,g))?-f:f};a.clamp=k;a.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};a.isNaN=Number.isNaN||function(a){return a!==a};a.makePiecewiseLinearFunction=function(a){var b=
a.length;return function(c){if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(var e=1;c>a[e][0];)e++;var g=a[e][0];c=(g-c)/(g-a[e-1][0]);return c*a[e-1][1]+(1-c)*a[e][1]}};a.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};a.floatEqualRelative=function(b,c,e){void 0===e&&(e=1E-6);if(a.isNaN(b)||a.isNaN(c))return!1;if(b===c)return!0;var g=Math.abs(b-c),f=Math.abs(b),d=Math.abs(c);
if(0===b||0===c||1E-12>f&&1E-12>d){if(g>.01*e)return!1}else if(g/(f+d)>e)return!1;return!0};a.floatEqualAbsolute=function(b,c,e){void 0===e&&(e=1E-6);return a.isNaN(b)||a.isNaN(c)?!1:(b>c?b-c:c-b)<=e};d=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=function(a,b,c,e){void 0===e&&(e=0);c-=e;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+e};a.prototype.normalize=
function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return k(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.contains=function(a,b,c){b=
this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();a.Cyclical=d;a.planeFromPoints=function(a,b,c,e){l.vec3.subtract(g,b,a);l.vec3.subtract(p,c,a);l.vec3.cross(e,g,p);l.vec3.normalize(e,e);e[3]=-l.vec3.dot(a,e)};var g=l.vec3f64.create(),p=l.vec3f64.create();a.cyclical2PI=b(new d(0,2*Math.PI));a.cyclicalPI=b(new d(-Math.PI,Math.PI));a.cyclicalDeg=b(new d(0,360));var e=l.vec3f64.create(),c=l.vec3f64.create(),n=l.vec3f64.create()})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["require",
"exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});(function(a){a.length=function(a,d){var f=a[d],b=a[d+1];a=a[d+2];return Math.sqrt(f*f+b*b+a*a)};a.normalize=function(a,d){var f=a[d],b=a[d+1],g=a[d+2],f=1/Math.sqrt(f*f+b*b+g*g);a[d]*=f;a[d+1]*=f;a[d+2]*=f};a.scale=function(a,d,k){a[d]*=k;a[d+1]*=k;a[d+2]*=k};a.add=function(a,d,k,b,g,p){void 0===p&&(p=d);g=g||a;g[p]=a[d]+k[b];g[p+1]=a[d+1]+k[b+1];g[p+2]=a[d+2]+k[b+2]};a.subtract=function(a,d,k,b,g,p){void 0===p&&(p=d);g=g||
a;g[p]=a[d]-k[b];g[p+1]=a[d+1]-k[b+1];g[p+2]=a[d+2]-k[b+2]}})(a.Vec3Compact||(a.Vec3Compact={}))})},"esri/geometry/support/meshUtils/offset":function(){define(["require","exports","../../../core/libs/gl-matrix-2/gl-matrix","./projection","../../../views/3d/support/projectionUtils"],function(d,a,l,f,h){function k(a,b){if(a)for(var c=0;c<a.length;c+=3)for(var e=0;3>e;e++)a[c+e]+=b[e]}Object.defineProperty(a,"__esModule",{value:!0});a.offset=function(a,c,d){if(a.vertexAttributes&&a.vertexAttributes.position){var e=
a.spatialReference;if(e.isWGS84||e.isWebMercator&&(!d||!1!==d.geographic)){d=a.spatialReference;var e=a.vertexAttributes.position,n=a.vertexAttributes.normal,y=new Float64Array(e.length),x=new Float32Array(n?n.length:0),t=a.extent.center,u=b;h.computeLinearTransformation(d,[t.x,t.y,t.z],g,h.SphericalECEFSpatialReference);l.mat3.fromMat4(p,g);l.vec3.transformMat3(u,c,p);f.projectToECEF(e,d,y);n&&f.projectNormalToECEF(n,e,y,d,x);k(y,u);f.projectFromECEF(y,e,d);n&&f.projectNormalFromECEF(x,e,y,d,n)}else k(a.vertexAttributes.position,
c);a.clearCache()}};var b=l.vec3f64.create(),g=l.mat4f64.create(),p=l.mat3f64.create()})},"esri/geometry/support/meshUtils/primitives":function(){define(["require","exports","../../../core/libs/gl-matrix-2/gl-matrix","./georeference"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});a.createUnitSizeBox=function(){for(var a=k.faceDescriptions,b=k.faceVertexOffsets,c=k.uvScales,g=4*a.length,f=new Float64Array(3*g),d=new Float32Array(3*g),g=new Float32Array(2*g),h=new Uint32Array(6*
a.length),l=0,t=0,u=0,z=0,D=0;D<a.length;D++){for(var B=a[D],w=l/3,C=0,E=b;C<E.length;C++){var A=E[C];h[z++]=w+A}w=B.corners;for(C=0;4>C;C++){E=w[C];A=0;g[u++]=.25*c[C][0]+B.uvOrigin[0];g[u++]=B.uvOrigin[1]-.25*c[C][1];for(var H=0;3>H;H++)0!==B.axis[H]?(f[l++]=.5*B.axis[H],d[t++]=B.axis[H]):(f[l++]=.5*E[A++],d[t++]=0)}}return{position:f,normal:d,uv:g,faces:h}};a.createUnitSizeSphere=function(a){void 0===a&&(a=0);a=Math.round(8*Math.pow(2,a));for(var e=2*a,c=(a-1)*(e+1)+2*e,g=new Float64Array(3*c),
f=new Float32Array(3*c),c=new Float32Array(2*c),d=new Uint32Array((a-1)*e*6),h=0,k=0,p=0,l=0,z=0,D=0;D<=a;D++){var B=D/a*Math.PI+.5*Math.PI,w=Math.cos(B);b[2]=Math.sin(B);for(var C=(B=0===D||D===a)?e-1:e,E=0;E<=C;E++){var A=E/C*2*Math.PI;b[0]=-Math.sin(A)*w;b[1]=Math.cos(A)*w;for(A=0;3>A;A++)g[h++]=.5*b[A],f[k++]=b[A];c[p++]=(E+(B?.5:0))/e;c[p++]=D/a;0!==D&&E!==e&&(D!==a&&(d[l++]=z,d[l++]=z+1,d[l++]=z-e),1!==D&&(d[l++]=z,d[l++]=z-e,d[l++]=z-e-1));z++}}return{position:g,normal:f,uv:c,faces:d}};a.createUnitSizeCylinder=
function(a){void 0===a&&(a=0);a=Math.round(16*Math.pow(2,a));for(var e=4*(a+1)+2*a,c=new Float64Array(3*e),g=new Float32Array(3*e),e=new Float32Array(2*e),f=new Uint32Array(12*a),d=0,h=0,k=0,p=0,l=0,z=0;5>=z;z++)for(var D=0===z||5===z,B=1>=z||4<=z,w=2===z||4===z,C=D?a-1:a,E=0;E<=C;E++){var A=E/C*2*Math.PI,H=D?0:.5;b[0]=H*Math.sin(A);b[1]=H*-Math.cos(A);b[2]=2>=z?.5:-.5;for(A=0;3>A;A++)c[d++]=b[A],B?g[h++]=2===A?1>=z?1:-1:0:g[h++]=2===A?0:b[A]/H;e[k++]=(E+(D?.5:0))/a;1>=z?e[k++]=1*z/3:3>=z?e[k++]=
1*(z-2)/3+1/3:e[k++]=1*(z-4)/3+2/3;w||0===z||E===a||(5!==z&&(f[p++]=l,f[p++]=l+1,f[p++]=l-a),1!==z&&(f[p++]=l,f[p++]=l-a,f[p++]=l-a-1));l++}return{position:c,normal:g,uv:e,faces:f}};a.createUnitSizePlane=function(a){a=h.facingAxisOrderSwap[a];for(var b=h.position,c=h.normal,g=new Float64Array(b.length),f=new Float32Array(c.length),d=0,k=0;4>k;k++)for(var p=d,l=0;3>l;l++){var u=a[l],z=Math.abs(u)-1,u=0<=u?1:-1;g[d]=b[p+z]*u;f[d]=c[p+z]*u;d++}return{position:g,normal:f,uv:new Float32Array(h.uv),faces:new Uint32Array(h.faces)}};
var h={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};a.convertUnitGeometry=function(a,e,c){for(var d=0;d<a.position.length;d+=3)a.position[d+2]+=.5;d=c&&c.size;if(null!=d){d="number"===typeof d?[d,d,d]:[null!=d.width?d.width:1,null!=d.depth?d.depth:1,null!=d.height?d.height:1];g[0]=d[0];g[4]=d[1];g[8]=d[2];for(var h=0;h<
a.position.length;h+=3){for(var k=0;3>k;k++)b[k]=a.position[h+k];l.vec3.transformMat3(b,b,g);for(k=0;3>k;k++)a.position[h+k]=b[k]}if(d[0]!==d[1]||d[1]!==d[2])for(g[0]=1/d[0],g[4]=1/d[1],g[8]=1/d[2],h=0;h<a.normal.length;h+=3){for(k=0;3>k;k++)b[k]=a.normal[h+k];l.vec3.transformMat3(b,b,g);l.vec3.normalize(b,b);for(k=0;3>k;k++)a.normal[h+k]=b[k]}}d=f.georeference(a,e,c);return{vertexAttributes:{position:d.position,normal:d.normal,uv:a.uv},components:[{faces:a.faces,material:c&&c.material||null}],spatialReference:e.spatialReference}};
var k={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,
1,2,0,2,3]};a.boxFaceOrder={south:0,east:1,north:2,west:3,up:4,down:5};var b=l.vec3f64.create(),g=l.mat3f64.create()})},"esri/geometry/support/meshUtils/georeference":function(){define(["require","exports","../../../core/libs/gl-matrix-2/gl-matrix","./projection","../../../views/3d/support/projectionUtils"],function(d,a,l,f,h){function k(a,b,g,f){void 0===f&&(f=0);if(!g.isWebMercator||!b)return b;g=new Float32Array(b.length);for(var c=0;c<b.length;c+=3){var d=h.webMercator.y2lat(a[c+1]),d=Math.cos(d);
1===f&&(d=1/d);e[0]=b[c+0]*d;e[1]=b[c+1]*d;e[2]=b[c+2];l.vec3.normalize(e,e);for(d=0;3>d;d++)g[c+d]=e[d]}return g}function b(a,b){a=a.spatialReference;return a.isWGS84||a.isWebMercator&&(!b||!1!==b.geographic)}Object.defineProperty(a,"__esModule",{value:!0});a.georeference=function(a,d,m){if(b(d,m)){m=d.spatialReference;h.computeLinearTransformation(d.spatialReference,[d.x,d.y,d.z||0],g,h.SphericalECEFSpatialReference);var c=a.position,n=g;d=d.spatialReference;for(var p=new Float64Array(c.length),
t=0;t<c.length;t+=3){for(var u=0;3>u;u++)e[u]=c[t+u];l.vec3.transformMat4(e,e,n);for(u=0;3>u;u++)p[t+u]=e[u]}c=new Float64Array(c.length);d=f.projectFromECEF(p,c,d);a=k(d,a.normal,m);a={position:d,normal:a}}else{m=new Float64Array(a.position.length);c=a.position;n=d.x;p=d.y;d=d.z||0;for(t=0;t<c.length;t+=3)m[t+0]=c[t+0]+n,m[t+1]=c[t+1]+p,m[t+2]=c[t+2]+d;a={position:m,normal:a.normal}}return a};a.ungeoreference=function(a,d,m){if(b(d,m)){m=d.spatialReference;h.computeLinearTransformation(d.spatialReference,
[d.x,d.y,d.z||0],g,h.SphericalECEFSpatialReference);l.mat4.invert(p,g);var c=a.position,n=p;d=f.projectToECEF(c,m,new Float64Array(c.length));for(var x=0;x<c.length;x+=3){for(var t=0;3>t;t++)e[t]=d[x+t];l.vec3.transformMat4(e,e,n);for(t=0;3>t;t++)d[x+t]=e[t]}a=k(a.position,a.normal,m,1);a={position:d,normal:a}}else{m=new Float64Array(a.position.length);c=a.position;n=d.x;x=d.y;d=d.z||0;for(t=0;t<c.length;t+=3)m[t+0]=c[t+0]-n,m[t+1]=c[t+1]-x,m[t+2]=c[t+2]-d;a={position:m,normal:a.normal}}return a};
var g=l.mat4f64.create(),p=l.mat4f64.create(),e=l.vec3f64.create()})},"esri/geometry/support/meshUtils/rotate":function(){define("require exports ../../../core/Logger ../../../core/libs/gl-matrix-2/gl-matrix ./projection ../../../views/3d/support/projectionUtils".split(" "),function(d,a,l,f,h,k){function b(a,b,c){void 0===c&&(c=y);if(a)for(f.mat4.identity(m),f.mat4.rotate(m,m,b[3],b),b=0;b<a.length;b+=3){for(var e=0;3>e;e++)p[e]=a[b+e]-c[e];f.vec3.transformMat4(p,p,m);for(e=0;3>e;e++)a[b+e]=p[e]+
c[e]}}Object.defineProperty(a,"__esModule",{value:!0});var g=l.getLogger("esri.geometry.support.meshUtils.rotate");a.rotate=function(a,c,d){if(a.vertexAttributes&&a.vertexAttributes.position&&0!==c[3]){var n=a.spatialReference,p=d&&d.origin||a.extent.center;if(n.isWGS84||n.isWebMercator&&(!d||!1!==d.geographic)){d=a.spatialReference;n=x;k.pointToVector(p,n,k.SphericalECEFSpatialReference)||k.pointToVector(a.extent.center,n,k.SphericalECEFSpatialReference);var p=a.vertexAttributes.position,l=a.vertexAttributes.normal,
t=new Float64Array(p.length),u=new Float32Array(l?l.length:0);k.computeLinearTransformation(k.SphericalECEFSpatialReference,n,m,k.SphericalECEFSpatialReference);f.mat3.fromMat4(q,m);var y=e;f.vec3.transformMat3(e,c,q);y[3]=c[3];h.projectToECEF(p,d,t);l&&h.projectNormalToECEF(l,p,t,d,u);b(t,y,n);h.projectFromECEF(t,p,d);l&&(b(u,y),h.projectNormalFromECEF(u,p,t,d,l))}else d=x,k.pointToVector(p,d,a.spatialReference)||(n=a.extent.center,d[0]=n.x,d[1]=n.y,d[2]=n.z,g.error("Failed to project specified origin (wkid:"+
p.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+"). Using mesh extent.center instead")),b(a.vertexAttributes.position,c,d),b(a.vertexAttributes.normal,c);a.clearCache()}};a.axisAngleFrom=function(a,b,c){f.vec3.copy(c,a);c[3]=b;return c};a.axisAngleMultiply=function(a,b,e){f.quat.setAxisAngle(c,a,a[3]);f.quat.setAxisAngle(n,b,b[3]);f.quat.multiply(c,n,c);e[3]=f.quat.getAxisAngle(e,c);return e};var p=f.vec3f64.create(),e=f.vec4f64.create(),c=f.quatf64.create(),n=
f.quatf64.create(),m=f.mat4f64.create(),q=f.mat3f64.create(),y=f.vec3f64.create(),x=f.vec3f64.create()})},"esri/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),function(d,a,l,f,h,k,b,g,p,e){function c(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}d=function(a){function g(){for(var b=0;b<arguments.length;b++);
b=a.call(this)||this;b.points=[];b.type="multipoint";return b}l(g,a);d=g;g.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&(c.spatialReference=a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;if(a=c.points&&c.points[0])void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<a.length,
c.hasM=!1):void 0===c.hasZ?c.hasZ=3<a.length:void 0===c.hasM&&(c.hasM=3<a.length);return c};Object.defineProperty(g.prototype,"extent",{get:function(){var a=this.points;if(!a.length)return null;for(var e=new b,g=this.hasZ,f=this.hasM,d=g?3:2,h=a[0],n=c(Math.min),k=c(Math.max),m=h[0],p=h[1],q=h[0],h=h[1],l,F,G,N,O=0,S=a.length;O<S;O++){var J=a[O],X=J[0],T=J[1],m=n(m,X),p=n(p,T),q=k(q,X),h=k(h,T);g&&2<J.length&&(X=J[2],l=n(l,X),G=k(G,X));f&&J.length>d&&(J=J[d],F=n(F,J),N=k(N,J))}e.xmin=m;e.ymin=p;e.xmax=
q;e.ymax=h;e.spatialReference=this.spatialReference;g?(e.zmin=l,e.zmax=G):(e.zmin=null,e.zmax=null);f?(e.mmin=F,e.mmax=N):(e.mmin=null,e.mmax=null);return e},enumerable:!0,configurable:!0});g.prototype.writePoints=function(a,b,c,e){b.points=h.clone(this.points)};g.prototype.addPoint=function(a){this.clearCache();e.updateSupportFromPoint(this,a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};g.prototype.clone=function(){var a={points:h.clone(this.points),spatialReference:this.spatialReference};
this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new d(a)};g.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new p(b)};g.prototype.removePoint=function(a){if(!this._validateInputs(a))return null;this.clearCache();return new p(this.points.splice(a,1)[0],this.spatialReference)};g.prototype.setPoint=function(a,b){if(!this._validateInputs(a))return this;
this.clearCache();e.updateSupportFromPoint(b);this.points[a]=b.toArray();return this};g.prototype.toJSON=function(a){return this.write(null,a)};g.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};var d;f([k.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],g.prototype,"cache",void 0);f([k.property({dependsOn:["cache"]})],g.prototype,"extent",null);f([k.property({type:[[Number]],json:{write:{isRequired:!0}}})],g.prototype,"points",void 0);f([k.writer("points")],
g.prototype,"writePoints",null);return g=d=f([k.subclass("esri.geometry.Multipoint")],g)}(k.declared(g));d.prototype.toJSON.isDefaultToJSON=!0;return d})},"esri/geometry/support/zmUtils":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.updateSupportFromPoint=function(a,f,d){void 0===d&&(d=!1);var h=a.hasM,b=a.hasZ;Array.isArray(f)?4!==f.length||h||b?3===f.length&&d&&!h?(b=!0,h=!1):3===f.length&&h&&b&&(b=h=!1):b=h=!0:(b=!b&&f.hasZ&&(!h||f.hasM),
h=!h&&f.hasM&&(!b||f.hasZ));a.hasZ=b;a.hasM=h}})},"esri/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x){function t(a){return function(b,c){return null==
b?c:null==c?b:a(b,c)}}var u=t(Math.min),z=t(Math.max);d=function(a){function g(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.rings=[];b.type="polygon";return b}l(g,a);d=g;g.createEllipse=function(a){var b=a.center.x,c=a.center.y,e=a.center.z,g=a.center.m,f=a.center.hasZ,h=a.center.hasM,n=a.longAxis,k=a.shortAxis,m=a.numberOfPoints;a=a.view;for(var p=[],q=2*Math.PI/m,l=f?3:2,t=0;t<m;t++){var u=a.toMap(n*Math.cos(t*q)+b,k*Math.sin(t*q)+c),u=[u.x,u.y];f&&(u[2]=e);h&&(u[l]=g);p.push(u)}p.push(p[0]);
return new d({rings:[p],spatialReference:a.spatialReference})};g.createCircle=function(a){return d.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};g.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,e=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(e=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var g=a.zmin+.5*(a.zmax-a.zmin),
f=0;f<b.length;f++)b[f].push(g);if(e&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),f=0;f<b.length;f++)b[f].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);e&&(b.hasM=!0);return new d(b)};g.prototype.normalizeCtorArgs=function(a,b){var c=null,g,f,d=null;a&&!Array.isArray(a)?(c=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),g=a.hasZ,f=a.hasM):c=a;c=c||[];b=b||e.WGS84;c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(d=c[0]&&c[0][0])void 0===g&&void 0===
f?(g=2<d.length,f=!1):void 0===g?g=!f&&3<d.length:void 0===f&&(f=!g&&3<d.length);return{rings:c,spatialReference:b,hasZ:g,hasM:f}};Object.defineProperty(g.prototype,"centroid",{get:function(){var a=c.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var b=new p;b.x=a[0];b.y=a[1];b.spatialReference=this.spatialReference;this.hasZ&&(b.z=a[2]);return b},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"extent",{get:function(){var a=this.hasZ,c=
this.hasM,e=this.spatialReference,g=this.rings,f=a?3:2;if(!g.length||!g[0].length)return null;for(var d=g[0][0],h=d[0],d=d[1],n=g[0][0],k=n[0],n=n[1],m=void 0,p=void 0,q=void 0,l=void 0,t=[],y=0;y<g.length;y++){for(var x=g[y],D=x[0],w=D[0],D=D[1],B=x[0],ma=B[0],B=B[1],da=void 0,ga=void 0,ra=void 0,ka=void 0,Fa=0;Fa<x.length;Fa++){var Ea=x[Fa],wa=Ea[0],ta=Ea[1],h=u(h,wa),d=u(d,ta),k=z(k,wa),n=z(n,ta),w=u(w,wa),D=u(D,ta),ma=z(ma,wa),B=z(B,ta);a&&2<Ea.length&&(wa=Ea[2],m=u(m,wa),p=z(p,wa),da=u(da,wa),
ga=z(ga,wa));c&&Ea.length>f&&(ka=Ea[f],q=u(m,ka),l=z(p,ka),ra=u(da,ka),ka=z(ga,ka))}t.push(new b({xmin:w,ymin:D,zmin:da,mmin:ra,xmax:ma,ymax:B,zmax:ga,mmax:ka,spatialReference:e}))}g=new b;g.xmin=h;g.ymin=d;g.xmax=k;g.ymax=n;g.spatialReference=e;a&&(g.zmin=m,g.zmax=p);c&&(g.mmin=q,g.mmax=l);g.cache._partwise=1<t.length?t:null;return g},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"isSelfIntersecting",{get:function(){return q.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});
g.prototype.writePaths=function(a,b,c,e){b.rings=h.clone(this.rings)};g.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var e=[],g=0,f=a.length;g<f;g++)e[g]=a[g].toArray();b[c]=e}return this}};g.prototype.clone=function(){var a=new d;a.spatialReference=this.spatialReference;a.rings=h.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};g.prototype.contains=function(a){if(!a)return!1;y.canProject(a,this.spatialReference)&&
(a=y.project(a,this.spatialReference));return n.polygonContainsPoint(this,a)};g.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return m.isClockwise(a,this.hasM,this.hasZ)};g.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new p(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new p(a[0],a[1],void 0,a[2],this.spatialReference):
b&&c?new p(a[0],a[1],a[2],a[3],this.spatialReference):new p(a[0],a[1],this.spatialReference)};g.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();x.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a].splice(b,0,c);return this};g.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new p(this.rings[a].splice(b,1)[0],this.spatialReference)};g.prototype.removeRing=function(a){if(!this._validateInputs(a,
null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new p(a,b)})};g.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();x.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};g.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=
a.length))?!1:!0};g.prototype.toJSON=function(a){return this.write(null,a)};var d;f([k.property({dependsOn:["hasM","hasZ","rings"]})],g.prototype,"cache",void 0);f([k.property({readOnly:!0,dependsOn:["cache"]})],g.prototype,"centroid",null);f([k.property({dependsOn:["cache"],readOnly:!0})],g.prototype,"extent",null);f([k.property({dependsOn:["cache"],readOnly:!0})],g.prototype,"isSelfIntersecting",null);f([k.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],g.prototype,"rings",void 0);f([k.writer("rings")],
g.prototype,"writePaths",null);return g=d=f([k.subclass("esri.geometry.Polygon")],g)}(k.declared(g));d.prototype.toJSON.isDefaultToJSON=!0;return d})},"esri/geometry/support/centroid":function(){define(["require","exports","./coordsUtils"],function(d,a,l){function f(a,g){if(!a||!a.length)return null;for(var b=[],e=[],c=g?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],f=0,d=a.length;f<d;f++){var q=h(a[f],g,c);q&&e.push(q)}e.sort(function(a,b){var c=
a[2]-b[2];0===c&&g&&(c=a[4]-b[4]);return c});e.length&&(f=6*e[0][2],b[0]=e[0][0]/f,b[1]=e[0][1]/f,g&&(f=6*e[0][4],b[2]=0!==f?e[0][3]/f:0),b[0]<c[0]||b[0]>c[1]||b[1]<c[2]||b[1]>c[3]||g&&(b[2]<c[4]||b[2]>c[5]))&&(b.length=0);if(!b.length)if(a=a[0]&&a[0].length?k(a[0],g):null)b[0]=a[0],b[1]=a[1],g&&2<a.length&&(b[2]=a[2]);else return null;return b}function h(a,g,f){for(var b=0,c=0,d=0,h=0,k=0,p=0,l=a.length-1;p<l;p++){var t=a[p],u=t[0],z=t[1],D=t[2],B=a[p+1],w=B[0],C=B[1],E=B[2],A=u*C-w*z,h=h+A,b=b+
(u+w)*A,c=c+(z+C)*A;g&&2<t.length&&2<B.length&&(A=u*E-w*D,d+=(D+E)*A,k+=A);u<f[0]&&(f[0]=u);u>f[1]&&(f[1]=u);z<f[2]&&(f[2]=z);z>f[3]&&(f[3]=z);g&&(D<f[4]&&(f[4]=D),D>f[5]&&(f[5]=D))}0<h&&(h*=-1);0<k&&(k*=-1);if(!h)return null;a=[b,c,.5*h];g&&(a[3]=d,a[4]=.5*k);return a}function k(a,g){for(var b=g?[0,0,0]:[0,0],e=g?[0,0,0]:[0,0],c=0,f=0,d=0,h=0,k=0,x=a.length;k<x-1;k++){var t=a[k],u=a[k+1];if(t&&u){b[0]=t[0];b[1]=t[1];e[0]=u[0];e[1]=u[1];g&&2<t.length&&2<u.length&&(b[2]=t[2],e[2]=u[2]);var z=l.getLength(b,
e);z&&(c+=z,t=l.getMidpoint(t,u),f+=z*t[0],d+=z*t[1],g&&2<t.length&&(h+=z*t[2]))}}return 0<c?g?[f/c,d/c,h/c]:[f/c,d/c]:a.length?a[0]:null}Object.defineProperty(a,"__esModule",{value:!0});a.extentCentroid=function(a){return a?a.hasZ?[a.xmax-a.xmin/2,a.ymax-a.ymin/2,a.zmax-a.zmin/2]:[a.xmax-a.xmin/2,a.ymax-a.ymin/2]:null};a.polygonCentroid=function(a){return a?f(a.rings,a.hasZ):null};a.ringsCentroid=f;a.lineCentroid=k})},"esri/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c){function n(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var m=n(Math.min),q=n(Math.max);d=function(a){function g(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.paths=[];b.type="polyline";return b}l(g,a);d=g;g.prototype.normalizeCtorArgs=function(a,b){var c=null,g,f,d=null;a&&!Array.isArray(a)?(c=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),g=a.hasZ,f=a.hasM):c=a;c=c||[];b=b||e.WGS84;c.length&&c[0]&&null!=
c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(d=c[0]&&c[0][0])void 0===g&&void 0===f?(g=2<d.length,f=!1):void 0===g?g=!f&&3<d.length:void 0===f&&(f=!g&&3<d.length);return{paths:c,spatialReference:b,hasZ:g,hasM:f}};Object.defineProperty(g.prototype,"extent",{get:function(){var a=this.hasZ,c=this.hasM,e=this.spatialReference,g=this.paths,f=a?3:2;if(!g.length||!g[0].length)return null;for(var d=g[0][0],h=d[0],d=d[1],n=g[0][0],k=n[0],n=n[1],p=void 0,l=void 0,t=void 0,y=void 0,x=[],J=0;J<g.length;J++){for(var X=
g[J],T=X[0],Z=T[0],T=T[1],U=X[0],M=U[0],U=U[1],fa=void 0,K=void 0,ca=void 0,ba=void 0,ma=0;ma<X.length;ma++){var da=X[ma],ga=da[0],ra=da[1],h=m(h,ga),d=m(d,ra),k=q(k,ga),n=q(n,ra),Z=m(Z,ga),T=m(T,ra),M=q(M,ga),U=q(U,ra);a&&2<da.length&&(ga=da[2],p=m(p,ga),l=q(l,ga),fa=m(fa,ga),K=q(K,ga));c&&da.length>f&&(ba=da[f],t=m(p,ba),y=q(l,ba),ca=m(fa,ba),ba=q(K,ba))}x.push(new b({xmin:Z,ymin:T,zmin:fa,mmin:ca,xmax:M,ymax:U,zmax:K,mmax:ba,spatialReference:e}))}g=new b;g.xmin=h;g.ymin=d;g.xmax=k;g.ymax=n;g.spatialReference=
e;a&&(g.zmin=p,g.zmax=l);c&&(g.mmin=t,g.mmax=y);g.cache._partwise=1<x.length?x:null;return g},enumerable:!0,configurable:!0});g.prototype.writePaths=function(a,b,c,e){b.paths=h.clone(this.paths)};g.prototype.addPath=function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var e=[],g=0,f=a.length;g<f;g++)e[g]=a[g].toArray();b[c]=e}return this}};g.prototype.clone=function(){var a=new d;a.spatialReference=this.spatialReference;a.paths=h.clone(this.paths);
a.hasZ=this.hasZ;a.hasM=this.hasM;return a};g.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new p(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new p(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new p(a[0],a[1],a[2],a[3],this.spatialReference):new p(a[0],a[1],this.spatialReference)};g.prototype.insertPoint=function(a,b,e){if(!this._validateInputs(a,b,!0))return this;this.clearCache();c.updateSupportFromPoint(this,
e);Array.isArray(e)||(e=e.toArray());this.paths[a].splice(b,0,e);return this};g.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.paths.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new p(a,b)})};g.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new p(this.paths[a].splice(b,1)[0],this.spatialReference)};g.prototype.setPoint=function(a,b,e){if(!this._validateInputs(a,
b))return this;this.clearCache();c.updateSupportFromPoint(this,e);Array.isArray(e)||(e=e.toArray());this.paths[a][b]=e;return this};g.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};g.prototype.toJSON=function(a){return this.write(null,a)};var d;f([k.property({dependsOn:["hasM","hasZ","paths"]})],g.prototype,"cache",void 0);f([k.property({dependsOn:["cache"],readOnly:!0})],
g.prototype,"extent",null);f([k.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],g.prototype,"paths",void 0);f([k.writer("paths")],g.prototype,"writePaths",null);return g=d=f([k.subclass("esri.geometry.Polyline")],g)}(k.declared(g));d.prototype.toJSON.isDefaultToJSON=!0;return d})},"esri/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(d,
a,l,f,h,k){return function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.x=0;b.y=0;b.z=void 0;return b}l(b,a);d=b;b.prototype.normalizeCtorArgs=function(a,b){return"number"===typeof a?{x:a,y:b}:Array.isArray(a)?{x:a[0],y:a[1]}:a};b.prototype.clone=function(){return new d({x:this.x,y:this.y,z:this.z})};b.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};var d;f([k.property({type:Number})],b.prototype,"x",void 0);
f([k.property({type:Number})],b.prototype,"y",void 0);f([k.property({type:Number})],b.prototype,"z",void 0);return b=d=f([k.subclass("esri.geometry.ScreenPoint")],b)}(k.declared(h))})},"esri/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Mesh ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(d,a,l,f,h,k,b,g){function p(a){return void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax}function e(a){return void 0!==a.points}function c(a){return void 0!==
a.x&&void 0!==a.y}function n(a){return void 0!==a.paths}function m(a){return void 0!==a.rings}function q(a){return void 0!==a.vertexAttributes}function y(a){if(a){if(c(a))return k.fromJSON(a);if(n(a))return g.fromJSON(a);if(m(a))return b.fromJSON(a);if(e(a))return h.fromJSON(a);if(p(a))return l.fromJSON(a);if(q(a))return f.fromJSON(a)}return null}Object.defineProperty(a,"__esModule",{value:!0});a.fromJson=function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(u){console.warn(u.stack)}return y(a)};
a.isExtent=p;a.isMultipoint=e;a.isPoint=c;a.isPolyline=n;a.isPolygon=m;a.isMesh=q;a.fromJSON=y;a.getJsonType=function(a){if(a){if(c(a))return"esriGeometryPoint";if(n(a))return"esriGeometryPolyline";if(m(a))return"esriGeometryPolygon";if(p(a))return"esriGeometryEnvelope";if(e(a))return"esriGeometryMultipoint"}return null};var x={esriGeometryPoint:k,esriGeometryPolyline:g,esriGeometryPolygon:b,esriGeometryEnvelope:l,esriGeometryMultipoint:h};a.getGeometryType=function(a){return a&&x[a]||null}})},"esri/geometry/support/scaleUtils":function(){define("require exports ../../config ../../core/compilerUtils ../../core/kebabDictionary ../../core/wgs84Constants ./WKIDUnitConversion".split(" "),
function(d,a,l,f,h,k,b){function g(a){return y.fromJSON(a.toLowerCase())||null}function p(b){return e(b)||a.decDegToMeters}function e(a){var b,c,e;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?e=q.values[q[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=m.exec(c))&&a[1]&&(e=parseFloat(a[1].split(",")[1]));return e}function c(a){var b,c,e;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?e=q.units[q[b]]:c&&-1!==
c.search(/^PROJCS/i)&&(a=m.exec(c))&&a[1]&&(e=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&a[1]);return e?g(e):null}function n(b,c){c=p(c);return b/(c*a.inchesPerMeter*l.screenDPI)}Object.defineProperty(a,"__esModule",{value:!0});a.inchesPerMeter=39.37;a.decDegToMeters=k.wgs84Radius*Math.PI/180;var m=/UNIT\[([^\]]+)\]\]$/i,q=b,y=h.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",
chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});a.unitFromRESTJSON=g;a.unitToRESTJSON=function(a){return y.toJSON(a)||null};a.getMetersPerVerticalUnitForSR=function(a){a=p(a);return 1E5<a?1:a};a.getVerticalUnitStringForSR=function(a){return 1E5<p(a)?"meters":
c(a)};a.getMetersPerUnitForSR=p;a.getMetersPerUnit=e;a.getUnitString=c;a.getDefaultUnitSystem=function(a){if(!a)return null;a=c(a);switch(a){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric";
case null:case void 0:break;default:f.neverReached(a)}return null};a.getScale=function(b,c){c=c||b.extent;b=b.width;var g=e(c&&c.spatialReference);return c&&b?c.width/b*(g||a.decDegToMeters)*a.inchesPerMeter*l.screenDPI:0};a.getResolutionForScale=n;a.getExtentForScale=function(a,b){var c=a.extent;a=a.width;b=n(b,c.spatialReference);return c.clone().expand(b*a/c.width)}})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(d,a,l,f,h,k,b){return function(a){function g(b){b=a.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}l(g,a);e=g;g.prototype.clone=function(){return new e({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var e;f([k.property({type:b.Integer,json:{write:!0}})],g.prototype,"level",void 0);f([k.property({type:String,json:{write:!0}})],g.prototype,"levelValue",void 0);f([k.property({type:Number,json:{write:!0}})],g.prototype,
"resolution",void 0);f([k.property({type:Number,json:{write:!0}})],g.prototype,"scale",void 0);return g=e=f([k.subclass("esri.layers.support.LOD")],g)}(k.declared(h))})},"esri/support/arcadeUtils":function(){define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang ../core/promiseUtils ../renderers/visualVariables/support/sizeVariableUtils".split(" "),function(d,a,l,f,h,k,b,g){function p(a){var b;try{b=a?l.parseScript(a):null}catch(y){b=null}return b}function e(a){a=
p(a);return!!a&&l.scriptUsesGeometryEngine(a)}Object.defineProperty(a,"__esModule",{value:!0});var c=/^\$feature\./i,n={vars:{$feature:"any",$view:"any"},spatialReference:null};a.createSyntaxTree=p;a.createFunction=function(a,b){b=b||k.clone(n);a="string"===typeof a?p(a):a;if(!a)return null;var c;try{c=a?l.compileScript(a,b):null}catch(x){c=null}return c};a.createExecContext=function(a,b){return{vars:{$feature:null==a?new h:h.createFromGraphic(a),$view:b&&b.view},spatialReference:b&&b.sr}};a.createFeature=
function(a,b,c){return h.createFromGraphicLikeObject(b,a,c)};a.updateExecContext=function(a,b){a.vars.$feature=b};a.evalSyntaxTree=function(a,b){var c;try{c=l.executeScript(a,b,b.spatialReference)}catch(x){c=null}return c};a.executeFunction=function(a,b){var c;try{c=a?a(b,b.spatialReference):null}catch(x){c=null}return c};a.executeAsyncFunction=function(a,c){try{return a?a(c,c.spatialReference):b.resolve(null)}catch(y){return b.resolve(null)}};a.extractFieldNames=function(a){if(!a)return[];a="string"===
typeof a?p(a):a;if(!a)return[];var b=[];l.extractFieldLiterals(a).forEach(function(a){c.test(a)&&(a=a.replace(c,""),b.push(a))});b.sort();return b.filter(function(a,c){return 0===c||b[c-1]!==a})};a.dependsOnView=function(a){return l.referencesMember(a,"$view")};a.getViewInfo=function(a){if(a&&a.viewingMode&&null!=a.scale&&a.spatialReference)return{view:new f({viewingMode:a.viewingMode,scale:a.scale}),sr:a.spatialReference}};a.convertServiceUrlToWorkspace=function(a,b){var c=l.featureSetUtils();return c?
c.createFeatureSetCollectionFromService(a,b):null};a.convertFeatureLayerToFeatureSet=function(a,b){if(null===a)return null;var c=l.featureSetUtils();return c?c.constructFeatureSet(a,b):null};a.convertMapToFeatureSetCollection=function(a){if(null===a||null===a.map)return null;var b=l.featureSetUtils();return b?b.createFeatureSetCollectionFromMap(a.map,a.spatialReference):null};a.loadScriptDependencies=function(a,b,c){void 0===c&&(c=[]);return l.loadScriptDependencies(a,b,c)};a.enableGeometryOperations=
function(){return l.enableGeometrySupport()};a.enableFeatureSetOperations=function(){return l.enableFeatureSetSupport()};a.applyTextFormattingHTML=function(a){var b=/(\n)/gi;return"string"===typeof a?a.replace(b,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):a};a.hasGeometryOperations=function(a){if(!a)return!1;if("simple"===a.type||"class-breaks"===a.type||"unique-value"===a.type){var b=a.visualVariables,b=!!b&&b.some(function(a){var b=e(a.valueExpression);"size"===a.type&&(g.isSizeVariable(a.minSize)&&
(b=b||e(a.minSize.valueExpression)),g.isSizeVariable(a.maxSize)&&(b=b||e(a.maxSize.valueExpression)));return b});return"valueExpression"in a&&e(a.valueExpression)?!0:b}return"esri.layers.support.LabelClass"===a.declaredClass?(a=a.labelExpressionInfo&&a.labelExpressionInfo.expression,!(!a||!e(a))||!1):"esri.PopupTemplate"===a.declaredClass?!!a.expressionInfos&&a.expressionInfos.some(function(a){return e(a.expression)}):!1}})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis ../core/has ../core/promiseUtils".split(" "),
function(d,a,l,f,h,k,b,g){function p(a,c){if(null===C)throw Error("Async Arcade must be enabled for this script");return b("csp-restrictions")||!1===D?function(b,c){return C.executeScript(a,b,c)}:l.compileScript(a,c,!0)}function e(a,b){void 0===b&&(b=[]);return h.parseScript(a,b)}function c(a,b,c){if(!0===b.useAsync||!0===a.isAsync){if(null===C)throw Error("Async Arcade must be enabled for this script");return C.executeScript(a,b,c)}return f.executeScript(a,b,c)}function n(a,b){return f.referencesMember(a,
b)}function m(a){void 0===a.usesGeometry&&k.findScriptDependencies(a);return!0===a.usesGeometry}function q(){return A?A:A=g.create(function(a,b){d(["../geometry/geometryEngine","./functions/geomsync"],function(b,c){w=!0;c.setGeometryEngine(b);a(!0)},function(a){b(a)})})}function y(){return null!==H?H:H=l.enableAsyncSupport().then(function(){return g.create(function(a,b){d(["./arcadeAsyncRuntime"],function(c){try{C=c;c=0;for(var e=E;c<e.length;c++){var g=e[c];C.extend(g);l.extend(g,"async")}E=null;
a(!0)}catch(T){b(T)}},b)})})}function x(){return C?!0:!1}function t(){return F?F:F=y().then(function(){return g.create(function(a,b){d(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(c,e,g,f,d){try{G=c,C.extend([e,g,f,d]),l.extend([e,g,f,d],"async"),B=!0,a(!0)}catch(U){b(U)}},b)})})}function u(a){void 0===a.usesFeatureSet&&k.findScriptDependencies(a);return!0===a.usesFeatureSet}function z(a,b){if(b)for(var c=
0;c<b.length;c++)if(n(a,b[c]))return!0;return!1}Object.defineProperty(a,"__esModule",{value:!0});var D=function(a){try{return eval(a),!0}catch(O){return!1}}("function* test() {}"),B=!1,w=!1,C=null,E=[];a.compileScript=function(a,c){return!0===c.useAsync||!0===a.isAsync?p(a,c):b("csp-restrictions")?function(b,c){return f.executeScript(a,b,c)}:l.compileScript(a,c)};a.extend=function(a){f.extend(a);l.extend(a,"sync");null===C?E.push(a):(l.extend(a,"async"),C.extend(a))};a.parseScript=e;a.validateScript=
function(a,b,c){void 0===c&&(c="");return h.validateScript(a,b,c)};a.scriptCheck=function(a,b,c,e){void 0===e&&(e="");return h.scriptCheck(a,b,c,e)};a.parseAndExecuteScript=function(a,b,e,g){void 0===g&&(g=[]);a=h.parseScript(a,g);return c(a,b,e)};a.executeScript=c;a.referencesMember=n;a.referencesFunction=function(a,b){return f.referencesFunction(a,b)};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return h.extractFieldLiterals(a,b)};a.scriptUsesGeometryEngine=m;var A=null;a.enableGeometrySupport=
q;var H=null;a.enableAsyncSupport=y;a.isFeatureSetSupportEnabled=function(){return B};a.isAsyncEnabled=x;a.isGeometryEnabled=function(){return w};var F=null;a.enableFeatureSetSupport=t;a.scriptUsesFeatureSet=u;a.scriptIsAsync=function(a){void 0===a.isAsync&&k.findScriptDependencies(a);return!0===a.isAsync};a.loadScriptDependencies=function(a,b,c,f){void 0===c&&(c=[]);void 0===f&&(f=!1);return g.create(function(d,h){var n="string"===typeof a?e(a):a,k=[];n&&(!1===w&&(m(n)||f)&&k.push(q()),!1===x()&&
(!0===n.isAsync||b)&&k.push(y()),!1===B&&(u(n)||z(n,c))&&k.push(t()));k?g.all(k).then(function(){d(!0)},h):d(!0)})};a.scriptTouchesGeometry=function(a){if(m(a))return!0;a=k.findFunctionCalls(a,!0);return-1<a.indexOf("geometry")||-1<a.indexOf("feature")?!0:!1};var G=null;a.featureSetUtils=function(){return G}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D,B,w){function C(a,b,c){try{return c(a,null,b)}catch(Ja){throw Ja;}}function E(a){return a instanceof Error?y.reject(a):y.reject(Error(a))}function A(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return O(a,b);case "VariableDeclaration":for(var c=[],e=0;e<b.declarations.length;e++)c.push(A(a,b.declarations[e]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return N(a,
b);case "FunctionDeclaration":var f=b.id.name.toLowerCase(),d={isAsync:a.isAsync,applicationCache:void 0===a.applicationCache?null:a.applicationCache,spatialReference:a.spatialReference,console:a.console,lrucache:a.lrucache,services:a.services,symbols:a.symbols,mangleMap:a.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<d.depthCounter)throw Error("Exceeded maximum function depth");for(var c="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n",
h=0;h<b.params.length;h++){var n=b.params[h].name.toLowerCase(),k=K(n,a);d.localScope._SymbolsMap[n]=k;d.mangleMap[n]=k;c+="lscope['"+k+"']\x3darguments["+h.toString()+"];\n"}!0===a.isAsync?(c=c+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(N(d,b.body)+"\n return lastStatement;"),c+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(c+=N(d,b.body)+"\n return lastStatement; }, runtimeCtx))",c+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==a.globalScope[f]?
e="gscope['"+f+"']\x3d"+c:void 0!==a.globalScope._SymbolsMap[f]?e="gscope['"+a.globalScope._SymbolsMap[f]+"']\x3d"+c:(k=K(f,a),a.globalScope._SymbolsMap[f]=k,a.mangleMap[f]=k,e="gscope['"+k+"']\x3d"+c);return e;case "ReturnStatement":var m;m=null===b.argument?"return lc.voidOperation;":"return "+A(a,b.argument)+";";return m;case "IfStatement":if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(g.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var p=A(a,b.test),q=ca(a),l="var "+q+" \x3d "+p+";\n if ("+q+" \x3d\x3d\x3d true) {\n"+G(a,b.consequent)+"\n }\n",l=null!==b.alternate?l+("else if ("+q+"\x3d\x3d\x3dfalse)   { \n"+G(a,b.alternate)+"}\n"):l+("else if ("+q+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return l+="else { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var t;t="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+
A(a,b.expression)+" \n ":"lastStatement \x3d "+A(a,b.expression)+";";return t;case "AssignmentExpression":return F(a,b);case "UpdateExpression":return H(a,b);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(c+=A(a,b.init));var u=ca(a),C=ca(a),c=c+("var "+u+" \x3d true;")+"\n do { ";null!==b.update&&(c+=" if ("+u+"\x3d\x3d\x3dfalse) {\n "+A(a,b.update)+"  \n}\n "+u+"\x3dfalse; \n");null!==
b.test&&(c+="var "+C+" \x3d "+A(a,b.test)+";",c+="if ("+C+"\x3d\x3d\x3dfalse) { break; } else if ("+C+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");c+=A(a,b.body);null!==b.update&&(c+="\n "+A(a,b.update));return c+("\n"+u+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;");case "ForInStatement":var y=ca(a),x=ca(a),E=ca(a),z="var "+y+" \x3d "+A(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(z+=A(a,b.left));var w=
"VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,w=w.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[w]?c="lscope['"+w+"']":void 0!==a.localScope._SymbolsMap[w]&&(c="lscope['"+a.localScope._SymbolsMap[w]+"']"));""===c&&(void 0!==a.globalScope[w]?c="gscope['"+w+"']":void 0!==a.globalScope._SymbolsMap[w]&&(c="gscope['"+a.globalScope._SymbolsMap[w]+"']"));z=z+("if ("+y+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+
y+") || lc.isString("+y+")) {")+("var "+x+"\x3d"+y+".length; \n")+("for(var "+E+"\x3d0; "+E+"\x3c"+x+"; "+E+"++) {\n");z+=c+"\x3d"+E+";\n";z+=A(a,b.body);z+="\n}\n";z+=" lastStatement \x3d lc.voidOperation; \n";z+=" \n}\n";z+="else if (lc.isImmutableArray("+y+")) {";z=z+("var "+x+"\x3d"+y+".length(); \n")+("for(var "+E+"\x3d0; "+E+"\x3c"+x+"; "+E+"++) {\n");z+=c+"\x3d"+E+";\n";z+=A(a,b.body);z+="\n}\n";z+=" lastStatement \x3d lc.voidOperation; \n";z+=" \n}\n";z+="else if (( "+y+" instanceof lang.Dictionary) || ( "+
y+" instanceof lang.Feature)) {";z=z+("var "+x+"\x3d"+y+".keys(); \n")+("for(var "+E+"\x3d0; "+E+"\x3c"+x+".length; "+E+"++) {\n");z+=c+"\x3d"+x+"["+E+"];\n";z+=A(a,b.body);z+="\n}\n";z+=" lastStatement \x3d lc.voidOperation; \n";z+=" \n}\n";a.isAsync&&(z+="else if (lc.isFeatureSet("+y+")) {",z=z+("var "+x+"\x3d"+y+".iterator(runtimeCtx.progressTracker); \n")+("for(var "+E+"\x3dlang. graphicToFeature( yield "+x+".next(),"+y+"); "+E+"!\x3dnull; "+E+"\x3dlang. graphicToFeature( yield "+x+".next(),"+
y+")) {\n")+(c+"\x3d"+E+";\n"),z+=A(a,b.body),z+="\n}\n",z+=" lastStatement \x3d lc.voidOperation; \n",z+=" \n}\n");return z+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return J(a,b);case "MemberExpression":var D;try{c=void 0,c=!0===b.computed?A(a,b.property):"'"+b.property.name+"'",D="lang.member("+A(a,b.object)+","+c+")"}catch(aa){throw aa;}return D;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(g.nodeErrorMessage(b,
"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(g.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var B=b.callee.name.toLowerCase(),e="";null!==a.localScope&&(void 0!==a.localScope[B]?e="lscope['"+B+"']":void 0!==a.localScope._SymbolsMap[B]&&(e="lscope['"+a.localScope._SymbolsMap[B]+"']"));""===e&&(void 0!==a.globalScope[B]?e="gscope['"+B+"']":void 0!==a.globalScope._SymbolsMap[B]&&(e="gscope['"+a.globalScope._SymbolsMap[B]+"']"));if(""!==e){f=
"[";for(d=0;d<b.arguments.length;d++)0<d&&(f+=", "),f+=A(a,b.arguments[d]);f+="]";c=a.isAsync?"(yield lang.callfunc("+e+","+f+",runtimeCtx) )":"lang.callfunc("+e+","+f+",runtimeCtx)"}else throw Error(g.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(aa){throw aa;}return c;case "UnaryExpression":var U;try{U="lang.unary("+A(a,b.argument)+",'"+b.operator+"')"}catch(aa){throw aa;}return U;case "BinaryExpression":var X;try{X="lang.binary("+A(a,b.left)+","+A(a,b.right)+",'"+b.operator+"')"}catch(aa){throw aa;
}return X;case "LogicalExpression":var T;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(g.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(g.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)T="(lang.logicalCheck("+A(a,b.left)+") "+b.operator+" lang.logicalCheck("+A(a,b.right)+
"))";else throw Error(g.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}catch(aa){throw aa;}return T;case "ConditionalExpression":throw Error(g.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(e=0;e<b.elements.length;e++)"Literal"===b.elements[e].type?c.push(A(a,b.elements[e])):c.push("lang.aCheck("+A(a,b.elements[e])+",'ArrayExpression')");h="["+c.join(",")+"]"}catch(aa){throw aa;}return h;case "ObjectExpression":c="lang.dictionary([";for(e=0;e<b.properties.length;e++){var M=
b.properties[e],S="Identifier"===M.key.type?"'"+M.key.name+"'":A(a,M.key),Z=A(a,M.value);0<e&&(c+=",");c+="lang.strCheck("+S+",'ObjectExpression'),lang.aCheck("+Z+", 'ObjectExpression')"}return c+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(g.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));default:throw Error(g.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(aa){throw aa;}}function H(a,b){var c=null,e="";if("MemberExpression"===b.argument.type)return c=A(a,b.argument.object),
e=!0===b.argument.computed?A(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+e+",'"+b.operator+"',"+b.prefix+")";c=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+
"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function F(a,b){var c=A(a,b.right),e=null,g="";if("MemberExpression"===b.left.type)return e=A(a,b.left.object),g=!0===b.left.computed?A(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+e+","+g+",'"+b.operator+"',"+c+");";e=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[e])return"lscope['"+
e+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+e+"']); ";if(void 0!==a.localScope._SymbolsMap[e])return"lscope['"+a.localScope._SymbolsMap[e]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[e]+"']); "}if(void 0!==a.globalScope[e])return"gscope['"+e+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+e+"']); ";if(void 0!==a.globalScope._SymbolsMap[e])return"gscope['"+a.globalScope._SymbolsMap[e]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[e]+
"']); ";throw Error("Variable not recognised");}function G(a,b){return"BlockStatement"===b.type?A(a,b):"ReturnStatement"===b.type?A(a,b):"BreakStatement"===b.type?A(a,b):"ContinueStatement"===b.type?A(a,b):"UpdateExpression"===b.type?"lastStatement \x3d "+A(a,b)+";":"ExpressionStatement"===b.type?A(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+A(a,b)+";":A(a,b)}function N(a,b){for(var c="",e=0;e<b.body.length;e++)c="ReturnStatement"===b.body[e].type?c+(A(a,b.body[e])+" \n"):"BreakStatement"===
b.body[e].type?c+(A(a,b.body[e])+" \n"):"ContinueStatement"===b.body[e].type?c+(A(a,b.body[e])+" \n"):"UpdateExpression"===b.body[e].type?c+("lastStatement \x3d "+A(a,b.body[e])+"; \n"):"ObjectExpression"===b.body[e].type?c+("lastStatement \x3d "+A(a,b.body[e])+"; \n"):c+(A(a,b.body[e])+" \n");return c}function O(a,c){var e=null===c.init?null:A(a,c.init);e===b.voidOperation&&(e=null);c=c.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']\x3d"+e+";";if(void 0!==
a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']\x3d"+e+";";var g=K(c,a);a.localScope._SymbolsMap[c]=g;a.mangleMap[c]=g;return"lscope['"+g+"']\x3d"+e+";"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']\x3d"+e+";";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']\x3d"+e+";";g=K(c,a);a.globalScope._SymbolsMap[c]=g;a.mangleMap[c]=g;return"gscope['"+g+"']\x3d"+e+";"}function S(a,b,c){b=b.toLowerCase();switch(b){case "hasz":return a=
a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(ra++,b=a.spatialReference._arcadeCacheId=ra)),a=new l({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=
a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=a.cache._arcadeCacheId,void 0===b&&(ra++,b=ra,a.cache._arcadeCacheId=b),a=new h(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=a.cache._arcadeCacheId,void 0===b&&(ra++,b=ra,a.cache._arcadeCacheId=
b),a=new h(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=a.cache._arcadeCacheId,void 0===b&&(ra++,b=ra,a.cache._arcadeCacheId=b),a=new k(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(g.nodeErrorMessage(c,"RUNTIME","PROPERTYNOTFOUND"));}function J(a,b){try{var c=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+
c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";throw Error(g.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(Ja){throw Ja;}}function X(a){return null===a?"":b.isArray(a)||b.isImmutableArray(a)?"Array":b.isDate(a)?"Date":b.isString(a)?"String":b.isBoolean(a)?"Boolean":b.isNumber(a)?"Number":a instanceof
l?"Dictionary":a instanceof f?"Feature":a instanceof z?"Point":a instanceof D?"Polygon":a instanceof B?"Polyline":a instanceof u?"Multipoint":a instanceof x?"Extent":b.isFunctionParameter(a)?"Function":b.isFeatureSet(a)?"FeatureSet":b.isFeatureSetCollection(a)?"FeatureSetCollection":a===b.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function T(a,c,e,g){try{if(b.equalityTest(c[e],g))return c[e+1];var f=c.length-e;return 1===f?c[e]:2===f?null:3===f?c[e+2]:T(a,c,e+2,g)}catch(ya){throw ya;
}}function Z(a,c,e,g){try{if(!0===g)return c[e+1];if(3===c.length-e)return c[e+2];var f=c[e+2];if(!1===b.isBoolean(f))throw Error("WHEN needs boolean test conditions");return Z(a,c,e+2,f)}catch(ya){throw ya;}}function U(a,b){var c=a.length,e=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var g=U(a.slice(0,e),b);a=U(a.slice(e,c),b);for(c=[];0<g.length||0<a.length;)0<g.length&&0<a.length?(e=b(g[0],a[0]),isNaN(e)&&(e=0),0>=e?(c.push(g[0]),g=g.slice(1)):(c.push(a[0]),a=a.slice(1))):0<g.length?
(c.push(g[0]),g=g.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function M(a,b){try{var c=a.length,e=Math.floor(c/2);if(0===c)return y.resolve([]);if(1===c)return y.resolve([a[0]]);var g=[M(a.slice(0,e),b),M(a.slice(e,c),b)];return y.all(g).then(function(a){return fa(a[0],a[1],b,[])})}catch(ya){return y.reject(ya)}}function fa(a,b,c,e){return y.create(function(g,f){0<a.length||0<b.length?0<a.length&&0<b.length?c(a[0],b[0]).then(function(d){try{isNaN(d)&&(d=1),0>=d?(e.push(a[0]),a=a.slice(1)):
(e.push(b[0]),b=b.slice(1)),fa(a,b,c,e).then(function(a){g(a)},f)}catch(Aa){f(Aa)}},f):0<a.length?(e.push(a[0]),a=a.slice(1),fa(a,b,c,e).then(function(a){g(a)},f)):0<b.length&&(e.push(b[0]),b=b.slice(1),fa(a,b,c,e).then(function(a){g(a)},f)):g(e)})}function K(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}function ca(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function ba(a,b,c){var e={};a||(a={});c||(c={});e._SymbolsMap={};e.textformatting=
1;e.infinity=1;e.pi=1;for(var g in b)e[g]=1;for(g in c)e[g]=1;for(g in a)e[g]=1;return e}function ma(a,c){for(var e={mode:c,compiled:!0,functions:{},signatures:[],failDefferred:E,standardFunction:C,standardFunctionAsync:C,evaluateIdentifier:da},f=0;f<a.length;f++)a[f].registerFunctions(e);if("sync"===c){for(var d in e.functions)ka[d]=new b.NativeFunction(e.functions[d]),wa.prototype[d]=ka[d];for(f=0;f<e.signatures.length;f++)g.addFunctionDeclaration(e.signatures[f],"sync")}else{for(d in e.functions)Fa[d]=
new b.NativeFunction(e.functions[d]),ta.prototype[d]=Fa[d];for(f=0;f<e.signatures.length;f++)g.addFunctionDeclaration(e.signatures[f],"async")}}function da(a,b){b=b.name;if("_SymbolsMap"===b)throw"Illegal";if(0<a.localStack.length){if("_t"!==b.substr(0,2).toLowerCase()&&void 0!==a.localStack[a.localStack.length-1][b])return a.localStack[a.localStack.length-1][b];var c=a.mangleMap[b];if(void 0!==c&&void 0!==a.localStack[a.localStack.length-1][c])return a.localStack[a.localStack.length-1][c]}if("_t"!==
b.substr(0,2).toLowerCase()&&void 0!==a.globalScope[b]||1===a.globalScope._SymbolsMap[b])return a.globalScope[b];b=a.mangleMap[b];if(void 0!==b)return a.globalScope[b]}function ga(a){console.log(a)}Object.defineProperty(a,"__esModule",{value:!0});var ra=0,ka={};p.registerFunctions(ka,C);q.registerFunctions(ka,C);n.registerFunctions(ka,C);e.registerFunctions(ka,C);m.registerFunctions(ka,C);ka["typeof"]=function(a,c){return C(a,c,function(a,c,e){b.pcCheck(e,1,1);a=X(e[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");
return a})};ka.iif=function(a,c){try{return C(a,c,function(a,c,e){b.pcCheck(e,3,3);if(!1===b.isBoolean(e[0]))throw Error("IF Function must have a boolean test condition");return e[0]?e[1]:e[2]})}catch(Q){throw Q;}};ka.decode=function(a,b){try{return C(a,b,function(b,c,e){if(2>e.length)throw Error("Missing Parameters");if(2===e.length)return e[1];if(0===(e.length-1)%2)throw Error("Must have a default value result.");return T(a,e,1,e[0])})}catch(Q){throw Q;}};ka.when=function(a,c){try{return C(a,c,
function(c,e,g){if(3>g.length)throw Error("Missing Parameters");if(0===g.length%2)throw Error("Must have a default value result.");c=g[0];if(!1===b.isBoolean(c))throw Error("WHEN needs boolean test conditions");return Z(a,g,0,c)})}catch(Q){throw Q;}};ka.top=function(a,c){return C(a,c,function(a,c,e){b.pcCheck(e,2,2);if(b.isArray(e[0]))return b.toNumber(e[1])>=e[0].length?e[0].slice(0):e[0].slice(0,b.toNumber(e[1]));if(b.isImmutableArray(e[0]))return b.toNumber(e[1])>=e[0].length()?e[0].slice(0):e[0].slice(0,
b.toNumber(e[1]));throw Error("Top cannot accept this parameter type");})};ka.first=function(a,c){return C(a,c,function(a,c,e){b.pcCheck(e,1,1);return b.isArray(e[0])?0===e[0].length?null:e[0][0]:b.isImmutableArray(e[0])?0===e[0].length()?null:e[0].get(0):null})};ka.sort=function(a,c){return C(a,c,function(c,e,g){b.pcCheck(g,1,2);e=g[0];b.isImmutableArray(e)&&(e=e.toArray());if(!1===b.isArray(e))throw Error("Illegal Argument");if(1<g.length){if(!1===b.isFunctionParameter(g[1]))throw Error("Illegal Argument");
var f=function(a,b){return za.callfunc(g[1],[a,b],c)};return a.isAsync?M(e,f):e=U(e,function(a,b){return f(a,b)})}if(0===e.length)return[];for(var d={},h=0;h<e.length;h++){var n=X(e[h]);""!==n&&(d[n]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return e.slice(0);var h=0,n="",k;for(k in d)h++,n=k;return e=1<h||"String"===n?U(e,function(a,c){if(null===a||void 0===a||a===b.voidOperation)return null===
c||void 0===c||c===b.voidOperation?0:1;if(null===c||void 0===c||c===b.voidOperation)return-1;a=b.toString(a);c=b.toString(c);return a<c?-1:a===c?0:1}):"Number"===n?U(e,function(a,b){return a-b}):"Boolean"===n?U(e,function(a,b){return a===b?0:b?-1:1}):"Date"===n?U(e,function(a,b){return b-a}):e.slice(0)})};var Fa={},Ea;for(Ea in ka)Fa[Ea]=new b.NativeFunction(ka[Ea]);c.registerFunctions(ka,C);for(Ea in ka)ka[Ea]=new b.NativeFunction(ka[Ea]);var wa=function(){};wa.prototype=ka;var ta=function(){};ta.prototype=
Fa;a.functionHelper={fixSpatialReference:b.fixSpatialReference,parseArguments:function(a,b){for(var c=[],e=0;e<b.arguments.length;e++)c.push(A(a,b.arguments[e]));return c},standardFunction:C};a.extend=ma;a.executeScript=function(a,b,c){return a(b,c)};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return g.findFieldLiterals(a,b)};a.validateScript=function(a,b){return g.validateScript(a,b,"sync")};a.referencesMember=function(a,b){return g.referencesMember(a,b)};a.referencesFunction=function(a,
b){return g.referencesFunction(a,b)};var za={error:function(a,b,c){throw Error(g.nodeErrorMessage(a,b,c));},__awaiter:function(a,c,e,g){return y.create(function(e,f){function d(a){try{n(g.next(a))}catch(Oa){f(Oa)}}function h(a){try{n(g["throw"](a))}catch(Oa){f(Oa)}}function n(a){a.done?e(a.value):a.value&&b.isFeatureSet(a.value)?d(a.value):a.value&&a.value.then?a.value.then(d,h):d(a.value)}n((g=g.apply(a,c||[])).next())})},functionDepthchecker:function(a,b){return function(){b.depthCounter++;b.localStack.push([]);
if(64<b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);b.depthCounter--;--b.localStack.length;return c}},aCheck:function(a,c){if(b.isFunctionParameter(a))throw Error(g.nodeErrorMessage({type:c},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===b.voidOperation?null:a},Dictionary:l,Feature:f,dictionary:function(a){for(var c={},e=0;e<a.length;e+=2){if(b.isFunctionParameter(a[e+1]))throw Error("Illegal Argument");if(!1===b.isString(a[e]))throw Error("Illegal Argument");
c[a[e].toString()]=a[e+1]===b.voidOperation?null:a[e+1]}a=new l(c);a.immutable=!1;return a},strCheck:function(a,c){if(!1===b.isString(a))throw Error("Illegal Argument");return a},unary:function(a,c){if(b.isBoolean(a)){if("!"===c)return!a;if("-"===c)return-1*b.toNumber(a);if("+"===c)return 1*b.toNumber(a);throw Error(g.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===c)return-1*b.toNumber(a);if("+"===c)return 1*b.toNumber(a);throw Error(g.nodeErrorMessage({type:"UnaryExpression"},
"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===b.isBoolean(a))throw Error(g.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));return a},logical:function(a,c,e){if(b.isBoolean(a)&&b.isBoolean(c))switch(e){case "||":return a||c;case "\x26\x26":return a&&c;default:throw Error(g.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}else throw Error(g.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));},binary:function(a,c,e){switch(e){case "\x3d\x3d":return b.equalityTest(a,
c);case "\x3d":return b.equalityTest(a,c);case "!\x3d":return!b.equalityTest(a,c);case "\x3c":return b.greaterThanLessThan(a,c,e);case "\x3e":return b.greaterThanLessThan(a,c,e);case "\x3c\x3d":return b.greaterThanLessThan(a,c,e);case "\x3e\x3d":return b.greaterThanLessThan(a,c,e);case "+":return b.isString(a)||b.isString(c)?b.toString(a)+b.toString(c):b.toNumber(a)+b.toNumber(c);case "-":return b.toNumber(a)-b.toNumber(c);case "*":return b.toNumber(a)*b.toNumber(c);case "/":return b.toNumber(a)/
b.toNumber(c);case "%":return b.toNumber(a)%b.toNumber(c);default:throw Error(g.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,c,e){switch(c){case "\x3d":return a===b.voidOperation?null:a;case "/\x3d":return b.toNumber(e)/b.toNumber(a);case "*\x3d":return b.toNumber(e)*b.toNumber(a);case "-\x3d":return b.toNumber(e)-b.toNumber(a);case "+\x3d":return b.isString(e)||b.isString(a)?b.toString(e)+b.toString(a):b.toNumber(e)+b.toNumber(a);case "%\x3d":return b.toNumber(e)%
b.toNumber(a);default:throw Error(g.nodeErrorMessage("AssignmentExpression","RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,c,e,g){var f=b.toNumber(a[c]);a[c]="++"===e?f+1:f-1;return!1===g?f:"++"===e?f+1:f-1},graphicToFeature:function(a,b){return null===a?null:f.createFromGraphicLikeObject(a.geometry,a.attributes,b)},memberupdate:function(a,c,e,g){var d;if(b.isArray(a))if(b.isNumber(c)){0>c&&(c=a.length+c);if(0>c||c>=a.length)throw Error("Assignment outside of array bounds");d=b.toNumber(a[c]);
a[c]="++"===e?d+1:d-1}else throw Error("Invalid Parameter");else if(a instanceof l){if(!1===b.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))d=b.toNumber(a.field(c)),a.setField(c,"++"===e?d+1:d-1);else throw Error("Invalid Parameter");}else if(a instanceof f){if(!1===b.isString(c))throw Error("Feature accessor must be a string");if(!0===a.hasField(c))d=b.toNumber(a.field(c)),a.setField(c,"++"===e?d+1:d-1);else throw Error("Invalid Parameter");}else{if(b.isImmutableArray(a))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}return!1===g?d:"++"===e?d+1:d-1},assignmember:function(a,c,e,g){if(b.isArray(a))if(b.isNumber(c)){0>c&&(c=a.length+c);if(0>c||c>a.length)throw Error("Assignment outside of array bounds");if(c===a.length&&"\x3d"!==e)throw Error("Invalid Parameter");a[c]=this.assign(g,e,a[c])}else throw Error("Invalid Parameter");else if(a instanceof l){if(!1===b.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))a.setField(c,this.assign(g,e,a.field(c)));
else{if("\x3d"!==e)throw Error("Invalid Parameter");a.setField(c,this.assign(g,e,null))}}else if(a instanceof f){if(!1===b.isString(c))throw Error("Feature accessor must be a string");if(!0===a.hasField(c))a.setField(c,this.assign(g,e,a.field(c)));else{if("\x3d"!==e)throw Error("Invalid Parameter");a.setField(c,this.assign(g,e,null))}}else{if(b.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,c){if(null===a)throw Error(g.nodeErrorMessage("MemberExpression",
"RUNTIME","NOTFOUND"));if(a instanceof l||a instanceof f){if(b.isString(c))return a.field(c)}else if(a instanceof t){if(b.isString(c))return S(a,c,"MemberExpression")}else if(b.isArray(a)){if(b.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[c]}}else if(b.isString(a)){if(b.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(g.nodeErrorMessage("MemberExpression",
"RUNTIME","OUTOFBOUNDS"));return a[c]}}else if(b.isImmutableArray(a)&&b.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length()+c);if(c>=a.length()||0>c)throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a.get(c)}throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(a,c,e){return a instanceof b.NativeFunction?a.fn(e,c):a instanceof b.SizzleFunction?a.fn.apply(this,c):a.apply(this,c)}};a.compileScript=function(a,c,e){void 0===
c&&(c=null);void 0===e&&(e=!1);null===c&&(c={vars:{},customfunctions:{}});c={isAsync:e,globalScope:ba(c.vars,e?Fa:ka,c.customfunctions),localScope:null,mangleMap:{},console:ga,lrucache:c.lrucache,services:c.services,symbols:{symbolCounter:0}};a=A(c,a.body[0].body);""===a&&(a="lc.voidOperation;");c={lc:b,lang:za,mangles:c.mangleMap,postProcess:function(a){a instanceof b.ReturnResult&&(a=a.value);a instanceof b.ImplicitResult&&(a=a.value);a===b.voidOperation&&(a=null);if(a===b.breakResult)throw Error("Cannot return BREAK");
if(a===b.continueResult)throw Error("Cannot return CONTINUE");if(b.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,b,c){b||(b=new w({wkid:102100}));var e=a.vars,g=a.customfunctions,d=c?new ta:new wa;e||(e={});g||(g={});var h=new l({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});h.immutable=!1;d._SymbolsMap={textformatting:1,infinity:1,pi:1};d.textformatting=h;d.infinity=Number.POSITIVE_INFINITY;d.pi=Math.PI;for(var n in g)d[n]=
g[n],d._SymbolsMap[n]=1;for(n in e)d._SymbolsMap[n]=1,d[n]=e[n]&&"esri.Graphic"===e[n].declaredClass?f.createFromGraphic(e[n]):e[n];return{localStack:[],isAsync:c,mangleMap:this.mangles,spatialReference:b,globalScope:d,progressTracker:void 0===a.progressTracker||null===a.progressTracker?y.createDeferred().promise:a.progressTracker,localScope:null,services:a.services,console:a.console?a.console:ga,lrucache:a.lrucache,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?
null:a.applicationCache}}};return(new Function("context","spatialReference",e?"var runtimeCtx\x3dthis.prepare(context, spatialReference, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+a+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); });":
"var runtimeCtx\x3dthis.prepare(context, spatialReference, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+a+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(c)};a.enableAsyncSupport=function(){return y.create(function(a,b){d(["./functions/geomasync"],function(b){ma([b],"async");a(!0)},function(a){b(a)})})}})},"esri/arcade/Dictionary":function(){define(["require",
"exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(d,a,l,f,h){return function(){function a(b){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=b instanceof a?b.attributes:void 0===b?{}:null===b?{}:b}a.prototype.field=function(a){var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var f in this.attributes)if(f.toLowerCase()===b)return this.attributes[f];throw Error("Field not Found");};a.prototype.setField=
function(a,g){if(this.immutable)throw Error("Dictionary is Immutable");var b=a.toLowerCase();if(void 0===this.attributes[a])for(var e in this.attributes)if(e.toLowerCase()===b){this.attributes[e]=g;return}this.attributes[a]=g};a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var f in this.attributes)if(f.toLowerCase()===b)return!0;return!1};a.prototype.keys=function(){var a=[],g;for(g in this.attributes)a.push(g);return a=a.sort()};a.prototype.castToText=
function(){var a="",g;for(g in this.attributes){""!==a&&(a+=",");var d=this.attributes[g];null==d?a+=JSON.stringify(g)+":null":f.isBoolean(d)||f.isNumber(d)||f.isString(d)?a+=JSON.stringify(g)+":"+JSON.stringify(d):d instanceof h?a+=JSON.stringify(g)+":"+f.toStringExplicit(d):d instanceof l?a+=JSON.stringify(g)+":"+f.toStringExplicit(d):d instanceof Array?a+=JSON.stringify(g)+":"+f.toStringExplicit(d):d instanceof Date?a+=JSON.stringify(g)+":"+JSON.stringify(d):null!==d&&"object"===typeof d&&void 0!==
d.castToText&&(a+=JSON.stringify(g)+":"+d.castToText())}return"{"+a+"}"};return a}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(d,a){return function(){function a(a){void 0===a&&(a=[]);this._elements=a}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(a){return this._elements[a]};a.prototype.toArray=function(){for(var a=[],d=0;d<this.length();d++)a.push(this.get(d));return a};return a}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q){function y(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function x(a){return a instanceof T||a instanceof h||a instanceof Z}function t(a){return"string"===typeof a||a instanceof String}function u(a){return"boolean"===typeof a}function z(a){return"number"===typeof a}function D(a){return a instanceof Array}function B(a){return a instanceof Date}function w(a,b){if(!1===isNaN(a)){if(void 0===b||
null===b||""===b)return a.toString();b=y(b,"\u2030","");b=y(b,"\u00a4","");return l.format(a,{pattern:b})}return a.toString()}function C(a,b){a=f(a);return void 0===b||null===b||""===b?a.format():a.format(E(b))}function E(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function A(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function H(c,e){if(c===e||null===c&&e===a.voidOperation||null===e&&c===a.voidOperation)return!0;
if(B(c)&&B(e))return c.getTime()===e.getTime();if(c instanceof b||c instanceof g)return c.equalityTest(e);if(c instanceof n&&e instanceof n){var f=void 0,d=void 0,f=c.cache._arcadeCacheId,d=e.cache._arcadeCacheId;if(void 0!==f&&null!==f)return f===d}return void 0!==c&&void 0!==e&&null!==c&&null!==e&&"object"===typeof c&&"object"===typeof e&&(c._arcadeCacheId===e._arcadeCacheId&&void 0!==c._arcadeCacheId&&null!==c._arcadeCacheId||c._underlyingGraphic===e._underlyingGraphic&&void 0!==c._underlyingGraphic&&
null!==c._underlyingGraphic)?!0:!1}function F(a,b){if(t(a))return a;if(null===a)return"";if(z(a))return w(a,b);if(u(a))return a.toString();if(B(a))return C(a,b);if(a instanceof e)return JSON.stringify(a.toJSON());if(D(a)){b=[];for(var c=0;c<a.length;c++)b[c]=N(a[c]);return"["+b.join(",")+"]"}if(a instanceof k){b=[];for(c=0;c<a.length();c++)b[c]=N(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():x(a)?"object, Function":""}function G(a,b){if(t(a))return a;
if(null===a)return"";if(z(a))return w(a,b);if(u(a))return a.toString();if(B(a))return C(a,b);if(a instanceof e)return a instanceof p?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+a.zmax.toString()+",":"")+(a.hasM?'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+J(a.spatialReference)+"}":J(a.toJSON(),function(a,
b){return a.key===b.key?0:"spatialReference"===a.key?1:"spatialReference"===b.key||a.key<b.key?-1:a.key>b.key?1:0});if(D(a)){b=[];for(var c=0;c<a.length;c++)b[c]=N(a[c]);return"["+b.join(",")+"]"}if(a instanceof k){b=[];for(c=0;c<a.length();c++)b[c]=N(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():x(a)?"object, Function":""}function N(a){if(null!==a){if(u(a)||z(a)||t(a))return JSON.stringify(a);if(a instanceof e||a instanceof k||a instanceof
Array)return G(a);if(a instanceof Date)return JSON.stringify(C(a,""));if(null!==a&&"object"===typeof a&&void 0!==a.castToText)return a.castToText()}return"null"}function O(b,c){return z(b)?b:null===b||""===b?0:B(b)?NaN:u(b)?b?1:0:D(b)||""===b||void 0===b?NaN:void 0!==c&&t(b)?(c=y(c,"\u2030",""),c=y(c,"\u00a4",""),l.parse(b,{pattern:c})):b===a.voidOperation?0:Number(b)}function S(a,b){var c;b.fields.some(function(b){b.name===a&&(c=b.domain);return!!c});return c}function J(a,b){b||(b={});"function"===
typeof b&&(b={cmp:b});var c="boolean"===typeof b.cycles?b.cycles:!1,e=b.cmp&&function(a){return function(b){return function(c,e){return a({key:c,value:b[c]},{key:e,value:b[e]})}}}(b.cmp),g=[];return function ma(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var b,f;if(Array.isArray(a)){f="[";for(b=0;b<a.length;b++)b&&(f+=","),f+=ma(a[b])||"null";return f+"]"}if(null===
a)return"null";if(-1!==g.indexOf(a)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var d=g.push(a)-1,h=Object.keys(a).sort(e&&e(a));f="";for(b=0;b<h.length;b++){var n=h[b],k=ma(a[n]);k&&(f&&(f+=","),f+=JSON.stringify(n)+":"+k)}g.splice(d,1);return"{"+f+"}"}}(a)}Object.defineProperty(a,"__esModule",{value:!0});d=function(){return function(a){this.value=a}}();a.ReturnResultE=d;var X=function(){return function(a){this.value=a}}();a.ImplicitResultE=
X;var T=function(){return function(a){this.fn=a}}();a.NativeFunctionE=T;var Z=function(){return function(a){this.fn=a}}();a.SizzleFunctionE=Z;a.NativeFunction=T;a.ImplicitResult=X;a.ReturnResult=d;a.SizzleFunction=Z;a.voidOperation={type:"VOID"};a.breakResult={type:"BREAK"};a.continueResult={type:"CONTINUE"};a.multiReplace=y;a.isFunctionParameter=x;a.isSimpleType=function(b){return t(b)||z(b)||B(b)||u(b)||null===b||b===a.voidOperation||"number"===typeof b?!0:!1};a.defaultUndefined=function(a,b){return void 0===
a?b:a};a.isString=t;a.isBoolean=u;a.isNumber=z;a.isArray=D;a.isFeatureSet=function(a){return a&&a.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===a.declaredRootClass};a.isFeatureSetCollection=function(a){return a&&a.declaredRootClass&&"esri.arcade.featureSetCollection"===a.declaredRootClass};a.isImmutableArray=function(a){return a instanceof k};a.isDate=B;a.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};a.generateUUID=
function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};a.formatNumber=w;a.formatDate=C;a.standardiseDateFormat=E;a.greaterThanLessThan=function(b,c,e){if(null===b){if(null===c||c===a.voidOperation)return A(null,null,e);if(z(c))return A(0,c,e);if(t(c)||u(c))return A(0,O(c),e);if(B(c))return A(0,c.getTime(),e)}if(b===a.voidOperation){if(null===c||c===a.voidOperation)return A(null,
null,e);if(z(c))return A(0,c,e);if(t(c)||u(c))return A(0,O(c),e);if(B(c))return A(0,c.getTime(),e)}else if(z(b)){if(z(c))return A(b,c,e);if(u(c))return A(b,O(c),e);if(null===c||c===a.voidOperation)return A(b,0,e);if(t(c))return A(b,O(c),e);if(B(c))return A(b,c.getTime(),e)}else if(t(b)){if(t(c))return A(F(b),F(c),e);if(B(c))return A(O(b),c.getTime(),e);if(z(c))return A(O(b),c,e);if(null===c||c===a.voidOperation)return A(O(b),0,e);if(u(c))return A(O(b),O(c),e)}else if(B(b)){if(B(c))return A(b,c,e);
if(null===c||c===a.voidOperation)return A(b.getTime(),0,e);if(z(c))return A(b.getTime(),c,e);if(u(c)||t(c))return A(b.getTime(),O(c),e)}else if(u(b)){if(u(c))return A(b,c,e);if(z(c))return A(O(b),O(c),e);if(B(c))return A(O(b),c.getTime(),e);if(null===c||c===a.voidOperation)return A(O(b),0,e);if(t(c))return A(O(b),O(c),e)}return!H(b,c)||"\x3c\x3d"!==e&&"\x3e\x3d"!==e?!1:!0};a.equalityTest=H;a.toString=F;a.toNumberArray=function(a){var b=[];if(!1===D(a))return null;if(a instanceof k){for(var c=0;c<
a.length();c++)b[c]=O(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=O(a[c]);return b};a.toStringExplicit=G;a.toNumber=O;a.toDate=function(a,b){return B(a)?a:t(a)&&(a=f(a,[void 0===b||null===b||""===b?f.ISO_8601:b]),a.isValid())?a.toDate():null};a.toDateM=function(a,b){return B(a)?f(a):t(a)&&(a=f(a,[void 0===b||null===b||""===b?f.ISO_8601:b]),a.isValid())?a:null};a.toBoolean=function(a){if(u(a))return a;if(t(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(z(a))return 0===a||isNaN(a)?!1:!0;return!1};
a.fixSpatialReference=function(a,b){if(null===a||void 0===a)return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};a.fixNullGeometry=function(a){return null===a?null:a instanceof n?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof m?0===a.rings.length?null:a:a instanceof q?0===a.paths.length?null:a:a instanceof c?0===a.points.length?null:a:a instanceof p?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null};a.getDomainValue=function(a,b){if(!a||
!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?F(b):O(b);for(var e=0;e<a.domain.codedValues.length;e++){var g=a.domain.codedValues[e];g.code===b&&(c=g)}return null===c?null:c.name};a.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=F(b);for(var e=0;e<a.domain.codedValues.length;e++){var g=a.domain.codedValues[e];g.name===b&&(c=g)}return null===c?null:c.code};a.getDomain=function(a,b,c,e){void 0===c&&(c=null);if(!b||!b.fields)return null;
for(var g=null,f=0;f<b.fields.length;f++){var d=b.fields[f];d.name.toLowerCase()===a.toString().toLowerCase()&&(g=d)}if(null===g)return null;var h,n;e||(e=c&&b.typeIdField&&c._field(b.typeIdField));null!=e&&b.types.some(function(a){return a.id===e?((h=a.domains&&a.domains[g.name])&&"inherited"===h.type&&(h=S(g.name,b),n=!0),!0):!1});n||h||(h=S(a,b));return{field:g,domain:h}};a.stableStringify=J;a.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var b=[],c=0;c<a.length;c++){var e=
a[c];e&&e.declaredClass&&"esri.arcade.Feature"===e.declaredClass?b.push(e.geometry()):b.push(e)}return b}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(d,a,l){return l})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});var h={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,
"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-nz":1,es:1,"es-do":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};a.load=function(a,b,g){a=l.locale;var d=a in h;if(!d){var e=a.split("-");1<e.length&&e[0]in h&&(a=e[0],d=!0)}d?b(["moment/locale/"+a],function(){g(f)}):g(f)}})},"moment/moment":function(){(function(d,a){"object"===typeof exports&&
"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):d.moment=a()})(this,function(){function d(){return jd.apply(null,arguments)}function a(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function l(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function f(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function h(a){return void 0===
a}function k(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function b(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function g(a,b){var c=[],e;for(e=0;e<a.length;++e)c.push(b(a[e],e));return c}function p(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function e(a,b){for(var c in b)p(b,c)&&(a[c]=b[c]);p(b,"toString")&&(a.toString=b.toString);p(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function c(a,b,c,e){return ib(a,
b,c,e,!0).utc()}function n(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function m(a){if(null==a._isValid){var b=n(a),c=kd.call(b.parsedDateParts,function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&
!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function q(a){var b=c(NaN);null!=a?e(n(b),a):n(b).userInvalidated=!0;return b}function y(a,b){var c,e,g;h(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);h(b._i)||(a._i=b._i);h(b._f)||(a._f=b._f);h(b._l)||(a._l=b._l);h(b._strict)||(a._strict=b._strict);h(b._tzm)||(a._tzm=
b._tzm);h(b._isUTC)||(a._isUTC=b._isUTC);h(b._offset)||(a._offset=b._offset);h(b._pf)||(a._pf=n(b));h(b._locale)||(a._locale=b._locale);if(0<Yc.length)for(c=0;c<Yc.length;c++)e=Yc[c],g=b[e],h(g)||(a[e]=g);return a}function x(a){y(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Zc&&(Zc=!0,d.updateOffset(this),Zc=!1)}function t(a){return a instanceof x||null!=a&&null!=a._isAMomentObject}function u(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function z(a){a=
+a;var b=0;0!==a&&isFinite(a)&&(b=u(a));return b}function D(a,b,c){var e=Math.min(a.length,b.length),g=Math.abs(a.length-b.length),f=0,d;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&z(a[d])!==z(b[d]))&&f++;return f+g}function B(a){!1===d.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function w(a,b){var c=!0;return e(function(){null!=d.deprecationHandler&&d.deprecationHandler(null,a);if(c){for(var e=[],g,f=0;f<arguments.length;f++){g="";if("object"===
typeof arguments[f]){g+="\n["+f+"] ";for(var h in arguments[0])g+=h+": "+arguments[0][h]+", ";g=g.slice(0,-2)}else g=arguments[f];e.push(g)}B(a+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+Error().stack);c=!1}return b.apply(this,arguments)},b)}function C(a,b){null!=d.deprecationHandler&&d.deprecationHandler(a,b);ld[a]||(B(b),ld[a]=!0)}function E(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function A(a,b){var c=e({},a),g;for(g in b)p(b,g)&&
(l(a[g])&&l(b[g])?(c[g]={},e(c[g],a[g]),e(c[g],b[g])):null!=b[g]?c[g]=b[g]:delete c[g]);for(g in a)p(a,g)&&!p(b,g)&&l(a[g])&&(c[g]=e({},c[g]));return c}function H(a){null!=a&&this.set(a)}function F(a,b){var c=a.toLowerCase();pb[c]=pb[c+"s"]=pb[b]=a}function G(a){return"string"===typeof a?pb[a]||pb[a.toLowerCase()]:void 0}function N(a){var b={},c,e;for(e in a)p(a,e)&&(c=G(e))&&(b[c]=a[e]);return b}function O(a){var b=[],c;for(c in a)b.push({unit:c,priority:Ha[c]});b.sort(function(a,b){return a.priority-
b.priority});return b}function S(a,b,c){var e=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-e.length)).toString().substr(1)+e}function J(a,b,c,e){var g=e;"string"===typeof e&&(g=function(){return this[e]()});a&&(jb[a]=g);b&&(jb[b[0]]=function(){return S(g.apply(this,arguments),b[1],b[2])});c&&(jb[c]=function(){return this.localeData().ordinal(g.apply(this,arguments),a)})}function X(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function T(a){var b=a.match(Zb),
c,e;c=0;for(e=b.length;c<e;c++)b[c]=jb[b[c]]?jb[b[c]]:X(b[c]);return function(c){var g="",f;for(f=0;f<e;f++)g+=E(b[f])?b[f].call(c,a):b[f];return g}}function Z(a,b){if(!a.isValid())return a.localeData().invalidDate();b=U(b,a.localeData());$b[b]=$b[b]||T(b);return $b[b](a)}function U(a,b){function c(a){return b.longDateFormat(a)||a}var e=5;for(Kb.lastIndex=0;0<=e&&Kb.test(a);)a=a.replace(Kb,c),Kb.lastIndex=0,--e;return a}function M(a,b,c){$c[a]=E(b)?b:function(a,e){return a&&c?c:b}}function fa(a,b){return p($c,
a)?$c[a](b._strict,b._locale):new RegExp(K(a))}function K(a){return ca(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,e,g){return b||c||e||g}))}function ca(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function ba(a,b){var c,e=b;"string"===typeof a&&(a=[a]);k(b)&&(e=function(a,c){c[b]=z(a)});for(c=0;c<a.length;c++)Eb[a[c]]=e}function ma(a,b){ba(a,function(a,c,e,g){e._w=e._w||{};b(a,e._w,e,g)})}function da(a){return 0===a%4&&0!==a%100||0===a%400}function ga(a,
b){return function(c){return null!=c?(ka(this,a,c),d.updateOffset(this,b),this):ra(this,a)}}function ra(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function ka(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&da(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),Fa(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)}function Fa(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?da(a+(b-c)/12)?29:28:31-c%7%2}function Ea(a,
b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=z(b);else if(b=a.localeData().monthsParse(b),!k(b))return a;c=Math.min(a.date(),Fa(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function wa(a){return null!=a?(Ea(this,a),d.updateOffset(this,!0),this):ra(this,"Month")}function ta(){function a(a,b){return b.length-a.length}var b=[],e=[],g=[],f,d;for(f=0;12>f;f++)d=c([2E3,f]),b.push(this.monthsShort(d,"")),e.push(this.months(d,"")),g.push(this.months(d,
"")),g.push(this.monthsShort(d,""));b.sort(a);e.sort(a);g.sort(a);for(f=0;12>f;f++)b[f]=ca(b[f]),e[f]=ca(e[f]);for(f=0;24>f;f++)g[f]=ca(g[f]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+g.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}function za(a,b,c,e,g,f,d){b=new Date(a,b,c,e,g,f,d);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function Ga(a){var b=new Date(Date.UTC.apply(null,
arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function Ia(a,b,c){c=7+b-c;return-((7+Ga(a,0,c).getUTCDay()-b)%7)+c-1}function Q(a,b,c,e,g){c=(7+c-e)%7;e=Ia(a,e,g);e=1+7*(b-1)+c+e;0>=e?(b=a-1,a=(da(b)?366:365)+e):e>(da(a)?366:365)?(b=a+1,a=e-(da(a)?366:365)):(b=a,a=e);return{year:b,dayOfYear:a}}function Ja(a,b,c){var e=Ia(a.year(),b,c),e=Math.floor((a.dayOfYear()-e-1)/7)+1;1>e?(a=a.year()-1,b=e+cb(a,b,c)):e>cb(a.year(),b,c)?(b=e-cb(a.year(),b,c),a=a.year()+1):(a=
a.year(),b=e);return{week:b,year:a}}function cb(a,b,c){var e=Ia(a,b,c);b=Ia(a+1,b,c);return((da(a)?366:365)-e+b)/7}function ya(a,b,e){var g,f;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],g=0;7>g;++g)f=c([2E3,1]).day(g),this._minWeekdaysParse[g]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[g]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[g]=this.weekdays(f,"").toLocaleLowerCase();
if(e)b="dddd"===b?Ba.call(this._weekdaysParse,a):"ddd"===b?Ba.call(this._shortWeekdaysParse,a):Ba.call(this._minWeekdaysParse,a);else if("dddd"===b){b=Ba.call(this._weekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=Ba.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._weekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._minWeekdaysParse,a)}else{b=Ba.call(this._minWeekdaysParse,a);if(-1!==
b)return b;b=Ba.call(this._weekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._shortWeekdaysParse,a)}return-1!==b?b:null}function r(){function a(a,b){return b.length-a.length}var b=[],e=[],g=[],f=[],d,h,n,k;for(d=0;7>d;d++)h=c([2E3,1]).day(d),n=this.weekdaysMin(h,""),k=this.weekdaysShort(h,""),h=this.weekdays(h,""),b.push(n),e.push(k),g.push(h),f.push(n),f.push(k),f.push(h);b.sort(a);e.sort(a);g.sort(a);f.sort(a);for(d=0;7>d;d++)e[d]=ca(e[d]),g[d]=ca(g[d]),f[d]=ca(f[d]);this._weekdaysMinRegex=this._weekdaysShortRegex=
this._weekdaysRegex=new RegExp("^("+f.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+g.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function Aa(){return this.hours()%12||12}function $a(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function zb(a,b){return b._meridiemParse}function Oa(a){return a?a.toLowerCase().replace("_","-"):a}function Ua(a){var b=
null;if(!La[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=jc._abbr,require("./locale/"+a),Va(b)}catch(Rd){}return La[a]}function Va(a,b){a&&((b=h(b)?Wa(a):db(a,b))?jc=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return jc._abbr}function db(a,b){if(null!==b){var c;c=md;b.abbr=a;if(null!=La[a])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
c=La[a]._config;else if(null!=b.parentLocale)if(null!=La[b.parentLocale])c=La[b.parentLocale]._config;else if(c=Ua(b.parentLocale),null!=c)c=c._config;else return kc[b.parentLocale]||(kc[b.parentLocale]=[]),kc[b.parentLocale].push({name:a,config:b}),null;La[a]=new H(A(c,b));kc[a]&&kc[a].forEach(function(a){db(a.name,a.config)});Va(a);return La[a]}delete La[a];return null}function Wa(b){var c;b&&b._locale&&b._locale._abbr&&(b=b._locale._abbr);if(!b)return jc;if(!a(b)){if(c=Ua(b))return c;b=[b]}a:{c=
0;for(var e,g,f,d;c<b.length;){d=Oa(b[c]).split("-");e=d.length;for(g=(g=Oa(b[c+1]))?g.split("-"):null;0<e;){if(f=Ua(d.slice(0,e).join("-"))){b=f;break a}if(g&&g.length>=e&&D(d,g,!0)>=e-1)break;e--}c++}b=jc}return b}function kb(a){var b;(b=a._a)&&-2===n(a).overflow&&(b=0>b[Ab]||11<b[Ab]?Ab:1>b[qb]||b[qb]>Fa(b[Sa],b[Ab])?qb:0>b[Ma]||24<b[Ma]||24===b[Ma]&&(0!==b[lb]||0!==b[Bb]||0!==b[Lb])?Ma:0>b[lb]||59<b[lb]?lb:0>b[Bb]||59<b[Bb]?Bb:0>b[Lb]||999<b[Lb]?Lb:-1,n(a)._overflowDayOfYear&&(b<Sa||b>qb)&&(b=
qb),n(a)._overflowWeeks&&-1===b&&(b=Ac),n(a)._overflowWeekday&&-1===b&&(b=lc),n(a).overflow=b);return a}function Ra(a,b,c){return null!=a?a:null!=b?b:c}function Ka(a){var b,c=[],e;if(!a._d){e=new Date(d.now());e=a._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(a._w&&null==a._a[qb]&&null==a._a[Ab]){var g,f,h,k,m,p;g=a._w;if(null!=g.GG||null!=g.W||null!=g.E){if(m=1,p=4,f=Ra(g.GG,a._a[Sa],Ja(P(),1,4).year),h=Ra(g.W,1),k=Ra(g.E,1),1>k||7<k)b=
!0}else if(m=a._locale._week.dow,p=a._locale._week.doy,h=Ja(P(),m,p),f=Ra(g.gg,a._a[Sa],h.year),h=Ra(g.w,h.week),null!=g.d){if(k=g.d,0>k||6<k)b=!0}else if(null!=g.e){if(k=g.e+m,0>g.e||6<g.e)b=!0}else k=m;1>h||h>cb(f,m,p)?n(a)._overflowWeeks=!0:null!=b?n(a)._overflowWeekday=!0:(b=Q(f,h,k,m,p),a._a[Sa]=b.year,a._dayOfYear=b.dayOfYear)}if(null!=a._dayOfYear){b=Ra(a._a[Sa],e[Sa]);if(a._dayOfYear>(da(b)?366:365)||0===a._dayOfYear)n(a)._overflowDayOfYear=!0;b=Ga(b,0,a._dayOfYear);a._a[Ab]=b.getUTCMonth();
a._a[qb]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=c[b]=e[b];for(;7>b;b++)a._a[b]=c[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[Ma]&&0===a._a[lb]&&0===a._a[Bb]&&0===a._a[Lb]&&(a._nextDay=!0,a._a[Ma]=0);a._d=(a._useUTC?Ga:za).apply(null,c);c=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[Ma]=24);a._w&&"undefined"!==typeof a._w.d&&a._w.d!==c&&(n(a).weekdayMismatch=!0)}}function W(a){var b,c;b=a._i;var e=zd.exec(b)||
Ad.exec(b),g,f,d,h;if(e){n(a).iso=!0;b=0;for(c=Bc.length;b<c;b++)if(Bc[b][1].exec(e[1])){f=Bc[b][0];g=!1!==Bc[b][2];break}if(null==f)a._isValid=!1;else{if(e[3]){b=0;for(c=ad.length;b<c;b++)if(ad[b][1].exec(e[3])){d=(e[2]||" ")+ad[b][0];break}if(null==d){a._isValid=!1;return}}if(g||null==d){if(e[4])if(Bd.exec(e[4]))h="Z";else{a._isValid=!1;return}a._f=f+(d||"")+(h||"");ha(a)}else a._isValid=!1}}else a._isValid=!1}function Na(a){var b=Cc.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g,
" ").trim());if(b){var c=b[3],e=b[2],g=b[5],f=b[6],d=b[7],h=parseInt(b[4],10),c=[49>=h?2E3+h:999>=h?1900+h:h,Mb.indexOf(c),parseInt(e,10),parseInt(g,10),parseInt(f,10)];d&&c.push(parseInt(d,10));a:{if(d=b[1])if(d=nd.indexOf(d),e=(new Date(c[0],c[1],c[2])).getDay(),d!==e){n(a).weekdayMismatch=!0;d=a._isValid=!1;break a}d=!0}d&&(a._a=c,(d=b[8])?b=Dc[d]:b[9]?b=0:(b=parseInt(b[10],10),d=b%100,b=(b-d)/100*60+d),a._tzm=b,a._d=Ga.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),n(a).rfc2822=
!0)}else a._isValid=!1}function ob(a){var b=Cd.exec(a._i);null!==b?a._d=new Date(+b[1]):(W(a),!1===a._isValid&&(delete a._isValid,Na(a),!1===a._isValid&&(delete a._isValid,d.createFromInputFallback(a))))}function ha(a){if(a._f===d.ISO_8601)W(a);else if(a._f===d.RFC_2822)Na(a);else{a._a=[];n(a).empty=!0;var b=""+a._i,c,e,g,f,h,k=b.length,m=0;g=U(a._f,a._locale).match(Zb)||[];for(c=0;c<g.length;c++){f=g[c];if(e=(b.match(fa(f,a))||[])[0])h=b.substr(0,b.indexOf(e)),0<h.length&&n(a).unusedInput.push(h),
b=b.slice(b.indexOf(e)+e.length),m+=e.length;if(jb[f]){if(e?n(a).empty=!1:n(a).unusedTokens.push(f),h=a,null!=e&&p(Eb,f))Eb[f](e,h._a,h,f)}else a._strict&&!e&&n(a).unusedTokens.push(f)}n(a).charsLeftOver=k-m;0<b.length&&n(a).unusedInput.push(b);12>=a._a[Ma]&&!0===n(a).bigHour&&0<a._a[Ma]&&(n(a).bigHour=void 0);n(a).parsedDateParts=a._a.slice(0);n(a).meridiem=a._meridiem;b=a._a;c=Ma;k=a._locale;g=a._a[Ma];m=a._meridiem;null!=m&&(null!=k.meridiemHour?g=k.meridiemHour(g,m):null!=k.isPM&&((k=k.isPM(m))&&
12>g&&(g+=12),k||12!==g||(g=0)));b[c]=g;Ka(a);kb(a)}}function ab(a){if(!a._d){var b=N(a._i);a._a=g([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});Ka(a)}}function Xa(c){var g=c._i,f=c._f;c._locale=c._locale||Wa(c._l);if(null===g||void 0===f&&""===g)return q({nullInput:!0});"string"===typeof g&&(c._i=g=c._locale.preparse(g));if(t(g))return new x(kb(g));if(b(g))c._d=g;else if(a(f)){var d,h,k;if(0===c._f.length)n(c).invalidFormat=!0,c._d=new Date(NaN);
else{for(g=0;g<c._f.length;g++)if(f=0,d=y({},c),null!=c._useUTC&&(d._useUTC=c._useUTC),d._f=c._f[g],ha(d),m(d)&&(f+=n(d).charsLeftOver,f+=10*n(d).unusedTokens.length,n(d).score=f,null==k||f<k))k=f,h=d;e(c,h||d)}}else f?ha(c):la(c);m(c)||(c._d=null);return c}function la(c){var e=c._i;h(e)?c._d=new Date(d.now()):b(e)?c._d=new Date(e.valueOf()):"string"===typeof e?ob(c):a(e)?(c._a=g(e.slice(0),function(a){return parseInt(a,10)}),Ka(c)):l(e)?ab(c):k(e)?c._d=new Date(e):d.createFromInputFallback(c)}function ib(b,
c,e,g,d){var h={};if(!0===e||!1===e)g=e,e=void 0;if(l(b)&&f(b)||a(b)&&0===b.length)b=void 0;h._isAMomentObject=!0;h._useUTC=h._isUTC=d;h._l=e;h._i=b;h._f=c;h._strict=g;b=new x(kb(Xa(h)));b._nextDay&&(b.add(1,"d"),b._nextDay=void 0);return b}function P(a,b,c,e){return ib(a,b,c,e,!1)}function pa(b,c){var e,g;1===c.length&&a(c[0])&&(c=c[0]);if(!c.length)return P();e=c[0];for(g=1;g<c.length;++g)if(!c[g].isValid()||c[g][b](e))e=c[g];return e}function I(a){for(var b in a)if(-1===Ba.call(mb,b)||null!=a[b]&&
isNaN(a[b]))return!1;b=!1;for(var c=0;c<mb.length;++c)if(a[mb[c]]){if(b)return!1;parseFloat(a[mb[c]])!==z(a[mb[c]])&&(b=!0)}return!0}function aa(a){a=N(a);var b=a.year||0,c=a.quarter||0,e=a.month||0,g=a.week||0,f=a.day||0,d=a.hour||0,h=a.minute||0,n=a.second||0,k=a.millisecond||0;this._isValid=I(a);this._milliseconds=+k+1E3*n+6E4*h+36E5*d;this._days=+f+7*g;this._months=+e+3*c+12*b;this._data={};this._locale=Wa();this._bubble()}function ia(a){return a instanceof aa}function oa(a){return 0>a?-1*Math.round(-1*
a):Math.round(a)}function Y(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+S(~~(a/60),2)+b+S(~~a%60,2)})}function ea(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(Ec)||["-",0,0];b=+(60*a[1])+z(a[2]);return 0===b?0:"+"===a[0]?b:-b}function R(a,c){return c._isUTC?(c=c.clone(),a=(t(a)||b(a)?a.valueOf():P(a).valueOf())-c.valueOf(),c._d.setTime(c._d.valueOf()+a),d.updateOffset(c,!1),c):P(a).local()}function mc(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function Pa(a,b){var c=a,e=null;ia(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:k(a)?(c={},b?c[b]=a:c.milliseconds=a):(e=nc.exec(a))?(c="-"===e[1]?-1:1,c={y:0,d:z(e[qb])*c,h:z(e[Ma])*c,m:z(e[lb])*c,s:z(e[Bb])*c,ms:z(oa(1E3*e[Lb]))*c}):(e=Fc.exec(a))?(c="-"===e[1]?-1:1,c={y:eb(e[2],c),M:eb(e[3],c),w:eb(e[4],c),d:eb(e[5],c),h:eb(e[6],c),m:eb(e[7],c),s:eb(e[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(e=P(c.from),c=P(c.to),e.isValid()&&c.isValid()?
(c=R(c,e),e.isBefore(c)?c=Nb(e,c):(c=Nb(c,e),c.milliseconds=-c.milliseconds,c.months=-c.months),e=c):e={milliseconds:0,months:0},c={},c.ms=e.milliseconds,c.M=e.months);c=new aa(c);ia(a)&&p(a,"_locale")&&(c._locale=a._locale);return c}function eb(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function Nb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,
"M");return c}function rb(a,b){return function(c,e){var g;null===e||isNaN(+e)||(C(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),g=c,c=e,e=g);c=Pa("string"===typeof c?+c:c,e);oc(this,c,a);return this}}function oc(a,b,c,e){var g=b._milliseconds,f=oa(b._days);b=oa(b._months);a.isValid()&&(e=null==e?!0:e,b&&Ea(a,ra(a,"Month")+b*c),f&&ka(a,"Date",ra(a,"Date")+f*c),g&&a._d.setTime(a._d.valueOf()+
g*c),e&&d.updateOffset(a,f||b))}function Cb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),e=a.clone().add(c,"months");0>b-e?(a=a.clone().add(c-1,"months"),b=(b-e)/(e-a)):(a=a.clone().add(c+1,"months"),b=(b-e)/(a-e));return-(c+b)||0}function ac(a){if(void 0===a)return this._locale._abbr;a=Wa(a);null!=a&&(this._locale=a);return this}function bc(){return this._locale}function Db(a,b){J(0,[a,a.length],0,b)}function Fb(a,b,c,e,g){var f;if(null==a)return Ja(this,e,g).year;f=cb(a,e,g);b>f&&(b=
f);a=Q(a,b,c,e,g);a=Ga(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function Ob(a,b){b[Lb]=z(1E3*("0."+a))}function cc(a){return a}function fb(a,b,e,g){var f=Wa();b=c().set(g,b);return f[e](b,a)}function Pb(a,b,c){k(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return fb(a,b,c,"month");var e=[];for(b=0;12>b;b++)e[b]=fb(a,b,c,"month");return e}function Gb(a,b,c,e){"boolean"!==typeof a&&(c=b=a,a=!1);k(b)&&(c=b,b=void 0);b=b||"";var g=
Wa();a=a?g._week.dow:0;if(null!=c)return fb(b,(c+a)%7,e,"day");g=[];for(c=0;7>c;c++)g[c]=fb(b,(c+a)%7,e,"day");return g}function Qb(a,b,c,e){b=Pa(b,c);a._milliseconds+=e*b._milliseconds;a._days+=e*b._days;a._months+=e*b._months;return a._bubble()}function Rb(a){return 0>a?Math.floor(a):Math.ceil(a)}function nb(a){return function(){return this.as(a)}}function Ya(a){return function(){return this.isValid()?this._data[a]:NaN}}function Gc(a,b,c,e,g){return g.relativeTime(b||1,!!c,a,e)}function bb(a){return(0<
a)-(0>a)||+a}function Hc(){if(!this.isValid())return this.localeData().invalidDate();var a=Dd(this._milliseconds)/1E3,b=Dd(this._days),c=Dd(this._months),e,g;e=u(a/60);g=u(e/60);a%=60;e%=60;var f=u(c/12),c=c%12,a=a?a.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var h=0>d?"-":"",n=bb(this._months)!==bb(d)?"-":"",k=bb(this._days)!==bb(d)?"-":"",d=bb(this._milliseconds)!==bb(d)?"-":"";return h+"P"+(f?n+f+"Y":"")+(c?n+c+"M":"")+(b?k+b+"D":"")+(g||e||a?"T":"")+(g?d+g+"H":"")+
(e?d+e+"M":"")+(a?d+a+"S":"")}var jd,kd;kd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,e=0;e<c;e++)if(e in b&&a.call(this,b[e],e,b))return!0;return!1};var Yc=d.momentProperties=[],Zc=!1,ld={};d.suppressDeprecationWarnings=!1;d.deprecationHandler=null;var Sb;Sb=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)p(a,b)&&c.push(b);return c};var pb={},Ha={},Zb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
Kb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,$b={},jb={},Tb=/\d/,Qa=/\d\d/,pc=/\d{3}/,dc=/\d{4}/,sb=/[+-]?\d{6}/,qa=/\d\d?/,ec=/\d\d\d\d?/,qc=/\d\d\d\d\d\d?/,Ub=/\d{1,3}/,Vb=/\d{1,4}/,Hb=/[+-]?\d{1,6}/,Ed=/\d+/,Ic=/[+-]?\d+/,Fd=/Z|[+-]\d\d:?\d\d/gi,Jc=/Z|[+-]\d\d(?::?\d\d)?/gi,rc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,$c={},Eb={},Sa=0,Ab=1,qb=2,Ma=3,lb=4,Bb=5,Lb=6,Ac=7,lc=8;J("Y",0,
0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});J(0,["YY",2],0,function(){return this.year()%100});J(0,["YYYY",4],0,"year");J(0,["YYYYY",5],0,"year");J(0,["YYYYYY",6,!0],0,"year");F("year","y");Ha.year=1;M("Y",Ic);M("YY",qa,Qa);M("YYYY",Vb,dc);M("YYYYY",Hb,sb);M("YYYYYY",Hb,sb);ba(["YYYYY","YYYYYY"],Sa);ba("YYYY",function(a,b){b[Sa]=2===a.length?d.parseTwoDigitYear(a):z(a)});ba("YY",function(a,b){b[Sa]=d.parseTwoDigitYear(a)});ba("Y",function(a,b){b[Sa]=parseInt(a,10)});d.parseTwoDigitYear=
function(a){return z(a)+(68<z(a)?1900:2E3)};var sc=ga("FullYear",!0),Ba;Ba=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};J("M",["MM",2],"Mo",function(){return this.month()+1});J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});J("MMMM",0,0,function(a){return this.localeData().months(this,a)});F("month","M");Ha.month=8;M("M",qa);M("MM",qa,Qa);M("MMM",function(a,b){return b.monthsShortRegex(a)});M("MMMM",
function(a,b){return b.monthsRegex(a)});ba(["M","MM"],function(a,b){b[Ab]=z(a)-1});ba(["MMM","MMMM"],function(a,b,c,e){e=c._locale.monthsParse(a,e,c._strict);null!=e?b[Ab]=e:n(c).invalidMonth=a});var fc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Mb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");J("w",["ww",2],"wo","week");J("W",["WW",2],"Wo","isoWeek");F("week","w");F("isoWeek","W");Ha.week=5;Ha.isoWeek=5;M("w",qa);M("ww",qa,Qa);M("W",qa);M("WW",qa,Qa);ma(["w","ww","W","WW"],function(a,b,c,e){b[e.substr(0,
1)]=z(a)});J("d",0,"do","day");J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});J("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});J("e",0,0,"weekday");J("E",0,0,"isoWeekday");F("day","d");F("weekday","e");F("isoWeekday","E");Ha.day=11;Ha.weekday=11;Ha.isoWeekday=11;M("d",qa);M("e",qa);M("E",qa);M("dd",function(a,b){return b.weekdaysMinRegex(a)});M("ddd",function(a,b){return b.weekdaysShortRegex(a)});
M("dddd",function(a,b){return b.weekdaysRegex(a)});ma(["dd","ddd","dddd"],function(a,b,c,e){e=c._locale.weekdaysParse(a,e,c._strict);null!=e?b.d=e:n(c).invalidWeekday=a});ma(["d","e","E"],function(a,b,c,e){b[e]=z(a)});var nd="Sun Mon Tue Wed Thu Fri Sat".split(" ");J("H",["HH",2],0,"hour");J("h",["hh",2],0,Aa);J("k",["kk",2],0,function(){return this.hours()||24});J("hmm",0,0,function(){return""+Aa.apply(this)+S(this.minutes(),2)});J("hmmss",0,0,function(){return""+Aa.apply(this)+S(this.minutes(),
2)+S(this.seconds(),2)});J("Hmm",0,0,function(){return""+this.hours()+S(this.minutes(),2)});J("Hmmss",0,0,function(){return""+this.hours()+S(this.minutes(),2)+S(this.seconds(),2)});$a("a",!0);$a("A",!1);F("hour","h");Ha.hour=13;M("a",zb);M("A",zb);M("H",qa);M("h",qa);M("k",qa);M("HH",qa,Qa);M("hh",qa,Qa);M("kk",qa,Qa);M("hmm",ec);M("hmmss",qc);M("Hmm",ec);M("Hmmss",qc);ba(["H","HH"],Ma);ba(["k","kk"],function(a,b,c){a=z(a);b[Ma]=24===a?0:a});ba(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);
c._meridiem=a});ba(["h","hh"],function(a,b,c){b[Ma]=z(a);n(c).bigHour=!0});ba("hmm",function(a,b,c){var e=a.length-2;b[Ma]=z(a.substr(0,e));b[lb]=z(a.substr(e));n(c).bigHour=!0});ba("hmmss",function(a,b,c){var e=a.length-4,g=a.length-2;b[Ma]=z(a.substr(0,e));b[lb]=z(a.substr(e,2));b[Bb]=z(a.substr(g));n(c).bigHour=!0});ba("Hmm",function(a,b,c){c=a.length-2;b[Ma]=z(a.substr(0,c));b[lb]=z(a.substr(c))});ba("Hmmss",function(a,b,c){c=a.length-4;var e=a.length-2;b[Ma]=z(a.substr(0,c));b[lb]=z(a.substr(c,
2));b[Bb]=z(a.substr(e))});var Gd=ga("Hours",!0),md={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",
mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Mb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:nd,meridiemParse:/[ap]\.?m?\.?/i},La={},kc={},jc,zd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
Ad=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bd=/Z|[+-]\d\d(?::?\d\d)?/,Bc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ad=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Cd=/^\/?Date\((\-?\d+)/i,Cc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Dc={UT:0,GMT:0,EDT:-240,
EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};d.createFromInputFallback=w("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});d.ISO_8601=function(){};
d.RFC_2822=function(){};var Kc=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=P.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:q()}),Lc=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=P.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:q()}),mb="year quarter month week day hour minute second millisecond".split(" ");
Y("Z",":");Y("ZZ","");M("Z",Jc);M("ZZ",Jc);ba(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=ea(Jc,a)});var Ec=/([\+\-]|\d\d)/gi;d.updateOffset=function(){};var nc=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Fc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Pa.fn=aa.prototype;Pa.invalid=function(){return Pa(NaN)};var Mc=rb(1,"add"),Nc=rb(-1,"subtract");d.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";d.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var tc=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100});J(0,["GG",2],0,function(){return this.isoWeekYear()%100});Db("gggg","weekYear");Db("ggggg","weekYear");Db("GGGG","isoWeekYear");Db("GGGGG","isoWeekYear");F("weekYear",
"gg");F("isoWeekYear","GG");Ha.weekYear=1;Ha.isoWeekYear=1;M("G",Ic);M("g",Ic);M("GG",qa,Qa);M("gg",qa,Qa);M("GGGG",Vb,dc);M("gggg",Vb,dc);M("GGGGG",Hb,sb);M("ggggg",Hb,sb);ma(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,e){b[e.substr(0,2)]=z(a)});ma(["gg","GG"],function(a,b,c,e){b[e]=d.parseTwoDigitYear(a)});J("Q",0,"Qo","quarter");F("quarter","Q");Ha.quarter=7;M("Q",Tb);ba("Q",function(a,b){b[Ab]=3*(z(a)-1)});J("D",["DD",2],"Do","date");F("date","D");Ha.date=9;M("D",qa);M("DD",qa,Qa);M("Do",function(a,
b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});ba(["D","DD"],qb);ba("Do",function(a,b){b[qb]=z(a.match(qa)[0])});var uc=ga("Date",!0);J("DDD",["DDDD",3],"DDDo","dayOfYear");F("dayOfYear","DDD");Ha.dayOfYear=4;M("DDD",Ub);M("DDDD",pc);ba(["DDD","DDDD"],function(a,b,c){c._dayOfYear=z(a)});J("m",["mm",2],0,"minute");F("minute","m");Ha.minute=14;M("m",qa);M("mm",qa,Qa);ba(["m","mm"],lb);var Oc=ga("Minutes",!1);J("s",["ss",2],0,"second");F("second","s");Ha.second=
15;M("s",qa);M("ss",qa,Qa);ba(["s","ss"],Bb);var Pc=ga("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)});J(0,["SS",2],0,function(){return~~(this.millisecond()/10)});J(0,["SSS",3],0,"millisecond");J(0,["SSSS",4],0,function(){return 10*this.millisecond()});J(0,["SSSSS",5],0,function(){return 100*this.millisecond()});J(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});J(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});J(0,["SSSSSSSS",8],0,function(){return 1E5*
this.millisecond()});J(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});F("millisecond","ms");Ha.millisecond=16;M("S",Ub,Tb);M("SS",Ub,Qa);M("SSS",Ub,pc);var Ta;for(Ta="SSSS";9>=Ta.length;Ta+="S")M(Ta,Ed);for(Ta="S";9>=Ta.length;Ta+="S")ba(Ta,Ob);var Qc=ga("Milliseconds",!1);J("z",0,0,"zoneAbbr");J("zz",0,0,"zoneName");var V=x.prototype;V.add=Mc;V.calendar=function(a,b){a=a||P();var c=R(a,this).startOf("day"),c=d.calendarFormat(this,c)||"sameElse";b=b&&(E(b[c])?b[c].call(this,a):b[c]);
return this.format(b||this.localeData().calendar(c,this,P(a)))};V.clone=function(){return new x(this)};V.diff=function(a,b,c){var e;if(!this.isValid())return NaN;a=R(a,this);if(!a.isValid())return NaN;e=6E4*(a.utcOffset()-this.utcOffset());b=G(b);switch(b){case "year":b=Cb(this,a)/12;break;case "month":b=Cb(this,a);break;case "quarter":b=Cb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-e)/864E5;break;case "week":b=
(this-a-e)/6048E5;break;default:b=this-a}return c?b:u(b)};V.endOf=function(a){a=G(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};V.format=function(a){a||(a=this.isUtc()?d.defaultFormatUtc:d.defaultFormat);a=Z(this,a);return this.localeData().postformat(a)};V.from=function(a,b){return this.isValid()&&(t(a)&&a.isValid()||P(a).isValid())?Pa({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};
V.fromNow=function(a){return this.from(P(),a)};V.to=function(a,b){return this.isValid()&&(t(a)&&a.isValid()||P(a).isValid())?Pa({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};V.toNow=function(a){return this.to(P(),a)};V.get=function(a){a=G(a);return E(this[a])?this[a]():this};V.invalidAt=function(){return n(this).overflow};V.isAfter=function(a,b){a=t(a)?a:P(a);if(!this.isValid()||!a.isValid())return!1;b=G(h(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>
a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};V.isBefore=function(a,b){a=t(a)?a:P(a);if(!this.isValid()||!a.isValid())return!1;b=G(h(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};V.isBetween=function(a,b,c,e){e=e||"()";return("("===e[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===e[1]?this.isBefore(b,c):!this.isAfter(b,c))};V.isSame=function(a,b){a=t(a)?a:P(a);if(!this.isValid()||!a.isValid())return!1;b=G(b||"millisecond");
if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};V.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};V.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};V.isValid=function(){return m(this)};V.lang=tc;V.locale=ac;V.localeData=bc;V.max=Lc;V.min=Kc;V.parsingFlags=function(){return e({},n(this))};V.set=function(a,b){if("object"===typeof a){a=N(a);b=O(a);
for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=G(a),E(this[a]))return this[a](b);return this};V.startOf=function(a){a=G(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};
V.subtract=Nc;V.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};V.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};V.toDate=function(){return new Date(this.valueOf())};V.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?
Z(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",Z(b,"Z")):Z(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};V.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=
this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};V.toJSON=function(){return this.isValid()?this.toISOString():null};V.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};V.unix=function(){return Math.floor(this.valueOf()/1E3)};V.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};V.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};
V.year=sc;V.isLeapYear=function(){return da(this.year())};V.weekYear=function(a){return Fb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};V.isoWeekYear=function(a){return Fb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};V.quarter=V.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};V.month=wa;V.daysInMonth=function(){return Fa(this.year(),this.month())};V.week=V.weeks=function(a){var b=this.localeData().week(this);
return null==a?b:this.add(7*(a-b),"d")};V.isoWeek=V.isoWeeks=function(a){var b=Ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};V.weeksInYear=function(){var a=this.localeData()._week;return cb(this.year(),a.dow,a.doy)};V.isoWeeksInYear=function(){return cb(this.year(),1,4)};V.date=uc;V.day=V.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),
a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};V.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};V.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};V.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-
this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};V.hour=V.hours=Gd;V.minute=V.minutes=Oc;V.second=V.seconds=Pc;V.millisecond=V.milliseconds=Qc;V.utcOffset=function(a,b,c){var e=this._offset||0,g;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=ea(Jc,a),null===a)return this}else 16>Math.abs(a)&&!c&&(a*=60);!this._isUTC&&b&&(g=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=a;this._isUTC=!0;null!=g&&this.add(g,"m");e!==a&&(!b||
this._changeInProgress?oc(this,Pa(a-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,d.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?e:15*-Math.round(this._d.getTimezoneOffset()/15)};V.utc=function(a){return this.utcOffset(0,a)};V.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};V.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,
!0);else if("string"===typeof this._i){var a=ea(Fd,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};V.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?P(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};V.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};V.isLocal=function(){return this.isValid()?!this._isUTC:!1};V.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};V.isUtc=
mc;V.isUTC=mc;V.zoneAbbr=function(){return this._isUTC?"UTC":""};V.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};V.dates=w("dates accessor is deprecated. Use date instead.",uc);V.months=w("months accessor is deprecated. Use month instead",wa);V.years=w("years accessor is deprecated. Use year instead",sc);V.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=
-a),this.utcOffset(a,b),this):-this.utcOffset()});V.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!h(this._isDSTShifted))return this._isDSTShifted;var a={};y(a,this);a=Xa(a);if(a._a){var b=a._isUTC?c(a._a):P(a._a);this._isDSTShifted=this.isValid()&&0<D(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ua=H.prototype;ua.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;
return E(a)?a.call(b,c):a};ua.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};ua.invalidDate=function(){return this._invalidDate};ua.ordinal=function(a){return this._ordinal.replace("%d",a)};ua.preparse=cc;ua.postformat=cc;ua.relativeTime=function(a,b,c,e){var g=this._relativeTime[c];return E(g)?g(a,b,c,e):g.replace(/%d/i,
a)};ua.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return E(a)?a(b):a.replace(/%s/i,b)};ua.set=function(a){var b,c;for(c in a)b=a[c],E(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};ua.months=function(b,c){return b?a(this._months)?this._months[b.month()]:this._months[(this._months.isFormat||fc).test(c)?"format":"standalone"][b.month()]:a(this._months)?
this._months:this._months.standalone};ua.monthsShort=function(b,c){return b?a(this._monthsShort)?this._monthsShort[b.month()]:this._monthsShort[fc.test(c)?"format":"standalone"][b.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};ua.monthsParse=function(a,b,e){var g,f;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],g=0;12>g;++g)f=c([2E3,g]),this._shortMonthsParse[g]=
this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[g]=this.months(f,"").toLocaleLowerCase();if(e)b="MMM"===b?Ba.call(this._shortMonthsParse,a):Ba.call(this._longMonthsParse,a);else if("MMM"===b){b=Ba.call(this._shortMonthsParse,a);if(-1!==b)break a;b=Ba.call(this._longMonthsParse,a)}else{b=Ba.call(this._longMonthsParse,a);if(-1!==b)break a;b=Ba.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=
[]);for(g=0;12>g;g++)if(f=c([2E3,g]),e&&!this._longMonthsParse[g]&&(this._longMonthsParse[g]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[g]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),e||this._monthsParse[g]||(f="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[g]=new RegExp(f.replace(".",""),"i")),e&&"MMMM"===b&&this._longMonthsParse[g].test(a)||e&&"MMM"===b&&this._shortMonthsParse[g].test(a)||!e&&this._monthsParse[g].test(a))return g};
ua.monthsRegex=function(a){if(this._monthsParseExact)return p(this,"_monthsRegex")||ta.call(this),a?this._monthsStrictRegex:this._monthsRegex;p(this,"_monthsRegex")||(this._monthsRegex=rc);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};ua.monthsShortRegex=function(a){if(this._monthsParseExact)return p(this,"_monthsRegex")||ta.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;p(this,"_monthsShortRegex")||(this._monthsShortRegex=rc);return this._monthsShortStrictRegex&&
a?this._monthsShortStrictRegex:this._monthsShortRegex};ua.week=function(a){return Ja(a,this._week.dow,this._week.doy).week};ua.firstDayOfYear=function(){return this._week.doy};ua.firstDayOfWeek=function(){return this._week.dow};ua.weekdays=function(b,c){return b?a(this._weekdays)?this._weekdays[b.day()]:this._weekdays[this._weekdays.isFormat.test(c)?"format":"standalone"][b.day()]:a(this._weekdays)?this._weekdays:this._weekdays.standalone};ua.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:
this._weekdaysMin};ua.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};ua.weekdaysParse=function(a,b,e){var g,f;if(this._weekdaysParseExact)return ya.call(this,a,b,e);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(g=0;7>g;g++)if(f=c([2E3,1]).day(g),e&&!this._fullWeekdaysParse[g]&&(this._fullWeekdaysParse[g]=new RegExp("^"+this.weekdays(f,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[g]=
new RegExp("^"+this.weekdaysShort(f,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[g]=new RegExp("^"+this.weekdaysMin(f,"").replace(".",".?")+"$","i")),this._weekdaysParse[g]||(f="^"+this.weekdays(f,"")+"|^"+this.weekdaysShort(f,"")+"|^"+this.weekdaysMin(f,""),this._weekdaysParse[g]=new RegExp(f.replace(".",""),"i")),e&&"dddd"===b&&this._fullWeekdaysParse[g].test(a)||e&&"ddd"===b&&this._shortWeekdaysParse[g].test(a)||e&&"dd"===b&&this._minWeekdaysParse[g].test(a)||!e&&this._weekdaysParse[g].test(a))return g};
ua.weekdaysRegex=function(a){if(this._weekdaysParseExact)return p(this,"_weekdaysRegex")||r.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;p(this,"_weekdaysRegex")||(this._weekdaysRegex=rc);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};ua.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return p(this,"_weekdaysRegex")||r.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;p(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=
rc);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ua.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return p(this,"_weekdaysRegex")||r.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;p(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=rc);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ua.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};ua.meridiem=function(a,b,c){return 11<
a?c?"pm":"PM":c?"am":"AM"};Va("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===z(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});d.lang=w("moment.lang is deprecated. Use moment.locale instead.",Va);d.langData=w("moment.langData is deprecated. Use moment.localeData instead.",Wa);var tb=Math.abs,od=nb("ms"),pd=nb("s"),qd=nb("m"),v=nb("h"),Wb=nb("d"),gb=nb("w"),Xb=nb("M"),L=nb("y"),Yb=Ya("milliseconds"),Ld=Ya("seconds"),Md=Ya("minutes"),Nd=Ya("hours"),
Od=Ya("days"),Pd=Ya("months"),Qd=Ya("years"),gc=Math.round,Ib={ss:44,s:45,m:45,h:22,d:26,M:11},Dd=Math.abs,sa=aa.prototype;sa.isValid=function(){return this._isValid};sa.abs=function(){var a=this._data;this._milliseconds=tb(this._milliseconds);this._days=tb(this._days);this._months=tb(this._months);a.milliseconds=tb(a.milliseconds);a.seconds=tb(a.seconds);a.minutes=tb(a.minutes);a.hours=tb(a.hours);a.months=tb(a.months);a.years=tb(a.years);return this};sa.add=function(a,b){return Qb(this,a,b,1)};
sa.subtract=function(a,b){return Qb(this,a,b,-1)};sa.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=G(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+
c;default:throw Error("Unknown unit "+a);}};sa.asMilliseconds=od;sa.asSeconds=pd;sa.asMinutes=qd;sa.asHours=v;sa.asDays=Wb;sa.asWeeks=gb;sa.asMonths=Xb;sa.asYears=L;sa.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*z(this._months/12):NaN};sa._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,e=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Rb(146097*c/4800+b),c=b=0);e.milliseconds=a%1E3;a=u(a/1E3);e.seconds=
a%60;a=u(a/60);e.minutes=a%60;a=u(a/60);e.hours=a%24;b+=u(a/24);a=u(4800*b/146097);c+=a;b-=Rb(146097*a/4800);a=u(c/12);e.days=b;e.months=c%12;e.years=a;return this};sa.clone=function(){return Pa(this)};sa.get=function(a){a=G(a);return this.isValid()?this[a+"s"]():NaN};sa.milliseconds=Yb;sa.seconds=Ld;sa.minutes=Md;sa.hours=Nd;sa.days=Od;sa.weeks=function(){return u(this.days()/7)};sa.months=Pd;sa.years=Qd;sa.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),
c;c=!a;var e=Pa(this).abs(),g=gc(e.as("s")),f=gc(e.as("m")),d=gc(e.as("h")),h=gc(e.as("d")),n=gc(e.as("M")),e=gc(e.as("y")),g=g<=Ib.ss&&["s",g]||g<Ib.s&&["ss",g]||1>=f&&["m"]||f<Ib.m&&["mm",f]||1>=d&&["h"]||d<Ib.h&&["hh",d]||1>=h&&["d"]||h<Ib.d&&["dd",h]||1>=n&&["M"]||n<Ib.M&&["MM",n]||1>=e&&["y"]||["yy",e];g[2]=c;g[3]=0<+this;g[4]=b;c=Gc.apply(null,g);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};sa.toISOString=Hc;sa.toString=Hc;sa.toJSON=Hc;sa.locale=ac;sa.localeData=bc;sa.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
Hc);sa.lang=tc;J("X",0,0,"unix");J("x",0,0,"valueOf");M("x",Ic);M("X",/[+-]?\d+(\.\d{1,3})?/);ba("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});ba("x",function(a,b,c){c._d=new Date(z(a))});d.version="2.22.1";jd=P;d.fn=V;d.min=function(){var a=[].slice.call(arguments,0);return pa("isBefore",a)};d.max=function(){var a=[].slice.call(arguments,0);return pa("isAfter",a)};d.now=function(){return Date.now?Date.now():+new Date};d.utc=c;d.unix=function(a){return P(1E3*a)};d.months=function(a,b){return Pb(a,
b,"months")};d.isDate=b;d.locale=Va;d.invalid=q;d.duration=Pa;d.isMoment=t;d.weekdays=function(a,b,c){return Gb(a,b,c,"weekdays")};d.parseZone=function(){return P.apply(null,arguments).parseZone()};d.localeData=Wa;d.isDuration=ia;d.monthsShort=function(a,b){return Pb(a,b,"monthsShort")};d.weekdaysMin=function(a,b,c){return Gb(a,b,c,"weekdaysMin")};d.defineLocale=db;d.updateLocale=function(a,b){if(null!=b){var c,e=md;c=Ua(a);null!=c&&(e=c._config);b=A(e,b);b=new H(b);b.parentLocale=La[a];La[a]=b;Va(a)}else null!=
La[a]&&(null!=La[a].parentLocale?La[a]=La[a].parentLocale:null!=La[a]&&delete La[a]);return La[a]};d.locales=function(){return Sb(La)};d.weekdaysShort=function(a,b,c){return Gb(a,b,c,"weekdaysShort")};d.normalizeUnits=G;d.relativeTimeRounding=function(a){return void 0===a?gc:"function"===typeof a?(gc=a,!0):!1};d.relativeTimeThreshold=function(a,b){if(void 0===Ib[a])return!1;if(void 0===b)return Ib[a];Ib[a]=b;"s"===a&&(Ib.ss=b-1);return!0};d.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>
a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};d.prototype=V;d.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return d})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(d,a){return function(){return function(a,f){this.context=
this.definition=null;this.definition=a;this.context=f}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(d,a,l,f,h){return function(a){function b(b,f,e,c,d){b=a.call(this,b)||this;b._lazyPath=[];b._hasZ=!1;b._hasM=!1;b._hasZ=e;b._hasM=c;b._spRef=f;b._cacheId=d;return b}l(b,a);b.prototype.get=function(a){if(void 0===this._lazyPath[a]){var b=this._elements[a];if(void 0===b)return;this._lazyPath[a]=
new h(b,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};b.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof b?!1:a.getUniqueHash()===this.getUniqueHash()};b.prototype.getUniqueHash=function(){return this._cacheId.toString()};return b}(f)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","../geometry/Point"],function(d,a,l,f,h){return function(a){function b(b,
f,e,c,d,h){b=a.call(this,b)||this;b._lazyPt=[];b._hasZ=!1;b._hasM=!1;b._spRef=f;b._hasZ=e;b._hasM=c;b._cacheId=d;b._partId=h;return b}l(b,a);b.prototype.get=function(a){if(void 0===this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var e=this._hasZ,c=this._hasM,g=null,g=e&&!c?new h(b[0],b[1],b[2],void 0,this._spRef):c&&e?new h(b[0],b[1],void 0,b[2],this._spRef):e&&c?new h(b[0],b[1],b[2],b[3],this._spRef):new h(b[0],b[1],this._spRef);g.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+
"-"+a.toString();this._lazyPt[a]=g}return this._lazyPt[a]};b.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof b?!1:a.getUniqueHash()===this.getUniqueHash()};b.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return b}(f)})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e){return function(){function a(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this.immutable=this.immutable=this._datesfixed=!0}a.createFromGraphic=function(b){var c=new a;c._geometry=b.geometry?b.geometry:null;c.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(c._layer=b._sourceLayer,c._datesfixed=!1):b._layer?(c._layer=b._layer,c._datesfixed=!1):b.layer&&(c._layer=
b.layer,c._datesfixed=!1);return c};a.createFromArcadeFeature=function(b){var c=new a;c._datesfixed=b._datesfixed;c.attributes=b.attributes;c._geometry=b._geometry;c._optimizedGeomDefinition=b._optimizedGeomDefinition;b._layer&&(c._layer=b._layer);return c};a.createFromOptimisedFeature=function(b,c,e){var g=new a;g._geometry=b.geometry?{geometry:b.geometry}:null;g._optimizedGeomDefinition=e;g.attributes=b.attributes||{};g._layer=c;g._datesfixed=!1;return g};a.createFromArcadeDictionary=function(c){var e=
new a;e.attributes=c.field("attributes");null!==e.attributes?e.attributes instanceof f?(e.attributes=e.attributes.attributes,null===e.attributes&&(e.attributes={})):e.attributes={}:e.attributes={};e._geometry=c.field("geometry");null!==e._geometry&&(e._geometry instanceof f?e._geometry=a.parseGeometryFromDictionary(e._geometry):e._geometry instanceof b||(e._geometry=null));return e};a.createFromGraphicLikeObject=function(b,c,e){void 0===e&&(e=null);var g=new a;null===c&&(c={});g.attributes=c;g._geometry=
b?b:null;g._layer=e;g._layer&&(g._datesfixed=!1);return g};a.prototype.repurposeFromGraphicLikeObject=function(a,b,c){void 0===c&&(c=null);null===b&&(b={});this.attributes=b;this._geometry=a?a:null;this._datesfixed=(this._layer=c)?!1:!0};a.prototype.castToText=function(){var a="",c;for(c in this.attributes){""!==a&&(a+=",");var e=this.attributes[c];null==e?a+=JSON.stringify(c)+":null":k.isBoolean(e)||k.isNumber(e)||k.isString(e)?a+=JSON.stringify(c)+":"+JSON.stringify(e):e instanceof b?a+=JSON.stringify(c)+
":"+k.toStringExplicit(e):e instanceof h?a+=JSON.stringify(c)+":"+k.toStringExplicit(e):e instanceof Array?a+=JSON.stringify(c)+":"+k.toStringExplicit(e):e instanceof Date?a+=JSON.stringify(c)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(a+=JSON.stringify(c)+":"+e.castToText())}return'{"geometry":'+(null===this.geometry()?"null":k.toStringExplicit(this.geometry()))+',"attributes":{'+a+"}}"};a.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var c=
this._layer.fields[b];"date"!==c.type&&"esriFieldTypeDate"!==c.type||a.push(c.name)}0<a.length&&this._fixDateFields(a);this._datesfixed=!0};a.prototype._fixDateFields=function(a){this.attributes=l({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var e in this.attributes){if(e.toLowerCase()===a[b]){c=this.attributes[e];null===c||c instanceof Date||(this.attributes[e]=new Date(c));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}};
a.prototype.geometry=function(){if(null===this._geometry)return this._geometry;this._geometry instanceof b||(this._optimizedGeomDefinition?(this._geometry=p.fromJSON(e.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=p.fromJSON(this._geometry));return this._geometry};a.prototype.field=function(a){!1===this._datesfixed&&
this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};a.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1};a.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();
a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===k.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var e in this.attributes)if(e.toLowerCase()===c){this.attributes[e]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();
if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};a.prototype.keys=function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var e=this._layer.fields[c];1!==b[e.name.toLowerCase()]&&a.push(e.name)}return a=a.sort()};a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&
(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return p.fromJSON(b)};a.fixPathArrays=function(a,b,c){var e=[];if(a instanceof Array)for(var g=0;g<a.length;g++)e.push(this.fixPointArrays(a[g],b,c));else if(a instanceof h)for(g=0;g<a.length();g++)e.push(this.fixPointArrays(a.get(g),
b,c));return e};a.fixPointArrays=function(a,b,c){var e=[];if(a instanceof Array)for(var f=0;f<a.length;f++){var d=a[f];d instanceof g?b&&c?e.push([d.x,d.y,d.z,d.m]):b?e.push([d.x,d.y,d.z]):c?e.push([d.x,d.y,d.m]):e.push([d.x,d.y]):e.push(d)}else if(a instanceof h)for(f=0;f<a.length();f++)d=a.get(f),d instanceof g?b&&c?e.push([d.x,d.y,d.z,d.m]):b?e.push([d.x,d.y,d.z]):c?e.push([d.x,d.y,d.m]):e.push([d.x,d.y]):e.push(d);return e};a.convertDictionaryToJson=function(b,c){void 0===c&&(c=!1);var e={},g;
for(g in b.attributes){var d=b.attributes[g];d instanceof f&&(d=a.convertDictionaryToJson(d));c?e[g.toLowerCase()]=d:e[g]=d}return e};a.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var e=a.attributes[c];if(k.isSimpleType(e))b[c]=e;else throw Error("Illegal Argument");}return b};a.fromJson=function(b){var c=null;null!==b.geometry&&void 0!==b.geometry&&(c=p.fromJSON(b.geometry));var e={};if(null!==b.attributes&&void 0!==b.attributes)for(var g in b.attributes){var f=b.attributes[g];
if(null===f)e[g]=f;else if(k.isString(f)||k.isNumber(f)||k.isBoolean(f)||k.isDate(f))e[g]=f;else throw Error("Illegal Argument");}return a.createFromGraphicLikeObject(c,e,null)};a.prototype.domainValueLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;c=k.getDomain(a,this._layer,this,c);if(void 0===b)try{b=this.field(a)}catch(y){return null}return k.getDomainValue(c,b)};a.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;if(void 0===
b){try{b=this.field(a)}catch(y){return null}return b}a=k.getDomain(a,this._layer,this,c);return k.getDomainCode(a,b)};return a}()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(d,a,l,f,h,k,b){function g(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function p(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function e(a,b){return b*
a.scale[0]+a.translate[0]}function c(a,b){return a.translate[1]-b*a.scale[1]}function n(a){a=a.coords;return{x:a[0],y:a[1]}}function m(a){var c=new b.default;c.coords[0]=a.x;c.coords[1]=a.y;return c}function q(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function y(a){var c=new b.default;c.coords[0]=a.x;c.coords[1]=a.y;c.coords[2]=a.z;return c}function x(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function t(a){var c=new b.default;c.coords[0]=a.x;c.coords[1]=a.y;c.coords[2]=a.m;return c}function u(a){a=
a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function z(a){var c=new b.default;c.coords[0]=a.x;c.coords[1]=a.y;c.coords[2]=a.z;c.coords[3]=a.m;return c}function D(a,b,c){if(!a)return null;for(var e=b?c?4:3:c?3:2,g=[],f=0;f<a.coords.length;f+=e){for(var d=[],h=0;h<e;h++)d.push(a.coords[f+h]);g.push(d)}return b?c?{points:g,hasZ:b,hasM:c}:{points:g,hasZ:b}:c?{points:g,hasM:c}:{points:g}}function B(a,b,c){if(!a)return null;var e=b?c?4:3:c?3:2,g=a.coords,f=[],d=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=
a[h],n=[],m=0;m<k;m++){for(var p=[],q=0;q<e;q++)p.push(g[d++]);n.push(p)}f.push(n)}return b?c?{paths:f,hasZ:b,hasM:c}:{paths:f,hasZ:b}:c?{paths:f,hasM:c}:{paths:f}}function w(a,b,c){if(!a)return null;var e=b?c?4:3:c?3:2,g=a.coords,f=[],d=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],n=[],m=0;m<k;m++){for(var p=[],q=0;q<e;q++)p.push(g[d++]);n.push(p)}f.push(n)}return b?c?{rings:f,hasZ:b,hasM:c}:{rings:f,hasZ:b}:c?{rings:f,hasM:c}:{rings:f}}function C(a,c,e,g,f,d){a.length=0;if(e){switch(e){case "esriGeometryPoint":e=
m;g&&f?e=z:g?e=y:f&&(e=t);for(g=0;g<c.length;g++){var k=c[g];f=k.geometry;k=k.attributes;f=f?e(f):void 0;a.push(new h.default(f,k,null,k[d]))}break;case "esriGeometryMultipoint":e=g?f?4:3:f?3:2;for(g=0;g<c.length;g++){f=c[g];var n=f.geometry;f=f.attributes;k=void 0;if(n){k=new b.default;k.lengths[0]=n.points.length;for(var p=k.coords,q=0,u=0,n=n.points;u<n.length;u++)for(var C=n[u],A=0;A<e;A++)p[q++]=C[A]}a.push(new h.default(k,f,null,f[d]))}break;case "esriGeometryPolyline":e=g?f?4:3:f?3:2;for(g=
0;g<c.length;g++){f=c[g];C=f.geometry;f=f.attributes;k=void 0;if(C)for(k=new b.default,p=k.lengths,q=k.coords,n=u=0,C=C.paths;n<C.length;n++){for(var A=C[n],x=0,E=A;x<E.length;x++)for(var w=E[x],D=0;D<e;D++)q[u++]=w[D];p.push(A.length)}a.push(new h.default(k,f,null,f[d]))}break;case "esriGeometryPolygon":e=g?f?4:3:f?3:2;for(g=0;g<c.length;g++){k=c[g];A=k.geometry;f=k.centroid;k=k.attributes;p=void 0;if(A)for(p=new b.default,q=p.lengths,u=p.coords,C=n=0,A=A.rings;C<A.length;C++){x=A[C];E=0;for(w=x;E<
w.length;E++)for(var D=w[E],H=0;H<e;H++)u[n++]=D[H];q.push(x.length)}f?a.push(new h.default(p,k,m(f),k[d])):a.push(new h.default(p,k,null,k[d]))}break;default:T.error("convertToFeatureSet:unknown-geometry",new l("Unable to parse unknown geometry type '"+e+"'")),a.length=0}return a}a.length=0}function E(a,b,c,e,g){a.length=0;switch(c){case "esriGeometryPoint":c=n;e&&g?c=u:e?c=q:g&&(c=x);for(e=0;e<b.length;e++){var f=b[e];g=f.geometry;f=f.attributes;g=g?c(g):null;a.push({attributes:f,geometry:g})}break;
case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var d=b[c],f=d.geometry,d=d.attributes,h=void 0;f&&(h=D(f,e,g));a.push({attributes:d,geometry:h})}break;case "esriGeometryPolyline":for(c=0;c<b.length;c++)d=b[c],f=d.geometry,d=d.attributes,h=void 0,f&&(h=B(f,e,g)),a.push({attributes:d,geometry:h});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var h=b[c],d=h.geometry,f=h.attributes,k=h.centroid,h=void 0;d&&(h=w(d,e,g));k?(d=n(k),a.push({attributes:f,centroid:d,geometry:h})):a.push({attributes:f,
geometry:h})}break;default:T.error("convertToFeatureSet:unknown-geometry",new l("Unable to parse unknown geometry type '"+c+"'"))}return a}function A(a,b,c,e,f,d){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;f=Z[f];var h=b.coords;b=b.lengths;var k=c?e?4:3:e?3:2;c=c?e?fa:M:e?M:U;if(!b.length)return c(a.coords,h,0,0,g(d,h[0]),p(d,h[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=k,a;for(var n,m,q,l=0,t,u=0,C=0;C<b.length;C++){var y=
b[C];if(!(y<f)){var A=0;t=u;m=e=g(d,h[l]);q=n=p(d,h[l+1]);c(a.coords,h,t,l,m,q);A++;l+=k;t+=k;for(var x=1;x<y;x++,l+=k)if(m=g(d,h[l]),q=p(d,h[l+1]),m!==e||q!==n)c(a.coords,h,t,l,m-e,q-n),t+=k,A++,e=m,n=q;A>=f&&(a.lengths.push(A),u=t)}}a.coords.length=u;return a.coords.length?a:null}function H(a,b,c,e,g,f,d){for(var h=d-c,k=0,n=0,m,p=f+c;p<d-c;p+=c){m=b[p];var q=b[p+1],l=b[f],t=b[f+1],u=b[h],C=b[h+1];l===u?m=Math.abs(m-l):(u=(C-t)/(u-l),m=Math.abs(u*m-q+(t-u*l))/Math.sqrt(u*u+1));m>k&&(n=p,k=m)}k>
e?(H(a,b,c,e,g,f,n+c),H(a,b,c,e,g,n,d)):(g(a,b,a.length,f,b[f],b[f+1]),g(a,b,a.length,h,b[h],b[h+1]))}function F(a,b,g,f,d){var h=b.coords,k=b.lengths,n=g?f?fa:M:f?M:U;g=g?f?4:3:f?3:2;if(!h.length)return a!==b&&(a.lengths.length=0,a.coords.length=0),a;if(!k.length)return n(a.coords,h,0,0,e(d,h[0]),c(d,h[1])),a!==b&&(a.lengths.length=0,a.coords.length=g),a;var m=d.scale;f=m[0];for(var m=m[1],p=0,q=0;q<k.length;q++){var l=k[q];a.lengths[q]=l;var t=e(d,h[p]),u=c(d,h[p+1]);n(a.coords,h,p,p,t,u);for(var p=
p+g,C=1;C<l;C++,p+=g)t+=h[p]*f,u-=h[p+1]*m,n(a.coords,h,p,p,t,u)}a!==b&&(a.lengths.length=k.length,a.coords.length=h.length);return a}function G(a,b,c,e,g,f){f=g?f?4:3:f?3:2;var d=c,h=c+f,k=0,n=0,m=c=0,p=0,q=0;for(--e;q<e;q++,d+=f,h+=f){var l=b[d],t=b[d+1],u=b[d+2],C=b[h],y=b[h+1],A=b[h+2],x=l*y-C*t,m=m+x,k=k+(l+C)*x,n=n+(t+y)*x;g&&(x=l*A-C*u,c+=(u+A)*x,p+=x);l<a[0]&&(a[0]=l);l>a[1]&&(a[1]=l);t<a[2]&&(a[2]=t);t>a[3]&&(a[3]=t);g&&(u<a[4]&&(a[4]=u),u>a[5]&&(a[5]=u))}0<m&&(m*=-1);0<p&&(p*=-1);if(!m)return null;
a=[k,n,.5*m];g&&(a[3]=c,a[4]=.5*p);return a}function N(a,b,c,e,g){g=e?g?4:3:g?3:2;for(var f=b,d=b+g,h=0,k=0,n=0,m=0,p=0,q=c-1;p<q;p++,f+=g,d+=g){var l=a[f],t=a[f+1],u=a[f+2],C=a[d],y=a[d+1],A=a[d+2],x=e?S(l,t,u,C,y,A):O(l,t,C,y);x&&(h+=x,e?(l=X(l,t,u,C,y,A),k+=x*l[0],n+=x*l[1],m+=x*l[2]):(l=J(l,t,C,y),k+=x*l[0],n+=x*l[1]))}return 0<h?e?[k/h,n/h,m/h]:[k/h,n/h]:0<c?e?[a[b],a[b+1],a[b+2]]:[a[b],a[b+1]]:null}function O(a,b,c,e){a=c-a;b=e-b;return Math.sqrt(a*a+b*b)}function S(a,b,c,e,g,f){a=e-a;b=g-b;
c=f-c;return Math.sqrt(a*a+b*b+c*c)}function J(a,b,c,e){return[a+.5*(c-a),b+.5*(e-b)]}function X(a,b,c,e,g,f){return[a+.5*(e-a),b+.5*(g-b),c+.5*(f-c)]}Object.defineProperty(a,"__esModule",{value:!0});var T=f.getLogger("esri.tasks.support.optimizedFeatureSet"),Z={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},U=function(a,b,c,e,g,f){a[c]=g;a[c+1]=f},M=function(a,b,c,e,g,f){a[c]=g;a[c+1]=f;a[c+2]=b[e+2]},fa=function(a,b,c,e,g,f){a[c]=g;a[c+1]=f;a[c+2]=b[e+
2];a[c+3]=b[e+3]};a.quantizeX=g;a.quantizeY=p;a.hydrateX=e;a.hydrateY=c;a.convertToPoint=function(a,b,c){return a?b?c?u(a):q(a):c?x(a):n(a):null};a.convertToMultipoint=D;a.convertToPolyline=B;a.convertToPolygon=w;var K=[],ca=[];a.convertFromFeature=function(a,b,c,e,g){K[0]=a;a=C(ca,K,b,c,e,g)[0];K.length=ca.length=0;return a};a.convertFromFeatures=C;a.convertToFeature=function(a,b,c,e){ca[0]=a;E(K,ca,b,c,e);a=K[0];K.length=ca.length=0;return a};a.convertToGeometry=function(a,b,c,e){if(!a||!a.geometry)return null;
switch(b){case "esriGeometryPoint":return b=n,c&&e?b=u:c?b=q:e&&(b=x),b(a.geometry);case "esriGeometryMultipoint":return D(a.geometry,c,e);case "esriGeometryPolyline":return B(a.geometry,c,e);case "esriGeometryPolygon":return w(a.geometry,c,e);default:T.error("convertToGeometry:unknown-geometry",new l("Unable to parse unknown geometry type '"+b+"'"))}};a.convertToFeatures=E;a.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,e=a.transform,g=a.fields,f=a.hasM,d=a.hasZ,
h=a.geometryType,k=a.exceededTransferLimit;a={features:E([],a.features,h,d,f),fields:g,geometryType:h,objectIdFieldName:b,spatialReference:c};e&&(a.transform=e);k&&(a.exceededTransferLimit=k);f&&(a.hasM=f);d&&(a.hasZ=d);return a};a.convertFromFeatureSet=function(a,b){var c=new k.default,e=a.hasM,g=a.hasZ,f=a.features,d=a.objectIdFieldName,h=a.spatialReference,n=a.geometryType,m=a.exceededTransferLimit,p=a.transform;c.fields=a.fields;c.geometryType=n;c.objectIdFieldName=d||b;c.spatialReference=h;if(!c.objectIdFieldName)return T.error(new l("optimized-features:invalid-objectIdFieldName",
"objectIdFieldName is missing")),c;f&&C(c.features,f,n,g,e,c.objectIdFieldName);m&&(c.exceededTransferLimit=m);e&&(c.hasM=e);g&&(c.hasZ=g);p&&(c.transform=p);return c};a.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,e=a.hasZ;if(!b)return a;for(var g=0,f=a.features;g<f.length;g++){var d=f[g];d.geometry&&F(d.geometry,d.geometry,c,e,b);d.centroid&&F(d.centroid,d.centroid,c,e,b)}a.transform=null;return a};a.quantizeOptimizedFeatureSet=function(a,c){var e=c.geometryType,g=c.features,
f=c.hasM,d=c.hasZ;if(!a)return c;for(var k=0;k<g.length;k++){var n=g[k],m=new h.default(new b.default,n.attributes);A(m.geometry,n.geometry,f,d,e,a);n.centroid&&(m.centroid=new b.default,A(m.centroid,n.centroid,f,d,"esriGeometryPoint",a));g[k]=m}c.transform=a;return c};a.quantizeOptimizedGeometry=A;a.quantizeOptimizedGeometryRemoveCollinear=function(a,b,c,e,f,d){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;f=Z[f];var h=b.coords;b=
b.lengths;var k=c?e?4:3:e?3:2;c=c?e?fa:M:e?M:U;if(!b.length)return c(a.coords,h,0,0,g(d,h[0]),p(d,h[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=k,a;for(var n,m,q,l=0,t,u=0,C=0;C<b.length;C++){var y=b[C];if(!(y<f)){var A=0;t=u;e=n=g(d,h[l]);q=m=p(d,h[l+1]);c(a.coords,h,t,l,e,q);A++;for(var l=l+k,x=!1,E=0,z=0,w=1;w<y;w++,l+=k)if(e=g(d,h[l]),q=p(d,h[l+1]),e!==n||q!==m)n=e-n,m=q-m,x&&(0===E&&0===n||0===z&&0===m)?(E+=n,z+=m):(x=!0,E=n,z=m,t+=k,A++),c(a.coords,h,t,l,E,z),n=e,m=q;x&&(t+=
k,c(a.coords,h,t,l,E,z));A>=f&&(a.lengths.push(A),u=t)}}a.coords.length!==u&&(a.coords.length=u);return a.coords.length?a:null};a.generalizeOptimizedGeometry=function(a,b,c,e,g,f){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;g=Z[g];var d=b.coords;b=b.lengths;var h=c?e?4:3:e?3:2;c=c?e?fa:M:e?M:U;if(!b.length)return c(a.coords,d,0,0,d[0],d[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var k=e=0;k<b.length;k++){var n=
b[k];if(!(n<g)){var m=a.coords.length/h;H(a.coords,d,h,f,c,e,e+n*h);var p=a.coords.length/h-m;p>=g?a.lengths.push(p):a.coords.length=m*h}e+=n*h}return a.coords.length?a:null};a.getBoundsOptimizedGeometry=function(a,b,c,e){c=c?e?4:3:e?3:2;var g=e=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=c){var k=b[h],n=b[h+1];e=Math.min(e,k);f=Math.max(f,k);g=Math.min(g,n);d=Math.max(d,n)}}a[0]=e;a[1]=g;a[2]=f;a[3]=d;return a};
a.getQuantizedBoundsOptimizedGeometry=function(a,b,c,e){c=c?e?4:3:e?3:2;e=b.coords;var g=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,k=0,n=0;for(b=b.lengths;n<b.length;n++)for(var m=b[n],p=e[k],q=e[k+1],g=Math.min(p,g),f=Math.min(q,f),d=Math.max(p,d),h=Math.max(q,h),k=k+c,l=1;l<m;l++,k+=c){var t=e[k],u=e[k+1],p=p+t,q=q+u;0>t&&(g=Math.min(g,p));0<t&&(d=Math.max(d,p));0>u?f=Math.min(f,q):0<u&&(h=Math.max(h,q))}a[0]=g;a[1]=f;a[2]=d;a[3]=h;
return a};a.hydrateOptimizedGeometry=F;a.getCentroidOptimizedGeometry=function(a,b,c,e){if(!b||!b.lengths.length)return null;a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);for(var g=a.coords,f=[],d=c?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],h=b.lengths,k=b.coords,
n=c?e?4:3:e?3:2,m=0,p=0;p<h.length;p++){var q=h[p],l=G(d,k,m,q,c,e);l&&f.push(l);m+=q*n}f.sort(function(a,b){var e=a[2]-b[2];0===e&&c&&(e=a[4]-b[4]);return e});f.length&&(n=6*f[0][2],g[0]=f[0][0]/n,g[1]=f[0][1]/n,c&&(n=6*f[0][4],g[2]=0!==n?f[0][3]/n:0),g[0]<d[0]||g[0]>d[1]||g[1]<d[2]||g[1]>d[3]||c&&(g[2]<d[4]||g[2]>d[5]))&&(g.length=0);if(!g.length)if(b=b.lengths[0]?N(k,0,h[0],c,e):null)g[0]=b[0],g[1]=b[1],c&&2<b.length&&(g[2]=b[2]);else return null;return a};a.lineCentroid=N;a.getLength2D=O;a.getLength3D=
S;a.getMidpoint2D=J;a.getMidpoint3D=X})},"esri/layers/graphics/OptimizedFeature":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){return function(a,f,d,k){void 0===a&&(a=null);void 0===f&&(f={});this.geometry=a;this.attributes=f;d&&(this.centroid=d);null!=k&&(this.objectId=k)}}();a.default=d})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});
d=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1}}();a.default=d})},"esri/layers/graphics/OptimizedGeometry":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){return function(a,f){void 0===a&&(a=[]);void 0===f&&
(f=[]);this.lengths=a;this.coords=f}}();a.default=d})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(d,a){function l(a,b,c,e){return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function f(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var e=c.localScope[a.toLowerCase()];if("FormulaFunction"===e.type||"any"===e.type)return void 0===e.signature&&(e.signature={min:"0",max:"*"}),l(e.signature,a,b,c)}return void 0!==
c.globalScope[a.toLowerCase()]&&(e=c.globalScope[a.toLowerCase()],"FormulaFunction"===e.type||"any"===e.type)?(void 0===e.signature&&(e.signature={min:"0",max:"*"}),l(e.signature,a,b,c)):-1}function h(a,b){void 0===b&&(b=!0);var c=q(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?q(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?h(a.init,!1):"";
case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)if(c=h(a.declarations[e],b),""!==c)return c;return"";case "ForInStatement":c=h(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return q(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return q(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return q(a,"SYNTAX","LEFTNOTVAR");c=h(a.right,b);if(""!==c)break;c=h(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==
a.test&&(c=h(a.test,b),""!==c))break;if(null!==a.init&&(c=h(a.init,b),""!==c))break;if(null!==a.update&&(c=h(a.update,b),""!==c))break;if(null!==a.body&&(c=h(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=h(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=h(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=h(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var g=[],e=0;e<
a.body.length;e++)"EmptyStatement"!==a.body[e].type&&g.push(a.body[e]);a.body=g;for(e=0;e<a.body.length;e++)if(c=h(a.body[e],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?q(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?q(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):h(a.body,!1);case "ReturnStatement":return null!==a.argument?h(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?q(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):
h(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=h(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return h(a.right,!1);case "ExpressionStatement":return h(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=h(a.object,b);if(""!==c)break;return!0===
a.computed?h(a.property,b):"";case "Literal":return"";case "ThisExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return q(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(e=0;e<a.arguments.length;e++)if(c=h(a.arguments[e],b),""!==c)return c;return"";case "UnaryExpression":c=h(a.argument,b);break;case "BinaryExpression":c=h(a.left,b);if(""!==c)break;c=h(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=h(a.left,b);if(""!==c)break;c=h(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(e=0;e<a.elements.length&&(c=h(a.elements[e],b),""===c);e++);break;case "Array":return q(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(e=
0;e<a.properties.length&&(c="",null!==a.properties[e].key&&("Literal"!==a.properties[e].key.type&&"Identifier"!==a.properties[e].key.type&&(c=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[e].key.type&&(g=a.properties[e].key.value,"string"===typeof g||g instanceof String||(c=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),""===c&&(c=h(a.properties[e],b)),""===c);e++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return q(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==
a.key.type&&(c=h(a.key,b),""!==c))break;c=h(a.value,b)}return c}catch(G){throw G;}}function k(a,b){var e=q(a,"SYNTAX","UNREOGNISED"),g=null,d="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");a.id.name.toLowerCase();var h=null===a.init?"":k(a.init,b);if(""!==h)return h;null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"};return"";
case "FunctionDeclaration":g=c(a.id.name.toLowerCase(),a,b);d=n(a,b);if(""!==d)return d;if(null!==b.localScope)return q(a,"SYNTAX","GLOBALFUNCTIONSONLY");g.isnative=!1;b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[g]};return"";case "VariableDeclaration":for(var e="",m=0;m<a.declarations.length&&(e=k(a.declarations[m],b),""===e);m++);break;case "IfStatement":e=k(a.test,b);if(""!==e)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return q(a.test,
"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(e=k(a.consequent,b),""!==e))break;if(null!==a.alternate&&(e=k(a.alternate,b),""!==e))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(m=0;m<a.body.length;m++)if(e=k(a.body[m],b),""!==e)return e;return"";case "ReturnStatement":return null!==a.argument?k(a.argument,b):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return q(a,"SYNTAX","ONLY1VAR");if(null!==
a.left.declarations[0].init)return q(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return q(a,"SYNTAX","LEFTNOTVAR");e=k(a.left,b);if(""!==e)break;e=k(a.right,b);if(""!==e)break;e=k(a.body,b);if(""!==e)break;return"";case "ForStatement":if(null!==a.init&&(e=k(a.init,b),""!==e))break;if(null!==a.test&&(e=k(a.test,b),""!==e))break;if(null!==a.body&&(e=k(a.body,b),""!==e))break;if(null!==a.update&&(e=k(a.update,b),""!==e))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";
case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var p=!1;if("MemberExpression"===a.argument.type)return k(a.argument,b);null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(p=!0);void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(p=!0);return!1===p?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==
a.left.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var l=k(a.right,b);if(""!==l)return l;p=!1;if("MemberExpression"===a.left.type)return l=k(a.left,b),""!==l?l:"";null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(p=!0);void 0!==b.globalScope[a.left.name.toLowerCase()]&&(p=!0);return!1===p?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return k(a.expression,b);case "Identifier":var t=a.name.toLowerCase();if(null!==b.localScope&&void 0!==
b.localScope[t])return"";e=void 0!==b.globalScope[t]?"":q(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":e=k(a.object,b);if(""!==e)break;return!0===a.computed?k(a.property,b):"";case "Literal":return"";case "ThisExpression":e=q(a,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==a.callee.type)return q(a,"SYNTAX","ONLYNODESSUPPORTED");e="";for(m=0;m<a.arguments.length;m++)if(e=k(a.arguments[m],b),""!==e)return e;var u=f(a.callee.name,a.arguments,b);-1===u&&(e=q(a,
"SYNTAX","NOTFOUND"));-2===u&&(e=q(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":e=k(a.argument,b);break;case "BinaryExpression":e=k(a.left,b);if(""!==e)break;e=k(a.right,b);if(""!==e)break;return"";case "LogicalExpression":e=k(a.left,b);if(""!==e)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return q(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");e=k(a.right,b);if(""!==e)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===
a.right.type?q(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":e="";for(m=0;m<a.elements.length&&(e=k(a.elements[m],b),""===e);m++);break;case "ObjectExpression":e="";for(m=0;m<a.properties.length;m++){e="";if(null!==a.properties[m].key&&("Literal"!==a.properties[m].key.type&&"Identifier"!==a.properties[m].key.type&&(e=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[m].key.type)){var y=
a.properties[m].key.value;"string"===typeof y||y instanceof String||(e=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===e&&(e=k(a.properties[m],b));if(""!==e)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return q(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(e=k(a.key,b),""!==e))break;e=k(a.value,b);break;case "Array":return q(a,"SYNTAX","NOTSUPPORTED")}return e}catch(Z){throw Z;}}function b(a,c){var e=!1;try{switch(a.type){case "VariableDeclarator":return null!==
a.init?b(a.init,c):e;case "FunctionDeclaration":return b(a.body,c);case "VariableDeclaration":for(var g=0;g<a.declarations.length;g++)if(b(a.declarations[g],c))return!0;return e;case "IfStatement":return b(a.test,c)||null!==a.consequent&&b(a.consequent,c)||null!==a.alternate&&b(a.alternate,c)?!0:e;case "EmptyStatement":return e;case "BlockStatement":for(g=0;g<a.body.length;g++)if(b(a.body[g],c))return!0;return e;case "ReturnStatement":return null!==a.argument?b(a.argument,c):e;case "UpdateExpression":return b(a.argument,
c);case "AssignmentExpression":return(e=b(a.right,c))?e:b(a.left,c);case "ExpressionStatement":return b(a.expression,c);case "ForInStatement":return(e=b(a.left,c))||(e=b(a.right,c))?e:e=b(a.body,c);case "ForStatement":if(null!==a.init&&(e=b(a.init,c))||null!==a.test&&(e=b(a.test,c))||null!==a.body&&(e=b(a.body,c)))return e;null!==a.update&&(e=b(a.update,c));return e;case "BreakStatement":return e;case "ContinueStatement":return e;case "Compound":return e;case "Identifier":return c.toLowerCase()===
a.name.toLowerCase();case "MemberExpression":if(e=b(a.object,c))return e;!0===a.computed&&(e=b(a.property,c));return e;case "Literal":return e;case "ThisExpression":return e;case "CallExpression":for(g=0;g<a.arguments.length;g++)b(a.arguments[g],c)&&(e=!0);return e;case "ArrayExpression":for(g=0;g<a.elements.length;g++)b(a.elements[g],c)&&(e=!0);return e;case "UnaryExpression":return b(a.argument,c);case "BinaryExpression":return(e=b(a.left,c))?e:e=b(a.right,c);case "LogicalExpression":return(e=b(a.left,
c))?e:e=b(a.right,c);case "ObjectExpression":for(g=0;g<a.properties.length;g++)b(a.properties[g],c)&&(e=!0);return e;case "Property":return e=b(a.value,c);case "ConditionalExpression":return e;case "Array":return e;default:return e}}catch(F){throw F;}}function g(a,c){return!0===b(a.body[0].body,c.toLowerCase())?!0:!1}function p(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?p(a.init,b):c;case "FunctionDeclaration":return p(a.body,b);case "VariableDeclaration":for(var e=
0;e<a.declarations.length;e++)if(p(a.declarations[e],b))return!0;return c;case "IfStatement":return p(a.test,b)||null!==a.consequent&&p(a.consequent,b)||null!==a.alternate&&p(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)if(p(a.body[e],b))return!0;return c;case "ReturnStatement":return null!==a.argument?p(a.argument,b):c;case "UpdateExpression":return p(a.argument,b);case "AssignmentExpression":return p(a.left,b)?!0:p(a.right,b);case "ExpressionStatement":return p(a.expression,
b);case "ForInStatement":return(c=p(a.left,b))||(c=p(a.right,b))?c:c=p(a.body,b);case "ForStatement":if(null!==a.init&&(c=p(a.init,b))||null!==a.test&&(c=p(a.test,b))||null!==a.body&&(c=p(a.body,b)))return c;null!==a.update&&(c=p(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=p(a.object,b))return c;!0===a.computed&&(c=p(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;
case "CallExpression":if(a.callee.name.toLowerCase()===b.toLowerCase())return!0;for(e=0;e<a.arguments.length;e++)p(a.arguments[e],b)&&(c=!0);return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)p(a.elements[e],b)&&(c=!0);return c;case "UnaryExpression":return p(a.argument,b);case "BinaryExpression":return(c=p(a.left,b))?c:c=p(a.right,b);case "LogicalExpression":return(c=p(a.left,b))?c:c=p(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(e=0;e<a.properties.length;e++)p(a.properties[e],
b)&&(c=!0);return c;case "Property":return c=p(a.value,b);case "Array":return c;default:return c}}catch(F){throw F;}}function e(a,b){var c=[],g;try{switch(a.type){case "VariableDeclarator":return null!==a.init?e(a.init,b):c;case "FunctionDeclaration":return e(a.body,b);case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)g=e(a.declarations[f],b),c=c.concat(g);return c;case "ForInStatement":return g=e(a.left,b),c=c.concat(g),g=e(a.right,b),c=c.concat(g),g=e(a.body,b),c=c.concat(g);case "ForStatement":return null!==
a.init&&(g=e(a.init,b),c=c.concat(g)),null!==a.test&&(g=e(a.test,b),c=c.concat(g)),null!==a.body&&(g=e(a.body,b),c=c.concat(g)),null!==a.update&&(g=e(a.update,b),c=c.concat(g)),c;case "IfStatement":return g=e(a.test,b),c=c.concat(g),null!==a.consequent&&(g=e(a.consequent,b),c=c.concat(g)),null!==a.alternate&&(g=e(a.alternate,b),c=c.concat(g)),c;case "EmptyStatement":return c;case "BlockStatement":for(f=0;f<a.body.length;f++)g=e(a.body[f],b),c=c.concat(g);return c;case "ReturnStatement":return null!==
a.argument?e(a.argument,b):c;case "UpdateExpression":return e(a.argument,b);case "AssignmentExpression":return c=e(a.left,b),c=c.concat(e(a.right,b));case "ExpressionStatement":return e(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if("Identifier"!==a.object.type)return c;if(!1===a.computed)c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&
"string"===typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(G){}return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(f=0;f<a.arguments.length;f++)g=e(a.arguments[f],b),c=c.concat(g);return c;case "ArrayExpression":for(f=0;f<a.elements.length;f++)g=e(a.elements[f],b),c=c.concat(g);return c;case "UnaryExpression":return e(a.argument,b);case "ObjectExpression":for(f=0;f<a.properties.length;f++)g=e(a.properties[f],
b),c=c.concat(g);return c;case "Property":return e(a.value,b);case "BinaryExpression":return g=e(a.left,b),c=c.concat(g),g=e(a.right,b),c=c.concat(g);case "LogicalExpression":return g=e(a.left,b),c=c.concat(g),g=e(a.right,b),c=c.concat(g);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(G){throw G;}}function c(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var e=0;e<b.params.length;e++)c.push("any");return{name:a,return:"any",params:c}}function n(a,b){b={globalScope:b.globalScope,
localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};return k(a.body,b)}function m(a,b,c,e){var g={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};g.infinity={type:"any"};g.textformatting={type:"any"};g.pi={type:"any"};for(var f in b)"sync"===e&&void 0!==b[f].min?g[f]={type:"FormulaFunction",signature:{min:b[f].min,max:b[f].max}}:"sync"!==e&&void 0!==b[f].fmin&&(g[f]={type:"FormulaFunction",signature:{min:b[f].fmin,max:b[f].fmax}});
for(b=0;b<c.length;b++)f=c[b],g[f.name]={type:"FormulaFunction",signature:f};for(f in a)g[f]=a[f],g[f].type="any";return g}function q(a,b,c){var e="";switch(b){case "SYNTAX":e="Syntax Error: ";break;case "RUNTIME":e="Runtime Error: ";break;default:e="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":e+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":e+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":e+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":e+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":e+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":e+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":e+=" Function Definition must have an identifier"}break;case "VariableDeclaration":e+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":e+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":e+=" Variable Definition must have an identifier"}break;case "Identifier":e+=" Identifier Not Found. ";e+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":e+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":e+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(c){case "ONLY1VAR":e+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":e+=" Can only declare value for use with IN";break;case "LEFTNOVAR":e+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":e+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":e+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":e+="Cannot find member property. ";e+=
!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":e+="Out of Bounds. ";e+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":e+="Cannot call member method on null. ";e+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":e+="Cannot call member property on object of this type. ",e+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":e+="Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":e+="THIS construct is not supported.";
case "CallExpression":switch(c){case "WRONGSIGNATURE":e+="Function signature does not match: ";e+=a.callee.name;break;case "ONLYNODESUPPORTED":e+="Functions must be declared.";e+=a.callee.name;break;case "NOTAFUNCTION":e+="Not a Function: ";e+=a.callee.name;break;case "NOTFOUND":e+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":e+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";
break;case "NOTSUPPORTEDTYPE":e+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":e+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":e+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":e+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":e+=
"Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":e+=" Cannot Put Function inside Array."}break;case "Array":e+="Expression contains unrecognised array structure.";break;default:e+="Expression contains unrecognised code structures."}}catch(F){throw F;}return e}function y(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:q(a,b,c)}}function x(a,b,c,e,g){void 0===g&&(g=!0);b={globalScope:b.globalScope,localScope:{}};for(g=
0;g<a.params.length;g++)b.localScope[a.params[g].name.toLowerCase()]={type:"any"};t(a.body,b,c,e,!1)}function t(a,b,e,g,d){void 0===d&&(d=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var h=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){g.push(y(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?g.push(y(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===b.localScope?b.globalScope[a.id.name.toLowerCase()]=
{type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});null!==a.init&&t(a.init,b,e,g,d);break;case "FunctionDeclaration":!1===d&&g.push(y(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&g.push(y(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));h=c("",a,b);x(a,b,e,g,d);null!==b.localScope&&g.push(y(a,"SYNTAX","GLOBALFUNCTIONSONLY"));h.isnative=!1;"Identifier"===a.id.type&&(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[h]});break;case "VariableDeclaration":for(var k=
0;k<a.declarations.length;k++)t(a.declarations[k],b,e,g,d);break;case "IfStatement":null!==a.test&&(t(a.test,b,e,g,d),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||g.push(y(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&t(a.consequent,b,e,g,d);null!==a.alternate&&t(a.alternate,b,e,g,d);break;case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(k=0;k<a.body.length;k++)t(a.body[k],b,e,g,d);break;case "ReturnStatement":null!==
a.argument&&t(a.argument,b,e,g,d);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&g.push(y(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&g.push(y(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&g.push(y(a,"SYNTAX","LEFTNOTVAR"));t(a.left,b,e,g,d);t(a.right,b,e,g,d);t(a.body,b,e,g,d);break;case "ForStatement":null!==a.init&&t(a.init,b,e,g,d);null!==a.test&&t(a.test,b,e,g,d);null!==a.body&&t(a.body,b,e,g,d);null!==a.update&&t(a.update,
b,e,g,d);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?g.push(y(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(h=!1,!1===e&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(h=!0),void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(h=!0),!1===h&&g.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+
a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&t(a.argument,b,e,g,d));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&g.push(y(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:g.push(y(a,"SYNTAX","OPERATORNOTRECOGNISED"))}t(a.right,b,e,g,d);h=!1;"Identifier"===a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&
(h=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(h=!0),!1===e&&!1===h&&g.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}));"MemberExpression"===a.left.type&&t(a.left,b,e,g,d);break;case "ExpressionStatement":t(a.expression,b,e,g,d);break;case "Identifier":var n=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[n])break;void 0===b.globalScope[n]&&!1===e&&g.push(y(a,"SYNTAX","VARIABLENOTFOUND"));
break;case "MemberExpression":t(a.object,b,e,g,d);!0===a.computed&&t(a.property,b,e,g,d);break;case "Literal":return"";case "ThisExpression":g.push(y(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==a.callee.type&&g.push(y(a,"SYNTAX","ONLYNODESSUPPORTED"));for(k=0;k<a.arguments.length;k++)t(a.arguments[k],b,e,g,d);var m=f(a.callee.name,a.arguments,b);!1===e&&-1===m&&g.push(y(a,"SYNTAX","NOTFOUND"));-2===m&&g.push(y(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":t(a.argument,
b,e,g,d);break;case "BinaryExpression":t(a.left,b,e,g,d);t(a.right,b,e,g,d);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:g.push(y(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:g.push(y(a,"SYNTAX","OPERATORNOTRECOGNISED"))}t(a.left,b,e,g,d);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||
g.push(y(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));t(a.right,b,e,g,d);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||g.push(y(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":g.push(y(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(k=0;k<a.elements.length;k++)t(a.elements[k],b,e,g,d);break;case "Array":g.push(y(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(k=0;k<a.properties.length;k++)t(a.properties[k],
b,e,g,d);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&g.push(y(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&t(a.key,b,e,g,d);t(a.value,b,e,g,d);break;default:g.push(y(a,"SYNTAX","UNRECOGNISED"))}}catch(J){g.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}function u(a,b){var c=[],e;try{switch(a.type){case "VariableDeclarator":return null!==a.init?u(a.init,b):c;case "FunctionDeclaration":return u(a.body,
b);case "VariableDeclaration":for(var g=0;g<a.declarations.length;g++)e=u(a.declarations[g],b),c=c.concat(e);return c;case "ForInStatement":return e=u(a.left,b),c=c.concat(e),e=u(a.right,b),c=c.concat(e),e=u(a.body,b),c=c.concat(e);case "ForStatement":return null!==a.init&&(e=u(a.init,b),c=c.concat(e)),null!==a.test&&(e=u(a.test,b),c=c.concat(e)),null!==a.body&&(e=u(a.body,b),c=c.concat(e)),null!==a.update&&(e=u(a.update,b),c=c.concat(e)),c;case "IfStatement":return e=u(a.test,b),c=c.concat(e),null!==
a.consequent&&(e=u(a.consequent,b),c=c.concat(e)),null!==a.alternate&&(e=u(a.alternate,b),c=c.concat(e)),c;case "EmptyStatement":return c;case "BlockStatement":for(g=0;g<a.body.length;g++)e=u(a.body[g],b),c=c.concat(e);return c;case "ReturnStatement":return null!==a.argument?u(a.argument,b):c;case "UpdateExpression":return u(a.argument,b);case "AssignmentExpression":return c=u(a.left,b),c=c.concat(u(a.right,b));case "ExpressionStatement":return u(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;
case "Compound":return c;case "Identifier":return c;case "MemberExpression":return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(g=0;g<a.arguments.length;g++)e=u(a.arguments[g],b),c=c.concat(e);c.push(a.callee.name.toLowerCase());return c;case "ArrayExpression":for(g=0;g<a.elements.length;g++)e=u(a.elements[g],b),c=c.concat(e);return c;case "UnaryExpression":return u(a.argument,b);case "ObjectExpression":for(g=0;g<a.properties.length;g++)e=u(a.properties[g],b),
c=c.concat(e);return c;case "Property":return u(a.value,b);case "BinaryExpression":return e=u(a.left,b),c=c.concat(e),e=u(a.right,b),c=c.concat(e);case "LogicalExpression":return e=u(a.left,b),c=c.concat(e),e=u(a.right,b),c=c.concat(e);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(G){throw G;}}function z(a,b){return u(a.body[0].body,b)}Object.defineProperty(a,"__esModule",{value:!0});a.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",
max:"1"},today:{min:"0",max:"0"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",
max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",
max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",
max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",
max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},
buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"}};for(var D in a.functionDecls)a.functionDecls[D].fmin=a.functionDecls[D].min,a.functionDecls[D].fmax=a.functionDecls[D].max;var B=["featureset","featuresetbyid","featuresetbyname","featuresetbyurl","featuresetbyportalitem"],w="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
a.addFunctionDeclaration=function(b,c){var e=a.functionDecls[b.name.toLowerCase()];void 0===e?"sync"===c?a.functionDecls[b.name.toLowerCase()]={min:b.min,max:b.max}:a.functionDecls[b.name.toLowerCase()]={fmin:b.min,fmax:b.max}:"sync"===c?(e.min=b.min,e.max=b.max):(e.fmin=b.min,e.fmax=b.max)};a.checkFunctionSignature=l;a.findFunction=f;a.validateLanguageNode=h;a.testValidityOfExpression=k;a.referencesMemberImpl=b;a.referencesMember=g;a.referencesFunctionImpl=p;a.referencesFunction=function(a,b){return!0===
p(a.body[0].body,b)?!0:!1};a.findFieldLiteralsImpl=e;a.findFieldLiterals=function(a,b){return e(a.body[0].body,b)};a.extractFunctionDeclaration=c;a.validateFunction=n;a.constructGlobalScope=m;a.validateScript=function(b,c,e,g){void 0===e&&(e="async");void 0===g&&(g=a.functionDecls);c={globalScope:m(c.vars,g,c.customFunctions,e),localScope:null};return k(b.body[0].body,c)};a.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":h(a.body[0].body)};a.nodeErrorMessage=
q;a.makeError=y;a.extractAllIssuesInFunction=x;a.extractAllIssues=t;a.checkScript=function(b,c,e,g,f){void 0===g&&(g="async");void 0===f&&(f=a.functionDecls);var d=[];if("BlockStatement"!==b.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===c||void 0===c)c={vars:{},customFunctions:[]};c={globalScope:m(c.vars,f,c.customFunctions,g),localScope:null};try{t(b.body[0].body,c,e,d)}catch(N){}return d};a.findFunctionCallsImpl=u;a.findFunctionCalls=z;a.findScriptDependencies=function(a,
b){void 0===b&&(b=[]);var c=null;if(void 0===a.usesFeatureSet){null===c&&(c=z(a,!1));a.usesFeatureSet=!1;for(var e=0;e<c.length;e++)-1<B.indexOf(c[e])&&(a.usesFeatureSet=!0,a.isAsync=!0);if(!1===a.usesFeatureSet&&b&&0<b.length)for(e=0;e<b.length;e++)if(g(a,b[e])){a.usesFeatureSet=!0;a.isAsync=!0;break}}void 0===a.isAsync&&(a.isAsync=!1);if(void 0===a.usesGeometry)for(a.usesGeometry=!1,null===c&&(c=z(a,!1)),e=0;e<c.length;e++)-1<w.indexOf(c[e])&&(a.usesGeometry=!0)};a.scriptUsesFeatureSet=function(a){a=
z(a,!1);for(var b=0;b<a.length;b++)if(-1<B.indexOf(a[b]))return!0;return!1}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(d,a,l,f){function h(a){return null===a?a:isNaN(a.getTime())?null:a}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,b){a.today=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,0,0);a=new Date;a.setHours(0,0,0,0);return a})};a.now=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,
0,0);return new Date})};a.timestamp=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.toutc=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,1,1);a=f.toDate(g[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.tolocal=
function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,1,1);a=f.toDate(g[0]);return null===a?null:l.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};a.day=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,1,1);a=f.toDate(g[0]);return null===a?NaN:a.getDate()})};a.month=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,1,1);a=f.toDate(g[0]);return null===a?NaN:a.getMonth()})};a.year=function(a,d){return b(a,d,function(a,
b,g){f.pcCheck(g,1,1);a=f.toDate(g[0]);return null===a?NaN:a.getFullYear()})};a.hour=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,1,1);a=f.toDate(g[0]);return null===a?NaN:a.getHours()})};a.second=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,1,1);a=f.toDate(g[0]);return null===a?NaN:a.getSeconds()})};a.millisecond=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,1,1);a=f.toDate(g[0]);return null===a?NaN:a.getMilliseconds()})};a.minute=function(a,d){return b(a,d,function(a,
b,g){f.pcCheck(g,1,1);a=f.toDate(g[0]);return null===a?NaN:a.getMinutes()})};a.weekday=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,1,1);a=f.toDate(g[0]);return null===a?NaN:a.getDay()})};a.date=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,0,7);if(3===g.length)return h(new Date(f.toNumber(g[0]),f.toNumber(g[1]),f.toNumber(g[2]),0,0,0,0));if(4===g.length)return h(new Date(f.toNumber(g[0]),f.toNumber(g[1]),f.toNumber(g[2]),f.toNumber(g[3]),0,0,0));if(5===g.length)return h(new Date(f.toNumber(g[0]),
f.toNumber(g[1]),f.toNumber(g[2]),f.toNumber(g[3]),f.toNumber(g[4]),0,0));if(6===g.length)return h(new Date(f.toNumber(g[0]),f.toNumber(g[1]),f.toNumber(g[2]),f.toNumber(g[3]),f.toNumber(g[4]),f.toNumber(g[5]),0));if(7===g.length)return h(new Date(f.toNumber(g[0]),f.toNumber(g[1]),f.toNumber(g[2]),f.toNumber(g[3]),f.toNumber(g[4]),f.toNumber(g[5]),f.toNumber(g[6])));if(2===g.length){a=f.toString(g[1]);if(""===a)return null;a=f.standardiseDateFormat(a);g=l(f.toString(g[0]),a,!0);return!0===g.isValid()?
g.toDate():null}if(1===g.length){if(f.isString(g[0])&&""===g[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=f.toNumber(g[0]);return!1===isNaN(a)?h(new Date(a)):f.toDate(g[0])}if(0===g.length)return new Date})};a.datediff=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,2,3);a=f.toDateM(g[0]);b=f.toDateM(g[1]);if(null===a||null===b)return NaN;switch(f.toString(g[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(b,"days",!0);case "months":case "month":return a.diff(b,
"months",!0);case "minutes":case "minute":case "m":return"M"===g[2]?a.diff(b,"months",!0):a.diff(b,"minutes",!0);case "seconds":case "second":case "s":return a.diff(b,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(b);case "hours":case "hour":case "h":return a.diff(b,"hours",!0);case "years":case "year":case "y":return a.diff(b,"years",!0);default:return a.diff(b)}})};a.dateadd=function(a,d){return b(a,d,function(a,b,g){f.pcCheck(g,2,3);a=f.toDateM(g[0]);if(null===a)return null;
b="milliseconds";switch(f.toString(g[2]).toLowerCase()){case "days":case "day":case "d":b="days";break;case "months":case "month":b="months";break;case "minutes":case "minute":case "m":b="M"===g[2]?"months":"minutes";break;case "seconds":case "second":case "s":b="seconds";break;case "milliseconds":case "millisecond":case "ms":b="milliseconds";break;case "hours":case "hour":case "h":b="hours";break;case "years":case "year":case "y":b="years"}a.add(f.toNumber(g[1]),b);return a.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n){Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,d){a.polygon=function(a,b){return d(a,b,function(b,c,g){h.pcCheck(g,1,1);b=null;if(g[0]instanceof l){if(b=h.fixSpatialReference(f.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===b instanceof e)throw Error("Illegal Parameter");}else b=g[0]instanceof e?n.fromJSON(g[0].toJSON()):h.fixSpatialReference(new e(JSON.parse(g[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return h.fixNullGeometry(b)})};a.polyline=function(a,b){return d(a,b,function(b,e,g){h.pcCheck(g,1,1);b=null;if(g[0]instanceof l){if(b=h.fixSpatialReference(f.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===b instanceof c)throw Error("Illegal Parameter");}else b=g[0]instanceof c?n.fromJSON(g[0].toJSON()):h.fixSpatialReference(new c(JSON.parse(g[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return h.fixNullGeometry(b)})};a.point=function(a,b){return d(a,b,function(b,c,e){h.pcCheck(e,1,1);b=null;if(e[0]instanceof l){if(b=h.fixSpatialReference(f.parseGeometryFromDictionary(e[0]),a.spatialReference),!1===b instanceof p)throw Error("Illegal Parameter");}else b=e[0]instanceof p?n.fromJSON(e[0].toJSON()):h.fixSpatialReference(new p(JSON.parse(e[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return h.fixNullGeometry(b)})};a.multipoint=function(a,b){return d(a,b,function(b,c,e){h.pcCheck(e,1,1);b=null;if(e[0]instanceof l){if(b=h.fixSpatialReference(f.parseGeometryFromDictionary(e[0]),a.spatialReference),!1===b instanceof g)throw Error("Illegal Parameter");}else b=e[0]instanceof g?n.fromJSON(e[0].toJSON()):h.fixSpatialReference(new g(JSON.parse(e[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return h.fixNullGeometry(b)})};a.extent=function(a,b){return d(a,b,function(b,d,m){m=h.autoCastFeatureToGeometry(m);h.pcCheck(m,1,1);b=null;m[0]instanceof l?b=h.fixSpatialReference(f.parseGeometryFromDictionary(m[0]),a.spatialReference):m[0]instanceof p?(b={xmin:m[0].x,ymin:m[0].y,xmax:m[0].x,ymax:m[0].y,spatialReference:m[0].spatialReference.toJSON()},m[0].hasZ?(b.zmin=m[0].z,b.zmax=m[0].z):m[0].hasM&&(b.mmin=m[0].m,b.mmax=m[0].m),b=n.fromJSON(b)):b=m[0]instanceof e?n.fromJSON(m[0].extent.toJSON()):
m[0]instanceof c?n.fromJSON(m[0].extent.toJSON()):m[0]instanceof g?n.fromJSON(m[0].extent.toJSON()):m[0]instanceof k?n.fromJSON(m[0].toJSON()):h.fixSpatialReference(new k(JSON.parse(m[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(b)})};a.geometry=function(a,b){return d(a,b,function(b,c,e){h.pcCheck(e,1,1);b=null;b=e[0]instanceof
f?h.fixSpatialReference(e[0].geometry(),a.spatialReference):e[0]instanceof l?h.fixSpatialReference(f.parseGeometryFromDictionary(e[0]),a.spatialReference):h.fixSpatialReference(n.fromJSON(JSON.parse(e[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(b)})};a.setgeometry=function(a,c){return d(a,c,function(a,c,e){h.pcCheck(e,
2,2);if(e[0]instanceof f){if(!0===e[0].immutable)throw Error("Feature is Immutable");if(e[1]instanceof b||null===e[1])e[0]._geometry=e[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return h.voidOperation})};a.feature=function(a,c){return d(a,c,function(c,e,g){if(0===g.length)throw Error("Missing Parameters");c=null;if(1===g.length)if(h.isString(g[0]))c=f.fromJson(JSON.parse(g[0]));else if(g[0]instanceof f)c=f.createFromArcadeFeature(g[0]);else if(g[0]instanceof b)c=
f.createFromGraphicLikeObject(g[0],null,null);else if(g[0]instanceof l)c=g[0].hasField("geometry")?g[0].field("geometry"):null,e=g[0].hasField("attributes")?g[0].field("attributes"):null,null!==c&&c instanceof l&&(c=f.parseGeometryFromDictionary(c)),null!==e&&(e=f.parseAttributesFromDictionary(e)),c=f.createFromGraphicLikeObject(c,e,null);else throw Error("Illegal Argument");else{if(2===g.length){e=c=null;if(null!==g[0])if(g[0]instanceof b)c=g[0];else if(c instanceof l)c=f.parseGeometryFromDictionary(g[0]);
else throw Error("Illegal Argument");if(null!==g[1])if(g[1]instanceof l)e=f.parseAttributesFromDictionary(g[1]);else throw Error("Illegal Argument");}else{c=null;e={};if(null!==g[0])if(g[0]instanceof b)c=g[0];else if(c instanceof l)c=f.parseGeometryFromDictionary(g[0]);else throw Error("Illegal Argument");for(var d=1;d<g.length;d+=2){var k=h.toString(g[d]),n=g[d+1];if(null===n||void 0===n||h.isString(n)||isNaN(n)||h.isDate(n)||h.isNumber(n)||h.isBoolean(n)){if(h.isFunctionParameter(n)||!1===h.isSimpleType(n))throw Error("Illegal Argument");
e[k]=n===h.voidOperation?null:n}else throw Error("Illegal Argument");}}c=f.createFromGraphicLikeObject(c,e,null)}c._geometry=h.fixSpatialReference(c.geometry(),a.spatialReference);c.immutable=!1;return c})};a.dictionary=function(a,b){return d(a,b,function(a,b,c){if(0===c.length)throw Error("Missing Parameters");if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2){var e=h.toString(c[b]),g=c[b+1];if(null===g||void 0===g||h.isString(g)||isNaN(g)||h.isDate(g)||h.isNumber(g)||
h.isBoolean(g)||h.isArray(g)||h.isImmutableArray(g)){if(h.isFunctionParameter(g))throw Error("Illegal Argument");a[e]=g===h.voidOperation?null:g}else throw Error("Illegal Argument");}c=new l(a);c.immutable=!1;return c})};a.haskey=function(a,b){return d(a,b,function(a,b,c){h.pcCheck(c,2,2);a=h.toString(c[1]);if(c[0]instanceof f||c[0]instanceof l)return c[0].hasField(a);throw Error("Illegal Argument");})};a.indexof=function(a,b){return d(a,b,function(a,b,c){h.pcCheck(c,2,2);a=c[1];if(h.isArray(c[0])){for(b=
0;b<c[0].length;b++)if(h.equalityTest(a,c[0][b]))return b;return-1}if(h.isImmutableArray(c[0])){var e=c[0].length();for(b=0;b<e;b++)if(h.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ../featureset/support/shared ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q){function y(a){return 0===l.version.indexOf("4.")?n.fromExtent(a):new n({spatialReference:a.spatialReference,rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]})}Object.defineProperty(a,"__esModule",{value:!0});var x=null;a.setGeometryEngine=function(a){x=a};a.registerFunctions=function(a,d){function l(a){h.pcCheck(a,2,2);if(!(a[0]instanceof p&&a[1]instanceof p||a[0]instanceof p&&null===a[1]||a[1]instanceof p&&null===a[0]||
null===a[0]&&null===a[1]))throw Error("Illegal Argument");}a.disjoint=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);l(c);return null===c[0]||null===c[1]?!0:x.disjoint(c[0],c[1])})};a.intersects=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);l(c);return null===c[0]||null===c[1]?!1:x.intersects(c[0],c[1])})};a.touches=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);l(c);return null===c[0]||null===c[1]?!1:x.touches(c[0],
c[1])})};a.crosses=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);l(c);return null===c[0]||null===c[1]?!1:x.crosses(c[0],c[1])})};a.within=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);l(c);return null===c[0]||null===c[1]?!1:x.within(c[0],c[1])})};a.contains=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);l(c);return null===c[0]||null===c[1]?!1:x.contains(c[0],c[1])})};a.overlaps=function(a,b){return d(a,b,function(a,
b,c){c=h.autoCastFeatureToGeometry(c);l(c);return null===c[0]||null===c[1]?!1:x.overlaps(c[0],c[1])})};a.equals=function(a,b){return d(a,b,function(a,b,c){h.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof p&&c[1]instanceof p?x.equals(c[0],c[1]):h.isDate(c[0])&&h.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};a.relate=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,3,3);if(c[0]instanceof p&&c[1]instanceof p)return x.relate(c[0],c[1],h.toString(c[2]));
if(c[0]instanceof p&&null===c[1]||c[1]instanceof p&&null===c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};a.intersection=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);l(c);return null===c[0]||null===c[1]?null:x.intersect(c[0],c[1])})};a.union=function(a,b){return d(a,b,function(b,c,e){e=h.autoCastFeatureToGeometry(e);b=[];if(0===e.length)throw Error("Function called with wrong number of Parameters");if(1===e.length)if(h.isArray(e[0]))for(e=
h.autoCastFeatureToGeometry(e[0]),c=0;c<e.length;c++){if(null!==e[c])if(e[c]instanceof p)b.push(e[c]);else throw Error("Illegal Argument");}else if(h.isImmutableArray(e[0]))for(e=h.autoCastFeatureToGeometry(e[0].toArray()),c=0;c<e.length;c++){if(null!==e[c])if(e[c]instanceof p)b.push(e[c]);else throw Error("Illegal Argument");}else{if(e[0]instanceof p)return h.fixSpatialReference(k.cloneGeometry(e[0]),a.spatialReference);if(null===e[0])return null;throw Error("Illegal Argument");}else for(c=0;c<e.length;c++)if(null!==
e[c])if(e[c]instanceof p)b.push(e[c]);else throw Error("Illegal Argument");return 0===b.length?null:x.union(b)})};a.difference=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);l(c);return null!==c[0]&&null===c[1]?k.cloneGeometry(c[0]):null===c[0]?null:x.difference(c[0],c[1])})};a.symmetricdifference=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);l(c);return null===c[0]&&null===c[1]?null:null===c[0]?k.cloneGeometry(c[1]):null===c[1]?k.cloneGeometry(c[0]):
x.symmetricDifference(c[0],c[1])})};a.clip=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,2);if(!(c[1]instanceof g)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return null;if(!(c[0]instanceof p))throw Error("Illegal Argument");return null===c[1]?null:x.clip(c[0],c[1])})};a.cut=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,2);if(!(c[1]instanceof m)&&null!==c[1])throw Error("Illegal Argument");if(null===
c[0])return[];if(!(c[0]instanceof p))throw Error("Illegal Argument");return null===c[1]?[k.cloneGeometry(c[0])]:x.cut(c[0],c[1])})};a.area=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,1,2);if(null===c[0])return 0;if(!(c[0]instanceof p))throw Error("Illegal Argument");return x.planarArea(c[0],f.convertSquareUnitsToCode(h.defaultUndefined(c[1],-1)))})};a.areageodetic=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,1,
2);if(null===c[0])return 0;if(!(c[0]instanceof p))throw Error("Illegal Argument");return x.geodesicArea(c[0],f.convertSquareUnitsToCode(h.defaultUndefined(c[1],-1)))})};a.length=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,1,2);if(null===c[0])return 0;if(!(c[0]instanceof p))throw Error("Illegal Argument");return x.planarLength(c[0],f.convertLinearUnitsToCode(h.defaultUndefined(c[1],-1)))})};a.lengthgeodetic=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);
h.pcCheck(c,1,2);if(null===c[0])return 0;if(!(c[0]instanceof p))throw Error("Illegal Argument");return x.geodesicLength(c[0],f.convertLinearUnitsToCode(h.defaultUndefined(c[1],-1)))})};a.distance=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,3);if(!(c[0]instanceof p))throw Error("Illegal Argument");if(!(c[1]instanceof p))throw Error("Illegal Argument");return x.distance(c[0],c[1],f.convertLinearUnitsToCode(h.defaultUndefined(c[2],-1)))})};a.densify=function(a,
b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof p))throw Error("Illegal Argument");a=h.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return c[0]instanceof n||c[0]instanceof m?x.densify(c[0],a,f.convertLinearUnitsToCode(h.defaultUndefined(c[2],-1))):c[0]instanceof g?x.densify(y(c[0]),a,f.convertLinearUnitsToCode(h.defaultUndefined(c[2],-1))):c[0]})};a.densifygeodetic=
function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof p))throw Error("Illegal Argument");a=h.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return c[0]instanceof n||c[0]instanceof m?x.geodesicDensify(c[0],a,f.convertLinearUnitsToCode(h.defaultUndefined(c[2],-1))):c[0]instanceof g?x.geodesicDensify(y(c[0]),a,f.convertLinearUnitsToCode(h.defaultUndefined(c[2],-1))):
c[0]})};a.generalize=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,4);if(null===c[0])return null;if(!(c[0]instanceof p))throw Error("Illegal Argument");a=h.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return x.generalize(c[0],a,h.toBoolean(h.defaultUndefined(c[2],!0)),f.convertLinearUnitsToCode(h.defaultUndefined(c[3],-1)))})};a.buffer=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,3);if(null===c[0])return null;
if(!(c[0]instanceof p))throw Error("Illegal Argument");a=h.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?k.cloneGeometry(c[0]):x.buffer(c[0],a,f.convertLinearUnitsToCode(h.defaultUndefined(c[2],-1)))})};a.buffergeodetic=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof p))throw Error("Illegal Argument");a=h.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?k.cloneGeometry(c[0]):
x.geodesicBuffer(c[0],a,f.convertLinearUnitsToCode(h.defaultUndefined(c[2],-1)))})};a.offset=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,6);if(null===c[0])return null;if(!(c[0]instanceof n||c[0]instanceof m))throw Error("Illegal Argument");a=h.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");b=h.toNumber(h.defaultUndefined(c[4],10));if(isNaN(b))throw Error("Illegal Argument");var e=h.toNumber(h.defaultUndefined(c[5],0));if(isNaN(e))throw Error("Illegal Argument");
return x.offset(c[0],a,f.convertLinearUnitsToCode(h.defaultUndefined(c[2],-1)),h.toString(h.defaultUndefined(c[3],"round")).toLowerCase(),b,e)})};a.rotate=function(a,b){return d(a,b,function(a,b,e){e=h.autoCastFeatureToGeometry(e);h.pcCheck(e,2,3);a=e[0];if(null===a)return null;if(!(a instanceof p))throw Error("Illegal Argument");a instanceof g&&(a=n.fromExtent(a));b=h.toNumber(e[1]);if(isNaN(b))throw Error("Illegal Argument");e=h.defaultUndefined(e[2],null);if(null===e)return x.rotate(a,b);if(e instanceof
c)return x.rotate(a,b,e);throw Error("Illegal Argument");})};a.centroid=function(a,f){return d(a,f,function(d,f,q){q=h.autoCastFeatureToGeometry(q);h.pcCheck(q,1,1);if(null===q[0])return null;if(!(q[0]instanceof p))throw Error("Illegal Argument");return q[0]instanceof c?h.fixSpatialReference(k.cloneGeometry(q[0]),a.spatialReference):q[0]instanceof n?q[0].centroid:q[0]instanceof m?b.centroidPolyline(q[0]):q[0]instanceof e?b.centroidMultiPoint(q[0]):q[0]instanceof g?q[0].center:null})};a.multiparttosinglepart=
function(a,b){return d(a,b,function(b,d,f){f=h.autoCastFeatureToGeometry(f);h.pcCheck(f,1,1);d=[];if(null===f[0])return null;if(!(f[0]instanceof p))throw Error("Illegal Argument");if(f[0]instanceof c||f[0]instanceof g)return[h.fixSpatialReference(k.cloneGeometry(f[0]),a.spatialReference)];b=x.simplify(f[0]);if(b instanceof n){d=[];var l=[];for(f=0;f<b.rings.length;f++)if(b.isClockwise(b.rings[f])){var t=q.fromJSON({rings:[b.rings[f]],hasZ:!0===b.hasZ,hasM:!0===b.hasM,spatialReference:b.spatialReference.toJSON()});
d.push(t)}else l.push({ring:b.rings[f],pt:b.getPoint(f,0)});for(b=0;b<l.length;b++)for(f=0;f<d.length;f++)if(d[f].contains(l[b].pt)){d[f].addRing(l[b].ring);break}return d}if(b instanceof m){d=[];for(f=0;f<b.paths.length;f++)l=q.fromJSON({paths:[b.paths[f]],hasZ:!0===b.hasZ,hasM:!0===b.hasM,spatialReference:b.spatialReference.toJSON()}),d.push(l);return d}if(f[0]instanceof e){b=h.fixSpatialReference(k.cloneGeometry(f[0]),a.spatialReference);for(f=0;f<b.points.length;f++)d.push(b.getPoint(f));return d}return null})};
a.issimple=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,1,1);if(null===c[0])return!0;if(c[0]instanceof p)return x.isSimple(c[0]);throw Error("Illegal Argument");})};a.simplify=function(a,b){return d(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,1,1);if(null===c[0])return null;if(c[0]instanceof p)return x.simplify(c[0]);throw Error("Illegal Argument");})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],
function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.errback=function(a){return function(f){a.reject(f)}};a.callback=function(a,d){return function(){try{a.apply(null,arguments)}catch(k){d.reject(k)}}};a.convertSquareUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square_meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
a.shapeExtent=function(a){if(null===a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.extent;case "point":return new l({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});case "extent":return a}return null};a.convertLinearUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
a.sameGeomType=function(a,d){return a===d||"point"===a&&"esriGeometryPoint"===d||"polyline"===a&&"esriGeometryPolyline"===d||"polygon"===a&&"esriGeometryPolygon"===d||"extent"===a&&"esriGeometryEnvelope"===d||"multipoint"===a&&"esriGeometryMultipoint"===d||"point"===d&&"esriGeometryPoint"===a||"polyline"===d&&"esriGeometryPolyline"===a||"polygon"===d&&"esriGeometryPolygon"===a||"extent"===d&&"esriGeometryEnvelope"===a||"multipoint"===d&&"esriGeometryMultipoint"===a?!0:!1}})},"esri/arcade/featureset/support/shared":function(){define(["require",
"exports","dojo/Deferred","../../../geometry/Extent","../../../layers/support/Field"],function(d,a,l,f,h){function k(a){return a instanceof Date}Object.defineProperty(a,"__esModule",{value:!0});(function(a){a[a.Standardised=0]="Standardised";a[a.SqlServer=1]="SqlServer";a[a.Oracle=2]="Oracle";a[a.Postgres=3]="Postgres";a[a.PGDB=4]="PGDB";a[a.FILEGDB=5]="FILEGDB";a[a.NotEvaluated=6]="NotEvaluated"})(a.FeatureServiceDatabaseType||(a.FeatureServiceDatabaseType={}));a.cloneField=function(a){return h.fromJSON(a.toJSON())};
a.esriFieldToJson=function(a){return a.toJSON()};a.cloneGeometry=function(a){if(null===a)return null;var b=a.clone();void 0!==a.cache._geVersion&&(b.cache._geVersion=a.cache._geVersion);return b};a.cloneGraphic=function(a){var b=a.clone();b.geometry&&void 0!==a.geometry.cache._geVersion&&(b.geometry.cache._geVersion=a.geometry.cache._geVersion);return b};(function(a){a[a.InFeatureSet=0]="InFeatureSet";a[a.NotInFeatureSet=1]="NotInFeatureSet";a[a.Unknown=2]="Unknown"})(a.IdState||(a.IdState={}));a.isString=
function(a){return"string"===typeof a||a instanceof String};a.isBoolean=function(a){return"boolean"===typeof a};a.isNumber=function(a){return"number"===typeof a};a.isArray=function(a){return a instanceof Array};a.isDate=k;a.equalityTest=function(a,g){return a===g?!0:k(a)&&k(g)?a.getTime()===g.getTime():!1};a.cloneAttributes=function(a){var b={},d;for(d in a)b[d]=a[d];return b};a.convertSquareUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":return 109404;
case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};a.shapeExtent=function(a){if(null===a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.extent;case "point":return new f({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});case "extent":return a}return null};a.convertLinearUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":return 9001;
case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};a.sameGeomType=function(a,g){return a===g||"point"===a&&"esriGeometryPoint"===g||"polyline"===a&&"esriGeometryPolyline"===g||"polygon"===a&&"esriGeometryPolygon"===g||"extent"===a&&"esriGeometryEnvelope"===g||"multipoint"===a&&"esriGeometryMultipoint"===g||"point"===g&&"esriGeometryPoint"===a||"polyline"===g&&"esriGeometryPolyline"===a||"polygon"===g&&"esriGeometryPolygon"===a||"extent"===g&&
"esriGeometryEnvelope"===a||"multipoint"===g&&"esriGeometryMultipoint"===a?!0:!1};a.defaultMaxRecords=1E3;a.errback=function(a){return function(b){a.reject(b)}};a.callback=function(a,g){return function(b){try{a.apply(null,arguments)}catch(e){g.reject(e)}}};a.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",
esriGeometryEnvelope:"extent",envelope:"extent"};a.toEsriGeometryType=function(a){switch(a){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};a.reduceArrayWithPromises=function(a,g,d){var b=new l;d=new l;d.resolve(!0);a.reduce(function(a,b,e,d){return a.then(function(a){try{return g(a,b,e,d)}catch(x){return a=new l,a.reject(x),a.promise}},
function(a){var b=new l;b.reject(a);return b.promise})},d.promise).then(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};a.stableStringify=function(a,g){g||(g={});"function"===typeof g&&(g={cmp:g});var b="boolean"===typeof g.cycles?g.cycles:!1,e=g.cmp&&function(a){return function(b){return function(c,e){return a({key:c,value:b[c]},{key:e,value:b[e]})}}}(g.cmp),c=[];return function m(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?
""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var g,d;if(Array.isArray(a)){d="[";for(g=0;g<a.length;g++)g&&(d+=","),d+=m(a[g])||"null";return d+"]"}if(null===a)return"null";if(-1!==c.indexOf(a)){if(b)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var f=c.push(a)-1,h=Object.keys(a).sort(e&&e(a));d="";for(g=0;g<h.length;g++){var k=h[g],p=m(a[k]);p&&(d&&(d+=","),d+=JSON.stringify(k)+":"+p)}c.splice(f,1);return"{"+d+"}"}}(a)}})},"esri/layers/support/Field":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./domains ./fieldType".split(" "),
function(d,a,l,f,h,k,b,g){return function(a){function e(b){b=a.call(this)||this;b.alias=null;b.defaultValue=void 0;b.domain=null;b.editable=!0;b.length=-1;b.name=null;b.nullable=!0;b.type=null;return b}l(e,a);c=e;e.prototype.clone=function(){return new c({alias:this.alias,defaultValue:this.defaultValue,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type})};var c;f([k.property({type:String,json:{write:!0}})],e.prototype,
"alias",void 0);f([k.property({json:{write:{allowNull:!0}}})],e.prototype,"defaultValue",void 0);f([k.property({types:b.types,json:{read:{reader:b.fromJSON},write:!0}})],e.prototype,"domain",void 0);f([k.property({type:Boolean,json:{write:!0}})],e.prototype,"editable",void 0);f([k.property({type:Number,json:{write:!0}})],e.prototype,"length",void 0);f([k.property({type:String,json:{write:!0}})],e.prototype,"name",void 0);f([k.property({type:Boolean,json:{write:!0}})],e.prototype,"nullable",void 0);
f([k.property({type:String,json:{read:g.kebabDict.read,write:g.kebabDict.write}})],e.prototype,"type",void 0);return e=c=f([k.subclass("esri.layers.support.Field")],e)}(k.declared(h))})},"esri/layers/support/domains":function(){define("require exports ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(d,a,l,f,h,k){function b(a,b){switch(a.type){case "range":var c="range"in a?a.range[1]:a.maxValue;if(+b<("range"in a?a.range[0]:a.minValue)||+b>c)return g.VALUE_OUT_OF_RANGE;
break;case "coded-value":case "codedValue":if(null==a.codedValues||a.codedValues.every(function(a){return null==a||a.code!==b}))return g.INVALID_CODED_VALUE}return null}Object.defineProperty(a,"__esModule",{value:!0});a.CodedValueDomain=l;a.DomainBase=f;a.InheritedDomain=h;a.RangeDomain=k;var g;(function(a){a.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";a.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(g=a.DomainValidationError||(a.DomainValidationError={}));
a.isValidDomainValue=function(a,e){return null===b(a,e)};a.validateDomainValue=b;a.types={key:"type",base:a.DomainBase,typeMap:{range:a.RangeDomain,"coded-value":a.CodedValueDomain}};a.getDomainRange=function(a){if(a&&"range"===a.type)return{min:"range"in a?a.range[0]:a.minValue,max:"range"in a?a.range[1]:a.maxValue}};a.fromJSON=function(b){if(b&&b.type){if("range"===b.type)return a.RangeDomain.fromJSON(b);if("codedValue"===b.type)return a.CodedValueDomain.fromJSON(b)}return null}})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./Domain".split(" "),
function(d,a,l,f,h,k,b){return function(a){function b(b){b=a.call(this,b)||this;b.codedValues=null;b.type="coded-value";return b}l(b,a);e=b;b.prototype.writeCodedValues=function(a,b){var c=null;a&&(c=a.map(function(a){return h.fixJson(h.clone(a))}));b.codedValues=c};b.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);this.codedValues.some(function(a){String(a.code)===c&&(b=a.name);return!!b})}return b};b.prototype.clone=function(){return new e({codedValues:h.clone(this.codedValues),
name:this.name})};var e;f([k.property({json:{write:!0}})],b.prototype,"codedValues",void 0);f([k.writer("codedValues")],b.prototype,"writeCodedValues",null);f([k.enumeration.serializable()({codedValue:"coded-value"})],b.prototype,"type",void 0);return b=e=f([k.subclass("esri.layers.support.CodedValueDomain")],b)}(k.declared(b))})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k,b){var g=k({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(a){function e(b){b=a.call(this,b)||this;b.name=null;b.type=null;return b}l(e,a);f([b.property({json:{write:!0}})],e.prototype,"name",void 0);f([b.property({json:{read:g.read,write:g.write}})],e.prototype,"type",void 0);return e=f([b.subclass("esri.layers.support.Domain")],e)}(b.declared(h))})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this,b)||this;b.type="inherited";return b}l(b,a);d=b;b.prototype.clone=function(){return new d};var d;f([h.enumeration.serializable()({inherited:"inherited"})],b.prototype,"type",void 0);return b=d=f([h.subclass("esri.layers.support.InheritedDomain")],b)}(h.declared(k))})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this,b)||this;b.maxValue=null;b.minValue=null;b.type="range";return b}l(b,a);d=b;b.prototype.clone=function(){return new d({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};var d;f([h.property({json:{read:{source:"range",reader:function(a,b){return b.range&&b.range[1]}},write:{target:"range",writer:function(a,b,g){b[g]=[this.minValue,a]}}}})],b.prototype,"maxValue",void 0);f([h.property({json:{read:{source:"range",reader:function(a,
b){return b.range&&b.range[0]}},write:{target:"range",writer:function(a,b,g){b[g]=[a,this.maxValue]}}}})],b.prototype,"minValue",void 0);f([h.enumeration.serializable()({range:"range"})],b.prototype,"type",void 0);return b=d=f([h.subclass("esri.layers.support.RangeDomain")],b)}(h.declared(k))})},"esri/layers/support/fieldType":function(){define(["require","exports","../../core/kebabDictionary"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.kebabDict=l({esriFieldTypeSmallInteger:"small-integer",
esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(d,a,l){function f(a,b,g){var d=
{x:0,y:0};b&&(d.z=0);g&&(d.m=0);for(var e=0,c=a[0],f=0;f<a.length;f++){var k=a[f],q;a:if(k.length!==c.length)q=!1;else{for(q=0;q<k.length;q++)if(k[q]!==c[q]){q=!1;break a}q=!0}if(!1===q){q=h(c,k,b);var l=k,x=b,t=g,u={x:(c[0]+l[0])/2,y:(c[1]+l[1])/2};x&&(u.z=(c[2]+l[2])/2);x&&t?u.m=(c[3]+l[3])/2:t&&(u.m=(c[2]+l[2])/2);c=u;c.x*=q;c.y*=q;d.x+=c.x;d.y+=c.y;b&&(c.z*=q,d.z+=c.z);g&&(c.m*=q,d.m+=c.m);e+=q;c=k}}0<e?(d.x/=e,d.y/=e,b&&(d.z/=e),g&&(d.m/=e)):(d.x=a[0][0],d.y=a[0][1],b&&(d.z=a[0][2]),g&&b?d.m=
a[0][3]:g&&(d.m=a[0][2]));return d}function h(a,b,g){var d=b[0]-a[0];a=b[1]-a[1];return g?(b=b[2]-b[2],Math.sqrt(d*d+a*a+b*b)):Math.sqrt(d*d+a*a)}Object.defineProperty(a,"__esModule",{value:!0});a.centroidPolyline=function(a){for(var b={x:0,y:0,spatialReference:a.spatialReference.toJSON()},g={x:0,y:0,spatialReference:a.spatialReference.toJSON()},d=0,e=0,c=0;c<a.paths.length;c++)if(0!==a.paths[c].length){var k;k=a.paths[c];var m=!0===a.hasZ;if(1>=k.length)k=0;else{for(var q=0,y=1;y<k.length;y++)q+=
h(k[y-1],k[y],m);k=q}0===k?(m=f(a.paths[c],!0===a.hasZ,!0===a.hasM),b.x+=m.x,b.y+=m.y,!0===a.hasZ&&(b.z+=m.z),!0===a.hasM&&(b.m+=m.m),++d):(m=f(a.paths[c],!0===a.hasZ,!0===a.hasM),g.x+=m.x*k,g.y+=m.y*k,!0===a.hasZ&&(g.z+=m.z*k),!0===a.hasM&&(g.m+=m.m*k),e+=k)}return 0<e?(g.x/=e,g.y/=e,!0===a.hasZ&&(g.z/=e),!0===a.hasM&&(g.m/=e),new l(g)):0<d?(b.x/=d,b.y/=d,!0===a.hasZ&&(g.z/=d),!0===a.hasM&&(b.m/=d),new l(b)):null};a.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var b=0,g=
0,d=0,e=0,c=0;c<a.points.length;c++){var f=a.getPoint(c);!0===f.hasZ&&(d+=f.z);!0===f.hasM&&(e+=f.m);b+=f.x;g+=f.y;e+=f.m}b={x:b/a.points.length,y:g/a.points.length,spatialReference:null};b.spatialReference=a.spatialReference.toJSON();!0===a.hasZ&&(b.z=d/a.points.length);!0===a.hasM&&(b.m=e/a.points.length);return new l(b)}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(d,a,l,f){function h(a,b,g){if("undefined"===typeof g||0===+g)return Math[a](b);
b=+b;g=+g;if(isNaN(b)||"number"!==typeof g||0!==g%1)return NaN;b=b.toString().split("e");b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-g:-g)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?+b[1]+g:g))}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,b){function g(a,b,c){a=f.toNumber(a);return isNaN(a)?a:isNaN(b)||isNaN(c)||b>c?NaN:a<b?b:a>c?c:a}a.number=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,2);a=e[0];return f.isNumber(a)?a:null===a?0:f.isDate(a)||f.isBoolean(a)?
Number(a):f.isArray(a)?NaN:""===a||void 0===a?Number(a):f.isString(a)?void 0!==e[1]?(e=f.multiReplace(e[1],"\u2030",""),e=f.multiReplace(e,"\u00a4",""),l.parse(a,{pattern:e})):Number(a.trim()):Number(a)})};a.abs=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return Math.abs(f.toNumber(e[0]))})};a.acos=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return Math.acos(f.toNumber(e[0]))})};a.asin=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return Math.asin(f.toNumber(e[0]))})};
a.atan=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return Math.atan(f.toNumber(e[0]))})};a.atan2=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,2,2);return Math.atan2(f.toNumber(e[0]),f.toNumber(e[1]))})};a.ceil=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,2);return 2===e.length?(a=f.toNumber(e[1]),isNaN(a)&&(a=0),h("ceil",f.toNumber(e[0]),-1*a)):Math.ceil(f.toNumber(e[0]))})};a.round=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,2);return 2===e.length?
(a=f.toNumber(e[1]),isNaN(a)&&(a=0),h("round",f.toNumber(e[0]),-1*a)):Math.round(f.toNumber(e[0]))})};a.floor=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,2);return 2===e.length?(a=f.toNumber(e[1]),isNaN(a)&&(a=0),h("floor",f.toNumber(e[0]),-1*a)):Math.floor(f.toNumber(e[0]))})};a.cos=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return Math.cos(f.toNumber(e[0]))})};a.isnan=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return"number"===typeof e[0]&&isNaN(e[0])})};
a.exp=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return Math.exp(f.toNumber(e[0]))})};a.log=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return Math.log(f.toNumber(e[0]))})};a.pow=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,2,2);return Math.pow(f.toNumber(e[0]),f.toNumber(e[1]))})};a.random=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,0,0);return Math.random()})};a.sin=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return Math.sin(f.toNumber(e[0]))})};
a.sqrt=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return Math.sqrt(f.toNumber(e[0]))})};a.tan=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return Math.tan(f.toNumber(e[0]))})};a.defaultvalue=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,2,2);return null===e[0]||""===e[0]||void 0===e[0]?e[1]:e[0]})};a.isempty=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,1,1);return null===e[0]||""===e[0]||void 0===e[0]?!0:!1})};a["boolean"]=function(a,e){return b(a,
e,function(a,b,e){f.pcCheck(e,1,1);return f.toBoolean(e[0])})};a.constrain=function(a,e){return b(a,e,function(a,b,e){f.pcCheck(e,3,3);a=f.toNumber(e[1]);b=f.toNumber(e[2]);if(f.isArray(e[0])){var c=[],d=0;for(e=e[0];d<e.length;d++)c.push(g(e[d],a,b));return c}if(f.isImmutableArray(e[0])){c=[];for(d=0;d<e[0].length();d++)c.push(g(e[0].get(d),a,b));return c}return g(e[0],a,b)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(d,a,
l,f){function h(a,b,g,d){if(1===d.length){if(l.isArray(d[0]))return f.calculateStat(a,d[0],-1);if(l.isImmutableArray(d[0]))return f.calculateStat(a,d[0].toArray(),-1)}return f.calculateStat(a,d,-1)}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,b){a.stdev=function(a,d){return b(a,d,function(a,b,g){return h("stdev",a,b,g)})};a.variance=function(a,d){return b(a,d,function(a,b,g){return h("variance",a,b,g)})};a.average=function(a,d){return b(a,d,function(a,b,g){return h("mean",
a,b,g)})};a.mean=function(a,d){return b(a,d,function(a,b,g){return h("mean",a,b,g)})};a.sum=function(a,d){return b(a,d,function(a,b,g){return h("sum",a,b,g)})};a.min=function(a,d){return b(a,d,function(a,b,g){return h("min",a,b,g)})};a.max=function(a,d){return b(a,d,function(a,b,g){return h("max",a,b,g)})};a.distinct=function(a,d){return b(a,d,function(a,b,g){return h("distinct",a,b,g)})};a.count=function(a,d){return b(a,d,function(a,b,g){l.pcCheck(g,1,1);if(l.isArray(g[0])||l.isString(g[0]))return g[0].length;
if(l.isImmutableArray(g[0]))return g[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(d,a,l){function f(a){for(var b=0,g=0;g<a.length;g++)b+=a[g];return b/a.length}function h(a){for(var b=f(a),g=0,d=0;d<a.length;d++)g+=Math.pow(b-a[d],2);return g/a.length}Object.defineProperty(a,"__esModule",{value:!0});a.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";
case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};a.calculateStat=function(a,b,g){void 0===g&&(g=1E3);switch(a.toLowerCase()){case "distinct":a:{a=g;g=[];for(var d={},e=[],c=0;c<b.length;c++){if(void 0!==b[c]&&null!==b[c]&&b[c]!==l.voidOperation){var k=b[c];if(l.isNumber(k)||l.isString(k))void 0===d[k]&&(g.push(k),d[k]=1);else{for(var m=
!1,q=0;q<e.length;q++)!0===l.equalityTest(e[q],k)&&(m=!0);!1===m&&(e.push(k),g.push(k))}}if(g.length>=a&&-1!==a){b=g;break a}}b=g}return b;case "avg":case "mean":return f(l.toNumberArray(b));case "min":return Math.min.apply(Math,l.toNumberArray(b));case "sum":b=l.toNumberArray(b);for(g=a=0;g<b.length;g++)a+=b[g];return a;case "max":return Math.max.apply(Math,l.toNumberArray(b));case "stdev":case "stddev":return Math.sqrt(h(l.toNumberArray(b)));case "var":case "variance":return h(l.toNumberArray(b));
case "count":return b.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Feature","../languageUtils"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,d){a.trim=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,1,1);return f.toString(c[0]).trim()})};a.upper=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,1,1);return f.toString(c[0]).toUpperCase()})};a.proper=function(a,g){return d(a,g,function(a,
b,c){f.pcCheck(c,1,2);a=1;2===c.length&&"firstword"===f.toString(c[1]).toLowerCase()&&(a=2);b=/\s/;c=f.toString(c[0]);for(var e="",g=!0,d=0;d<c.length;d++){var h=c[d];b.test(h)?1===a&&(g=!0):h.toUpperCase()!==h.toLowerCase()&&(g?(h=h.toUpperCase(),g=!1):h=h.toLowerCase());e+=h}return e})};a.lower=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,1,1);return f.toString(c[0]).toLowerCase()})};a.guid=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,0,1);if(0<c.length)switch(f.toString(c[0]).toLowerCase()){case "digits":return f.generateUUID().replace("-",
"").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return f.generateUUID();case "digits-hyphen-parentheses":return"("+f.generateUUID()+")"}return"{"+f.generateUUID()+"}"})};a.console=function(a,g){return d(a,g,function(b,e,c){0!==c.length&&(1===c.length?a.console(f.toString(c[0])):a.console(f.toString(c)));return f.voidOperation})};a.mid=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,2,3);a=f.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===c.length)return f.toString(c[0]).substr(a);
b=f.toNumber(c[2]);if(isNaN(b))return"";0>b&&(b=0);return f.toString(c[0]).substr(a,b)})};a.find=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,2,3);a=0;if(2<c.length){a=f.toNumber(f.defaultUndefined(c[2],0));if(isNaN(a))return-1;0>a&&(a=0)}return f.toString(c[1]).indexOf(f.toString(c[0]),a)})};a.left=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,2,2);a=f.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return f.toString(c[0]).substr(0,a)})};a.right=function(a,g){return d(a,g,function(a,
b,c){f.pcCheck(c,2,2);a=f.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return f.toString(c[0]).substr(-1*a,a)})};a.split=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,2,4);a=f.toNumber(f.defaultUndefined(c[2],-1));b=f.toBoolean(f.defaultUndefined(c[3],!1));-1===a||null===a||!0===b?c=f.toString(c[0]).split(f.toString(c[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),c=f.toString(c[0]).split(f.toString(c[1]),a));if(!1===b)return c;b=[];for(var e=0;e<c.length&&!(-1!==a&&b.length>=a);e++)""!==c[e]&&void 0!==
c[e]&&b.push(c[e]);return b})};a.text=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,1,2);return f.toStringExplicit(c[0],c[1])})};a.concatenate=function(a,g){return d(a,g,function(a,b,c){a=[];if(1>c.length)return"";if(f.isArray(c[0])){b=f.defaultUndefined(c[2],"");for(var e=0;e<c[0].length;e++)a[e]=f.toStringExplicit(c[0][e],b);return 1<c.length?a.join(c[1]):a.join("")}if(f.isImmutableArray(c[0])){b=f.defaultUndefined(c[2],"");for(e=0;e<c[0].length();e++)a[e]=f.toStringExplicit(c[0].get(e),
b);return 1<c.length?a.join(c[1]):a.join("")}for(e=0;e<c.length;e++)a[e]=f.toStringExplicit(c[e]);return a.join("")})};a.reverse=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,1,1);if(f.isArray(c[0]))return a=c[0].slice(0),a.reverse(),a;if(f.isImmutableArray(c[0]))return a=c[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};a.replace=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,3,4);a=f.toString(c[0]);b=f.toString(c[1]);var e=f.toString(c[2]);return(4===c.length?
f.toBoolean(c[3]):1)?f.multiReplace(a,b,e):a.replace(b,e)})};a.domainname=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,2,4);if(c[0]instanceof l)return c[0].domainValueLookup(f.toString(c[1]),c[2],void 0===c[3]?void 0:f.toNumber(c[3]));throw Error("Invalid Parameter");})};a.domaincode=function(a,g){return d(a,g,function(a,b,c){f.pcCheck(c,2,4);if(c[0]instanceof l)return c[0].domainCodeLookup(f.toString(c[1]),c[2],void 0===c[3]?void 0:f.toNumber(c[3]));throw Error("Invalid Parameter");})}}})},
"esri/arcade/arcadeRuntime":function(){define("require exports ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,
D,B,w){function C(a,b){for(var c=[],e=0;e<b.arguments.length;e++)c.push(A(a,b.arguments[e]));return c}function E(a,b,c){try{return c(a,b,C(a,b))}catch(ta){throw ta;}}function A(a,b){try{switch(b.type){case "EmptyStatement":return g.voidOperation;case "VariableDeclarator":var c=null===b.init?null:A(a,b.init);c===g.voidOperation&&(c=null);var e=b.id.name.toLowerCase();null!==a.localScope?a.localScope[e]={value:c,valueset:!0,node:b.init}:a.globalScope[e]={value:c,valueset:!0,node:b.init};return g.voidOperation;
case "VariableDeclaration":for(var d=0;d<b.declarations.length;d++)A(a,b.declarations[d]);return g.voidOperation;case "BlockStatement":var k;a:{for(var n=g.voidOperation,d=0;d<b.body.length;d++)if(n=A(a,b.body[d]),n instanceof g.ReturnResult||n===g.breakResult||n===g.continueResult){k=n;break a}k=n}return k;case "FunctionDeclaration":var m=b.id.name.toLowerCase();a.globalScope[m]={valueset:!0,node:null,value:new h(b,a)};return g.voidOperation;case "ReturnStatement":var q;if(null===b.argument)q=new g.ReturnResult(g.voidOperation);
else{var t=A(a,b.argument);q=new g.ReturnResult(t)}return q;case "IfStatement":var u;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(p.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var y=A(a,b.test);if(!0===y)u=A(a,b.consequent);else if(!1===y)u=null!==b.alternate?A(a,b.alternate):g.voidOperation;else throw Error(p.nodeErrorMessage(b,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return u;case "ExpressionStatement":var x;if("AssignmentExpression"===
b.expression.type||"UpdateExpression"===b.expression.type)x=A(a,b.expression);else{var z=A(a,b.expression);x=z===g.voidOperation?g.voidOperation:new g.ImplicitResult(z)}return x;case "AssignmentExpression":var D;var w=A(a,b.right),d=null,G="";if("MemberExpression"===b.left.type){d=A(a,b.left.object);G=!0===b.left.computed?A(a,b.left.property):b.left.property.name;if(g.isArray(d))if(g.isNumber(G)){0>G&&(G=d.length+G);if(0>G||G>d.length)throw Error("Assignment outside of array bounds");if(G===d.length&&
"\x3d"!==b.operator)throw Error("Invalid Parameter");d[G]=F(w,b.operator,d[G],b)}else throw Error("Invalid Parameter");else if(d instanceof l){if(!1===g.isString(G))throw Error("Dictionary accessor must be a string");if(!0===d.hasField(G))d.setField(G,F(w,b.operator,d.field(G),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");d.setField(G,F(w,b.operator,null,b))}}else if(d instanceof f){if(!1===g.isString(G))throw Error("Feature accessor must be a string");if(!0===d.hasField(G))d.setField(G,
F(w,b.operator,d.field(G),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");d.setField(G,F(w,b.operator,null,b))}}else{if(g.isImmutableArray(d))throw Error("Array is Immutable");throw Error("Invalid Parameter");}D=g.voidOperation}else if(d=b.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[d])a.localScope[d]={value:F(w,b.operator,a.localScope[d].value,b),valueset:!0,node:b.right},D=g.voidOperation;else if(void 0!==a.globalScope[d])a.globalScope[d]={value:F(w,b.operator,
a.globalScope[d].value,b),valueset:!0,node:b.right},D=g.voidOperation;else throw Error("Variable not recognised");return D;case "UpdateExpression":var B;var C,d=null,G="";if("MemberExpression"===b.argument.type){d=A(a,b.argument.object);G=!0===b.argument.computed?A(a,b.argument.property):b.argument.property.name;if(g.isArray(d))if(g.isNumber(G)){0>G&&(G=d.length+G);if(0>G||G>=d.length)throw Error("Assignment outside of array bounds");C=g.toNumber(d[G]);d[G]="++"===b.operator?C+1:C-1}else throw Error("Invalid Parameter");
else if(d instanceof l){if(!1===g.isString(G))throw Error("Dictionary accessor must be a string");if(!0===d.hasField(G))C=g.toNumber(d.field(G)),d.setField(G,"++"===b.operator?C+1:C-1);else throw Error("Invalid Parameter");}else if(d instanceof f){if(!1===g.isString(G))throw Error("Feature accessor must be a string");if(!0===d.hasField(G))C=g.toNumber(d.field(G)),d.setField(G,"++"===b.operator?C+1:C-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(d))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}B=!1===b.prefix?C:"++"===b.operator?C+1:C-1}else if(d=b.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[d])C=g.toNumber(a.localScope[d].value),a.localScope[d]={value:"++"===b.operator?C+1:C-1,valueset:!0,node:b},B=!1===b.prefix?C:"++"===b.operator?C+1:C-1;else if(void 0!==a.globalScope[d])C=g.toNumber(a.globalScope[d].value),a.globalScope[d]={value:"++"===b.operator?C+1:C-1,valueset:!0,node:b},B=!1===b.prefix?C:"++"===b.operator?C+1:C-1;else throw Error("Variable not recognised");
return B;case "BreakStatement":return g.breakResult;case "ContinueStatement":return g.continueResult;case "ForStatement":null!==b.init&&A(a,b.init);G={testResult:!0,lastAction:g.voidOperation};do b:{D=a;w=b;B=G;if(null!==w.test){B.testResult=A(D,w.test);if(!1===B.testResult)break b;if(!0!==B.testResult)throw Error(p.nodeErrorMessage(w,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}B.lastAction=A(D,w.body);B.lastAction===g.breakResult?B.testResult=!1:B.lastAction instanceof g.ReturnResult?B.testResult=
!1:null!==w.update&&A(D,w.update)}while(!0===G.testResult);d=G.lastAction instanceof g.ReturnResult?G.lastAction:g.voidOperation;return d;case "ForInStatement":return H(a,b);case "Identifier":return X(a,b);case "MemberExpression":return N(a,b);case "Literal":return b.value;case "ThisExpression":throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return T(a,b);case "UnaryExpression":return O(a,b);case "BinaryExpression":return S(a,b);case "LogicalExpression":return J(a,
b);case "ConditionalExpression":throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(d=[],G=0;G<b.elements.length;G++){var E=A(a,b.elements[G]);if(g.isFunctionParameter(E))throw Error(p.nodeErrorMessage(b,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));E===g.voidOperation?d.push(null):d.push(E)}}catch(Ka){throw Ka;}return d;case "ObjectExpression":d={};for(G=0;G<b.properties.length;G++){var U=A(a,b.properties[G]);if(g.isFunctionParameter(U.value))throw Error("Illegal Argument");
if(!1===g.isString(U.key))throw Error("Illegal Argument");d[U.key.toString()]=U.value===g.voidOperation?null:U.value}var Z=new l(d);Z.immutable=!1;return Z;case "Property":return{key:"Identifier"===b.key.type?b.key.name:A(a,b.key),value:A(a,b.value)};case "Array":throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));default:throw Error(p.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Ka){throw Ka;}}function H(a,b){var c=A(a,b.right);"VariableDeclaration"===b.left.type&&A(a,b.left);var e=
null,d="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name;null!==a.localScope&&void 0!==a.localScope[d]&&(e=a.localScope[d]);null===e&&void 0!==a.globalScope[d]&&(e=a.globalScope[d]);if(null===e)throw Error(p.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(g.isArray(c)||g.isString(c)){for(var c=c.length,h=0;h<c&&(e.value=h,d=A(a,b.body),d!==g.breakResult);h++)if(d instanceof g.ReturnResult)return d;return g.voidOperation}if(g.isImmutableArray(c)){for(h=0;h<c.length()&&
(e.value=h,d=A(a,b.body),d!==g.breakResult);h++)if(d instanceof g.ReturnResult)return d;return g.voidOperation}if(c instanceof l||c instanceof f)for(c=c.keys(),h=0;h<c.length&&(e.value=c[h],d=A(a,b.body),d!==g.breakResult);h++){if(d instanceof g.ReturnResult)return d}else return g.voidOperation}function F(a,b,c,e){switch(b){case "\x3d":return a===g.voidOperation?null:a;case "/\x3d":return g.toNumber(c)/g.toNumber(a);case "*\x3d":return g.toNumber(c)*g.toNumber(a);case "-\x3d":return g.toNumber(c)-
g.toNumber(a);case "+\x3d":return g.isString(c)||g.isString(a)?g.toString(c)+g.toString(a):g.toNumber(c)+g.toNumber(a);case "%\x3d":return g.toNumber(c)%g.toNumber(a);default:throw Error(p.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function G(a,c,e,g){c=c.toLowerCase();switch(c){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(e=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&
(e=!1),e&&(da++,c=a.spatialReference._arcadeCacheId=da)),a=new l({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=a.cache._arcadeCacheId,void 0===c&&(da++,c=da,a.cache._arcadeCacheId=c),a=new k(a.rings,
a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=a.cache._arcadeCacheId,void 0===c&&(da++,c=da,a.cache._arcadeCacheId=c),a=new k(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=a.cache._arcadeCacheId,void 0===
c&&(da++,c=da,a.cache._arcadeCacheId=c),a=new b(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(p.nodeErrorMessage(g,"RUNTIME","PROPERTYNOTFOUND"));}function N(a,b){try{var c=A(a,b.object);if(null===c)throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if(c instanceof l||c instanceof f)return c.field(b.property.name);if(c instanceof t)return G(c,b.property.name,a,b);throw Error(p.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));
}var e=A(a,b.property);if(c instanceof l||c instanceof f){if(g.isString(e))return c.field(e)}else if(c instanceof t){if(g.isString(e))return G(c,e,a,b)}else if(g.isArray(c)){if(g.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length+e);if(e>=c.length||0>e)throw Error(p.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[e]}}else if(g.isString(c)){if(g.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length+e);if(e>=c.length||0>e)throw Error(p.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));
return c[e]}}else if(g.isImmutableArray(c)&&g.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length()+e);if(e>=c.length()||0>e)throw Error(p.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c.get(e)}throw Error(p.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}catch(za){throw za;}}function O(a,b){try{var c=A(a,b.argument);if(g.isBoolean(c)){if("!"===b.operator)return!c;if("-"===b.operator)return-1*g.toNumber(c);if("+"===b.operator)return 1*g.toNumber(c);throw Error(p.nodeErrorMessage(b,"RUNTIME",
"NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*g.toNumber(c);if("+"===b.operator)return 1*g.toNumber(c);throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ta){throw ta;}}function S(a,b){try{var c=[A(a,b.left),A(a,b.right)],e=c[0],d=c[1];switch(b.operator){case "\x3d\x3d":return g.equalityTest(e,d);case "\x3d":return g.equalityTest(e,d);case "!\x3d":return!g.equalityTest(e,d);case "\x3c":return g.greaterThanLessThan(e,d,b.operator);case "\x3e":return g.greaterThanLessThan(e,
d,b.operator);case "\x3c\x3d":return g.greaterThanLessThan(e,d,b.operator);case "\x3e\x3d":return g.greaterThanLessThan(e,d,b.operator);case "+":return g.isString(e)||g.isString(d)?g.toString(e)+g.toString(d):g.toNumber(e)+g.toNumber(d);case "-":return g.toNumber(e)-g.toNumber(d);case "*":return g.toNumber(e)*g.toNumber(d);case "/":return g.toNumber(e)/g.toNumber(d);case "%":return g.toNumber(e)%g.toNumber(d);default:throw Error(p.nodeErrorMessage(b,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Ga){throw Ga;
}}function J(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(p.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(p.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=A(a,b.left);if(g.isBoolean(c))switch(b.operator){case "||":if(!0===c)return c;var e=A(a,b.right);if(g.isBoolean(e))return e;throw Error(p.nodeErrorMessage(b,
"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;e=A(a,b.right);if(g.isBoolean(e))return e;throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}else throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(za){throw za;}}function X(a,b){var c;try{var e=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[e])return c=a.localScope[e],!0!==c.valueset&&(c.value=A(a,c.node),c.valueset=!0),c.value;
if(void 0!==a.globalScope[e])return c=a.globalScope[e],!0!==c.valueset&&(c.value=A(a,c.node),c.valueset=!0),c.value;throw Error(p.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(za){throw za;}}function T(a,b){try{if("Identifier"!==b.callee.type)throw Error(p.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];if(c.value instanceof g.NativeFunction)return c.value.fn(a,
b);if(c.value instanceof h)return ca(a,b,c.value.definition);throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof h)return ca(a,b,c.value.definition);throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(p.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(ta){throw ta;}}function Z(a){return null==
a?"":g.isArray(a)||g.isImmutableArray(a)?"Array":g.isDate(a)?"Date":g.isString(a)?"String":g.isBoolean(a)?"Boolean":g.isNumber(a)?"Number":a instanceof l?"Dictionary":a instanceof f?"Feature":a instanceof z?"Point":a instanceof D?"Polygon":a instanceof B?"Polyline":a instanceof u?"Multipoint":a instanceof x?"Extent":g.isFunctionParameter(a)?"Function":g.isFeatureSet(a)?"FeatureSet":g.isFeatureSetCollection(a)?"FeatureSetCollection":a===g.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}
function U(a,b,c,e){try{var d=A(a,b.arguments[c]);if(g.equalityTest(d,e))return A(a,b.arguments[c+1]);var f=b.arguments.length-c;return 1===f?A(a,b.arguments[c]):2===f?null:3===f?A(a,b.arguments[c+2]):U(a,b,c+2,e)}catch(Ia){throw Ia;}}function M(a,b,c,e){try{if(!0===e)return A(a,b.arguments[c+1]);if(3===b.arguments.length-c)return A(a,b.arguments[c+2]);var d=A(a,b.arguments[c+2]);if(!1===g.isBoolean(d))throw Error("WHEN needs boolean test conditions");return M(a,b,c+2,d)}catch(Ga){throw Ga;}}function fa(a,
b){var c=a.length,e=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var g=fa(a.slice(0,e),b);a=fa(a.slice(e,c),b);for(c=[];0<g.length||0<a.length;)0<g.length&&0<a.length?(e=b(g[0],a[0]),isNaN(e)&&(e=0),0>=e?(c.push(g[0]),g=g.slice(1)):(c.push(a[0]),a=a.slice(1))):0<g.length?(c.push(g[0]),g=g.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function K(a,b,c){try{var e=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var d=0;d<c.length;d++)b.localScope[a.params[d].name.toLowerCase()]=
{value:c[d],valueset:!0,node:null};var f=A(b,e);if(f instanceof g.ReturnResult)return f.value;if(f===g.breakResult)throw Error("Cannot Break from a Function");if(f===g.continueResult)throw Error("Cannot Continue from a Function");return f instanceof g.ImplicitResult?f.value:f}catch(Ia){throw Ia;}}function ca(a,b,c){return E(a,b,function(b,e,g){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+
1,console:a.console,lrucache:a.lrucache,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return K(c,b,g)})}function ba(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,console:a.context.console,lrucache:a.context.lrucache,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");
return K(a.definition,b,arguments)}}function ma(a){console.log(a)}Object.defineProperty(a,"__esModule",{value:!0});var da=0,ga={};e.registerFunctions(ga,E);y.registerFunctions(ga,E);m.registerFunctions(ga,E);c.registerFunctions(ga,E);q.registerFunctions(ga,E);n.registerFunctions(ga,E);ga["typeof"]=function(a,b){return E(a,b,function(a,b,c){g.pcCheck(c,1,1);a=Z(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};ga.iif=function(a,b){try{g.pcCheck(null===b.arguments?[]:b.arguments,
3,3);var c=A(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("IF Function must have a boolean test condition");return!0===c?A(a,b.arguments[1]):A(a,b.arguments[2])}catch(ta){throw ta;}};ga.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return A(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=A(a,b.arguments[0]);return U(a,b,1,c)}catch(ta){throw ta;}};ga.when=function(a,b){try{if(3>
b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var c=A(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("WHEN needs boolean test conditions");return M(a,b,0,c)}catch(ta){throw ta;}};ga.top=function(a,b){return E(a,b,function(a,b,c){g.pcCheck(c,2,2);if(g.isArray(c[0]))return g.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));if(g.isImmutableArray(c[0]))return g.toNumber(c[1])>=c[0].length()?
c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};ga.first=function(a,b){return E(a,b,function(a,b,c){g.pcCheck(c,1,1);return g.isArray(c[0])?0===c[0].length?null:c[0][0]:g.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};ga.sort=function(a,b){return E(a,b,function(a,b,c){g.pcCheck(c,1,2);a=c[0];g.isImmutableArray(a)&&(a=a.toArray());if(!1===g.isArray(a))throw Error("Illegal Argument");if(1<c.length){if(!1===g.isFunctionParameter(c[1]))throw Error("Illegal Argument");
var e=ba(c[1]);a=fa(a,function(a,b){return e(a,b)})}else{if(0===a.length)return[];c={};for(b=0;b<a.length;b++){var d=Z(a[b]);""!==d&&(c[d]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);b=0;var d="",f;for(f in c)b++,d=f;a=1<b||"String"===d?fa(a,function(a,b){if(null===a||void 0===a||a===g.voidOperation)return null===b||void 0===b||b===g.voidOperation?0:1;if(null===b||void 0===
b||b===g.voidOperation)return-1;a=g.toString(a);b=g.toString(b);return a<b?-1:a===b?0:1}):"Number"===d?fa(a,function(a,b){return a-b}):"Boolean"===d?fa(a,function(a,b){return a===b?0:b?-1:1}):"Date"===d?fa(a,function(a,b){return b-a}):a.slice(0)}return a})};for(var ra in ga)ga[ra]={value:new g.NativeFunction(ga[ra]),valueset:!0,node:null};var ka=function(){};ka.prototype=ga;ka.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ka.prototype.pi={value:Math.PI,valueset:!0,node:null};
a.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:C,standardFunction:E};a.extend=function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:E,evaluateIdentifier:X,arcadeCustomFunctionHandler:ba},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var e in b.functions)ga[e]={value:new g.NativeFunction(b.functions[e]),valueset:!0,node:null},ka.prototype[e]=ga[e];for(c=0;c<b.signatures.length;c++)p.addFunctionDeclaration(b.signatures[c],"async")};
a.executeScript=function(a,b,c){c||(c=new w({wkid:102100}));var e=b.vars,d=b.customfunctions,k=new ka;e||(e={});d||(d={});var n=new l({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});n.immutable=!1;k.textformatting={value:n,valueset:!0,node:null};for(var m in d)k[m]={value:new g.NativeFunction(d[m]),native:!0,valueset:!0,node:null};for(m in e)k[m]=e[m]&&"esri.Graphic"===e[m].declaredClass?{value:f.createFromGraphic(e[m]),valueset:!0,node:null}:{value:e[m],
valueset:!0,node:null};a=A({spatialReference:c,globalScope:k,localScope:null,console:b.console?b.console:ma,lrucache:b.lrucache,depthCounter:1,applicationCache:void 0===b.applicationCache?null:b.applicationCache},a.body[0].body);a instanceof g.ReturnResult&&(a=a.value);a instanceof g.ImplicitResult&&(a=a.value);a===g.voidOperation&&(a=null);if(a===g.breakResult)throw Error("Cannot return BREAK");if(a===g.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof h)throw Error("Cannot return FUNCTION");
if(a instanceof g.NativeFunction)throw Error("Cannot return FUNCTION");return a};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return p.findFieldLiterals(a,b)};a.validateScript=function(a,b){return p.validateScript(a,b,"simple")};a.referencesMember=function(a,b){return p.referencesMember(a,b)};a.referencesFunction=function(a,b){return p.referencesFunction(a,b)};a.findFunctionCalls=function(a){return p.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports",
"./treeAnalysis","./lib/esprima"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});a.parseScript=function(a,d){void 0===d&&(d=[]);a=f.parse("function _() { "+a+"\n}");if(null===a.body||void 0===a.body)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if("BlockStatement"!==a.body[0].body.type)throw Error("Invalid formula content.");var b=l.validateLanguage(a);if(""!==b)throw Error(b);
l.findScriptDependencies(a,d);return a};a.scriptCheck=function(a,d,b,g,p){var e=[];try{var c=f.parse("function _() { "+a+"\n}",{tolerant:!0,loc:!0}),h=c.errors;if(0<h.length)for(var k=0;k<h.length;k++)e.push({line:h[k].lineNumber,character:h[k].column,reason:h[k].description});var q=l.checkScript(c,d,b,g,p);for(d=0;d<q.length;d++)e.push(q[d])}catch(y){try{"Unexpected token }"===y.description?(y.index=("function _() { "+a+"\n}").length-1,e.push({line:y.lineNumber,character:y.column,reason:"Unexpected end of script"})):
e.push({line:y.lineNumber,character:y.column,reason:y.description})}catch(x){}}return e};a.extractFieldLiterals=function(a,d){void 0===d&&(d=!1);return l.findFieldLiterals(a,d)};a.validateScript=function(a,d,b){return l.validateScript(a,d,b)};a.referencesMember=function(a,d){return l.referencesMember(a,d)};a.referencesFunction=function(a,d){return l.referencesFunction(a,d)}})},"esri/arcade/lib/esprima":function(){(function(d,a){"function"===typeof define&&define.amd?define(["exports"],a):"undefined"!==
typeof exports?a(exports):a(d.esprima={})})(this,function(d){function a(a,b){if(!a)throw Error("ASSERT: "+b);}function l(a){return 48<=a&&57>=a}function f(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function h(a){return 0<="01234567".indexOf(a)}function k(a){return 10===a||13===a||8232===a||8233===a}function b(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&ib.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function g(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&
122>=a||48<=a&&57>=a||92===a||128<=a&&ib.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function p(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function e(b,c,e,g,d){a("number"===typeof e,"Comment must have valid position");ea.lastCommentStart>=e||(ea.lastCommentStart=e,b={type:b,value:c},
R.range&&(b.range=[e,g]),R.loc&&(b.loc=d),R.comments.push(b),R.attachComment&&(R.leadingComments.push(b),R.trailingComments.push(b)))}function c(a){var b,c,g;b=I-a;for(c={start:{line:aa,column:I-ia-a}};I<oa;)if(g=P.charCodeAt(I),++I,k(g)){R.comments&&(a=P.slice(b+a,I-1),c.end={line:aa,column:I-ia-1},e("Line",a,b,I-1,c));13===g&&10===P.charCodeAt(I)&&++I;++aa;ia=I;return}R.comments&&(a=P.slice(b+a,I),c.end={line:aa,column:I-ia},e("Line",a,b,I,c))}function n(){var a,b;for(b=0===I;I<oa;)if(a=P.charCodeAt(I),
32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++I;else if(k(a))++I,13===a&&10===P.charCodeAt(I)&&++I,++aa,ia=I,b=!0;else if(47===a)if(a=P.charCodeAt(I+1),47===a)++I,++I,c(2),b=!0;else if(42===a){++I;++I;a:{var g=a=void 0,d=void 0,d=void 0;R.comments&&(a=I-2,g={start:{line:aa,column:I-ia-2}});for(;I<oa;)if(d=P.charCodeAt(I),k(d))13===d&&10===P.charCodeAt(I+1)&&++I,++aa,++I,ia=I,I>=oa&&T();else{if(42===
d&&47===P.charCodeAt(I+1)){++I;++I;R.comments&&(d=P.slice(a+2,I-2),g.end={line:aa,column:I-ia},e("Block",d,a,I,g));break a}++I}T()}}else break;else if(b&&45===a)if(45===P.charCodeAt(I+1)&&62===P.charCodeAt(I+2))I+=3,c(3);else break;else if(60===a)if("!--"===P.slice(I+1,I+4))++I,++I,++I,++I,c(4);else break;else break}function m(a){var b,c,e=0;b="u"===a?4:2;for(a=0;a<b;++a)if(I<oa&&f(P[I]))c=P[I++],e=16*e+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(e)}function q(){var a,
c;a=P.charCodeAt(I++);c=String.fromCharCode(a);92===a&&(117!==P.charCodeAt(I)&&T(),++I,(a=m("u"))&&"\\"!==a&&b(a.charCodeAt(0))||T(),c=a);for(;I<oa;){a=P.charCodeAt(I);if(!g(a))break;++I;c+=String.fromCharCode(a);92===a&&(c=c.substr(0,c.length-1),117!==P.charCodeAt(I)&&T(),++I,(a=m("u"))&&"\\"!==a&&g(a.charCodeAt(0))||T(),c+=a)}return c}function y(){var a=I,b=P.charCodeAt(I),c,e=P[I];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++I,
R.tokenize&&(40===b?R.openParenToken=R.tokens.length:123===b&&(R.openCurlyToken=R.tokens.length)),{type:W.Punctuator,value:String.fromCharCode(b),lineNumber:aa,lineStart:ia,start:a,end:I};default:if(c=P.charCodeAt(I+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return I+=2,{type:W.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:aa,lineStart:ia,start:a,end:I};case 33:case 61:return I+=2,61===P.charCodeAt(I)&&++I,{type:W.Punctuator,
value:P.slice(a,I),lineNumber:aa,lineStart:ia,start:a,end:I}}}b=P.substr(I,4);if("\x3e\x3e\x3e\x3d"===b)return I+=4,{type:W.Punctuator,value:b,lineNumber:aa,lineStart:ia,start:a,end:I};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return I+=3,{type:W.Punctuator,value:b,lineNumber:aa,lineStart:ia,start:a,end:I};b=b.substr(0,2);if(e===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(e)||"\x3d\x3e"===b)return I+=2,{type:W.Punctuator,value:b,lineNumber:aa,lineStart:ia,start:a,end:I};
if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(e))return++I,{type:W.Punctuator,value:e,lineNumber:aa,lineStart:ia,start:a,end:I};T()}function x(){var c,e,g;g=P[I];a(l(g.charCodeAt(0))||"."===g,"Numeric literal must start with a decimal digit or a decimal point");e=I;c="";if("."!==g){c=P[I++];g=P[I];if("0"===c){if("x"===g||"X"===g){++I;for(c="";I<oa&&f(P[I]);)c+=P[I++];0===c.length&&T();b(P.charCodeAt(I))&&T();return{type:W.NumericLiteral,value:parseInt("0x"+c,16),lineNumber:aa,lineStart:ia,start:e,end:I}}if("b"===
g||"B"===g){++I;for(g="";I<oa;){c=P[I];if("0"!==c&&"1"!==c)break;g+=P[I++]}0===g.length&&T();I<oa&&(c=P.charCodeAt(I),(b(c)||l(c))&&T());return{type:W.NumericLiteral,value:parseInt(g,2),lineNumber:aa,lineStart:ia,start:e,end:I}}if("o"===g||"O"===g){h(g)?(g=!0,c="0"+P[I++]):(g=!1,++I,c="");for(;I<oa&&h(P[I]);)c+=P[I++];g||0!==c.length||T();(b(P.charCodeAt(I))||l(P.charCodeAt(I)))&&T();return{type:W.NumericLiteral,value:parseInt(c,8),octal:g,lineNumber:aa,lineStart:ia,start:e,end:I}}}for(;l(P.charCodeAt(I));)c+=
P[I++];g=P[I]}if("."===g){for(c+=P[I++];l(P.charCodeAt(I));)c+=P[I++];g=P[I]}if("e"===g||"E"===g){c+=P[I++];g=P[I];if("+"===g||"-"===g)c+=P[I++];if(l(P.charCodeAt(I)))for(;l(P.charCodeAt(I));)c+=P[I++];else T()}b(P.charCodeAt(I))&&T();return{type:W.NumericLiteral,value:parseFloat(c),lineNumber:aa,lineStart:ia,start:e,end:I}}function t(){Y=null;n();S("Regular Expression language structures not supported")}function u(){n();t()}function z(){var a;a=R.tokens[R.tokens.length-1];if(!a)return u();if("Punctuator"===
a.type){if("]"===a.value)return y();if(")"===a.value)return a=R.tokens[R.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?y():u();if("}"===a.value){if(R.tokens[R.openCurlyToken-3]&&"Keyword"===R.tokens[R.openCurlyToken-3].type){if(a=R.tokens[R.openCurlyToken-4],!a)return y()}else if(R.tokens[R.openCurlyToken-4]&&"Keyword"===R.tokens[R.openCurlyToken-4].type){if(a=R.tokens[R.openCurlyToken-
5],!a)return u()}else return y();if(0<=ob.indexOf(a.value))return y()}return u()}return"Keyword"===a.type&&"this"!==a.value?u():y()}function D(){var c;n();if(I>=oa)return{type:W.EOF,lineNumber:aa,lineStart:ia,start:I,end:I};c=P.charCodeAt(I);if(b(c)){var e;c=I;if(92===P.charCodeAt(I))e=q();else a:{var d;for(e=I++;I<oa;){d=P.charCodeAt(I);if(92===d){I=e;e=q();break a}if(g(d))++I;else break}e=P.slice(e,I)}return{type:1===e.length?W.Identifier:p(e)?W.Keyword:"null"===e.toLowerCase()?W.NullLiteral:"true"===
e.toLowerCase()||"false"===e.toLowerCase()?W.BooleanLiteral:W.Identifier,value:e,lineNumber:aa,lineStart:ia,start:c,end:I}}if(40===c||41===c||59===c)return y();if(39===c||34===c){var t="",u,D,w;d=!1;var G,B;G=aa;B=ia;c=P[I];a("'"===c||'"'===c,"String literal must starts with a quote");e=I;for(++I;I<oa;)if(u=P[I++],u===c){c="";break}else if("\\"===u)if((u=P[I++])&&k(u.charCodeAt(0)))++aa,"\r"===u&&"\n"===P[I]&&++I,ia=I;else switch(u){case "u":case "x":if("{"===P[I]){++I;D=u=void 0;u=P[I];D=0;for("}"===
u&&T();I<oa;){u=P[I++];if(!f(u))break;D=16*D+"0123456789abcdef".indexOf(u.toLowerCase())}(1114111<D||"}"!==u)&&T();u=65535>=D?String.fromCharCode(D):String.fromCharCode((D-65536>>10)+55296,(D-65536&1023)+56320);t+=u}else w=I,(D=m(u))?t+=D:(I=w,t+=u);break;case "n":t+="\n";break;case "r":t+="\r";break;case "t":t+="\t";break;case "b":t+="\b";break;case "f":t+="\f";break;case "v":t+="\x0B";break;default:h(u)?(D="01234567".indexOf(u),0!==D&&(d=!0),I<oa&&h(P[I])&&(d=!0,D=8*D+"01234567".indexOf(P[I++]),
0<="0123".indexOf(u)&&I<oa&&h(P[I])&&(D=8*D+"01234567".indexOf(P[I++]))),t+=String.fromCharCode(D)):t+=u}else if(k(u.charCodeAt(0)))break;else t+=u;""!==c&&T();return{type:W.StringLiteral,value:t,octal:d,startLineNumber:G,startLineStart:B,lineNumber:aa,lineStart:ia,start:e,end:I}}return 46===c?l(P.charCodeAt(I+1))?x():y():l(c)?x():R.tokenize&&47===c?z():y()}function B(){var a,b,c;n();a={start:{line:aa,column:I-ia}};b=D();a.end={line:aa,column:I-ia};b.type!==W.EOF&&(c=P.slice(b.start,b.end),a={type:Na[b.type],
value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),R.tokens.push(a));return b}function w(){var a;a=Y;I=a.end;aa=a.lineNumber;ia=a.lineStart;Y="undefined"!==typeof R.tokens?B():D();I=a.end;aa=a.lineNumber;ia=a.lineStart;return a}function C(){var a,b,c;a=I;b=aa;c=ia;Y="undefined"!==typeof R.tokens?B():D();I=a;aa=b;ia=c}function E(){this.line=aa;this.column=I-ia}function A(){this.start=new E;this.end=null}function H(a){this.start=a.type===W.StringLiteral?
{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function F(){I=Y.start;Y.type===W.StringLiteral?(aa=Y.startLineNumber,ia=Y.startLineStart):(aa=Y.lineNumber,ia=Y.lineStart);R.range&&(this.range=[I,0]);R.loc&&(this.loc=new A)}function G(a){R.range&&(this.range=[a.start,0]);R.loc&&(this.loc=new H(a))}function N(){var a,b,c,e;a=I;b=aa;c=ia;n();e=aa!==b;I=a;aa=b;ia=c;return e}function O(a,b,c){var e=Error("Line "+a+": "+c);e.index=b;
e.lineNumber=a;e.column=b-ia+1;e.description=c;return e}function S(b){var c,e;c=Array.prototype.slice.call(arguments,1);e=b.replace(/%(\d)/g,function(b,e){a(e<c.length,"Message reference must be in range");return c[e]});throw O(aa,I,e);}function J(b){var c,e;c=Array.prototype.slice.call(arguments,1);e=b.replace(/%(\d)/g,function(b,e){a(e<c.length,"Message reference must be in range");return c[e]});e=O(aa,I,e);if(R.errors)R.errors.push(e);else throw e;}function X(a,b){var c=la.UnexpectedToken;a&&(c=
b?b:a.type===W.EOF?la.UnexpectedEOS:a.type===W.Identifier?la.UnexpectedIdentifier:a.type===W.NumericLiteral?la.UnexpectedNumber:a.type===W.StringLiteral?la.UnexpectedString:la.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?O(a.lineNumber,a.start,c):O(aa,I,c)}function T(a,b){throw X(a,b);}function Z(a,b){a=X(a,b);if(R.errors)R.errors.push(a);else throw a;}function U(a){var b=w();b.type===W.Punctuator&&b.value===a||T(b)}function M(){var a;R.errors?(a=
Y,a.type===W.Punctuator&&","===a.value?w():a.type===W.Punctuator&&";"===a.value?(w(),Z(a)):Z(a,la.UnexpectedToken)):U(",")}function fa(a){var b=w();b.type===W.Keyword&&b.value.toLowerCase()===a.toLowerCase()||T(b)}function K(a){return Y.type===W.Punctuator&&Y.value===a}function ca(a){return Y.type===W.Keyword&&Y.value.toLowerCase()===a.toLowerCase()}function ba(){var a;59===P.charCodeAt(I)||K(";")?w():(a=aa,n(),aa===a&&(Y.type===W.EOF||K("}")||T(Y)))}function ma(a){return a.type===ha.Identifier||
a.type===ha.MemberExpression}function da(a,b){var c,e=new F;b=pa;c=Va();pa=b;return e.finishFunctionExpression(null,a,[],c)}function ga(){var a,b;a=pa;pa=!0;b=Wa();b=da(b.params);pa=a;return b}function ra(){var a,b=new F;a=w();return a.type===W.StringLiteral||a.type===W.NumericLiteral?(pa&&a.octal&&Z(a,la.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function ka(){var a,b,c,e=new F;a=Y;if(a.type===W.Identifier)return b=ra(),"get"!==a.value||K(":")||K("(")?"set"!==a.value||K(":")||
K("(")?K(":")?(w(),a=r(),e.finishProperty("init",b,a,!1,!1)):K("(")?(a=ga(),e.finishProperty("init",b,a,!0,!1)):e.finishProperty("init",b,b,!1,!0):(b=ra(),U("("),a=Y,a.type!==W.Identifier?(U(")"),Z(a),a=da([])):(c=[$a()],U(")"),a=da(c,a)),e.finishProperty("set",b,a,!1,!1)):(b=ra(),U("("),U(")"),a=da([]),e.finishProperty("get",b,a,!1,!1));if(a.type===W.EOF||a.type===W.Punctuator)T(a);else{b=ra();if(K(":"))return w(),a=r(),e.finishProperty("init",b,a,!1,!1);if(K("("))return a=ga(),e.finishProperty("init",
b,a,!0,!1);T(w())}}function Fa(a){var b=[],c,e,g={},d=String,f=new F;for(!0!==a&&U("{");!K("}");)a=ka(),c=a.key.type===ha.Identifier?a.key.name:d(a.key.value),e="init"===a.kind?Xa.Data:"get"===a.kind?Xa.Get:Xa.Set,c="$"+c,Object.prototype.hasOwnProperty.call(g,c)?(g[c]===Xa.Data?pa&&e===Xa.Data?J(la.StrictDuplicateProperty):e!==Xa.Data&&J(la.AccessorDataProperty):e===Xa.Data?J(la.AccessorDataProperty):g[c]&e&&J(la.AccessorGetSet),g[c]|=e):g[c]=e,b.push(a),K("}")||M();U("}");return f.finishObjectExpression(b)}
function Ea(){var a,b,c,e;if(K("("))return U("("),K(")")?(w(),b=ab.ArrowParameterPlaceHolder):(++ea.parenthesisCount,b=Aa(),U(")")),b;if(K("[")){b=[];var g=new F;for(U("[");!K("]");)K(",")?(w(),b.push(null)):(b.push(r()),K("]")||U(","));w();return g.finishArrayExpression(b)}if(K("{"))return Fa();a=Y.type;e=new F;if(a===W.Identifier)c=e.finishIdentifier(w().value);else if(a===W.StringLiteral||a===W.NumericLiteral)pa&&Y.octal&&Z(Y,la.StrictOctalLiteral),c=e.finishLiteral(w());else if(a===W.Keyword){if(ca("function")){e=
null;var d;c=[];var f=[],h,k=new F;fa("function");K("(")||(e=$a());d=Wa(b);c=d.params;f=d.defaults;a=d.stricted;b=d.firstRestricted;d.message&&(g=d.message);h=pa;d=Va();pa&&b&&T(b,g);pa&&a&&Z(a,g);pa=h;return k.finishFunctionExpression(e,c,f,d)}ca("this")?(w(),c=e.finishThisExpression()):T(w())}else a===W.BooleanLiteral?(b=w(),b.value="true"===b.value.toLowerCase(),c=e.finishLiteral(b)):a===W.NullLiteral?(b=w(),b.value=null,c=e.finishLiteral(b)):K("/")||K("/\x3d")?(c="undefined"!==typeof R.tokens?
e.finishLiteral(u()):e.finishLiteral(t()),C()):T(w());return c}function wa(){var a=[];U("(");if(!K(")"))for(;I<oa;){a.push(r());if(K(")"))break;M()}U(")");return a}function ta(){U(".");var a,b=new F;a=w();a.type===W.Identifier||a.type===W.Keyword||a.type===W.BooleanLiteral||a.type===W.NullLiteral||T(a);return b.finishIdentifier(a.value)}function za(){var a;U("[");a=Aa();U("]");return a}function Ga(){var b,c,e=new F;fa("new");var g;a(ea.allowIn,"callee of new expression always allow in keyword.");
g=Y;for(b=ca("new")?Ga():Ea();;)if(K("["))c=za(),b=(new G(g)).finishMemberExpression("[",b,c);else if(K("."))c=ta(),b=(new G(g)).finishMemberExpression(".",b,c);else break;c=K("(")?wa():[];return e.finishNewExpression(b,c)}function Ia(){var a,b,c=Y,e,g=ea.allowIn;b=Y;ea.allowIn=!0;for(a=ca("new")?Ga():Ea();;)if(K("."))e=ta(),a=(new G(b)).finishMemberExpression(".",a,e);else if(K("("))e=wa(),a=(new G(b)).finishCallExpression(a,e);else if(K("["))e=za(),a=(new G(b)).finishMemberExpression("[",a,e);else break;
ea.allowIn=g;Y.type!==W.Punctuator||!K("++")&&!K("--")||N()||(ma(a)||J(la.InvalidLHSInAssignment),b=w(),a=(new G(c)).finishPostfixExpression(b.value,a));return a}function Q(){var a,b,c;Y.type!==W.Punctuator&&Y.type!==W.Keyword?b=Ia():K("++")||K("--")?(c=Y,a=w(),b=Q(),ma(b)||J(la.InvalidLHSInAssignment),b=(new G(c)).finishUnaryExpression(a.value,b)):K("+")||K("-")||K("~")||K("!")?(c=Y,a=w(),b=Q(),b=(new G(c)).finishUnaryExpression(a.value,b)):ca("delete")||ca("void")||ca("typeof")?(c=Y,a=w(),b=Q(),
b=(new G(c)).finishUnaryExpression(a.value,b),pa&&"delete"===b.operator&&b.argument.type===ha.Identifier&&J(la.StrictDelete)):b=Ia();return b}function Ja(a,b){var c=0;if(a.type!==W.Punctuator&&a.type!==W.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;
case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function cb(){var a,b,c,e,g,d;a=Y;b=Q();if(b===ab.ArrowParameterPlaceHolder)return b;c=Y;e=Ja(c,ea.allowIn);if(0===e)return b;c.prec=e;w();a=[a,Y];d=Q();for(g=[b,c,d];0<(e=Ja(Y,ea.allowIn));){for(;2<g.length&&e<=g[g.length-2].prec;)d=g.pop(),c=g.pop().value,b=g.pop(),a.pop(),b=(new G(a[a.length-1])).finishBinaryExpression(c,b,d),g.push(b);c=w();
c.prec=e;g.push(c);a.push(Y);b=Q();g.push(b)}e=g.length-1;b=g[e];for(a.pop();1<e;)b=(new G(a.pop())).finishBinaryExpression(g[e-1].value,g[e-2],b),e-=2;return b}function ya(a){var b,c,e,g,d,f,h;g=[];d=[];f=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(e=a[b],e.type===ha.Identifier)g.push(e),d.push(null),db(h,e,e.name);else if(e.type===ha.AssignmentExpression)g.push(e.left),d.push(e.right),++f,db(h,e.left,e.left.name);else return null;h.message===la.StrictParamDupe&&(a=pa?h.stricted:h.firstRestricted,
T(a,h.message));0===f&&(d=[]);return{params:g,defaults:d,rest:null,stricted:h.stricted,firstRestricted:h.firstRestricted,message:h.message}}function r(){var a,b,c,e,g;a=ea.parenthesisCount;b=g=Y;var d,f;f=Y;c=cb();c!==ab.ArrowParameterPlaceHolder&&K("?")&&(w(),d=ea.allowIn,ea.allowIn=!0,b=r(),ea.allowIn=d,U(":"),d=r(),c=(new G(f)).finishConditionalExpression(c,b,d));if(c===ab.ArrowParameterPlaceHolder||K("\x3d\x3e"))if(ea.parenthesisCount===a||ea.parenthesisCount===a+1)if(c.type===ha.Identifier?e=
ya([c]):c.type===ha.AssignmentExpression?e=ya([c]):c.type===ha.SequenceExpression?e=ya(c.expressions):c===ab.ArrowParameterPlaceHolder&&(e=ya([])),e)return a=e,g=new G(g),U("\x3d\x3e"),e=pa,c=K("{")?Va():r(),pa&&a.firstRestricted&&T(a.firstRestricted,a.message),pa&&a.stricted&&Z(a.stricted,a.message),pa=e,g.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==ha.BlockStatement);Y.type!==W.Punctuator?a=!1:(a=Y.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===
a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(ma(c)||J(la.InvalidLHSInAssignment),b=w(),a=r(),c=(new G(g)).finishAssignmentExpression(b.value,c,a));return c}function Aa(){var a,b=Y;a=r();if(K(",")){for(a=[a];I<oa&&K(",");)w(),a.push(r());a=(new G(b)).finishSequenceExpression(a)}return a}function $a(){var a,b=new F;a=w();a.type!==W.Identifier&&T(a);return b.finishIdentifier(a.value)}function zb(a){var b=null,c,e=new F;c=$a();"const"===
a?(U("\x3d"),b=r()):K("\x3d")&&(w(),b=r());return e.finishVariableDeclarator(c,b)}function Oa(a){var b=[];do{b.push(zb(a));if(!K(","))break;w()}while(I<oa);return b}function Ua(a){var c=Y.type,e,g;c===W.EOF&&T(Y);if(c===W.Punctuator&&"{"===Y.value){if(a){U("{");var d=Y;a=I;e=aa;g=ia;w();c=K(":");Y=d;I=a;aa=e;ia=g;if((Y.type===W.Identifier||Y.type===W.StringLiteral)&&c)return Fa(!0);a=new F;for(e=[];I<oa&&!K("}");){g=Ra();if("undefined"===typeof g)break;e.push(g)}U("}");return a.finishBlockStatement(e)}return Fa()}a=
new F;if(c===W.Punctuator)switch(Y.value){case ";":return a=new F,U(";"),a.finishEmptyStatement();case "(":return e=Aa(),ba(),a.finishExpressionStatement(e)}else if(c===W.Keyword)switch(Y.value.toLowerCase()){case "break":return e=null,fa("break"),59===P.charCodeAt(I)?(w(),ea.inIteration||ea.inSwitch||S(la.IllegalBreak),a=a.finishBreakStatement(null)):N()?(ea.inIteration||ea.inSwitch||S(la.IllegalBreak),a=a.finishBreakStatement(null)):(Y.type===W.Identifier&&(e=$a(),g="$"+e.name,Object.prototype.hasOwnProperty.call(ea.labelSet,
g)||S(la.UnknownLabel,e.name)),ba(),null!==e||ea.inIteration||ea.inSwitch||S(la.IllegalBreak),a=a.finishBreakStatement(e)),a;case "continue":return e=null,fa("continue"),59===P.charCodeAt(I)?(w(),ea.inIteration||S(la.IllegalContinue),a=a.finishContinueStatement(null)):N()?(ea.inIteration||S(la.IllegalContinue),a=a.finishContinueStatement(null)):(Y.type===W.Identifier&&(e=$a(),g="$"+e.name,Object.prototype.hasOwnProperty.call(ea.labelSet,g)||S(la.UnknownLabel,e.name)),ba(),null!==e||ea.inIteration||
S(la.IllegalContinue),a=a.finishContinueStatement(e)),a;case "for":var f,h,k;h=ea.allowIn;f=c=d=null;fa("for");U("(");if(K(";"))w();else{if(ca("var")){ea.allowIn=!1;var n=new F;f=w();k=Oa();f=n.finishVariableDeclaration(k,f.value);ea.allowIn=h;1===f.declarations.length&&ca("in")&&(w(),e=f,g=Aa(),f=null)}else ea.allowIn=!1,f=Aa(),ea.allowIn=h,ca("in")&&(ma(f)||J(la.InvalidLHSInForIn),w(),e=f,g=Aa(),f=null);"undefined"===typeof e&&U(";")}"undefined"===typeof e&&(K(";")||(c=Aa()),U(";"),K(")")||(d=Aa()));
U(")");k=ea.inIteration;ea.inIteration=!0;h=Ua(!0);ea.inIteration=k;return"undefined"===typeof e?a.finishForStatement(f,c,d,h):a.finishForInStatement(e,g,h);case "function":return kb(a);case "if":return fa("if"),U("("),e=Aa(),U(")"),g=Ua(!0),ca("else")?(w(),c=Ua(!0)):c=null,a.finishIfStatement(e,g,c);case "return":return e=null,fa("return"),ea.inFunctionBody||J(la.IllegalReturn),32===P.charCodeAt(I)&&b(P.charCodeAt(I+1))?(e=Aa(),ba(),a=a.finishReturnStatement(e)):N()?a=a.finishReturnStatement(null):
(K(";")||K("}")||Y.type===W.EOF||(e=Aa()),ba(),a=a.finishReturnStatement(e)),a;case "var":return fa("var"),e=Oa(),ba(),a.finishVariableDeclaration(e,"var")}e=Aa();if(e.type===ha.Identifier&&K(":"))return w(),c="$"+e.name,Object.prototype.hasOwnProperty.call(ea.labelSet,c)&&S(la.Redeclaration,"Label",e.name),ea.labelSet[c]=!0,g=Ua(!1),delete ea.labelSet[c],a.finishLabeledStatement(e,g);ba();return a.finishExpressionStatement(e)}function Va(){var a,b=[],c,e,g,d,f,h=new F;for(U("{");I<oa&&Y.type===W.StringLiteral;){c=
Y;a=Ra();b.push(a);if(a.expression.type!==ha.Literal)break;a=P.slice(c.start+1,c.end-1);"use strict"===a?(pa=!0,e&&Z(e,la.StrictOctalLiteral)):!e&&c.octal&&(e=c)}c=ea.labelSet;e=ea.inIteration;g=ea.inSwitch;d=ea.inFunctionBody;f=ea.parenthesizedCount;ea.labelSet={};ea.inIteration=!1;ea.inSwitch=!1;ea.inFunctionBody=!0;for(ea.parenthesizedCount=0;I<oa&&!K("}");){a=Ra();if("undefined"===typeof a)break;b.push(a)}U("}");ea.labelSet=c;ea.inIteration=e;ea.inSwitch=g;ea.inFunctionBody=d;ea.parenthesizedCount=
f;return h.finishBlockStatement(b)}function db(a,b,c){c="$"+c;pa?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=la.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=la.StrictParamDupe);a.paramSet[c]=!0}function Wa(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};U("(");if(!K(")"))for(a.paramSet={};I<oa;){var b=a,c=void 0,e=void 0,g=void 0,c=Y,e=$a();db(b,c,c.value);K("\x3d")&&(w(),g=r(),
++b.defaultCount);b.params.push(e);b.defaults.push(g);if(K(")"))break;U(",")}U(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function kb(){var a,b=[],c=[],e,g,d,f,h,k=new F;fa("function");a=$a();e=Wa(d);b=e.params;c=e.defaults;g=e.stricted;d=e.firstRestricted;e.message&&(f=e.message);h=pa;e=Va();pa&&d&&T(d,f);pa&&g&&Z(g,f);pa=h;return k.finishFunctionDeclaration(a,b,c,e)}function Ra(){if(Y.type===
W.Keyword)return"function"===Y.value.toLowerCase()?kb():Ua(!1);if(Y.type!==W.EOF)return Ua(!1)}function Ka(){var a,b,c,e=[];for(a=0;a<R.tokens.length;++a)b=R.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),R.range&&(c.range=b.range),R.loc&&(c.loc=b.loc),e.push(c);R.tokens=e}var W,Na,ob,ha,ab,Xa,la,ib,P,pa,I,aa,ia,oa,Y,ea,R;W={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};
Na={};Na[W.BooleanLiteral]="Boolean";Na[W.EOF]="\x3cend\x3e";Na[W.Identifier]="Identifier";Na[W.Keyword]="Keyword";Na[W.NullLiteral]="Null";Na[W.NumericLiteral]="Numeric";Na[W.Punctuator]="Punctuator";Na[W.StringLiteral]="String";Na[W.RegularExpression]="RegularExpression";ob="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ha={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};ab={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Xa={Data:1,Get:2,Set:4};la={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};ib={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
G.prototype=F.prototype={processComment:function(){var a,b,c,e=R.bottomRightStack,g,d,f=e[e.length-1];if(!(this.type===ha.Program&&0<this.body.length)){if(0<R.trailingComments.length){c=[];for(g=R.trailingComments.length-1;0<=g;--g)d=R.trailingComments[g],d.range[0]>=this.range[1]&&(c.unshift(d),R.trailingComments.splice(g,1));R.trailingComments=[]}else f&&f.trailingComments&&f.trailingComments[0].range[0]>=this.range[1]&&(c=f.trailingComments,delete f.trailingComments);if(f)for(;f&&f.range[0]>=this.range[0];)a=
f,f=e.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<R.leadingComments.length)for(b=[],g=R.leadingComments.length-1;0<=g;--g)d=R.leadingComments[g],d.range[1]<=this.range[0]&&(b.unshift(d),R.leadingComments.splice(g,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);e.push(this)}},finish:function(){R.range&&(this.range[1]=I);R.loc&&(this.loc.end=
new E,R.source&&(this.loc.source=R.source));R.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=ha.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=ha.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?ha.LogicalExpression:ha.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=ha.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=ha.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=ha.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=ha.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
ha.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=ha.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=ha.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,e){this.type=ha.ForStatement;this.init=a;this.test=b;this.update=c;this.body=e;this.finish();return this},finishForInStatement:function(a,b,c){this.type=ha.ForInStatement;this.left=a;this.right=b;this.body=
c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,e){this.type=ha.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=e;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,e){this.type=ha.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=e;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=ha.Identifier;
this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=ha.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=ha.Literal;this.value=a.value;this.raw=P.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=ha.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
ha.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=ha.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=ha.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,e,g){this.type=ha.Property;this.key=b;this.value=c;this.kind=a;this.method=e;this.shorthand=g;this.finish();return this},finishReturnStatement:function(a){this.type=ha.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?ha.UpdateExpression:ha.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=ha.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=ha.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};d.version="2.0.0-dev";d.tokenize=
function(a,b){var c,e;c=String;"string"===typeof a||a instanceof String||(a=c(a));P=a;I=0;aa=0<P.length?1:0;ia=0;oa=P.length;Y=null;ea={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};R={};b=b||{};b.tokens=!0;R.tokens=[];R.tokenize=!0;R.openParenToken=-1;R.openCurlyToken=-1;R.range="boolean"===typeof b.range&&b.range;R.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(R.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(R.errors=
[]);try{C();if(Y.type===W.EOF)return R.tokens;for(w();Y.type!==W.EOF;)try{w()}catch(rb){if(R.errors){R.errors.push(rb);break}else throw rb;}Ka();e=R.tokens;"undefined"!==typeof R.comments&&(e.comments=R.comments);"undefined"!==typeof R.errors&&(e.errors=R.errors)}catch(rb){throw rb;}finally{R={}}return e};d.parse=function(a,b){var c,e;e=String;"string"===typeof a||a instanceof String||(a=e(a));P=a;I=0;aa=0<P.length?1:0;ia=0;oa=P.length;Y=null;ea={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};R={};"undefined"!==typeof b&&(R.range="boolean"===typeof b.range&&b.range,R.loc="boolean"===typeof b.loc&&b.loc,R.attachComment="boolean"===typeof b.attachComment&&b.attachComment,R.loc&&null!==b.source&&void 0!==b.source&&(R.source=e(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(R.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(R.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(R.errors=[]),R.attachComment&&(R.range=!0,R.comments=
[],R.bottomRightStack=[],R.trailingComments=[],R.leadingComments=[]));try{var g;n();C();g=new F;pa=!1;var d;a=[];for(var f,h,k;I<oa;){f=Y;if(f.type!==W.StringLiteral)break;d=Ra();a.push(d);if(d.expression.type!==ha.Literal)break;h=P.slice(f.start+1,f.end-1);"use strict"===h?(pa=!0,k&&Z(k,la.StrictOctalLiteral)):!k&&f.octal&&(k=f)}for(;I<oa;){d=Ra();if("undefined"===typeof d)break;a.push(d)}c=g.finishProgram(a);"undefined"!==typeof R.comments&&(c.comments=R.comments);"undefined"!==typeof R.tokens&&
(Ka(),c.tokens=R.tokens);"undefined"!==typeof R.errors&&(c.errors=R.errors)}catch(Db){throw Db;}finally{R={}}return c};d.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in ha)ha.hasOwnProperty(a)&&(b[a]=ha[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["require","exports","../../support/utils","./utils"],function(d,a,l,f){function h(a){return a&&"esri.renderers.visualVariables.SizeVariable"===
a.declaredClass}function k(a){return null!=a&&!isNaN(a)&&isFinite(a)}function b(a){return a.valueExpression?"expression":a.field&&"string"===typeof a.field?"field":"unknown"}function g(a,b,e){if(null!=a){if(h(a))return a.getSize(b,e);if(k(a))return a}return null}function p(a,b,e){return k(e)&&a>e?e:k(b)&&a<b?b:a}Object.defineProperty(a,"__esModule",{value:!0});var e=Math.PI;a.isSizeVariable=h;a.isValidNumber=k;a.getInputValueType=b;a.getTransformationType=function(a,e){e=e||b(a);var c=a.valueUnit||
"unknown";return"unknown"===e?"constant":a.stops?"stops":null!=a.minSize&&null!=a.maxSize&&null!=a.minDataValue&&null!=a.maxDataValue?"clamped-linear":"unknown"===c?null!=a.minSize&&null!=a.minDataValue?a.minSize&&a.minDataValue?"proportional":"additive":"identity":"scale-dependent"};a.getSizeFromNumberOrVariable=g;a.getSizeForValue=function(a,b,d,h,k){switch(b.transformationType){case "additive":return h=g(b.minSize,d,h),a+(h||b.minDataValue);case "constant":return a=(a=b.stops)&&a.length&&a[0].size,
null==a&&(a=b.minSize),g(a,d,h);case "clamped-linear":k=(a-b.minDataValue)/(b.maxDataValue-b.minDataValue);var c=g(b.minSize,d,h);d=g(b.maxSize,d,h);h=h&&h.shape;a<=b.minDataValue?b=c:a>=b.maxDataValue?b=d:"area"===b.scaleBy&&h?(h=(b="circle"===h)?e*Math.pow(c/2,2):c*c,h+=k*((b?e*Math.pow(d/2,2):d*d)-h),b=b?2*Math.sqrt(h/e):Math.sqrt(h)):b=c+k*(d-c);return b;case "proportional":return k=h&&h.shape,a/=b.minDataValue,c=g(b.minSize,d,h),b=g(b.maxSize,d,h),h=null,h="circle"===k?2*Math.sqrt(a*Math.pow(c/
2,2)):"square"===k||"diamond"===k||"image"===k?Math.sqrt(a*Math.pow(c,2)):a*c,p(h,c,b);case "stops":return k=f.lookupData(a,k),c=k[0],a=k[1],k=k[2],c===a?b=g(b.stops[c].size,d,h):(c=g(b.stops[c].size,d,h),b=g(b.stops[a].size,d,h),b=c+(b-c)*k),b;case "scale-dependent":return k=(h&&h.resolution?h.resolution:1)*l.meterIn[b.valueUnit],c=g(b.minSize,d,h),h=g(b.maxSize,d,h),b=b.valueRepresentation,d=null,d="area"===b?2*Math.sqrt(a/e)/k:"radius"===b||"distance"===b?2*a/k:a/k,p(d,c,h);case "identity":return a;
case "unknown":return null}}})},"esri/renderers/support/utils":function(){define("dojo/date/locale ../../Color ../../core/lang ../../core/numberUtils ../../core/unitUtils dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(d,a,l,f,h,k){function b(a,b,c){var e="";0===b?e=p.lt+" ":b===c&&(e=p.gt+" ");return e+a}var g={},p={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},e={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},c={millisecond:{dateOptions:{formatLength:"long"},
timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},n={formatLength:"short",fullYear:!0},m={formatLength:"short"};l.mixin(g,
{meterIn:{inches:h.convertUnit(1,"meters","inches"),feet:h.convertUnit(1,"meters","feet"),"us-feet":h.convertUnit(1,"meters","us-feet"),yards:h.convertUnit(1,"meters","yards"),miles:h.convertUnit(1,"meters","miles"),"nautical-miles":h.convertUnit(1,"meters","nautical-miles"),millimeters:h.convertUnit(1,"meters","millimeters"),centimeters:h.convertUnit(1,"meters","centimeters"),decimeters:h.convertUnit(1,"meters","decimeters"),meters:h.convertUnit(1,"meters","meters"),kilometers:h.convertUnit(1,"meters",
"kilometers"),"decimal-degrees":1/h.lengthToDegrees(1,"meters")},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(a,b){var c=[];null==a||a instanceof Date||(a=new Date(a));b=b||{};b=l.mixin({},b);var e=b.selector?b.selector.toLowerCase():null,g=!e||-1<e.indexOf("time"),e=!e||-1<e.indexOf("date");g&&(b.timeOptions=b.timeOptions||m,b.timeOptions&&(b.timeOptions=l.mixin({},b.timeOptions),b.timeOptions.selector=b.timeOptions.selector||"time",
c.push(b.timeOptions)));e&&(b.dateOptions=b.dateOptions||n,b.dateOptions&&(b.dateOptions=l.mixin({},b.dateOptions),b.dateOptions.selector=b.dateOptions.selector||"date",c.push(b.dateOptions)));c&&c.length?(c=c.map(function(b){return d.format(a,b)}),b=1==c.length?c[0]:k["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return c[b]})):b=d.format(a);return b},createColorStops:function(a){var c=a.values,e=a.colors,d=a.labelIndexes,h=a.isDate,k=a.dateFormatOptions;a=[];return a=
c.map(function(a,n){var m=null;if(!d||-1<d.indexOf(n)){var q;(q=h?g.formatDate(a,k):f.format(a))&&(m=b(q,n,c.length-1))}return{value:a,color:e[n],label:m}})},updateColorStops:function(a){var c=a.stops,e=a.changes,d=a.isDate,h=a.dateFormatOptions,k=[],n,m=c.map(function(a){return a.value});e.forEach(function(a){k.push(a.index);m[a.index]=a.value});n=f.round(m,{indexes:k});c.forEach(function(a,e){a.value=m[e];if(null!=a.label){var k,q=null;(k=d?g.formatDate(n[e],h):f.format(n[e]))&&(q=b(k,e,c.length-
1));a.label=q}})},createClassBreakLabel:function(a){var b=a.minValue,c=a.maxValue,e=a.isFirstBreak?"":p.gt+" ";a="percent-of-total"===a.normalizationType?p.pct:"";b=null==b?"":f.format(b);c=null==c?"":f.format(c);return e+b+a+" "+p.ld+" "+c+a},setLabelsForClassBreaks:function(a){var b=a.classBreakInfos,c=a.classificationMethod,e=a.normalizationType,d=[];b&&b.length&&("standard-deviation"===c?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):
a.round?(d.push(b[0].minValue),b.forEach(function(a){d.push(a.maxValue)}),d=f.round(d),b.forEach(function(a,b){a.label=g.createClassBreakLabel({minValue:0===b?d[0]:d[b],maxValue:d[b+1],isFirstBreak:0===b,normalizationType:e})})):b.forEach(function(a,b){a.label=g.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:e})}))},updateClassBreak:function(a){var b=a.classBreaks,c=a.normalizationType,e=a.change,d=e.index,e=e.value,f=-1,h=-1,k=b.length;"standard-deviation"===
a.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===d?f=d:d===k?h=d-1:(h=d-1,f=d),-1<f&&f<k&&(a=b[f],a.minValue=e,a.label=g.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===f,normalizationType:c})),-1<h&&h<k&&(a=b[h],a.maxValue=e,a.label=g.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===h,normalizationType:c})))},calculateDateFormatInterval:function(a){var b,
c,g=a.length,d,f,h,k,n,m,l=Infinity,q;a=a.map(function(a){return new Date(a)});for(b=0;b<g-1;b++){d=a[b];h=[];n=Infinity;m="";for(c=b+1;c<g;c++)f=a[c],f=d.getFullYear()!==f.getFullYear()&&"year"||d.getMonth()!==f.getMonth()&&"month"||d.getDate()!==f.getDate()&&"day"||d.getHours()!==f.getHours()&&"hour"||d.getMinutes()!==f.getMinutes()&&"minute"||d.getSeconds()!==f.getSeconds()&&"second"||"millisecond",k=e[f],k<n&&(n=k,m=f),h.push(f);n<l&&(l=n,q=m)}return q},createUniqueValueLabel:function(a){var b=
a.value,e=a.fieldInfo,d=a.domain;a=a.dateFormatInterval;var h=String(b);(d=d&&d.codedValues?d.getName(b):null)?h=d:"number"===typeof b&&(h=e&&"date"===e.type?g.formatDate(b,a&&c[a]):f.format(b));return h}});return g})},"esri/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(d,a){function l(a,b){return a-b}var f=/^-?(\d+)(\.(\d+))?$/i,h=new RegExp("\\"+a.decimal+"0+$","g"),k=/(\d)0*$/g,b={numDigits:function(a){var g=String(a),e=g.match(f);a={integer:0,fractional:0};
e&&e[1]?(a.integer=e[1].split("").length,a.fractional=e[3]?e[3].split("").length:0):-1<g.toLowerCase().indexOf("e")&&(e=g.split("e"),g=e[0],e=e[1],g&&e&&(g=Number(g),e=Number(e),(a=0<e)||(e=Math.abs(e)),g=b.numDigits(g),a?(g.integer+=e,g.fractional=e>g.fractional?0:g.fractional-e):(g.fractional+=e,g.integer=e>g.integer?1:g.integer-e),a=g));return a},percentChange:function(a,b,e,c){var g={previous:null,next:null},d;null!=e&&(d=a-e,g.previous=Math.floor(Math.abs(100*(b-e-d)/d)));null!=c&&(d=c-a,g.next=
Math.floor(Math.abs(100*(c-b-d)/d)));return g},round:function(a,d){a=a.slice(0);var e,c,g,f,h,k,p,t,u=d&&null!=d.tolerance?d.tolerance:2,z=d&&d.indexes,D=d&&null!=d.strictBounds?d.strictBounds:!1;if(z)z.sort(l);else for(z=[],h=0;h<a.length;h++)z.push(h);for(h=0;h<z.length;h++)if(t=z[h],d=a[t],e=0===t?null:a[t-1],c=t===a.length-1?null:a[t+1],g=b.numDigits(d),g=g.fractional){k=0;for(p=!1;k<=g&&!p;){f=d;p=k;var B=void 0,w=void 0,B=Number(f.toFixed(p));B<f?w=B+1/Math.pow(10,p):(w=B,B-=1/Math.pow(10,p));
B=Number(B.toFixed(p));w=Number(w.toFixed(p));f=[B,w];f=D&&0===h?f[1]:f[0];p=u;var B=b.percentChange(d,f,e,c),C=w=void 0,w=void 0,w=null==B.previous||B.previous<=p,C=null==B.next||B.next<=p;p=w=w&&C||B.previous+B.next<=2*p;k++}p&&(a[t]=f)}return a},format:function(a,b){b=b||{places:20,round:-1};(a=d.format(a,b))&&(a=a.replace(k,"$1").replace(h,""));return a}};return b})},"esri/renderers/visualVariables/support/utils":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",
{value:!0});a.isGraphic=function(a){return a&&"esri.Graphic"===a.declaredClass};a.lookupData=function(a,d){if(d){var f=0,k=d.length-1;d.some(function(b,g){if(a<b)return k=g,!0;f=g;return!1});return[f,k,(a-d[f])/(d[k]-d[f])]}}})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ./../../core/libs/gl-matrix-2/gl-matrix ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c){var n=[0,0];return function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b._viewpoint2D={center:p.vec2f64.create(),rotation:0,scale:0,spatialReference:null};b.center=[0,0];b.extent=new h.Extent;b.id=0;b.inverseTransform=p.mat2df64.create();b.resolution=0;b.rotation=0;b.scale=0;b.transform=p.mat2df64.create();b.transformNoRotation=p.mat2df64.create();b.displayMat3=p.mat3f32.create();b.displayViewMat3=p.mat3f32.create();
b.viewMat3=p.mat3f32.create();b.viewMat2d=p.mat2df32.create();b.worldScreenWidth=0;b.size=[0,0];return b}l(b,a);d=b;Object.defineProperty(b.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,c=a.targetGeometry;b.center[0]=
c.x;b.center[1]=c.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=c.spatialReference}this._update()},enumerable:!0,configurable:!0});b.prototype.copy=function(a){var b=this.size,e=this.viewpoint;e&&b?(this.viewpoint=c.copy(e,a.viewpoint),this._set("size",p.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};b.prototype.clone=function(){return new d({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};b.prototype.toMap=function(a,b,c){if(e.isVec2(b))return p.vec2.transformMat2d(a,b,this.inverseTransform);n[0]=b;n[1]=c;return p.vec2.transformMat2d(a,n,this.inverseTransform)};b.prototype.toScreen=function(a,b,c){if(e.isVec2(b))return p.vec2.transformMat2d(a,b,this.transform);n[0]=b;n[1]=c;return p.vec2.transformMat2d(a,n,this.transform)};b.prototype.toScreenNoRotation=function(a,b,c){if(e.isVec2(b))return p.vec2.transformMat2d(a,b,this.transformNoRotation);n[0]=b;n[1]=
c;return p.vec2.transformMat2d(a,n,this.transformNoRotation)};b.prototype.pixelSizeAt=function(a){return c.pixelSizeAt(a,this.viewpoint,this.size)};b.prototype.getScreenTransform=function(a,b){var e=this._viewpoint2D.center,g=this._get("pixelRatio")||1,d=this._get("size");c.getMatrix(a,e,d,b,0,g);return a};b.prototype._update=function(){var a=this._viewpoint2D,b=a.center,e=a.spatialReference,g=a.scale,d=a.rotation,a=this._get("pixelRatio")||1,f=this._get("size");this._set("id",this.id+1);var n=new k({targetGeometry:new h.Point(b[0],
b[1],e),scale:g,rotation:d});this._set("viewpoint",n);if(f&&e&&g)return this.resolution=c.getResolution(n),this.rotation=d,this.scale=g,this.spatialReference=e,p.vec2.copy(this.center,b),p.mat3.set(this.displayMat3,2/f[0],0,0,0,-2/f[1],0,-1,1,1),g=p.mat3.identity(this.viewMat3),b=p.vec2f32.fromValues(f[0]/2,f[1]/2),e=p.vec2f32.fromValues(-f[0]/2,-f[1]/2),d=p.common.toRadian(d),p.mat3.translate(g,g,b),p.mat3.rotate(g,g,d),p.mat3.translate(g,g,e),p.mat3.multiply(this.displayViewMat3,this.displayMat3,
g),g=p.mat2d.identity(this.viewMat2d),p.mat2d.translate(g,g,b),p.mat2d.rotate(g,g,d),p.mat2d.translate(g,g,e),c.getExtent(this.extent,n,f),c.getTransform(this.transform,n,f,a),p.mat2d.invert(this.inverseTransform,this.transform),c.getTransformNoRotation(this.transformNoRotation,n,f,a),this.worldScreenWidth=c.getWorldScreenWidth(this.spatialReference,this.resolution),this};var d;f([g.property({readOnly:!0})],b.prototype,"id",void 0);f([g.property({value:1,json:{write:!0}})],b.prototype,"pixelRatio",
null);f([g.property({json:{write:!0}})],b.prototype,"size",null);f([g.property({type:k,json:{write:!0}})],b.prototype,"viewpoint",null);return b=d=f([g.subclass("esri.views.2d.ViewState")],b)}(g.declared(b))})},"esri/Viewpoint":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Camera ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/support/jsonUtils ./geometry/support/typeUtils".split(" "),function(d,a,l,f,h,k,b,g,p){function e(){return{enabled:!this.camera}}
return function(a){function c(b){b=a.call(this)||this;b.rotation=0;b.scale=0;b.targetGeometry=null;b.camera=null;return b}l(c,a);d=c;c.prototype.castRotation=function(a){a%=360;0>a&&(a+=360);return a};c.prototype.clone=function(){return new d({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})};var d;f([b.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:e}}}}})],c.prototype,
"rotation",void 0);f([b.cast("rotation")],c.prototype,"castRotation",null);f([b.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:e}}}}})],c.prototype,"scale",void 0);f([b.property({types:p.types,json:{read:g.fromJSON,write:!0,origins:{"web-scene":{read:g.fromJSON,write:{overridePolicy:e}}}}})],c.prototype,"targetGeometry",void 0);f([b.property({type:h,json:{write:!0}})],c.prototype,"camera",void 0);return c=d=f([b.subclass("esri.Viewpoint")],c)}(b.declared(k))})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/Point ./views/3d/support/mathUtils".split(" "),
function(d,a,l,f,h,k,b,g){return function(a){function e(b,c,e,g){b=a.call(this)||this;b.position=null;b.heading=0;b.tilt=0;b.fov=55;return b}l(e,a);c=e;e.prototype.getDefaults=function(a){if(!a.position)return{position:new b([0,0,0])}};e.prototype.normalizeCtorArgs=function(a,b,c,e){a&&"object"===typeof a&&("x"in a||Array.isArray(a))&&(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=e&&(a.fov=e));return a};e.prototype.equals=function(a){return a?this.tilt===a.tilt&&this.heading===
a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1};e.prototype.clone=function(){return new c({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};var c;f([k.property({type:b,json:{write:{isRequired:!0}}})],e.prototype,"position",void 0);f([k.property({type:Number,json:{write:{isRequired:!0}}}),k.cast(function(a){return g.cyclicalDeg.normalize(a)})],e.prototype,"heading",void 0);f([k.property({type:Number,json:{write:{isRequired:!0}}}),k.cast(function(a){return g.clamp(a,
-180,180)})],e.prototype,"tilt",void 0);f([k.property({json:{read:!1,write:!1}})],e.prototype,"fov",void 0);return e=c=f([k.subclass("esri.Camera")],e)}(k.declared(h))})},"esri/geometry/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../Extent ../Geometry ../Mesh ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(d,a,l,f,h,k,b,g,p,e){Object.defineProperty(a,"__esModule",{value:!0});a.types={base:h,key:"type",typeMap:{extent:f,multipoint:b,
point:g,polyline:e,polygon:p,mesh:k}};a.ensureType=l.ensureOneOfType(a.types)})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(d,a){function l(a){return a instanceof Float32Array&&2<=a.length}function f(a){return Array.isArray(a)&&2<=a.length}Object.defineProperty(a,"__esModule",{value:!0});a.isVec2f32=l;a.isVec2f64=f;a.isVec2=function(a){return l(a)||f(a)}})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../Viewpoint ../../core/Error ../../core/promiseUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/gl-matrix ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y){function x(a,c,e,g){return g&&e&&!g.equals(e)&&q.canProject(g,e)&&g.isWebMercator?(g.isWebMercator?(e=c[1],89.99999<e?e=89.99999:-89.99999>e&&(e=-89.99999),e=Math.sin(b.common.toRadian(e)),a=b.vec2.set(a,b.common.toRadian(c[0])*O,.5*O*Math.log((1+e)/(1-e)))):(e=b.common.toDegree(c[0]/O),a=b.vec2.set(a,e-360*Math.floor((e+180)/360),b.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*c[1]/O))))),a):b.vec2.copy(a,c)}function t(a){return a.wkid?a:a.spatialReference||
c.WGS84}function u(a,c){return c.type?b.vec2.set(a,c.x,c.y):b.vec2.copy(a,c)}function z(a,b){return Math.max(a.width/b[0],a.height/b[1])*G(a.spatialReference)}function D(a,b,c){var d;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1])return new e(a);if(a.reduce)return a.reduce(function(a,c){return D(c,b,a)},c);a instanceof p?d=a:a.geometry&&(d=a.geometry);if(!d)return null;a="point"===d.type?new g({xmin:d.x,ymin:d.y,xmax:d.x,ymax:d.y,spatialReference:d.spatialReference}):
d.extent;if(!a)return null;d=q.canProject(a,b);if(!a.spatialReference.equals(b)&&d)a=q.project(a,b);else if(!d)return null;return c=c?c.union(a):a.clone()}function B(a,c){if(!a)return new l({targetGeometry:new e,scale:0,rotation:0});var d=c.spatialReference,f=c.size,h=c.viewpoint,k=c.constraints,n=null;"esri.Viewpoint"===a.declaredClass?n=a:a.viewpoint?n=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(n=a.target);var m=null;if(n&&n.targetGeometry)m=n.targetGeometry;else if(a instanceof
g)m=a;else if(a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))m=D(a.center,d)||D(a.extent,d)||D(a.target,d)||D(a,d);!m&&h&&h.targetGeometry?m=h.targetGeometry:!m&&c.extent&&(m=c.extent);var p=t(m);d||(d=t(c.spatialReference||c.extent||m));if(!y.canProject(m,d)&&p&&!p.equals(d))return null;var w=u(b.vec2f64.create(),m.center?m.center:m),p=new e(x(w,w,p,d),d),w=null,w=n&&n.targetGeometry&&"point"===n.targetGeometry.type?n.scale:a.hasOwnProperty("scale")&&a.scale?
a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&k&&k.effectiveLODs?k.zoomToScale(a.zoom):Array.isArray(m)||"point"===m.type||"extent"===m.type&&0===m.width&&0===m.height?c.extent&&q.canProject(c.extent,d)?z(q.project(c.extent,d),f):c.extent?z(c.extent,f):h.scale:q.canProject(m.extent,d)?z(q.project(m.extent,d),f):z(m.extent,f);c=0;n?c=n.rotation:a.hasOwnProperty("rotation")?c=a.rotation:h&&(c=h.rotation);a=new l({targetGeometry:p,scale:w,rotation:c});k&&(a=k.fit(a),k.rotationEnabled||(a.rotation=c));
return a}function w(a,b){var c=a.targetGeometry,e=b.targetGeometry;c.x=e.x;c.y=e.y;c.spatialReference=e.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function C(a,c,e){return e?b.vec2.set(a,.5*(c[0]-e.right+e.left),.5*(c[1]-e.bottom+e.top)):b.vec2.scale(a,c,.5)}function E(c,e,g,d){a.getTransform(c,e,g,d);return b.mat2d.invert(c,c)}function A(a,c,e){var g=F(c);c=Math.abs(Math.cos(g));g=Math.abs(Math.sin(g));return b.vec2.set(a,Math.round(e[1]*g+e[0]*c),Math.round(e[1]*c+e[0]*g))}
function H(a){var b=a.scale;a=a.targetGeometry.spatialReference;a=m.isValid(a)?1/(39.37*n.getMetersPerUnitForSR(a)*96):1;return b*a}function F(a){return b.common.toRadian(a.rotation)||0}function G(a){return m.isValid(a)?39.37*n.getMetersPerUnitForSR(a)*96:1}function N(a){return a.isWrappable?(a=m.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(a,"__esModule",{value:!0});var O=k.wgs84Radius,S=180/Math.PI;a.extentToScale=z;a.create=B;a.copy=w;a.getAnchor=C;a.getExtent=function(){var a=b.vec2f64.create();
return function(b,c,e){var g=c.targetGeometry;u(a,g);c=.5*H(c);b.xmin=a[0]-c*e[0];b.ymin=a[1]-c*e[1];b.xmax=a[0]+c*e[0];b.ymax=a[1]+c*e[1];b.spatialReference=g.spatialReference;return b}}();a.setExtent=function(b,c,e,g,d){a.centerAt(b,c,e.center);b.scale=z(e,g);d&&d.constraints&&d.constraints.constrain(b);return b};a.getOuterExtent=function(){var a=b.vec2f64.create(),c=b.vec2f64.create();return function(b,e,g){u(a,e.targetGeometry);A(c,e,g);g=.5*H(e);b.set({xmin:a[0]-g*c[0],ymin:a[1]-g*c[1],xmax:a[0]+
g*c[0],ymax:a[1]+g*c[1],spatialReference:e.targetGeometry.spatialReference});return b}}();a.getOuterSize=A;a.getPaddingScreenTranslation=function(){var a=b.vec2f64.create();return function(c,e,g){return b.vec2.sub(c,b.vec2.scale(c,e,.5),C(a,e,g))}}();var J=function(){var c=b.mat2df64.create(),e=b.vec2f64.create();return function(g,d,f,h){var k=H(d);d=F(d);b.vec2.set(e,k,k);b.mat2d.fromScaling(c,e);b.mat2d.rotate(c,c,d);b.mat2d.translate(c,c,a.getPaddingScreenTranslation(e,f,h));b.mat2d.translate(c,
c,[0,h.top-h.bottom]);return b.vec2.set(g,c[4],c[5])}}();a.getResolution=H;a.getResolutionToScaleFactor=G;a.getMatrix=function(){var a=b.vec2f64.create(),c=b.vec2f64.create(),e=b.vec2f64.create();return function(g,d,f,h,k,m){b.vec2.negate(a,d);b.vec2.scale(c,f,.5*m);b.vec2.set(e,1/h*m,-1/h*m);b.mat2d.identity(g);b.mat2d.translate(g,g,c);k&&b.mat2d.rotate(g,g,k);b.mat2d.scale(g,g,e);b.mat2d.translate(g,g,a);return g}}();a.getTransform=function(){var c=b.vec2f64.create();return function(b,e,g,d){var f=
H(e),h=F(e);u(c,e.targetGeometry);return a.getMatrix(b,c,g,f,h,d)}}();a.getTransformNoRotation=function(){var c=b.vec2f64.create();return function(b,e,g,d){var f=H(e);u(c,e.targetGeometry);return a.getMatrix(b,c,g,f,0,d)}}();a.getWorldWidth=N;a.getWorldScreenWidth=function(a,b){return Math.round(N(a)/b)};a.createAsync=function(a,b){if(a=B(a,b))return h.resolve(a);a=new f("viewpointUtils-createAsync:different-spatialReference","Target spatialReference cannot be projected and is different from out spatialReference");
return h.reject(a)};a.angleBetween=function(){var a=b.vec2f64.create(),c=b.vec2f64.create(),e=[0,0,0];return function(g,d,f){b.vec2.subtract(a,g,d);b.vec2.normalize(a,a);b.vec2.subtract(c,g,f);b.vec2.normalize(c,c);b.vec2.cross(e,a,c);g=Math.acos(b.vec2.dot(a,c)/(b.vec2.length(a)*b.vec2.length(c)))*S;0>e[2]&&(g=-g);isNaN(g)&&(g=0);return g}}();a.addPadding=function(){var a=b.vec2f64.create();return function(b,c,e,g){var d=b.targetGeometry;w(b,c);J(a,c,e,g);d.x+=a[0];d.y+=a[1];return b}}();a.removePadding=
function(){var a=b.vec2f64.create();return function(b,c,e,g){var d=b.targetGeometry;w(b,c);J(a,c,e,g);d.x-=a[0];d.y-=a[1];return b}}();a.centerAt=function(){var a=b.vec2f64.create();return function(b,c,e){w(b,c);c=b.targetGeometry;var g=t(e),d=t(c);u(a,e);x(a,a,g,d);c.x=a[0];c.y=a[1];return b}}();a.pixelSizeAt=function(a,b,c){return H(b)};a.resize=function(){var c=b.vec2f64.create();return function(e,g,d,f,h){h||(h="center");b.vec2.sub(c,d,f);b.vec2.scale(c,c,.5);d=c[0];f=c[1];switch(h){case "center":b.vec2.set(c,
0,0);break;case "left":b.vec2.set(c,-d,0);break;case "top":b.vec2.set(c,0,f);break;case "right":b.vec2.set(c,d,0);break;case "bottom":b.vec2.set(c,0,-f);break;case "top-left":b.vec2.set(c,-d,f);break;case "bottom-left":b.vec2.set(c,-d,-f);break;case "top-right":b.vec2.set(c,d,f);break;case "bottom-right":b.vec2.set(c,d,-f)}a.translateBy(e,g,c);return e}}();a.rotateBy=function(a,b,c){w(a,b);a.rotation+=c;return a};a.rotateTo=function(a,b,c){w(a,b);a.rotation=c;return a};a.scaleBy=function(){var c=
b.vec2f64.create();return function(e,g,d,f,h){w(e,g);isNaN(d)||0===d||(a.toMap(c,f,g,h),e.scale=g.scale*d,a.toScreen(c,c,e,h),a.translateBy(e,e,b.vec2.set(c,c[0]-f[0],f[1]-c[1])));return e}}();a.scaleTo=function(a,b,c){w(a,b);a.scale=c;return a};a.scaleAndRotateBy=function(){var c=b.vec2f64.create();return function(e,g,d,f,h,k){w(e,g);isNaN(d)||0===d||(a.toMap(c,h,g,k),e.scale=g.scale*d,e.rotation+=f,a.toScreen(c,c,e,k),a.translateBy(e,e,b.vec2.set(c,c[0]-h[0],h[1]-c[1])));return e}}();a.padAndScaleAndRotateBy=
function(){var c=b.vec2f64.create(),e=b.vec2f64.create();return function(g,d,f,h,k,m,n){a.getPaddingScreenTranslation(e,m,n);b.vec2.add(c,k,e);return h?a.scaleAndRotateBy(g,d,f,h,c,m):a.scaleBy(g,d,f,c,m)}}();a.toMap=function(){var a=b.mat2df64.create();return function(c,e,g,d){return b.vec2.transformMat2d(c,e,E(a,g,d,1))}}();a.toScreen=function(){var c=b.mat2df64.create();return function(e,g,d,f){return b.vec2.transformMat2d(e,g,a.getTransform(c,d,f,1))}}();a.translateBy=function(){var a=b.vec2f64.create(),
c=b.mat2df64.create();return function(e,g,d){w(e,g);var f=H(g),h=e.targetGeometry;b.mat2d.fromRotation(c,F(g));b.mat2d.scale(c,c,b.vec2f64.fromValues(f,f));b.vec2.transformMat2d(a,d,c);h.x+=a[0];h.y+=a[1];return e}}()})},"esri/views/2d/layers/features/controllers":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","../../../../core/Error","../../../../core/promiseUtils"],function(d,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});a.getControllerConfiguration=
function(a){var b=a.source;return"stream"===a.type?h.resolve().then(function(){var b;if(b=a.filter){var d={};b.geometry&&(d.geometry=b.geometry.toJSON());b.where&&(d.where=b.where);b=d}else b=null;return{type:"stream",filter:b,purgeOptions:a.purgeOptions}}):a.capabilities.operations.supportsQuery?b&&"openPorts"in b?h.resolve().then(function(){return{type:"memory",processing:a.processing&&a.processing.toWorker()||null}}):h.resolve({type:"on-demand",gdbVersion:a.gdbVersion,historicMoment:a.historicMoment&&
a.historicMoment.getTime(),processing:a.processing&&a.processing.toWorker()||null}):h.reject(new f("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:a}))};a.createController=function(a,b){return("memory"===a?h.create(function(a){return d(["./controllers/MemoryController"],a)}):"stream"===a?h.create(function(a){return d(["./controllers/StreamController"],a)}):h.create(function(a){return d(["./controllers/OnDemandController"],a)})).then(function(a){return a.default}).then(function(a){return new a(l({},
b.serviceAndViewInfo,{tileStore:b.tileStore,remoteClient:b.remoteClient}))})}})},"esri/views/2d/layers/features/processors":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","../../../../core/promiseUtils"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});a.createProcessor=function(a,k){var b;"heatmap"===a?b=f.create(function(a){return d(["./processors/HeatmapProcessor"],a)}):"symbol"===a&&(b=f.create(function(a){return d(["./processors/SymbolProcessor"],
a)}));return b.then(function(a){return a.default}).then(function(a){return new a(l({},k.serviceAndViewInfo,{tileStore:k.tileStore,remoteClient:k.remoteClient}))})}})},"esri/views/2d/layers/features/support/TileStore":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/decorateHelper @dojo/framework/shim/Set ../../../../../core/has ../../../../../core/libs/rbush/rbush ./Tile ../../../support/Evented ../../../tiling/TileKey".split(" "),function(d,
a,l,f,h,k,b,g,p,e){Object.defineProperty(a,"__esModule",{value:!0});var c={added:[],removed:[]},n=new h.default,m=new e(0,0,0,0);d=function(a){function e(c){var e=a.call(this)||this;e._tiles=new Map;e._index=b(9,k("csp-restrictions")?function(a){return{minX:a.bounds[0],minY:a.bounds[1],maxX:a.bounds[2],maxY:a.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);e.tiles=[];e.tileScheme=c;return e}l(e,a);e.prototype.destroy=function(){this._tiles.clear()};e.prototype.has=function(a){return this._tiles.has(a)};
e.prototype.get=function(a){return this._tiles.get(a)};e.prototype.findByKey=function(a){return this._tiles.get(a.id)};e.prototype.intersections=function(a,b){var c="string"===typeof a?this.get(a):a;if(!c)return[];var e=b*c.resolution;b=c.bounds[0]-e;a=c.bounds[1]-e;for(var g=c.bounds[2]+e,c=c.bounds[3]+e,e=[],d=0,f=this._index.search({minX:b,minY:a,maxX:g,maxY:c});d<f.length;d++){var h=f[d],k=h.bounds.slice();k[0]=Math.max(k[0],b);k[1]=Math.max(k[1],a);k[2]=Math.min(k[2],g);k[3]=Math.min(k[3],c);
0<k[2]-k[0]&&0<k[3]-k[1]&&e.push({bounds:k,tile:h})}return e};e.prototype.boundsIntersections=function(a){return this._index.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]})};e.prototype.setViewState=function(a){var b=this.tileScheme.getTileCoverage(a,0);if(b){a=b.spans;var b=b.lodInfo,e=b.level;if(0<a.length)for(var d=0;d<a.length;d++)for(var f=a[d],h=f.row,k=f.colTo,l=f.colFrom;l<=k;l++){var p=m.set(e,h,b.normalizeCol(l),b.getWorldForColumn(l)).id;n.add(p);this.has(p)||(f=new g.default(this.tileScheme,
p),this._tiles.set(p,f),this._index.insert(f),this.tiles.push(f),c.added.push(f))}for(a=this.tiles.length-1;0<=a;a--)f=this.tiles[a],n.has(f.id)||(this._tiles.delete(f.id),this.tiles.splice(a,1),this._index.remove(f),c.removed.push(f));(c.added.length||c.removed.length)&&this.emit("update",c);n.clear();c.added.length=0;c.removed.length=0}};return e}(p.default);a.default=d})},"@dojo/framework/shim/Set":function(){(function(d){"object"===typeof module&&"object"===typeof module.exports?(d=d(require,
exports),void 0!==d&&(module.exports=d)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ./support/has ./Symbol".split(" "),d)})(function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=d("tslib"),f=d("./global"),h=d("./iterator"),k=d("./support/has");d("./Symbol");a.Set=f.default.Set;k.default("es6-set")||(a.Set=(b=function(){function a(a){this._setData=[];this[Symbol.toStringTag]="Set";if(a)if(h.isArrayLike(a))for(var b=0;b<a.length;b++)this.add(a[b]);
else try{for(var b=l.__values(a),c=b.next();!c.done;c=b.next())this.add(c.value)}catch(q){g={error:q}}finally{try{c&&!c.done&&(d=b.return)&&d.call(b)}finally{if(g)throw g.error;}}var g,d}a.prototype.add=function(a){if(this.has(a))return this;this._setData.push(a);return this};a.prototype.clear=function(){this._setData.length=0};a.prototype.delete=function(a){a=this._setData.indexOf(a);if(-1===a)return!1;this._setData.splice(a,1);return!0};a.prototype.entries=function(){return new h.ShimIterator(this._setData.map(function(a){return[a,
a]}))};a.prototype.forEach=function(a,b){for(var c=this.values(),e=c.next();!e.done;)a.call(b,e.value,e.value,this),e=c.next()};a.prototype.has=function(a){return-1<this._setData.indexOf(a)};a.prototype.keys=function(){return new h.ShimIterator(this._setData)};Object.defineProperty(a.prototype,"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0});a.prototype.values=function(){return new h.ShimIterator(this._setData)};a.prototype[Symbol.iterator]=function(){return new h.ShimIterator(this._setData)};
return a}(),b[Symbol.species]=b,b));a.default=a.Set;var b})},"esri/core/libs/rbush/rbush":function(){define(["../quickselect/quickselect"],function(d){function a(b,c){if(!(this instanceof a))return new a(b,c);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));c&&("function"===typeof c?this.toBBox=c:this._initFormat(c));this.clear()}function l(a,b){f(a,0,a.children.length,b,a)}function f(a,b,c,e,g){g||(g=n(null));g.minX=Infinity;g.minY=Infinity;g.maxX=-Infinity;
g.maxY=-Infinity;for(var d;b<c;b++)d=a.children[b],h(g,a.leaf?e(d):d);return g}function h(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function k(a,b){return a.minX-b.minX}function b(a,b){return a.minY-b.minY}function g(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function p(a){return a.maxX-a.minX+(a.maxY-a.minY)}function e(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function c(a,
b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function n(a){return{children:a,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function m(a,b,c,e,g){for(var f=[b,c],h;f.length;)c=f.pop(),b=f.pop(),c-b<=e||(h=b+Math.ceil((c-b)/e/2)*e,d(a,h,b,c,g),f.push(b,h,h,c))}a.prototype={all:function(){return this._all(this.data,[])},search:function(a){var b=this.data,g=[],d=this.toBBox;if(!c(a,b))return g;for(var f=[],h,k,m,n;b;){h=0;for(k=b.children.length;h<
k;h++)m=b.children[h],n=b.leaf?d(m):m,c(a,n)&&(b.leaf?g.push(m):e(a,n)?this._all(m,g):f.push(m));b=f.pop()}return g},collides:function(a){var b=this.data,g=this.toBBox;if(!c(a,b))return!1;for(var d=[],f,h,k,m;b;){f=0;for(h=b.children.length;f<h;f++)if(k=b.children[f],m=b.leaf?g(k):k,c(a,m)){if(b.leaf||e(a,m))return!0;d.push(k)}b=d.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var b=0,c=a.length;b<c;b++)this.insert(a[b]);return this}a=this._build(a.slice(),
0,a.length-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this._insert(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this._insert(a,this.data.height-1);return this},clear:function(){this.data=n([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,g=this.toBBox(a),d=[],f=[],h,k,m,n;c||d.length;){c||(c=d.pop(),k=d[d.length-1],h=f.pop(),n=!0);if(c.leaf){a:{m=
a;var l=c.children,p=b;if(p){for(var q=0;q<l.length;q++)if(p(m,l[q])){m=q;break a}m=-1}else m=l.indexOf(m)}if(-1!==m){c.children.splice(m,1);d.push(c);this._condense(d);break}}n||c.leaf||!e(c,g)?k?(h++,c=k.children[h],n=!1):c=null:(d.push(c),f.push(h),h=0,k=c,c=c.children[0])}return this},toBBox:function(a){return a},compareMinX:k,compareMinY:b,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,b){for(var c=[];a;)a.leaf?b.push.apply(b,a.children):c.push.apply(c,
a.children),a=c.pop();return b},_build:function(a,b,c,e){var g=c-b+1,d=this._maxEntries,f;if(g<=d)return f=n(a.slice(b,c+1)),l(f,this.toBBox),f;e||(e=Math.ceil(Math.log(g)/Math.log(d)),d=Math.ceil(g/Math.pow(d,e-1)));f=n([]);f.leaf=!1;f.height=e;var g=Math.ceil(g/d),d=g*Math.ceil(Math.sqrt(d)),h,k,p;for(m(a,b,c,d,this.compareMinX);b<=c;b+=d)for(k=Math.min(b+d-1,c),m(a,b,k,g,this.compareMinY),h=b;h<=k;h+=g)p=Math.min(h+g-1,k),f.children.push(this._build(a,h,p,e-1));l(f,this.toBBox);return f},_chooseSubtree:function(a,
b,c,e){for(var d,f,h,k,m,n,l,p;;){e.push(b);if(b.leaf||e.length-1===c)break;l=p=Infinity;d=0;for(f=b.children.length;d<f;d++)h=b.children[d],m=g(h),n=(Math.max(h.maxX,a.maxX)-Math.min(h.minX,a.minX))*(Math.max(h.maxY,a.maxY)-Math.min(h.minY,a.minY))-m,n<p?(p=n,l=m<l?m:l,k=h):n===p&&m<l&&(l=m,k=h);b=k||b.children[0]}return b},_insert:function(a,b,c){var e=this.toBBox;c=c?a:e(a);var e=[],g=this._chooseSubtree(c,this.data,b,e);g.children.push(a);for(h(g,c);0<=b;)if(e[b].children.length>this._maxEntries)this._split(e,
b),b--;else break;this._adjustParentBBoxes(c,e,b)},_split:function(a,b){var c=a[b],e=c.children.length,g=this._minEntries;this._chooseSplitAxis(c,g,e);e=this._chooseSplitIndex(c,g,e);e=n(c.children.splice(e,c.children.length-e));e.height=c.height;e.leaf=c.leaf;l(c,this.toBBox);l(e,this.toBBox);b?a[b-1].children.push(e):this._splitRoot(c,e)},_splitRoot:function(a,b){this.data=n([a,b]);this.data.height=a.height+1;this.data.leaf=!1;l(this.data,this.toBBox)},_chooseSplitIndex:function(a,b,c){var e,d,
h,k,m,n,l;m=n=Infinity;for(e=b;e<=c-b;e++)d=f(a,0,e,this.toBBox),h=f(a,e,c,this.toBBox),k=Math.max(0,Math.min(d.maxX,h.maxX)-Math.max(d.minX,h.minX))*Math.max(0,Math.min(d.maxY,h.maxY)-Math.max(d.minY,h.minY)),d=g(d)+g(h),k<m?(m=k,l=e,n=d<n?d:n):k===m&&d<n&&(n=d,l=e);return l},_chooseSplitAxis:function(a,c,e){var g=a.leaf?this.compareMinX:k,d=a.leaf?this.compareMinY:b,f=this._allDistMargin(a,c,e,g);c=this._allDistMargin(a,c,e,d);f<c&&a.children.sort(g)},_allDistMargin:function(a,b,c,e){a.children.sort(e);
e=this.toBBox;var g=f(a,0,b,e),d=f(a,c-b,c,e),k=p(g)+p(d),m,n;for(m=b;m<c-b;m++)n=a.children[m],h(g,a.leaf?e(n):n),k+=p(g);for(m=c-b-1;m>=b;m--)n=a.children[m],h(d,a.leaf?e(n):n),k+=p(d);return k},_adjustParentBBoxes:function(a,b,c){for(;0<=c;c--)h(b[c],a)},_condense:function(a){for(var b=a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():l(a[b],this.toBBox)},_initFormat:function(a){var b=["return a"," - b",";"];this.compareMinX=new Function("a",
"b",b.join(a[0]));this.compareMinY=new Function("a","b",b.join(a[1]));this.toBBox=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};return a})},"esri/core/libs/quickselect/quickselect":function(){define([],function(){function d(f,h,k,b,g){for(;b>k;){if(600<b-k){var l=b-k+1,e=h-k+1,c=Math.log(l),n=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*n*(l-n)/l)*(0>e-l/2?-1:1);d(f,h,Math.max(k,Math.floor(h-e*n/l+c)),Math.min(b,Math.floor(h+(l-e)*n/l+c)),g)}l=f[h];e=k;
n=b;a(f,k,h);for(0<g(f[b],l)&&a(f,k,b);e<n;){a(f,e,n);e++;for(n--;0>g(f[e],l);)e++;for(;0<g(f[n],l);)n--}0===g(f[k],l)?a(f,k,n):(n++,a(f,n,b));n<=h&&(k=n+1);h<=n&&(b=n-1)}}function a(a,d,k){var b=a[d];a[d]=a[k];a[k]=b}function l(a,d){return a<d?-1:a>d?1:0}return function(a,h,k,b,g){d(a,h,k||0,b||a.length-1,g||l)}})},"esri/views/2d/layers/features/support/Tile":function(){define("require exports @dojo/framework/shim/Set ../../../../../core/ArrayPool ../../../../../geometry/support/aaBoundingRect ../../../../../tasks/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(d,a,l,f,h,k,b){function g(a,b){var c=a.bounds,e=b.bounds;return a.key.id!==b.key.id&&a.key.world===b.key.world&&c[0]<=e[0]&&c[1]<=e[1]&&c[2]>=e[2]&&c[3]>=e[3]}Object.defineProperty(a,"__esModule",{value:!0});a.isParentOf=g;a.isChildOf=function(a,b){return g(b,a)};d=function(){function a(a,c){this.bounds=h.create();this.key=new b(0,0,0,0);this.objectIds=new l.default;this.key.set(c);c=a.getLODInfoAt(this.key);this.tileInfoView=a;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=
c.resolution;this.scale=c.scale;this.level=c.level;this.needsClear=!0}Object.defineProperty(a.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new a(this.tileInfoView,this.id)};a.prototype.createChildTiles=function(){for(var b=this.key.getChildKeys(),c=f.acquire(),g=0;g<b.length;g++)c[g]=new a(this.tileInfoView,b[g]);return c};a.prototype.getQuantizationParameters=function(){return k.default.fromJSON({mode:"view",originPosition:"upperLeft",
tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};return a}();a.Tile=d;a.default=d})},"esri/tasks/support/QuantizationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k,b,g,p){Object.defineProperty(a,"__esModule",{value:!0});var e=b({upperLeft:"upper-left",lowerLeft:"lower-left"});d=function(a){function b(b){b=a.call(this,b)||this;b.extent=null;b.mode="view";b.originPosition="upper-left";b.tolerance=1;return b}l(b,a);c=b;b.prototype.clone=function(){return new c(g.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};var c;f([p.property({type:h.Extent,json:{write:!0}})],b.prototype,"extent",
void 0);f([p.property({type:["view","edit"],json:{write:!0}})],b.prototype,"mode",void 0);f([p.property({type:String,json:{read:e.read,write:e.write}})],b.prototype,"originPosition",void 0);f([p.property({type:Number,json:{write:!0}})],b.prototype,"tolerance",void 0);return b=c=f([p.subclass("esri.tasks.support.QuantizationParameters")],b)}(p.declared(k));a.default=d})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(d,a,l){return function(){function a(a,
d,b,g){this.set(a,d,b,g)}a.from=function(d,f,b,g){return a.pool.acquire(d,f,b,g)};a.getId=function(a,d,b,g){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+d+"/"+b+"/"+g};Object.defineProperty(a.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&
this.world===a.world};a.prototype.release=function(){this.world=this.col=this.row=this.level=0};a.prototype.set=function(a,d,b,g){null==a?this.world=this.col=this.row=this.level=0:"object"===typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===typeof a?(a=a.split("/"),d=a[1],b=a[2],g=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(d),this.col=parseFloat(b),this.world=parseFloat(g)):(this.level=+a,this.row=+d,this.col=+b,this.world=+g||0);return this};
a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};a.prototype.getChildKeys=function(){var d=this.level+1,f=this.row<<1,b=this.col<<1,g=this.world;return[a.pool.acquire(d,f,b,g),a.pool.acquire(d,f,b+1,g),a.pool.acquire(d,f+1,b,g),a.pool.acquire(d,f+1,b+1,g)]};a.prototype.compareRowMajor=function(a){return this.row<a.row?-1:this.row>a.row?1:this.col<a.col?-1:this.col>a.col?1:0};a.sort=function(d){return d.map(function(d){return a.from(d)}).sort(function(a,b){return a.compareRowMajor(b)}).map(function(a){return a.id})};
a.pool=new l(a,!0,null,25,50);return a}()})},"esri/views/2d/support/Evented":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._listeners={}}a.prototype.on=function(a,d){var f=this;null==this._listeners[a]&&(this._listeners[a]=new Map);var b={};this._listeners[a].set(b,d);return{remove:function(){return f._listeners[a].delete(b)}}};a.prototype.once=function(a,d){var f=this.on(a,function(a){f.remove();d(a)});return f};
a.prototype.emit=function(a,d){this.hasEventListener(a)&&this._listeners[a].forEach(function(a){return a(d)})};a.prototype.hasEventListener=function(a){return null!=this._listeners[a]&&0<this._listeners[a].size};return a}();a.default=d})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(d,a,l,f,h,k,b){var g=new k("0/0/0/0"),p=function(){function a(a,b,c,e,g,d,f,
h){this.x=a;this.ymin=b;this.ymax=c;this.invM=e;this.leftAdjust=g;this.rightAdjust=d;this.leftBound=f;this.rightBound=h}a.create=function(b,c){var e;b[1]>c[1]&&(e=[c,b],b=e[0],c=e[1]);e=b[0];b=b[1];var g=c[0];c=c[1];var d=g-e,f=c-b,f=0!==f?d/f:0,h=(Math.ceil(b)-b)*f,k=(Math.floor(b)-b)*f;return new a(e,Math.floor(b),Math.ceil(c),f,0>d?h:k,0>d?k:h,0>d?g:e,0>d?e:g)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};
a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),e=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var c=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var e=a.lods.slice();e.sort(function(a,b){return b.scale-a.scale});var g=this._lodInfos=e.map(function(c){return f.create(a,c,b)});e.forEach(function(a,b){c._infoByLevel[a.level]=g[b];c._infoByScale[a.scale]=g[b];
c.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});a.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);g.set(b);return(b=this._infoByLevel[g.level])?b.getTileBounds(a,g,c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);g.set(b);return(b=this._infoByLevel[g.level])?
b.getTileCoords(a,g,c):a};a.prototype.getTileCoverage=function(a,c,g){void 0===c&&(c=192);void 0===g&&(g="closest");g="closest"===g?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);var d=h.pool.acquire(g),f=this._wrap,k;k=Infinity;var m=-Infinity,n,l,q=d.spans;e[0][0]=e[0][1]=e[1][1]=e[3][0]=-c;e[1][0]=e[2][0]=a.size[0]+c;e[2][1]=e[3][1]=a.size[1]+c;for(c=0;c<e.length;c++){var w=e[c];a.toMap(w,w);w[0]=g.getColumnForX(w[0]);w[1]=g.getRowForY(w[1])}a=[];w=3;for(c=0;4>c;c++){if(e[c][1]!==
e[w][1]){var C=p.create(e[c],e[w]);k=Math.min(C.ymin,k);m=Math.max(C.ymax,m);void 0===a[C.ymin]&&(a[C.ymin]=[]);a[C.ymin].push(C)}w=c}if(null==k||null==m||100<m-k)return null;for(w=[];k<m;){null!=a[k]&&(w=w.concat(a[k]));n=Infinity;l=-Infinity;for(c=w.length-1;0<=c;c--)C=w[c],n=Math.min(n,C.getLeftCol()),l=Math.max(l,C.getRightCol());n=Math.floor(n);l=Math.floor(l);if(k>=g.first[1]&&k<=g.last[1])if(f)if(g.size[0]<g.worldSize[0])for(C=Math.floor(l/g.worldSize[0]),c=Math.floor(n/g.worldSize[0]);c<=
C;c++)q.push(new b(k,Math.max(g.getFirstColumnForWorld(c),n),Math.min(g.getLastColumnForWorld(c),l)));else q.push(new b(k,n,l));else n>g.last[0]||l<g.first[0]||(n=Math.max(n,g.first[0]),l=Math.min(l,g.last[0]),q.push(new b(k,n,l)));k+=1;for(c=w.length-1;0<=c;c--)C=w[c],C.ymax>=k?C.incrRow():w.splice(c,1)}return d};a.prototype.getTileParentId=function(a){g.set(a);a=this._lodInfos.indexOf(this._infoByLevel[g.level])-1;if(0>a)return null;this._getTileIdAtLOD(g,this._lodInfos[a],g);return g.id};a.prototype.getTileResolution=
function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};a.prototype.intersects=function(a,b){g.set(b);b=this._infoByLevel[g.level];var c=a.lodInfo;if(c.resolution>b.resolution){this._getTileIdAtLOD(g,c,g);for(var e=c.denormalizeCol(g.col,g.world),d=0,f=a.spans;d<f.length;d++){var h=f[d];if(h.row===g.row&&h.colFrom<=e&&h.colTo>=e)return!0}}if(c.resolution<b.resolution){f=a.spans.reduce(function(a,
b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=f[0];var e=f[1],d=f[2],f=f[3],k=b.denormalizeCol(g.col,g.world),h=c.getColumnForX(b.getXForColumn(k)),m=c.getRowForY(b.getYForRow(g.row)),k=c.getColumnForX(b.getXForColumn(k+1))-1;b=c.getRowForY(b.getYForRow(g.row+1))-1;return!(h>f||k<d||m>e||b<a)}var n=c.denormalizeCol(g.col,g.world);return a.spans.some(function(a){return a.row===g.row&&
a.colFrom<=n&&a.colTo>=n})};a.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=l.getInfo(this.tileInfo.spatialReference),c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var c=1;c<b.length-1;c++)if(a>b[c])return this._infoByScale[b[c-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=
function(a){var b=this.scales;this._infoByScale[a]||(a=b.reduce(function(b,c,e,g){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]));return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var c=b.length-1;0<=c;c--)if(a<b[c])return c===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[c]].level+(b[c]-a)/(b[c]-b[c+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};
a.prototype._getTileIdAtLOD=function(a,b,c){var e=this._infoByLevel[c.level];a.set(c);if(b.resolution<e.resolution)return null;if(b.resolution===e.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*e.resolution/b.resolution+.01);a.row=Math.floor(c.row*e.resolution/b.resolution+.01);return a};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(d,a,l,f){function h(a,g,d){a[0]=g;a[1]=d;return a}
var k=new f("0/0/0/0");return function(){function a(a,b,e,c,d,f,h,k,l,t,u,z){this.level=a;this.resolution=b;this.scale=e;this.origin=c;this.first=d;this.last=f;this.size=h;this.norm=k;this.worldStart=l;this.worldEnd=t;this.worldSize=u;this.wrap=z}a.create=function(b,d,e){var c=l.getInfo(b.spatialReference),g=[b.origin.x,b.origin.y],f=[b.size[0]*d.resolution,b.size[1]*d.resolution],k=[-Infinity,-Infinity],p=[Infinity,Infinity],x=[Infinity,Infinity];e&&(h(k,Math.max(0,Math.floor((e.xmin-g[0])/f[0])),
Math.max(0,Math.floor((g[1]-e.ymax)/f[1]))),h(p,Math.max(0,Math.floor((e.xmax-g[0])/f[0])),Math.max(0,Math.floor((g[1]-e.ymin)/f[1]))),h(x,p[0]-k[0]+1,p[1]-k[1]+1));var t;b.isWrappable?(b=[Math.ceil(Math.round(2*c.origin[1]/d.resolution)/b.size[0]),x[1]],c=[Math.floor((c.origin[0]-g[0])/f[0]),k[1]],e=[b[0]+c[0]-1,p[1]],t=!0):(c=k,e=p,b=x,t=!1);return new a(d.level,d.resolution,d.scale,g,k,p,x,f,c,e,b,t)};a.prototype.normalizeCol=function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>
a?b-1-Math.abs((a+1)%b):a%b};a.prototype.denormalizeCol=function(a,b){return this.wrap?this.worldSize[0]*b+a:a};a.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};a.prototype.getXForColumn=
function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};a.prototype.getTileBounds=function(a,b,e){void 0===e&&(e=!1);k.set(b);var c=e?k.col:this.denormalizeCol(k.col,k.world),g=k.row;b=this.getXForColumn(c);e=this.getYForRow(g+1);c=this.getXForColumn(c+1);g=this.getYForRow(g);a[0]=b;a[1]=e;a[2]=c;a[3]=g;return a};a.prototype.getTileCoords=function(a,b,e){void 0===
e&&(e=!1);k.set(b);b=e?k.col:this.denormalizeCol(k.col,k.world);Array.isArray(a)?h(a,this.getXForColumn(b),this.getYForRow(k.row)):(a.x=this.getXForColumn(b),a.y=this.getYForRow(k.row));return a};return a}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(d,a,l,f,h){return function(){function a(a){this.lodInfo=a;this.spans=l.acquire()}a.prototype.release=function(){for(var a=0,g=this.spans;a<
g.length;a++)h.pool.release(g[a]);l.release(this.spans)};a.prototype.forEach=function(a,g){var b=this.spans,e=this.lodInfo,c=e.level;if(0!==b.length)for(var d=0;d<b.length;d++)for(var f=b[d],h=f.row,k=f.colTo,f=f.colFrom;f<=k;f++)a.call(g,c,h,e.normalizeCol(f),e.getWorldForColumn(f))};a.pool=new f(a,!0);return a}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(d,a,l){return function(){function a(a,d,b){this.row=a;this.colFrom=d;this.colTo=
b}a.pool=new l(a,!0);return a}()})},"esri/views/2d/layers/features/controllers/OnDemandController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper @dojo/framework/shim/Set ../../../../../geometry ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/QueueProcessor ../../../../../core/accessorSupport/decorators ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/FeatureProcessing ../../../../../tasks/operations/query ../../../../../tasks/support/QuantizationParameters ../../../../../tasks/support/Query ../../../engine/webgl/Utils ./BaseController ../support/DataTile ../support/DataTileFeaturesIndex ../support/Tile ../support/TileUpdateQueue ../../../tiling/TileQueue".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D,B,w,C,E,A,H,F){Object.defineProperty(a,"__esModule",{value:!0});var G=e.getLogger("esri.views.2d.layers.features.controllers.OnDemandController");d=p("esri-featurelayer-webgl");p=p("esri-mobile");var N=d&&"object"===typeof d&&null!=d.maxDrillLevel?d.maxDrillLevel:p?1:4,O=d&&"object"===typeof d&&null!=d.maxRecordCountFactor?d.maxRecordCountFactor:p?1:3,S=d&&"object"===typeof d&&null!=d.enablePBFQuery?d.enablePBFQuery:!0,J=new k.default,X=[];k=function(a){function e(){var b=
null!==a&&a.apply(this,arguments)||this;b.type="on-demand";b._queryInfoHash=null;b._processingInMainThread=!1;b._dataTileIndex=new E.default;b._editsQueue=new n({concurrency:1,ordered:!0,process:function(a){return b._processEditsEvent(a)}});return b}l(e,a);e.prototype.initialize=function(){var a=this;this._fetchQueue=new F({concurrency:10,strategy:"center-first",tileInfoView:this.tileStore.tileScheme,process:function(b){return a._fetchTile(b)}});this._updateQueue=new H.default({tileInfoView:this.tileStore.tileScheme,
process:function(b,c){return a._updateTile(b,c)}});this.handles.add(this.watch("processor",this._switchProcessor.bind(this)))};e.prototype.destroy=function(){this._fetchQueue.clear();this._updateQueue.clear();this.queryEngine&&(this.queryEngine.destroy(),this._set("queryEngine",null))};Object.defineProperty(e.prototype,"processing",{get:function(){return t.fromWorker(this.configuration.processing)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"updating",{get:function(){return this._fetchQueue.updating||
this._updateQueue.updating},enumerable:!0,configurable:!0});e.prototype.onEdits=function(a){var b=this;this._fetchQueue.pause();this._fetchQueue.reset();this._editsQueue.push(a).then(function(){0===b._editsQueue.length&&b._fetchQueue.resume()})};e.prototype.queryFeatures=function(a){return this.queryEngine.executeQuery(D.fromJSON(a))};e.prototype.queryFeatureCount=function(a){return this.queryEngine.executeQueryForCount(D.fromJSON(a))};e.prototype.queryObjectIds=function(a){return this.queryEngine.executeQueryForIds(D.fromJSON(a))};
e.prototype.queryExtent=function(a){return this.queryEngine.executeQueryForExtent(D.fromJSON(a))};e.prototype.redraw=function(){this._updateQueue.pause();this._manageTiles(this.tileStore.tiles);this._updateQueue.resume()};e.prototype.refresh=function(){this.queryEngine&&this.queryEngine.destroy();this.spatialIndex&&this.spatialIndex.clear();this._dataTileIndex.spatialIndex=null;this._dataTileIndex.clear();this._editsQueue.pause();this._fetchQueue.pause();this._updateQueue.pause();this._editsQueue.clear();
this._fetchQueue.reset();this._updateQueue.clear();if(this.processor){var a=this.processor.queryInfo,b=a.definitionExpression,c=a.gdbVersion,a=a.historicMoment;this._set("spatialIndex",new y.default({geometryType:this.service.geometryType,hasM:!1,hasZ:!1}));this._set("queryEngine",new x.default({definitionExpression:b,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,
gdbVersion:c,historicMoment:null!=a&&new Date(a),spatialIndex:this.spatialIndex}));this._dataTileIndex.spatialIndex=this.spatialIndex;this._dataTileIndex.clear();this._manageTiles(this.tileStore.tiles);this._fetchQueue.resume();this._editsQueue.resume();this._updateQueue.resume()}};e.prototype.setViewState=function(a){this._fetchQueue.state=a;this._updateQueue.state=a};e.prototype.onTileUpdate=function(a){this.queryEngine&&this._manageTiles(a.added,a.removed)};e.prototype._manageTiles=function(a,
b){void 0===b&&(b=null);for(var c=this._dataTileIndex,e=this._fetchQueue,g=this._updateQueue,d="esriGeometryPoint"===this.service.geometryType,f=function(a){var b=c.get(a.id);b?(b.displayTile=a,d?c.forEach(function(c){A.isChildOf(c,b)&&(c.displayTile=a)}):b.done=!1):(b=new C.default,b.tile=a.clone(),b.displayTile=a,c.add(b));h._processDataTile(b)},h=this,k=0;k<a.length;k++){var m=a[k];f(m)}if(b)for(a=0;a<b.length;a++)m=b[a],J.add(m),g.cancel(m.id);c.forEach(function(a){J.has(a.displayTile)&&X.push(a)});
for(g=0;g<X.length;g++)m=X[g],e.has(m.id)&&e.getPromise(m.id).cancel(),c.delete(m);X.length=0;J.clear()};e.prototype._processDataTile=function(a){var b=this,c=a.key,e=this._fetchQueue,d=c.id,f=this._queryInfoHash,c=c.level-a.displayTile.key.level>=N;this._dataTileIndex.add(a);if(a.done||e.has(d)){if(a.queryInfoHash!==f||a.returnExceeded!==c)if(a.done)a.done=!1;else if(e.isOngoing(d))e.getPromise(d).cancel();else{a.queryInfoHash=f;a.returnExceeded=c;return}}else a.queryInfoHash=f,a.returnExceeded=
c;a.done?this._invalidateTile(a.displayTile):e.has(d)||e.push(a).then(function(c){return b._handleResponse(a,c)}).catch(function(b){"cancel"!==b.dojoType&&G.error(new g("mapview-controller","Encountered an error when handling tile response",b));a.done=!0})};e.prototype._handleResponse=function(a,b){a.done=!0;q.hydrateOptimizedFeatureSet(b);if(b.exceededTransferLimit)if(a.returnExceeded)this._dataTileIndex.setTileFeatures(a,b.features),this._deleteChildrenDataTiles(a);else{b=0;for(var c=a.tile.createChildTiles();b<
c.length;b++){var e=c[b],g=new C.default;g.tile=e;g.displayTile=a.displayTile;this._processDataTile(g)}}else this._dataTileIndex.setTileFeatures(a,b.features),this._deleteChildrenDataTiles(a);this._invalidateTile(a.tile)};e.prototype._deleteChildrenDataTiles=function(a){this._dataTileIndex.forEach(function(b){A.isChildOf(b,a)&&X.push(b)});for(var b=0;b<X.length;b++){var c=X[b];this._fetchQueue.has(c.id)&&this._fetchQueue.getPromise(c.id).cancel();this._dataTileIndex.delete(c)}X.length=0};e.prototype._fetchTile=
function(a){var b=this;a=this._createQuery(a.displayTile,a.tile,a.returnExceeded);var c=this.service.source;return S&&this.service.capabilities.query.supportsFormatPBF?u.executeQueryPBF(c,a,{type:"optimized"}).then(function(a){return a.data}):u.executeQuery(c,a).then(function(a){return q.convertFromFeatureSet(a.data,b.service.objectIdField)})};e.prototype._invalidateTile=function(a){var b=this._updateQueue,c=0;for(a=this.tileStore.intersections(a,this.processor.queryInfo.pixelBuffer);c<a.length;c++){var e=
a[c].tile;b.push(e.id,e.updateTimestamp)}};e.prototype._updateTile=function(a,b){var c=this,e=this.tileStore.get(a);a=this.processor.queryInfo;a=this.queryEngine.executeTileQuery(e,{pixelBuffer:a.pixelBuffer,returnGeometry:a.returnGeometry,returnCentroid:a.returnCentroid});var g=a.objectIds,d={features:a.features,fields:this.service.fields,objectIdFieldName:this.service.objectIdField,transform:{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]}};return this._applyProcessing(d).catch(function(a){a&&
"cancel"!==a.dojoType&&G.error("updating-tile",a);return d}).then(function(a){var d=[],f=!0;c._dataTileIndex.forEach(function(a){e.id!==a.id&&A.isChildOf(a,e)&&f&&!a.done&&(f=!1)});f&&e&&e.objectIds.forEach(function(a){g.has(a)||d.push(a)});g.forEach(function(a){e.objectIds.add(a)});e.updateTimestamp=b;return c.processor.onTileData(e,{addOrUpdate:a.features,remove:d,transformParams:B.getTransformParams(a)}).catch(function(a){a&&"cancel"!==a.dojoType&&G.error("updating-tile",a)})})};e.prototype._processEditsEvent=
function(a){var b=this;return c.create(function(c,e){e=function(a){return a.objectId};var g=a.deletedFeatures.map(e),d=b._dataTileIndex.deleteFeaturesById(g),g=a.addedFeatures.concat(a.updatedFeatures).map(e);if(g.length)e=b.service.source,g=b._createObjectIdsQuery(g),u.executeQuery(e,g).then(function(a){if((a=a.data)&&a.features&&a.features.length)for(a=q.convertFromFeatureSet(a,b.service.objectIdField).features,d.push.apply(d,b._dataTileIndex.addOrUpdateFeatures(a)),a=0;a<d.length;a++)b._invalidateTile(d[a].tile)}).then(c,
c);else{for(e=0;e<d.length;e++)b._invalidateTile(d[e].tile);c()}})};e.prototype._switchProcessor=function(a,b){var c=a.queryInfo;b=c.definitionExpression;var e=c.gdbVersion,c=c.historicMoment;a=this._createQueryInfoHash(a);this._queryInfoHash!==a&&(this._queryInfoHash=a,this.queryEngine&&this.queryEngine.destroy(),this.spatialIndex&&this.spatialIndex.clear(),this._set("spatialIndex",new y.default({geometryType:this.service.geometryType,hasM:!1,hasZ:!1})),this._set("queryEngine",new x.default({definitionExpression:b,
fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,gdbVersion:e,historicMoment:null!=c&&new Date(c),spatialIndex:this.spatialIndex})),this._dataTileIndex.spatialIndex=this.spatialIndex,this._dataTileIndex.forEach(function(a){a.done=!1}));this._editsQueue.pause();this._fetchQueue.pause();this._updateQueue.pause();this._editsQueue.clear();this._fetchQueue.reset();
this._updateQueue.clear();this._manageTiles(this.tileStore.tiles);this._fetchQueue.resume();this._editsQueue.resume();this._updateQueue.resume()};e.prototype._createQuery=function(a,c,e){void 0===e&&(e=!0);var g=this.service.geometryType,d=this._createDefaultQuery();a="esriGeometryPoint"===this.service.geometryType?c:a;d.maxRecordCountFactor=O;d.resultType="tile";d.returnExceededLimitFeatures=e;d.geometry=new b.Extent({xmin:c.bounds[0],ymin:c.bounds[1],xmax:c.bounds[2],ymax:c.bounds[3],spatialReference:this.spatialReference});
if(this.service.capabilities.query.supportsQuantization)d.quantizationParameters=new z.default({mode:"view",originPosition:"upper-left",tolerance:a.resolution,extent:new b.Extent({xmin:a.bounds[0],ymin:a.bounds[1],xmax:a.bounds[2],ymax:a.bounds[3],spatialReference:this.spatialReference})}),"esriGeometryPolyline"===g&&(d.maxAllowableOffset=a.resolution);else if("esriGeometryPolyline"===g||"esriGeometryPolygon"===g)d.maxAllowableOffset=a.resolution;return d};e.prototype._createObjectIdsQuery=function(a){var b=
this._createDefaultQuery();b.objectIds=a;return b};e.prototype._createDefaultQuery=function(){var a=this,b=this.processor.queryInfo,c=new D;c.outSpatialReference=this.spatialReference;var e=b.outFields,g=b.orderByFields;this.processing&&(e=e&&e.filter(function(b){return!a.processing.getField(b)}),g=g&&g.filter(function(b){return!a.processing.getField(b)}));e=.75<=e.length/this.service.fields.length?["*"]:e;c.gdbVersion=b.gdbVersion;c.historicMoment=null!=b.historicMoment?new Date(b.historicMoment):
null;c.outFields=e;c.where=b.definitionExpression||"1\x3d1";c.returnGeometry=!0;c.returnCentroid=b.returnCentroid;c.orderByFields=g;return c};e.prototype._applyProcessing=function(a){var b=this.processing;if(!b)return c.resolve(a);if(this._processingInMainThread)return this.remoteClient.invoke("executeProcessing",{featureSet:a});try{var e=b.process(a,b.options);return e?"then"in e?e:c.resolve(e):c.reject(new g("FeatureLayer","invalid processing.process() method, returns nothing"))}catch(K){return this._processingInMainThread=
!0,this.remoteClient.invoke("executeProcessing",{featureSet:a})}};e.prototype._createQueryInfoHash=function(a){var b=this,c=a.queryInfo,e=c.orderByFields,c=c.outFields,g=a.queryInfo;a=g.definitionExpression;var d=g.gdbVersion,g=g.historicMoment;this.processing&&(c=c&&c.filter(function(a){return!b.processing.getField(a)}),e=e&&e.filter(function(a){return!b.processing.getField(a)}));c&&c.sort();e&&e.sort();return JSON.stringify({definitionExpression:a,outFields:.75<=c.length/this.service.fields.length?
["*"]:c,orderByFields:e,gdbVersion:d,historicMoment:g})};f([m.property()],e.prototype,"_fetchQueue",void 0);f([m.property()],e.prototype,"_updateQueue",void 0);f([m.property()],e.prototype,"configuration",void 0);f([m.property({readOnly:!0,dependsOn:["configuration"]})],e.prototype,"processing",null);f([m.property({readOnly:!0})],e.prototype,"queryEngine",void 0);f([m.property({readOnly:!0})],e.prototype,"spatialIndex",void 0);f([m.property({dependsOn:["_fetchQueue.updating","_updateQueue.updating"]})],
e.prototype,"updating",null);return e=f([m.subclass()],e)}(m.declared(w.default));a.default=k})},"esri/core/QueueProcessor":function(){define("require exports ./compilerUtils ./promiseUtils ./Queue ./scheduling".split(" "),function(d,a,l,f,h,k){return function(){function a(a){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this._pendingProcessing=0;this.concurrency=1;this.ordered=!1;a.concurrency&&(this.concurrency=a.concurrency);a.ordered&&
(this.ordered=!0,this._itemsToProcess=[]);this._queue=new h({peeker:a.peeker});this.process=a.process}Object.defineProperty(a.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length+this._pendingProcessing},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._queue.clear();var a=[];this._processingItems.forEach(function(b){return a.push(b.resultPromise)});this._processingItems.clear();a.forEach(function(a){return a.cancel()});a.length=0;this._apiPromises.forEach(function(b){return a.push(b)});
this._apiPromises.clear();a.forEach(function(a){return a.cancel()});this._cancelNext()};a.prototype.find=function(a,b){var e=this,c=void 0;this._apiPromises.forEach(function(g,d){a.call(b,d)&&(c=e._apiPromises.get(d).promise)});return c};a.prototype.get=function(a){return(a=this._apiPromises.get(a))&&a.promise||void 0};a.prototype.isOngoing=function(a){return this._processingItems.has(a)};a.prototype.has=function(a){return this._apiPromises.has(a)};a.prototype.pause=function(){this._isPaused||(this._isPaused=
!0,this._cancelNext())};a.prototype.push=function(a){var b=this;if(this._apiPromises.has(a))return this._apiPromises.get(a).promise;var e=f.createDeferred(function(c){var e=b._processingItems.get(a);e?e.resultPromise.cancel(c):(b._remove(a),b._scheduleNext())});this._add(a,e);this._scheduleNext();return e.promise};a.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();for(var b=0;b<a.length;b++){var e=a[b];e.resultPromise.isFulfilled()?
this._processReset(e):(e.isReset=!0,e.resultPromise.cancel())}};a.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};a.prototype._scheduleNext=function(){var a=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=k.schedule(function(){a._scheduledNextHandle=null;a._next()}))};a.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};a.prototype._processResult=function(a,
b){this._remove(a.item);this._scheduleNext();a.dfd.resolve(b)};a.prototype._processError=function(a,b){a.isReset?this._processReset(a):(this._remove(a.item),this._scheduleNext(),a.dfd.reject(b))};a.prototype._processReset=function(a){this._remove(a.item);this._add(a.item,a.dfd);this._scheduleNext()};a.prototype._processOrdered=function(a,b){var e=this;if(a.isReset)this._processReset(a);else{a.result=b;var c=!1;this._processingItems.forEach(function(a){c||(a.result?e._itemsToProcess.push(a):c=!0)});
a=0;for(b=this._itemsToProcess;a<b.length;a++){var g=b[a];!1===g.result.ok?this._processError(g,g.result.error):this._processResult(g,g.result.value)}this._itemsToProcess.length=0}};a.prototype._process=function(a){var b=this;if(!l.isNone(a)){var e=this._apiPromises.get(a);this._pendingProcessing++;var c=this.process(a);this._pendingProcessing--;if(c&&"function"===typeof c.then){var g={item:a,resultPromise:c,result:null,dfd:e,isReset:!1};this._processingItems.set(a,g);this.ordered?c.then(function(a){return b._processOrdered(g,
{ok:!0,value:a})},function(a){return b._processOrdered(g,{ok:!1,error:a})}):c.then(function(a){return b._processResult(g,a)},function(a){return b._processError(g,a)})}else e.resolve(c),this._remove(a)}};a.prototype._add=function(a,b){this._apiPromises.set(a,b);this._queue.push(a)};a.prototype._remove=function(a){this._queue.remove(a);this._apiPromises.delete(a);this._processingItems.delete(a)};a.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=
null)};return a}()})},"esri/core/Queue":function(){define(["require","exports"],function(d,a){return function(){function a(a){this._items=[];this._itemSet=new Set;this._peeker=function(a){return a[0]};this._length=0;a&&a.peeker&&(this._peeker=a.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};
a.prototype.push=function(a){this.contains(a)||this._add(a)};a.prototype.contains=function(a){return 0<this._length&&this._itemSet.has(a)};a.prototype.pop=function(){if(0!==this._length){var a=this.peek();this._remove(a);return a}};a.prototype.remove=function(a){this.contains(a)&&this._remove(a)};a.prototype._add=function(a){this._items.push(a);this._itemSet.add(a);this._length++};a.prototype._remove=function(a){this._itemSet.delete(a);this._items.splice(this._items.indexOf(a),1);this._length--};
return a}()})},"esri/layers/graphics/data/FeatureStore":function(){define("require exports @dojo/framework/shim/Map ../../../core/Error ../../../core/has ../../../core/Logger ../../../core/libs/rbush/rbush ../../../geometry/support/aaBoundingRect ../featureConversionUtils".split(" "),function(d,a,l,f,h,k,b,g,p){Object.defineProperty(a,"__esModule",{value:!0});var e=[],c=k.getLogger("esri.layers.graphics.data.FeatureStore"),n={minX:0,minY:0,maxX:0,maxY:0};d=function(){function a(a){this._featuresById=
new l.default;this._boundsByFeature=new l.default;this._featuresByBounds=new l.default;this._index=b(9,h("csp-restrictions")?function(a){return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}}:["[0]","[1]","[2]","[3]"]);this._geometryInfo=a}Object.defineProperty(a.prototype,"geometryType",{get:function(){return this._geometryInfo.geometryType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasM",{get:function(){return this._geometryInfo.hasM},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"hasZ",{get:function(){return this._geometryInfo.hasZ},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"numFeatures",{get:function(){return this._featuresById.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fullBounds",{get:function(){if(!this.numFeatures)return null;var a=g.create(g.NEGATIVE_INFINITY);this._boundsByFeature.forEach(function(b){b&&(a[0]=Math.min(b[0],a[0]),a[1]=Math.min(b[1],a[1]),a[2]=Math.max(b[2],a[2]),a[3]=Math.max(b[3],a[3]))});return a},
enumerable:!0,configurable:!0});a.prototype.setEngine=function(a){this._engine=a};a.prototype.add=function(a){this._add(a,e);this._index.load(e);this._clearCache();e.length=0};a.prototype.addMany=function(a){for(var b=0;b<a.length;b++)this._add(a[b],e);this._index.load(e);this._clearCache();e.length=0};a.prototype.clear=function(){this._featuresById.clear();this._boundsByFeature.clear();this._featuresByBounds.clear();this._index.clear();this._clearCache()};a.prototype.removeManyById=function(a){for(var b=
0;b<a.length;b++){var c=a[b],e=this._featuresById.get(c);if(e){var g=this._boundsByFeature.get(e);g&&(this._index.remove(g),this._featuresByBounds.delete(g));this._boundsByFeature.delete(e)}this._featuresById.delete(c)}this._clearCache()};a.prototype.forEachBounds=function(a,b){for(var c=0;c<a.length;c++){var e=a[c],g=this._boundsByFeature.get(e);g&&b(g,e)}};a.prototype.getFeature=function(a){return this._featuresById.get(a)};a.prototype.hasFeature=function(a){return this._featuresById.has(a)};a.prototype.forEachFeature=
function(a){this._featuresById.forEach(function(b){return a(b)})};a.prototype.forEachFeatureInBounds=function(a,b){var c=0,e=this._index;n.minX=a[0];n.minY=a[1];n.maxX=a[2];n.maxY=a[3];for(a=e.search(n);c<a.length;c++)b(this._featuresByBounds.get(a[c]))};a.prototype.transferIds=function(a,b){for(var c=[],e=0;e<b.length;e++){var g=this._featuresById.get(b[e]);g&&(this._remove(g),c.push(g))}a.addMany(c);this._clearCache()};a.prototype.transferIdRange=function(a,b,c){for(var e=[];b<c;b++){var g=this._featuresById.get(b);
g&&(this._remove(g),e.push(g))}a.addMany(e);this._clearCache()};a.prototype.transferIf=function(a,b){var c=this,e=[];this._featuresById.forEach(function(a,g){b(a)&&(c._remove(a),e.push(a))});a.addMany(e);this._clearCache()};a.prototype.transferAll=function(a){var b=this,c=[];this._featuresById.forEach(function(a,e){b._remove(a);c.push(a)});a.addMany(c);this._clearCache()};a.prototype._clearCache=function(){this._engine&&this._engine.clearCache()};a.prototype._add=function(a,b){if(a){var e=a.objectId;
if(null==e)c.error(new f("featurestore:invalid-feature","feature id is missing",{feature:a}));else{var d=this._featuresById.get(e),h;d&&(h=this._boundsByFeature.get(d))&&(this._index.remove(h),this._boundsByFeature.delete(d),this._featuresByBounds.delete(h));a.geometry?(h=p.getBoundsOptimizedGeometry(h||g.create(),a.geometry,this._geometryInfo.hasZ,this._geometryInfo.hasM),this._boundsByFeature.set(a,h),this._featuresByBounds.set(h,a),this._featuresById.set(e,a),b.push(h)):(this._boundsByFeature.set(a,
null),this._featuresById.set(e,a))}}};a.prototype._remove=function(a){var b;if(a){if(b=this._boundsByFeature.get(a))this._index.remove(b),this._boundsByFeature.delete(a),this._featuresByBounds.delete(b);this._featuresById.delete(a.objectId)}};return a}();a.default=d})},"@dojo/framework/shim/Map":function(){(function(d){"object"===typeof module&&"object"===typeof module.exports?(d=d(require,exports),void 0!==d&&(module.exports=d)):"function"===typeof define&&define.amd&&define("require exports tslib ./iterator ./global ./object ./support/has ./Symbol".split(" "),
d)})(function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=d("tslib"),f=d("./iterator"),h=d("./global"),k=d("./object"),b=d("./support/has");d("./Symbol");a.Map=h.default.Map;b.default("es6-map")||(a.Map=(g=function(){function a(a){this._keys=[];this._values=[];this[Symbol.toStringTag]="Map";if(a)if(f.isArrayLike(a))for(var b=0;b<a.length;b++){var e=a[b];this.set(e[0],e[1])}else try{for(var b=l.__values(a),g=b.next();!g.done;g=b.next())e=g.value,this.set(e[0],e[1])}catch(x){d={error:x}}finally{try{g&&
!g.done&&(h=b.return)&&h.call(b)}finally{if(d)throw d.error;}}var d,h}a.prototype._indexOfKey=function(a,b){for(var c=0,e=a.length;c<e;c++)if(k.is(a[c],b))return c;return-1};Object.defineProperty(a.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._keys.length=this._values.length=0};a.prototype.delete=function(a){a=this._indexOfKey(this._keys,a);if(0>a)return!1;this._keys.splice(a,1);this._values.splice(a,1);return!0};a.prototype.entries=
function(){var a=this,b=this._keys.map(function(b,c){return[b,a._values[c]]});return new f.ShimIterator(b)};a.prototype.forEach=function(a,b){for(var c=this._keys,e=this._values,g=0,d=c.length;g<d;g++)a.call(b,e[g],c[g],this)};a.prototype.get=function(a){a=this._indexOfKey(this._keys,a);return 0>a?void 0:this._values[a]};a.prototype.has=function(a){return-1<this._indexOfKey(this._keys,a)};a.prototype.keys=function(){return new f.ShimIterator(this._keys)};a.prototype.set=function(a,b){var c=this._indexOfKey(this._keys,
a),c=0>c?this._keys.length:c;this._keys[c]=a;this._values[c]=b;return this};a.prototype.values=function(){return new f.ShimIterator(this._values)};a.prototype[Symbol.iterator]=function(){return this.entries()};return a}(),g[Symbol.species]=g,g));a.default=a.Map;var g})},"@dojo/framework/shim/object":function(){(function(d){"object"===typeof module&&"object"===typeof module.exports?(d=d(require,exports),void 0!==d&&(module.exports=d)):"function"===typeof define&&define.amd&&define(["require","exports",
"./global","./support/has","./Symbol"],d)})(function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=d("./global"),f=d("./support/has"),h=d("./Symbol");f.default("es6-object")?(d=l.default.Object,a.assign=d.assign,a.getOwnPropertyDescriptor=d.getOwnPropertyDescriptor,a.getOwnPropertyNames=d.getOwnPropertyNames,a.getOwnPropertySymbols=d.getOwnPropertySymbols,a.is=d.is,a.keys=d.keys):(a.keys=function(a){return Object.keys(a).filter(function(a){return!a.match(/^@@.+/)})},a.assign=function(d){for(var b=
[],g=1;g<arguments.length;g++)b[g-1]=arguments[g];if(null==d)throw new TypeError("Cannot convert undefined or null to object");var f=Object(d);b.forEach(function(b){b&&a.keys(b).forEach(function(a){f[a]=b[a]})});return f},a.getOwnPropertyDescriptor=function(a,b){h.isSymbol(b);return Object.getOwnPropertyDescriptor(a,b)},a.getOwnPropertyNames=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!a.match(/^@@.+/)})},a.getOwnPropertySymbols=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!!a.match(/^@@.+/)}).map(function(a){return Symbol.for(a.substring(2))})},
a.is=function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b});f.default("es2017-object")?(d=l.default.Object,a.getOwnPropertyDescriptors=d.getOwnPropertyDescriptors,a.entries=d.entries,a.values=d.values):(a.getOwnPropertyDescriptors=function(d){return a.getOwnPropertyNames(d).reduce(function(b,g){b[g]=a.getOwnPropertyDescriptor(d,g);return b},{})},a.entries=function(d){return a.keys(d).map(function(a){return[a,d[a]]})},a.values=function(d){return a.keys(d).map(function(a){return d[a]})})})},"esri/layers/graphics/data/QueryEngine":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/Map @dojo/framework/shim/Set ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/MemCache ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/aaBoundingRect ../../../geometry/support/normalizeUtils ../../../geometry/support/scaleUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./utils ../../../tasks/support/Query".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D,B,w){function C(a){return a?JSON.parse(JSON.stringify(a,["latestWkid","wkid","wkt"])):a}function E(a,b,c,e,g,d,f,h){f&&!d?e.forEachFeatureInBounds(g,function(b){var e=B.getCentroid(c,b,h);b=b.attributes;e&&a.push(new H(b,null,e))}):d&&!f?e.forEachFeatureInBounds(g,function(e){var g=e.attributes,d=B.getGeometry(c,e,0,h);d&&(b.add(e.objectId),a.push(new H(g,d)))}):e.forEachFeatureInBounds(g,function(e){var g=e.attributes,d=B.getGeometry(c,e,0,h),f=B.getCentroid(c,
e,h);d&&f&&(b.add(e.objectId),a.push(new H(g,d,f)))})}Object.defineProperty(a,"__esModule",{value:!0});var A=g.getLogger("esri.layers.graphics.data.QueryEngine"),H=function(){return function(a,b,c){this.attributes=a;this.geometry=b;this.centroid=c}}(),F={},G=new h.default,N=new p.Storage(2E6),O=0;d=function(){function a(a){var b=this;this.capabilities={query:u.queryCapabilities};this.fieldsMap=new f.default;this.geometryType=a.geometryType;this.hasM=a.hasM;this.hasZ=a.hasZ;this.objectIdField=a.objectIdField;
this.spatialReference=a.spatialReference;this.definitionExpression=a.definitionExpression;this.cacheSpatialQueries=a.cacheSpatialQueries||!1;this.gdbVersion=a.gdbVersion;this.historicMoment=a.historicMoment;this.spatialIndex=a.spatialIndex;this.spatialIndex.setEngine(this);this.timeInfo=a.timeInfo;this.cacheSpatialQueries&&(this._geometryQueryCache=new p(O++ +"$$",N));a.fields.forEach(function(a){b.fieldsMap.set(a.name.trim(),a);b.fieldsMap.set(a.name.trim().toLowerCase(),a)})}a.prototype.destroy=
function(){this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this.fieldsMap.clear()};Object.defineProperty(a.prototype,"fullExtent",{get:function(){var a=this.spatialIndex.fullBounds;return a?{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:C(this.spatialReference)}:null},enumerable:!0,configurable:!0});a.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._allItems=null};a.prototype.executeQuery=function(a){var b=this;
void 0===a&&(a=new w);var c=a.clone();return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).catch(function(a){if(a===F)return new z.default([],b);throw a;}).then(function(a){return a.createQueryResponse(c)})};a.prototype.executeQueryForCount=function(a){var b=this;void 0===a&&(a=new w);var c=a.clone();c.returnGeometry=
!1;c.returnCentroid=!1;c.outSpatialReference=null;return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){return a.size}).catch(function(a){if(a===F)return 0;throw a;})};a.prototype.executeQueryForExtent=function(a){var b=this;void 0===a&&(a=new w);var c=a.clone(),e=c.outSpatialReference;return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(){c.returnGeometry=
!0;c.returnCentroid=!1;c.outSpatialReference=null;return c}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){var c=a.size;if(!c)return{count:c,extent:null};var g={xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:C(b.spatialReference)};b.spatialIndex.forEachBounds(a.items,function(a){g.xmin=
Math.min(a[0],g.xmin);g.ymin=Math.min(a[1],g.ymin);g.xmax=Math.max(a[2],g.xmax);g.ymax=Math.max(a[3],g.ymax)});a=t.project(g,a.spatialReference,e);a.spatialReference=C(e&&e.toJSON()||b.spatialReference);if(0===a.xmax-a.xmin){var d=q.getMetersPerUnitForSR(a.spatialReference);a.xmin-=d;a.xmax+=d}0===a.ymax-a.ymin&&(d=q.getMetersPerUnitForSR(a.spatialReference),a.ymin-=d,a.ymax+=d);return{count:c,extent:a}}).catch(function(a){if(a===F)return{count:0,extent:null};throw a;})};a.prototype.executeQueryForIds=
function(a){var b=this;void 0===a&&(a=new w);var c=a.clone();c.returnGeometry=!1;c.returnCentroid=!1;c.outSpatialReference=null;return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){a=a.items;for(var b=[],c=0;c<a.length;c++)b[c]=a[c].objectId;return b}).catch(function(a){if(a===F)return[];throw a;
})};a.prototype.executeTileQuery=function(a,b){var c=this,e=b.returnGeometry,g=b.returnCentroid,d=b.pixelBuffer;b=new h.default;var f=[],d=d*a.resolution,k=n.pad(a.bounds,d,n.create());E(f,b,this,this.spatialIndex,k,e,g,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[a.bounds[0],a.bounds[3]]});if("esriGeometryPoint"===this.geometryType||g){var m=y.getInfo(this.spatialReference);if(m){var l=m.valid,m=l[0],l=l[1];if(k[0]<m){var p=n.fromValues(l-d,k[1],l,k[3]);E(f,b,this,this.spatialIndex,
p,e,g,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[l,a.bounds[3]]})}k[2]>l&&(d=n.fromValues(m,k[1],m+d,k[3]),E(f,b,this,this.spatialIndex,d,e,g,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[m-l+a.bounds[0],a.bounds[3]]}))}}f.sort(function(a,b){return a.attributes[c.objectIdField]-b.attributes[c.objectIdField]});return{features:f,objectIds:b}};a.prototype.executeTileQueryForIds=function(a,b){a=n.pad(a.bounds,b.pixelBuffer*a.resolution,n.create());
var c=[];this.spatialIndex.forEachFeatureInBounds(a,function(a){return c.push(a.objectId)});return c};a.prototype.executeQueryForLatestObservations=function(a){var c=this;if(this.timeInfo)return this.executeQuery(a).then(function(a){return c._filterLatest(a,c.timeInfo)});A.error(new b("invalid-query","Unable to make time-based query as the underlying service does include TimeInfo"))};a.prototype._filterLatest=function(a,b){var c=b.trackIdField,e=b.startTimeField;b=b.endTimeField||e;for(var e=new f.default,
g=[],d=0,h=a.features;d<h.length;d++){var k=h[d],m=k.attributes[c],n=k.attributes[b];(!e.has(m)||e.get(m).attributes[b]<n)&&e.set(m,k)}e.forEach(function(a){return g.push(a)});return l({},a,{features:g})};a.prototype._getAll=function(){if(!this._allItems){var a=[];this.spatialIndex.forEachFeature(function(b){return a.push(b)});this._allItems=new z.default(a,this)}return this._allItems};a.prototype._normalizeQuery=function(a){var b=this,c=this.definitionExpression,g=a.where,d=a.geometry,f=a.outFields,
h=a.orderByFields,k=a.groupByFieldsForStatistics,n=a.outStatistics;a.where=g=g&&g.trim();if(!g||/^1 *= *1$/.test(g)||c&&c===g)a.where=null;if(f)for(c=0;c<f.length;c++)f[c]=f[c].trim();if(h)for(c=0;c<h.length;c++)h[c]=h[c].trim();if(k)for(c=0;c<k.length;c++)k[c]=k[c].trim();if(n)for(c=0;c<n.length;c++)n[c].onStatisticField&&(n[c].onStatisticField=n[c].onStatisticField.trim());if(!d)return e.resolve(a);a.outSpatialReference||(a.outSpatialReference=d.spatialReference);return this._getInputGeometry(a).then(function(b){return a.geometry=
b}).then(function(a){return t.checkProjectionSupport(a.spatialReference,b.spatialReference)}).then(function(){return m.normalizeCentralMeridian(a.geometry)}).then(function(a){return t.project(a[0].toJSON(),a[0].spatialReference,b.spatialReference)}).then(function(c){if(!c)throw F;c.spatialReference=b.spatialReference;return a.read({geometry:c})})};a.prototype._executeGeometryQuery=function(a){var b=this,c=a.geometry,g=a.outSpatialReference,d=a.spatialRelationship,f=y.isValid(g)&&!y.equals(this.spatialReference,
g),h=f?JSON.stringify({geometry:c,spatialRelationship:d,outSpatialReference:g}):JSON.stringify({geometry:c,spatialRelationship:d});if(this.cacheSpatialQueries){var k=this._geometryQueryCache.get(h);if(void 0!==k)return e.resolve(k)}k=null;if(c){var m=this._searchSpatialIndex(this._getQueryBBoxes(c));if(!m.length)return c=new z.default([],this),this.cacheSpatialQueries&&this._geometryQueryCache.put(h,c,c.size||1),e.resolve(c);k="envelope-intersects"===a.spatialRelationship||"esriGeometryPoint"===this.geometryType&&
D.canQueryWithRBush(c)?e.resolve(new z.default(m,this)):D.getSpatialQueryOperator(d,c,this.geometryType).then(function(a){if(a){var c=m.filter(function(c){return a(B.getGeometry(b,c))});return new z.default(c,b)}})}else k=e.resolve(this._getAll());return k.then(function(c){if(f&&(a.returnGeometry||a.returnCentroid))return c.project(g).then(function(a){b.cacheSpatialQueries&&b._geometryQueryCache.put(h,a,a.size||1);return a});b.cacheSpatialQueries&&b._geometryQueryCache.put(h,c,c.size||1);return c})};
a.prototype._getInputGeometry=function(a){var b=a.geometry,g=a.distance,d=a.units;if(null==g)return e.resolve(b);a=b.spatialReference;var f=d||q.getUnitString(a),d=null,d=a&&(a.isGeographic||a.isWebMercator)?e.resolve(b):t.checkProjectionSupport(a,k.SpatialReference.WGS84).then(function(){return c.project(b,k.SpatialReference.WGS84)});return d.then(function(a){return D.getGeodesicBufferOperator().then(function(b){return b(a,g,f)})})};a.prototype._getQueryBBoxes=function(a){if("point"===a.type)return[n.fromValues(a.x,
a.y,a.x,a.y)];a=D.canQueryWithRBush(a)?a:a.extent;switch(a.type){case "extent":return[n.fromExtent(a)];case "polygon":return a.rings.map(function(a){return n.fromValues(a[0][0],a[0][1],a[2][0],a[2][1])})}};a.prototype._searchSpatialIndex=function(a){for(var b=[],c=0;c<a.length;c++)this.spatialIndex.forEachFeatureInBounds(a[c],function(a){G.has(a)||(b.push(a),G.add(a))});G.clear();return b};a.prototype._checkQuerySupport=function(a){return 0>a.distance||null!=a.geometryPrecision||a.multipatchOption||
a.pixelSize||a.relationParameter||a.text||a.timeExtent?e.reject(new b("feature-store:unsupported-query","Unsupported query options",{query:a})):e.all([this._checkAttributesQuerySupport(a),this._checkStatisticsQuerySupport(a),D.checkSpatialQuerySupport(a,this.geometryType,this.spatialReference),t.checkProjectionSupport(this.spatialReference,a.outSpatialReference)]).then(function(){return a})};a.prototype._checkAttributesQuerySupport=function(a){var c=a.outFields,e=a.orderByFields,g=a.returnDistinctValues;
e&&0<e.length&&(e=e.map(function(a){return-1<a.indexOf(" ASC")?a.split(" ASC")[0]:-1<a.indexOf(" DESC")?a.split(" DESC")[0]:a}),x.validateFields(this.fieldsMap,e,"orderByFields contains missing fields"));if(c&&0<c.length)x.validateFields(this.fieldsMap,c,"outFields contains missing fields");else if(g)throw new b("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:a});x.validateWhere(this.fieldsMap,a.where)};a.prototype._checkStatisticsQuerySupport=function(a){var c=
a.outStatistics,g=a.groupByFieldsForStatistics,d=a.having,f=g&&g.length,h=c&&c.length;if(d){if(!f||!h)return e.reject(new b("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:a}));x.validateHaving(this.fieldsMap,d,c)}if(h&&!c.some(function(a){return"exceedslimit"===a.statisticType}))for(d=c.map(function(a){return a.onStatisticField}),x.validateFields(this.fieldsMap,d,"onStatisticFields contains missing fields"),f&&x.validateFields(this.fieldsMap,
g,"groupByFieldsForStatistics contains missing fields"),g=0;g<c.length;g++){var d=c[g],h=d.onStatisticField,k=d.statisticType;if("exceedslimit"===k)return e.reject(new b("feature-store:unsupported-query","statistic type exceedslimit is not supported",{definition:d,query:a}));if((!f||"count"!==k)&&h&&x.hasInvalidFieldType(h,this.fieldsMap))return e.reject(new b("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:d,query:a}))}};return a}();a.default=d})},"esri/core/MemCache":function(){define(["require",
"exports","./iteratorUtils","./lang","./PooledArray"],function(d,a,l,f,h){d=function(){function a(a,g,d){this._namespace=a;this._storage=g;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";d&&(this._storage.registerRemoveFunc(this._namespace,d),this._removeFunc=!0)}Object.defineProperty(a.prototype,"namespace",{get:function(){return this._namespace.slice(0,-1)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hitRate",{get:function(){return this._hit/
(this._hit+this._miss)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._storage.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maxSize",{get:function(){return this._storage.maxSize},enumerable:!0,configurable:!0});a.prototype.resetHitRate=function(){this._hit=this._miss=0};a.prototype.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this)};
a.prototype.put=function(a,g,d){this._storage.put(this._namespace+a,g,d)};a.prototype.get=function(a){a=this._storage.get(this._namespace+a);void 0===a?++this._miss:++this._hit;return a};a.prototype.pop=function(a){a=this._storage.pop(this._namespace+a);void 0===a?++this._miss:++this._hit;return a};a.prototype.clear=function(){this._storage.clear(this._namespace)};a.prototype.clearAll=function(){this._storage.clearAll()};a.prototype.getStats=function(){return this._storage.getStats()};a.prototype.resetStats=
function(){this._storage.resetStats()};return a}();(function(a){var b=function(){function a(a){void 0===a&&(a=10485760);this._maxSize=a;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=[];this._users=new h}a.prototype.register=function(a){this._users.push(a)};a.prototype.deregister=function(a){this._users.removeUnordered(a)};a.prototype.registerRemoveFunc=function(a,b){this._removeFuncs.push([a,b])};a.prototype.deregisterRemoveFunc=function(a){this._removeFuncs=this._removeFuncs.filter(function(b){return b[0]!==
a})};Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maxSize",{get:function(){return this._maxSize},set:function(a){this._maxSize=Math.max(a,0);this._size>this._maxSize&&this._removeEntries()},enumerable:!0,configurable:!0});a.prototype.put=function(a,b,c){if(this._db.has(a)){var e=this._db.get(a);this._size-=e.size;this._db.delete(a);this._notifyRemoved(a,e.entry)}c>this._maxSize?this._notifyRemoved(a,
b):void 0===b?console.warn("Refusing to cache undefined entry "):!c||0>c?console.warn("Refusing to cache entry with invalid size "+c):(this._db.set(a,{entry:b,size:c}),this._size+=c,this._size>this._maxSize&&this._removeEntries())};a.prototype.pop=function(a){if(this._db.has(a)){var b=this._db.get(a);this._size-=b.size;this._db.delete(a);++this._hit;return b.entry}++this._miss};a.prototype.get=function(a){var b=this._db.get(a);if(void 0===b)++this._miss;else return this._db.delete(a),this._db.set(a,
b),++this._hit,b.entry};a.prototype.getStats=function(){var a=this,b={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},c={};this._db.forEach(function(b,e){a._users.forEach(function(a){a=a.namespace;if(f.startsWith(e,a))return c[a]=(c[a]||0)+b.size,!1})});var g={};this._users.forEach(function(a){var b=a.namespace;!isNaN(a.hitRate)&&0<a.hitRate?(c[b]=c[b]||0,g[b]=Math.round(100*a.hitRate)+
"%"):g[b]="0%"});var d=Object.keys(c);d.forEach(function(b){return c[b]=c[b]/a._size*100});d.sort(function(a,b){return c[b]-c[a]});d.forEach(function(a){return b[a]=Math.round(c[a])+"% / "+g[a]});return b};a.prototype.resetStats=function(){this._hit=this._miss=0;this._users.forEach(function(a){return a.resetHitRate()})};a.prototype.clear=function(a){var b=this;this._db.forEach(function(c,e){f.startsWith(e,a)&&(b._size-=c.size,b._db.delete(e),b._notifyRemoved(e,c.entry))})};a.prototype.clearAll=function(){var a=
this;this._db.forEach(function(b,c){a._notifyRemoved(c,b.entry)});this._size=0;this._db.clear()};a.prototype._getHitRate=function(){return this._hit/(this._hit+this._miss)};a.prototype._notifyRemoved=function(a,b){this._removeFuncs.forEach(function(c){if(f.startsWith(a,c[0]))c[1](b)})};a.prototype._removeEntries=function(){var a=this;l.everyMap(this._db,function(b,c){a._size-=b.size;a._db.delete(c);a._notifyRemoved(c,b.entry);return a._size>.9*a.maxSize})};return a}();a.Storage=b})(d||(d={}));return d})},
"esri/core/iteratorUtils":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.everyMap=Map.prototype.entries?function(a,d){a=a.entries();for(var f=a.next();!f.done;f=a.next())if(!1===d(f.value[1],f.value[0]))return!1;return!0}:function(a,d){var f=!0;a.forEach(function(a,b){f&&(f=!1!==d(a,b))});return f}})},"esri/core/PooledArray":function(){define(["require","exports","./tsSupport/generatorHelper","./arrayUtils","./HeapSort"],function(d,a,l,f,h){return function(){function a(a){var b=
this;this.data=[];this._length=0;this._allocator=null;this._deallocator=function(){};this._shrink=function(){};this._hint=new f.RemoveHint;a&&(a.initialSize&&(this.data=Array(a.initialSize)),a.allocator?(this._allocator=a.allocator,this._deallocator=a.deallocator):"deallocator"in a&&(this._deallocator=a.deallocator),a.shrink&&(this._shrink=function(){b.data.length>2*b.length&&(b.data.length=b.length)}))}a.prototype.toArray=function(){return this.data.slice(0,this.length)};Object.defineProperty(a.prototype,
"length",{get:function(){return this._length},set:function(a){if(a>this._length)if(this._allocator)for(;this._length<a;)this.data[this._length++]=this._allocator(this.data[this._length]);else this._length=a;else{if(this._deallocator)for(var b=a;b<this._length;++b)this.data[b]=this._deallocator(this.data[b]);this._length=a;this._shrink()}},enumerable:!0,configurable:!0});a.prototype.clear=function(){this.length=0};a.prototype.equal=function(a){return f.equals(this.data,a.data)};a.prototype.push=function(a){return this.data[this._length++]=
a};a.prototype.pushArray=function(a){for(var b=0;b<a.length;b++)this.data[this._length++]=a[b];return this.back()};a.prototype.pushNew=function(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));++this._length;return this.back()};a.prototype.pop=function(){if(0!==this.length){var a=this.data[this.length-1];--this.length;this._shrink();return a}};a.prototype.removeMany=function(a){var b=this,d=[];this.data=this.data.filter(function(e,c){if(c>=b.length)return!1;if(0>
a.indexOf(e))return!0;d.push(e);return!1});this._length=this.data.length;return d};a.prototype.iterableRemoveMany=function(a,d){var b,e;return l(this,function(c){switch(c.label){case 0:b=[],e=0,c.label=1;case 1:return e<this.length?d()?[4]:[3,3]:[3,5];case 2:c.sent(),c.label=3;case 3:if(e>=this.length)return[3,5];0>a.indexOf(this.data[e])&&b.push(this.data[e]);c.label=4;case 4:return++e,[3,1];case 5:return this.data=b,this._length=this.data.length,[2]}})};a.prototype.removeUnordered=function(a){a=
f.removeUnordered(this.data,a,this.length,this._hint);void 0!==a&&--this.length;return a};a.prototype.removeUnorderedMany=function(a){a=f.removeUnorderedMany(this.data,a,this.length,this._hint);this.length-=a.length;return a};a.prototype.front=function(){if(0!==this.length)return this.data[0]};a.prototype.back=function(){if(0!==this.length)return this.data[this.length-1]};a.prototype.swapElements=function(a,d){var b;a>=this.length||d>=this.length||(b=[this.data[d],this.data[a]],this.data[a]=b[0],
this.data[d]=b[1])};a.prototype.sort=function(a){h.sort(this.data,0,this.length,a)};a.prototype.iterableSort=function(a,d){return h.iterableSort(this.data,0,this.length,a,d)};a.prototype.some=function(a,d){for(var b=0;b<this.length;++b)if(a.call(d,this.data[b],b,this.data))return!0;return!1};a.prototype.find=function(a,d){for(var b=0;b<this.length;++b){var e=this.data[b];if(a.call(d,e,b,this.data))return e}};a.prototype.filter=function(b,d,f){f=f||new a;for(var e=0;e<this.length;++e)b.call(d,this.data[e],
e,this.data)&&f.push(this.data[e]);return f};a.prototype.forEach=function(a,d){for(var b=0;b<this.length;++b)a.call(d,this.data[b],b,this.data)};a.prototype.iterableForEach=function(){var a;return l(this,function(b){switch(b.label){case 0:a=0,b.label=1;case 1:return a<this.length?[4,this.data[a]]:[3,4];case 2:b.sent(),b.label=3;case 3:return++a,[3,1];case 4:return[2]}})};a.prototype.map=function(a,d){for(var b=Array(this.length),e=0;e<this.length;++e)b[e]=a.call(d,this.data[e],e,this.data);return b};
return a}()})},"esri/core/HeapSort":function(){define(["require","exports","./tsSupport/generatorHelper"],function(d,a,l){var f;(function(a){function d(a,b,e,c){for(var d=b,g=e>>>1,f=a[d-1];b<=g;){b=d<<1;b<e&&0>c(a[b-1],a[b])&&++b;var h=a[b-1];if(0>=c(h,f))break;a[d-1]=h;d=b}a[d-1]=f}function b(a,b){return a<b?-1:a>b?1:0}a.sort=function(a,f,e,c){void 0===f&&(f=0);void 0===e&&(e=a.length);void 0===c&&(c=b);for(var g=e>>>1;g>f;g--)d(a,g,e,c);for(var h=f+1,g=e-1;g>f;g--)e=a[f],a[f]=a[g],a[g]=e,d(a,h,
g,c)};a.iterableSort=function(a,f,e,c,h){var g,k,n;return l(this,function(m){switch(m.label){case 0:void 0===f&&(f=0),void 0===e&&(e=a.length),void 0===c&&(c=b),g=e>>>1,m.label=1;case 1:return g>f?h&&h()?[4]:[3,3]:[3,5];case 2:m.sent(),m.label=3;case 3:d(a,g,e,c),m.label=4;case 4:return g--,[3,1];case 5:k=f+1,g=e-1,m.label=6;case 6:return g>f?h&&h()?[4]:[3,8]:[3,10];case 7:m.sent(),m.label=8;case 8:n=a[f],a[f]=a[g],a[g]=n,d(a,k,g,c),m.label=9;case 9:return g--,[3,6];case 10:return[2]}})}})(f||(f=
{}));return f})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),function(d,a,l,f,h,k){function b(a,b,e,d,f){void 0===d&&(d=null);void 0===f&&(f=!1);if(null===d){var m=k.cacheKey(b,e);void 0!==c[m]?d=c[m]:(d=g(b,e,null),null===d&&(d=new k),c[m]=d)}return p._project(a,b,e instanceof h||!1===f?e:new h(e),d,f)}function g(a,b,c){void 0===c&&(c=null);a=p._getTransformation(a,b,c);return null!==a?k.fromGE(a):
null}Object.defineProperty(a,"__esModule",{value:!0});var p=null;a.isLoaded=function(){return!!p&&f.isLoaded()};a.isSupported=function(){return f.isSupported()};var e=null;a.load=function(){return e?e:e=l.create(function(a,b){var c=f.load();d(["./geometryEngine"],function(e){p=e;c.then(function(){p._enableProjection(f);a()},function(a){b(a)})})})};a.project=function(a,c,e){void 0===e&&(e=null);return a instanceof Array?0===a.length?[]:b(a,a[0].spatialReference,c,e):b([a],a.spatialReference,c,e)[0]};
var c={};a.projectMany=b;a.getTransformation=g;a.getTransformations=function(a,b,c){void 0===c&&(c=null);a=p._getTransformationBySuitability(a,b,c);if(null!==a){b=[];for(c=0;c<a.length;c++)b.push(k.fromGE(a[c]));return b}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","../core/has","../core/promiseUtils"],function(d,a,l,f,h){function k(b){function c(a,b,c){a[b]=c(a[b])}a._pe=b;n.init();m.init();q.init();y.init();x.init();a.PeGCSExtent=function(b){function c(){return null!==
b&&b.apply(this,arguments)||this}l(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var d=0,g=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];d<g.length;d++)b=g[d],c(b.prototype,"getName",function(a){return function(){return a.call(this,Array(n.PE_NAME_MAX))}});d=0;for(g=[a._pe.PeGeogtran,a._pe.PeProjcs];d<g.length;d++)b=g[d],c(b.prototype,"getParameters",function(b){return function(){for(var c=
Array(n.PE_PARM_MAX),e=b.call(this),d=0;d<c.length;d++){var g=a._pe.getValue(e,"*");c[d]=g?a._pe.wrapPointer(g,a._pe.PeParameter):null;e+=Int32Array.BYTES_PER_ELEMENT}return c}});c(a._pe.PeHorizon.prototype,"getCoord",function(a){return function(){var b=this.getSize();if(!b)return null;var c=[],d=a.call(this);e(c,b,d);return c}});c(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var e=null,d=b.call(this);if(!a._pe.compare(d,
a._pe.NULL)){var e=[d],g=this.getSteps();if(1<g)for(var d=a._pe.getPointer(d),f=1;f<g;f++)e.push(a._pe.wrapPointer(d+c*f,a._pe.PeGTlistExtendedGTs))}return e}});var f=a._pe._pe_getPeHorizonSize();b=function(b){return function(){var c=this._cache;c||(this._cache=c=new Map);if(c.has(b))return c.get(b);var e=null,d=b.call(this);if(!a._pe.compare(d,a._pe.NULL)){var e=[d],g=d.getNump();if(1<g)for(var d=a._pe.getPointer(d),h=1;h<g;h++)e.push(a._pe.wrapPointer(d+f*h,a._pe.PeHorizon))}c.set(b,e);return e}};
c(a._pe.PeProjcs.prototype,"horizonGcsGenerate",b);c(a._pe.PeProjcs.prototype,"horizonPcsGenerate",b);a._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=n.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var c=a._pe.getPointer(this),e=a._pe.ensureInt8(Array(n.PE_BUFFER_MAX));return a._pe.Pointer_stringify(a._pe._pe_object_to_string_ext(c,b,e))}}function b(b){if(b){var c=a._pe.getClass(b);c&&(c=a._pe.getCache(c))&&(b=a._pe.getPointer(b))&&delete c[b]}}function g(b,c){var e=[];c=Array(c);for(var d=
0;d<b;d++)e.push(a._pe.ensureInt8(c));return e}function p(a){var b;Array.isArray(a[0])?(b=[],a.forEach(function(a){b.push(a[0],a[1])})):b=a;return b}function e(b,c,e,d){void 0===d&&(d=!1);if(d)for(d=0;d<2*c;d++)b[d]=a._pe.getValue(e+d*Float64Array.BYTES_PER_ELEMENT,"double");else{var g=0===b.length;for(d=0;d<c;d++)g&&(b[d]=Array(2)),b[d][0]=a._pe.getValue(e,"double"),b[d][1]=a._pe.getValue(e+Float64Array.BYTES_PER_ELEMENT,"double"),e+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",
{value:!0});var c;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!f("esri-wasm")};a.load=function(){return c?c:c=h.create(function(a,b){d(["./support/pe-wasm"],function(c){c({locateFile:function(a){return d.toUrl("./support/"+a)},onAbort:function(a){b(Error(a))}}).then(function(b){k(b);a()})})})};(function(b){function c(b,c,d){a._pe.ensureCache.prepare();var g=p(d),f=d===g,g=a._pe.ensureFloat64(g);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),c,g))&&e(d,c,g,f);return b}
function d(a,b,c){return g(a,b,c,0)}function g(b,c,d,g){a._pe.ensureCache.prepare();var f=p(d),h=d===f,f=a._pe.ensureFloat64(f);(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),c,f,g))&&e(d,c,f,h);return b}b.geogToProj=c;b.projGeog=function(a,b,e,g){switch(g){case n.PE_TRANSFORM_P_TO_G:return d(a,b,e);case n.PE_TRANSFORM_G_TO_P:return c(a,b,e)}return 0};b.projToGeog=d;b.projToGeogCenter=g})(a.PeCSTransformations||(a.PeCSTransformations={}));var n;(function(b){b.init=function(){b.PE_BUFFER_MAX=
a._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;
b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;
b.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(n=
a.PeDefs||(a.PeDefs={}));(function(b){function c(b,c){var g=null,f=d[b];f||(f={},d[b]=f);f.hasOwnProperty(String(c))?g=f[c]:(b=a._pe.PeFactory.prototype.factoryByType(b,c),a._pe.compare(b,a._pe.NULL)||(g=b,f[c]=g));return g=e(g)}function e(b){if(b){var c=b.getType();switch(c){case n.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case n.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case n.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:c&n.PE_TYPE_UNIT&&
(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var d={},g={};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(a){return c(n.PE_TYPE_COORDSYS,a)};b.factoryByType=c;b.fromString=function(b,c){var d=null,f=g[b];f||(f={},g[b]=f);f.hasOwnProperty(c)?d=f[c]:(b=a._pe.PeFactory.prototype.fromString(b,c),a._pe.compare(b,a._pe.NULL)||(d=b,f[c]=d));return d=e(d)};b.geogcs=function(a){return c(n.PE_TYPE_GEOGCS,a)};b.geogtran=function(a){return c(n.PE_TYPE_GEOGTRAN,a)};b.getCode=
function(b){return a._pe.PeFactory.prototype.getCode(b)};b.projcs=function(a){return c(n.PE_TYPE_PROJCS,a)};b.unit=function(a){return c(n.PE_TYPE_UNIT,a)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;var m;(function(b){var c;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;c=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(b,e,d,g,f,h){var k=null,m=new a._pe.PeInteger(h);try{var n=a._pe.PeGTlistExtended.prototype.getGTlist(b,e,d,
g,f,m);if(h=m.val)if(k=[n],1<h){var l=a._pe.getPointer(n);for(b=1;b<h;b++)k.push(a._pe.wrapPointer(l+c*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(m)}return k}})(m=a.PeGTlistExtended||(a.PeGTlistExtended={}));(function(c){c.destroy=function(c){if(c&&c.length){for(var e=0;e<c.length;e++){var d=c[e];b(d);d.getEntries().forEach(function(a){b(a);a=a.getGeogtran();b(a);a.getParameters().forEach(b);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){b(a);var c=a.getDatum();b(c);b(c.getSpheroid());
b(a.getPrimem());b(a.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(c[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(b){b.geogToGeog=function(b,c,d,g,f){a._pe.ensureCache.prepare();var h=p(d),k=d===h,h=a._pe.ensureFloat64(h),m=0;g&&(m=a._pe.ensureFloat64(g));(b=a._pe._pe_geog_to_geog(a._pe.getPointer(b),c,h,m,f))&&e(d,c,h,k);return b}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(b){function c(b,c,e,d,f,h){a._pe.ensureCache.prepare();var k,m;
switch(b){case "dd":k=a._pe._pe_geog_to_dd;m=n.PE_DD_MAX;break;case "ddm":k=a._pe._pe_geog_to_ddm;m=n.PE_DDM_MAX;break;case "dms":k=a._pe._pe_geog_to_dms,m=n.PE_DMS_MAX}b=0;c&&(b=a._pe.getPointer(c));c=p(d);c=a._pe.ensureFloat64(c);m=g(e,m);d=a._pe.ensureInt32(m);if(f=k(b,e,c,f,d))for(k=0;k<e;k++)h[k]=a._pe.Pointer_stringify(m[k]);return f}function d(b,c,d,g,f){a._pe.ensureCache.prepare();var h;switch(b){case "dd":h=a._pe._pe_dd_to_geog;break;case "ddm":h=a._pe._pe_ddm_to_geog;break;case "dms":h=
a._pe._pe_dms_to_geog}b=0;c&&(b=a._pe.getPointer(c));c=g.map(function(b){return a._pe.ensureString(b)});g=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*d));(h=h(b,d,g,c))&&e(f,d,c);return h}b.geog_to_dms=function(a,b,e,d,g){return c("dms",a,b,e,d,g)};b.dms_to_geog=function(a,b,c,e){return d("dms",a,b,c,e)};b.geog_to_ddm=function(a,b,e,d,g){return c("ddm",a,b,e,d,g)};b.ddm_to_geog=function(a,b,c,e){return d("ddm",a,b,c,e)};b.geog_to_dd=function(a,b,e,d,g){return c("dd",a,b,e,d,g)};b.dd_to_geog=
function(a,b,c,e){return d("dd",a,b,c,e)}})(a.PeNotationDms||(a.PeNotationDms={}));var q;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=
function(b,c,e,d,f,h,k){a._pe.ensureCache.prepare();var m=0;b&&(m=a._pe.getPointer(b));b=p(e);e=a._pe.ensureFloat64(b);b=g(c,n.PE_MGRS_MAX);var l=a._pe.ensureInt32(b);if(d=a._pe._pe_geog_to_mgrs_extended(m,c,e,d,f,h,l))for(f=0;f<c;f++)k[f]=a._pe.Pointer_stringify(b[f]);return d};b.mgrs_to_geog_extended=function(b,c,d,g,f){a._pe.ensureCache.prepare();var h=0;b&&(h=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(g=a._pe._pe_mgrs_to_geog_extended(h,
c,d,g,b))&&e(f,c,b);return g}})(q=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(b){b.geog_to_usng=function(b,c,e,d,f,h,k){a._pe.ensureCache.prepare();var m=0;b&&(m=a._pe.getPointer(b));b=p(e);e=a._pe.ensureFloat64(b);b=g(c,n.PE_MGRS_MAX);var l=a._pe.ensureInt32(b);if(d=a._pe._pe_geog_to_usng(m,c,e,d,f,h,l))for(f=0;f<c;f++)k[f]=a._pe.Pointer_stringify(b[f]);return d};b.usng_to_geog=function(b,c,d,g){a._pe.ensureCache.prepare();var f=0;b&&(f=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});
d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(f=a._pe._pe_usng_to_geog(f,c,d,b))&&e(g,c,b);return f}})(a.PeNotationUsng||(a.PeNotationUsng={}));var y;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(b,c,e,d,f){a._pe.ensureCache.prepare();var h=0;b&&(h=a._pe.getPointer(b));b=p(e);
e=a._pe.ensureFloat64(b);b=g(c,n.PE_UTM_MAX);var k=a._pe.ensureInt32(b);if(d=a._pe._pe_geog_to_utm(h,c,e,d,k))for(h=0;h<c;h++)f[h]=a._pe.Pointer_stringify(b[h]);return d};b.utm_to_geog=function(b,c,d,g,f){a._pe.ensureCache.prepare();var h=0;b&&(h=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(g=a._pe._pe_utm_to_geog(h,c,d,g,b))&&e(f,c,b);return g}})(y=a.PeNotationUtm||(a.PeNotationUtm={}));var x;(function(b){var c=
new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(e,d){void 0===d&&(d=b.PE_PCSINFO_OPTION_DOMAIN);var g,f;c.has(e)&&(f=c.get(e),f[d]&&(g=f[d]));g||(g=a._pe.PePCSInfo.prototype.generate(e,d),f||(f=[],c.set(e,f)),f[d]=g);
return g}})(x=a.PePCSInfo||(a.PePCSInfo={}));(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=k})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(d,a,l){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var d=0;for(a=a.steps;d<a.length;d++){var b=a[d];b instanceof
l?this.steps.push(b):this.steps.push(new l({wkid:b.wkid,wkt:b.wkt,isInverse:b.isInverse}))}}}a.cacheKey=function(a,d){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==d.wkid&&null!==d.wkid?d.wkid.toString():"-1",void 0!==d.wkt&&null!==d.wkt?d.wkt.toString():""].join()};a.fromGE=function(d){var f=new a,b="",g=0;for(d=d.steps;g<d.length;g++){var h=l.fromGE(d[g]);f.steps.push(h);b+=h.uid.toString()+","}f._cached_projection={};f._gtlistentry=
null;f._chain=b;return f};a.prototype.getInverse=function(){var d=new a;d.steps=[];for(var f=this.steps.length-1;0<=f;f--)d.steps.push(this.steps[f].getInverse());return d};a.prototype.getGTListEntry=function(){for(var a="",d=0,b=this.steps;d<b.length;d++)a+=b[d].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(d,f,b){this._cached_projection[a.cacheKey(d,f)]=b};a.prototype.getCachedGeTransformation=
function(d,f){for(var b="",g=0,h=this.steps;g<h.length;g++)b+=h[g].uid.toString()+",";b!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=b);d=this._cached_projection[a.cacheKey(d,f)];return void 0===d?null:d};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(d,a){var l=0;return function(){function a(a){void 0===a&&(a=null);this.uid=l++;a?(this._wkt=void 0!==a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:
-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(d){var f=new a;f._wkt=d.wkt;f._wkid=d.wkid;f._isInverse=d.isInverse;return f};Object.defineProperty(a.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=l++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=a;this.uid=l++},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=l++},enumerable:!0,configurable:!0});a.prototype.getInverse=function(){var d=new a;d._wkt=this.wkt;d._wkid=this._wkid;d._isInverse=!this.isInverse;return d};return a}()})},"esri/geometry/support/normalizeUtils":function(){define("require exports ../../config ../../core/Error ../../core/Logger ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/GeometryService".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n){function m(a){return"polygon"===a.type?a.rings:a.paths}function q(a,b){return Math.ceil((a-b)/(2*b))}function y(a,b){for(var c=0,e=m(a);c<e.length;c++)for(var d=0,g=e[c];d<g.length;d++)g[d][0]+=b;return a}function x(a){for(var b=[],c=0,e=0,d=0;d<a.length;d++){for(var g=a[d],f=null,h=0;h<g.length;h++)f=g[h],b.push(f),0===h?e=c=f[0]:(c=Math.min(c,f[0]),e=Math.max(e,f[0]));f&&b.push([(c+e)/2,0])}return b}function t(a,c){if(!(a instanceof g||a instanceof b))throw w.error("straightLineDensify: the input geometry is neither polyline nor polygon"),
new f("straightLineDensify: the input geometry is neither polyline nor polygon");for(var e=[],d=0,h=m(a);d<h.length;d++){var k=h[d],n=[];e.push(n);n.push([k[0][0],k[0][1]]);for(var l=0;l<k.length-1;l++){var p=k[l][0],q=k[l][1],t=k[l+1][0],u=k[l+1][1],y=Math.sqrt((t-p)*(t-p)+(u-q)*(u-q)),x=(u-q)/y,z=(t-p)/y,D=y/c;if(1<D){for(var A=1;A<=D-1;A++){var B=A*c;n.push([z*B+p,x*B+q])}y=(y+Math.floor(D-1)*c)/2;n.push([z*y+p,x*y+q])}n.push([t,u])}}return"polygon"===a.type?new b({rings:e,spatialReference:a.spatialReference}):
new g({paths:e,spatialReference:a.spatialReference})}function u(a,b,e){b&&(a=t(a,1E6),a=c.webMercatorToGeographic(a,!0));e&&(a=y(a,e));return a}function z(a,b,c){if(Array.isArray(a)){var e=a[0];if(e>b){var d=q(e,b);a[0]=e+-2*d*b}else e<c&&(d=q(e,c),a[0]=e+-2*d*c)}else e=a.x,e>b?(d=q(e,b),a=a.clone().offset(-2*d*b,0)):e<c&&(d=q(e,c),a=a.clone().offset(-2*d*c,0));return a}function D(a,b){for(var c=-1,e=function(e){var d=b.cutIndexes[e],g=b.geometries[e],f=m(g);e=function(a){var b=f[a];b.some(function(c){if(!(180>
c[0])){for(var e=c=0;e<b.length;e++){var d=b[e][0];c=d>c?d:c}c=Number(c.toFixed(9));c=-360*q(c,180);for(e=0;e<b.length;e++)d=g.getPoint(a,e),g.setPoint(a,e,d.clone().offset(c,0))}return!0})};for(var h=0;h<f.length;h++)e(h);if(d===c)if("polygon"===a[0].type)for(e=0,h=m(g);e<h.length;e++)a[d]=a[d].addRing(h[e]);else{if("polyline"===a[0].type)for(e=0,h=m(g);e<h.length;e++)a[d]=a[d].addPath(h[e])}else c=d,a[d]=g},d=0;d<b.cutIndexes.length;d++)e(d);return a}function B(a,d,f){if(!Array.isArray(a))return B([a],
d);d||(E||(E=new n({url:l.geometryServiceUrl})),d=E);for(var h,m,p,t,x,w,F,A=0,H=[],M=[],fa=0;fa<a.length;fa++){var K=a[fa];if(K)if(h||(h=K.spatialReference,m=e.getInfo(h),w=(p=h.isWebMercator)?102100:4326,t=C[w].maxX,x=C[w].minX,F=C[w].plus180Line,w=C[w].minus180Line),m)if("mesh"===K.type)M.push(K);else if("point"===K.type)M.push(z(K.clone(),t,x));else if("multipoint"===K.type)K=K.clone(),K.points=K.points.map(function(a){return z(a,t,x)}),M.push(K);else if("extent"===K.type){var ca=K.clone(),K=
ca._normalize(!1,!1,m);M.push(K.rings?new b(K):K)}else if(K.extent){var ca=K.extent,ba=2*q(ca.xmin,x)*t,K=0===ba?K.clone():y(K.clone(),ba);ca.offset(ba,0);ca.intersects(F)&&ca.xmax!==t?(A=ca.xmax>A?ca.xmax:A,K=u(K,p),H.push(K),M.push("cut")):ca.intersects(w)&&ca.xmin!==x?(A=2*ca.xmax*t>A?2*ca.xmax*t:A,K=u(K,p,360),H.push(K),M.push("cut")):M.push(K)}else M.push(K.clone());else M.push(K);else M.push(K)}h=q(A,t);m=-90;F=h;for(A=new g;0<h;)fa=-180+360*h,A.addPath([[fa,m],[fa,-1*m]]),m*=-1,h--;if(0<H.length&&
0<F)return d.cut(H,A,f).then(function(a){return D(H,a)}).then(function(b){for(var e=[],g=[],h=0;h<M.length;h++){var k=M[h];if("cut"!==k)g.push(k);else{var k=b.shift(),m=a[h];"polygon"===m.type&&m.rings&&1<m.rings.length&&k.rings.length>=m.rings.length?(e.push(k),g.push("simplify")):g.push(p?c.geographicToWebMercator(k):k)}}return e.length?d.simplify(e,f).then(function(a){for(var b=[],e=0;e<g.length;e++){var d=g[e];"simplify"!==d?b.push(d):b.push(p?c.geographicToWebMercator(a.shift()):a.shift())}return b}):
g});h=[];for(m=0;m<M.length;m++)F=M[m],"cut"!==F?h.push(F):(F=H.shift(),h.push(!0===p?c.geographicToWebMercator(F):F));return k.resolve(h)}Object.defineProperty(a,"__esModule",{value:!0});var w=h.getLogger("esri.geometry.support.normalizeUtils"),C={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new g({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:p.WebMercator}),minus180Line:new g({paths:[[[-2.0037508342788905E7,
-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:p.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new g({paths:[[[180,-180],[180,180]]],spatialReference:p.WebMercator}),minus180Line:new g({paths:[[[-180,-180],[-180,180]]],spatialReference:p.WebMercator})}};a.straightLineDensify=t;var E;a.normalizeCentralMeridian=B;a.getDenormalizedExtent=function(a){var b;if(!a)return null;var c=a.extent;if(!c)return null;var d=a.spatialReference&&e.getInfo(a.spatialReference);
if(!d)return c;var d=d.valid,g=d[0],d=d[1],f=c.width,h=c.xmin;b=c.xmax;b=[b,h];h=b[0];b=b[1];if("extent"===a.type||0===f||f<=d||f>2*d||h<g||b>d)return c;var k;switch(a.type){case "polygon":if(1<a.rings.length)k=x(a.rings);else return c;break;case "polyline":if(1<a.paths.length)k=x(a.paths);else return c;break;case "multipoint":k=a.points}a=c.clone();for(g=0;g<k.length;g++){var m=k[g][0];0>m?(m+=d,b=Math.max(m,b)):(m-=d,h=Math.min(m,h))}a.xmin=h;a.xmax=b;return a.width<f?(a.xmin-=d,a.xmax-=d,a):c};
a.normalizeMapX=function(a,b){if(b=e.getInfo(b)){var c=b.valid;b=c[0];var c=c[1],d=c-b;if(a<b)for(;a<b;)a+=d;if(a>c)for(;a>c;)a-=d}return a}})},"esri/tasks/GeometryService":function(){define("../core/lang ../core/kebabDictionary ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters".split(" "),function(d,a,l,f,h,k,b,g,p,e,c){var n=a({MGRS:"mgrs",USNG:"usng",UTM:"utm",
GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),m=l.ensureType(c);a=e.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){a={query:d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,c,e){var g=a[0].spatialReference;a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(g.toJSON()),
polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(c).geometries)})};if(this.requestOptions||e)a=d.mixin({},this.requestOptions,e,a);return p(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new b({spatialReference:g,rings:a.rings})})})},buffer:function(a,c){var e=d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),g=a.outSpatialReference||a.geometries[0].spatialReference;a={query:e};
if(this.requestOptions||c)a=d.mixin({},this.requestOptions,c,a);return p(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new b({spatialReference:g,rings:a.rings})})})},cut:function(a,b,c){var e=a[0].spatialReference,f=a.map(function(a){return a.toJSON()});a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),target:JSON.stringify({geometryType:g.getJsonType(a[0]),geometries:f}),cutter:JSON.stringify(b.toJSON())})};if(this.requestOptions||
c)a=d.mixin({},this.requestOptions,c,a);return p(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",e)})}})},convexHull:function(a,b){var c=a[0].spatialReference;a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+
"/convexHull",a).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",c)})},densify:function(a,b){var c=d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",e)})})},difference:function(a,b,c){var e=a[0].spatialReference;
a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:g.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||c)a=d.mixin({},this.requestOptions,c,a);return p(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",e)})})},distance:function(a,b){a={query:d.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON())};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,b){var c={};c.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;c.strings=JSON.stringify(a.strings);c.conversionType=n.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;a={query:d.mixin({},this.parsedUrl.query,{f:"json"},c)};if(this.requestOptions||b)a=d.mixin({},
this.requestOptions,b,a);return p(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var c=d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",e)})})},intersect:function(a,
b,c){var e=a[0].spatialReference;a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:g.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||c)a=d.mixin({},this.requestOptions,c,a);return p(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",e)})})},lengths:function(a,b){a={query:d.mixin({},
this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},labelPoints:function(a,b){var c=a.map(function(a){return a.toJSON()}),e=a[0].spatialReference;a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:e.wkid?e.wkid:JSON.stringify(e.toJSON()),polygons:JSON.stringify(c)})};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/labelPoints",
a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return g.fromJSON(a).set("spatialReference",e)})})},offset:function(a,b){var c=d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",e)})})},project:function(a,b){a=m(a);var c=
d.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),e=a.outSpatialReference,f=g.getJsonType(a.geometries[0]),h=this._decodeGeometries;a={query:c};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/project",a).then(function(a){return h(a.data,f,e)})},relation:function(a,b){a={query:d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},
reshape:function(a,b,c){var e=a.spatialReference;a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),target:JSON.stringify({geometryType:g.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())})};if(this.requestOptions||c)a=d.mixin({},this.requestOptions,c,a);return p(this.parsedUrl.path+"/reshape",a).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",e)})},simplify:function(a,b){var c=a[0].spatialReference,e=d.mixin({},this.parsedUrl.query,
{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),f=g.getJsonType(a[0]),h=this._decodeGeometries;a={query:e};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/simplify",a).then(function(a){return h(a.data,f,c)})},toGeoCoordinateString:function(a,b){var c={};c.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;c.coordinates=JSON.stringify(a.coordinates);c.conversionType=n.toJSON(a.conversionType||
"mgrs");c.conversionMode=a.conversionMode;c.numOfDigits=a.numOfDigits;c.rounding=a.rounding;c.addSpaces=a.addSpaces;a={query:d.mixin({},this.parsedUrl.query,{f:"json"},c)};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var c=d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.sr;a={query:c};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,
a);return p(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new k({spatialReference:e,paths:a.paths})})})},union:function(a,b){var c=a[0].spatialReference;a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=d.mixin({},this.requestOptions,b,a);return p(this.parsedUrl.path+"/union",a).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",
c)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],c,e=a.length;for(c=0;c<e;c++)b.push(a[c].toJSON());return{geometryType:g.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,c){var e=g.getGeometryType(b);a=a.geometries;var f=[],
h={spatialReference:c.toJSON()},k=d.mixin;a.forEach(function(a,b){f[b]=new e(k(a,h))});return f},_toProjectGeometry:function(a){var c=a.spatialReference.toJSON();return a instanceof f?new b({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:c}):new k({paths:[[].concat(a.points)],spatialReference:c})},_fromProjectedGeometry:function(a,b,c){return"extent"===b?(a=a.rings[0],new f(a[0][0],a[0][1],a[2][0],a[2][1],c)):new h({points:a.paths[0],spatialReference:c.toJSON()})}});
d.mixin(a,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,
UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,
UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,
UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return a})},"esri/tasks/Task":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/urlUtils ../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k,b,g,p){return function(a){function b(b){b=a.call(this)||this;b.requestOptions=null;b.url=null;return b}l(b,a);b.prototype.normalizeCtorArgs=function(a,b){return"string"!==typeof a?a:k({url:a},b)};Object.defineProperty(b.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0});b.prototype._parseUrl=function(a){return a?g.urlToObject(a):null};b.prototype._encode=function(a,b,c){var e={},d;for(d in a)if("declaredClass"!==d){var g=a[d];
if(null!=g&&"function"!==typeof g)if(Array.isArray(g)){e[d]=[];for(var f=0;f<g.length;f++)e[d][f]=this._encode(g[f])}else"object"===typeof g?g.toJSON&&(g=g.toJSON(c&&c[d]),e[d]=b?g:JSON.stringify(g)):e[d]=g}return e};f([p.property({readOnly:!0,dependsOn:["url"]})],b.prototype,"parsedUrl",null);f([p.property()],b.prototype,"requestOptions",void 0);f([p.property({type:String})],b.prototype,"url",void 0);return b=f([p.subclass("esri.tasks.Task")],b)}(p.declared(b))})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(d,a,l,f,h,k,b,g){var p=k.getLogger("esri.tasks.support.ProjectParameters");return function(a){function c(b){b=a.call(this)||this;b.geometries=null;b.outSpatialReference=null;b.transformation=null;b.transformForward=null;return b}l(c,a);Object.defineProperty(c.prototype,"outSR",{get:function(){p.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){p.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});c.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:g.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(c.transformForward=this.transformForward);return c};f([b.property()],c.prototype,"geometries",void 0);f([b.property({json:{read:{source:"outSR"}}})],c.prototype,"outSpatialReference",void 0);f([b.property({json:{read:!1}})],c.prototype,"outSR",null);f([b.property()],c.prototype,"transformation",void 0);f([b.property()],c.prototype,"transformForward",void 0);return c=f([b.subclass("esri.tasks.support.ProjectParameters")],c)}(b.declared(h))})},"esri/layers/graphics/data/attributeSupport":function(){define("require exports @dojo/framework/shim/Set ../../../core/Error ../../../core/ItemCache ../../../core/sql/WhereClause".split(" "),
function(d,a,l,f,h,k){function b(b){if(!b)return null;var c=a.invalidClauseCache.get(b);if(void 0!==c)return c;c=a.whereClausesCache.get(b);if(void 0!==c)return c;c=k.create(b);a.whereClausesCache.put(b,c);return c}function g(a,e,d,h){void 0===h&&(h=!0);for(var c=[],k=0;k<e.length;k++){var m=e[k];if("*"!==m&&!a.has(m))if(h){var l=p(m);try{var n=b(l);if(!n.isStandardized())throw new f("feature-store:unsupported-query","expression is not standard",{clause:n});g(a,n.getFields(),"expression contains missing fields")}catch(D){if((l=
D&&D.details)&&l.clause)throw D;l&&l.missingFields?Array.prototype.push.apply(c,l.missingFields):c.push(m)}}else c.push(m)}if(c.length)throw new f("feature-store:unsupported-query",d,{missingFields:c});}function p(a){return a.split(" as ")[0]}Object.defineProperty(a,"__esModule",{value:!0});a.invalidClauseCache=new h(500);a.whereClausesCache=new h(50);var e=new l.default("esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
a.validateWhere=function(b,e){if(!e)return!0;var c;try{c=k.create(e),a.whereClausesCache.put(e,c)}catch(q){throw a.invalidClauseCache.put(e,null),new f("feature-store:unsupported-query","invalid SQL expression",{where:e});}if(!c.isStandardized())throw new f("feature-store:unsupported-query","where clause is not standard",{where:e});e=c.getFields();g(b,e,"where clause contains missing fields");return!0};a.validateHaving=function(b,e,d){if(!e)return!0;var c;try{c=k.create(e),a.whereClausesCache.put(e,
c)}catch(x){throw a.invalidClauseCache.put(e,null),new f("feature-store:unsupported-query","invalid SQL expression",{having:e});}if(!c.isAggregate())throw new f("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:e});var h=c.getFields();g(b,h,"having contains missing fields");if(!c.getExpressions().every(function(a){var c=a.aggregateType;a=a.field;var e=b.has(a)&&b.get(a).name;return d.some(function(a){var d=a.statisticType;a=a.onStatisticField.toLowerCase().trim();
return(b.has(a)&&b.get(a).name)===e&&d.toLowerCase().trim()===c})}))throw new f("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:e});return!0};a.getWhereClause=b;a.validateFields=g;a.getExpressionFromFieldName=p;a.getAliasFromFieldName=function(a){return a.split(" as ")[1]};a.hasInvalidFieldType=function(a,d){var c=!1;-1!==b(a).getFields().indexOf(a)&&(a=d.get(a),c=!e.has(a.type));return c}})},"esri/core/ItemCache":function(){define(["require","exports",
"./MemCache"],function(d,a,l){return function(){function a(a,d){this._storage=new l.Storage;this._storage.maxSize=a;d&&this._storage.registerRemoveFunc("",d)}a.prototype.put=function(a,d){this._storage.put(a,d,1)};a.prototype.pop=function(a){return this._storage.pop(a)};a.prototype.get=function(a){return this._storage.get(a)};a.prototype.clear=function(){this._storage.clearAll()};a.prototype.destroy=function(){this._storage.clearAll()};return a}()})},"esri/core/sql/WhereClause":function(){define("require exports @dojo/framework/shim/array @dojo/framework/shim/Map ../../moment ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),
function(d,a,l,f,h,k,b,g){function p(a){return Array.isArray(a)?a:[a]}function e(a){return null!==a?!0!==a:null}function c(a,b){if(null==a)return null;for(var c=!1,e=0;e<b.length;e++){var d=b[e];if(null==d)c=null;else if(a===d){c=!0;break}}return c}function n(a,b,c){if(null==a)return null;for(var e="",d=0,g=0;g<b.length;g++){var f=b.charAt(g);switch(d){case 0:f===c?d=1:e=0<="-[]/{}()*+?.\\^$|".indexOf(f)?e+("\\"+f):"%"===f?e+".*":"_"===f?e+".":e+f;break;case 1:e=0<="-[]/{}()*+?.\\^$|".indexOf(f)?
e+("\\"+f):e+f,d=0}}return(new RegExp("^"+e+"$")).test(a)}function m(a){return a instanceof Date?a.valueOf():a}function q(a,b,c){if(null==b||null==c)return null;b=m(b);c=m(c);switch(a){case "\x3c\x3e":return b!==c;case "\x3d":return b===c;case "\x3e":return b>c;case "\x3c":return b<c;case "\x3e\x3d":return b>=c;case "\x3c\x3d":return b<=c}}function y(a){for(var b=[],c={},e=0;e<a.length;e++){var d=a[e],g=d.toLowerCase();void 0===c[g]&&(b.push(d),c[g]=1)}return b}return function(){function a(){this._hasAggregateFunctions=
this._hasStandardizedFunctions=this.parameters=this.parseTree=null}a.create=function(c){var e=new a;e.parseTree=g.WhereGrammar.parse(c);var d=!0,f=!0;e.visitAll(e.parseTree,function(a){if("function"===a.type){var c=a.name;a=a.args.value.length;d&&(d=b.isStandardized(c,a));f&&(f=k.isAggregate(c,a))}});e._hasStandardizedFunctions=d;e._hasAggregateFunctions=f;return e};a.prototype.isStandardized=function(){return this._hasStandardizedFunctions};a.prototype.isAggregate=function(){return this._hasAggregateFunctions};
a.prototype.setVariablesDictionary=function(a){this.parameters=a};a.prototype.testFeature=function(a){return!!this.evaluateNode(this.parseTree,a)};a.prototype.testSet=function(a){var b=this,c=new f.default;this.visitAll(this.parseTree,function(a){"column_ref"!==a.type||c.has(a.column)||c.set(a.column,a)});for(var e={},d=function(a){c.forEach(function(c,d){c=b.featureValue(a,d,c);e[d]?e[d].push(c):e[d]=[c]})},g=0;g<a.length;g++)d(a[g]);return!!this.evaluateNode(this.parseTree,{attributes:e})};a.prototype.calculateValue=
function(a){return this.evaluateNode(this.parseTree,a)};a.prototype.getFunctions=function(){var a=[];this.visitAll(this.parseTree,function(b){"function"===b.type&&a.push(b.name.toLowerCase())});return y(a)};a.prototype.getExpressions=function(){var a=new f.default;this.visitAll(this.parseTree,function(b){if("function"===b.type){var c=b.name.toLowerCase();b=b.args.value[0];if("column_ref"===b.type){b=b.column;var e=c+"-"+b;a.has(e)||a.set(e,{aggregateType:c,field:b})}}});return l.from(a.values())};
a.prototype.getFields=function(){var a=[];this.visitAll(this.parseTree,function(b){"column_ref"===b.type&&a.push(b.column)});return y(a)};a.prototype.getVariables=function(){var a=[];this.visitAll(this.parseTree,function(b){"param"===b.type&&a.push(b.value.toLowerCase())});return y(a)};a.prototype.featureValue=function(a,b,c){a=a&&"object"===typeof a.attributes?a.attributes:a;var e=a[b];if(void 0!==e)return e;for(var d in a)if(b.toLowerCase()===d.toLowerCase())return c.column=d,a[d];return null};
a.prototype.visitAll=function(a,b){if(null!=a)switch(b(a),a.type){case "when_clause":this.visitAll(a.operand,b);this.visitAll(a.value,b);break;case "case_expression":for(var c=0,e=a.clauses;c<e.length;c++){var d=e[c];this.visitAll(d,b)}"simple"===a.format&&this.visitAll(a.operand,b);null!==a.else&&this.visitAll(a.else,b);break;case "expr_list":c=0;for(a=a.value;c<a.length;c++)d=a[c],this.visitAll(d,b);break;case "unary_expr":this.visitAll(a.expr,b);break;case "binary_expr":this.visitAll(a.left,b);
this.visitAll(a.right,b);break;case "function":this.visitAll(a.args,b)}};a.prototype.evaluateNode=function(a,d){switch(a.type){case "case_expression":if("simple"===a.format)for(var g=m(this.evaluateNode(a.operand,d)),f=0;f<a.clauses.length;f++){if(g===m(this.evaluateNode(a.clauses[f].operand,d)))return this.evaluateNode(a.clauses[f].value,d)}else for(f=0;f<a.clauses.length;f++)if(!0===this.evaluateNode(a.clauses[f].operand,d))return this.evaluateNode(a.clauses[f].value,d);return null!==a.else?this.evaluateNode(a.else,
d):null;case "param":return this.parameters[a.value.toLowerCase()];case "expr_list":g=[];f=0;for(a=a.value;f<a.length;f++){var l=a[f];g.push(this.evaluateNode(l,d))}return g;case "unary_expr":return e(this.evaluateNode(a.expr,d));case "binary_expr":switch(a.operator){case "AND":return g=this.evaluateNode(a.left,d),d=this.evaluateNode(a.right,d),null!=g&&null!=d?!0===g&&!0===d:!1===g||!1===d?!1:null;case "OR":return g=this.evaluateNode(a.left,d),d=this.evaluateNode(a.right,d),null!=g&&null!=d?!0===
g||!0===d:!0===g||!0===d?!0:null;case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(a.left,d);case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(a.left,d);case "IN":return g=p(this.evaluateNode(a.right,d)),c(this.evaluateNode(a.left,d),g);case "NOT IN":return g=p(this.evaluateNode(a.right,d)),e(c(this.evaluateNode(a.left,d),g));case "BETWEEN":return g=this.evaluateNode(a.left,d),d=this.evaluateNode(a.right,
d),null==g||null==d[0]||null==d[1]?null:g>=d[0]&&g<=d[1];case "NOTBETWEEN":return g=this.evaluateNode(a.left,d),d=this.evaluateNode(a.right,d),null==g||null==d[0]||null==d[1]?null:g<d[0]||g>d[1];case "LIKE":return n(this.evaluateNode(a.left,d),this.evaluateNode(a.right,d),a.escape);case "NOT LIKE":return e(n(this.evaluateNode(a.left,d),this.evaluateNode(a.right,d),a.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return q(a.operator,this.evaluateNode(a.left,
d),this.evaluateNode(a.right,d));case "*":return this.evaluateNode(a.left,d)*this.evaluateNode(a.right,d);case "-":return this.evaluateNode(a.left,d)-this.evaluateNode(a.right,d);case "+":return this.evaluateNode(a.left,d)+this.evaluateNode(a.right,d);case "/":return this.evaluateNode(a.left,d)/this.evaluateNode(a.right,d)}throw Error("Not Supported Operator "+a.operator);case "null":case "bool":case "string":case "number":return a.value;case "date":return h(a.value,["YYYY-M-D"]).toDate();case "timestamp":return h(a.value,
["YYYY-M-D H:m:s","YYYY-M-D H:mZ","YYYY-M-D H:m:sZ","YYYY-M-D H:m","YYYY-m-d"]).toDate();case "column_ref":return"CURRENT_DATE"===a.column.toUpperCase()?(l=new Date,l.setHours(0,0,0,0),l):"CURRENT_TIMESTAMP"===a.column.toUpperCase()?new Date:this.featureValue(d,a.column,a);case "function":return d=this.evaluateNode(a.args,d),this.isAggregate()?k.aggregateFunction(a.name,d):b.evaluateFunction(a.name,d)}throw Error("Unsupported sql syntax "+a.type);};return a}()})},"esri/core/sql/AggregateFunctions":function(){define(["require",
"exports"],function(d,a){function l(a){for(var b=0,d=0;d<a.length;d++)b+=a[d];return b/a.length}function f(a){for(var b=l(a),d=a.length,f=0,e=0;e<a.length;e++)f+=Math.pow(a[e]-b,2);return 1<d?f/(d-1):0}Object.defineProperty(a,"__esModule",{value:!0});a.aggregateFunction=function(a,b){var d=h[a.toLowerCase()];if(null==d)throw Error("Function Not Recognised");if(b.length<d.minParams||b.length>d.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return d.evaluate(b)};a.isAggregate=
function(a,b){a=h[a.toLowerCase()];return null!=a&&b>=a.minParams&&b<=a.maxParams};var h={min:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.min.apply(Math,a[0])}},max:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.max.apply(Math,a[0])}},avg:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:l(a[0])}},sum:{minParams:1,maxParams:1,evaluate:function(a){if(null==a[0])a=null;else{a=a[0];for(var b=0,d=0;d<a.length;d++)b+=a[d];a=b}return a}},
stddev:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.sqrt(f(a[0]))}},count:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].length}},var:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:f(a[0])}}}})},"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","dojo/regexp"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.evaluateFunction=function(a,d){var b=f[a.toLowerCase()];if(null==b)throw Error("Function Not Recognised");
if(d.length<b.minParams||d.length>b.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return b.evaluate(d)};a.isStandardized=function(a,d){a=f[a.toLowerCase()];return null!=a&&d>=a.minParams&&d<=a.maxParams};var f={extract:{minParams:2,maxParams:2,evaluate:function(a){var d=a[0];a=a[1];if(null==a)return null;if(a instanceof Date)switch(d.toUpperCase()){case "SECOND":return a.getSeconds();case "MINUTE":return a.getMinutes();case "HOUR":return a.getHours();case "DAY":return a.getDate();
case "MONTH":return a.getMonth()+1;case "YEAR":return a.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(a){if(2===a.length){var d=a[0],b=a[1];return null==d||null==b?null:d.toString().substring(b-1)}if(3===a.length)return d=a[0],b=a[1],a=a[2],null==d||null==b||null==a?null:0>=a?"":d.toString().substring(b-1,b+a-1)}},position:{minParams:2,maxParams:2,evaluate:function(a){var d=a[0];a=a[1];return null==d||null==a?null:a.indexOf(d)+
1}},trim:{minParams:2,maxParams:3,evaluate:function(a){var d=3===a.length,b=d?a[1]:" ",d=d?a[2]:a[1];if(null==b||null==d)return null;b="("+l.escapeString(b)+")";switch(a[0]){case "BOTH":return d.replace(new RegExp("^"+b+"*|"+b+"*$","g"),"");case "LEADING":return d.replace(new RegExp("^"+b+"*","g"),"");case "TRAILING":return d.replace(new RegExp(b+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.abs(a[0])}},
ceiling:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.ceil(a[0])}},floor:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.floor(a[0])}},log:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])}},log10:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.sin(a[0])}},cos:{minParams:1,maxParams:1,
evaluate:function(a){return null==a[0]?null:Math.cos(a[0])}},tan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.tan(a[0])}},asin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.asin(a[0])}},acos:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.acos(a[0])}},atan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.atan(a[0])}},sign:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:
0<a[0]?1:0>a[1]?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:Math.pow(a[0],a[1])}},mod:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:a[0]%a[1]}},round:{minParams:1,maxParams:2,evaluate:function(a){var d=a[0];a=2===a.length?Math.pow(10,a[1]):1;return null==d?null:Math.round(d*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:function(a){return null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))}},
char_length:{minParams:1,maxParams:1,evaluate:function(a){return"string"===typeof a[0]||a[0]instanceof String?a[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(a){for(var d="",b=0;b<a.length;b++){if(null==a[b])return null;d+=a[b].toString()}return d}},lower:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toUpperCase()}}}})},"esri/core/sql/WhereGrammar":function(){define(["require",
"exports","./sql92grammar"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){}a.parse=function(a){return l.parse(a)};return a}();a.WhereGrammar=d})},"esri/core/sql/sql92grammar":function(){define([],function(){function d(a,l,f,h){this.message=a;this.expected=l;this.found=f;this.location=h;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,d)}(function(a,d){function f(){this.constructor=a}f.prototype=d.prototype;
a.prototype=new f})(d,Error);d.buildMessage=function(a,d){function f(a){return a.charCodeAt(0).toString(16).toUpperCase()}function h(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+f(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+f(a)})}function k(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+f(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+f(a)})}var b={literal:function(a){return'"'+h(a.text)+'"'},"class":function(a){var b="",e;for(e=0;e<a.parts.length;e++)b+=a.parts[e]instanceof Array?k(a.parts[e][0])+"-"+k(a.parts[e][1]):k(a.parts[e]);return"["+(a.inverted?"^":"")+b+"]"},any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};
return"Expected "+function(a){var d=Array(a.length),e;for(e=0;e<a.length;e++){var c=e,g;g=a[e];g=b[g.type](g);d[c]=g}d.sort();if(0<d.length){for(a=e=1;e<d.length;e++)d[e-1]!==d[e]&&(d[a]=d[e],a++);d.length=a}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}(a)+" but "+(d?'"'+h(d)+'"':"end of input")+" found."};return{SyntaxError:d,parse:function(a,l){function f(a,b){return{type:"literal",text:a,ignoreCase:b}}function h(a,
b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function k(b){var c=Wb[b],e;if(!c){for(e=b-1;!Wb[e];)e--;c=Wb[e];for(c={line:c.line,column:c.column};e<b;)10===a.charCodeAt(e)?(c.line++,c.column=1):c.column++,e++;Wb[b]=c}return c}function b(a,b){var c=k(a),e=k(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:e.line,column:e.column}}}function g(a){v<gb||(v>gb&&(gb=v,Xb=[]),Xb.push(a))}function p(){var a,b,e;a=v;b=Q();b!==r?(b=c(),b!==r?(e=Q(),e!==r?a=b:(v=a,a=r)):
(v=a,a=r)):(v=a,a=r);return a}function e(){var a,b,e,d,g,f,h,k;a=v;b=c();if(b!==r){e=[];d=v;g=Q();g!==r?(f=za(),f!==r?(h=Q(),h!==r?(k=c(),k!==r?d=g=[g,f,h,k]:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r);for(;d!==r;)e.push(d),d=v,g=Q(),g!==r?(f=za(),f!==r?(h=Q(),h!==r?(k=c(),k!==r?d=g=[g,f,h,k]:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r);if(e!==r){a={type:"expr_list"};b=[b];for(d=0;d<e.length;d++)b.push(e[d][3]);a.value=b}else v=a,a=r}else v=a,a=r;return a}function c(){var a,b,c,e,d,g,f,h;a=v;b=n();if(b!==
r){c=[];e=v;d=Q();d!==r?(g=da(),g!==r?(f=Q(),f!==r?(h=n(),h!==r?e=d=[d,g,f,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);for(;e!==r;)c.push(e),e=v,d=Q(),d!==r?(g=da(),g!==r?(f=Q(),f!==r?(h=n(),h!==r?e=d=[d,g,f,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);c!==r?a=b=ya(b,c):(v=a,a=r)}else v=a,a=r;return a}function n(){var a,b,c,e,d,g,f,h;a=v;b=m();if(b!==r){c=[];e=v;d=Q();d!==r?(g=ma(),g!==r?(f=Q(),f!==r?(h=m(),h!==r?e=d=[d,g,f,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);for(;e!==r;)c.push(e),e=
v,d=Q(),d!==r?(g=ma(),g!==r?(f=Q(),f!==r?(h=m(),h!==r?e=d=[d,g,f,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);c!==r?a=b=ya(b,c):(v=a,a=r)}else v=a,a=r;return a}function m(){var b,c,d,f,h;b=v;c=ba();c===r&&(c=v,33===a.charCodeAt(v)?(d=zb,v++):(d=r,0===L&&g(Oa)),d!==r?(f=v,L++,61===a.charCodeAt(v)?(h=Ua,v++):(h=r,0===L&&g(Va)),L--,h===r?f=void 0:(v=f,f=r),f!==r?c=d=[d,f]:(v=c,c=r)):(v=c,c=r));c!==r?(d=Q(),d!==r?(f=m(),f!==r?b=c={type:"unary_expr",operator:"NOT",expr:f}:(v=b,b=r)):(v=b,b=r)):(v=b,b=
r);if(b===r)if(b=v,c=t(),c!==r)if(d=Q(),d!==r){var k,l,n;d=[];f=v;h=Q();h!==r?(k=q(),k!==r?(l=Q(),l!==r?(n=t(),n!==r?f=h=[h,k,l,n]:(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r);if(f!==r)for(;f!==r;)d.push(f),f=v,h=Q(),h!==r?(k=q(),k!==r?(l=Q(),l!==r?(n=t(),n!==r?f=h=[h,k,l,n]:(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r);else d=r;d!==r&&(d={type:"arithmetic",tail:d});d===r&&(d=v,f=x(),f!==r?(h=Q(),h!==r?(h=Ga(),h!==r?(h=Q(),h!==r?(h=e(),h!==r?(k=Q(),k!==r?(k=Ia(),k!==r?d=f={op:f,right:h}:(v=d,d=r)):(v=
d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r),d===r&&(d=v,f=x(),f!==r?(h=Q(),h!==r?(h=Ga(),h!==r?(h=Q(),h!==r?(h=Ia(),h!==r?d=f={op:f,right:{type:"expr_list",value:[]}}:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r),d===r&&(d=v,f=x(),f!==r?(h=Q(),h!==r?(h=H(),h!==r?d=f={op:f,right:h}:(v=d,d=r)):(v=d,d=r)):(v=d,d=r))),d===r&&(d=v,h=ba(),h!==r?(f=Q(),f!==r?(f=ga(),f!==r?(k=Q(),k!==r?(k=t(),k!==r?(l=Q(),l!==r?(l=ma(),l!==r?(h=Q(),h!==r?(h=t(),h!==r?d=h={op:"NOT"+f,right:{type:"expr_list",
value:[k,h]}}:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r),d===r&&(d=v,h=ga(),h!==r?(f=Q(),f!==r?(f=t(),f!==r?(k=Q(),k!==r?(k=ma(),k!==r?(l=Q(),l!==r?(l=t(),l!==r?d=h={op:h,right:{type:"expr_list",value:[f,l]}}:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)),d===r&&(d=v,f=K(),f!==r?(h=Q(),h!==r?(h=ba(),h!==r?(h=Q(),h!==r?(h=t(),h!==r?d=f={op:f+"NOT",right:h}:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r),d===
r&&(d=v,f=K(),f!==r?(h=Q(),h!==r?(h=t(),h!==r?d=f={op:f,right:h}:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)),d===r&&(d=v,f=y(),f!==r?(h=Q(),h!==r?(h=G(),h!==r?(k=Q(),k!==r?(k=v,a.substr(v,6).toLowerCase()===jb?(l=a.substr(v,6),v+=6):(l=r,0===L&&g(Tb)),l!==r?(l=v,L++,n=E(),L--,n===r?l=void 0:(v=l,l=r),l!==r?k="ESCAPE":(v=k,k=r)):(v=k,k=r),k!==r?(k=Q(),k!==r?(k=N(),k!==r?d=f={op:f,right:h,escape:k.value}:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r),d===r&&(d=v,f=y(),f!==r?(h=Q(),
h!==r?(h=G(),h!==r?d=f={op:f,right:h,escape:""}:(v=d,d=r)):(v=d,d=r)):(v=d,d=r))))));d===r&&(d=null);d!==r?(b=c,c=d,""==c||void 0==c||null==c?c=b:(d=null,c=d="arithmetic"==c.type?ya(b,c.tail):cb(c.op,b,c.right,c.escape)),b=c):(v=b,b=r)}else v=b,b=r;else v=b,b=r;return b}function q(){var b;a.substr(v,2)===db?(b=db,v+=2):(b=r,0===L&&g(Wa));b===r&&(62===a.charCodeAt(v)?(b=kb,v++):(b=r,0===L&&g(Ra)),b===r&&(a.substr(v,2)===Ka?(b=Ka,v+=2):(b=r,0===L&&g(W)),b===r&&(a.substr(v,2)===Na?(b=Na,v+=2):(b=r,0===
L&&g(ob)),b===r&&(60===a.charCodeAt(v)?(b=ha,v++):(b=r,0===L&&g(ab)),b===r&&(61===a.charCodeAt(v)?(b=Ua,v++):(b=r,0===L&&g(Va)),b===r&&(a.substr(v,2)===Xa?(b=Xa,v+=2):(b=r,0===L&&g(la))))))));return b}function y(){var a,b,c,e;a=a=v;b=ba();b!==r?(c=Q(),c!==r?(e=ca(),e!==r?a=b=[b,c,e]:(v=a,a=r)):(v=a,a=r)):(v=a,a=r);a!==r&&(a=a[0]+" "+a[2]);a===r&&(a=ca());return a}function x(){var a,b,c,e;a=a=v;b=ba();b!==r?(c=Q(),c!==r?(e=fa(),e!==r?a=b=[b,c,e]:(v=a,a=r)):(v=a,a=r)):(v=a,a=r);a!==r&&(a=a[0]+" "+a[2]);
a===r&&(a=fa());return a}function t(){var a,b,c,e,d,g,f,h;a=v;b=z();if(b!==r){c=[];e=v;d=Q();d!==r?(g=u(),g!==r?(f=Q(),f!==r?(h=z(),h!==r?e=d=[d,g,f,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);for(;e!==r;)c.push(e),e=v,d=Q(),d!==r?(g=u(),g!==r?(f=Q(),f!==r?(h=z(),h!==r?e=d=[d,g,f,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);c!==r?a=b=ya(b,c):(v=a,a=r)}else v=a,a=r;return a}function u(){var b;43===a.charCodeAt(v)?(b=ib,v++):(b=r,0===L&&g(P));b===r&&(45===a.charCodeAt(v)?(b=pa,v++):(b=r,0===L&&g(I)));
return b}function z(){var a,b,c,e,d,g,f,h;a=v;b=B();if(b!==r){c=[];e=v;d=Q();d!==r?(g=D(),g!==r?(f=Q(),f!==r?(h=B(),h!==r?e=d=[d,g,f,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);for(;e!==r;)c.push(e),e=v,d=Q(),d!==r?(g=D(),g!==r?(f=Q(),f!==r?(h=B(),h!==r?e=d=[d,g,f,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);c!==r?a=b=ya(b,c):(v=a,a=r)}else v=a,a=r;return a}function D(){var b;42===a.charCodeAt(v)?(b=aa,v++):(b=r,0===L&&g(ia));b===r&&(47===a.charCodeAt(v)?(b=oa,v++):(b=r,0===L&&g(Y)));return b}
function B(){var b,d,f,h,k,m,l;l=N();if(l===r){var n,p,q,t;n=v;var u,y,x,D;u=v;y=X();y!==r?(x=T(),x!==r?(D=Z(),D!==r?u=y=parseFloat(y+x+D):(v=u,u=r)):(v=u,u=r)):(v=u,u=r);u===r&&(u=v,y=X(),y!==r?(x=T(),x!==r?u=y=parseFloat(y+x):(v=u,u=r)):(v=u,u=r),u===r&&(u=v,y=X(),y!==r?(x=Z(),x!==r?u=y=parseFloat(y+x):(v=u,u=r)):(v=u,u=r),u===r&&(u=v,y=X(),y!==r&&(y=parseFloat(y)),u=y)));p=u;p!==r?(q=v,L++,t=C(),L--,t===r?q=void 0:(v=q,q=r),q!==r?n=p={type:"number",value:p}:(v=n,n=r)):(v=n,n=r);l=n;if(l===r){var z,
B;z=v;var U,M,K,ca;U=v;a.substr(v,4).toLowerCase()===kd?(M=a.substr(v,4),v+=4):(M=r,0===L&&g(Yc));M!==r?(K=v,L++,ca=E(),L--,ca===r?K=void 0:(v=K,K=r),K!==r?U=M=[M,K]:(v=U,U=r)):(v=U,U=r);B=U;B!==r&&(B={type:"bool",value:!0});z=B;if(z===r){z=v;var ba,I,da,ma;ba=v;a.substr(v,5).toLowerCase()===Zc?(I=a.substr(v,5),v+=5):(I=r,0===L&&g(ld));I!==r?(da=v,L++,ma=E(),L--,ma===r?da=void 0:(v=da,da=r),da!==r?ba=I=[I,da]:(v=ba,ba=r)):(v=ba,ba=r);B=ba;B!==r&&(B={type:"bool",value:!1});z=B}l=z;if(l===r){var ga,
P,R,V,W;P=v;a.substr(v,4).toLowerCase()===Hc?(R=a.substr(v,4),v+=4):(R=r,0===L&&g(jd));R!==r?(V=v,L++,W=E(),L--,W===r?V=void 0:(v=V,V=r),V!==r?P=R=[R,V]:(v=P,P=r)):(v=P,P=r);ga=P;ga!==r&&(ga={type:"null",value:null});l=ga;if(l===r){var Y,aa,ta,ea;Y=v;var ha,wa,ia,la;ha=v;a.substr(v,4).toLowerCase()===Bb?(wa=a.substr(v,4),v+=4):(wa=r,0===L&&g(Lb));wa!==r?(ia=v,L++,la=E(),L--,la===r?ia=void 0:(v=ia,ia=r),ia!==r?ha=wa="DATE":(v=ha,ha=r)):(v=ha,ha=r);aa=ha;aa!==r?(ta=Q(),ta!==r?(ea=G(),ea!==r?Y=aa={type:"date",
value:ea.value}:(v=Y,Y=r)):(v=Y,Y=r)):(v=Y,Y=r);l=Y;if(l===r){var za,oa,pa,ua;za=v;var qa,ya,Ja,Ba;qa=v;a.substr(v,9).toLowerCase()===Ma?(ya=a.substr(v,9),v+=9):(ya=r,0===L&&g(lb));ya!==r?(Ja=v,L++,Ba=E(),L--,Ba===r?Ja=void 0:(v=Ja,Ja=r),Ja!==r?qa=ya="TIMESTAMP":(v=qa,qa=r)):(v=qa,qa=r);oa=qa;oa!==r?(pa=Q(),pa!==r?(ua=G(),ua!==r?za=oa={type:"timestamp",value:ua.value}:(v=za,za=r)):(v=za,za=r)):(v=za,za=r);l=za}}}}}b=l;if(b===r){var Ca,Aa,Ha,cb,Na,Qa,Ua,Va,Wa,Ra,Xa,$a;Ca=v;var Ka,Sa,Pa,gb;Ka=v;a.substr(v,
7).toLowerCase()===rc?(Sa=a.substr(v,7),v+=7):(Sa=r,0===L&&g($c));Sa!==r?(Pa=v,L++,gb=E(),L--,gb===r?Pa=void 0:(v=Pa,Pa=r),Pa!==r?Ka=Sa="EXTRACT":(v=Ka,Ka=r)):(v=Ka,Ka=r);Aa=Ka;if(Aa!==r)if(Ha=Q(),Ha!==r)if(cb=Ga(),cb!==r)if(Na=Q(),Na!==r){var ub,Oa,db,ab,nb;Oa=v;a.substr(v,4).toLowerCase()===nd?(db=a.substr(v,4),v+=4):(db=r,0===L&&g(Gd));db!==r?(ab=v,L++,nb=E(),L--,nb===r?ab=void 0:(v=ab,ab=r),ab!==r?Oa=db="YEAR":(v=Oa,Oa=r)):(v=Oa,Oa=r);ub=Oa;if(ub===r){var Ta,ib,eb,rb;Ta=v;a.substr(v,5).toLowerCase()===
md?(ib=a.substr(v,5),v+=5):(ib=r,0===L&&g(La));ib!==r?(eb=v,L++,rb=E(),L--,rb===r?eb=void 0:(v=eb,eb=r),eb!==r?Ta=ib="MONTH":(v=Ta,Ta=r)):(v=Ta,Ta=r);ub=Ta;if(ub===r){var Ya,kb,jb,Db;Ya=v;a.substr(v,3).toLowerCase()===kc?(kb=a.substr(v,3),v+=3):(kb=r,0===L&&g(jc));kb!==r?(jb=v,L++,Db=E(),L--,Db===r?jb=void 0:(v=jb,jb=r),jb!==r?Ya=kb="DAY":(v=Ya,Ya=r)):(v=Ya,Ya=r);ub=Ya;if(ub===r){var bb,pb,mb,Fb;bb=v;a.substr(v,4).toLowerCase()===zd?(pb=a.substr(v,4),v+=4):(pb=r,0===L&&g(Ad));pb!==r?(mb=v,L++,Fb=
E(),L--,Fb===r?mb=void 0:(v=mb,mb=r),mb!==r?bb=pb="HOUR":(v=bb,bb=r)):(v=bb,bb=r);ub=bb;if(ub===r){var fb,zb,ob,Kb;fb=v;a.substr(v,6).toLowerCase()===Bd?(zb=a.substr(v,6),v+=6):(zb=r,0===L&&g(Bc));zb!==r?(ob=v,L++,Kb=E(),L--,Kb===r?ob=void 0:(v=ob,ob=r),ob!==r?fb=zb="MINUTE":(v=fb,fb=r)):(v=fb,fb=r);ub=fb;if(ub===r){var vc,Cb,sb,Ub;vc=v;a.substr(v,6).toLowerCase()===ad?(Cb=a.substr(v,6),v+=6):(Cb=r,0===L&&g(Cd));Cb!==r?(sb=v,L++,Ub=E(),L--,Ub===r?sb=void 0:(v=sb,sb=r),sb!==r?vc=Cb="SECOND":(v=vc,
vc=r)):(v=vc,vc=r);ub=vc}}}}}Qa=ub;Qa!==r?(Ua=Q(),Ua!==r?(Va=ra(),Va!==r?(Wa=Q(),Wa!==r?(Ra=c(),Ra!==r?(Xa=Q(),Xa!==r?($a=Ia(),$a!==r?Ca=Aa={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Qa},Ra]}}:(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)}else v=Ca,Ca=r;else v=Ca,Ca=r;else v=Ca,Ca=r;else v=Ca,Ca=r;b=Ca;if(b===r){var xa,Hb,Wb,Yb,$b,Eb,ac,bc,cc,Gb,dc,hb,Rc,Vb,Xb,Zb;xa=v;var wc,Mb,bd,mc;wc=v;a.substr(v,9).toLowerCase()===
Fd?(Mb=a.substr(v,9),v+=9):(Mb=r,0===L&&g(Jc));Mb!==r?(bd=v,L++,mc=E(),L--,mc===r?bd=void 0:(v=bd,bd=r),bd!==r?wc=Mb="SUBSTRING":(v=wc,wc=r)):(v=wc,wc=r);Hb=wc;if(Hb!==r)if(Wb=Q(),Wb!==r)if(Yb=Ga(),Yb!==r)if($b=Q(),$b!==r)if(Eb=c(),Eb!==r)if(ac=Q(),ac!==r)if(bc=ra(),bc!==r)if(cc=Q(),cc!==r)if(Gb=c(),Gb!==r)if(dc=Q(),dc!==r){hb=v;var xc,Nb,cd,oc;xc=v;a.substr(v,3).toLowerCase()===Ed?(Nb=a.substr(v,3),v+=3):(Nb=r,0===L&&g(Ic));Nb!==r?(cd=v,L++,oc=E(),L--,oc===r?cd=void 0:(v=cd,cd=r),cd!==r?xc=Nb="FOR":
(v=xc,xc=r)):(v=xc,xc=r);Rc=xc;Rc!==r?(Vb=Q(),Vb!==r?(Xb=c(),Xb!==r?(Zb=Q(),Zb!==r?hb=Rc=[Rc,Vb,Xb,Zb]:(v=hb,hb=r)):(v=hb,hb=r)):(v=hb,hb=r)):(v=hb,hb=r);hb===r&&(hb=null);hb!==r?(Rc=Ia(),Rc!==r?xa=Hb={type:"function",name:"substring",args:{type:"expr_list",value:hb?[Eb,Gb,hb[2]]:[Eb,Gb]}}:(v=xa,xa=r)):(v=xa,xa=r)}else v=xa,xa=r;else v=xa,xa=r;else v=xa,xa=r;else v=xa,xa=r;else v=xa,xa=r;else v=xa,xa=r;else v=xa,xa=r;else v=xa,xa=r;else v=xa,xa=r;else v=xa,xa=r;b=xa;if(b===r){var ja,Sc,Ob,Pb,Qb,vb,
Rb,Tc,Sb,Tb,pc,ec,qc,sc;ja=v;Sc=ka();Sc!==r?(Ob=Q(),Ob!==r?(Pb=Ga(),Pb!==r?(Qb=Q(),Qb!==r?(vb=F(),vb===r&&(vb=null),vb!==r?(Rb=Q(),Rb!==r?(Tc=c(),Tc!==r?(Sb=Q(),Sb!==r?(Tb=ra(),Tb!==r?(pc=Q(),pc!==r?(ec=c(),ec!==r?(qc=Q(),qc!==r?(sc=Ia(),sc!==r?ja=Sc={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==vb?"BOTH":vb},Tc,ec]}}:(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):
(v=ja,ja=r)):(v=ja,ja=r);ja===r&&(ja=v,Sc=ka(),Sc!==r?(Ob=Q(),Ob!==r?(Pb=Ga(),Pb!==r?(Qb=Q(),Qb!==r?(vb=F(),vb===r&&(vb=null),vb!==r?(Rb=Q(),Rb!==r?(Tc=c(),Tc!==r?(Sb=Q(),Sb!==r?(Tb=Ia(),Tb!==r?ja=Sc={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==vb?"BOTH":vb},Tc]}}:(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r)):(v=ja,ja=r));b=ja;if(b===r){var Da,fc,tc,uc,Ac,lc,Cc,Dc,Ec,nc,Fc,Gc;Da=v;var yc,rd,dd,Kc;yc=
v;a.substr(v,8).toLowerCase()===Ab?(rd=a.substr(v,8),v+=8):(rd=r,0===L&&g(qb));rd!==r?(dd=v,L++,Kc=E(),L--,Kc===r?dd=void 0:(v=dd,dd=r),dd!==r?yc=rd="POSITION":(v=yc,yc=r)):(v=yc,yc=r);fc=yc;fc!==r?(tc=Q(),tc!==r?(uc=Ga(),uc!==r?(Ac=Q(),Ac!==r?(lc=c(),lc!==r?(Cc=Q(),Cc!==r?(Dc=fa(),Dc!==r?(Ec=Q(),Ec!==r?(nc=c(),nc!==r?(Fc=Q(),Fc!==r?(Gc=Ia(),Gc!==r?Da=fc={type:"function",name:"position",args:{type:"expr_list",value:[lc,nc]}}:(v=Da,Da=r)):(v=Da,Da=r)):(v=Da,Da=r)):(v=Da,Da=r)):(v=Da,Da=r)):(v=Da,Da=
r)):(v=Da,Da=r)):(v=Da,Da=r)):(v=Da,Da=r)):(v=Da,Da=r)):(v=Da,Da=r);b=Da;if(b===r){var Za,sd,Lc,Mc,Nc,Uc,Oc,Pc;Za=v;var wb,ed,fd,Jb;wb=v;wb=ed=w();if(wb===r)if(wb=v,96===a.charCodeAt(v)?(ed=tb,v++):(ed=r,0===L&&g(od)),ed!==r){fd=[];pd.test(a.charAt(v))?(Jb=a.charAt(v),v++):(Jb=r,0===L&&g(qd));if(Jb!==r)for(;Jb!==r;)fd.push(Jb),pd.test(a.charAt(v))?(Jb=a.charAt(v),v++):(Jb=r,0===L&&g(qd));else fd=r;fd!==r?(96===a.charCodeAt(v)?(Jb=tb,v++):(Jb=r,0===L&&g(od)),Jb!==r?wb=ed=fd.join(""):(v=wb,wb=r)):(v=
wb,wb=r)}else v=wb,wb=r;sd=wb;sd!==r?(Lc=Q(),Lc!==r?(Mc=Ga(),Mc!==r?(Nc=Q(),Nc!==r?(Uc=e(),Uc===r&&(Uc=null),Uc!==r?(Oc=Q(),Oc!==r?(Pc=Ia(),Pc!==r?Za=sd={type:"function",name:sd,args:Uc?Uc:{type:"expr_list",value:[]}}:(v=Za,Za=r)):(v=Za,Za=r)):(v=Za,Za=r)):(v=Za,Za=r)):(v=Za,Za=r)):(v=Za,Za=r)):(v=Za,Za=r);b=Za;if(b===r){var td,na,Vc,ud,Wc,vd,hc,xb,gd,Qc,Id;na=v;Vc=Fa();if(Vc!==r)if(ud=Q(),ud!==r)if(Wc=c(),Wc!==r)if(vd=Q(),vd!==r){hc=[];for(xb=S();xb!==r;)hc.push(xb),xb=S();hc!==r?(xb=Q(),xb!==r?
(gd=Ea(),gd!==r?na=Vc={type:"case_expression",format:"simple",operand:Wc,clauses:hc,else:null}:(v=na,na=r)):(v=na,na=r)):(v=na,na=r)}else v=na,na=r;else v=na,na=r;else v=na,na=r;else v=na,na=r;if(na===r)if(na=v,Vc=Fa(),Vc!==r)if(ud=Q(),ud!==r)if(Wc=c(),Wc!==r)if(vd=Q(),vd!==r){hc=[];for(xb=S();xb!==r;)hc.push(xb),xb=S();hc!==r?(xb=Q(),xb!==r?(gd=J(),gd!==r?(Qc=Q(),Qc!==r?(Id=Ea(),Id!==r?na=Vc={type:"case_expression",format:"simple",operand:Wc,clauses:hc,else:gd.value}:(v=na,na=r)):(v=na,na=r)):(v=
na,na=r)):(v=na,na=r)):(v=na,na=r)}else v=na,na=r;else v=na,na=r;else v=na,na=r;else v=na,na=r;td=na;if(td===r){var va,Xc,wd,ic,yb,hd,Jd,Kd;va=v;Xc=Fa();if(Xc!==r)if(wd=Q(),wd!==r){ic=[];for(yb=O();yb!==r;)ic.push(yb),yb=O();ic!==r?(yb=Q(),yb!==r?(hd=Ea(),hd!==r?va=Xc={type:"case_expression",format:"searched",clauses:ic,else:null}:(v=va,va=r)):(v=va,va=r)):(v=va,va=r)}else v=va,va=r;else v=va,va=r;if(va===r)if(va=v,Xc=Fa(),Xc!==r)if(wd=Q(),wd!==r){ic=[];for(yb=O();yb!==r;)ic.push(yb),yb=O();ic!==
r?(yb=Q(),yb!==r?(hd=J(),hd!==r?(Jd=Q(),Jd!==r?(Kd=Ea(),Kd!==r?va=Xc={type:"case_expression",format:"searched",clauses:ic,else:hd.value}:(v=va,va=r)):(v=va,va=r)):(v=va,va=r)):(v=va,va=r)):(v=va,va=r)}else v=va,va=r;else v=va,va=r;td=va}b=td;if(b===r){var id,zc,Hd,xd,yd;zc=v;Hd=C();if(Hd!==r){xd=[];for(yd=A();yd!==r;)xd.push(yd),yd=A();xd!==r?zc=Hd+=xd.join(""):(v=zc,zc=r)}else v=zc,zc=r;id=zc;id!==r&&(id={type:"column_ref",table:"",column:id});b=id;b===r&&(b=H(),b===r&&(b=v,d=Ga(),d!==r?(f=Q(),f!==
r?(h=c(),h!==r?(k=Q(),k!==r?(m=Ia(),m!==r?(h.paren=!0,b=d=h):(v=b,b=r)):(v=b,b=r)):(v=b,b=r)):(v=b,b=r)):(v=b,b=r)))}}}}}}}return b}function w(){var a,b,c,e;a=v;b=C();if(b!==r){c=[];for(e=E();e!==r;)c.push(e),e=E();c!==r?a=b+=c.join(""):(v=a,a=r)}else v=a,a=r;return a}function C(){var b;ea.test(a.charAt(v))?(b=a.charAt(v),v++):(b=r,0===L&&g(R));return b}function E(){var b;mc.test(a.charAt(v))?(b=a.charAt(v),v++):(b=r,0===L&&g(Pa));return b}function A(){var b;eb.test(a.charAt(v))?(b=a.charAt(v),v++):
(b=r,0===L&&g(Nb));return b}function H(){var b,c,e;b=v;64===a.charCodeAt(v)?(c=rb,v++):(c=r,0===L&&g(oc));c!==r?(e=w(),e!==r?b=c=[c,e]:(v=b,b=r)):(v=b,b=r);b!==r&&(b={type:"param",value:b[1]});return b}function F(){var b,c,e;b=v;a.substr(v,7).toLowerCase()===Ac?(c=a.substr(v,7),v+=7):(c=r,0===L&&g(lc));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="LEADING":(v=b,b=r)):(v=b,b=r);b===r&&(b=v,a.substr(v,8).toLowerCase()===sc?(c=a.substr(v,8),v+=8):(c=r,0===L&&g(Ba)),c!==r?(c=v,L++,e=E(),
L--,e===r?c=void 0:(v=c,c=r),c!==r?b="TRAILING":(v=b,b=r)):(v=b,b=r),b===r&&(b=v,a.substr(v,4).toLowerCase()===fc?(c=a.substr(v,4),v+=4):(c=r,0===L&&g(Mb)),c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="BOTH":(v=b,b=r)):(v=b,b=r)));return b}function G(){var a;a=N();a===r&&(a=H());return a}function N(){var b,c,e;b=v;39===a.charCodeAt(v)?(c=Cb,v++):(c=r,0===L&&g(ac));c===r&&(a.substr(v,2)===bc?(c=bc,v+=2):(c=r,0===L&&g(Db)));if(c!==r){c=[];e=v;a.substr(v,2)===Fb?(e=Fb,v+=2):(e=r,0===L&&
g(Ob));e!==r&&(e="'");e===r&&(cc.test(a.charAt(v))?(e=a.charAt(v),v++):(e=r,0===L&&g(fb)));for(;e!==r;)c.push(e),e=v,a.substr(v,2)===Fb?(e=Fb,v+=2):(e=r,0===L&&g(Ob)),e!==r&&(e="'"),e===r&&(cc.test(a.charAt(v))?(e=a.charAt(v),v++):(e=r,0===L&&g(fb)));c!==r?(39===a.charCodeAt(v)?(e=Cb,v++):(e=r,0===L&&g(ac)),e!==r?b=c={type:"string",value:c.join("")}:(v=b,b=r)):(v=b,b=r)}else v=b,b=r;return b}function O(){var a,b,e;a=v;b=wa();b!==r?(b=Q(),b!==r?(b=c(),b!==r?(e=Q(),e!==r?(e=ta(),e!==r?(e=Q(),e!==r?
(e=c(),e!==r?a=b={type:"when_clause",operand:b,value:e}:(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r);return a}function S(){var a,b,e;a=v;b=wa();b!==r?(b=Q(),b!==r?(b=c(),b!==r?(e=Q(),e!==r?(e=ta(),e!==r?(e=Q(),e!==r?(e=c(),e!==r?a=b={type:"when_clause",operand:b,value:e}:(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r);return a}function J(){var b,e;b=v;var d,f;e=v;a.substr(v,4).toLowerCase()===Mc?(d=a.substr(v,4),v+=4):(d=r,0===L&&g(Nc));d!==
r?(d=v,L++,f=E(),L--,f===r?d=void 0:(v=d,d=r),d!==r?e="ELSE":(v=e,e=r)):(v=e,e=r);e!==r?(e=Q(),e!==r?(e=c(),e!==r?b={type:"else_clause",value:e}:(v=b,b=r)):(v=b,b=r)):(v=b,b=r);return b}function X(){var b,c,e;b=U();b===r&&(b=v,45===a.charCodeAt(v)?(c=pa,v++):(c=r,0===L&&g(I)),c===r&&(43===a.charCodeAt(v)?(c=ib,v++):(c=r,0===L&&g(P))),c!==r?(e=U(),e!==r?b=c=c[0]+e:(v=b,b=r)):(v=b,b=r));return b}function T(){var b,c;b=v;46===a.charCodeAt(v)?(c=Pb,v++):(c=r,0===L&&g(Gb));c!==r?(c=U(),c===r&&(c=null),
c!==r?b="."+(null!=c?c:""):(v=b,b=r)):(v=b,b=r);return b}function Z(){var b,c,e;c=b=v;nb.test(a.charAt(v))?(e=a.charAt(v),v++):(e=r,0===L&&g(Ya));e!==r?(Gc.test(a.charAt(v))?(e=a.charAt(v),v++):(e=r,0===L&&g(bb)),e===r&&(e=null),e!==r?c="e"+(null===e?"":e):(v=c,c=r)):(v=c,c=r);c!==r?(e=U(),e!==r?b=c+e:(v=b,b=r)):(v=b,b=r);return b}function U(){var a,b;a=[];b=M();if(b!==r)for(;b!==r;)a.push(b),b=M();else a=r;a!==r&&(a=a.join(""));return a}function M(){var b;Qb.test(a.charAt(v))?(b=a.charAt(v),v++):
(b=r,0===L&&g(Rb));return b}function fa(){var b,c,e;b=v;a.substr(v,2).toLowerCase()===Sb?(c=a.substr(v,2),v+=2):(c=r,0===L&&g(pb));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="IN":(v=b,b=r)):(v=b,b=r);return b}function K(){var b,c,e;b=v;a.substr(v,2).toLowerCase()===Ha?(c=a.substr(v,2),v+=2):(c=r,0===L&&g(Zb));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="IS":(v=b,b=r)):(v=b,b=r);return b}function ca(){var b,c,e;b=v;a.substr(v,4).toLowerCase()===Kb?(c=a.substr(v,4),v+=4):
(c=r,0===L&&g($b));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="LIKE":(v=b,b=r)):(v=b,b=r);return b}function ba(){var b,c,e;b=v;a.substr(v,3).toLowerCase()===Qa?(c=a.substr(v,3),v+=3):(c=r,0===L&&g(pc));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="NOT":(v=b,b=r)):(v=b,b=r);return b}function ma(){var b,c,e;b=v;a.substr(v,3).toLowerCase()===dc?(c=a.substr(v,3),v+=3):(c=r,0===L&&g(sb));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="AND":(v=b,b=r)):(v=b,b=r);return b}
function da(){var b,c,e;b=v;a.substr(v,2).toLowerCase()===qa?(c=a.substr(v,2),v+=2):(c=r,0===L&&g(ec));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="OR":(v=b,b=r)):(v=b,b=r);return b}function ga(){var b,c,e;b=v;a.substr(v,7).toLowerCase()===qc?(c=a.substr(v,7),v+=7):(c=r,0===L&&g(Ub));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="BETWEEN":(v=b,b=r)):(v=b,b=r);return b}function ra(){var b,c,e;b=v;a.substr(v,4).toLowerCase()===Vb?(c=a.substr(v,4),v+=4):(c=r,0===L&&g(Hb));c!==
r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="FROM":(v=b,b=r)):(v=b,b=r);return b}function ka(){var b,c,e;b=v;a.substr(v,4).toLowerCase()===Eb?(c=a.substr(v,4),v+=4):(c=r,0===L&&g(Sa));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="TRIM":(v=b,b=r)):(v=b,b=r);return b}function Fa(){var b,c,e;b=v;a.substr(v,4).toLowerCase()===Cc?(c=a.substr(v,4),v+=4):(c=r,0===L&&g(Dc));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="CASE":(v=b,b=r)):(v=b,b=r);return b}function Ea(){var b,
c,e;b=v;a.substr(v,3).toLowerCase()===Kc?(c=a.substr(v,3),v+=3):(c=r,0===L&&g(Lc));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="END":(v=b,b=r)):(v=b,b=r);return b}function wa(){var b,c,e;b=v;a.substr(v,4).toLowerCase()===mb?(c=a.substr(v,4),v+=4):(c=r,0===L&&g(Ec));c!==r?(c=v,L++,e=E(),L--,e===r?c=void 0:(v=c,c=r),c!==r?b="WHEN":(v=b,b=r)):(v=b,b=r);return b}function ta(){var b,c,e;b=v;a.substr(v,4).toLowerCase()===nc?(c=a.substr(v,4),v+=4):(c=r,0===L&&g(Fc));c!==r?(c=v,L++,e=E(),L--,
e===r?c=void 0:(v=c,c=r),c!==r?b="THEN":(v=b,b=r)):(v=b,b=r);return b}function za(){var b;44===a.charCodeAt(v)?(b=tc,v++):(b=r,0===L&&g(uc));return b}function Ga(){var b;40===a.charCodeAt(v)?(b=Oc,v++):(b=r,0===L&&g(Pc));return b}function Ia(){var b;41===a.charCodeAt(v)?(b=Ta,v++):(b=r,0===L&&g(Qc));return b}function Q(){var a,b;a=[];for(b=Ja();b!==r;)a.push(b),b=Ja();return a}function Ja(){var b;V.test(a.charAt(v))?(b=a.charAt(v),v++):(b=r,0===L&&g(ua));return b}function cb(a,b,c,e){a={type:"binary_expr",
operator:a,left:b,right:c};void 0!==e&&(a.escape=e);return a}function ya(a,b){for(var c=0;c<b.length;c++)a=cb(b[c][1],a,b[c][3]);return a}l=void 0!==l?l:{};var r={},Aa={start:p},$a=p,zb="!",Oa=f("!",!1),Ua="\x3d",Va=f("\x3d",!1),db="\x3e\x3d",Wa=f("\x3e\x3d",!1),kb="\x3e",Ra=f("\x3e",!1),Ka="\x3c\x3d",W=f("\x3c\x3d",!1),Na="\x3c\x3e",ob=f("\x3c\x3e",!1),ha="\x3c",ab=f("\x3c",!1),Xa="!\x3d",la=f("!\x3d",!1),ib="+",P=f("+",!1),pa="-",I=f("-",!1),aa="*",ia=f("*",!1),oa="/",Y=f("/",!1),ea=/^[A-Za-z_\x80-\uFFFF]/,
R=h([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),mc=/^[A-Za-z0-9_]/,Pa=h([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),eb=/^[A-Za-z0-9_.\x80-\uFFFF]/,Nb=h([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),rb="@",oc=f("@",!1),Cb="'",ac=f("'",!1),bc="N'",Db=f("N'",!1),Fb="''",Ob=f("''",!1),cc=/^[^']/,fb=h(["'"],!0,!1),Pb=".",Gb=f(".",!1),Qb=/^[0-9]/,Rb=h([["0","9"]],!1,!1),nb=/^[eE]/,Ya=h(["e","E"],!1,!1),Gc=/^[+\-]/,bb=h(["+","-"],!1,!1),Hc="null",jd=f("NULL",!0),kd="true",Yc=
f("TRUE",!0),Zc="false",ld=f("FALSE",!0),Sb="in",pb=f("IN",!0),Ha="is",Zb=f("IS",!0),Kb="like",$b=f("LIKE",!0),jb="escape",Tb=f("ESCAPE",!0),Qa="not",pc=f("NOT",!0),dc="and",sb=f("AND",!0),qa="or",ec=f("OR",!0),qc="between",Ub=f("BETWEEN",!0),Vb="from",Hb=f("FROM",!0),Ed="for",Ic=f("FOR",!0),Fd="substring",Jc=f("SUBSTRING",!0),rc="extract",$c=f("EXTRACT",!0),Eb="trim",Sa=f("TRIM",!0),Ab="position",qb=f("POSITION",!0),Ma="timestamp",lb=f("TIMESTAMP",!0),Bb="date",Lb=f("DATE",!0),Ac="leading",lc=f("LEADING",
!0),sc="trailing",Ba=f("TRAILING",!0),fc="both",Mb=f("BOTH",!0),nd="year",Gd=f("YEAR",!0),md="month",La=f("MONTH",!0),kc="day",jc=f("DAY",!0),zd="hour",Ad=f("HOUR",!0),Bd="minute",Bc=f("MINUTE",!0),ad="second",Cd=f("SECOND",!0),Cc="case",Dc=f("CASE",!0),Kc="end",Lc=f("END",!0),mb="when",Ec=f("WHEN",!0),nc="then",Fc=f("THEN",!0),Mc="else",Nc=f("ELSE",!0),tc=",",uc=f(",",!1),Oc="(",Pc=f("(",!1),Ta=")",Qc=f(")",!1),V=/^[ \t\n\r]/,ua=h([" ","\t","\n","\r"],!1,!1),tb="`",od=f("`",!1),pd=/^[^`]/,qd=h(["`"],
!0,!1),v=0,Wb=[{line:1,column:1}],gb=0,Xb=[],L=0,Yb;if("startRule"in l){if(!(l.startRule in Aa))throw Error("Can't start parsing from rule \""+l.startRule+'".');$a=Aa[l.startRule]}Yb=$a();if(Yb!==r&&v===a.length)return Yb;Yb!==r&&v<a.length&&g({type:"end"});throw function(a,b,c){return new d(d.buildMessage(a,b),a,b,c)}(Xb,gb<a.length?a.charAt(gb):null,gb<a.length?b(gb,gb+1):b(gb,gb));}}})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(d,a,l,f,h,k,b){function g(a,b){var c;if(!b)return null;if("x"in b){var d={x:0,y:0};a=a(b.x,b.y,n,0);d.x=a[0];d.y=a[1];null!=b.z&&(d.z=b.z);null!=b.m&&(d.m=b.m);return d}if("xmin"in b)return d={xmin:0,ymin:0,xmax:0,ymax:0},c=a(b.xmin,b.ymin,n,0),d.xmin=c[0],d.ymin=c[1],a=a(b.xmax,b.ymax,n,0),d.xmax=a[0],d.ymax=a[1],b.hasZ&&(d.zmin=b.zmin,d.zmax=b.zmax,d.hasZ=!0),b.hasM&&(d.mmin=b.mmin,d.mmax=b.mmax,d.hasM=!0),d;if("rings"in b)return{rings:p(b.rings,a),hasM:b.hasM,hasZ:b.hasZ};if("paths"in
b)return{paths:p(b.paths,a),hasM:b.hasM,hasZ:b.hasZ};if("points"in b)return{points:e(b.points,a),hasM:b.hasM,hasZ:b.hasZ}}function p(a,b){for(var c=[],d=0;d<a.length;d++)c.push(e(a[d],b));return c}function e(a,b){for(var c=[],e=0;e<a.length;e++){var d=a[e],g=b(d[0],d[1],[0,0],0);c.push(g);2<d.length&&g.push(d[2]);3<d.length&&g.push(d[3])}return c}function c(a,c){return!k.isValid(a)||!k.isValid(c)||k.equals(a,c)||b.canProject(a,c)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});var n=[0,0];
a.checkProjectionSupport=function(a,b){if(Array.isArray(a)){for(var e=0;e<a.length;e++){var d=a[e];if(c(d.geometry&&d.geometry.spatialReference,b))return h.isSupported()?h.load():f.reject(new l("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:b}))}return f.resolve()}return c(a,b)?h.isSupported()?h.load():f.reject(new l("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:b})):f.resolve()};var m=
g.bind(null,b.lngLatToXY),q=g.bind(null,b.xyToLngLat);a.project=function(a,c,e){return k.isValid(c)&&k.isValid(e)&&!k.equals(c,e)?b.canProject(c,e)?k.isWebMercator(e)?m(a):q(a):h.projectMany([a],c,e,null,!0)[0]:a};var y=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a,b,c){var e=this;a&&a.length&&b&&c&&!k.equals(b,c)||f.resolve(a);var d={geometries:a,inSpatialReference:b,outSpatialReference:c,resolve:null};this._jobs.push(d);
return f.create(function(a){d.resolve=a;null===e._timer&&(e._timer=setTimeout(e._process,10))},function(){var a=e._jobs.indexOf(d);-1<a&&e._jobs.splice(a,1)})};a.prototype._process=function(){this._timer=null;var a=this._jobs.shift();if(a){var c=a.geometries,e=a.inSpatialReference,d=a.outSpatialReference,a=a.resolve;b.canProject(e,d)?k.isWebMercator(d)?a(c.map(m)):a(c.map(q)):a(h.projectMany(c,e,d,null,!0));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());a.projectMany=
function(a,b,c){return y.push(a,b,c)}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.queryCapabilities={supportsStatistics:!0,supportsCentroid:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsResultType:!1,supportsSqlExpression:!0,
supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1}})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports @dojo/framework/shim/Set ../../../core/promiseUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./utils".split(" "),function(d,a,l,f,h,k,b,g,p,e,
c){function n(a){return a?JSON.parse(JSON.stringify(a,["latestWkid","wkid","wkt"])):a}Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,b){this.items=a;this.definitionExpression=b.definitionExpression;this.geometryType=b.geometryType;this.hasM=b.hasM;this.hasZ=b.hasZ;this.objectIdField=b.objectIdField;this.spatialReference=b.spatialReference;this.fieldsMap=b.fieldsMap}Object.defineProperty(a.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0});
a.prototype.createQueryResponse=function(a){return a.outStatistics?a.outStatistics.some(function(a){return"exceedslimit"===a.statisticType})?this._createExceedsLimitQueryResponse(a):this._createStatisticsQueryResponse(a):this._createFeatureQueryResponse(a)};a.prototype.executeAttributesQuery=function(a){var b=p.getWhereClause(a.where);if(!b)return f.resolve(this);if(b.isStandardized()){for(var c=0,e=[],d=0,g=this.items;d<g.length;d++){var h=g[d];b.testFeature(h.attributes)&&(e[c++]=h)}b=this._createNew(e);
b.definitionExpression=a.where;return f.resolve(b)}return f.reject(new TypeError("Where clause is not standardized"))};a.prototype.executeObjectIdsQuery=function(a){if(!a.objectIds||!a.objectIds.length)return f.resolve(this);var b=new l.default(a.objectIds);return f.resolve(this._createNew(this.items.filter(function(a){return b.has(a.objectId)})))};a.prototype.project=function(d){var g=this;return!d||k.equals(this.spatialReference,d)?f.resolve(this):e.projectMany(this.items.map(function(a){return c.getGeometry(g,
a)}),this.spatialReference,d).then(function(c){for(var e=[],f=0;f<g.items.length;f++)e[f]={attributes:g.items[f].attributes,geometry:c[f]};c=[];b.convertFromFeatures(c,e,g.geometryType,g.hasZ,g.hasM,g.objectIdField);return new a(c,{definitionExpression:g.definitionExpression,geometryType:g.geometryType,hasM:g.hasM,hasZ:g.hasZ,objectIdField:g.objectIdField,spatialReference:d,fieldsMap:g.fieldsMap})})};a.prototype._createFeatureQueryResponse=function(a){var b=this,c=this.items,e=this.geometryType,d=
this.hasM,g=this.hasZ,f=this.objectIdField,k=this.spatialReference,m=a.outFields,l=a.outSpatialReference,p=a.quantizationParameters,q=!1;if(null!=a.num&&null!=a.start)var H=a.start+a.num,q=c.length>H,c=c.slice(a.start,Math.min(c.length,H));return{exceededTransferLimit:q,features:this._createFeatures(a,c),fields:m&&m.map(function(a){return b.fieldsMap.get(a)}),geometryType:e,hasM:d,hasZ:g,objectIdFieldName:f,spatialReference:n(l?l.toJSON():k),transform:p&&h.toTransform(p)}};a.prototype._createFeatures=
function(a,b){var e=new g.default(a,this.fieldsMap),d=a.quantizationParameters,f=a.returnGeometry,k=a.returnCentroid,m=a.maxAllowableOffset,l=a.orderByFields;a=[];var n=0;if(b.length&&l&&l.length){var l=l[0].split(" "),p=l[0],q="DESC"===l[1];b.sort(function(a,b){a=e.getFieldValue(a,p);b=e.getFieldValue(b,p);if("number"===typeof a&&"number"===typeof b)return q?b-a:a-b;if("string"===typeof a&&"string"===typeof b)return a=a.toUpperCase(),b=b.toUpperCase(),(q?a>b:a<b)?-1:(q?a<b:a>b)?1:0})}if(f||k)if(d=
h.toTransform(d),f&&!k)for(k=0;k<b.length;k++)f=b[k],a[n++]={attributes:e.getAttributes(f),geometry:c.getGeometry(this,f,m,d)};else if(!f&&k)for(m=0;m<b.length;m++)f=b[m],a[n++]={attributes:e.getAttributes(f),centroid:c.getCentroid(this,f,d)};else for(k=0;k<b.length;k++)f=b[k],a[n++]={attributes:e.getAttributes(f),centroid:c.getCentroid(this,f,d),geometry:c.getGeometry(this,f,m,d)};else for(m=0;m<b.length;m++)f=b[m],(f=e.getAttributes(f))&&(a[n++]={attributes:f});return a};a.prototype._createNew=
function(b){return new a(b,this)};a.prototype._createExceedsLimitQueryResponse=function(a){var b=!1,c=null;a.outStatistics.some(function(a){c=a;return"exceedslimit"===a.statisticType});var b=null!=c.maxPointCount?c.maxPointCount:Number.POSITIVE_INFINITY,e=null!=c.maxRecordCount?c.maxRecordCount:Number.POSITIVE_INFINITY;a=null!=c.maxVertexCount?c.maxVertexCount:Number.POSITIVE_INFINITY;"esriGeometryPoint"===this.geometryType?b=this.items.length>b:this.items.length>e?b=!0:(b=this.hasZ?this.hasM?4:3:
this.hasM?3:2,b=this.items.reduce(function(a,b){return a+(b.geometry&&b.geometry.coords.length||0)},0)/b>a);return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(b)}}]}};a.prototype._createStatisticsQueryResponse=function(a){var b=new g.default(a,this.fieldsMap),c=[],e=[],d=a.groupByFieldsForStatistics,f=a.having,h=d&&d.length,d=h&&d[0],k={},m={},l={},n={attributes:{}},
p=0;for(a=a.outStatistics;p<a.length;p++){var q=a[p],F=q.onStatisticField,G=q.outStatisticFieldName,N=q.statisticType,O="1"===F;if(h&&(F===d||O)&&"count"===N){k[F]||(k[F]=this._calculateUniqueValues(b,O?d:F));var N=k[F],S;for(S in N){var J=N[S],X=J.count,q=J.data,T=J.items,J=m[q]||{attributes:{}};if(!f||b.validateItems(T,f))J.attributes[G]=X,J.attributes[O?"EXPR_1":F]=q,m[q]=J}e.push({name:G,alias:G,type:"esriFieldTypeString"})}else{if(h)for(S in O=this._calculateUniqueValues(b,d),O){if(J=O[S],q=
J.data,T=J.items,!f||b.validateItems(T,f))J=m[q]||{attributes:{}},T=this._calculateStatistics(T,b,F),X="var"===N?"variance":N,J.attributes[G]=T[X],J.attributes[d]=q,m[q]=J}else l[F]||(l[F]=this._calculateStatistics(this.items,b,F)),T=l[F],X="var"===N?"variance":N,n.attributes[G]=T[X];e.push({name:G,alias:G,type:"esriFieldTypeDouble"})}}if(h)for(var Z in m)c.push(m[Z]);else c.push(n);return{fields:e,features:c}};a.prototype._calculateStatistics=function(a,b,c){for(var e=a.length,d=Number.POSITIVE_INFINITY,
g=Number.NEGATIVE_INFINITY,f=null,h=null,k=null,m=null,l=[],n=0;n<e;n++){var p=l[n]=b.getFieldValue(a[n],c);isNaN(p)||(f+=p,d=Math.min(d,p),g=Math.max(g,p))}if(e){h=f/e;for(b=a=0;b<l.length;b++)p=l[b],a+=Math.pow(p-h,2);m=1<e?a/(e-1):0;k=Math.sqrt(m)}else g=d=null;return{avg:h,count:e,max:g,min:d,stddev:k,sum:f,variance:m}};a.prototype._calculateUniqueValues=function(a,b){for(var c={},e=0,d=this.items;e<d.length;e++){var g=d[e],f=a.getFieldValue(g,b);if(null==f||"string"===typeof f&&""===f.trim())f=
null;null==c[f]?c[f]={count:1,data:f,items:[g]}:(c[f].count++,c[f].items.push(g))}return c};return a}();a.default=d})},"esri/geometry/support/quantizationUtils":function(){define(["require","exports","./jsonUtils"],function(d,a,l){function f(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function h(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function k(a,b,c){for(var e=[],d,g,k,m,l=0;l<c.length;l++){var n=c[l];if(0<l){if(k=f(a,n[0]),m=h(a,n[1]),k!==d||m!==g)e.push(b(n,k-d,m-g)),d=
k,g=m}else d=f(a,n[0]),g=h(a,n[1]),e.push(b(n,d,g))}return 0<e.length?e:null}function b(a,b,c,e){return k(a,c?e?H:A:e?A:E,b)}function g(a,b,c,e){var d=[];c=c?e?H:A:e?A:E;for(e=0;e<b.length;e++){var g=k(a,c,b[e]);g&&3<=g.length&&d.push(g)}return d.length?d:null}function p(a,b,c,e){var d=[];c=c?e?H:A:e?A:E;for(e=0;e<b.length;e++){var g=k(a,c,b[e]);g&&2<=g.length&&d.push(g)}return d.length?d:null}function e(a,b){return b*a.scale[0]+a.translate[0]}function c(a,b){return a.translate[1]-b*a.scale[1]}function n(a,
b,d){var g=Array(d.length);if(!d.length)return g;var f=a.scale,h=f[0],f=f[1],k=e(a,d[0][0]);a=c(a,d[0][1]);g[0]=b(d[0],k,a);for(var m=1;m<d.length;m++){var l=d[m],k=k+l[0]*h;a-=l[1]*f;g[m]=b(l,k,a)}return g}function m(a,b,c){for(var e=Array(c.length),d=0;d<c.length;d++)e[d]=n(a,b,c[d]);return e}function q(a,b,c,e){return n(a,c?e?H:A:e?A:E,b)}function y(a,b,c,e){return m(a,c?e?H:A:e?A:E,b)}function x(a,b,c,e){return m(a,c?e?H:A:e?A:E,b)}function t(a,b,c){var e=c[0],d=e[0],e=e[1],g=Math.min(d,b[0]),
f=Math.min(e,b[1]),h=Math.max(d,b[2]);b=Math.max(e,b[3]);for(var k=1;k<c.length;k++){var m=c[k],l=m[0],m=m[1],d=d+l,e=e+m;0>l&&(g=Math.min(g,d));0<l&&(h=Math.max(h,d));0>m?f=Math.min(f,e):0<m&&(b=Math.max(b,e))}a[0]=g;a[1]=f;a[2]=h;a[3]=b;return a}function u(a,b){if(!b.length)return null;a[0]=a[1]=Number.POSITIVE_INFINITY;a[2]=a[3]=Number.NEGATIVE_INFINITY;for(var c=0;c<b.length;c++)t(a,a,b[c]);return a}function z(a,b,c,e,d){b.xmin=f(a,c.xmin);b.ymin=h(a,c.ymin);b.xmax=f(a,c.xmax);b.ymax=h(a,c.ymax);
b!==c&&(e&&(b.zmin=c.zmin,b.zmax=c.zmax),d&&(b.mmin=c.mmin,b.mmax=c.mmax));return b}function D(a,c,e,d,g){c.points=b(a,e.points,d,g);return c}function B(a,b,c,e,d){b.x=f(a,c.x);b.y=h(a,c.y);b!==c&&(e&&(b.z=c.z),d&&(b.m=c.m));return b}function w(a,b,c,e,d){a=g(a,c.rings,e,d);if(!a)return null;b.rings=a;return b}function C(a,b,c,e,d){a=p(a,c.paths,e,d);if(!a)return null;b.paths=a;return b}Object.defineProperty(a,"__esModule",{value:!0});var E=function(a,b,c){return[b,c]},A=function(a,b,c){return[b,
c,a[2]]},H=function(a,b,c){return[b,c,a[2],a[3]]};a.toTransform=function(a){return a?{originPosition:"upperLeft",scale:[a.tolerance,a.tolerance],translate:[a.extent.xmin,a.extent.ymax]}:null};a.equals=function(a,b){if(a===b||null==a&&null==b)return!0;if(null==a||null==b)return!1;var c,e,d,g;a&&"upperLeft"===a.originPosition?(c=a.translate[0],e=a.translate[1],a=a.scale[0]):(c=a.extent.xmin,e=a.extent.ymax,a=a.tolerance);b&&"upperLeft"===b.originPosition?(d=b.translate[0],g=b.translate[1],b=b.scale[0]):
(d=b.extent.xmin,g=b.extent.ymax,b=b.tolerance);return c===d&&e===g&&a===b};a.quantizeX=f;a.quantizeY=h;a.quantizeBounds=function(a,b,c){b[0]=f(a,c[0]);b[3]=h(a,c[1]);b[2]=f(a,c[2]);b[1]=h(a,c[3]);return b};a.quantizePoints=b;a.quantizeRings=g;a.quantizePaths=p;a.hydrateX=e;a.hydrateY=c;a.hydrateCoordsArray=n;a.hydrateCoordsArrayArray=m;a.hydrateBounds=function(a,b,d){return d?(b[0]=e(a,d[0]),b[1]=c(a,d[3]),b[2]=e(a,d[2]),b[3]=c(a,d[1]),b):[e(a,b[0]),c(a,b[3]),e(a,b[2]),c(a,b[1])]};a.hydratePoints=
q;a.hydratePaths=y;a.hydrateRings=x;a.getQuantizedBoundsCoordsArray=t;a.getQuantizedBoundsCoordsArrayArray=u;a.getQuantizedBoundsPoints=function(a){var b=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return t(b,b,a)};a.getQuantizedBoundsPaths=function(a){return u([0,0,0,0],a)};a.getQuantizedBoundsRings=function(a){return u([0,0,0,0],a)};a.quantizeExtent=z;a.quantizeMultipoint=D;a.quantizePoint=B;a.quantizePolygon=w;a.quantizePolyline=C;a.quantizeGeometry=
function(a,b){return a&&b?l.isPoint(b)?B(a,{},b,!1,!1):l.isPolyline(b)?C(a,{},b,!1,!1):l.isPolygon(b)?w(a,{},b,!1,!1):l.isMultipoint(b)?D(a,{},b,!1,!1):l.isExtent(b)?z(a,{},b,!1,!1):null:null};a.hydrateExtent=function(a,b,d,g,f){b.xmin=e(a,d.xmin);b.ymin=c(a,d.ymin);b.xmax=e(a,d.xmax);b.ymax=c(a,d.ymax);b!==d&&(g&&(b.zmin=d.zmin,b.zmax=d.zmax),f&&(b.mmin=d.mmin,b.mmax=d.mmax));return b};a.hydrateMultipoint=function(a,b,c,e,d){b.points=q(a,c.points,e,d);return b};a.hydratePoint=function(a,b,d,g,f){b.x=
e(a,d.x);b.y=c(a,d.y);b!==d&&(g&&(b.z=d.z),f&&(b.m=d.m));return b};a.hydratePolygon=function(a,b,c,e,d){b.rings=x(a,c.rings,e,d);return b};a.hydratePolyline=function(a,b,c,e,d){b.paths=y(a,c.paths,e,d);return b}})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["require","exports","@dojo/framework/shim/Map","./attributeSupport"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,b){this._fieldDataCache=new l.default;this._returnDistinctMap=
new l.default;this.returnDistinctValues=a.returnDistinctValues;this.fieldsMap=b;if((a=a.outFields)&&-1===a.indexOf("*")){this.outFields=a;for(var d=b=0;d<a.length;d++){var h=a[d],e=f.getExpressionFromFieldName(h),c=this.fieldsMap.has(e),e=c?null:f.getWhereClause(e),c=c?this.fieldsMap.get(h).name:f.getAliasFromFieldName(h)||"FIELD_EXP_"+b++;this._fieldDataCache.set(h,{alias:c,clause:e})}}}a.prototype.getAttributes=function(a){a=a.attributes;a=this._processAttributesForOutFields(a);return a=this._processAttributesForDistinctValues(a)};
a.prototype.getFieldValue=function(a,b){a=a.attributes;var d=this.fieldsMap.has(b),h=d?this.fieldsMap.get(b).name:b,e=null;this._fieldDataCache.has(h)?e=this._fieldDataCache.get(h).clause:d||(e=f.getWhereClause(b),this._fieldDataCache.set(h,{alias:h,clause:e}));return d?a[h]:e.calculateValue(a)};a.prototype.validateItem=function(a,b){this._fieldDataCache.has(b)||this._fieldDataCache.set(b,{alias:b,clause:f.getWhereClause(b)});return this._fieldDataCache.get(b).clause.testFeature(a.attributes)};a.prototype.validateItems=
function(a,b){var d=this;this._fieldDataCache.has(b)||this._fieldDataCache.set(b,{alias:b,clause:f.getWhereClause(b)});a=a.map(function(a){return d.getAttributes(a)});return this._fieldDataCache.get(b).clause.testSet(a)};a.prototype._processAttributesForOutFields=function(a){var b=this.outFields;if(!a||!b||!b.length)return a;for(var d={},f=0;f<b.length;f++){var e=this._fieldDataCache.get(b[f]),c=e.alias,e=e.clause;d[c]=e?e.calculateValue(a):a[c]}return d};a.prototype._processAttributesForDistinctValues=
function(a){if(!a||!this.returnDistinctValues)return a;var b=this.outFields,d=[];if(b)for(var f=0;f<b.length;f++){var e=this._fieldDataCache.get(b[f]).alias;d.push(a[e])}else for(e in a)d.push(a[e]);b=(b||["*"]).join(",")+"\x3d"+d.join(",");d=this._returnDistinctMap.get(b)||0;this._returnDistinctMap.set(b,++d);return 1<d?null:a};return a}();a.default=d})},"esri/layers/graphics/data/utils":function(){define(["require","exports","../featureConversionUtils","../OptimizedGeometry"],function(d,a,l,f){Object.defineProperty(a,
"__esModule",{value:!0});var h=new f.default,k=new f.default,b={esriGeometryPoint:l.convertToPoint,esriGeometryPolyline:l.convertToPolyline,esriGeometryPolygon:l.convertToPolygon,esriGeometryMultipoint:l.convertToMultipoint};a.getCentroid=function(a,b,e){if("esriGeometryPolygon"!==a.geometryType||!b.centroid&&!b.geometry)return null;b.centroid||(b.centroid=l.getCentroidOptimizedGeometry(new f.default,b.geometry,a.hasZ,a.hasM));return e?(b=l.quantizeOptimizedGeometry(k,b.centroid,a.hasZ,a.hasM,"esriGeometryPoint",
e),l.convertToPoint(b,a.hasZ,a.hasM)):l.convertToPoint(b.centroid,a.hasZ,a.hasM)};a.getGeometry=function(a,d,e,c){return d.geometry?e?(d=l.generalizeOptimizedGeometry(h,d.geometry,a.hasZ,a.hasM,a.geometryType,e),c&&(d=l.quantizeOptimizedGeometry(k,d,a.hasZ,a.hasM,a.geometryType,c)),b[a.geometryType](d,a.hasZ,a.hasM)):c?(d=l.quantizeOptimizedGeometry(k,d.geometry,a.hasZ,a.hasM,a.geometryType,c),b[a.geometryType](d,a.hasZ,a.hasM)):b[a.geometryType](d.geometry,a.hasZ,a.hasM):null}})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),
function(d,a,l,f,h,k,b,g){function p(){return f.create(function(a){return d(["../../../geometry/geometryEngine"],a)})}Object.defineProperty(a,"__esModule",{value:!0});var e={intersects:!0,contains:!0,within:!0,crosses:!0,touches:!0,overlaps:!0,"envelope-intersects":!0},c={point:!0,multipoint:!0,polyline:!0,polygon:!0,extent:!0},n={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0};a.importGeometryEngine=p;a.getGeodesicBufferOperator=function(){return p().then(function(a){return a.geodesicBuffer})};
a.getSpatialQueryOperator=function(a,b,c){if("intersects"===a){if("polygon"===b.type&&"esriGeometryPoint"===c)return f.resolve(h.polygonContainsPoint.bind(null,b.toJSON()));if("extent"===b.type)return f.resolve(k.getExtentIntersector(c).bind(null,b))}return p().then(function(c){return c[a].bind(null,b.toJSON())})};a.checkSpatialQuerySupport=function(a,d,h){var k=a.geometry;return k?!0!==e[a.spatialRelationship]?f.reject(new l("feature-store:unsupported-query","Unsupported query spatial relationship",
{query:a})):b.isValid(k.spatialReference)&&b.isValid(h)?!0!==c[k.type]?f.reject(new l("feature-store:unsupported-query","Unsupported query geometry type",{query:a})):!0!==n[d]?f.reject(new l("feature-store:unsupported-query","Unsupported layer geometry type",{query:a})):g.checkProjectionSupport(a.geometry&&a.geometry.spatialReference,a.outSpatialReference):f.resolve():null};a.canQueryWithRBush=function(a){switch(a.type){case "extent":return!0;case "polygon":return a.rings.every(function(a){return 5!==
a.length?!1:a[0][0]===a[1][0]&&a[0][0]===a[4][0]&&a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[0][1]===a[4][1]&&a[1][1]===a[2][1]});default:return!1}}})},"esri/tasks/support/Query":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils ../../geometry/support/typeUtils ../../symbols/support/jsonUtils ../../symbols/support/typeUtils ./QuantizationParameters ./StatisticDefinition".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x){var t=g({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),u=g({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",
esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(a){function b(b){b=a.call(this,b)||this;b.datumTransformation=null;b.distance=void 0;b.gdbVersion=null;b.geometry=null;b.geometryPrecision=void 0;b.groupByFieldsForStatistics=null;b.having=null;b.historicMoment=null;b.maxAllowableOffset=void 0;b.maxRecordCountFactor=1;b.multipatchOption=null;b.num=void 0;b.objectIds=null;b.orderByFields=null;b.outFields=null;b.outSpatialReference=null;b.outStatistics=
null;b.parameterValues=null;b.pixelSize=null;b.quantizationParameters=null;b.rangeValues=null;b.relationParameter=null;b.resultType=null;b.returnDistinctValues=!1;b.returnGeometry=!1;b.returnCentroid=!1;b.returnExceededLimitFeatures=!0;b.returnM=void 0;b.returnZ=void 0;b.source=null;b.spatialRelationship="intersects";b.start=void 0;b.sqlFormat=null;b.text=null;b.timeExtent=null;b.units="meters";b.where=null;return b}l(b,a);d=b;b.prototype.castDatumTransformation=function(a){return"number"===typeof a||
"object"===typeof a?a:null};b.prototype.writeHistoricMoment=function(a,b,c){b.historicMoment=a&&a.getTime()};b.prototype.writeParameterValues=function(a,b,c){if(a){c={};for(var e in a){var d=a[e];Array.isArray(d)?c[e]=d.map(function(a){return a instanceof Date?a.getTime():a}):c[e]=d instanceof Date?d.getTime():d}b.parameterValues=c}};b.prototype.writeStart=function(a,b,c){b.resultOffset=this.start;b.resultRecordCount=this.num||10;b.where="1\x3d1"};b.prototype.writeWhere=function(a,b,c){b.where=a||
"1\x3d1"};b.prototype.clone=function(){return new d(p.clone({datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};var d;b.MAX_MAX_RECORD_COUNT_FACTOR=5;f([e.property({json:{write:!0}})],b.prototype,"datumTransformation",void 0);f([e.cast("datumTransformation")],b.prototype,"castDatumTransformation",null);f([e.property({type:Number,
json:{write:!0}})],b.prototype,"distance",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"gdbVersion",void 0);f([e.property({types:n.types,json:{read:c.fromJSON,write:!0}})],b.prototype,"geometry",void 0);f([e.property({type:Number,json:{write:!0}})],b.prototype,"geometryPrecision",void 0);f([e.property({type:[String],json:{write:!0}})],b.prototype,"groupByFieldsForStatistics",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"having",void 0);f([e.property({type:Date})],
b.prototype,"historicMoment",void 0);f([e.writer("historicMoment")],b.prototype,"writeHistoricMoment",null);f([e.property({type:Number,json:{write:!0}})],b.prototype,"maxAllowableOffset",void 0);f([e.property({type:Number,cast:function(a){return 1>a?1:a>d.MAX_MAX_RECORD_COUNT_FACTOR?d.MAX_MAX_RECORD_COUNT_FACTOR:a},json:{write:{overridePolicy:function(a){return{enabled:1<a}}}}})],b.prototype,"maxRecordCountFactor",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"multipatchOption",
void 0);f([e.property({type:Number,json:{read:{source:"resultRecordCount"}}})],b.prototype,"num",void 0);f([e.property({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0);f([e.property({type:[String],json:{write:!0}})],b.prototype,"orderByFields",void 0);f([e.property({type:[String],json:{write:!0}})],b.prototype,"outFields",void 0);f([e.property({type:h.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);f([e.property({type:[x],
json:{write:!0}})],b.prototype,"outStatistics",void 0);f([e.property({json:{write:!0}})],b.prototype,"parameterValues",void 0);f([e.writer("parameterValues")],b.prototype,"writeParameterValues",null);f([e.property({types:q.types,json:{read:m.read,write:!0}})],b.prototype,"pixelSize",void 0);f([e.property({type:y.default,json:{write:!0}})],b.prototype,"quantizationParameters",void 0);f([e.property({type:[Object],json:{write:!0}})],b.prototype,"rangeValues",void 0);f([e.property({type:String,json:{read:{source:"relationParam"},
write:{target:"relationParam",overridePolicy:function(a){return{enabled:"relation"===this.spatialRelationship}}}}})],b.prototype,"relationParameter",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"resultType",void 0);f([e.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnDistinctValues",void 0);f([e.property({type:Boolean,json:{write:!0}})],b.prototype,"returnGeometry",void 0);f([e.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],
b.prototype,"returnCentroid",void 0);f([e.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:!a}}}}})],b.prototype,"returnExceededLimitFeatures",void 0);f([e.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnM",void 0);f([e.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnZ",void 0);f([e.property({json:{write:!0}})],b.prototype,"source",void 0);f([e.property({type:String,
json:{read:{source:"spatialRel",reader:t.read},write:{target:"spatialRel",writer:t.write}}})],b.prototype,"spatialRelationship",void 0);f([e.property({type:Number,json:{read:{source:"resultOffset"}}})],b.prototype,"start",void 0);f([e.writer("start"),e.writer("num")],b.prototype,"writeStart",null);f([e.property({type:String,json:{write:!0}})],b.prototype,"sqlFormat",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);f([e.property({type:k,json:{write:!0}})],b.prototype,
"timeExtent",void 0);f([e.property({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy:function(a){return{enabled:0<this.distance}}}}})],b.prototype,"units",void 0);f([e.property({type:String,json:{write:{overridePolicy:function(a){return{enabled:null!=a||0<this.start}}}}})],b.prototype,"where",void 0);f([e.writer("where")],b.prototype,"writeWhere",null);return b=d=f([e.subclass("esri.tasks.support.Query")],b)}(e.declared(b))})},"esri/TimeExtent":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k){var b={milliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},seconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},minutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},hours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},days:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},weeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},months:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},years:{getter:"getUTCFullYear",
setter:"setUTCFullYear",multiplier:1},decades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},centuries:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}};return function(a){function d(b,e){b=a.call(this)||this;b.endTime=null;b.startTime=null;return b}l(d,a);e=d;d.prototype.normalizeCtorArgs=function(a,b){return!a||a instanceof Date?{startTime:a,endTime:b}:a};d.prototype.readEndTime=function(a,b){return null!=b.endTime?new Date(b.endTime):null};d.prototype.writeEndTime=
function(a,b,e){b.endTime=a?a.getTime():null};d.prototype.readStartTime=function(a,b){return null!=b.startTime?new Date(b.startTime):null};d.prototype.writeStartTime=function(a,b,e){b.startTime=a?a.getTime():null};d.prototype.clone=function(){return new e({endTime:this.endTime,startTime:this.startTime})};d.prototype.intersection=function(a){if(!a)return null;var b=this.startTime?this.startTime.getTime():-Infinity,c=this.endTime?this.endTime.getTime():Infinity,d=a.startTime?a.startTime.getTime():-Infinity;
a=a.endTime?a.endTime.getTime():Infinity;var g,f;d>=b&&d<=c?g=d:b>=d&&b<=a&&(g=b);c>=d&&c<=a?f=c:a>=b&&a<=c&&(f=a);if(isNaN(g)||isNaN(f))return null;b=new e;b.startTime=-Infinity===g?null:new Date(g);b.endTime=Infinity===f?null:new Date(f);return b};d.prototype.offset=function(a,b){var c=new e,d=this.startTime,g=this.endTime;d&&(c.startTime=this._offsetDate(d,a,b));g&&(c.endTime=this._offsetDate(g,a,b));return c};d.prototype._offsetDate=function(a,e,d){a=new Date(a.getTime());e&&d&&(d=b[d],a[d.setter](a[d.getter]()+
e*d.multiplier));return a};var e;f([k.property({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"endTime",void 0);f([k.reader("endTime")],d.prototype,"readEndTime",null);f([k.writer("endTime")],d.prototype,"writeEndTime",null);f([k.property({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"startTime",void 0);f([k.reader("startTime")],d.prototype,"readStartTime",null);f([k.writer("startTime")],d.prototype,"writeStartTime",null);return d=e=f([k.subclass("esri.TimeExtent")],d)}(k.declared(h))})},
"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z){function D(a,b,c){b=a?w[a.type]||null:null;if(b)return b=
new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new f("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function B(a,b,c){if(!a)return null;if(!c||"web-scene"!==c.origin||a.isInstanceOf(y)||a.isInstanceOf(t))return a.write(b,c);var e=z.to3D(a);if(e.symbol)return e.symbol.write(b,c);c.messages&&c.messages.push(new l("symbol:unsupported","Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",
{symbol:a,context:c,error:e.error}));return null}Object.defineProperty(a,"__esModule",{value:!0});var w={esriSMS:q,esriPMS:p,esriTS:x,esriSLS:m,esriSFS:n,esriPFS:g,PointSymbol3D:e,LineSymbol3D:k,PolygonSymbol3D:c,MeshSymbol3D:b,LabelSymbol3D:h,styleSymbolReference:t};a.read=D;a.writeTarget=function(a,b,c,e){(a=B(a,{},e))&&(b[c]=a)};a.write=B;a.fromJSON=function(a,b){return D(a,null,b)};a.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new u}c&&c.read(a,
b);return c}})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(d,a,l,f,h){d=function(a){function b(d,f,e){var c=a.call(this,d,f,e)||this;return c instanceof b?c:new b(d,f,e)}l(b,a);return b}(h);d.prototype.type="warning";return d})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c){var n=h.ofType({base:null,key:"type",typeMap:{text:p}});return function(a){function d(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.styleOrigin=null;b.symbolLayers=new n;b.type="label-3d";return b}l(d,a);g=d;d.prototype.supportsCallout=function(){return!0};d.prototype.hasVisibleCallout=function(){return e.hasVisibleCallout(this)};d.prototype.hasVisibleVerticalOffset=function(){return e.hasVisibleVerticalOffset(this)};d.prototype.clone=function(){return new g({styleOrigin:k.clone(this.styleOrigin),
symbolLayers:k.clone(this.symbolLayers),thumbnail:k.clone(this.thumbnail),callout:k.clone(this.callout),verticalOffset:k.clone(this.verticalOffset)})};var g;f([b.property({type:c.default,json:{write:!0}})],d.prototype,"verticalOffset",void 0);f([b.property(e.calloutProperty)],d.prototype,"callout",void 0);f([b.property({json:{read:!1,write:!1}})],d.prototype,"styleOrigin",void 0);f([b.property({type:n})],d.prototype,"symbolLayers",void 0);f([b.enumeration.serializable()({LabelSymbol3D:"label-3d"})],
d.prototype,"type",void 0);return d=g=f([b.subclass("esri.symbols.LabelSymbol3D")],d)}(b.declared(g))})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n,m){function q(a){return a?a.isInstanceOf&&a.isInstanceOf(A):!1}function y(a){return a?q(a)?a.toArray():
a.length?Array.prototype.slice.apply(a):[]:[]}function x(a){if(a&&a.length)return a[0]}function t(a,b,c,e){b&&b.forEach(function(b,d,g){a.push(b);t(a,c.call(e,b,d,g),c,e)})}d=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a};return a}();var u=function(){},z=new e(d,!0,function(a){a.item=null;a.target=null}),D=new Set,
B=new Set,w=new Set,C=new Map,E=0,A=function(a){function e(b){b=a.call(this,b)||this;b._boundDispatch=b._dispatchColChange.bind(b);b._chgListeners=[];b._notifications=null;b._timer=null;b.length=0;b._items=[];Object.defineProperty(b,"uid",{value:E++});return b}l(e,a);d=e;e.ofType=function(a){if(!a)return d;if(C.has(a))return C.get(a);var b;if("function"===typeof a)b=a.prototype.declaredClass;else if(a.base)b=a.base.prototype.declaredClass;else for(var c in a.typeMap){var e=a.typeMap[c].prototype.declaredClass;
b=b?b+(" | "+e):e}b=d.createSubclass({declaredClass:"esri.core.Collection\x3c"+b+"\x3e"});b.isCollection=q;c={Type:a,ensureType:"function"===typeof a?m.ensureType(a):m.ensureOneOfType(a)};Object.defineProperty(b.prototype,"itemType",{value:c});C.set(a,b);return b};e.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||q(a)?{items:a}:a:{}};Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,
[0,this.length].concat(y(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0});e.prototype.on=function(a,b){var c;Array.isArray(a)?c=a:-1<a.indexOf(",")&&(c=a.split(/\s*,\s*/));if(c){var e=[];for(a=0;a<c.length;a++)e.push(this.on(c[a],b));e.remove=function(){for(var a=0;a<e.length;a++)e[a].remove()};return e}if("change"===a){var d=this._chgListeners,g={removed:!1,callback:b};d.push(g);this._notifications&&this._notifications.push({listeners:d.slice(),items:this._items.slice(),changes:[]});
return{remove:function(){this.remove=u;g.removed=!0;d.splice(d.indexOf(g),1)}}}return h.after(this,"on"+a,b,!0)};e.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)};e.prototype.add=function(a,b){if(this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice(b,0,a);this._emitAfterChanges();return this};e.prototype.addMany=function(a,b){void 0===b&&(b=this._items.length);if(!a||!a.length||this._emitBeforeChanges())return this;
b=this.getNextIndex(b);this._splice.apply(this,[b,0].concat(y(a)));this._emitAfterChanges();return this};e.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];this._emitAfterChanges();return a};e.prototype.clone=function(){return this._createNewInstance({items:this._items.map(p.clone)})};e.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c,a=a.map(y);return this._createNewInstance({items:(c=
this._items).concat.apply(c,a)})};e.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges()){for(var c=this._splice(0,this.length),e=c.length,d=0;d<e;d++)a.call(b,c[d],d,c);this._emitAfterChanges()}};e.prototype.every=function(a,b){return this._items.every(a,b)};e.prototype.filter=function(a,b){var c;c=2===arguments.length?this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:c})};e.prototype.find=function(a,b){if("function"!==typeof a)throw new TypeError(a+
" is not a function");for(var c=this._items,e=c.length,d=0;d<e;d++){var g=c[d];if(a.call(b,g,d,c))return g}};e.prototype.findIndex=function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,e=c.length,d=0;d<e;d++)if(a.call(b,c[d],d,c))return d;return-1};e.prototype.flatten=function(a,b){var c=[];t(c,this,a,b);return new d(c)};e.prototype.forEach=function(a,b){for(var c=this._items,e=c.length,d=0;d<e;d++)a.call(b,c[d],d,c)};e.prototype.getItemAt=function(a){return this._items[a]};
e.prototype.getNextIndex=function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a};e.prototype.includes=function(a,b){void 0===b&&(b=0);return arguments.length?-1!==this._items.indexOf(a,b):!1};e.prototype.indexOf=function(a,b){void 0===b&&(b=0);return this._items.indexOf(a,b)};e.prototype.join=function(a){void 0===a&&(a=",");return this._items.join(a)};e.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(a,b)};e.prototype.map=function(a,
b){a=this._items.map(a,b);return new d({items:a})};e.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var c=this.indexOf(a);if(-1!==c){0>b?b=0:b>=this.length&&(b=this.length-1);if(c!==b){if(this._emitBeforeChanges())return a;this._splice(c,1);this._splice(b,0,a);this._emitAfterChanges()}return a}};e.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=x(this._splice(this.length-1,1));this._emitAfterChanges();return a}};e.prototype.push=function(){for(var a=[],b=
0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(a));this._emitAfterChanges();return this.length};e.prototype.reduce=function(a,b){var c=this._items;return 2===arguments.length?c.reduce(a,b):c.reduce(a)};e.prototype.reduceRight=function(a,b){var c=this._items;return 2===arguments.length?c.reduceRight(a,b):c.reduceRight(a)};e.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};e.prototype.removeAt=
function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=x(this._splice(a,1)),this._emitAfterChanges(),a};e.prototype.removeMany=function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=q(a)?a.toArray():a;for(var b=this._items,c=[],e=a.length,d=0;d<e;d++){var g=b.indexOf(a[d]);if(-1<g){for(var f=d+1,h=g+1,k=Math.min(a.length-f,b.length-h),m=0;m<k&&a[f+m]===b[h+m];)m++;f=1+m;(g=this._splice(g,f))&&0<g.length&&c.push.apply(c,g);d+=f-1}}this._emitAfterChanges();return c};e.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);a&&(a.reverse(),this._splice.apply(this,[0,0].concat(a)));this._emitAfterChanges();return this};e.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=x(this._splice(0,1));this._emitAfterChanges();return a}};e.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(a,b)})};e.prototype.some=function(a,b){return this._items.some(a,
b)};e.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);arguments.length?b.sort(a):b.sort();this._splice.apply(this,[0,0].concat(b));return this};e.prototype.splice=function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];if(this._emitBeforeChanges())return[];c=this._splice.apply(this,[a,b].concat(c))||[];this._emitAfterChanges();return c};e.prototype.toArray=function(){return this._items.slice()};e.prototype.toJSON=
function(){return this.toArray()};e.prototype.toLocaleString=function(){return this._items.toLocaleString()};e.prototype.toString=function(){return this._items.toString()};e.prototype.unshift=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(a));this._emitAfterChanges();return this.length};e.prototype._createNewInstance=function(a){return new this.constructor(a)};e.prototype._splice=function(a,
b){for(var e=[],d=2;d<arguments.length;d++)e[d-2]=arguments[d];var d=this._items,g=this.constructor.prototype.itemType,f,h;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=c.schedule(this._boundDispatch));if(b){h=d.splice(a,b);if(this.hasEventListener("before-remove")){var k=z.acquire();k.target=this;k.cancellable=!0;for(var m=0,l=h.length;m<l;m++)f=
h[m],k.reset(f),this.emit("before-remove",k),k.defaultPrevented&&(h.splice(m,1),d.splice(a,0,f),a+=1,--m,--l);z.release(k)}this.length=this._items.length;if(this.hasEventListener("after-remove")){f=z.acquire();f.target=this;f.cancellable=!1;l=h.length;for(m=0;m<l;m++)f.reset(h[m]),this.emit("after-remove",f);z.release(f)}}if(e&&e.length){if(g){m=[];for(l=0;l<e.length;l++)f=e[l],k=g.ensureType(f),null==k&&null!=f||m.push(k);e=m}g=this.hasEventListener("before-add");m=this.hasEventListener("after-add");
l=a===this.length;if(g||m){f=z.acquire();f.target=this;f.cancellable=!0;k=z.acquire();k.target=this;k.cancellable=!1;for(var n=0,p=e;n<p.length;n++){var q=p[n];g?(f.reset(q),this.emit("before-add",f),f.defaultPrevented||(l?d.push(q):d.splice(a++,0,q),this._set("length",d.length),m&&(k.reset(q),this.emit("after-add",k)))):(l?d.push(q):d.splice(a++,0,q),this._set("length",d.length),k.reset(q),this.emit("after-add",k))}z.release(f)}else l?d.push.apply(d,e):d.splice.apply(d,[a,0].concat(e)),this._set("length",
d.length)}(e&&e.length||h&&h.length)&&this._notifyChangeEvent(e,h);return h};e.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=z.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;z.release(b)}return a};e.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=z.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);z.release(a)}};e.prototype._notifyChangeEvent=
function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})};e.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var c=function(a){var c=a.changes;D.clear();B.clear();w.clear();for(var d=0;d<c.length;d++){var g=c[d],f=g.added,g=g.removed;if(f)if(0===w.size&&0===B.size)for(var h=0,k=f;h<k.length;h++)f=k[h],D.add(f);
else for(h=0,k=f;h<k.length;h++)f=k[h],B.has(f)?(w.add(f),B.delete(f)):w.has(f)||D.add(f);if(g)if(0===w.size&&0===D.size)for(h=0;h<g.length;h++)f=g[h],B.add(f);else for(h=0;h<g.length;h++)f=g[h],D.has(f)?D.delete(f):(w.delete(f),B.add(f))}var m=b.acquire();D.forEach(function(a){m.push(a)});var l=b.acquire();B.forEach(function(a){l.push(a)});var n=e._items,p=a.items,q=b.acquire();w.forEach(function(a){p.indexOf(a)!==n.indexOf(a)&&q.push(a)});if(a.listeners&&(m.length||l.length||q.length))for(c={target:e,
added:m,removed:l,moved:q},d=a.listeners.length,f=0;f<d;f++)g=a.listeners[f],g.removed||g.callback.call(e,c);b.release(m);b.release(l);b.release(q)},e=this,d=0;d<a.length;d++)c(a[d]);D.clear();B.clear();w.clear()}};var d;e.isCollection=q;f([n.property()],e.prototype,"length",void 0);f([n.property()],e.prototype,"items",null);return e=d=f([n.subclass("esri.core.Collection")],e)}(n.declared(k,g));return A})},"esri/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],function(d,
a,l,f){function h(a,b,d,f){var e;Array.isArray(b)?e=b:-1<b.indexOf(",")&&(e=b.split(/\s*,\s*/));if(e){var c=[];for(b=0;b<e.length;b++)c.push(h(a,e[b],d,f));c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c}return f(a,b)}return function(){function a(){}a.prototype.emit=function(a,d){if(this.hasEventListener(a))return d=d||{},d.target||(d.target=this),f.emit(this,a,d)};a.prototype.on=function(a,d){return h(this,a,d,function(a,b){return l.after(a,"on"+b,d,!0)})};a.prototype.hasEventListener=
function(a){a="on"+a;return!(!this[a]||!this[a].after)};return a}()})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/kebabDictionary ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D,B,w,C){var E={icon:y,object:t,line:x,path:u,fill:q,extrude:m,text:B},A=h.ofType({base:D,key:"type",typeMap:E}),H=b.strict()({PointSymbol3D:"point-3d",PolygonSymbol3D:"polygon-3d",LineSymbol3D:"line-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),F=g.getLogger("esri.symbols.Symbol3D");return function(a){function b(b){b=a.call(this)||this;b.styleOrigin=null;b.thumbnail=null;b.type=null;var c=b.__accessor__&&b.__accessor__.metadatas&&b.__accessor__.metadatas.symbolLayers;
b._set("symbolLayers",new (c&&c.type||h));return b}l(b,a);Object.defineProperty(b.prototype,"color",{get:function(){return null},set:function(a){F.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"symbolLayers",{set:function(a){k.referenceSetter(a,this._get("symbolLayers"))},enumerable:!0,configurable:!0});b.prototype.readSymbolLayers=function(a,b,c){b=[];
for(var d=0;d<a.length;d++){var g=a[d],f=D.typeJSONDictionary.read(g.type),h=f&&E[f];h?(g=new h,g.read(a[d],c),b.push(g)):(F.warn("Unknown symbol layer type: "+f),c&&c.messages&&c.messages.push(new e("symbol-layer:unsupported","Symbol layers of type '"+(f||g.type||"unknown")+"' are not supported",{definition:g,context:c})))}return b};b.prototype.readStyleOrigin=function(a,b,c){if(a.styleUrl&&a.name)return b=p.fromJSON(a.styleUrl,c),new w({styleUrl:b,name:a.name});if(a.styleName&&a.name)return new w({portal:c&&
c.portal||n.getDefault(),styleName:a.styleName,name:a.name});c&&c.messages&&c.messages.push(new e("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:c,definition:a}))};b.prototype.writeStyleOrigin=function(a,b,c,d){a.styleUrl&&a.name?(c=p.toJSON(a.styleUrl,d),p.isAbsolute(c)&&(c=p.normalize(c)),b.styleOrigin={styleUrl:c,name:a.name}):a.styleName&&a.name&&(a.portal&&d&&d.portal&&!p.hasSamePortal(a.portal.restUrl,d.portal.restUrl)?
d&&d.messages&&d.messages.push(new e("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin={styleName:a.styleName,name:a.name})};b.prototype.normalizeCtorArgs=function(a){return a instanceof D||a&&E[a.type]?{symbolLayers:[a]}:Array.isArray(a)?{symbolLayers:a}:a};f([c.property({json:{read:!1,write:!1}})],b.prototype,"color",null);f([c.property({type:A,nonNullable:!0,json:{write:!0}}),
c.cast(k.castForReferenceSetter)],b.prototype,"symbolLayers",null);f([c.reader("symbolLayers")],b.prototype,"readSymbolLayers",null);f([c.property({type:w})],b.prototype,"styleOrigin",void 0);f([c.reader("styleOrigin")],b.prototype,"readStyleOrigin",null);f([c.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],b.prototype,"writeStyleOrigin",null);f([c.property({type:C.default,json:{read:!1}})],b.prototype,"thumbnail",
void 0);f([c.property({type:H.apiValues,readOnly:!0,json:{type:H.jsonValues,read:!1}})],b.prototype,"type",void 0);return b=f([c.subclass("esri.symbols.Symbol3D")],b)}(c.declared(z))})},"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.referenceSetter=function(a,d,k){void 0===k&&(k=l);d||(d=new k);d.removeAll();a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(l))?d.addMany(a):d.add(a);return d};
a.castForReferenceSetter=function(a){return a}})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper dojo/_base/kernel dojo/_base/url ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D,B,w){var C,E={Bookmark:function(){return x.create(function(a){return d(["./Bookmark"],a)})},Portal:function(){return x.create(function(a){return d(["./Portal"],a)})},PortalFolder:function(){return x.create(function(a){return d(["./PortalFolder"],a)})},PortalGroup:function(){return x.create(function(a){return d(["./PortalGroup"],a)})},PortalItem:function(){return x.create(function(a){return d(["./PortalItem"],a)})},PortalQueryParams:function(){return x.create(function(a){return d(["./PortalQueryParams"],
a)})},PortalQueryResult:function(){return x.create(function(a){return d(["./PortalQueryResult"],a)})},PortalRating:function(){return x.create(function(a){return d(["./PortalRating"],a)})},PortalUser:function(){return x.create(function(a){return d(["./PortalUser"],a)})}};return function(a){function m(b){b=a.call(this)||this;b.access=null;b.allSSL=!1;b.authMode="auto";b.authorizedCrossOriginDomains=null;b.basemapGalleryGroupQuery=null;b.bingKey=null;b.canListApps=!1;b.canListData=!1;b.canListPreProvisionedItems=
!1;b.canProvisionDirectPurchase=!1;b.canSearchPublic=!0;b.canShareBingPublic=!1;b.canSharePublic=!1;b.canSignInArcGIS=!1;b.canSignInIDP=!1;b.colorSetsGroupQuery=null;b.commentsEnabled=!1;b.created=null;b.culture=null;b.customBaseUrl=null;b.defaultBasemap=null;b.defaultExtent=null;b.defaultVectorBasemap=null;b.description=null;b.eueiEnabled=!1;b.featuredGroups=null;b.featuredItemsGroupQuery=null;b.galleryTemplatesGroupQuery=null;b.livingAtlasGroupQuery=null;b.hasCategorySchema=!1;b.helperServices=
null;b.homePageFeaturedContent=null;b.homePageFeaturedContentCount=null;b.httpPort=null;b.httpsPort=null;b.id=null;b.ipCntryCode=null;b.isPortal=!1;b.layerTemplatesGroupQuery=null;b.maxTokenExpirationMinutes=null;b.modified=null;b.name=null;b.portalHostname=null;b.portalMode=null;b.portalProperties=null;b.region=null;b.rotatorPanels=null;b.showHomePageDescription=!1;b.supportsHostedServices=!1;b.symbolSetsGroupQuery=null;b.templatesGroupQuery=null;b.units=null;b.url=p.portalUrl;b.urlKey=null;b.user=
null;b.useStandardizedQuery=!1;b.useVectorBasemaps=!1;b.vectorBasemapGalleryGroupQuery=null;return b}f(m,a);y=m;m.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};m.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};m.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];-1===p.request.trustedServers.indexOf(c)&&p.request.trustedServers.push(c)}return a};
m.prototype.readDefaultBasemap=function(a){return a?(a=C.fromJSON(a),a.portalItem={portal:this},a):null};m.prototype.readDefaultVectorBasemap=function(a){return a?(a=C.fromJSON(a),a.portalItem={portal:this},a):null};Object.defineProperty(m.prototype,"extraQuery",{get:function(){var a=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!a?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"isOrganization",{get:function(){return!!this.access},
enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"restUrl",{get:function(){var a=this.url;if(a)var b=a.indexOf("/sharing"),a=0<b?a.substring(0,b):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,b=this.thumbnail;return a&&b?this._normalizeSSL(a+"/portals/self/resources/"+b):null},enumerable:!0,configurable:!0});m.prototype.readUrlKey=function(a){return a?a.toLowerCase():
a};m.prototype.readUser=function(a){var b=null;a&&(b=w.fromJSON(a),b.portal=this);return b};m.prototype.load=function(){var a=this,b=x.create(function(a){return d(["../Basemap"],a)}).then(function(a){C=a}).then(function(){return a._fetchSelf()}).then(function(b){if(e.id){var c=e.id;a.credential=c.findCredential(a.restUrl);a.credential||a.authMode!==y.AUTH_MODE_AUTO||(a._esriId_credentialCreateHandle=c.on("credential-create",function(){c.findCredential(a.restUrl)&&a._signIn()}))}a.read(b)});this.addResolvingPromise(b);
return this.when()};m.prototype.fetchBasemaps=function(a){var b=new D;b.query=a||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);b.disableExtraQuery=!0;return this.queryGroups(b).then(function(a){b.num=100;b.query='type:"Web Map" -type:"Web Application"';return a.total?(a=a.results[0],b.sortField=a.sortField||"name",b.sortOrder=a.sortOrder||"desc",a.queryItems(b)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new C({portalItem:a})}):
[]})};m.prototype.fetchCategorySchema=function(){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema").then(function(a){return a.categorySchema}):x.resolve([])};m.prototype.fetchFeaturedGroups=function(){var a=this.featuredGroups,b=new D;b.num=100;b.sortField="title";if(a&&a.length){for(var c=[],e=0;e<a.length;e++){var d=a[e];c.push('(title:"'+d.title+'" AND owner:'+d.owner+")")}b.query=c.join(" OR ");return this.queryGroups(b).then(function(a){return a.results})}return x.resolve([])};
m.prototype.fetchRegions=function(){return this._request(this.restUrl+"/portals/regions",{query:{culture:this.user&&this.user.culture||this.culture||b.locale}})};m.getDefault=function(){y._default||(y._default=new y);return y._default};m.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")};m.prototype.queryItems=function(a){return this._queryPortal("/search",a,"PortalItem")};m.prototype.queryUsers=function(a){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",
a,"PortalUser")};m.prototype.toJSON=function(){throw new n("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};m.prototype._fetchSelf=function(a,c){void 0===a&&(a=this.authMode);void 0===c&&(c=!1);var e=this.restUrl+"/portals/self";a={authMode:a,query:{culture:b.locale}};"auto"===a.authMode&&(a.authMode="no-prompt");c&&(a.query.default=!0);return this._request(e,a)};m.prototype._queryPortal=function(a,b,c){var e=this,d=function(c){return e._request(e.restUrl+a,b.toRequestOptions(e)).then(function(a){var d=
b.clone();d.start=a.nextStart;return new B({nextQueryParams:d,queryParams:b,total:a.total,results:y._resultsToTypedArray(c,{portal:e},a)})}).then(function(a){return x.all(a.results.map(function(b){return"function"===typeof b.when?b.when():a})).then(function(){return a},function(){return a})})};return c&&E[c]?E[c]().then(function(a){return d(a)}):d()};m.prototype._signIn=function(){var a=this;if(this.authMode===y.AUTH_MODE_ANONYMOUS)return x.reject(new n("portal:invalid-auth-mode",'Current "authMode"\' is "'+
this.authMode+'"'));if("failed"===this.loadStatus)return x.reject(this.loadError);var b=function(b){return x.resolve().then(function(){if("not-loaded"===a.loadStatus)return b||(a.authMode="immediate"),a.load().then(function(){return null});if("loading"===a.loadStatus)return a.load().then(function(){if(a.credential)return null;a.credential=b;return a._fetchSelf("immediate")});if(a.user&&a.credential===b)return null;a.credential=b;return a._fetchSelf("immediate")}).then(function(b){b&&a.read(b)})};
return e.id?e.id.getCredential(this.restUrl).then(function(a){return b(a)}):b(this.credential)};m.prototype._normalizeSSL=function(a){var b=this.allSSL||t.isAppHTTPS();if(this.isPortal){var c=new g(a);return-1<this.portalHostname.toLowerCase().indexOf(c.host.toLowerCase())&&c.port&&"80"!==c.port&&"443"!==c.port?b?"https://"+c.host+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+c.path+"?"+c.query:"http://"+c.host+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:"")+c.path+"?"+c.query:
b?a.replace("http:","https:"):a}return b?a.replace("http:","https:"):a};m.prototype._normalizeUrl=function(a){var b=this.credential&&this.credential.token;return this._normalizeSSL(b?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+b:a)};m.prototype._requestToTypedArray=function(a,b,c){var e=this,g=function(c){return e._request(a,b).then(function(a){var b=y._resultsToTypedArray(c,{portal:e},a);return x.all(b.map(function(b){return"function"===typeof b.when?b.when():a})).then(function(){return b},function(){return b})})};
return c?x.create(function(a){return d(["./"+c],a)}).then(function(a){return g(a)}):g()};m.prototype._request=function(a,b){var e=this.authMode===y.AUTH_MODE_ANONYMOUS?"anonymous":"auto",d=null,g="auto",f={f:"json"},h="json";b&&(b.authMode&&(e=b.authMode),b.body&&(d=b.body),b.method&&(g=b.method),b.query&&(f=l({},f,b.query)),b.responseType&&(h=b.responseType));b={authMode:e,body:d,method:g,query:f,responseType:h,timeout:0};return c(this._normalizeSSL(a),b).then(function(a){return a.data})};m._resultsToTypedArray=
function(a,b,c){if(c){if(c=c.listings||c.notifications||c.userInvitations||c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c.relatedItems||c,a||b)c=c.map(function(c){c=q.mixin(a?a.fromJSON(c):c,b);"function"===typeof c.load&&c.load();return c})}else c=[];return c};var y;m.AUTH_MODE_ANONYMOUS="anonymous";m.AUTH_MODE_AUTO="auto";m.AUTH_MODE_IMMEDIATE="immediate";h([u.property()],m.prototype,"access",void 0);h([u.property()],m.prototype,"allSSL",void 0);h([u.property()],m.prototype,"authMode",
void 0);h([u.property()],m.prototype,"authorizedCrossOriginDomains",void 0);h([u.reader("authorizedCrossOriginDomains")],m.prototype,"readAuthorizedCrossOriginDomains",null);h([u.property()],m.prototype,"basemapGalleryGroupQuery",void 0);h([u.property()],m.prototype,"bingKey",void 0);h([u.property()],m.prototype,"canListApps",void 0);h([u.property()],m.prototype,"canListData",void 0);h([u.property()],m.prototype,"canListPreProvisionedItems",void 0);h([u.property()],m.prototype,"canProvisionDirectPurchase",
void 0);h([u.property()],m.prototype,"canSearchPublic",void 0);h([u.property()],m.prototype,"canShareBingPublic",void 0);h([u.property()],m.prototype,"canSharePublic",void 0);h([u.property()],m.prototype,"canSignInArcGIS",void 0);h([u.property()],m.prototype,"canSignInIDP",void 0);h([u.property()],m.prototype,"colorSetsGroupQuery",void 0);h([u.property()],m.prototype,"commentsEnabled",void 0);h([u.property({type:Date})],m.prototype,"created",void 0);h([u.property()],m.prototype,"credential",void 0);
h([u.property()],m.prototype,"culture",void 0);h([u.property()],m.prototype,"currentVersion",void 0);h([u.property()],m.prototype,"customBaseUrl",void 0);h([u.property()],m.prototype,"defaultBasemap",void 0);h([u.reader("defaultBasemap")],m.prototype,"readDefaultBasemap",null);h([u.property({type:z})],m.prototype,"defaultExtent",void 0);h([u.property()],m.prototype,"defaultVectorBasemap",void 0);h([u.reader("defaultVectorBasemap")],m.prototype,"readDefaultVectorBasemap",null);h([u.property()],m.prototype,
"description",void 0);h([u.property()],m.prototype,"eueiEnabled",void 0);h([u.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],m.prototype,"extraQuery",null);h([u.property()],m.prototype,"featuredGroups",void 0);h([u.property()],m.prototype,"featuredItemsGroupQuery",void 0);h([u.property()],m.prototype,"galleryTemplatesGroupQuery",void 0);h([u.property()],m.prototype,"livingAtlasGroupQuery",void 0);h([u.property()],m.prototype,"hasCategorySchema",void 0);h([u.property()],m.prototype,
"helpBase",void 0);h([u.property()],m.prototype,"helperServices",void 0);h([u.property()],m.prototype,"helpMap",void 0);h([u.property()],m.prototype,"homePageFeaturedContent",void 0);h([u.property()],m.prototype,"homePageFeaturedContentCount",void 0);h([u.property()],m.prototype,"httpPort",void 0);h([u.property()],m.prototype,"httpsPort",void 0);h([u.property()],m.prototype,"id",void 0);h([u.property()],m.prototype,"ipCntryCode",void 0);h([u.property({dependsOn:["access"],readOnly:!0})],m.prototype,
"isOrganization",null);h([u.property()],m.prototype,"isPortal",void 0);h([u.property()],m.prototype,"layerTemplatesGroupQuery",void 0);h([u.property()],m.prototype,"maxTokenExpirationMinutes",void 0);h([u.property({type:Date})],m.prototype,"modified",void 0);h([u.property()],m.prototype,"name",void 0);h([u.property()],m.prototype,"portalHostname",void 0);h([u.property()],m.prototype,"portalMode",void 0);h([u.property()],m.prototype,"portalProperties",void 0);h([u.property()],m.prototype,"region",
void 0);h([u.property({dependsOn:["url"],readOnly:!0})],m.prototype,"restUrl",null);h([u.property()],m.prototype,"rotatorPanels",void 0);h([u.property()],m.prototype,"showHomePageDescription",void 0);h([u.property()],m.prototype,"staticImagesUrl",void 0);h([u.property()],m.prototype,"stylesGroupQuery",void 0);h([u.property()],m.prototype,"supportsHostedServices",void 0);h([u.property()],m.prototype,"symbolSetsGroupQuery",void 0);h([u.property()],m.prototype,"templatesGroupQuery",void 0);h([u.property()],
m.prototype,"thumbnail",void 0);h([u.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],m.prototype,"thumbnailUrl",null);h([u.property()],m.prototype,"units",void 0);h([u.property()],m.prototype,"url",void 0);h([u.property()],m.prototype,"urlKey",void 0);h([u.reader("urlKey")],m.prototype,"readUrlKey",null);h([u.property()],m.prototype,"user",void 0);h([u.reader("user")],m.prototype,"readUser",null);h([u.property()],m.prototype,"useStandardizedQuery",void 0);h([u.property()],m.prototype,"useVectorBasemaps",
void 0);h([u.property()],m.prototype,"vectorBasemapGalleryGroupQuery",void 0);h([k(1,u.cast(D))],m.prototype,"_queryPortal",null);return m=y=h([u.subclass("esri.portal.Portal")],m)}(u.declared(m,y))})},"esri/core/Loadable":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./Error ./lang ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators".split(" "),function(d,a,l,f,h,k,b,g,p,e,c){d=function(a){function b(){var b=a.call(this)||this;
b.loadError=null;b.loadStatus="not-loaded";b.loadWarnings=null;b._set("loadWarnings",[]);b.addResolvingPromise(p.create(function(a){var c=!1,e=b.load.bind(b);b.load=function(){"not-loaded"===b.loadStatus&&(b._set("loadStatus","loading"),e());c||(a(),c=!0);return b.when()}}));b.when(function(a){b._set("loadStatus","loaded")},function(a){b._set("loadStatus","failed");b._set("loadError",a)});return b}l(b,a);Object.defineProperty(b.prototype,"loaded",{get:function(){return"loaded"===this.loadStatus},
enumerable:!0,configurable:!0});b.prototype.load=function(){return null};b.prototype.cancelLoad=function(){if(this.isFulfilled())return this;this._set("loadError",new k("load:cancelled","Cancelled"));this._promiseProps.resolver.reject(this.loadError);return this};f([c.property({readOnly:!0,dependsOn:["loadStatus"]})],b.prototype,"loaded",null);f([c.property({readOnly:!0})],b.prototype,"loadError",void 0);f([c.property()],b.prototype,"loadStatus",void 0);f([c.property({type:[e],readOnly:!0})],b.prototype,
"loadWarnings",void 0);return b=f([c.subclass("esri.core.Loadable")],b)}(c.declared(h,g));d.prototype["-chains-"]=b.mixin({},h._meta.chains,{load:"after"});return d})},"esri/core/Promise":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./Error ./promiseUtils ./scheduling ./accessorSupport/decorators".split(" "),function(d,a,l,f,h,k,b,g,p){function e(a){var c=a._promiseProps;if(!c.isFulfilled()){var e=c.resolvingPromises,d,f;c.allPromise&&c.allPromise.cancel();
var h,k=b.create(function(a,b){h={resolve:a,reject:b}});for(d=e.length-1;0<=d;d--)f=e[d],f.isCanceled&&f.isCanceled()&&e.splice(d,1);f=null;(c.allPromise=b.all(e.concat([k]))).then(function(){c.resolver.resolve(a);a=c=h=c.allPromise=c.resolvingPromises=null},function(b){c.allPromise=null;if(!b||"cancel"!==b.dojoType){var e=Array.prototype.slice.call(arguments,0);c.resolver.reject(e[0]);a=c=h=c.allPromise=c.resolvingPromises=null}});h&&g.schedule(function(){h&&h.resolve()})}}var c=function(a){a=new k("AbortError");
a.target=this.instance;a.dojoType="cancel";return a},n=function(){function a(a){var e=this;this.canceler=c.bind(this);this.status=void 0;this.initialized=!1;this.resolvingPromises=[];this.instance=a;this.promise=b.create(function(a,b){e.resolver={resolve:a,reject:b}});this.promise.then(function(){e.status=1},function(){e.status=2})}a.prototype.cancel=function(){if(!this.isFulfilled()){this.allPromise.cancel();for(var a=this.resolvingPromises.concat(),b=a.length-1;0<=b;b--)a[b].cancel();this.resolver.cancel()}};
a.prototype.isResolved=function(){return 1===this.status};a.prototype.isRejected=function(){return 2===this.status};a.prototype.isFulfilled=function(){return!!this.status};return a}();return function(a){function c(){var b=a.call(this)||this;b._promiseProps=new n(b);var c=b.postscript;c?b.postscript=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];c.apply(b,a);b.postscript=c;e(b)}:e(b);return b}l(c,a);c.prototype.isResolved=function(){return this._promiseProps.isResolved()};c.prototype.isRejected=
function(){return this._promiseProps.isRejected()};c.prototype.isFulfilled=function(){return this._promiseProps.isFulfilled()};c.prototype.when=function(a,c){var e=this;return b.create(function(a,b){e._promiseProps.promise.then(a,b)},this._promiseProps.canceler).then(a,c)};c.prototype.catch=function(a){return this.when(null,a)};c.prototype.addResolvingPromise=function(a){a&&!this._promiseProps.isFulfilled()&&("_promiseProps"in a?this._promiseProps.resolvingPromises.push(a.when()):this._promiseProps.resolvingPromises.push(a),
e(this))};return c=f([p.subclass()],c)}(p.declared(h))})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n){var m=b({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});return function(a){function b(b){b=a.call(this)||this;b.categories=null;b.disableExtraQuery=!1;b.extent=null;b.num=10;b.query=null;b.sortField=null;b.start=1;return b}f(b,a);d=b;Object.defineProperty(b.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new d({categories:this.categories?g.clone(this.categories):
null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};b.prototype.toRequestOptions=function(a,b){var e;this.categories&&(e=this.categories.map(function(a){return Array.isArray(a)?JSON.stringify(a):a}));var d;if(this.extent){var g=n.project(this.extent,c.WGS84);g&&(d=g.xmin+","+g.ymin+","+g.xmax+","+g.ymax)}g=this.query;!this.disableExtraQuery&&a.extraQuery&&(g="("+
g+")"+a.extraQuery);a={categories:e,bbox:d,q:g,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(a.sortField=m.toJSON(this.sortField),a.sortOrder=this.sortOrder);return{query:l({},b,a)}};var d;h([p.property()],b.prototype,"categories",void 0);h([p.property()],b.prototype,"disableExtraQuery",void 0);h([p.property({type:e})],b.prototype,"extent",void 0);h([p.property()],b.prototype,"num",void 0);h([p.property()],b.prototype,"query",void 0);h([p.property()],b.prototype,"sortField",
void 0);h([p.property()],b.prototype,"sortOrder",null);h([p.property()],b.prototype,"start",void 0);return b=d=h([p.subclass("esri.portal.PortalQueryParams")],b)}(p.declared(k))})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.nextQueryParams=null;b.queryParams=null;
b.results=null;b.total=null;return b}l(b,a);f([k.property()],b.prototype,"nextQueryParams",void 0);f([k.property()],b.prototype,"queryParams",void 0);f([k.property()],b.prototype,"results",void 0);f([k.property()],b.prototype,"total",void 0);return b=f([k.subclass("esri.portal.PortalQueryResult")],b)}(k.declared(h))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./PortalFolder ./PortalGroup".split(" "),
function(d,a,l,f,h,k,b,g,p,e){return function(a){function c(){var b=a.call(this)||this;b.access=null;b.created=null;b.culture=null;b.description=null;b.email=null;b.fullName=null;b.modified=null;b.orgId=null;b.portal=null;b.preferredView=null;b.privileges=null;b.region=null;b.role=null;b.roleId=null;b.units=null;b.username=null;b.userType=null;return b}l(c,a);Object.defineProperty(c.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+
b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});c.prototype.addItem=function(a){var b=this,c=a&&a.item,e=a&&a.data;a=a&&a.folder;var d={method:"post"};
c&&(d.query=c._getPostQuery(),null!=e&&("string"===typeof e?d.query.text=e:"object"===typeof e&&(d.query.text=JSON.stringify(e))));e=this.userContentUrl;a&&(e+="/"+a.id);return this.portal._request(e+"/addItem",d).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c._reload():c.load()})};c.prototype.deleteItem=function(a){var b=this.userContentUrl;a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=null;a.portal=
null})};c.prototype.deleteItems=function(a){var c=this.userContentUrl+"/deleteItems",e=a.map(function(a){return a.id});return e.length?(e={method:"post",query:{items:e.join(",")}},this.portal._request(c,e).then(function(){a.forEach(function(a){a.id=null;a.portal=null})})):b.resolve(void 0)};c.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=p.fromJSON(b);b.portal=a.portal;
return b}):[]})};c.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(b){return b&&b.groups?b.groups.map(function(b){b=e.fromJSON(b);b.portal=a.portal;return b}):[]})};c.prototype.fetchItems=function(a){var c=this;a||(a={});var e=this.userContentUrl;a.folder&&(e+="/"+a.folder.id);var g;return b.create(function(a){return d(["./PortalItem"],a)}).then(function(b){g=b;return c.portal._request(e,{query:{folders:!1,num:a.num||10,start:a.start||1}})}).then(function(a){var e;
return a&&a.items?(e=a.items.map(function(a){a=g.fromJSON(a);a.portal=c.portal;return a}),b.all(e.map(function(a){return a.load()})).catch(function(a){return a}).then(function(){return{items:e,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};c.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};c.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new e({id:this.favGroupId,portal:this.portal})),
this._favGroup.queryItems(a)):b.reject(new h("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};c.prototype.toJSON=function(){throw new h("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};f([g.property()],c.prototype,"access",void 0);f([g.property({type:Date})],c.prototype,"created",void 0);f([g.property()],c.prototype,"culture",void 0);f([g.property()],c.prototype,"description",void 0);f([g.property()],c.prototype,"email",void 0);f([g.property()],
c.prototype,"favGroupId",void 0);f([g.property()],c.prototype,"fullName",void 0);f([g.property({type:Date})],c.prototype,"modified",void 0);f([g.property()],c.prototype,"orgId",void 0);f([g.property()],c.prototype,"portal",void 0);f([g.property()],c.prototype,"preferredView",void 0);f([g.property()],c.prototype,"privileges",void 0);f([g.property()],c.prototype,"region",void 0);f([g.property()],c.prototype,"role",void 0);f([g.property()],c.prototype,"roleId",void 0);f([g.property()],c.prototype,"thumbnail",
void 0);f([g.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],c.prototype,"thumbnailUrl",null);f([g.property()],c.prototype,"units",void 0);f([g.property({dependsOn:["portal.restUrl"],readOnly:!0})],c.prototype,"userContentUrl",null);f([g.property({dependsOn:["portal.restUrl"],readOnly:!0})],c.prototype,"url",null);f([g.property()],c.prototype,"username",void 0);f([g.property()],c.prototype,"userType",void 0);return c=f([g.subclass("esri.portal.PortalUser")],c)}(g.declared(k))})},
"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;b.created=null;b.id=null;b.portal=null;b.title=null;b.username=null;return b}l(d,a);Object.defineProperty(d.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+
"/"+this.id:null},enumerable:!0,configurable:!0});d.prototype.toJSON=function(){throw new h("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};f([b.property({type:Date})],d.prototype,"created",void 0);f([b.property()],d.prototype,"id",void 0);f([b.property()],d.prototype,"portal",void 0);f([b.property()],d.prototype,"title",void 0);f([b.property({dependsOn:["portal.restUrl"],readOnly:!0})],d.prototype,"url",null);f([b.property()],d.prototype,"username",void 0);return d=
f([b.subclass("esri.portal.PortalFolder")],d)}(b.declared(k))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators ./PortalQueryParams".split(" "),function(d,a,l,f,h,k,b,g,p){return function(a){function b(b){b=a.call(this)||this;b.access=null;b.created=null;b.description=null;b.id=null;b.isInvitationOnly=!1;b.modified=
null;b.owner=null;b.portal=null;b.snippet=null;b.sortField=null;b.sortOrder=null;b.tags=null;b.title=null;return b}l(b,a);Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});b.prototype.fetchCategorySchema=
function(){var a=this;return this.portal._request(this.url+"/categorySchema").then(function(b){b=b.categorySchema||[];return b.some(function(a){return"contentCategorySetsGroupQuery.LivingAtlas"===a.source})?a._fetchCategorySchemaSet("LivingAtlas"):b})};b.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")};b.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};b.prototype.toJSON=function(){throw new k("internal:not-yet-implemented",
"PortalGroup.toJSON is not yet implemented");};b.prototype.queryItems=function(a){if(5<parseFloat(this.portal.currentVersion))return a=a||new p,this.portal._queryPortal("/content/groups/"+this.id+"/search",a,"PortalItem");a=a?a.clone():new p;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a)};b.prototype._fetchCategorySchemaSet=function(a){var b=this;return this.portal._fetchSelf(this.portal.authMode,!0).then(function(a){if(a=a.contentCategorySetsGroupQuery){var c=
new p;c.disableExtraQuery=!0;c.num=1;c.query=a;return b.portal.queryGroups(c)}throw new k("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(function(b){if(b.total){b=b.results[0];var c=new p;c.num=1;c.query='typekeywords:"'+a+'"';return b.queryItems(c)}throw new k("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(function(a){return a.total?a.results[0].fetchData().then(function(a){return(a=a&&a.categorySchema)&&a.length?
a:[]}):[]})};f([g.property()],b.prototype,"access",void 0);f([g.property({type:Date})],b.prototype,"created",void 0);f([g.property()],b.prototype,"description",void 0);f([g.property()],b.prototype,"id",void 0);f([g.property()],b.prototype,"isInvitationOnly",void 0);f([g.property({type:Date})],b.prototype,"modified",void 0);f([g.property()],b.prototype,"owner",void 0);f([g.property()],b.prototype,"portal",void 0);f([g.property()],b.prototype,"snippet",void 0);f([g.property()],b.prototype,"sortField",
void 0);f([g.property()],b.prototype,"sortOrder",void 0);f([g.property()],b.prototype,"tags",void 0);f([g.property()],b.prototype,"thumbnail",void 0);f([g.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],b.prototype,"thumbnailUrl",null);f([g.property()],b.prototype,"title",void 0);f([g.property({dependsOn:["portal.restUrl"],readOnly:!0})],b.prototype,"url",null);f([h(0,g.cast(p))],b.prototype,"queryItems",null);return b=f([g.subclass("esri.portal.PortalGroup")],b)}(g.declared(b))})},
"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils".split(" "),function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;b.type="extrude";b.size=void 0;b.material=null;b.edges=null;return b}l(d,a);e=d;d.prototype.clone=function(){return new e({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&
this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var e;f([h.enumeration.serializable()({Extrude:"extrude"})],d.prototype,"type",void 0);f([h.property({type:Number,json:{write:!0}})],d.prototype,"size",void 0);f([h.property()],d.prototype,"material",void 0);f([h.property(b.symbol3dEdgesProperty)],d.prototype,"edges",void 0);return d=e=f([h.subclass("esri.symbols.ExtrudeSymbol3DLayer")],d)}(h.declared(k))})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/ElevationInfo ./support/Symbol3DMaterial".split(" "),
function(d,a,l,f,h,k,b,g,p){var e=k.strict()({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text"});d=function(a){function c(b){b=a.call(this)||this;b.enabled=!0;b.material=null;b.type=null;return b}l(c,a);c.prototype.writeEnabled=function(a,b,c){a||(b[c]=a)};f([b.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],c.prototype,"enabled",void 0);f([b.writer("enabled")],c.prototype,"writeEnabled",null);f([b.property({type:g,json:{read:!1,
write:!1}})],c.prototype,"elevationInfo",void 0);f([b.property({type:p.default,json:{write:!0}})],c.prototype,"material",void 0);f([b.property({type:e.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:e.write}}})],c.prototype,"type",void 0);return c=f([b.subclass("esri.symbols.Symbol3DLayer")],c)}(b.declared(h));(d||(d={})).typeJSONDictionary=e;return d})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../support/arcadeUtils ./unitConversionUtils".split(" "),
function(d,a,l,f,h,k,b,g,p){var e=k.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),c=k({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),n=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);e=c;Object.defineProperty(c.prototype,"requiredFields",{get:function(){return g.extractFieldNames(this.expression)},enumerable:!0,configurable:!0});
c.prototype.clone=function(){return new e({expression:this.expression,title:this.title})};var e;f([b.property({type:String,json:{write:!0}})],c.prototype,"expression",void 0);f([b.property({readOnly:!0,dependsOn:["expression"]})],c.prototype,"requiredFields",null);f([b.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=e=f([b.subclass("esri.layers.support.FeatureExpressionInfo")],c)}(b.declared(h));return function(a){function d(){return null!==a&&a.apply(this,arguments)||
this}l(d,a);g=d;d.prototype.readFeatureExpressionInfo=function(a,b){if(null!=a)return a;if(b.featureExpression&&0===b.featureExpression.value)return{expression:"0"}};d.prototype.writeFeatureExpressionInfo=function(a,b,c,e){b[c]=a.write(null,e);"0"===a.expression&&(b.featureExpression={value:0})};Object.defineProperty(d.prototype,"mode",{get:function(){return this._isOverridden("mode")?this._get("mode"):null!=this.offset||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(a){this._override("mode",
a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"unit",{set:function(a){this._set("unit",a)},enumerable:!0,configurable:!0});d.prototype.write=function(a,b){return this.offset||this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null};d.prototype.clone=function(){return new g({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};var g;f([b.property({type:n,json:{write:!0}})],
d.prototype,"featureExpressionInfo",void 0);f([b.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],d.prototype,"readFeatureExpressionInfo",null);f([b.writer("featureExpressionInfo",{featureExpressionInfo:{type:n},"featureExpression.value":{type:[0]}})],d.prototype,"writeFeatureExpressionInfo",null);f([b.property({type:e.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:e.jsonValues,read:e.read,write:{writer:e.write,isRequired:!0}}})],d.prototype,
"mode",null);f([b.property({type:Number,json:{write:!0}})],d.prototype,"offset",void 0);f([b.property({type:p.supportedUnits,json:{type:String,read:c.read,write:c.write}})],d.prototype,"unit",null);return d=g=f([b.subclass("esri.layers.support.ElevationInfo")],d)}(b.declared(h))})},"esri/symbols/support/unitConversionUtils":function(){define(["require","exports","../../renderers/support/utils"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.supportsUnit=function(a){return null!=
l.meterIn[a]};a.getMetersPerUnit=function(a){return 1/(l.meterIn[a]||1)};a.supportedUnits=function(){var a=Object.keys(l.meterIn);a.sort();return a}()})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(d,a,l,f,h,k,b){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(){return null!==
a&&a.apply(this,arguments)||this}l(d,a);e=d;d.prototype.clone=function(){return new e({color:this.color?this.color.clone():null})};var e;f([k.property(b.colorAndTransparencyProperty)],d.prototype,"color",void 0);return d=e=f([k.subclass("esri.symbols.support.Symbol3DMaterial")],d)}(k.declared(h));a.Symbol3DMaterial=d;a.default=d})},"esri/symbols/support/materialUtils":function(){define("require exports ../../Color ../../core/screenUtils ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),
function(d,a,l,f,h,k){function b(a,b){a=null!=b.transparency?k.transparencyToOpacity(b.transparency):1;if((b=b.color)&&Array.isArray(b))return new l([b[0]||0,b[1]||0,b[2]||0,a])}function g(a,b){b.color=a.toJSON().slice(0,3);a=k.opacityToTransparency(a.a);0!==a&&(b.transparency=a)}Object.defineProperty(a,"__esModule",{value:!0});a.readColorAndTransparency=b;a.writeColorAndTransparency=g;a.colorAndTransparencyProperty={type:l,json:{type:[h.Integer],read:{source:["color","transparency"],reader:b},write:{target:{color:{type:[h.Integer]},
transparency:{type:h.Integer}},writer:g}}};a.screenSizeProperty={type:Number,cast:f.toPt,json:{write:!0}}})},"esri/core/screenUtils":function(){define(["require","exports"],function(d,a){function l(d){return d?72*d/a.DPI:0}Object.defineProperty(a,"__esModule",{value:!0});var f=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;a.DPI=96;a.pt2px=function(d){return d?d/72*a.DPI:0};a.px2pt=l;a.toPt=function(a){if("string"===typeof a){if(f.test(a)){var d=a.match(f),b=Number(d[1]),d=d[3]&&d[3].toLowerCase();a="-"===a.charAt(0);
b="px"===d?l(b):b;return a?-b:b}console.warn("screenUtils.toPt: input not recognized!");return null}return a}})},"esri/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.opacityToTransparency=function(a){a=l.ensureInteger(100*(1-a));return Math.max(0,Math.min(a,100))};a.transparencyToOpacity=function(a){return Math.max(0,Math.min(1-a/100,1))}})},"esri/symbols/edges/utils":function(){define(["require",
"exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(d,a,l,f,h){function k(a,d,k){if(!a)return a;switch(a.type){case "solid":return d=new h,d.read(a,k),d;case "sketch":return d=new f,d.read(a,k),d}}Object.defineProperty(a,"__esModule",{value:!0});a.read=k;a.symbol3dEdgesProperty={types:{key:"type",base:l,typeMap:{solid:h,sketch:f}},json:{read:k,write:!0}}})},"esri/symbols/edges/Edges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c){return function(a){function b(b){b=a.call(this)||this;b.color=new k([0,0,0,1]);b.extensionLength=0;b.size=p.px2pt(1);return b}l(b,a);b.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=h({},a),delete a.type);return a};b.prototype.clone=function(){};b.prototype.cloneProperties=function(){return{color:g.clone(this.color),size:this.size,extensionLength:this.extensionLength}};f([e.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],
b.prototype,"type",void 0);f([e.property(c.colorAndTransparencyProperty)],b.prototype,"color",void 0);f([e.property(h({},c.screenSizeProperty,{json:{write:{overridePolicy:function(a){return{enabled:!!a}}}}}))],b.prototype,"extensionLength",void 0);f([e.property(c.screenSizeProperty)],b.prototype,"size",void 0);return b=f([e.subclass("esri.symbols.edges.Edges3D")],b)}(e.declared(b))})},"esri/symbols/edges/SketchEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.type="sketch";return b}l(b,a);d=b;b.prototype.clone=function(){return new d(this.cloneProperties())};var d;f([h.property({type:["sketch"]})],b.prototype,"type",void 0);return b=d=f([h.subclass("esri.symbols.edges.SketchEdges3D")],b)}(h.declared(k))})},"esri/symbols/edges/SolidEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.type="solid";return b}l(b,a);d=b;b.prototype.clone=function(){return new d(this.cloneProperties())};var d;f([h.property({type:["solid"]})],b.prototype,"type",void 0);return b=d=f([h.subclass("esri.symbols.support.SolidEdges3D")],b)}(h.declared(k))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(d,a,l,f,h,k,b,g,p){return function(a){function c(b){b=a.call(this)||this;b.type="fill";b.material=null;b.outline=null;b.edges=null;return b}l(c,a);e=c;c.prototype.clone=function(){return new e({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})};var e;f([h.enumeration.serializable()({Fill:"fill"})],c.prototype,"type",void 0);f([h.property({type:g.default})],
c.prototype,"material",void 0);f([h.property({type:p.default,json:{write:!0}})],c.prototype,"outline",void 0);f([h.property(b.symbol3dEdgesProperty)],c.prototype,"edges",void 0);return c=e=f([h.subclass("esri.symbols.FillSymbol3DLayer")],c)}(h.declared(k))})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Symbol3DMaterial".split(" "),function(d,a,l,
f,h,k){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);d=b;b.prototype.clone=function(){return new d({color:this.color?this.color.clone():null,colorMixMode:this.colorMixMode})};var d;f([h.enumeration.serializable()({multiply:"multiply",replace:"replace",tint:"tint"})],b.prototype,"colorMixMode",void 0);return b=d=f([h.subclass("esri.symbols.support.Symbol3DFillMaterial")],b)}(h.declared(k.default));a.Symbol3DFillMaterial=
d;a.default=d})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(d,a,l,f,h,k,b,g,p){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.color=new h([0,0,0,1]);c.size=b.px2pt(1);return c}l(c,a);
e=c;c.prototype.clone=function(){return new e({color:this.color?this.color.clone():null,size:this.size})};var e;f([g.property(p.colorAndTransparencyProperty)],c.prototype,"color",void 0);f([g.property(p.screenSizeProperty)],c.prototype,"size",void 0);return c=e=f([g.subclass("esri.symbols.support.Symbol3DOutline")],c)}(g.declared(k));a.Symbol3DOutline=d;a.default=d})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DOutline".split(" "),
function(d,a,l,f,h,k,b,g,p){return function(a){function c(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type="icon";b.size=12;b.anchor=void 0;b.outline=void 0;return b}l(c,a);e=c;c.prototype.clone=function(){return new e({anchor:this.anchor,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})};var e;f([h.property()],
c.prototype,"material",void 0);f([h.property({type:b.default,json:{write:!0}})],c.prototype,"resource",void 0);f([h.enumeration.serializable()({Icon:"icon"})],c.prototype,"type",void 0);f([h.property(g.screenSizeProperty)],c.prototype,"size",void 0);f([h.enumeration.serializable()({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"})],c.prototype,"anchor",void 0);f([h.property({type:p.default,
json:{write:!0}})],c.prototype,"outline",void 0);return c=e=f([h.subclass("esri.symbols.IconSymbol3DLayer")],c)}(h.declared(k))})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k,b,g){Object.defineProperty(a,"__esModule",{value:!0});var p=k.strict()({circle:"circle",
square:"square",cross:"cross",x:"x",kite:"kite"});d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);e=c;c.prototype.readHref=function(a,c,e){return a?b.fromJSON(a,e):c.dataURI};c.prototype.writeHref=function(a,c,e,d){a&&(b.isDataProtocol(a)?c.dataURI=a:(c.href=b.toJSON(a,d),b.isAbsolute(c.href)&&(c.href=b.normalize(c.href))))};c.prototype.clone=function(){return new e({href:this.href,primitive:this.primitive})};var e;f([g.property({type:String,json:{write:!0,read:{source:["href",
"dataURI"]}}})],c.prototype,"href",void 0);f([g.reader("href")],c.prototype,"readHref",null);f([g.writer("href",{href:{type:String},dataURI:{type:String}})],c.prototype,"writeHref",null);f([g.enumeration.serializable()(p)],c.prototype,"primitive",void 0);return c=e=f([g.subclass("esri.symbols.support.IconSymbol3DLayerResource")],c)}(g.declared(h));a.IconSymbol3DLayerResource=d;a.default=d})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/materialUtils".split(" "),
function(d,a,l,f,h,k,b,g){return function(a){function b(b){b=a.call(this)||this;b.material=null;b.type="line";b.size=h.px2pt(1);return b}l(b,a);c=b;b.prototype.clone=function(){return new c({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var c;f([k.property()],b.prototype,"material",void 0);f([k.enumeration.serializable()({Line:"line"})],b.prototype,"type",void 0);f([k.property(g.screenSizeProperty)],
b.prototype,"size",void 0);return b=c=f([k.subclass("esri.symbols.LineSymbol3DLayer")],b)}(k.declared(b))})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition ./support/Symbol3DMaterial".split(" "),function(d,a,l,f,h,k,b,g,p){return function(a){function c(b){b=a.call(this)||this;b.material=
null;b.resource=null;b.type="object";b.width=void 0;b.height=void 0;b.depth=void 0;b.anchor=void 0;b.anchorPosition=void 0;b.heading=void 0;b.tilt=void 0;b.roll=void 0;return b}l(c,a);e=c;c.prototype.clone=function(){return new e({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),height:this.height,material:this.material&&
this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})};Object.defineProperty(c.prototype,"isPrimitive",{get:function(){return!this.resource||"string"!==typeof this.resource.href},enumerable:!0,configurable:!0});var e;f([h.property({type:p.default})],c.prototype,"material",void 0);f([h.property({type:b.default,json:{write:!0}})],c.prototype,"resource",void 0);f([h.enumeration.serializable()({Object:"object"})],c.prototype,"type",void 0);f([h.property({type:Number,json:{write:!0}})],
c.prototype,"width",void 0);f([h.property({type:Number,json:{write:!0}})],c.prototype,"height",void 0);f([h.property({type:Number,json:{write:!0}})],c.prototype,"depth",void 0);f([h.enumeration.serializable()({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"})],c.prototype,"anchor",void 0);f([h.property({type:g.default,json:{read:{reader:function(a){return new g.default({x:a[0],y:a[1],z:a[2]})}},write:{writer:function(a,b){b.anchorPosition=[a.x,a.y,a.z]},overridePolicy:function(){return{enabled:"relative"===
this.anchor}}}}})],c.prototype,"anchorPosition",void 0);f([h.property({type:Number,json:{write:!0}})],c.prototype,"heading",void 0);f([h.property({type:Number,json:{write:!0}})],c.prototype,"tilt",void 0);f([h.property({type:Number,json:{write:!0}})],c.prototype,"roll",void 0);f([h.property({readOnly:!0,dependsOn:["resource","resource.href"]})],c.prototype,"isPrimitive",null);return c=e=f([h.subclass("esri.symbols.ObjectSymbol3DLayer")],c)}(h.declared(k))})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k,b,g){Object.defineProperty(a,"__esModule",{value:!0});var p=k.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);e=c;c.prototype.clone=function(){return new e({href:this.href,primitive:this.primitive})};var e;f([g.property({type:String,json:{read:b.read,write:b.write}})],c.prototype,"href",void 0);f([g.enumeration.serializable()(p)],
c.prototype,"primitive",void 0);return c=e=f([g.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],c)}(g.declared(h));a.ObjectSymbol3DLayerResource=d;a.default=d})},"esri/symbols/support/Symbol3DAnchorPosition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){var b=
null!==a&&a.apply(this,arguments)||this;b.x=0;b.y=0;b.z=0;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({x:this.x,y:this.y,z:this.z})};var d;f([k.property({type:Number})],b.prototype,"x",void 0);f([k.property({type:Number})],b.prototype,"y",void 0);f([k.property({type:Number})],b.prototype,"z",void 0);return b=d=f([k.subclass("esri.symbols.support.Symbol3DAnchorPosition")],b)}(k.declared(h));a.Symbol3DAnchorPosition=d;a.default=d})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.material=null;b.type="path";b.size=void 0;return b}l(b,a);d=b;b.prototype.readSize=function(a,b){return a||b.width||0};b.prototype.clone=function(){return new d({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var d;f([h.property()],b.prototype,"material",void 0);f([h.enumeration.serializable()({Path:"path"})],b.prototype,"type",
void 0);f([h.property({type:Number,json:{write:{enabled:!0,target:{size:{type:Number},width:{type:Number}}}}})],b.prototype,"size",void 0);f([h.reader("size",["size","width"])],b.prototype,"readSize",null);return b=d=f([h.subclass("esri.symbols.PathSymbol3DLayer")],b)}(h.declared(k))})},"esri/symbols/Symbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k,b,g){var p=b({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),e=0;return function(a){function b(b){b=a.call(this,b)||this;b.id="sym"+e++;b.type=null;return b}l(b,a);Object.defineProperty(b.prototype,"color",{set:function(a){this._set("color",
a)},enumerable:!0,configurable:!0});b.prototype.readColor=function(a,b,c){return a&&null!=a[0]?[a[0],a[1],a[2],a[3]/255]:a};b.prototype.clone=function(){};f([g.property({type:p.apiValues,json:{read:p.read,write:{ignoreOrigin:!0,writer:p.write}}})],b.prototype,"type",void 0);f([g.property({type:h,value:new h([0,0,0,1]),json:{write:{allowNull:!0}}})],b.prototype,"color",null);f([g.reader("color")],b.prototype,"readColor",null);return b=f([g.subclass("esri.symbols.Symbol")],b)}(g.declared(k))})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/accessorSupport/decorators ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c){return function(a){function d(b){b=a.call(this)||this;b._userSize=void 0;b.halo=null;b.material=null;b.text=void 0;b.type="text";return b}l(d,a);n=d;Object.defineProperty(d.prototype,"font",{get:function(){return this._get("font")||null},set:function(a){a&&this._userSize&&(a.size=this._userSize);this._set("font",a)},enumerable:!0,configurable:!0});d.prototype.writeFont=function(a,b,c,e){c=h({},e,{textSymbol3D:!0});b.font=a.write({},c);delete b.font.size};Object.defineProperty(d.prototype,
"size",{get:function(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9},set:function(a){this._userSize=a;this.font&&(this.font.size=this._userSize);this.notifyChange("size")},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new n({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&k.clone(this.font),halo:this.halo&&k.clone(this.halo),material:this.material&&this.material.clone(),size:this.size,
text:this.text})};var n;f([b.property({type:g,json:{write:!0}})],d.prototype,"font",null);f([b.writer("font")],d.prototype,"writeFont",null);f([b.property({type:c.default,json:{write:!0}})],d.prototype,"halo",void 0);f([b.property()],d.prototype,"material",void 0);f([b.property(e.screenSizeProperty),b.property({dependsOn:["font.size"]})],d.prototype,"size",null);f([b.property({type:String,json:{write:!0}})],d.prototype,"text",void 0);f([b.enumeration.serializable()({Text:"text"})],d.prototype,"type",
void 0);return d=n=f([b.subclass("esri.symbols.TextSymbol3DLayer")],d)}(b.declared(p))})},"esri/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;b.decoration="none";b.family="sans-serif";b.size=9;b.style="normal";b.weight="normal";return b}l(d,a);e=d;d.prototype.castSize=
function(a){return k.toPt(a)};d.prototype.clone=function(){return new e({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};var e;f([b.property({type:["underline","line-through","none"],json:{default:"none",write:!0}})],d.prototype,"decoration",void 0);f([b.property({type:String,json:{write:!0}})],d.prototype,"family",void 0);f([b.property({type:Number,json:{write:{overridePolicy:function(a,b,e){return{enabled:!e||!e.textSymbol3D}}}}})],d.prototype,
"size",void 0);f([b.cast("size")],d.prototype,"castSize",null);f([b.property({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],d.prototype,"style",void 0);f([b.property({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],d.prototype,"weight",void 0);return d=e=f([b.subclass("esri.symbols.Font")],d)}(b.declared(h))})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(d,a,l,f,h,k,b,g,p){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new h([0,0,0,1]);b.size=0;return b}l(c,a);e=c;c.prototype.clone=function(){return new e({color:b.clone(this.color),size:this.size})};var e;f([g.property(p.colorAndTransparencyProperty)],c.prototype,"color",void 0);f([g.property(p.screenSizeProperty)],c.prototype,"size",void 0);return c=e=f([g.subclass("esri.symbols.support.Symbol3DHalo")],c)}(g.declared(k));
a.Symbol3DHalo=d;a.default=d})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../portal/Portal".split(" "),function(d,a,l,f,h,k,b){return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.portal=null;return b}l(d,a);e=d;d.prototype.clone=function(){return new e({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,
portal:this.portal})};var e;f([k.property({type:String})],d.prototype,"name",void 0);f([k.property({type:String})],d.prototype,"styleUrl",void 0);f([k.property({type:String})],d.prototype,"styleName",void 0);f([k.property({type:b})],d.prototype,"portal",void 0);return d=e=f([k.subclass("esri.symbols.support.StyleOrigin")],d)}(k.declared(h))})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);d=b;b.prototype.clone=function(){return new d({url:this.url})};var d;f([k.property({type:String})],b.prototype,"url",void 0);return b=d=f([k.subclass("esri.symbols.support.Thumbnail")],b)}(k.declared(h));a.Thumbnail=d;a.default=d})},"esri/symbols/callouts/calloutUtils":function(){define(["require","exports","./Callout3D","./LineCallout3D"],function(d,
a,l,f){function h(a){if(!a)return!1;a=a.verticalOffset;return!a||0>=a.screenLength||0>=a.maxWorldLength?!1:!0}function k(a,d,h){if(!a)return a;switch(a.type){case "line":return d=new f,d.read(a,h),d}}Object.defineProperty(a,"__esModule",{value:!0});a.hasVisibleVerticalOffset=h;a.hasVisibleCallout=function(a){if(!a||!a.supportsCallout||!a.supportsCallout())return!1;var b=a.callout;return b&&b.visible?h(a)?!0:!1:!1};a.isCalloutSupport=function(a){return"point-3d"===a.type||"label-3d"===a.type};a.read=
k;a.calloutProperty={types:{key:"type",base:l,typeMap:{line:f}},json:{read:k,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;b.visible=!0;return b}f(d,a);d.prototype.normalizeCtorArgs=function(a){a&&a.type&&
(a=l({},a),delete a.type);return a};d.prototype.clone=function(){};h([b.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],d.prototype,"type",void 0);h([b.property({readOnly:!0})],d.prototype,"visible",void 0);return d=h([b.subclass("esri.symbols.callouts.Callout3D")],d)}(b.declared(k))})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c){return function(a){function d(c){c=a.call(this)||this;c.type="line";c.color=new h([0,0,0,1]);c.size=b.px2pt(1);c.border=null;return c}l(d,a);n=d;Object.defineProperty(d.prototype,"visible",{get:function(){return 0<this.size&&0<this.color.a},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new n({color:k.clone(this.color),size:this.size,border:k.clone(this.border)})};var n;f([g.property({type:["line"]})],d.prototype,"type",void 0);f([g.property(c.colorAndTransparencyProperty)],
d.prototype,"color",void 0);f([g.property(c.screenSizeProperty)],d.prototype,"size",void 0);f([g.property({type:e.default,json:{write:!0}})],d.prototype,"border",void 0);f([g.property({dependsOn:["size","color"],readOnly:!0})],d.prototype,"visible",null);return d=n=f([g.subclass("esri.symbols.callouts.LineCallout3D")],d)}(g.declared(p))})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(d,a,l,f,h,k,b,g,p){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new h("white");return b}l(c,a);e=c;c.prototype.clone=function(){return new e({color:b.clone(this.color)})};var e;f([g.property(p.colorAndTransparencyProperty)],c.prototype,"color",void 0);return c=e=f([g.subclass("esri.symbols.callouts.LineCallout3DBorder")],c)}(g.declared(k));a.LineCallout3DBorder=d;a.default=d})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(d,a,l,f,h,k,b){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.screenLength=0;b.minWorldLength=0;return b}l(d,a);e=d;d.prototype.clone=function(){return new e({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};var e;f([k.property(b.screenSizeProperty)],d.prototype,"screenLength",void 0);f([k.property({type:Number,json:{write:!0,default:0}})],d.prototype,"minWorldLength",
void 0);f([k.property({type:Number,json:{write:!0}})],d.prototype,"maxWorldLength",void 0);return d=e=f([k.subclass("esri.symbols.support.Symbol3DVerticalOffset")],d)}(k.declared(h));a.Symbol3DVerticalOffset=d;a.default=d})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n){var m=h.ofType({base:null,key:"type",typeMap:{line:p,text:n,path:e}}),q=h.ofType({base:null,key:"type",typeMap:{line:p,path:e}});return function(a){function c(b){b=a.call(this)||this;b.symbolLayers=new m;b.type="line-3d";return b}l(c,a);e=c;c.prototype.writeSymbolLayers=function(a,b,c,e){var d=a.filter(function(a){return"text"!==a.type});e&&e.messages&&d.length<a.length&&(a=a.find(function(a){return"text"===a.type}),e.messages.push(new k("symbol-layer:unsupported",
"Symbol layers of type 'text' cannot be persisted in LineSymbol3D",{symbolLayer:a})));b[c]=d.map(function(a){return a.write({},e)}).toArray()};c.prototype.clone=function(){return new e({styleOrigin:b.clone(this.styleOrigin),symbolLayers:b.clone(this.symbolLayers),thumbnail:b.clone(this.thumbnail)})};var e;f([g.property({type:m,json:{type:q}})],c.prototype,"symbolLayers",void 0);f([g.writer("web-scene","symbolLayers")],c.prototype,"writeSymbolLayers",null);f([g.enumeration.serializable()({LineSymbol3D:"line-3d"})],
c.prototype,"type",void 0);return c=e=f([g.subclass("esri.symbols.LineSymbol3D")],c)}(g.declared(c))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./FillSymbol3DLayer ./Symbol3D".split(" "),function(d,a,l,f,h,k,b,g,p){var e=h.ofType({base:null,key:"type",typeMap:{fill:g}});return function(a){function c(b){b=a.call(this)||this;b.symbolLayers=
new e;b.type="mesh-3d";return b}l(c,a);d=c;c.prototype.clone=function(){return new d({styleOrigin:k.clone(this.styleOrigin),symbolLayers:k.clone(this.symbolLayers),thumbnail:k.clone(this.thumbnail)})};var d;f([b.property({type:e})],c.prototype,"symbolLayers",void 0);f([b.enumeration.serializable()({MeshSymbol3D:"mesh-3d"})],c.prototype,"type",void 0);return c=d=f([b.subclass("esri.symbols.MeshSymbol3D")],c)}(b.declared(p))})},"esri/symbols/PictureFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./FillSymbol ./support/urlUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e){return function(a){function c(b,c,e,d){b=a.call(this,b)||this;b.type="picture-fill";b.url=null;b.xscale=1;b.yscale=1;b.width=12;b.height=12;b.xoffset=0;b.yoffset=0;b.source=null;return b}l(c,a);d=c;c.prototype.normalizeCtorArgs=function(a,c,e,d){if(a&&"string"!==typeof a&&null==a.imageData)return a;var g={};a&&(g.url=a);c&&(g.outline=c);null!=e&&(g.width=b.toPt(e));null!=d&&(g.height=b.toPt(d));return g};c.prototype.clone=function(){var a=new d({color:k.clone(this.color),
height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});a._set("source",k.clone(this.source));return a};var d;f([g.enumeration.serializable()({esriPFS:"picture-fill"})],c.prototype,"type",void 0);f([g.property(e.urlPropertyDefinition)],c.prototype,"url",void 0);f([g.property({type:Number,json:{write:!0}})],c.prototype,"xscale",void 0);f([g.property({type:Number,json:{write:!0}})],
c.prototype,"yscale",void 0);f([g.property({type:Number,cast:b.toPt,json:{write:!0}})],c.prototype,"width",void 0);f([g.property({type:Number,cast:b.toPt,json:{write:!0}})],c.prototype,"height",void 0);f([g.property({type:Number,cast:b.toPt,json:{write:!0}})],c.prototype,"xoffset",void 0);f([g.property({type:Number,cast:b.toPt,json:{write:!0}})],c.prototype,"yoffset",void 0);f([g.property(e.sourcePropertyDefinition)],c.prototype,"source",void 0);return c=d=f([g.subclass("esri.symbols.PictureFillSymbol")],
c)}(g.declared(p))})},"esri/symbols/FillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/accessorSupport/decorators ./SimpleLineSymbol ./Symbol".split(" "),function(d,a,l,f,h,k,b,g){var p=h({esriSFS:"simple-fill",esriPFS:"picture-fill"});return function(a){function c(b){b=a.call(this,b)||this;b.outline=null;b.type=null;return b}l(c,a);f([k.property({type:b,json:{default:null,write:!0}})],c.prototype,
"outline",void 0);f([k.property({type:p.apiValues,readOnly:!0,json:{type:p.jsonValues}})],c.prototype,"type",void 0);return c=f([k.subclass("esri.symbols.FillSymbol")],c)}(k.declared(g))})},"esri/symbols/SimpleLineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./LineSymbol".split(" "),function(d,a,l,f,h,k,b,g,p){var e=h({esriSLSSolid:"solid",
esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});return function(a){function c(b,c,e,d,g,f){b=a.call(this,b)||this;b.type="simple-line";b.style="solid";b.cap="round";b.join="round";b.miterLimit=
7.5;return b}l(c,a);d=c;c.prototype.normalizeCtorArgs=function(a,c,e,d,g,f){if(a&&"string"!==typeof a)return a;var h={};null!=a&&(h.style=a);null!=c&&(h.color=c);null!=e&&(h.width=b.toPt(e));null!=d&&(h.cap=d);null!=g&&(h.join=g);null!=f&&(h.miterLimit=b.toPt(f));return h};c.prototype.clone=function(){return new d({color:k.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})};var d;f([g.enumeration.serializable()({esriSLS:"simple-line"})],c.prototype,
"type",void 0);f([g.property({type:e.apiValues,json:{read:e.read,write:e.write}})],c.prototype,"style",void 0);f([g.property({type:["butt","round","square"],json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}})],c.prototype,"cap",void 0);f([g.property({type:["miter","round","bevel"],json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}})],c.prototype,"join",void 0);f([g.property({type:Number,cast:b.toPt,
json:{read:!1,write:!1}})],c.prototype,"miterLimit",void 0);return c=d=f([g.subclass("esri.symbols.SimpleLineSymbol")],c)}(g.declared(p))})},"esri/symbols/LineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),function(d,a,l,f,h,k,b){return function(a){function b(b){b=a.call(this,b)||this;b.type="simple-line";b.width=.75;return b}l(b,a);f([k.enumeration.serializable()({esriSLS:"simple-line"})],
b.prototype,"type",void 0);f([k.property({type:Number,cast:h.toPt,json:{write:!0}})],b.prototype,"width",void 0);return b=f([k.subclass("esri.symbols.LineSymbol")],b)}(k.declared(b))})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(d,a,l){function f(a,d,f){return d.imageData?l.makeData({mediaType:d.contentType||"image/png",isBase64:!0,data:d.imageData}):h(d.url,f)}function h(a,d){return!d||"service"!==d.origin&&"portal-item"!==d.origin||!d.layer||
"feature"!==d.layer.type&&"stream"!==d.layer.type||l.isAbsolute(a)||!d.layer.parsedUrl?l.fromJSON(a,d):l.join(d.layer.parsedUrl.path,"images",a)}function k(a,d,f,e){l.isDataProtocol(a)?(a=l.dataComponents(a),d.contentType=a.mediaType,d.imageData=a.data,f&&f.imageData===d.imageData&&f.url&&l.write(f.url,d,"url",e)):l.write(a,d,"url",e)}Object.defineProperty(a,"__esModule",{value:!0});a.readImageDataOrUrl=f;a.read=h;a.writeImageDataAndUrl=k;a.urlPropertyDefinition={json:{read:{source:["imageData","url"],
reader:f},write:{writer:function(a,d,f,e){k(a,d,this.source,e)}}}};a.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,d,f){a={};d.imageData&&(a.imageData=d.imageData);d.contentType&&(a.contentType=d.contentType);d.url&&(a.url=h(d.url,f));return a}}}}})},"esri/symbols/PictureMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./support/urlUtils".split(" "),
function(d,a,l,f,h,k,b,g,p){return function(a){function c(b,c,e){b=a.call(this,b)||this;b.color=null;b.type="picture-marker";b.url=null;b.source=null;b.height=12;b.width=12;b.size=null;return b}l(c,a);e=c;c.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a&&null==a.imageData)return a;var e={};a&&(e.url=a);null!=b&&(e.width=k.toPt(b));null!=c&&(e.height=k.toPt(c));return e};c.prototype.readHeight=function(a,b){return b.size||a};c.prototype.readWidth=function(a,b){return b.size||
a};c.prototype.clone=function(){var a=new e({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});a._set("source",h.clone(this.source));return a};var e;f([b.property({json:{write:!1}})],c.prototype,"color",void 0);f([b.enumeration.serializable()({esriPMS:"picture-marker"})],c.prototype,"type",void 0);f([b.property(p.urlPropertyDefinition)],c.prototype,"url",void 0);f([b.property(p.sourcePropertyDefinition)],c.prototype,"source",void 0);f([b.property({type:Number,
cast:k.toPt,json:{write:!0}})],c.prototype,"height",void 0);f([b.reader("height",["height","size"])],c.prototype,"readHeight",null);f([b.property({type:Number,cast:k.toPt,json:{write:!0}})],c.prototype,"width",void 0);f([b.property({json:{write:!1}})],c.prototype,"size",void 0);return c=e=f([b.subclass("esri.symbols.PictureMarkerSymbol")],c)}(b.declared(g))})},"esri/symbols/MarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),
function(d,a,l,f,h,k,b,g){var p=h({esriSMS:"simple-marker",esriPMS:"picture-marker"});return function(a){function c(b){b=a.call(this,b)||this;b.angle=0;b.type=null;b.xoffset=0;b.yoffset=0;b.size=9;return b}l(c,a);f([b.property({type:Number,json:{read:function(a){return a&&-1*a},write:function(a,b){return b.angle=a&&-1*a}}})],c.prototype,"angle",void 0);f([b.property({type:p.apiValues,readOnly:!0,json:{type:p.jsonValues}})],c.prototype,"type",void 0);f([b.property({type:Number,cast:k.toPt,json:{write:!0}})],
c.prototype,"xoffset",void 0);f([b.property({type:Number,cast:k.toPt,json:{write:!0}})],c.prototype,"yoffset",void 0);f([b.property({type:Number,cast:function(a){return"auto"===a?a:k.toPt(a)},json:{write:!0}})],c.prototype,"size",void 0);return c=f([b.subclass("esri.symbols.MarkerSymbol")],c)}(b.declared(g))})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q){var y=h.ofType({base:null,key:"type",typeMap:{icon:p,object:e,text:n}}),x=h.ofType({base:null,key:"type",typeMap:{icon:p,object:e}});return function(a){function c(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.symbolLayers=new y;b.type="point-3d";return b}l(c,a);e=c;c.prototype.writeSymbolLayers=function(a,b,c,e){var d=a.filter(function(a){return"text"!==a.type});e&&e.messages&&d.length<a.length&&(a=a.find(function(a){return"text"===a.type}),e.messages.push(new k("symbol-layer:unsupported",
"Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:a})));b[c]=d.map(function(a){return a.write({},e)}).toArray()};c.prototype.supportsCallout=function(){if(1!==(this.symbolLayers?this.symbolLayers.length:0))return!1;switch(this.symbolLayers.getItemAt(0).type){case "icon":case "text":case "object":return!0}return!1};c.prototype.hasVisibleCallout=function(){return m.hasVisibleCallout(this)};c.prototype.hasVisibleVerticalOffset=function(){return m.hasVisibleVerticalOffset(this)};
c.prototype.clone=function(){return new e({verticalOffset:b.clone(this.verticalOffset),callout:b.clone(this.callout),styleOrigin:b.clone(this.styleOrigin),symbolLayers:b.clone(this.symbolLayers),thumbnail:b.clone(this.thumbnail)})};var e;f([g.property({type:q.default,json:{write:!0}})],c.prototype,"verticalOffset",void 0);f([g.property(m.calloutProperty)],c.prototype,"callout",void 0);f([g.property({type:y,json:{type:x}})],c.prototype,"symbolLayers",void 0);f([g.writer("web-scene","symbolLayers")],
c.prototype,"writeSymbolLayers",null);f([g.enumeration.serializable()({PointSymbol3D:"point-3d"})],c.prototype,"type",void 0);return c=e=f([g.subclass("esri.symbols.PointSymbol3D")],c)}(g.declared(c))})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y){var x=h.ofType({base:null,key:"type",typeMap:{extrude:p,fill:e,icon:c,line:n,object:m,text:y}}),t=h.ofType({base:null,key:"type",typeMap:{extrude:p,fill:e,icon:c,line:n,object:m}});return function(a){function c(b){b=a.call(this)||this;b.type="polygon-3d";return b}l(c,a);e=c;c.prototype.writeSymbolLayers=function(a,b,c,e){var d=a.filter(function(a){return"text"!==a.type});e&&e.messages&&d.length<a.length&&(a=a.find(function(a){return"text"===a.type}),e.messages.push(new k("symbol-layer:unsupported",
"Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:a})));b[c]=d.map(function(a){return a.write({},e)}).toArray()};c.prototype.clone=function(){return new e({styleOrigin:b.clone(this.styleOrigin),symbolLayers:b.clone(this.symbolLayers),thumbnail:b.clone(this.thumbnail)})};c.fromJSON=function(a){var b=new e;b.read(a);if(2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var c=b.symbolLayers.getItemAt(0),d=
b.symbolLayers.getItemAt(1);!d.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||(c.outline={size:d.size,color:d.material.color});b.symbolLayers.removeAt(1)}return b};var e;f([g.property({type:x,json:{type:t}})],c.prototype,"symbolLayers",void 0);f([g.writer("web-scene","symbolLayers")],c.prototype,"writeSymbolLayers",null);f([g.enumeration.serializable()({PolygonSymbol3D:"polygon-3d"})],c.prototype,"type",void 0);return c=e=f([g.subclass("esri.symbols.PolygonSymbol3D")],
c)}(g.declared(q))})},"esri/symbols/SimpleFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../Color ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ./FillSymbol".split(" "),function(d,a,l,f,h,k,b,g,p,e){var c=b({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",
esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"}),n={outline:{type:"simple-line"}};return function(a){function b(b,c,e){b=a.call(this,b)||this;b.color=new k([0,0,0,.25]);b.type="simple-fill";b.style="solid";return b}l(b,a);e=b;b.prototype.getDefaults=function(){return h({},this.inherited(arguments),n)};b.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a)return a;var e={};a&&(e.style=a);b&&(e.outline=b);c&&(e.color=c);return e};b.prototype.clone=function(){return new e({color:g.clone(this.color),
outline:this.outline&&this.outline.clone(),style:this.style})};var e;f([p.property()],b.prototype,"color",void 0);f([p.enumeration.serializable()({esriSFS:"simple-fill"})],b.prototype,"type",void 0);f([p.property({type:c.apiValues,json:{read:c.read,write:c.write}})],b.prototype,"style",void 0);return b=e=f([p.subclass("esri.symbols.SimpleFillSymbol")],b)}(p.declared(e))})},"esri/symbols/SimpleMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/kebabDictionary ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c){var n=k({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});return function(a){function e(b,e,d,g){b=a.call(this,b)||this;b.color=new h([255,255,255,.25]);b.type="simple-marker";b.size=12;b.style="circle";b.outline=new c;return b}l(e,a);d=e;e.prototype.normalizeCtorArgs=function(a,b,c,e){if(a&&"string"!==typeof a)return a;var d={};a&&(d.style=a);null!=b&&(d.size=g.toPt(b));
c&&(d.outline=c);e&&(d.color=e);return d};e.prototype.writeColor=function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())};Object.defineProperty(e.prototype,"path",{set:function(a){this.style="path";this._set("path",a)},enumerable:!0,configurable:!0});e.prototype.clone=function(){return new d({angle:this.angle,color:b.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})};var d;f([p.property()],
e.prototype,"color",void 0);f([p.writer("color")],e.prototype,"writeColor",null);f([p.enumeration.serializable()({esriSMS:"simple-marker"})],e.prototype,"type",void 0);f([p.property()],e.prototype,"size",void 0);f([p.property({type:n.apiValues,json:{read:n.read,write:n.write}})],e.prototype,"style",void 0);f([p.property({type:String,json:{write:!0}})],e.prototype,"path",null);f([p.property({type:c,json:{default:null,write:!0}})],e.prototype,"outline",void 0);return e=d=f([p.subclass("esri.symbols.SimpleMarkerSymbol")],
e)}(p.declared(e))})},"esri/symbols/TextSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./Font ./Symbol".split(" "),function(d,a,l,f,h,k,b,g,p,e){return function(a){function c(b,c,e){b=a.call(this,b)||this;b.backgroundColor=null;b.borderLineColor=null;b.borderLineSize=null;b.font=new p;b.horizontalAlignment="center";b.kerning=!0;b.haloColor=null;b.haloSize=
null;b.rightToLeft=null;b.rotated=!1;b.text="";b.type="text";b.verticalAlignment=null;b.xoffset=0;b.yoffset=0;b.angle=0;b.width=null;return b}l(c,a);e=c;c.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a)return a;var e={};a&&(e.text=a);b&&(e.font=b);c&&(e.color=c);return e};c.prototype.clone=function(){return new e({angle:this.angle,backgroundColor:k.clone(this.backgroundColor),borderLineColor:k.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:k.clone(this.color),
font:this.font&&this.font.clone(),haloColor:k.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};var e;f([g.property({type:h,json:{write:!0}})],c.prototype,"backgroundColor",void 0);f([g.property({type:h,json:{write:!0}})],c.prototype,"borderLineColor",void 0);f([g.property({type:Number,
json:{write:!0}})],c.prototype,"borderLineSize",void 0);f([g.property({type:p,json:{write:!0}})],c.prototype,"font",void 0);f([g.property({type:["left","right","center","justify"],json:{write:!0}})],c.prototype,"horizontalAlignment",void 0);f([g.property({type:Boolean,json:{write:!0}})],c.prototype,"kerning",void 0);f([g.property({type:h,json:{write:!0}})],c.prototype,"haloColor",void 0);f([g.property({type:Number,cast:b.toPt,json:{write:!0}})],c.prototype,"haloSize",void 0);f([g.property({type:Boolean,
json:{write:!0}})],c.prototype,"rightToLeft",void 0);f([g.property({type:Boolean,json:{write:!0}})],c.prototype,"rotated",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"text",void 0);f([g.property({type:String,readOnly:!0})],c.prototype,"type",void 0);f([g.property({type:["baseline","top","middle","bottom"],json:{write:!0}})],c.prototype,"verticalAlignment",void 0);f([g.property({type:Number,cast:b.toPt,json:{write:!0}})],c.prototype,"xoffset",void 0);f([g.property({type:Number,
cast:b.toPt,json:{write:!0}})],c.prototype,"yoffset",void 0);f([g.property({type:Number,json:{read:function(a){return a&&-1*a},write:function(a,b){return b.angle=a&&-1*a}}})],c.prototype,"angle",void 0);f([g.property({type:Number,json:{write:!0}})],c.prototype,"width",void 0);return c=e=f([g.subclass("esri.symbols.TextSymbol")],c)}(g.declared(e))})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../portal/Portal ./Symbol ./support/Thumbnail".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n){var m=k.getLogger("esri.symbols.WebStyleSymbol"),q=h.strict()({styleSymbolReference:"web-style"});return function(a){function c(b){b=a.call(this,b)||this;b.styleName=null;b.portal=null;b.styleUrl=null;b.thumbnail=null;b.name=null;b.type="web-style";return b}l(c,a);h=c;c.prototype.read=function(a,b){this.portal=b?b.portal:void 0;this.inherited(arguments,[a,b]);return this};c.prototype.clone=function(){return new h({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,
portal:this.portal})};c.prototype.fetchSymbol=function(){var a=this;return b.create(function(a){return d(["./support/styleUtils"],a)}).then(function(b){b=b.resolveWebStyleSymbol(a,{portal:a.portal});b.catch(function(a){m.error("#fetchSymbol()","Failed to create symbol from style",a)});return b})};var h;f([p.property({json:{write:!1}})],c.prototype,"color",void 0);f([p.property({type:String,json:{write:!0}})],c.prototype,"styleName",void 0);f([p.property({type:e,json:{write:!1}})],c.prototype,"portal",
void 0);f([p.property({type:String,json:{read:g.read,write:g.write}})],c.prototype,"styleUrl",void 0);f([p.property({type:n.default,json:{read:!1}})],c.prototype,"thumbnail",void 0);f([p.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);f([p.property({type:q.apiValues,readOnly:!0,json:{type:q.jsonValues,read:!1,write:q.write}})],c.prototype,"type",void 0);return c=h=f([p.subclass("esri.symbols.WebStyleSymbol")],c)}(p.declared(c))})},"esri/symbols/support/symbolConversion":function(){define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../Font".split(" "),
function(d,a,l,f,h,k,b){function g(a){var b=a.color?a.color.clone():new l([255,255,255]),e,d,g;a instanceof f.PictureMarkerSymbol?(a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(b=new l([255,255,255])),e={href:a.url},d=a.width<=a.height?a.height:a.width):(e=a.style,e in p?e=p[e]:(console.log(e+' cannot be mapped to Icon symbol. Fallback to "circle"'),e="circle"),e={primitive:e},d=a.size,a.outline&&0<a.outline.width&&(g={size:a.outline.width,color:a.outline.color?a.outline.color.clone():[255,
255,255]}));return new f.PointSymbol3D(new f.IconSymbol3DLayer({size:d,resource:e,material:{color:b},outline:g}))}Object.defineProperty(a,"__esModule",{value:!0});var p={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x"};a.to3D=function(a,c,d,l){void 0===c&&(c=!1);void 0===d&&(d=!1);void 0===l&&(l=!0);if(!a)return{symbol:null};if(f.isSymbol3D(a)||a instanceof f.WebStyleSymbol)l=a.clone();else if(a instanceof f.SimpleLineSymbol)l=new f.LineSymbol3D(new f.LineSymbol3DLayer({size:a.width||
1,material:{color:a.color?a.color.clone():[255,255,255]}}));else if(a instanceof f.SimpleMarkerSymbol)l=g(a);else if(a instanceof f.PictureMarkerSymbol)l=g(a);else if(a instanceof f.SimpleFillSymbol)l=new f.FillSymbol3DLayer({material:{color:a.color?a.color.clone():[255,255,255,0]}}),a.outline&&(l.outline={size:a.outline.width||0,color:a.outline.color?a.outline.color.clone():[255,255,255]}),l=new f.PolygonSymbol3D(l);else if(a instanceof f.TextSymbol){var e;e=a.haloColor;var m=a.haloSize;e=e&&0<m?
{color:k.clone(e),size:m}:null;m=a.font?a.font.clone():new b;l=new (l?f.LabelSymbol3D:f.PointSymbol3D)(new f.TextSymbol3DLayer({size:m.size,font:m,halo:e,material:{color:a.color.clone()},text:a.text}))}else return{error:new h("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(a.type||a.declaredClass)+"' is unsupported in 3D",{symbol:a})};c&&(l.id=a.id);if(d&&f.isSymbol3D(l))for(a=0;a<l.symbolLayers.length;++a)l.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:l}}})},"esri/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./symbols/callouts/LineCallout3DBorder ./symbols/support/Symbol3DVerticalOffset ./symbols/support/jsonUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D,B,w,C,E,A,H,F,G,N,O,S){Object.defineProperty(a,"__esModule",{value:!0});a.ExtrudeSymbol3DLayer=l;a.BaseFillSymbol=f;a.FillSymbol3DLayer=h;a.Font=k;a.IconSymbol3DLayer=b;a.LabelSymbol3D=g;a.LineSymbol3D=p;a.LineSymbol3DLayer=e;a.BaseMarkerSymbol=c;a.MeshSymbol3D=n;a.ObjectSymbol3DLayer=m;a.PathSymbol3DLayer=q;a.PictureFillSymbol=y;a.PictureMarkerSymbol=x;a.PointSymbol3D=t;a.PolygonSymbol3D=u;a.SimpleFillSymbol=z;a.SimpleLineSymbol=D;a.SimpleMarkerSymbol=
B;a.BaseSymbol=w;a.BaseSymbol3D=C;a.BaseSymbol3DLayer=E;a.TextSymbol=A;a.TextSymbol3DLayer=H;a.WebStyleSymbol=F;a.LineCallout3D=G;a.LineCallout3DBorder=N;a.Symbol3DVerticalOffset=O.Symbol3DVerticalOffset;a.fromJSON=S.fromJSON;a.isSymbol=function(b){return b instanceof a.BaseSymbol};a.isSymbol2D=function(a){if(!a)return!1;switch(a.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};a.isSymbol3D=function(a){if(!a)return!1;
switch(a.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}}})},"esri/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(d,a,l,f,h,k,b,g,
p,e,c,n,m,q,y,x){Object.defineProperty(a,"__esModule",{value:!0});a.types={base:q,key:"type",typeMap:{"simple-fill":c,"picture-fill":b,"picture-marker":g,"simple-line":n,"simple-marker":m,text:y,"label-3d":f,"line-3d":h,"mesh-3d":k,"point-3d":p,"polygon-3d":e,"web-style":x}};a.rendererTypes={base:q,key:"type",typeMap:{"simple-fill":c,"picture-fill":b,"picture-marker":g,"simple-line":n,"simple-marker":m,text:y,"line-3d":h,"mesh-3d":k,"point-3d":p,"polygon-3d":e,"web-style":x}};a.labelTypes={base:q,
key:"type",typeMap:{text:y,"label-3d":f}};a.types3D={base:q,key:"type",typeMap:{"label-3d":f,"line-3d":h,"mesh-3d":k,"point-3d":p,"polygon-3d":e,"web-style":x}};a.rendererTypes3D={base:q,key:"type",typeMap:{"line-3d":h,"mesh-3d":k,"point-3d":p,"polygon-3d":e,"web-style":x}};a.labelTypes3D={base:q,key:"type",typeMap:{"label-3d":f}};a.ensureType=l.ensureOneOfType(a.types)})},"esri/tasks/support/StatisticDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.maxPointCount=void 0;b.maxRecordCount=void 0;b.maxVertexCount=void 0;b.onStatisticField=null;b.outStatisticFieldName=null;b.statisticType=null;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})};
var d;f([k.property({type:Number,json:{write:!0}})],b.prototype,"maxPointCount",void 0);f([k.property({type:Number,json:{write:!0}})],b.prototype,"maxRecordCount",void 0);f([k.property({type:Number,json:{write:!0}})],b.prototype,"maxVertexCount",void 0);f([k.property({type:String,json:{write:!0}})],b.prototype,"onStatisticField",void 0);f([k.property({type:String,json:{write:!0}})],b.prototype,"outStatisticFieldName",void 0);f([k.property({type:String,json:{write:!0}})],b.prototype,"statisticType",
void 0);return b=d=f([k.subclass("esri.tasks.support.StatisticDefinition")],b)}(k.declared(h))})},"esri/layers/support/FeatureProcessing":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/accessorSupport/decorators ./Field ./fieldUtils".split(" "),function(d,a,l,f,h,k,b,g,p){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);e=c;c.fromWorker=function(a){if(!a)return null;
a=JSON.parse(a);var b=new e;b.fields=a.fields&&a.fields.map(function(a){return g.fromJSON(a)});b.options=a.options;b.process=new (Function.bind.apply(Function,[void 0].concat(a.process.args,[a.process.body])));return b};Object.defineProperty(c.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new e(k.clone({fields:this.fields,options:this.options,process:this.process}))};c.prototype.getField=function(a){return p.getField(a,
this.fields)};c.prototype.refresh=function(){this.notifyChange("version")};c.prototype.toWorker=function(){var a=this.process.toString();return JSON.stringify({fields:this.fields,options:this.options,process:{body:a.substring(a.indexOf("{")+1,a.lastIndexOf("}")),args:a.slice(a.indexOf("(")+1,a.indexOf(")")).match(/([^\s,]+)/g)}})};var e;f([b.property({type:[g]})],c.prototype,"fields",void 0);f([b.property()],c.prototype,"options",void 0);f([b.property()],c.prototype,"process",void 0);f([b.property({readOnly:!0,
dependsOn:["process","options","fields"]})],c.prototype,"version",null);return c=e=f([b.subclass("esri.layers.support.FeatureProcessing")],c)}(b.declared(h))})},"esri/layers/support/fieldUtils":function(){define(["require","exports","@dojo/framework/shim/Set","../../core/object","./domains"],function(d,a,l,f,h){function k(a,c,e){if(a)for(var d=0;d<a.length;d++){var g=a[d],h=f.getDeepValue(g,c);(h=h&&"function"!==typeof h&&b(h,e))&&f.setDeepValue(g,h.name,c)}}function b(a,b){if("string"!==typeof a)return null;
if(null!=b){a=a.toLowerCase();for(var c=0;c<b.length;c++){var e=b[c];if(e&&e.name.toLowerCase()===a)return e}}return null}function g(a){return"number"===typeof a&&!isNaN(a)&&isFinite(a)}function p(a){return null===a||g(a)}function e(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function c(a){return null===a||e(a)}function n(a){return null!=a&&"string"===typeof a}function m(a){return null===a||n(a)}function q(a){return!0}function y(a,b){var d;switch(a.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":d=
a.nullable?c:e;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":d=a.nullable?p:g;break;case "string":case "esriFieldTypeString":d=a.nullable?m:n;break;default:d=q}return 1===arguments.length?d:d(b)}function x(a){return null!=a&&D.has(a.type)}function t(a,b){return a.nullable&&null===b?null:x(a)&&!u(a.type,b)?B.OUT_OF_RANGE:y(a,b)?a.domain?h.validateDomainValue(a.domain,b):null:w.INVALID_TYPE}function u(a,b){return(a=z(a))?b>=a.min&&b<=a.max:!1}function z(b){switch(b){case "esriFieldTypeSmallInteger":case "small-integer":return a.smallIntegerRange;
case "esriFieldTypeInteger":case "integer":return a.integerRange;case "esriFieldTypeSingle":case "single":return a.singleRange;case "esriFieldTypeDouble":case "double":return a.doubleRange}}Object.defineProperty(a,"__esModule",{value:!0});a.fixRendererFields=function(b,c){if(null!=b&&null!=c){var e=0;for(b=Array.isArray(b)?b:[b];e<b.length;e++){var d=b[e];k(a.rendererFields,d,c);if("visualVariables"in d&&d.visualVariables)for(var g=0,d=d.visualVariables;g<d.length;g++)k(a.visualVariableFields,d[g],
c)}}};a.getField=b;a.getFieldDefaultValue=function(a){var b=a.defaultValue;if(void 0!==b&&y(a,b))return b;if(a.nullable)return null};a.isValueMatchingFieldType=y;a.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");a.visualVariableFields=["field","normalizationField"];a.numericTypes=["integer","small-integer","single","double"];var D=new l.default(a.numericTypes.concat(["esriFieldTypeInteger",
"esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]));a.isNumericField=x;a.isStringField=function(a){return null!=a&&("string"===a.type||"esriFieldTypeString"===a.type)};a.isDateField=function(a){return null!=a&&("date"===a.type||"esriFieldTypeDate"===a.type)};a.isValidFieldValue=function(a,b){return null===t(a,b)};var B;(B=a.NumericRangeValidationError||(a.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";var w;(w=a.TypeValidationError||
(a.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";a.sanitizeNullFieldValue=function(a){return null==a?null:a};a.validateFieldValue=t;a.isNumberInRange=u;a.getFieldRange=function(a){var b=h.getDomainRange(a.domain);if(b)return b;if(x(a))return z(a.type)};a.smallIntegerRange={min:-32768,max:32767};a.integerRange={min:-2147483648,max:2147483647};a.singleRange={min:-3.4E38,max:1.2E38};a.doubleRange={min:-Number.MAX_VALUE,max:Number.MAX_VALUE};a.validationErrorToString=function(a,
b,c){switch(a){case h.DomainValidationError.INVALID_CODED_VALUE:return"Value "+c+" is not in the coded domain - field: "+b.name+", domain: "+JSON.stringify(b.domain);case h.DomainValidationError.VALUE_OUT_OF_RANGE:return"Value "+c+" is out of the range of valid values - field: "+b.name+", domain: "+JSON.stringify(b.domain);case w.INVALID_TYPE:return"Value "+c+" is not a valid value for the field type - field: "+b.name+", type: "+b.type+", nullable: "+b.nullable;case B.OUT_OF_RANGE:return a=z(b.type),
"Value "+c+" is out of range for the number type - field: "+b.name+", type: "+b.type+", value range is "+a.min+" to "+a.max}}})},"esri/tasks/operations/query":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/requireUtils ../../core/urlUtils ../../core/workers ../../geometry/support/jsonUtils ../../geometry/support/normalizeUtils ./pbfQueryUtils ./PBFWorker ./urlUtils module".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n,m){function q(a,b){var c=a.geometry;
a=a.toJSON();c&&(a.geometry=JSON.stringify(c),a.geometryType=g.getJsonType(c),a.inSR=c.spatialReference.wkid||JSON.stringify(c.spatialReference));a.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.orderByFields&&(a.orderByFields=a.orderByFields.join(","));!a.outFields||b&&(b.returnCountOnly||b.returnExtentOnly||b.returnIdsOnly)?delete a.outFields:-1!==a.outFields.indexOf("*")?a.outFields="*":a.outFields=
a.outFields.join(",");a.outSR?a.outSR=a.outSR.wkid||JSON.stringify(a.outSR):c&&(a.returnGeometry||a.returnCentroid)&&(a.outSR=a.inSR);a.returnGeometry&&delete a.returnGeometry;a.outStatistics&&(a.outStatistics=JSON.stringify(a.outStatistics));a.pixelSize&&(a.pixelSize=JSON.stringify(a.pixelSize));a.quantizationParameters&&(a.quantizationParameters=JSON.stringify(a.quantizationParameters));a.source&&(a.layer=JSON.stringify({source:a.source}),delete a.source);a.timeExtent&&(b=a.timeExtent,a.time=[null!=
b.startTime?b.startTime:"null",null!=b.endTime?b.endTime:"null"],delete a.timeExtent);return a}function y(a,b,c,e,d){void 0===e&&(e={});var g="string"===typeof a?k.urlToObject(a):a;a=b.geometry?[b.geometry]:[];e.responseType="pbf"===c?"array-buffer":"json";return p.normalizeCentralMeridian(a,null,e).then(function(a){if(a=a&&a[0])b=b.clone(),b.geometry=a;a=n.mapParameters(l({},g.query,{f:c},d,q(b,d)));return f(g.path+"/query",l({},e,{query:a}))})}function x(){null==t&&(t=new c,b.open(h.getAbsMid("./PBFWorker",
d,m),{strategy:"dedicated"}).then(function(a){return t.thread=a}));return t}Object.defineProperty(a,"__esModule",{value:!0});a.queryToQueryStringParameters=q;a.executeQuery=function(a,b,c){return y(a,b,"json",c)};a.executeQueryPBF=function(a,b,c,d){return y(a,b,"pbf",d).then(function(a){var b=function(b){a.data=b;return a};return c.useWorker?x().parseFeatureQuery(a.data,c).then(function(a){return b(a)}):b(e.parsePBFFeatureQuery(a.data,c))})};a.executeQueryForIds=function(a,b,c){return y(a,b,"json",
c,{returnIdsOnly:!0})};a.executeQueryForCount=function(a,b,c){return y(a,b,"json",c,{returnIdsOnly:!0,returnCountOnly:!0})};a.executeQueryForExtent=function(a,b,c){return y(a,b,"json",c,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(a){var b=a.data;if(!b.hasOwnProperty("extent")){if(b.features)throw Error("Layer does not support extent calculation.");if(b.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");}return a})};var t})},"esri/core/requireUtils":function(){define(["require",
"exports","./promiseUtils"],function(d,a,l){function f(a,d){return Array.isArray(d)?l.create(function(b){a(d,function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];b(a)})}):f(a,[d]).then(function(a){return a[0]})}Object.defineProperty(a,"__esModule",{value:!0});a.when=f;a.getAbsMid=function(a,d,b){return d.toAbsMid?d.toAbsMid(a):b.id.replace(/\/[^\/]*$/gi,"/")+a}})},"esri/core/workers":function(){define(["require","exports","./workers/workers"],function(d,a,l){Object.defineProperty(a,
"__esModule",{value:!0});for(var f in l)a.hasOwnProperty(f)||(a[f]=l[f])})},"esri/core/workers/workers":function(){define("require exports ../has ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(d,a,l,f,h,k,b,g){function p(){if(y)return y;for(var a=e+c,b=[],d=function(a){var c=g.create(a).then(function(b){return q[a]=b});b.push(c)},f=0;f<a;f++)d(f);return y=h.all(b).then(function(){})}Object.defineProperty(a,"__esModule",{value:!0});a.Connection=k;a.RemoteClient=
b;(k=l("host-browser")?navigator.hardwareConcurrency:0)||(k=l("safari")&&l("mac")||l("trident")?8:2);var e=l("esri-workers-debug")?1:Math.max(1,Math.ceil(k/2)),c=l("esri-workers-debug")?1:Math.max(1,Math.floor(k/2)),n=f.getLogger("esri.core.workers"),m=0,q=[];a.initialize=function(){p()};a.open=function(b,g,f){void 0===g&&(g={});if(Array.isArray(b))return new a.Connection(b.map(function(b){return new a.RemoteClient(b,g.client)}));if("string"!==typeof b){n.warn("workers-open:signature-deprecated",
"DEPRECATED: workers.open() changed signature.");var k=b;b=g;g={client:k,strategy:f?"dedicated":"distributed"}}var l=g.strategy||"distributed";return"local"===l?h.create(function(c){d([b],function(b){c(a.RemoteClient.connect(b))})}).then(function(b){return new a.Connection([new a.RemoteClient(b,g.client)])}):p().then(function(){if("dedicated"===l){var d=e+m++;m%=c;return q[d].open(b).then(function(b){return new a.Connection([new a.RemoteClient(b,g.client)])})}return h.all(q.map(function(a){return a.open(b)})).then(function(b){return new a.Connection(b.map(function(b){return new a.RemoteClient(b,
g.client)}))})})};a.terminate=function(){y&&(y.cancel(),y=null);for(var a=0;a<q.length;a++)q[a]&&q[a].terminate();q.length=0};var y=null})},"esri/core/workers/Connection":function(){define(["require","exports","../Logger","../promiseUtils"],function(d,a,l,f){var h=l.getLogger("esri.core.workers.Connection");return function(){function a(a){this._clientIdx=0;this._clients=a}a.prototype.broadcast=function(a,d,f){for(var b=[],c=0,g=this._clients;c<g.length;c++)b.push(g[c].invoke(a,d,f));return b};a.prototype.close=
function(){for(var a=0,d=this._clients;a<d.length;a++)d[a].close();this._clients=[]};a.prototype.getAvailableClient=function(){var a;this._clients.some(function(b){return b.isBusy()?!1:(a=b,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,a=this._clients[this._clientIdx]);return a};a.prototype.invoke=function(a,d,k){var b=null;Array.isArray(k)?(h.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),b={transferList:k}):b=k;return this._clients&&
this._clients.length?this.getAvailableClient().invoke(a,d,b):f.reject(Error("Connection closed"))};a.prototype.openPorts=function(){return f.all(this._clients.map(function(a){return a.openPort()}))};return a}()})},"esri/core/workers/WorkerOwner":function(){define("require exports ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(d,a,l,f,h,k,b,g){var p=h.getLogger("esri.core.workers"),e=b.MessageType.ABORT,c=b.MessageType.INVOKE,n=b.MessageType.OPEN,m=b.MessageType.OPENED,
q=b.MessageType.RESPONSE;return function(){function a(a,b){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();p.error(a)})}a.create=function(b){return g.createWorker().then(function(c){return new a(c,b)})};a.prototype.terminate=function(){this.worker.terminate()};a.prototype.open=function(a){var c=this,d=b.newJobId(),g=function(){c._outJobs["delete"](d);c._post({type:e,
jobId:d})};return k.create(function(b,e){c._outJobs.set(d,{resolve:b,reject:e,cancel:g});c._post({type:n,jobId:d,modulePath:a})},g)};a.prototype._onMessage=function(a){if(a=b.receiveMessage(a))switch(a.type){case m:case q:this._onResponse(a);break;case e:this._onCancel(a);break;case c:this._onInvoke(a)}};a.prototype._onCancel=function(a){(a=this._inJobs.get(a.jobId))&&a.cancel()};a.prototype._onInvoke=function(a){var c=this,e=a.methodName,d=a.jobId;a=a.data;var g=this._inJobs,f=l.workerMessages[e],
h;try{if("function"!==typeof f)throw new TypeError(e+" is not a function");h=f.call(null,a)}catch(C){this._post({type:q,jobId:d,error:b.toInvokeError(C)});return}k.isThenable(h)?(g.set(d,h),h.then(function(a){g["delete"](d);c._post({type:q,jobId:d},a)}).catch(function(a){g["delete"](d);a||(a={message:"Error encountered at method"+e});a.dojoType&&"cancel"===a.dojoType||c._post({type:q,jobId:d,error:b.toInvokeError(a)})})):this._post({type:q,jobId:d},h)};a.prototype._onResponse=function(a){var b=a.jobId,
c=a.error;a=a.data;var e=this._outJobs.get(b);e&&(this._outJobs["delete"](b),c?e.reject(f.fromJSON(JSON.parse(c))):e.resolve(a))};a.prototype._post=function(a,c,e){return b.postMessage(this.worker,a,c,e)};return a}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../has ../Logger ../promiseUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),function(d,a,l,f,h,k,b,g,p,e,c){function n(a){return g.create(function(b){function d(c){if(c=
e.receiveMessage(c))switch(c.type){case x:c=a;var m=h.workers.loaderUrl||p.DEFAULT_LOADER_URL,n;null!=h["default"]?(n=l({},h),delete n["default"],n=JSON.parse(JSON.stringify(n))):n=JSON.parse(JSON.stringify(h));var t=h.workers.loaderConfig,t=p.default({baseUrl:t.baseUrl,locale:f.locale,has:l({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-secure-context":k("esri-secure-context"),"esri-workers-arraybuffer-transfer":k("esri-workers-arraybuffer-transfer"),"events-keypress-typed":0,"host-webworker":1},
t.has),map:l({},t.map),paths:l({},t.paths),packages:t.packages||[]});c.postMessage({type:y,configure:{esriConfig:n,loaderUrl:m,loaderConfig:t}});break;case q:a.removeEventListener("message",d),a.removeEventListener("error",g),b(a)}}function g(b){b.preventDefault();a.removeEventListener("message",d);a.removeEventListener("error",g);m.warn("Failed to create Worker. Fallback to execute module in main thread",b);a=new c;a.addEventListener("message",d);a.addEventListener("error",g)}a.addEventListener("message",
d);a.addEventListener("error",g)})}Object.defineProperty(a,"__esModule",{value:!0});var m=b.getLogger("esri.core.workers");k.add("esri-workers-arraybuffer-transfer",!k("safari")||12<=k("safari"));var q=e.MessageType.CONFIGURED,y=e.MessageType.CONFIGURE,x=e.MessageType.HANDSHAKE,t;try{t=URL.createObjectURL(new Blob(['var globalId\x3d0;var outgoing\x3dnew Map;var configured\x3dfalse;var HANDSHAKE\x3d0;var CONFIGURE\x3d1;var CONFIGURED\x3d2;var OPEN\x3d3;var OPENED\x3d4;var RESPONSE\x3d5;var INVOKE\x3d6;var CANCEL\x3d7;function mapDelete(map,key){map["delete"](key)}function receiveMessage(event){if(!event||!event.data){return null}if(typeof event.data\x3d\x3d\x3d"string"){return JSON.parse(event.data)}return event.data}function invokeStaticMessage(methodName,data,options){var signal\x3doptions\x26\x26options.signal;var Deferred\x3drequire("dojo/Deferred");var jobId\x3dglobalId++;var abortHandler\x3dfunction(){if(!outgoing.has(jobId)){return}self.postMessage({type:CANCEL,methodName:methodName,jobId:jobId});mapDelete(outgoing,jobId);if(!deferred.isCanceled()){deferred.cancel()}if(signal){signal.removeEventListener("abort",abortHandler)}};if(signal){signal.addEventListener("abort",abortHandler)}var deferred\x3dnew Deferred(abortHandler);outgoing.set(jobId,deferred);self.postMessage({type:INVOKE,methodName:methodName,jobId:jobId,data:data});return deferred.promise}function messageHandler(event){var message\x3dreceiveMessage(event);if(!message){return}var jobId\x3dmessage.jobId;switch(message.type){case CONFIGURE:var configuration\x3dmessage.configure;if(configured){return}self.dojoConfig\x3dconfiguration.loaderConfig;self.importScripts(configuration.loaderUrl);if(typeof require.config\x3d\x3d\x3d"function"){require.config(configuration.loaderConfig)}require(["esri/config"],function(esriConfig){for(var name in configuration.esriConfig){if(Object.prototype.hasOwnProperty.call(configuration.esriConfig,name)){esriConfig[name]\x3dconfiguration.esriConfig[name]}}self.postMessage({type:CONFIGURED})});break;case OPEN:var modulePath\x3dmessage.modulePath;require(["esri/core/workers/RemoteClient",modulePath],function(RemoteClient,Module){var port\x3dRemoteClient.connect(Module);self.postMessage({type:OPENED,jobId:jobId,data:port},[port])});break;case RESPONSE:if(outgoing.has(jobId)){var deferred\x3doutgoing.get(jobId);mapDelete(outgoing,jobId);if(message.error){deferred.reject(JSON.parse(message.error))}else{deferred.resolve(message.data)}}break}}self.addEventListener("message",messageHandler);self.postMessage({type:HANDSHAKE});'],
{type:"text/javascript"}))}catch(u){}a.createWorker=function(){if(!k("esri-workers"))return n(new c);var a;if(t)try{a=new Worker(t)}catch(z){m.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new c}else m.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new c;return n(a)}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","../has","../urlUtils"],function(d,a,l,f,h){Object.defineProperty(a,
"__esModule",{value:!0});f=f("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";a.DEFAULT_LOADER_URL=h.makeAbsolute(h.removeQueryParameters(d.toUrl(f)));a.DEFAULT_CONFIG={baseUrl:function(){var a=h.removeQueryParameters(d.toUrl("dojo/x.js"));return h.makeAbsolute(a.slice(0,a.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},
{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};a.default=function(f){var b={async:f.async,isDebug:f.isDebug,locale:f.locale,baseUrl:f.baseUrl,has:l({},f.has),map:l({},f.map),packages:f.packages&&f.packages.concat()||
[],paths:l({},f.paths)};f.hasOwnProperty("async")||(b.async=!0);f.hasOwnProperty("isDebug")||(b.isDebug=!1);f.baseUrl||(b.baseUrl=a.DEFAULT_CONFIG.baseUrl);a.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var c=b.packages,e=0;e<c.length;e++)if(c[e].name===a.name)break a;a=l({},a);e=h.removeQueryParameters(d.toUrl(a.name+"/x.js"));e=e.slice(0,e.length-5);a.location=h.makeAbsolute(e);c.push(a)}});f=b.map=b.map||{};for(var g=0,k=Object.keys(a.DEFAULT_CONFIG.map);g<k.length;g++){var e=k[g];f[e]||
(f[e]=a.DEFAULT_CONFIG.map[e])}return b}})},"esri/core/workers/WorkerFallback":function(){define(["require","exports","../global","../has","./utils"],function(d,a,l,f,h){var k=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];return b[c].apply(b,a)}})}}(),b=l.MutationObserver||l.WebKitMutationObserver,g=function(){var a;
if(l.process&&l.process.nextTick)a=function(a){l.process.nextTick(a)};else if(l.Promise)a=function(a){l.Promise.resolve().then(a)};else if(b){var e=[],c=document.createElement("div");(new b(function(){for(;0<e.length;)e.shift()()})).observe(c,{attributes:!0});a=function(a){e.push(a);c.setAttribute("queueStatus","1")}}return a}();return function(){function a(){this._dispatcher=new k;this._isInitialized=!1;this._workerPostMessage({type:h.MessageType.HANDSHAKE})}a.prototype.terminate=function(){};Object.defineProperty(a.prototype,
"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,
configurable:!0});a.prototype.postMessage=function(a,b){var c=this;g(function(){c._workerMessageHandler(new MessageEvent("message",{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};a.prototype.addEventListener=function(a,b,d){this._dispatcher.addEventListener(a,b,d)};a.prototype.removeEventListener=function(a,b,d){this._dispatcher.removeEventListener(a,b,d)};a.prototype._workerPostMessage=function(a,b){var c=this;g(function(){c.dispatchEvent(new MessageEvent("message",
{data:a}))})};a.prototype._workerMessageHandler=function(a){var b=this;if(a=h.receiveMessage(a)){var e=a.jobId;switch(a.type){case h.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:h.MessageType.CONFIGURED});break;case h.MessageType.OPEN:d(["esri/core/workers/RemoteClient",a.modulePath],function(a,c){a=a.connect(c);b._workerPostMessage({type:h.MessageType.OPENED,jobId:e,data:a})})}}};return a}()})},"esri/tasks/operations/pbfQueryUtils":function(){define(["require","exports",
"./pbfFeatureServiceParser"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.parsePBFFeatureQuery=function(a,d){if((a=l.parseFeatureQuery(a,d).queryResult.featureResult)&&a.features&&a.features.length&&a.objectIdFieldName){d=a.objectIdFieldName;for(var f=0,b=a.features;f<b.length;f++){var g=b[f];g.attributes&&(g.objectId=g.attributes[d])}}return a}})},"esri/tasks/operations/pbfFeatureServiceParser":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ./pbfDehydratedFeatureSet ./pbfOptimizedFeatureSet".split(" "),
function(d,a,l,f,h,k,b){function g(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getSInt32();case 5:return a.getUInt32();case 6:return a.getInt64();case 7:return a.getUInt64();case 8:return a.getSInt64();case 9:return a.getBool();default:return a.skip(),null}return null}function p(a){for(var b={type:0>=n.length?null:n[0]};a.next();)switch(a.tag()){case 1:b.name=a.getString();break;case 2:var c=a.getEnum();b.type=
c>=n.length?null:n[c];break;case 3:b.alias=a.getString();break;case 4:c=a.getEnum();c=c>=m.length?null:m[c];b.sqlType=c;break;default:a.skip()}return b}function e(a,b,c,e){for(var d=a.createFeature(b),f=0;c.next();)switch(c.tag()){case 1:var h=e[f++].name;d.attributes[h]=g(c.getMessage());break;case 2:for(var h=a,k=b,l=c.getMessage(),m=h.createGeometry(k),k=2+(k.hasZ?1:0)+(k.hasM?1:0);l.next();)switch(l.tag()){case 2:for(var n=l.getUInt32(),n=l.pos()+n,p=0;l.pos()<n;)h.addLength(m,l.getUInt32(),p++);
break;case 3:for(var n=l.getUInt32(),n=l.pos()+n,q=p=0;l.pos()<n;)h.addCoordinate(m,l.getSInt64(),q,p),p++,p===k&&(q++,p=0);break;default:l.skip()}d.geometry=m;break;case 4:h=a;l=c.getMessage();for(m=h.createPointGeometry(b);l.next();)switch(l.tag()){case 3:k=l.getUInt32();k=l.pos()+k;for(n=0;l.pos()<k;)h.addCoordinatePoint(m,l.getSInt64(),0,n++);break;default:l.skip()}d.centroid=m;break;default:c.skip()}return d}Object.defineProperty(a,"__esModule",{value:!0});var c=f.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),
n="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),m="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
q=["upperLeft","lowerLeft"];a.parseFeatureQuery=function(a,d){d=d&&"dehydrated"===d.type?new k.Context(d):new b.Context(d);try{var g=new h(new Uint8Array(a),new DataView(a));for(a={};g.next();)switch(g.tag()){case 2:for(var f=a,m=d,n=g.getMessage(),y={};n.next();)switch(n.tag()){case 1:var w=m,x=n.getMessage(),E=w.createFeatureResult();E.geometryType=0>=w.geometryTypes.length?null:w.geometryTypes[0];for(var A=!1;x.next();)switch(x.tag()){case 1:E.objectIdFieldName=x.getString();break;case 3:E.globalIdFieldName=
x.getString();break;case 4:E.geohashFieldName=x.getString();break;case 5:for(var H=x.getMessage(),F={};H.next();)switch(H.tag()){case 1:F.shapeAreaFieldName=H.getString();break;case 2:F.shapeLengthFieldName=H.getString();break;case 3:F.units=H.getString();break;default:H.skip()}E.geometryProperties=F;break;case 7:var G=x.getEnum();E.geometryType=G>=w.geometryTypes.length?null:w.geometryTypes[G];break;case 8:for(var N=x.getMessage(),O=w.createSpatialReference();N.next();)switch(N.tag()){case 1:O.wkid=
N.getUInt32();break;case 5:O.wkt=N.getString();break;default:N.skip()}E.spatialReference=O;break;case 10:E.hasZ=x.getBool();break;case 11:E.hasM=x.getBool();break;case 12:for(var S=x.getMessage(),J={originPosition:0>=q.length?null:q[0]};S.next();)switch(S.tag()){case 1:var X=S.getEnum();J.originPosition=X>=q.length?null:q[X];break;case 2:for(var T=S.getMessage(),F=[0,0,0,0];T.next();)switch(T.tag()){case 1:F[0]=T.getDouble();break;case 2:F[1]=T.getDouble();break;case 4:F[2]=T.getDouble();break;case 3:F[3]=
T.getDouble();break;default:T.skip()}J.scale=F;break;case 3:for(var Z=S.getMessage(),F=[0,0,0,0];Z.next();)switch(Z.tag()){case 1:F[0]=Z.getDouble();break;case 2:F[1]=Z.getDouble();break;case 4:F[2]=Z.getDouble();break;case 3:F[3]=Z.getDouble();break;default:Z.skip()}J.translate=F;break;default:S.skip()}E.transform=J;break;case 9:var U=x.getBool();E.exceededTransferLimit=U;break;case 13:w.addField(E,p(x.getMessage()));break;case 15:A||(w.prepareFeatures(E),A=!0);w.addFeature(E,e(w,E,x.getMessage(),
E.fields));break;default:x.skip()}w.finishFeatureResult(E);y.featureResult=E;break;default:n.skip()}f.queryResult=y;break;default:g.skip()}return a}catch(M){return g=new l("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:M}),c.error(g),{queryResult:{featureResult:d.createFeatureResult()}}}}})},"esri/tasks/operations/pbfDehydratedFeatureSet":function(){define("require exports ../../Graphic ../../core/compilerUtils ../../geometry/SpatialReference ../../layers/support/Field".split(" "),
function(d,a,l,f,h,k){function b(a,b,c,e){return b}function g(a,b,c,e){switch(c){case 0:return n(a,b+e,0);case 1:return a.translate[1]-(b+e)*a.scale[1]}}function p(a,b,c,e){switch(c){case 0:return n(a,b+e,0);case 1:return a.translate[1]-(b+e)*a.scale[1];case 2:return n(a,b,2)}}function e(a,b,c,e){switch(c){case 0:return n(a,b+e,0);case 1:return a.translate[1]-(b+e)*a.scale[1];case 2:return n(a,b,3)}}function c(a,b,c,e){switch(c){case 0:return n(a,b+e,0);case 1:return a.translate[1]-(b+e)*a.scale[1];
case 2:return n(a,b,3);case 3:return n(a,b,3)}}function n(a,b,c){return a.translate[c]+b*a.scale[c]}Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this.options=a;this.geometryTypes=["point","multipoint","polyline","polygon"];this.previousCoordinate=[0,0];this.transform=null;this.applyTransform=b;this.lengths=[];this.vertexDimension=this.toAddInCurrentPath=this.currentLengthIndex=0;this.coordinateBuffer=null;this.coordinateBufferPtr=0}a.prototype.createFeatureResult=function(){return{exceededTransferLimit:!1,
features:[],fields:[],hasM:!1,hasZ:!1,geometryType:null,objectIdFieldName:null,globalIdFieldName:null,geometryProperties:null,geohashFieldName:null,spatialReference:null,transform:null}};a.prototype.finishFeatureResult=function(a){this.options.applyTransform&&(a.transform=null)};a.prototype.createSpatialReference=function(){return new h};a.prototype.addField=function(a,b){a.fields.push(k.fromJSON(b))};a.prototype.addFeature=function(a,b){var c=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:
0;if(0<c)for(var e in b.attributes){var d=b.attributes[e];"string"===typeof d&&d.length>c&&delete b.attributes[e]}a.features.push(b)};a.prototype.prepareFeatures=function(a){this.options.applyTransform&&a.transform&&(this.transform=a.transform,this.applyTransform=this.deriveApplyTransform(a));this.vertexDimension=2;a.hasZ&&this.vertexDimension++;a.hasM&&this.vertexDimension++;switch(a.geometryType){case "point":this.addCoordinate=this.addCoordinatePoint.bind(this);this.createGeometry=this.createPointGeometry.bind(this);
break;case "polygon":this.addCoordinate=this.addCoordinatePolygon.bind(this);this.createGeometry=this.createPolygonGeometry.bind(this);break;case "polyline":this.addCoordinate=this.addCoordinatePolyline.bind(this);this.createGeometry=this.createPolylineGeometry.bind(this);break;case "multipoint":this.addCoordinate=this.addCoordinateMultipoint.bind(this);this.createGeometry=this.createMultipointGeometry.bind(this);break;default:f.neverReached(a.geometryType)}};a.prototype.createFeature=function(a){this.currentLengthIndex=
this.lengths.length=0;this.previousCoordinate[0]=0;this.previousCoordinate[1]=0;this.coordinateBuffer=null;this.coordinateBufferPtr=0;return{uid:l.generateUID(),objectId:null,attributes:{},geometry:null,visible:!0}};a.prototype.addLength=function(a,b,c){0===this.lengths.length&&(this.toAddInCurrentPath=b);this.lengths.push(b)};a.prototype.createPointGeometry=function(a){a={type:"point",x:0,y:0,spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM};a.hasZ&&(a.z=0);a.hasM&&(a.m=0);return a};
a.prototype.addCoordinatePoint=function(a,b,c,e){b=this.applyTransform(this.transform,b,e,0);switch(e){case 0:a.x=b;break;case 1:a.y=b;break;case 2:a.hasZ?a.z=b:a.m=b;break;case 3:a.m=b}};a.prototype.transformPathLikeValue=function(a,b){var c=0;1>=b&&(c=this.previousCoordinate[b],this.previousCoordinate[b]+=a);return this.applyTransform(this.transform,a,b,c)};a.prototype.addCoordinatePolyline=function(a,b,c,e){this.dehydratedAddPointsCoordinate(a.paths,b,c,e)};a.prototype.addCoordinatePolygon=function(a,
b,c,e){this.dehydratedAddPointsCoordinate(a.rings,b,c,e)};a.prototype.addCoordinateMultipoint=function(a,b,c){0===c&&a.points.push([]);b=this.transformPathLikeValue(b,c);a.points[a.points.length-1].push(b)};a.prototype.createPolygonGeometry=function(a){return{type:"polygon",rings:[[]],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.createPolylineGeometry=function(a){return{type:"polyline",paths:[[]],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.createMultipointGeometry=
function(a){return{type:"multipoint",points:[],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.dehydratedAddPointsCoordinate=function(a,b,c,e){null===this.coordinateBuffer&&(c=this.lengths.reduce(function(a,b){return a+b},0),this.coordinateBuffer=new Float64Array(c*this.vertexDimension));0===e&&0===this.toAddInCurrentPath--&&(a.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);b=this.transformPathLikeValue(b,
e);a=a[a.length-1];0===e&&a.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension));this.coordinateBuffer[this.coordinateBufferPtr++]=b};a.prototype.deriveApplyTransform=function(a){var b=a.hasZ;a=a.hasM;return b&&a?c:b?p:a?e:g};return a}();a.Context=d})},"esri/Graphic":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./PopupTemplate ./core/JSONSupport ./core/lang ./core/accessorSupport/decorators ./geometry/support/typeUtils ./symbols/support/jsonUtils ./symbols/support/typeUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m){d=function(a){function d(b,c,e,d){b=a.call(this,b,c,e,d)||this;b.layer=null;b.popupTemplate=null;b.sourceLayer=null;Object.defineProperty(b,"uid",{value:g.generateUID()});return b}f(d,a);g=d;d.prototype.normalizeCtorArgs=function(a,b,c,e){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:e}};Object.defineProperty(d.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",
b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{set:function(a){var b=this._get("visible");b!==
a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,configurable:!0});d.prototype.getEffectivePopupTemplate=function(){return this.popupTemplate||this.sourceLayer&&this.sourceLayer.popupTemplate};d.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};d.prototype.setAttribute=function(a,b){var c;this.attributes?(c=this.getAttribute(a),this.attributes[a]=b,this._notifyLayer("attributes",c,b,a)):(this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",
void 0,b,a))};d.prototype.toJSON=function(){return{geometry:this.geometry&&this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:l({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};d.prototype.clone=function(){return new g({attributes:p.clone(this.attributes),geometry:this.geometry&&this.geometry.clone()||null,layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:this.symbol&&this.symbol.clone()||
null,visible:this.visible})};d.prototype._notifyLayer=function(a,b,c,e){this.layer&&(b={graphic:this,property:a,oldValue:b,newValue:c},"attributes"===a&&(b.attributeName=e),this.layer.graphicChanged(b))};var g;h([e.property({value:null})],d.prototype,"attributes",null);h([e.property({value:null,types:c.types,json:{read:k.fromJSON}})],d.prototype,"geometry",null);h([e.property()],d.prototype,"layer",void 0);h([e.property({type:b})],d.prototype,"popupTemplate",void 0);h([e.property()],d.prototype,"sourceLayer",
void 0);h([e.property({value:null,types:m.types,json:{read:n.read}})],d.prototype,"symbol",null);h([e.property({type:Boolean,value:!0,set:function(a){}})],d.prototype,"visible",null);return d=g=h([e.subclass("esri.Graphic")],d)}(e.declared(g));var q=0;(function(a){a.generateUID=function(){return q++}})(d||(d={}));return d})},"esri/PopupTemplate":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Collection ./core/JSONSupport ./core/lang ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./support/arcadeUtils ./support/ContentElement ./support/ExpressionInfo ./support/FieldInfo ./support/LayerOptions ./support/RelatedRecordsInfo ./support/ContentElement/Attachments ./support/ContentElement/ContentElement ./support/ContentElement/Fields ./support/ContentElement/Media ./support/ContentElement/Text ./support/ContentElement/Media/types ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D,B,w,C,E,A,H,F){var G=k.ofType({key:"type",defaultKeyValue:"button",base:A,typeMap:{button:H,toggle:F}}),N={base:D,key:"type",typeMap:{media:w,text:C,attachments:z,fields:B}},O=p.getLogger("esri.PopupTemplate");return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.actions=null;b.content="";b.expressionInfos=null;b.fieldInfos=null;b.layerOptions=null;b.lastEditInfoEnabled=!0;b.outFields=null;b.overwriteActions=!1;b.title="";
b.relatedRecordsInfo=null;return b}f(b,a);d=b;b.prototype.castContent=function(a){if(Array.isArray(a))return a.map(function(a){return n.ensureOneOfType(N,a)});if("string"===typeof a||"function"===typeof a||a instanceof HTMLElement||e.isThenable(a))return a;O.error("content error","unsupported content value",{value:a});return null};b.prototype.readContent=function(a,b){var c=b.description,e=b.mediaInfos;a=b.popupElements;b=b.showAttachments;if(Array.isArray(a)&&0<a.length)return a.map(function(a){if("media"===
a.type)return!a.mediaInfos&&e&&(a.mediaInfos=e),w.fromJSON(a);if("text"===a.type)return!a.text&&c&&(a.text=c),C.fromJSON(a);if("attachments"===a.type)return z.fromJSON(a);if("fields"===a.type)return B.fromJSON(a)}).filter(Boolean);a=[];c?a.push(new C({text:c})):a.push(new B);Array.isArray(e)&&e.length&&a.push(w.fromJSON({mediaInfos:e}));b&&a.push(z.fromJSON({displayType:"list"}));return a.length?a:c};b.prototype.writeContent=function(a,b){b.showAttachments=!1;"string"===typeof a?b.description=a:Array.isArray(a)&&
(b.popupElements=a.map(function(a){return a&&a.toJSON()}),b.popupElements.forEach(function(a){"attachments"!==a.type||b.showAttachments?"media"!==a.type||b.mediaInfos?"text"!==a.type||b.description||(a.text&&(b.description=a.text),delete a.text):(a.mediaInfos&&(b.mediaInfos=g.clone(a.mediaInfos)),delete a.mediaInfos):b.showAttachments=!0}))};b.prototype.writeLayerOptions=function(a,b){b.layerOptions=a&&null!==a.showNoDataRecords?a.toJSON():null};b.prototype.writeTitle=function(a,b){b.title=a||""};
Object.defineProperty(b.prototype,"requiredFields",{get:function(){return this.collectRequiredFields()},enumerable:!0,configurable:!0});b.prototype.clone=function(){var a=this.actions,a=a?g.clone(a.toArray()):[];return new d({actions:a,content:Array.isArray(this.content)?g.clone(this.content):this.content,fieldInfos:Array.isArray(this.fieldInfos)?g.clone(this.fieldInfos):null,layerOptions:this.layerOptions?g.clone(this.layerOptions):null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?
g.clone(this.relatedRecordsInfo):null,title:this.title})};b.prototype.collectRequiredFields=function(){var a=(this.outFields||[]).concat(this._getActionsFields(this.actions),this._getTitleFields(this.title),this._getContentFields(this.content),this._getExpressionInfoFields(this.expressionInfos));return-1!==a.indexOf("*")?["*"]:a.filter(function(a,b,c){return a&&b===c.indexOf(a)})};b.prototype._getContentElementFields=function(a){var b=this;if(!a||"attachments"===a.type)return[];if("fields"===a.type)return this._getFieldInfoFields(a.fieldInfos||
this.fieldInfos);if("media"===a.type)return(a.mediaInfos||[]).reduce(function(a,c){return a.concat(b._getMediaInfoFields(c))},[]);if("text"===a.type)return this._extractFieldNames(a.text)};b.prototype._getMediaInfoFields=function(a){var b=a.caption,c=a.value||{},e=c.fields,d=void 0===e?[]:e,e=c.normalizeField,g=c.tooltipField,f=c.sourceURL,c=c.linkURL;a=this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(f),this._extractFieldNames(c),d);e&&a.push(e);g&&a.push(g);
return a};b.prototype._getContentFields=function(a){var b=this;return"string"===typeof a?this._extractFieldNames(a):Array.isArray(a)?a.reduce(function(a,c){return a.concat(b._getContentElementFields(c))},[]):[]};b.prototype._getExpressionInfoFields=function(a){return a?a.reduce(function(a,b){return a.concat(m.extractFieldNames(b.expression))},[]):[]};b.prototype._getFieldInfoFields=function(a){return a?a.filter(function(a){return"undefined"===typeof a.visible?!0:!!a.visible}).map(function(a){return a.fieldName}).filter(function(a){return-1===
a.indexOf("relationships/")&&-1===a.indexOf("expression/")}):[]};b.prototype._getActionsFields=function(a){var b=this;return a?a.toArray().reduce(function(a,c){return a.concat(b._getActionFields(c))},[]):[]};b.prototype._getActionFields=function(a){var b=a.className,c=a.type,c="button"===c||"toggle"===c?a.image:"";return this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(c))};b.prototype._getTitleFields=function(a){return"string"===typeof a?this._extractFieldNames(a):
[]};b.prototype._extractFieldNames=function(a){if(!a||"string"!==typeof a)return[];a=a.match(/{[^}]*}/g);if(!a)return[];var b=/\{(\w+):.+\}/;return(a=a.filter(function(a){return!(0===a.indexOf("{relationships/")||0===a.indexOf("{expression/"))}).map(function(a){return a.replace(b,"{$1}")}))?a.map(function(a){return a.slice(1,-1)}):[]};var d;h([c.property({type:G})],b.prototype,"actions",void 0);h([c.property()],b.prototype,"content",void 0);h([c.cast("content")],b.prototype,"castContent",null);h([c.reader("content",
["description","popupElements","mediaInfos","showAttachments"])],b.prototype,"readContent",null);h([c.writer("content",{popupElements:{type:k.ofType(q.types)},showAttachments:{type:Boolean},mediaInfos:{type:k.ofType(E.default)},description:{type:String}})],b.prototype,"writeContent",null);h([c.property({type:[y],json:{write:!0}})],b.prototype,"expressionInfos",void 0);h([c.property({type:[x],json:{write:!0}})],b.prototype,"fieldInfos",void 0);h([c.property({type:t})],b.prototype,"layerOptions",void 0);
h([c.writer("layerOptions")],b.prototype,"writeLayerOptions",null);h([c.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],b.prototype,"lastEditInfoEnabled",void 0);h([c.property()],b.prototype,"outFields",void 0);h([c.property()],b.prototype,"overwriteActions",void 0);h([c.property({json:{type:String}})],b.prototype,"title",void 0);h([c.writer("title")],b.prototype,"writeTitle",null);h([c.property({type:u,json:{write:!0}})],b.prototype,
"relatedRecordsInfo",void 0);h([c.property({dependsOn:"actions title content fieldInfos expressionInfos outFields".split(" "),readOnly:!0})],b.prototype,"requiredFields",null);return b=d=h([c.subclass("esri.PopupTemplate")],b)}(c.declared(b))})},"esri/support/ContentElement":function(){define("require exports ./ContentElement/Attachments ./ContentElement/ContentElement ./ContentElement/Fields ./ContentElement/Media ./ContentElement/Text".split(" "),function(d,a,l,f,h,k,b){Object.defineProperty(a,
"__esModule",{value:!0});a.AttachmentsContentElement=l;a.BaseContentElement=f;a.FieldsContentElement=h;a.MediaContentElement=k;a.TextContentElement=b;a.isContentElement=function(b){return b instanceof a.BaseContentElement};a.types={base:null,key:"type",typeMap:{attachment:a.AttachmentsContentElement,fields:a.FieldsContentElement,media:a.MediaContentElement,text:a.TextContentElement}}})},"esri/support/ContentElement/Attachments":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../../layers/support/AttachmentInfo ./ContentElement".split(" "),
function(d,a,l,f,h,k,b,g){return function(a){function e(b){b=a.call(this)||this;b.attachmentInfos=null;b.displayType=null;b.type="attachments";return b}l(e,a);c=e;e.prototype.clone=function(){return new c({displayType:this.displayType,attachmentInfos:this.attachmentInfos?h.clone(this.attachmentInfos):null})};var c;f([k.property({type:[b]})],e.prototype,"attachmentInfos",void 0);f([k.property({type:String,json:{write:!0}})],e.prototype,"displayType",void 0);f([k.property({type:String,readOnly:!0,json:{read:!1,
write:!0}})],e.prototype,"type",void 0);return e=c=f([k.subclass("esri.support.ContentElement.Attachments")],e)}(k.declared(g))})},"esri/layers/support/AttachmentInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;b.contentType=null;b.id=null;b.keywords=
null;b.name=null;b.parentObjectId=null;b.size=null;b.url=null;return b}l(d,a);e=d;d.prototype.clone=function(){return new e({contentType:this.contentType,id:this.id,keywords:this.keywords,name:this.name,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};var e;f([k.property({type:String})],d.prototype,"contentType",void 0);f([k.property({type:b.Integer})],d.prototype,"id",void 0);f([k.property({type:String})],d.prototype,"keywords",void 0);f([k.property({type:String})],d.prototype,"name",
void 0);f([k.property({json:{read:!1}})],d.prototype,"parentObjectId",void 0);f([k.property({type:b.Integer})],d.prototype,"size",void 0);f([k.property({json:{read:!1}})],d.prototype,"url",void 0);return d=e=f([k.subclass("esri.layers.support.AttachmentInfo")],d)}(k.declared(h))})},"esri/support/ContentElement/ContentElement":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.type=null;return b}l(b,a);f([k.property({type:["attachments","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=f([k.subclass("esri.support.ContentElement.ContentElement")],b)}(k.declared(h))})},"esri/support/ContentElement/Fields":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../../support/FieldInfo ./ContentElement".split(" "),
function(d,a,l,f,h,k,b,g){return function(a){function e(b){b=a.call(this)||this;b.fieldInfos=null;b.type="fields";return b}l(e,a);c=e;e.prototype.writeFieldInfos=function(a,b){b.fieldInfos=a&&a.map(function(a){return a.toJSON()})};e.prototype.clone=function(){return new c({fieldInfos:Array.isArray(this.fieldInfos)?h.clone(this.fieldInfos):null})};var c;f([k.property({type:[b]})],e.prototype,"fieldInfos",void 0);f([k.writer("fieldInfos")],e.prototype,"writeFieldInfos",null);f([k.property({type:String,
readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0);return e=c=f([k.subclass("esri.support.ContentElement.Fields")],e)}(k.declared(g))})},"esri/support/FieldInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ./FieldInfo/Format".split(" "),function(d,a,l,f,h,k,b,g,p){var e=k({richtext:"rich-text",textarea:"text-area",textbox:"text-box"});
return function(a){function c(b){b=a.call(this)||this;b.fieldName=null;b.format=null;b.isEditable=!1;b.label=null;b.stringFieldOption="text-box";b.statisticType=null;b.tooltip=null;b.visible=!0;return b}l(c,a);d=c;c.prototype.writeStringFieldOption=function(a,b){b.stringFieldOption=e.toJSON(a)};c.prototype.readStringFieldOption=function(a){if(a)return e.fromJSON(a)};c.prototype.clone=function(){return new d({fieldName:this.fieldName,format:this.format?b.clone(this.format):null,isEditable:this.isEditable,
label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})};var d;f([g.property({type:String,json:{write:!0}})],c.prototype,"fieldName",void 0);f([g.property({type:p,json:{write:!0}})],c.prototype,"format",void 0);f([g.property({type:Boolean,json:{write:!0,default:!1}})],c.prototype,"isEditable",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);f([g.property({type:e.apiValues,json:{write:!0,
default:"text-box",type:e.jsonValues}})],c.prototype,"stringFieldOption",void 0);f([g.writer("stringFieldOption")],c.prototype,"writeStringFieldOption",null);f([g.reader("stringFieldOption")],c.prototype,"readStringFieldOption",null);f([g.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],c.prototype,"statisticType",void 0);f([g.property({type:String,json:{write:!0}})],c.prototype,"tooltip",void 0);f([g.property({type:Boolean,json:{write:!0}})],c.prototype,"visible",void 0);
return c=d=f([g.subclass("esri.support.FieldInfo")],c)}(g.declared(h))})},"esri/support/FieldInfo/Format":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/date ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(d,a,l,f,h,k,b,g){return function(a){function e(b){b=a.call(this)||this;b.dateFormat=null;b.digitSeparator=!1;b.places=null;return b}l(e,a);c=e;e.prototype.clone=
function(){return new c({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})};var c;f([b.enumeration.serializable()(h.dictionary)],e.prototype,"dateFormat",void 0);f([b.property({type:Boolean,json:{write:!0}})],e.prototype,"digitSeparator",void 0);f([b.property({type:g.Integer,json:{write:!0}})],e.prototype,"places",void 0);return e=c=f([b.subclass("esri.support.FieldInfo.Format")],e)}(b.declared(k))})},"esri/core/date":function(){define(["require","exports","./kebabDictionary"],
function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});var f={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",
"short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",
"short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};a.dictionary=l.strict()({shortDate:"short-date",shortDateLE:"short-date-le",longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",shortDateLELongTime:"short-date-le-long-time",
shortDateShortTime:"short-date-short-time",shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",shortDateLELongTime24:"short-date-le-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});a.toJSON=a.dictionary.toJSON.bind(a.dictionary);a.fromJSON=a.dictionary.fromJSON.bind(a.dictionary);a.getFormat=function(a){return f[a]}})},
"esri/support/ContentElement/Media":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./ContentElement ./Media/BarChart ./Media/ColumnChart ./Media/Image ./Media/LineChart ./Media/PieChart ./Media/types".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n,m){return function(a){function b(b){b=a.call(this)||this;b.mediaInfos=null;b.type="media";return b}l(b,a);d=b;b.prototype.readMediaInfos=
function(a){return a&&a.map(function(a){if("image"===a.type)return e.fromJSON(a);if("barchart"===a.type)return g.fromJSON(a);if("columnchart"===a.type)return p.fromJSON(a);if("linechart"===a.type)return c.fromJSON(a);if("piechart"===a.type)return n.fromJSON(a)}).filter(Boolean)};b.prototype.writeMediaInfos=function(a,b){b.mediaInfos=a&&a.map(function(a){return a.toJSON()})};b.prototype.clone=function(){return new d({mediaInfos:this.mediaInfos?h.clone(this.mediaInfos):null})};var d;f([k.property({types:[m.default]})],
b.prototype,"mediaInfos",void 0);f([k.reader("mediaInfos")],b.prototype,"readMediaInfos",null);f([k.writer("mediaInfos")],b.prototype,"writeMediaInfos",null);f([k.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=d=f([k.subclass("esri.support.ContentElement.Media")],b)}(k.declared(b))})},"esri/support/ContentElement/Media/BarChart":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Chart ./Chart/utils".split(" "),
function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;b.type="bar-chart";return b}l(d,a);e=d;d.prototype.clone=function(){return new e({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var e;f([h.property({type:["bar-chart"],readOnly:!0,json:{read:!1,write:b.chartTypeKebabDict.write}})],d.prototype,"type",void 0);return d=e=f([h.subclass("esri.support.ContentElement.Media.BarChart")],d)}(h.declared(k))})},"esri/support/ContentElement/Media/Chart":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Media ./Chart/Value".split(" "),
function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;b.type=null;b.value=null;return b}l(d,a);f([h.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],d.prototype,"type",void 0);f([h.property({type:b,json:{write:!0}})],d.prototype,"value",void 0);return d=f([h.subclass("esri.support.ContentElement.Media.Chart")],d)}(h.declared(k))})},"esri/support/ContentElement/Media/Media":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.caption="";b.title="";b.type=null;return b}l(b,a);f([k.property({type:String,json:{write:!0}})],b.prototype,"caption",void 0);f([k.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);f([k.property({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=f([k.subclass("esri.support.ContentElement.Media.Media")],b)}(k.declared(h))})},
"esri/support/ContentElement/Media/Chart/Value":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/JSONSupport ../../../../core/lang ../../../../core/accessorSupport/decorators ./Series".split(" "),function(d,a,l,f,h,k,b,g){return function(a){function e(b){b=a.call(this)||this;b.fields=[];b.normalizeField=null;b.series=[];b.theme=null;b.tooltipField=null;return b}l(e,a);c=e;e.prototype.clone=function(){return new c({fields:k.clone(this.fields),
normalizeField:this.normalizeField,tooltipField:this.tooltipField})};var c;f([b.property({type:[String],json:{write:!0}})],e.prototype,"fields",void 0);f([b.property({type:String,json:{write:!0}})],e.prototype,"normalizeField",void 0);f([b.property({type:[g],json:{read:!1}})],e.prototype,"series",void 0);f([b.property({type:String,json:{read:!1}})],e.prototype,"theme",void 0);f([b.property({type:String,json:{write:!0}})],e.prototype,"tooltipField",void 0);return e=c=f([b.subclass("esri.support.Media.Chart.Value")],
e)}(b.declared(h))})},"esri/support/ContentElement/Media/Chart/Series":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.tooltip=null;b.x=null;b.y=null;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({tooltip:this.tooltip,x:this.x,y:this.y})};var d;f([k.property()],
b.prototype,"tooltip",void 0);f([k.property()],b.prototype,"x",void 0);f([k.property()],b.prototype,"y",void 0);return b=d=f([k.subclass("esri.support.Media.Chart.Series")],b)}(k.declared(h))})},"esri/support/ContentElement/Media/Chart/utils":function(){define(["require","exports","../../../../core/kebabDictionary"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.chartTypeKebabDict=l.strict()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})})},
"esri/support/ContentElement/Media/ColumnChart":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Chart ./Chart/utils".split(" "),function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;b.type="column-chart";return b}l(d,a);e=d;d.prototype.clone=function(){return new e({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var e;f([h.property({type:["column-chart"],
readOnly:!0,json:{read:!1,write:b.chartTypeKebabDict.write}})],d.prototype,"type",void 0);return d=e=f([h.subclass("esri.support.ContentElement.Media.ColumnChart")],d)}(h.declared(k))})},"esri/support/ContentElement/Media/Image":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Media ./Image/Value".split(" "),function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;
b.refreshInterval=null;b.type="image";b.value=null;return b}l(d,a);e=d;d.prototype.clone=function(){return new e({title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})};var e;f([h.property({type:Number,json:{write:!0}})],d.prototype,"refreshInterval",void 0);f([h.property({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],d.prototype,"type",void 0);f([h.property({type:b,json:{write:!0}})],d.prototype,"value",void 0);return d=e=f([h.subclass("esri.support.ContentElement.Media.Image")],
d)}(h.declared(k))})},"esri/support/ContentElement/Media/Image/Value":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/JSONSupport ../../../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.linkURL=null;b.sourceURL=null;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({linkURL:this.linkURL,sourceURL:this.sourceURL})};var d;
f([k.property({type:String,json:{write:!0}})],b.prototype,"linkURL",void 0);f([k.property({type:String,json:{write:!0}})],b.prototype,"sourceURL",void 0);return b=d=f([k.subclass("esri.support.MediaInfo.Image.Value")],b)}(k.declared(h))})},"esri/support/ContentElement/Media/LineChart":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Chart ./Chart/utils".split(" "),function(d,a,l,f,h,k,
b){return function(a){function d(b){b=a.call(this)||this;b.type="line-chart";return b}l(d,a);e=d;d.prototype.clone=function(){return new e({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var e;f([h.property({type:["line-chart"],readOnly:!0,json:{read:!1,write:b.chartTypeKebabDict.write}})],d.prototype,"type",void 0);return d=e=f([h.subclass("esri.support.ContentElement.Media.LineChart")],d)}(h.declared(k))})},"esri/support/ContentElement/Media/PieChart":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./Chart ./Chart/utils".split(" "),
function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;b.type="pie-chart";return b}l(d,a);e=d;d.prototype.clone=function(){return new e({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var e;f([h.property({type:["pie-chart"],readOnly:!0,json:{read:!1,write:b.chartTypeKebabDict.write}})],d.prototype,"type",void 0);return d=e=f([h.subclass("esri.support.ContentElement.Media.PieChart")],d)}(h.declared(k))})},"esri/support/ContentElement/Media/types":function(){define("require exports ./BarChart ./ColumnChart ./Image ./LineChart ./Media ./PieChart".split(" "),
function(d,a,l,f,h,k,b,g){Object.defineProperty(a,"__esModule",{value:!0});a.types={base:b,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":l,"column-chart":f,"line-chart":k,"pie-chart":g,image:h}};a.default=a.types})},"esri/support/ContentElement/Text":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ContentElement".split(" "),function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||
this;b.text=null;b.type="text";return b}l(b,a);d=b;b.prototype.clone=function(){return new d({text:this.text})};var d;f([h.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);f([h.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=d=f([h.subclass("esri.support.ContentElement.Text")],b)}(h.declared(k))})},"esri/support/ExpressionInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.name=null;b.title=null;b.expression=null;b.returnType=null;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})};var d;f([k.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);f([k.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);f([k.property({type:String,json:{write:!0}})],b.prototype,"expression",
void 0);f([k.property({type:["string","number"],json:{write:!0}})],b.prototype,"returnType",void 0);return b=d=f([k.subclass("esri.support.ExpressionInfo")],b)}(k.declared(h))})},"esri/support/LayerOptions":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.showNoDataRecords=null;return b}l(b,a);d=b;
b.prototype.clone=function(){return new d({showNoDataRecords:this.showNoDataRecords})};var d;f([k.property({type:Boolean,json:{write:!0}})],b.prototype,"showNoDataRecords",void 0);return b=d=f([k.subclass("esri.support.LayerOptions")],b)}(k.declared(h))})},"esri/support/RelatedRecordsInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./RelatedRecordsInfo/FieldOrder".split(" "),
function(d,a,l,f,h,k,b,g){return function(a){function e(b){b=a.call(this)||this;b.showRelatedRecords=null;b.orderByFields=null;return b}l(e,a);c=e;e.prototype.clone=function(){return new c({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?k.clone(this.orderByFields):null})};var c;f([b.property({type:Boolean,json:{write:!0}})],e.prototype,"showRelatedRecords",void 0);f([b.property({type:[g],json:{write:!0}})],e.prototype,"orderByFields",void 0);return e=c=f([b.subclass("esri.support.RelatedRecordsInfo")],
e)}(b.declared(h))})},"esri/support/RelatedRecordsInfo/FieldOrder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.field=null;b.order=null;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({field:this.field,order:this.order})};var d;f([k.property({type:String,json:{write:!0}})],
b.prototype,"field",void 0);f([k.property({type:["asc","desc"],json:{write:!0}})],b.prototype,"order",void 0);return b=d=f([k.subclass("esri.support.RelatedRecordsInfo.FieldOrder")],b)}(k.declared(h))})},"esri/support/actions/ActionBase":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k,b){return function(a){function d(b){b=
a.call(this)||this;b.active=!1;b.className=null;b.disabled=!1;b.id=null;b.indicator=!1;b.title=null;b.type=null;b.visible=!0;return b}l(d,a);e=d;d.prototype.clone=function(){return new e({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};var e;f([b.property()],d.prototype,"active",void 0);f([b.property()],d.prototype,"className",void 0);f([b.property()],d.prototype,"disabled",void 0);f([b.property()],d.prototype,
"id",void 0);f([b.property()],d.prototype,"indicator",void 0);f([b.property()],d.prototype,"title",void 0);f([b.property()],d.prototype,"type",void 0);f([b.property()],d.prototype,"visible",void 0);return d=e=f([b.subclass("esri.support.actions.ActionBase")],d)}(b.declared(h,k.Identifiable))})},"esri/support/actions/ActionButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.image=null;b.type="button";return b}l(b,a);d=b;b.prototype.clone=function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};var d;f([h.property()],b.prototype,"image",void 0);return b=d=f([h.subclass("esri.support.Action.ActionButton")],b)}(h.declared(k))})},"esri/support/actions/ActionToggle":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),
function(d,a,l,f,h,k){return function(a){function b(b){b=a.call(this)||this;b.image=null;b.type="toggle";b.value=!1;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};var d;f([h.property()],b.prototype,"image",void 0);f([h.property()],b.prototype,"value",void 0);return b=d=f([h.subclass("esri.support.Action.ActionToggle")],
b)}(h.declared(k))})},"esri/tasks/operations/pbfOptimizedFeatureSet":function(){define(["require","exports","../../layers/graphics/OptimizedFeature","../../layers/graphics/OptimizedFeatureSet","../../layers/graphics/OptimizedGeometry"],function(d,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}a.prototype.createFeatureResult=function(){return new f.default};
a.prototype.prepareFeatures=function(){};a.prototype.finishFeatureResult=function(){};a.prototype.addFeature=function(a,d){a.features.push(d)};a.prototype.createFeature=function(){return new l.default};a.prototype.createSpatialReference=function(){return{wkid:0}};a.prototype.createGeometry=function(){return new h.default};a.prototype.addField=function(a,d){a.fields.push(d)};a.prototype.addCoordinate=function(a,d){a.coords.push(d)};a.prototype.addCoordinatePoint=function(a,d){a.coords.push(d)};a.prototype.addLength=
function(a,d){a.lengths.push(d)};a.prototype.createPointGeometry=function(){return new h.default};return a}();a.Context=d})},"esri/tasks/operations/PBFWorker":function(){define("require exports ../../Graphic ../../core/promiseUtils ../../geometry/SpatialReference ./pbfQueryUtils".split(" "),function(d,a,l,f,h,k){return function(){function a(){}a.prototype.parseFeatureQuery=function(a,b){return a&&0!==a.byteLength?this.thread?this.thread.invoke("_parseFeatureQuery",{buffer:a,options:b},{transferList:[a]}).then(function(a){var b=
a.featureSet;if(a.sr){var e=h.fromJSON(a.sr);b.spatialReference=e}for(var e=b.spatialReference,d=0,b=b.features;d<b.length;d++){var g=b[d];g.uid=l.generateUID();g.geometry&&(g.geometry.spatialReference=e)}return a.featureSet}):f.resolve(k.parsePBFFeatureQuery(a,b)):f.resolve(null)};a.prototype._parseFeatureQuery=function(a){var b=k.parsePBFFeatureQuery(a.buffer,a.options),e;a.options&&"dehydrated"===a.options.type&&(e=b.spatialReference.toJSON(),b.spatialReference=null);return f.resolve({featureSet:b,
sr:e})};return a}()})},"esri/tasks/operations/urlUtils":function(){define(["require","exports"],function(d,a){function l(a){var d={},f;for(f in a)if("declaredClass"!==f){var b=a[f];if(null!=b&&"function"!==typeof b)if(Array.isArray(b)){d[f]=[];for(var g=0;g<b.length;g++)d[f][g]=l(b[g])}else"object"===typeof b?b.toJSON&&(d[f]=JSON.stringify(b)):d[f]=b}return d}Object.defineProperty(a,"__esModule",{value:!0});a.mapParameters=l})},"esri/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Error ../../../../core/Logger ../../../../core/screenUtils ../../../../geometry/support/quantizationUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties ../../../3d/support/mathUtils ../../../webgl/Texture".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q){function y(a){for(var b={},c=0;c<a.length;c++){var e=a[c];b[e.name]=e.strideInBytes}return b}function x(a){switch(a){case c.WGLGeometryType.MARKER:return G;case c.WGLGeometryType.FILL:return N;case c.WGLGeometryType.LINE:return O;case c.WGLGeometryType.TEXT:return S;case c.WGLGeometryType.LABEL:return J}return null}function t(a){switch(a%4){case 0:case 2:return 4;case 1:case 3:return 1}}function u(a){switch(a){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";
case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return a}function z(a){if(a=u(a.type)){switch(a){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function D(a){if(a=u(a.type)){switch(a){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function B(a){if(a=u(a.type)){switch(a){case "simple-line":case "picture-line":return!0;
case "CIMLineSymbol":return!0}return!1}}function w(a){if(a=u(a.type)){switch(a){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function C(a){return a&&a.length||0}function E(a){return"string"===typeof a}function A(a){var b={};switch(a){case "esriGeometryPoint":return function(a,c,e,d){return g.hydratePoint(c,b,a,e,d)};case "esriGeometryPolygon":return function(a,c,e,d){return g.hydratePolygon(c,b,a,e,d)};case "esriGeometryPolyline":return function(a,c,e,d){return g.hydratePolyline(c,
b,a,e,d)};case "esriGeometryMultipoint":return function(a,c,e,d){return g.hydrateMultipoint(c,b,a,e,d)};default:return F.error(new h("mapview-arcade","Unable to handle geometryType: "+a)),function(a,b,c,e){return a}}}Object.defineProperty(a,"__esModule",{value:!0});var H,F=k.getLogger("esri.views.2d.engine.webgl.Utils");a.C_HITTEST_SEARCH_SIZE=4;a.C_VBO_GEOMETRY="geometry";a.C_VBO_PERINSTANCE="per_instance";a.C_VBO_PERINSTANCE_VV="per_instance_vv";a.C_VBO_VISIBILITY="visibility";a.C_VBO_VISIBILITY_RANGE=
"visibilityRange";a.C_ICON_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_ICON_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_FILL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:28,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_FILL_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,
divisor:0}];a.C_LINE_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_LINE_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:44,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_TEXT_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_TEXT_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,
divisor:0}];a.C_LABEL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:a.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}];a.C_ICON_STRIDE_SPEC=y(a.C_ICON_VERTEX_DEF);a.C_ICON_STRIDE_SPEC_VV=y(a.C_ICON_VERTEX_DEF_VV);a.C_FILL_STRIDE_SPEC=y(a.C_FILL_VERTEX_DEF);a.C_FILL_STRIDE_SPEC_VV=y(a.C_FILL_VERTEX_DEF_VV);a.C_LINE_STRIDE_SPEC=y(a.C_LINE_VERTEX_DEF);a.C_LINE_STRIDE_SPEC_VV=y(a.C_LINE_VERTEX_DEF_VV);a.C_TEXT_STRIDE_SPEC=y(a.C_TEXT_VERTEX_DEF);
a.C_TEXT_STRIDE_SPEC_VV=y(a.C_TEXT_VERTEX_DEF_VV);a.C_LABEL_STRIDE_SPEC=y(a.C_LABEL_VERTEX_DEF);a.getStrides=function(b,e){switch(b){case c.WGLGeometryType.MARKER:return e?a.C_ICON_STRIDE_SPEC_VV:a.C_ICON_STRIDE_SPEC;case c.WGLGeometryType.FILL:return e?a.C_FILL_STRIDE_SPEC_VV:a.C_FILL_STRIDE_SPEC;case c.WGLGeometryType.LINE:return e?a.C_LINE_STRIDE_SPEC_VV:a.C_LINE_STRIDE_SPEC;case c.WGLGeometryType.TEXT:return e?a.C_TEXT_STRIDE_SPEC_VV:a.C_TEXT_STRIDE_SPEC;case c.WGLGeometryType.LABEL:return a.C_LABEL_STRIDE_SPEC}return null};
var G=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],N=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],O=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],S=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],J=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY,a.C_VBO_VISIBILITY_RANGE];a.getNamedBuffers=x;a.strideToPackingFactor=t;a.allocateTypedArrayBuffer=function(a,b){switch(b%4){case 0:case 2:return new Uint32Array(Math.floor(a*b/4));case 1:case 3:return new Uint8Array(a*b)}};a.allocateTypedArrayBufferwithData=function(a,b){switch(b%4){case 0:case 2:return new Uint32Array(a);
case 1:case 3:return new Uint8Array(a)}};a.getSymbolGeometryType=function(a){return z(a)?c.WGLGeometryType.MARKER:B(a)?c.WGLGeometryType.LINE:D(a)?c.WGLGeometryType.FILL:w(a)?c.WGLGeometryType.TEXT:c.WGLGeometryType.UNKNOWN};a.normalizeSymbolType=u;a.isMarkerSymbol=z;a.isFillSymbol=D;a.isLineSymbol=B;a.isPictureSymbol=function(a){if(a=u(a.type))switch(a){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};a.isTextSymbol=w;a.getTextProperties=function(a){return n.TextProperties.pool.acquire(a.color?
e.copyAndPremultiply(a.color):[255,255,255,255],a.haloColor?e.copyAndPremultiply(a.haloColor):[255,255,255,255],b.pt2px(a.haloSize),b.pt2px(a.font.size),a.angle*Math.PI/180,a.xoffset/a.font.size,a.yoffset/a.font.size,"left"===a.horizontalAlignment?0:"right"===a.horizontalAlignment?1:.5,"top"===a.verticalAlignment?0:"bottom"===a.verticalAlignment?1:.5)};a.isSameUniformValue=function(a,b){return!1};a.isSameMaterialInfo=function(a,b){if(a.materialKey!==b.materialKey||C(a.texBindingInfo)!==C(b.texBindingInfo)||
C(a.materialParams)!==C(b.materialParams))return!1;for(var c=a.texBindingInfo.length,e=0;e<c;++e){var d=a.texBindingInfo[e],g=b.texBindingInfo[e];if(d.unit!==g.unit||d.pageId!==g.pageId||d.semantic!==g.semantic)return!1}a=a.materialParams.length;for(e=0;e<a;)return!1;return!0};a.serializeString=function(a,b,c){for(var e=0,d=a.length,g=0;g<d;++g)b&&(b[c+e]=a.charCodeAt(g)),++e;b&&(b[c+e]=0);++e;return e};a.deserializeString=function(a,b,c){var e=0;a.s="";for(var d=!0;d;){var g=b[c+e];++e;0!==g?a.s+=
String.fromCharCode(g):d=!1}return e};a.isDefined=function(a){return null!==a&&void 0!==a};a.isNumber=function(a){return"number"===typeof a};a.isString=E;a.isStringOrNull=function(a){return null==a||E(a)};a.lerp=function(a,b,c){return a+(b-a)*c};d=function(){function a(){this._arr=[];this._push=this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(b)};a.prototype.getKeys=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();a.KeysGetter=d;d=function(){function a(){this._arr=
[];this._push=this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(a)};a.prototype.getValues=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();a.ValuesGetter=d;a.getCapType=function(a,b){switch(a){case "butt":return c.CapType.BUTT;case "round":return b?c.CapType.SQUARE:c.CapType.ROUND;case "square":return c.CapType.SQUARE;default:return F.error(new h("mapview-invalid-type","Cap type "+a+" is not a valid option. Defaulting to round")),c.CapType.ROUND}};
a.getJoinType=function(a){switch(a){case "miter":return c.JoinType.MITER;case "bevel":return c.JoinType.BEVEL;case "round":return c.JoinType.ROUND;default:return F.error(new h("mapview-invalid-type","Join type "+a+" is not a valid option. Defaulting to round")),c.JoinType.ROUND}};a.getVVType=function(a){switch(a){case "opacity":return c.VVType.OPACITY;case "color":return c.VVType.COLOR;case "rotation":return c.VVType.ROTATION;case "size":return c.VVType.SIZE;default:return F.error("Cannot interpret unknown vv: "+
a),null}};a.createHydrateFactory=A;a.getTransformParams=function(a){return{transform:a.transform,hasZ:a.hasZ,hasM:a.hasM}};a.createArcadeFunction=function(a,b,c){var e=b.fields,d=b.spatialReference,g=b.hasGeometryExpr;b=b.geometryType;var h=p.createFunction(a),k=new f,m=new l({viewingMode:null,scale:null}),n={},q={vars:{$feature:k,$view:null},spatialReference:d},t={fields:e},u=A(b);return function(a,b,e){g?(b=u(a.geometry,b.transform,b.hasZ,b.hasM),b.spatialReference=d,k.repurposeFromGraphicLikeObject(b,
a.attributes,t)):k.repurposeFromGraphicLikeObject(a.geometry,a.attributes,t);e?(q.vars.$view=m,m.attributes.viewingMode=e.viewingMode,m.attributes.scale=e.scale):q.vars.$view=n;a=p.executeFunction(h,q);return c?c(a):a}};a.copyMeshData=function(a,b,c,e,d,g,f){for(var h in g)for(var k=g[h].stride,l=t(k),m=g[h].data,n=c[h].data,p=k*d.vertexCount/l,q=k*a/l,l=k*d.vertexFrom/l,k=0;k<p;++k)n[k+q]=m[k+l];c=d.indexCount;for(k=0;k<c;++k)e[k+b]=f[k+d.indexFrom]-d.vertexFrom+a};a.C_VBO_INFO=(H={},H[a.C_VBO_GEOMETRY]=
35044,H[a.C_VBO_VISIBILITY]=35044,H[a.C_VBO_VISIBILITY_RANGE]=35048,H);a.createGeometryData=function(a,b){for(var c=[],e=0;5>e;++e){for(var d={},g=0,f=x(e);g<f.length;g++){var h=f[g];d[h]={data:b(e,h)}}c.push({data:a(e),buffers:d})}return c};a.resampleHermite=function(a,b,c,e,d,g,f){void 0===f&&(f=!0);var h=b/d;c/=g;for(var k=Math.ceil(h/2),l=Math.ceil(c/2),m=0;m<g;m++)for(var n=0;n<d;n++){for(var p=4*(n+(f?g-m-1:m)*d),q=0,t=0,u=0,w=0,D=0,B=0,A=0,y=(m+.5)*c,z=Math.floor(m*c);z<(m+1)*c;z++)for(var G=
Math.abs(y-(z+.5))/l,F=(n+.5)*h,G=G*G,x=Math.floor(n*h);x<(n+1)*h;x++){var r=Math.abs(F-(x+.5))/k,q=Math.sqrt(G+r*r);-1<=q&&1>=q&&(q=2*q*q*q-3*q*q+1,0<q&&(r=4*(x+z*b),A+=q*a[r+3],u+=q,255>a[r+3]&&(q=q*a[r+3]/250),w+=q*a[r],D+=q*a[r+1],B+=q*a[r+2],t+=q))}e[p]=w/t;e[p+1]=D/t;e[p+2]=B/t;e[p+3]=A/u}};a.createTextureFromTexelData=function(a,b){var c,e;m.isPowerOfTwo(b.width)&&m.isPowerOfTwo(b.height)?(c=!0,e=9987):(c=!1,e=9729);return new q(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,
hasMipmap:c,samplingMode:e,wrapMode:33071,flipped:!0},b)};a.geometryToMappedGeometry=function(a){return{vertexFrom:void 0,vertexTo:void 0,geometry:a}}})},"esri/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(d,a,l){function f(a,d){Array.isArray(d)?(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3]):(a[0]=d.r,a[1]=d.g,a[2]=d.b,a[3]=d.a);return a}function h(a,d,f){void 0===d&&(d=0);void 0===f&&(f=!1);var b=a[d+3];a[d+0]*=b;a[d+1]*=b;a[d+2]*=b;f||(a[d+3]*=255);return a}
Object.defineProperty(a,"__esModule",{value:!0});a.white=[255,255,255,1];var k=[0,0,0,0];a.premultiplyAlpha=h;a.copyAndPremultiply=function(a){return h(f([],a))};a.premultiplyAlphaUint32=function(a){h(f(k,a));return l.i8888to32(k[0],k[1],k[2],k[3])};a.premultiplyAlphaRGBA=function(a){var b=a.a;return l.i8888to32(a.r*b,a.g*b,a.b*b,255*b)}})},"esri/views/2d/engine/webgl/number":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=new Float32Array(1),
f=new Uint32Array(l.buffer);a.nextHighestPowerOfTwo=function(a){var d=a;d--;d|=d>>1;d|=d>>2;d|=d>>4;d|=d>>8;d|=d>>16;d++;var b=d>>1;return d-a>a-b?b:d};a.toUint32=function(a){l[0]=a;return f[0]};a.toFloat32=function(a){f[0]=a;return l[0]};a.i1616to32=function(a,d){return 65535&a|d<<16};a.i8888to32=function(a,d,b,g){return a&255|(d&255)<<8|(b&255)<<16|g<<24};a.i8816to32=function(a,d,b){return a&255|(d&255)<<8|b<<16};a.numTo32=function(a){return a|0}})},"esri/views/2d/engine/webgl/enums":function(){define(["require",
"exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(a.WGLGeometryType||(a.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(a.WGLGeometryTransactionStatus||(a.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.MAP=
1]="MAP";a[a.LABEL=2]="LABEL";a[a.LABEL_ALPHA=4]="LABEL_ALPHA";a[a.HITTEST=8]="HITTEST";a[a.HIGHLIGHT=16]="HIGHLIGHT";a[a.CLIP=32]="CLIP";a[a.DEBUG=64]="DEBUG";a[a.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(a.WGLDrawPhase||(a.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(a.VVType||(a.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]=
"SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(a.WGLVVFlag||(a.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(a.WGLVVTarget||(a.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=
1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]="SQUARE"})(a.CapType||(a.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(a.JoinType||(a.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(a.EsriSymbolType||(a.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";
a.PICTURE_MARKER="picture-marker";a.PICTURE_FILL="picture-fill";a.TEXT="text"})(a.EsriSymbolTypeKebab||(a.EsriSymbolTypeKebab={}))})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}a.prototype.acquire=
function(a,d,b,g,f,e,c,l,m){this.color=a;this.haloColor=d;this.haloSize=b;this.size=g;this.angle=f;this.offsetX=e;this.offsetY=c;this.hAnchor=l;this.vAnchor=m};a.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};a.pool=new l(a);return a}();a.TextProperties=d})},"esri/views/webgl/Texture":function(){define(["require",
"exports","../../core/has"],function(d,a,l){return function(){function a(d,f,b){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=d;this._desc={pixelFormat:f.pixelFormat,internalFormat:f.internalFormat,dataType:f.dataType,target:f.target?f.target:3553,samplingMode:f.samplingMode?f.samplingMode:9729,wrapMode:f.wrapMode?f.wrapMode:10497,maxAnisotropy:f.maxAnisotropy,flipped:void 0!==f.flipped?f.flipped:
!1,hasMipmap:void 0!==f.hasMipmap?f.hasMipmap:!1,unpackAlignment:f.unpackAlignment?f.unpackAlignment:4,width:f.width,height:f.height,preMultiplyAlpha:void 0!==f.preMultiplyAlpha?f.preMultiplyAlpha:!1};this._id=++a._nextId;this.setData(b)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",
{get:function(){return this._desc},enumerable:!0,configurable:!0});a.prototype.dispose=function(){var a=this;if(this._context){if(this._glName){var d=this._context.gl;this._boundToUnits.forEach(function(b){a._context.bindTexture(null,b)});d.deleteTexture(this._glName);this._glName=null}this._context=null}};a.prototype.resize=function(a,d){var b=this._desc;if(b.width!==a||b.height!==d)b.width=a,b.height=d,this.setData(null)};a.prototype.setData=function(d){var f=this._context.gl;this._glName||(this._glName=
f.createTexture());void 0===d&&(d=null);null===d&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var b=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var g=this._desc;a._validateTexture(g);f.pixelStorei(f.UNPACK_ALIGNMENT,g.unpackAlignment);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,g.flipped?1:0);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g.preMultiplyAlpha?1:0);var h=g.pixelFormat,e=g.internalFormat?g.internalFormat:h;if(d instanceof ImageData||d instanceof
HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement)g.width&&g.height&&console.assert(d.width===g.width&&d.height===g.height),f.texImage2D(f.TEXTURE_2D,0,e,h,g.dataType,d),g.hasMipmap&&this.generateMipmap(),void 0===this._desc.width&&(this._desc.width=d.width),void 0===this._desc.height&&(this._desc.height=d.height);else{null!=g.width&&null!=g.height||console.error("Width and height must be specified!");f.DEPTH24_STENCIL8&&e===f.DEPTH_STENCIL&&(e=f.DEPTH24_STENCIL8);var c=
g.width,l=g.height;if(null!=d&&"type"in d&&"compressed"===d.type)for(var m=0;;++m){f.compressedTexImage2D(f.TEXTURE_2D,m,e,c,l,0,d.levels[Math.min(m,d.levels.length-1)]);if(1===c&&1===l||!g.hasMipmap)break;c=Math.max(1,c>>1);l=Math.max(1,l>>1)}else if(d)f.texImage2D(f.TEXTURE_2D,0,e,c,l,0,h,g.dataType,d),g.hasMipmap&&this.generateMipmap();else for(m=0;;++m){f.texImage2D(f.TEXTURE_2D,m,e,c,l,0,h,g.dataType,null);if(1===c&&1===l||!g.hasMipmap)break;c=Math.max(1,c>>1);l=Math.max(1,l>>1)}}a._applySamplingMode(f,
this._desc);a._applyWrapMode(f,this._desc);a._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(b,0)};a.prototype.updateData=function(a,d,b,g,f,e){e||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var c=this._context.gl,h=this._desc,k=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>d||0>b||g>h.width||f>h.height||d+g>h.width||b+f>h.height)&&console.error("An attempt to update out of bounds of the texture!");
e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?(console.assert(e.width===g&&e.height===f),c.texSubImage2D(c.TEXTURE_2D,a,d,b,h.pixelFormat,h.dataType,e)):c.texSubImage2D(c.TEXTURE_2D,a,d,b,g,f,h.pixelFormat,h.dataType,e);this._context.bindTexture(k,0)};a.prototype.generateMipmap=function(){var d=this._desc;d.hasMipmap||(d.hasMipmap=!0,a._validateTexture(d));9729===d.samplingMode?(this._samplingModeDirty=!0,d.samplingMode=9985):
9728===d.samplingMode&&(this._samplingModeDirty=!0,d.samplingMode=9984);d=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var f=this._context.gl;f.generateMipmap(f.TEXTURE_2D);this._context.bindTexture(d,0)};a.prototype.setSamplingMode=function(d){d!==this._desc.samplingMode&&(this._desc.samplingMode=d,a._validateTexture(this._desc),this._samplingModeDirty=!0)};a.prototype.setWrapMode=function(d){d!==this._desc.wrapMode&&(this._desc.wrapMode=d,a._validateTexture(this._desc),this._wrapModeDirty=
!0)};a.prototype.applyChanges=function(){var d=this._context.gl,f=this._desc;this._samplingModeDirty&&(a._applySamplingMode(d,f),this._samplingModeDirty=!1);this._wrapModeDirty&&(a._applyWrapMode(d,f),this._wrapModeDirty=!1)};a.prototype.setBoundToUnit=function(a,d){d?this._boundToUnits.add(a):this._boundToUnits.delete(a)};a._isPowerOfTwo=function(a){return 0===(a&a-1)};a._validateTexture=function(d){(0>d.width||0>d.height)&&console.error("Negative dimension parameters are not allowed!");a._isPowerOfTwo(d.width)&&
a._isPowerOfTwo(d.height)||("number"===typeof d.wrapMode?33071!==d.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===d.wrapMode.s&&33071===d.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),d.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};a._applySamplingMode=function(a,d){var b=d.samplingMode;if(9985===b||9987===b)b=9729;else if(9984===b||9986===b)b=9728;a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d.samplingMode)};a._applyWrapMode=function(a,d){"number"===typeof d.wrapMode?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,d.wrapMode),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,d.wrapMode)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,d.wrapMode.s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,d.wrapMode.t))};a._applyAnisotropicFilteringParameters=function(a,d){if(null!=d.maxAnisotropy){var b=a.capabilities.textureFilterAnisotropic;
b&&(a=a.gl,a.texParameterf(a.TEXTURE_2D,b.TEXTURE_MAX_ANISOTROPY,d.maxAnisotropy))}};a._nextId=0;return a}()})},"esri/views/2d/layers/features/controllers/BaseController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k,b){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(){var b=
null!==a&&a.apply(this,arguments)||this;b.processor=null;b.remoteClient=null;b.service=null;b.tileStore=null;return b}l(d,a);d.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])};d.prototype.destroy=function(){};Object.defineProperty(d.prototype,"spatialReference",{get:function(){return this.tileStore.tileScheme.spatialReference},enumerable:!0,configurable:!0});d.prototype.enableEvent=function(a){};f([b.property()],d.prototype,"processor",
void 0);f([b.property({constructOnly:!0})],d.prototype,"remoteClient",void 0);f([b.property({constructOnly:!0})],d.prototype,"service",void 0);f([b.property({dependsOn:["tileStore"]})],d.prototype,"spatialReference",null);f([b.property({constructOnly:!0})],d.prototype,"tileInfo",void 0);f([b.property({constructOnly:!0})],d.prototype,"tileStore",void 0);return d=f([b.subclass()],d)}(b.declared(h,k));a.default=d})},"esri/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k,b){return function(a){function d(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.handles=new k;return b}l(d,a);d.prototype.destroy=function(){this.handles.destroy()};f([b.property({readOnly:!0})],d.prototype,"handles",void 0);return d=f([b.subclass("esri.core.HandleOwner")],d)}(b.declared(h))})},"esri/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this)||this;b._groups=new Map;return b}l(d,a);d.prototype.destroy=function(){this.removeAll()};Object.defineProperty(d.prototype,"size",{get:function(){var a=0;this._groups.forEach(function(b){a+=b.length});return a},enumerable:!0,configurable:!0});d.prototype.add=function(a,b){if(!this._isHandle(a)&&!Array.isArray(a)&&!k.isCollection(a))return this;var c=this._getOrCreateGroup(b);Array.isArray(a)||k.isCollection(a)?a.forEach(function(a){return c.push(a)}):
c.push(a);this.notifyChange("size");return this};d.prototype.has=function(a){return this._groups.has(this._ensureGroupKey(a))};d.prototype.remove=function(a){if(Array.isArray(a)||k.isCollection(a))return a.forEach(this.remove,this),this;if(!this.has(a))return this;for(var b=this._getGroup(a),e=0;e<b.length;e++)b[e].remove();this._deleteGroup(a);this.notifyChange("size");return this};d.prototype.removeAll=function(){this._groups.forEach(function(a){for(var b=0;b<a.length;b++)a[b].remove()});this._groups.clear();
this.notifyChange("size");return this};d.prototype._isHandle=function(a){return a&&!!a.remove};d.prototype._getOrCreateGroup=function(a){if(this.has(a))return this._getGroup(a);var b=[];this._groups.set(this._ensureGroupKey(a),b);return b};d.prototype._getGroup=function(a){return this._groups.get(this._ensureGroupKey(a))};d.prototype._deleteGroup=function(a){return this._groups.delete(this._ensureGroupKey(a))};d.prototype._ensureGroupKey=function(a){return a||"_default_"};f([b.property({readOnly:!0})],
d.prototype,"size",null);return d=f([b.subclass("esri.core.Handles")],d)}(b.declared(h))})},"esri/views/2d/layers/features/support/DataTile":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this.tile=this.displayTile=null;this.done=!1;this.queryInfoHash=null;this.returnExceeded=!1}Object.defineProperty(a.prototype,"key",{get:function(){return this.tile.key},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"id",{get:function(){return this.tile.id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bounds",{get:function(){return this.tile.bounds},enumerable:!0,configurable:!0});return a}();a.default=d})},"esri/views/2d/layers/features/support/DataTileFeaturesIndex":function(){define("require exports @dojo/framework/shim/Map @dojo/framework/shim/Set ../../../../../core/SetPool ../../../../../layers/graphics/data/FeatureStore ./Tile".split(" "),function(d,a,l,f,h,k,b){Object.defineProperty(a,
"__esModule",{value:!0});var g=[],p=new f.default;d=function(){function a(){this._tileById=new l.default;this._tilesToFeatures=new l.default;this._featureToTiles=new l.default}a.prototype.destroy=function(){this.clear()};a.prototype.add=function(a){var c=this;this.has(a.id)||(this._tileById.set(a.id,a),this._tilesToFeatures.set(a,h.default.acquire()),this._tilesToFeatures.forEach(function(e,d){a!==d&&(b.isParentOf(a,d)?e.forEach(function(b){c._link(a,b)}):b.isChildOf(a,d)&&c.spatialIndex.forEachFeatureInBounds(a.bounds,
function(b){e.has(b.objectId)&&c._link(a,b.objectId)}))}))};a.prototype.clear=function(){this._tilesToFeatures.forEach(function(a){return h.default.release(a)});this._tilesToFeatures.clear();this._featureToTiles.forEach(function(a){return h.default.release(a)});this._featureToTiles.clear();this._tileById.clear()};a.prototype.delete=function(a){var b=this,c=this.get(a.id);g.length=0;this._tilesToFeatures.get(c).forEach(function(a){var e=b._featureToTiles.get(a);e.has(c)&&1===e.size?g.push(a):b._unlink(c,
a)});for(a=0;a<g.length;a++)this._unlink(c,g[a]);this.spatialIndex.removeManyById(g);this._tilesToFeatures.delete(c);this._tileById.delete(c.id);g.length=0};a.prototype.forEach=function(a,b){return this._tileById.forEach(a,b)};a.prototype.get=function(a){return this._tileById.get(a)};a.prototype.has=function(a){return this._tileById.has(a)};a.prototype.setTileFeatures=function(a,b){var c=this,e=this.get(a.id);this._tilesToFeatures.has(e)||(this._tileById.set(e.id,e),this._tilesToFeatures.set(e,h.default.acquire()));
for(a=0;a<b.length;a++)p.add(b[a].objectId);g.length=0;this._tilesToFeatures.get(e).forEach(function(a){if(!p.has(a)){var b=c._featureToTiles.get(a);b.has(e)&&1===b.size?g.push(a):c._unlink(e,a)}});for(a=0;a<g.length;a++)this._unlink(e,g[a]);this.spatialIndex.removeManyById(g);this.spatialIndex.addMany(b);p.forEach(function(a){c._link(e,a)});p.clear();g.length=0};a.prototype.addOrUpdateFeatures=function(a){for(var b=this,c=new f.default,e=new k.default({geometryType:this.spatialIndex.geometryType,
hasM:this.spatialIndex.hasM,hasZ:this.spatialIndex.hasZ}),d=0,g=this.deleteFeaturesById(a.map(function(a){return a.objectId}));d<g.length;d++)c.add(g[d]);e.addMany(a);this._tileById.forEach(function(a){e.forEachFeatureInBounds(a.bounds,function(e){b._link(a,e.objectId);c.add(a)})});this.spatialIndex.addMany(a);var h=[];c.forEach(function(a){return h.push(a)});return h};a.prototype.deleteFeaturesById=function(a){for(var b=this,c=new f.default,e=function(a){var e=d._featureToTiles.get(a);e&&(e.forEach(function(e){c.add(e);
b._tilesToFeatures.get(e).delete(a)}),h.default.release(e),d._featureToTiles.delete(a))},d=this,g=0;g<a.length;g++)e(a[g]);this.spatialIndex.removeManyById(a);var k=[];c.forEach(function(a){return k.push(a)});return k};a.prototype._link=function(a,b){this._featureToTiles.get(b)||this._featureToTiles.set(b,h.default.acquire());this._featureToTiles.get(b).add(a);this._tilesToFeatures.get(a).add(b)};a.prototype._unlink=function(a,b){this._featureToTiles.get(b).delete(a);this._tilesToFeatures.get(a).delete(b);
0===this._featureToTiles.get(b).size&&(h.default.release(this._featureToTiles.get(b)),this._featureToTiles.delete(b))};return a}();a.default=d})},"esri/core/SetPool":function(){define(["require","exports","@dojo/framework/shim/Set"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._pool=[];this._set=new l.default}a.prototype.acquire=function(){if(0===this._pool.length)return new l.default;var a=this._pool.pop();this._set.delete(a);return a};a.prototype.release=
function(a){a&&!this._set.has(a)&&(a.clear(),5E4>this._pool.length&&(this._pool.push(a),this._set.add(a)))};a.acquire=function(){return f.acquire()};a.release=function(a){return f.release(a)};return a}();a.default=d;var f=new d})},"esri/views/2d/layers/features/support/TileUpdateQueue":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/scheduling ../../../../../core/accessorSupport/decorators ../../../../../core/libs/gl-matrix-2/gl-matrix ../../../tiling".split(" "),
function(d,a,l,f,h,k,b,g,p){Object.defineProperty(a,"__esModule",{value:!0});var e=[0,0];d=function(a){function c(b){b=a.call(this,b)||this;b._queue=new Map;b._onGoingTile=null;b._onGoingPromise=null;b._isPaused=!1;b._scheduledNextHandle=null;b._timestamp=Date.now();b.tileInfoView=null;b._next=b._next.bind(b);b._finalize=b._finalize.bind(b);return b}l(c,a);Object.defineProperty(c.prototype,"length",{get:function(){return this._queue.size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"updating",{get:function(){return 0<this._queue.size||null!=this._onGoingPromise},enumerable:!0,configurable:!0});c.prototype.cancel=function(a){this._onGoingTile&&this._onGoingTile.tileId===a&&(this._onGoingPromise.cancel(),this._onGoingTile=this._onGoingPromise=null);this._queue.delete(a);this._scheduleNext();this.notifyChange("updating")};c.prototype.clear=function(){this._queue.clear();this._onGoingPromise&&(this._onGoingPromise.cancel(),this._onGoingTile=this._onGoingPromise=null);this._cancelNext();
this.notifyChange("updating")};c.prototype.has=function(a){return this._queue.has(a)};c.prototype.isOngoing=function(a){return this._onGoingTile&&this._onGoingTile.tileId===a};c.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};c.prototype.push=function(a,b){this._queue.has(a)||(this._queue.set(a,{tileId:a,key:p.TileKey.pool.acquire(a),timestamp:b||this._timestamp}),this._scheduleNext(),this.notifyChange("updating"))};c.prototype.refresh=function(){this._timestamp=
Date.now();this.reset()};c.prototype.reset=function(){var a=this._onGoingTile;a&&this.push(a.tileId,this._timestamp);this.notifyChange("updating")};c.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext());this.notifyChange("updating")};c.prototype._finalize=function(){this._onGoingPromise=this._onGoingTile=null;this.notifyChange("updating");this._scheduleNext()};c.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=
null)};c.prototype._scheduleNext=function(){this._isPaused||this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingTile||(this._scheduledNextHandle=k.schedule(this._next))};c.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingTile)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var a=this._peek(),b=a.tileId;p.TileKey.pool.release(a.key);this._queue.delete(b);this._onGoingTile=a;(a=this._onGoingPromise=this.process(b,this._timestamp))&&
"function"===typeof a.then?this._onGoingPromise.then(this._finalize,this._finalize):this._finalize();this.notifyChange("updating")}};c.prototype._peek=function(){var a=this;if(!this.state)throw Error("state not set");var b=this.tileInfoView,c=this.state.center,d=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY,h=null;this._queue.forEach(function(k,l){b.getTileCoords(e,k.key);l=a._timestamp-k.timestamp;isNaN(l)?(l=g.vec2.distance(e,c),l<f&&(f=l,h=k)):l===d?(l=g.vec2.distance(e,c),l<f&&(f=l,h=k)):
l>d&&(d=l,f=Number.POSITIVE_INFINITY,h=k)});return h};f([b.property({readOnly:!0})],c.prototype,"length",null);f([b.property({constructOnly:!0})],c.prototype,"process",void 0);f([b.property()],c.prototype,"state",void 0);f([b.property({constructOnly:!0})],c.prototype,"tileInfoView",void 0);f([b.property({readOnly:!0})],c.prototype,"updating",null);return c=f([b.subclass()],c)}(b.declared(h));a.default=d})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),
function(d,a,l,f,h,k){Object.defineProperty(a,"__esModule",{value:!0});a.TileInfoView=l;a.TileKey=f;a.TileQueue=h;a.TileStrategy=k})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/QueueProcessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/gl-matrix".split(" "),function(d,a,l,f,h,k,b,g){function p(a,b){a.length=0;b.forEach(function(b){return a.push(b)});
return a}var e=new Set,c=[],n=new Map,m=[0,0];return function(a){function d(b){b=a.call(this,b)||this;b._keysToRequests=new Map;b.concurrency=6;b.process=null;b.strategy="scale-first";b.tileInfoView=null;b.tileServers=null;return b}l(d,a);d.prototype.initialize=function(){var a=this,b="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this),c=this.tileServers,e=this.concurrency,d=this.process;this._queues=c&&0<c.length?c.map(function(c){return new k({concurrency:e,
process:function(b){b=a._keysToRequests.get(b);return d(b,c)},peeker:b})}):[new k({concurrency:e,process:function(b){b=a._keysToRequests.get(b);return d(b)},peeker:b})]};d.prototype.destroy=function(){this.clear()};Object.defineProperty(d.prototype,"length",{get:function(){return this._queues.reduce(function(a,b){return a+b.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"updating",{get:function(){return 0<this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});d.prototype.clear=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].clear();this._keysToRequests.clear();this.notifyChange("updating")};d.prototype.find=function(a,b){var c=this;b=0;for(var e=this._queues;b<e.length;b++){var d=e[b].find(function(b){return a(c._keysToRequests.get(b).key)});if(d)return d}};d.prototype.getPromise=function(a){a="string"===typeof a?
a:a.id;for(var b=0,c=this._queues;b<c.length;b++){var e=c[b].get(a);if(e)return e}};d.prototype.getRequest=function(a){return this._keysToRequests.get("string"===typeof a?a:a.id)};d.prototype.has=function(a){return"string"===typeof a?this._keysToRequests.has(a):this._keysToRequests.has(a.id)};d.prototype.isOngoing=function(a){var b="string"===typeof a?a:a.id;return this.has(b)&&this._queues.some(function(a){return a.isOngoing(b)})};d.prototype.pause=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].pause()};
d.prototype.push=function(a){var b=this,c=a.key.id;if(this.has(c))return this.getPromise(c);var e=this._queues[a.key.row%this._queues.length].push(c),d=function(){b._keysToRequests.delete(c);b.notifyChange("updating")};this._keysToRequests.set(c,a);e.then(d,d);this.notifyChange("updating");return e};d.prototype.reset=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].reset();this.notifyChange("updating")};d.prototype.resume=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].resume()};
d.prototype._peekByScaleFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,d=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,f=0;f<a.length;f++){var h=this._keysToRequests.get(a[f]),k=this.tileInfoView.getTileScale(h.key);n.has(k)||(n.set(k,[]),d=Math.max(k,d),g=Math.min(k,g));n.get(k).push(h.key);e.add(k)}var l=this.state.scale;n.has(l)||(p(c,e),c.sort(),l=c.reduce(function(a,b,c,e){return Math.abs(b-l)<Math.abs(a-l)?b:a},c[0]));l=Math.min(l,d);l=Math.max(l,g);a=n.get(l);
var m=b.getClosestInfoForScale(l),q=m.getColumnForX(this.state.center[0]),y=m.getRowForY(this.state.center[1]);a.sort(function(a,b){var c=m.denormalizeCol(a.col,a.world),e=m.denormalizeCol(b.col,b.world);return Math.sqrt((q-c)*(q-c)+(y-a.row)*(y-a.row))-Math.sqrt((q-e)*(q-e)+(y-b.row)*(y-b.row))});e.clear();n.clear();return a[0].id};d.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=this.state.center,e=Number.POSITIVE_INFINITY,d=null,f=0;f<a.length;f++){var h=
this._keysToRequests.get(a[f]);b.getTileCoords(m,h.key);var k=g.vec2.distance(m,c);k<e&&(e=k,d=h.key)}return d.id};f([b.property({constructOnly:!0})],d.prototype,"concurrency",void 0);f([b.property({constructOnly:!0})],d.prototype,"process",void 0);f([b.property()],d.prototype,"state",void 0);f([b.property({constructOnly:!0})],d.prototype,"strategy",void 0);f([b.property({constructOnly:!0})],d.prototype,"tileInfoView",void 0);f([b.property({constructOnly:!0})],d.prototype,"tileServers",void 0);f([b.property({readOnly:!0})],
d.prototype,"updating",null);return d=f([b.subclass()],d)}(b.declared(h))})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TileKey"],function(d,a,l,f){var h=new f(0,0,0,0),k=new Map,b=[],g=[];return function(){function a(a){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=
a.releaseTile;this.tileInfoView=a.tileInfoView;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer)}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var c=this,e=this.tileIndex,d=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);if(d){var f=d.spans,l=d.lodInfo,p=l.level,t=a.state.resolution,u=!a.stationary&&t>this._previousResolution;this._previousResolution=
t;e.forEach(function(a){return a.visible=!0});this.tiles.length=0;k.clear();var z=0,D=0;if(0<f.length)for(var B=0;B<f.length;B++){a=f[B];for(var w=a.row,C=a.colTo,E=a.colFrom;E<=C;E++)z++,a=h.set(p,w,l.normalizeCol(E),l.getWorldForColumn(E)).id,e.has(a)?(t=e.get(a),t.isReady?(k.set(a,t),D++):u||this._addParentTile(a,k)):(t=this.acquireTile(h),this.tileIndex.set(a,t),u||this._addParentTile(a,k))}var A=D===z;g.length=0;b.length=0;e.forEach(function(a,e){h.set(e);if(!k.has(e)){var f=c.tileInfoView.intersects(d,
h);!f||!u&&A?"purge"===c.cachePolicy?h.level===p&&f||b.push(e):(h.level>p||!f)&&b.push(e):a.isReady?g.push(e):h.level>p&&b.push(e)}});for(f=0;f<g.length;f++)a=g[f],(t=e.get(a))&&t.isReady&&k.set(a,t);for(f=0;f<b.length;f++)a=b[f],t=e.get(a),this.releaseTile(t),e["delete"](a);k.forEach(function(a){return c.tiles.push(a)});e.forEach(function(a){k.has(a.key.id)||(a.visible=!1)});g.length=0;b.length=0;k.clear();return A}};a.prototype.clear=function(){var a=this,b=this.tileIndex;b.forEach(function(b){a.releaseTile(b)});
b.clear()};a.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)&&(c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}};return a}()})},"esri/views/2d/layers/features/controllers/MemoryController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper ../../../../../geometry ../../../../../core/Error ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/workers ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/spatialReferenceUtils ../../../../../layers/support/FeatureProcessing ../../../../../tasks/support/QuantizationParameters ../../../../../tasks/support/Query ../../../engine/webgl/Utils ./BaseController ../support/TileUpdateQueue".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u){Object.defineProperty(a,"__esModule",{value:!0});var z=g.getLogger("esri.views.2d.layers.features.controllers.MemoryController");d=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.type="memory";b._processingInMainThread=!1;return b}l(d,a);d.prototype.initialize=function(){var a=this;this._tileQueue=new u.default({tileInfoView:this.tileStore.tileScheme,process:function(b,c){return a._fetchFeatureSet(b,c)}});this._memorySource=e.open(this.service.source,
{client:this});this.handles.add(this.watch("processor",this._switchProcessor.bind(this)))};d.prototype.destroy=function(){this._tileQueue.clear();this._tileQueue.pause()};Object.defineProperty(d.prototype,"processing",{get:function(){return m.fromWorker(this.configuration.processing)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updating",{get:function(){return this._tileQueue.updating},enumerable:!0,configurable:!0});d.prototype.onEdits=function(a){this.refresh()};d.prototype.queryFeatures=
function(a){return this._memorySource.invoke("queryFeatures",a)};d.prototype.queryFeatureCount=function(a){return this._memorySource.invoke("queryFeatureCount",a)};d.prototype.queryObjectIds=function(a){return this._memorySource.invoke("queryObjectIds",a)};d.prototype.queryExtent=function(a){return this._memorySource.invoke("queryExtent",a)};d.prototype.redraw=function(){this.refresh()};d.prototype.refresh=function(){this._tileQueue.refresh();for(var a=0,b=this.tileStore.tiles;a<b.length;a++){var c=
b[a];this._tileQueue.push(c.id,c.updateTimestamp)}};d.prototype.setViewState=function(a){this._tileQueue.state=a};d.prototype.onTileUpdate=function(a){this._tileQueue.pause();for(var b=0,c=a.removed;b<c.length;b++){var e=c[b];this._tileQueue.cancel(e.id)}b=0;for(a=a.added;b<a.length;b++)e=a[b],this._tileQueue.push(e.id,e.updateTimestamp);this.processor&&this._tileQueue.resume()};d.prototype._switchProcessor=function(a,b){this.refresh();a&&this._tileQueue.resume()};d.prototype._fetchFeatureSet=function(a,
b){var c=this,e=this.tileStore.get(a),d=this.processor.queryInfo;return this._query(e,d).then(function(a){return c._wrapPoints(a,d)}).then(function(a){return c._sortFeatures(a,d)}).then(function(a){return a.features.length?a:null}).then(function(a){e.updateTimestamp=b;return c.processor.onTileData(e,{addOrUpdate:a&&a.features,clear:!0,transformParams:a&&x.getTransformParams(a)})}).catch(function(a){e.updateTimestamp=b;"cancel"!==a.dojoType&&(c.processor.onTileError(e,a.message),z.error("query-error",
{error:a}));return p.reject(a)})};d.prototype._query=function(a,b){var c=this,e=new y,d=this._getQuantizationParameters(a),g=b.pixelBuffer*a.resolution;a=a.bounds.slice();a[0]-=g;a[1]-=g;a[2]+=g;a[3]+=g;e.outFields=this.processor.queryInfo.outFields;e.where=this.processor.queryInfo.definitionExpression||"1\x3d1";e.geometry=new k.Extent({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:this.spatialReference});this.service.capabilities.query.supportsQuantization?(e.quantizationParameters=d,
"esriGeometryPolyline"===this.service.geometryType&&(e.maxAllowableOffset=d.tolerance)):e.maxAllowableOffset=d.tolerance;e.resultType="tile";e.returnExceededLimitFeatures=!1;e.returnGeometry=!0;e.returnCentroid=b.returnCentroid;e.orderByFields=b.orderByFields;return this.queryFeatures(e.toJSON()).then(function(a){return c._applyProcessing(a)})};d.prototype._applyProcessing=function(a){var c=this.processing;if(!c)return a;if(this._processingInMainThread)return this.remoteClient.invoke("executeProcessing",
{featureSet:a});try{var e=c.process(a,c.options);return e?e:p.reject(new b("FeatureLayer","invalid processing.process() method, returns nothing"))}catch(A){return this._processingInMainThread=!0,this.remoteClient.invoke("executeProcessing",{featureSet:a})}};d.prototype._getQuantizationParameters=function(a){return new q.default({mode:"view",originPosition:"lower-left",tolerance:a.resolution,extent:new k.Extent({xmin:a.bounds[0],ymin:a.bounds[1],xmax:a.bounds[2],ymax:a.bounds[3],spatialReference:this.spatialReference})})};
d.prototype._wrapPoints=function(a,b){if(0===a.features.length)return a;var c=b.returnCentroid;b=b.pixelBuffer;var e=a.geometryType,d=a.spatialReference,g=a.transform;if("esriGeometryPoint"!==e&&"esriGeometryMultipoint"!==e&&!c||!n.isWrappable(d))return a;c=a.features;d=n.getInfo(d);g=Math.round((d.valid[1]-d.valid[0])/g.scale[0]);if(512===g){d=[];for(e=0;e<c.length;e++){var f=c[e],k=f.geometry,f=f.attributes;k&&(k.x<b?(k={geometry:h({},k),attributes:f},k.geometry.x+=g,d.push(k)):k.x>512-b&&(k={geometry:h({},
k),attributes:f},k.geometry.x-=g,d.push(k)))}c.push.apply(c,d)}else for(d=0;d<c.length;d++)if(k=c[d].geometry)k.x<-b?k.x+=g:k.x>512+b&&(k.x-=g);return a};d.prototype._sortFeatures=function(a,b){if(b=b.orderByFields){b=b[0].split(" ");var c=b[0];"DESC"===b[1]&&a.features.sort(function(a,b){return b.attributes[c]-a.attributes[c]})}return a};f([c.property()],d.prototype,"_tileQueue",void 0);f([c.property()],d.prototype,"configuration",void 0);f([c.property({readOnly:!0,dependsOn:["configuration"]})],
d.prototype,"processing",null);f([c.property({dependsOn:["_tileQueue.updating"]})],d.prototype,"updating",null);return d=f([c.subclass()],d)}(c.declared(t.default));a.default=d})},"esri/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper ../../../../../arcade/Dictionary ../../../../../core/Error ../../../../../core/Logger ../../../../../core/MapPool ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators ../../../../../geometry/SpatialReference ../../../../../layers/support/LabelClass ../../../../../renderers/support/jsonUtils ../../../engine/webgl/definitions ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/Utils ../../../engine/webgl/collisions/CollisionGrid ../../../engine/webgl/mesh/factories/matcherUtils ../../../engine/webgl/mesh/factories/MaterialStore ../../../engine/webgl/mesh/factories/WGLMeshFactory ../../../engine/webgl/mesh/templates/WGLTemplateStore ../../../engine/webgl/util/BidiText ./BaseProcessor".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D,B,w,C,E){function A(a){var b=a&&a.getSymbols();return a&&("unique-value"===a.type||"class-breaks"===a.type)&&null!==a.backgroundFillSymbol||b.some(function(a){return"simple-fill"===a.type||"picture-fill"===a.type})}function H(a,c){switch(a){case "esriGeometryPoint":return!0;case "esriGeometryPolyline":return!0;case "esriGeometryMultipoint":return!0;case "esriGeometryPolygon":return A(c);default:return F.error(new b("mapview-invalid-type",a+" is not supported")),
!1}}Object.defineProperty(a,"__esModule",{value:!0});var F=g.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._symbolToMosaicItemMap=new Map;b._visualSetPromises=new Map;b.type="symbol";return b}l(b,a);b.prototype.destroy=function(){this._visualSetPromises.forEach(function(a,b){a.cancel()});this._visualSetPromises.clear();this._symbolToMosaicItemMap.clear();this.notifyChange("updating")};Object.defineProperty(b.prototype,
"supportsTileUpdates",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"labelingInfo",{get:function(){return this.configuration&&this.configuration.labelingInfo?this.configuration.labelingInfo.map(function(a){return m.fromJSON(a)}):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"labelClassInfos",{get:function(){var a=this;return this.labelingInfo?this.labelingInfo.map(function(b){return{labelOptions:b.getOptions(a.spatialReference),
labelExpression:b.getLabelExpression(),labelClass:b}}):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hydrate",{get:function(){return t.createHydrateFactory(this.service.geometryType)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"factory",{get:function(){var a=this;if(!this.configuration)return null;var b=this.service,c=b.geometryType,e=b.objectIdField,d=b.fields,g=this.configuration,b=g.devicePixelRatio,f=g.hasGeometryExpr,g=n.fromJSON(this.spatialReference),
d={hasGeometryExpr:f,geometryType:c,fields:d,spatialReference:g},f=new D.default,h=new w.default(function(b){return a.remoteClient.invoke("tileRenderer.getMaterialItems",b)},b);this._matcher=z.createMatcher(this.renderer,f,h,d);return new B.default(c,e,this.renderer.visualVariables,d,b,g,f,h,this.labelingInfo,this.tileStore.tileScheme.tileInfo)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"queryInfo",{get:function(){var a=this.configuration,b=a.renderer,c=a.definitionExpression,
e=a.outFields,d=a.gdbVersion,a=a.historicMoment,g=this.service.geometryType,f=this._getReturnCentroid(this.rendererInfo.renderer),h=H(g,this.rendererInfo.renderer),g="esriGeometryPoint"===g||"esriGeometryMultipoint"===g||f?20:0,k=null;(b=b.visualVariables)&&b.some(function(a){if("size"===a.type&&a.field&&!a.normalizationField)return k=[a.field+" DESC"],!0});return{definitionExpression:c,orderByFields:k,outFields:e,pixelBuffer:g,returnCentroid:f,returnGeometry:h,gdbVersion:d,historicMoment:a}},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"renderer",{get:function(){return this.configuration?q.fromJSON(this.configuration.renderer):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"rendererInfo",{get:function(){return this.configuration?x.createRendererInfo(q.fromJSON(this.configuration.renderer),this.tileStore.tileScheme.spatialReference,{fields:this.service.fields}):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){return 0<
this._visualSetPromises.size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fields",{get:function(){return this.service.fields},enumerable:!0,configurable:!0});b.prototype.onTileData=function(a,b){var c=this,d=b.addOrUpdate,g=b.remove,f=b.clear;b=(d&&d.length?this._processFeatures(a,d,b.transformParams):e.resolve()).then(function(b){return c.remoteClient.invoke("tileRenderer.onTileData",{tileKey:a.id,data:{addOrUpdate:b&&b.message||null,remove:g,clear:f}},{transferList:b&&b.transferList||
null})}).catch(function(b){return c._handleError(a,b)});this._visualSetPromises.set(a,b);b.then(function(){return c._cleanPromise(a)},function(){return c._cleanPromise(a)});this.notifyChange("updating");return b};b.prototype.onTileError=function(a,b){var c=this;b=this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:a.id,error:b});this._visualSetPromises.set(a,b);b.then(function(){return c._cleanPromise(a)},function(){return c._cleanPromise(a)});this.notifyChange("updating");return b};b.prototype.onTileUpdate=
function(a){var b=0;for(a=a.removed;b<a.length;b++){var c=a[b],e=this._visualSetPromises;if(!e.has(c))break;e.get(c).cancel();e.delete(c);this.notifyChange("updating")}};b.prototype._cleanPromise=function(a){this._visualSetPromises.delete(a);this.notifyChange("updating")};b.prototype._processFeatures=function(a,b,c){var d=this;if(!b||!b.length)return e.resolve(null);var g=this.factory;return g.analyze(b,this._matcher,c,{viewingMode:"",scale:a.scale}).then(function(b){return d._getLabelMosaicItems(a,
b,c).then(function(e){return d._writeFeatures(a,b,c,e,g)})})};b.prototype._writeFeatures=function(a,b,c,e,d){for(var g=d.createMeshData(b.length),f={viewingMode:"",scale:a.scale},h=this._symbolToMosaicItemMap,k=0;k<b.length;k++)d.write(g,b[k],c,f,a.level,e,h);return this._encodeDisplayData(g)};b.prototype._encodeDisplayData=function(a){var b={},c=[];a.encode(b,c);return{message:b,transferList:c}};b.prototype._handleError=function(a,b){if(b&&"cancel"!==b.dojoType)return this.remoteClient.invoke("tileRenderer.onTileError",
{tileKey:a.id,error:b.message})};b.prototype._getReturnCentroid=function(a){function b(a){if(!a)return!1;a=a.type;return"simple-marker"===a||"picture-marker"===a||"text"===a}if("esriGeometryPolygon"===this.service.geometryType&&this.labelingInfo)return!0;if("esriGeometryPolygon"!==this.service.geometryType)return!1;switch(a.type){case "simple":return b(a.symbol);case "unique-value":return b(a.defaultSymbol)||a.uniqueValueInfos.some(function(a){return b(a.symbol)});case "class-breaks":return b(a.defaultSymbol)||
a.classBreakInfos.some(function(a){return b(a.symbol)});default:return!0}};b.prototype._getLabelMosaicItems=function(a,b,c){var d=p.acquire(),g=this._createLabelFeatures(a.scale,b,d,c),f=this._symbolToMosaicItemMap,h=p.acquire(),k=[],l=0;d.forEach(function(a,b){if(f.has(b.id)){var c=f.get(b.id).glyphMosaicItems,e=[];a.forEach(function(a){if(c&&c.length<a||!c[a])e[a]=a});0<e.length&&(h.set(l,b),k.push({symbol:b.toJSON(),id:l,glyphIds:e}),l++)}else{h.set(l,b);var d=[];a.forEach(function(a){return d.push(a)});
k.push({symbol:b.toJSON(),id:l,glyphIds:d});l++}});if(0<k.length)return this.remoteClient.invoke("tileRenderer.getMaterialItems",k).then(function(a){for(var b=0;b<a.length;b++){var c=a[b],e=h.get(c.id);if(e)if(t.isTextSymbol(e))if(f.has(e.id)){if(e=f.get(e.id).glyphMosaicItems,c=c.mosaicItem.glyphMosaicItems)for(var d=0;d<c.length;d++)null!=c[d]&&(e[d]=c[d])}else f.set(e.id,c.mosaicItem);else f.set(e.id,c.mosaicItem)}p.release(h);return g});p.release(d);return e.resolve(g)};b.prototype._getLabelClassInfos=
function(a){return this.labelClassInfos.map(function(a,b){return{id:b,labelClassInfo:a}}).filter(function(b){b=b.labelClassInfo;return(!b.labelClass.minScale||b.labelClass.minScale>=a||0===b.labelClass.minScale)&&(!b.labelClass.maxScale||b.labelClass.maxScale<=a||0===b.labelClass.maxScale)})};b.prototype._createLabelFeatures=function(a,b,c,e){if(!this.labelingInfo||!b||0===b.length)return null;var d=new k({viewingMode:"",scale:a});a=this._getLabelClassInfos(a);if(0===a.length)return null;for(var g=
p.acquire(),f=new u.default(y.COLLISION_EARLY_REJECT_BUCKET_SIZE),l=0;l<b.length;l++){var m=b[l],q=this.service.geometryType,t=0,w=0;if("esriGeometryPoint"===q||"esriGeometryPolygon"===q)if("esriGeometryPoint"===q?(q=m.geometry,t=q.x,w=q.y):(t=m.centroid.x,w=m.centroid.y),f.checkOverlap(t,w))continue;t=m.attributes[this.service.objectIdField];q=[];for(w=0;w<a.length;w++){var D=a[w],B=D.labelClassInfo,D=D.id,A=m;if(this.configuration.hasGeometryExpr){if(!e){F.error("mapview-labeling","Tried to evaluate geometry expression but no transformation found");
return}var A=this.hydrate(m.geometry,e.transform,e.hasZ,e.hasM),z=h({},m,{geometry:A});A.spatialReference=n.fromJSON(this.spatialReference);A=z}z=C.bidiText(this._evaluateLabelExpression(A,B,d));A=z[0];z=z[1];if(y.DEBUG_LABELS)var G="-"+t,A=A.substring(0,A.length-G.length)+G;if(A&&A.length){var G=B.labelClass.symbol,B=A,H=c;H.has(G)||H.set(G,new Set);for(var G=H.get(G),H=B.length,x=0;x<H;x++){var N=B.charCodeAt(x);G.add(N)}q.push({text:A,rtl:z,id:D})}}g.set(t,q)}return g};b.prototype._evaluateLabelExpression=
function(a,b,c){if(!b.labelClass.symbol||!m.evaluateWhere(b.labelClass.where,a.attributes)||!b.labelExpression.expression)return"";c=h({view:c},b.labelOptions);return m.buildLabelText(b.labelExpression.expression,a,this.fields,c)};f([c.property({readOnly:!0})],b.prototype,"supportsTileUpdates",null);f([c.property()],b.prototype,"configuration",void 0);f([c.property({dependsOn:["configuration"]})],b.prototype,"labelingInfo",null);f([c.property({dependsOn:["labelingInfo"]})],b.prototype,"labelClassInfos",
null);f([c.property({dependsOn:["service"]})],b.prototype,"hydrate",null);f([c.property({dependsOn:["configuration","service","fields","tileStore"]})],b.prototype,"factory",null);f([c.property({constructOnly:!0})],b.prototype,"queryInfo",null);f([c.property({dependsOn:["configuration"]})],b.prototype,"renderer",null);f([c.property({dependsOn:["configuration"]})],b.prototype,"rendererInfo",null);f([c.property({readOnly:!0})],b.prototype,"updating",null);f([c.property({dependsOn:["service"]})],b.prototype,
"fields",null);return b=f([c.subclass()],b)}(c.declared(E.default));a.default=d})},"esri/core/MapPool":function(){define(["require","exports","./ObjectPool"],function(d,a,l){d=function(){function a(a,b){void 0===a&&(a=50);void 0===b&&(b=50);this._pool=new l(Map,!1,function(a){return a.clear()},b,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return f.acquire()};a.release=function(a){return f.release(a)};return a}();
var f=new d(100);return d})},"esri/layers/support/LabelClass":function(){define("../../core/date ../../core/JSONSupport ../../core/lang ../../core/kebabDictionary dojo/number ./LabelExpressionInfo ./labelUtils ./types ../../support/arcadeUtils ../../arcade/Feature ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n){function m(a){a=(a=p.createSyntaxTree(a))&&a.body&&a.body[0]&&a.body[0].body&&a.body[0].body.body;if(!a||1!==a.length)return null;
a="ExpressionStatement"===a[0].type&&a[0].expression;if(!a||"MemberExpression"!==a.type)return null;var b=a.object;if(!b||"Identifier"!==b.type||"$feature"!==b.name)return null;a=a.property;if(!a)return null;switch(a.type){case "Literal":return a.value;case "Identifier":return a.name}return null}function q(a){return a?"service"===a.origin?!1:!a.layer||!g.isOfType(a.layer,"map-image"):!0}f=f({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",
esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",
esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",
esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});var y=new e,x=a.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{name:{type:String,value:null,json:{write:!0}},labelExpression:{type:String,value:null,json:{read:function(a,b,c,e){b=b.labelExpressionInfo;if(!b||!b.value&&!b.expression)return a},write:{allowNull:!0,writer:function(a,b,c,e){this.labelExpressionInfo&&q(e)&&(null!=this.labelExpressionInfo.value?
a=this._templateStringToSql(this.labelExpressionInfo.value):null!=this.labelExpressionInfo.expression&&(e=m(this.labelExpressionInfo.expression))&&(a="["+e+"]"));null!=a&&(b[c]=a)}}}},labelExpressionInfo:{value:null,type:k,json:{write:{overridePolicy:function(a,b,c){return q(c)?{allowNull:!0}:{enabled:!1}},writer:function(a,b,c,e){if(null==a&&null!=this.labelExpression&&q(e))a=new k({expression:this.getLabelExpressionArcade()});else if(!a)return;a=a.toJSON(e);a.expression&&(b[c]=a)}}}},labelPlacement:{type:f.apiValues,
value:null,json:{type:f.jsonValues,read:f.read,write:f.write}},maxScale:{type:Number,value:0,json:{write:function(a,b){if(a||this.minScale)b.maxScale=a}}},minScale:{type:Number,value:0,json:{write:function(a,b){if(a||this.maxScale)b.minScale=a}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],get:function(){var a=Object.create(null);this._collectRequiredFields(a);return Object.keys(a)}},symbol:{value:null,types:n.labelTypes,json:{origins:{"web-scene":{read:c.read,
write:{target:{symbol:{types:n.labelTypes3D}},writer:c.writeTarget}}},read:c.read,write:c.writeTarget}},useCodedValues:{type:Boolean,value:null,json:{write:!0}},where:{type:String,value:null,json:{write:!0}}},getLabelExpression:function(){var a={expression:"",type:"none"};this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type="conventional"):this.labelExpressionInfo.expression&&(a.expression=this.labelExpressionInfo.expression,a.type="arcade"):
null!=this.labelExpression&&(a.expression=this._sqlToTemplateString(this.labelExpression),a.type="conventional");return a},getLabelExpressionArcade:function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return b.convertTemplatedStringToArcade(a.expression);case "arcade":return a.expression}return null},getOptions:function(a){a={spatialReference:a};var b=this.labelExpressionInfo;if(b){var c=b.expression;c&&!b.value&&(a.hasArcadeExpression=!0,a.compiledArcadeFunc=
p.createFunction(c))}return a},getLabelExpressionSingleField:function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return(a=a.expression.match(t))&&a[1].trim()||null;case "arcade":return m(a.expression)}return null},clone:function(){return new x({labelExpression:this.labelExpression,labelExpressionInfo:l.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:this.symbol.clone(),
where:this.where,useCodedValues:this.useCodedValues})},_collectRequiredFields:function(a){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),a);this._collectWhereRequiredFields(this.where,a)},_sqlToTemplateString:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_templateStringToSql:function(a){return a.replace(/\{/g,"[").replace(/\}/g,"]")},_collectWhereRequiredFields:function(a,b){null!=a&&(a=a.split(" "),3===a.length&&(b[a[0]]=!0),7===a.length&&(b[a[0]]=!0,b[a[4]]=!0))},
_collectLabelExpressionRequiredFields:function(a,b){"arcade"===a.type?p.extractFieldNames(a.expression).forEach(function(a){b[a]=!0}):(a=a.expression.match(/{[^}]*}/g))&&a.forEach(function(a){b[a.slice(1,-1)]=!0})}});x.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;
var e=a.split(" ");if(3===e.length)return c(b[e[0]],e[1],e[2]);if(7===e.length){var d=c(b[e[0]],e[1],e[2]),g=e[3],f=c(b[e[4]],e[5],e[6]);switch(g){case "AND":return d&&f;case "OR":return d||f}}return!1}catch(A){console.log("Error.: can't parse \x3d "+a)}};x.buildLabelText=function(a,b,c,e){var d="";if(e&&e.hasArcadeExpression)e.compiledArcadeFunc&&(y.repurposeFromGraphicLikeObject(b.geometry,b.attributes,{fields:c}),a=p.executeFunction(e.compiledArcadeFunc,{vars:{$feature:y,$view:e.view},spatialReference:e.spatialReference}),
null!=a&&(d=a.toString()));else var g=b&&b.attributes||{},d=a.replace(/{[^}]*}/g,function(a){return x.formatField(a.slice(1,-1),a,g,c,e)});return d};x.formatField=function(a,b,c,e,g){var f=a.toLowerCase();for(a=0;a<e.length;a++)if(e[a].name.toLowerCase()===f){b=c[e[a].name];var k=e[a].domain;if(k&&"object"===typeof k){if("codedValue"==k.type)for(c=0;c<k.codedValues.length;c++)k.codedValues[c].code==b&&(b=k.codedValues[c].name);else"range"==k.type&&k.minValue<=b&&b<=k.maxValue&&(b=k.name);break}k=
e[a].type;"date"==k?(k=d.fromJSON(g&&g.dateFormat||"shortDate"),(k="DateFormat"+d.getFormat(k))&&(b=l.substitute({myKey:b},"{myKey:"+k+"}"))):("integer"==k||"small-integer"==k||"long"==k||"double"==k)&&g&&g.numberFormat&&g.numberFormat.digitSeparator&&g.numberFormat.places&&(b=h.format(b,{places:g.numberFormat.places}))}return null==b?"":b};var t=/^\s*\{([^}]+)\}\s*$/i;return x})},"esri/layers/support/LabelExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./labelUtils".split(" "),
function(d,a,l,f,h,k,b){return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.value=null;b.expression=null;return b}l(d,a);e=d;d.prototype.readExpression=function(a,e){return e.value?b.convertTemplatedStringToArcade(e.value):a};d.prototype.writeExpression=function(a,e,d){null!=this.value&&(a=b.convertTemplatedStringToArcade(this.value));e[d]=a};d.prototype.clone=function(){return new e({value:this.value,expression:this.expression})};var e;f([k.property({json:{read:!1,write:!1}})],
d.prototype,"value",void 0);f([k.property({type:String,json:{write:{allowNull:!0}}})],d.prototype,"expression",void 0);f([k.reader("expression",["expression","value"])],d.prototype,"readExpression",null);f([k.writer("expression")],d.prototype,"writeExpression",null);return d=e=f([k.subclass("esri.layers.support.LabelExpressionInfo")],d)}(k.declared(h))})},"esri/layers/support/labelUtils":function(){define(["require","exports","../../core/string"],function(d,a,l){Object.defineProperty(a,"__esModule",
{value:!0});var f=/__begin__/ig,h=/__end__/ig,k=/^__begin__/i,b=/__end__$/i;a.convertTemplatedStringToArcade=function(a){a?(a=l.replace(a,function(a,b){return'__begin__$feature["'+b+'"]__end__'}),a=k.test(a)?a.replace(k,""):'"'+a,a=b.test(a)?a.replace(b,""):a+'"',a=a.replace(f,'" + ').replace(h,' + "')):a='""';return a}})},"esri/core/string":function(){define(["require","exports","./object"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.replace=function(a,d,k){void 0===k&&(k=
/\{([^\}]+)\}/g);return a.replace(k,"object"===typeof d?function(a,g){return l.getDeepValue(g,d)}:d)}})},"esri/layers/support/types":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.isOfType=function(a,d){a=a.constructor._meta;if(!a||!a.bases)return!1;a=a.bases;var f=Array.isArray(d);return a.some(function(a){a=a.__accessorMetadata__;if(!a)return!1;a=a.properties;if(!a||!a.type||!a.type.value)return!1;a=a.type.value;return f?-1!==d.indexOf(a):
a===d})}})},"esri/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(d,a,l,f,h,k,b,g,p){function e(a,b,c){if(!a)return null;if(a&&(a.styleName||a.styleUrl)&&"uniqueValue"!==a.type)return c&&c.messages&&c.messages.push(new h("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+a.type+"'",
{definition:a,context:c})),null;b=a?n[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new h("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function c(a,b,c){return a?c&&"web-scene"===c.origin&&"heatmap"===a.type?(c.messages&&c.messages.push(new l("renderer:unsupported","Renderer of type '"+a.declaredClass+"' are not supported in scenes.",{renderer:a,context:c})),null):a.write(b,c):
null}Object.defineProperty(a,"__esModule",{value:!0});var n={simple:g,uniqueValue:p,classBreaks:k,heatmap:b};a.read=e;a.writeTarget=function(a,b,e,d){(a=c(a,{},d))&&f.setDeepValue(e,a,b)};a.write=c;a.fromJSON=function(a,b){return e(a,null,b)}})},"esri/renderers/ClassBreaksRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/kebabDictionary ../core/lang ../core/Logger ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./Renderer ./mixins/VisualVariablesRenderer ./support/ClassBreakInfo ./support/LegendOptions ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u){var z=p.getLogger("esri.renderers.ClassBreaksRenderer"),D=b({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),B=c.ensureType(q.ClassBreakInfo);return function(a){function b(b){b=a.call(this)||this;b.backgroundFillSymbol=null;b.classBreakInfos=null;b.defaultLabel=null;b.defaultSymbol=null;b.field=null;b.isMaxInclusive=!0;b.legendOptions=null;b.normalizationField=null;b.normalizationTotal=null;b.type=
"class-breaks";b.valueExpression=null;b.valueExpressionTitle=null;b._set("classBreakInfos",[]);return b}l(b,a);d=b;b.prototype.readClassBreakInfos=function(a,b,c){if(Array.isArray(a)){var e=b.minValue;return a.map(function(a){var b=new q.ClassBreakInfo;b.read(a,c);null==b.minValue&&(b.minValue=e);null==b.maxValue&&(b.maxValue=b.minValue);e=b.maxValue;return b})}};b.prototype.writeClassBreakInfos=function(a,b,c,e){a=a.map(function(a){return a.write({},e)});this._areClassBreaksConsecutive()&&a.forEach(function(a){return delete a.classMinValue});
b[c]=a};Object.defineProperty(b.prototype,"compiledFunc",{get:function(){return x.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});b.prototype.readDefaultSymbol=function(a,b,c){return t.read(a,b,c)};b.prototype.writeDefaultSymbolWebScene=function(a,b,c,e){t.writeTarget(a,b,c,e)};b.prototype.writeDefaultSymbol=function(a,b,c,e){t.writeTarget(a,b,c,e)};b.prototype.castField=function(a){return null==a?a:"function"===typeof a?(z.error(".field: field must be a string value"),null):
c.ensureString(a)};Object.defineProperty(b.prototype,"minValue",{get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"normalizationType",{get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total"||null,b&&c&&z.warn("warning: both normalizationField and normalizationTotal are set!");
else if("field"===a||"percent-of-total"===a)a=null;return a},set:function(a){this._set("normalizationType",a)},enumerable:!0,configurable:!0});b.prototype.addClassBreakInfo=function(a,b,c){var e=null,e="number"===typeof a?new q.ClassBreakInfo({minValue:a,maxValue:b,symbol:c}):B(g.clone(a));this.classBreakInfos.push(e);1===this.classBreakInfos.length&&this.notifyChange("minValue")};b.prototype.removeClassBreakInfo=function(a,b){for(var c=this.classBreakInfos.length,e=0;e<c;e++){var d=[this.classBreakInfos[e].minValue,
this.classBreakInfos[e].maxValue];if(d[0]===a&&d[1]===b){this.classBreakInfos.splice(e,1);break}}};b.prototype.getBreakIndex=function(a,b){var c=this.field,e=a.attributes,d=this.isMaxInclusive,g=null;if(this.valueExpression)g=x.executeFunction(this.compiledFunc,x.createExecContext(a,x.getViewInfo(b)));else if(g=parseFloat(e[c]),a=this.normalizationType)if(b=this.normalizationTotal,e=parseFloat(e[this.normalizationField]),"log"===a)g=Math.log(g)*Math.LOG10E;else if("percent-of-total"===a&&!isNaN(b))g=
g/b*100;else if("field"===a&&!isNaN(e)){if(isNaN(g)||isNaN(e))return-1;g/=e}if(null!=g&&"number"===typeof g&&!isNaN(g))for(e=0;e<this.classBreakInfos.length;e++)if(a=[this.classBreakInfos[e].minValue,this.classBreakInfos[e].maxValue],a[0]<=g&&(d?g<=a[1]:g<a[1]))return e;return-1};b.prototype.getClassBreakInfo=function(a,b){a=this.getBreakIndex(a,b);return-1!==a?this.classBreakInfos[a]:null};b.prototype.getSymbol=function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol};
b.prototype.getSymbols=function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a};b.prototype.clone=function(){return new d({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:g.clone(this.classBreakInfos),
isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:g.clone(this.visualVariables),legendOptions:g.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};b.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&"string"===typeof b&&(a[b]=!0)});this.valueExpression&&
x.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})};b.prototype._areClassBreaksConsecutive=function(){for(var a=this.classBreakInfos,b=a.length,c=1;c<b;c++)if(a[c-1].maxValue!==a[c].minValue)return!1;return!0};var d;f([e.property({types:{base:k.BaseSymbol,key:"type",typeMap:{"simple-fill":u.rendererTypes.typeMap["simple-fill"],"picture-fill":u.rendererTypes.typeMap["picture-fill"],"polygon-3d":u.rendererTypes.typeMap["polygon-3d"]}},json:{origins:{"web-scene":{read:t.read,write:{target:{backgroundFillSymbol:{type:k.PolygonSymbol3D}},
writer:t.writeTarget}}},read:t.read,write:t.writeTarget}})],b.prototype,"backgroundFillSymbol",void 0);f([e.property({type:[q.ClassBreakInfo]})],b.prototype,"classBreakInfos",void 0);f([e.reader("classBreakInfos")],b.prototype,"readClassBreakInfos",null);f([e.writer("classBreakInfos")],b.prototype,"writeClassBreakInfos",null);f([e.property({dependsOn:["valueExpression"]})],b.prototype,"compiledFunc",null);f([e.property({type:String,json:{write:!0}})],b.prototype,"defaultLabel",void 0);f([e.property({types:u.rendererTypes})],
b.prototype,"defaultSymbol",void 0);f([e.reader("defaultSymbol")],b.prototype,"readDefaultSymbol",null);f([e.writer("web-scene","defaultSymbol",{defaultSymbol:{types:u.rendererTypes3D}})],b.prototype,"writeDefaultSymbolWebScene",null);f([e.writer("defaultSymbol")],b.prototype,"writeDefaultSymbol",null);f([e.property({type:String,json:{write:!0}})],b.prototype,"field",void 0);f([e.cast("field")],b.prototype,"castField",null);f([e.property({type:Boolean})],b.prototype,"isMaxInclusive",void 0);f([e.property({type:y.default,
json:{write:!0}})],b.prototype,"legendOptions",void 0);f([e.property({type:Number,readOnly:!0,value:null,dependsOn:["classBreakInfos"],json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],b.prototype,"minValue",null);f([e.property({type:String,json:{write:!0}})],b.prototype,"normalizationField",void 0);f([e.property({type:Number,cast:function(a){return c.ensureNumber(a)},json:{write:!0}})],b.prototype,
"normalizationTotal",void 0);f([e.property({type:D.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],json:{type:D.jsonValues,read:D.read,write:D.write}})],b.prototype,"normalizationType",null);f([e.property({dependsOn:["field","normalizationField","valueExpression"],readOnly:!0})],b.prototype,"requiredFields",void 0);f([e.enumeration.serializable()({classBreaks:"class-breaks"})],b.prototype,"type",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"valueExpression",
void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"valueExpressionTitle",void 0);f([h(2,e.cast(u.ensureType))],b.prototype,"addClassBreakInfo",null);return b=d=f([e.subclass("esri.renderers.ClassBreaksRenderer")],b)}(e.declared(n,m))})},"esri/renderers/Renderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/AuthoringInfo".split(" "),
function(d,a,l,f,h,k,b,g){var p=k({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap"},{ignoreUnknown:!0});return function(a){function c(b){b=a.call(this,b)||this;b.authoringInfo=null;b.type=null;return b}l(c,a);c.prototype.getSymbol=function(a,b){};c.prototype.getSymbols=function(){return[]};f([b.property({type:g,json:{write:!0}})],c.prototype,"authoringInfo",void 0);f([b.property({type:p.apiValues,readOnly:!0,json:{type:p.jsonValues,read:!1,write:{writer:p.write,
ignoreOrigin:!0}}})],c.prototype,"type",void 0);return c=f([b.subclass("esri.renderers.Renderer")],c)}(b.declared(h))})},"esri/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./AuthoringInfoVisualVariable".split(" "),function(d,a,l,f,h,k,b,g,p,e){var c=k({esriClassifyDefinedInterval:"defined-interval",
esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),n=k({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance"}),m="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");return function(a){function d(b){b=
a.call(this)||this;b.lengthUnit=null;b.visualVariables=null;return b}l(d,a);h=d;Object.defineProperty(d.prototype,"classificationMethod",{get:function(){var a=this._get("classificationMethod"),b=this.type;return b&&"relationship"!==b?"class-breaks-size"===b||"class-breaks-color"===b?a||"manual":null:a},set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fields",{get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},
set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"field1",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(a){this._set("field1",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"field2",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(a){this._set("field2",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"focus",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(a){this._set("focus",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"numClasses",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(a){this._set("numClasses",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"standardDeviationInterval",{get:function(){var a=this.type;return a&&"relationship"!==a&&
"class-breaks-size"!==a&&"class-breaks-color"!==a?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(a){this._set("standardDeviationInterval",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",b)},enumerable:!0,configurable:!0});
d.prototype.clone=function(){return new h({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:b.clone(this.field1),field2:b.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(a){return a.clone()})})};var h;f([g.property({type:c.apiValues,value:null,dependsOn:["type"],json:{type:c.jsonValues,
read:c.read,write:c.write,origins:{"web-document":{default:"manual",type:c.jsonValues,read:c.read,write:c.write}}}})],d.prototype,"classificationMethod",null);f([g.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],d.prototype,"fields",null);f([g.property({value:null,dependsOn:["type"],json:{write:!0}})],d.prototype,"field1",null);f([g.property({value:null,dependsOn:["type"],json:{write:!0}})],d.prototype,"field2",null);f([g.property({type:["HH","HL","LH","LL"],value:null,dependsOn:["type"],
json:{write:!0}})],d.prototype,"focus",null);f([g.property({type:Number,value:null,dependsOn:["type"],json:{type:p.Integer,write:!0}})],d.prototype,"numClasses",null);f([g.property({type:m,json:{type:m,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],d.prototype,"lengthUnit",void 0);f([g.property({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],d.prototype,"standardDeviationInterval",null);f([g.property({type:String,value:null,
json:{type:n.jsonValues,read:n.read,write:n.write}})],d.prototype,"type",null);f([g.property({type:[e],json:{write:!0}})],d.prototype,"visualVariables",void 0);return d=h=f([g.subclass("esri.renderers.support.AuthoringInfo")],d)}(g.declared(h))})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),
function(d,a,l,f,h,k,b,g){var p=k({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),e=k({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),c={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null},n=["high-to-low","above-and-below","centered-on","extremes"],m="seconds minutes hours days months years".split(" ");return function(a){function d(b){b=a.call(this)||this;b.endTime=null;b.field=null;
b.maxSliderValue=null;b.minSliderValue=null;b.startTime=null;b.type=null;b.units=null;return b}l(d,a);h=d;d.prototype.castEndTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};d.prototype.castStartTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};Object.defineProperty(d.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new h({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};var h;f([b.property({types:c,json:{write:!0}})],d.prototype,"endTime",void 0);f([g.cast("endTime")],
d.prototype,"castEndTime",null);f([b.property({type:String,json:{write:!0}})],d.prototype,"field",void 0);f([b.property({type:Number,json:{write:!0}})],d.prototype,"maxSliderValue",void 0);f([b.property({type:Number,json:{write:!0}})],d.prototype,"minSliderValue",void 0);f([b.property({types:c,json:{write:!0}})],d.prototype,"startTime",void 0);f([g.cast("startTime")],d.prototype,"castStartTime",null);f([b.property({type:p.apiValues,value:null,dependsOn:["type"],json:{type:p.jsonValues,read:p.read,
write:p.write}})],d.prototype,"style",null);f([b.property({type:n,value:null,dependsOn:["type"],json:{type:n,write:!0}})],d.prototype,"theme",null);f([b.property({type:e.apiValues,json:{type:e.jsonValues,read:e.read,write:e.write}})],d.prototype,"type",void 0);f([b.property({type:m,json:{type:m,write:!0}})],d.prototype,"units",void 0);return d=h=f([b.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],d)}(b.declared(h))})},"esri/renderers/mixins/VisualVariablesRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory ../../support/arcadeUtils ../../symbols/support/utils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q){function y(a){return a&&"opacity"in a?a.opacity*y(a.parent):1}var x={base:c,key:"type",typeMap:{opacity:g,color:b,rotation:p,size:e}};return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._vvFactory=new n;return b}l(b,a);Object.defineProperty(b.prototype,"requiredFields",{get:function(){var a=Object.create(null);this.collectRequiredFields(a);return Object.keys(a).sort()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"visualVariables",{set:function(a){this._vvFactory.visualVariables=a;this._set("visualVariables",this._vvFactory.visualVariables)},enumerable:!0,configurable:!0});b.prototype.readVisualVariables=function(a,b,c){return this._vvFactory.readVariables(a,b,c)};b.prototype.writeVisualVariables=function(a,b,c,e){b[c]=this._vvFactory.writeVariables(a,e)};b.prototype.getDisplayedSymbol=function(a,b){if(a){var c=y(a.layer||a.sourceLayer),e=this.getSymbol(a);if(e){e=e.clone();if(!this.visualVariables)return e;
var d=this._vvFactory,g=d.colorVariables,f=d.opacityVariables,h=d.sizeVariables,d=d.rotationVariables,g=!!g.length&&g[g.length-1].getColor(a,b),f=f.length?f[f.length-1].getOpacity(a,b):null;null!=c&&(f=null!=f?f*c:c);q.applyColorToSymbol(e,g,f);h.forEach(function(c){return q.applySizeToSymbol(e,c.getSize(a,b),c.axis)});d.forEach(function(c){return q.applyRotationToSymbol(e,c.getRotationAngle(a,b),c.axis)});return e}}};b.prototype.getVisualVariableValues=function(a,b){return this._vvFactory.getVisualVariableValues(a,
b)};b.prototype.hasVisualVariables=function(a,b){return a?!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))};b.prototype.getVisualVariablesForType=function(a,b){var c=this.visualVariables;if(c&&(c=c.filter(function(c){return c.type===a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}),!c||0!==c.length))return c};b.prototype.getSize=
function(a,b){return this._vvFactory.getSize(a,b)};b.prototype.getSizeRangeAtScale=function(a,b,c){return a?a.getSizeRangeAtScale(b,c):this._vvFactory.getSizeRangeAtScale(b,c)};b.prototype.getColor=function(a,b){return this._vvFactory.getColor(a,b)};b.prototype.getOpacity=function(a,b){return this._vvFactory.getOpacity(a,b)};b.prototype.getRotationAngle=function(a,b){return this._vvFactory.getRotationAngle(a,b)};b.prototype.collectRequiredFields=function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));
b.forEach(function(b){b&&(b.field&&(a[b.field]=!0),b.normalizationField&&(a[b.normalizationField]=!0),b.valueExpression&&m.extractFieldNames(b.valueExpression).forEach(function(b){a[b]=!0}))})};f([k.property({type:[String],dependsOn:["visualVariables"]})],b.prototype,"requiredFields",null);f([k.property({types:[x],value:null,json:{write:!0}})],b.prototype,"visualVariables",null);f([k.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],b.prototype,"readVisualVariables",
null);f([k.writer("visualVariables")],b.prototype,"writeVisualVariables",null);return b=f([k.subclass("esri.renderers.mixins.VisualVariablesRenderer")],b)}(k.declared(h))})},"esri/renderers/visualVariables/ColorVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/accessorSupport/decorators ./VisualVariable ./support/ColorStop ./support/utils ../../support/arcadeUtils".split(" "),function(d,a,l,f,h,k,b,g,p,
e){return function(a){function b(b){b=a.call(this,b)||this;b.type="color";b.normalizationField=null;return b}l(b,a);c=b;Object.defineProperty(b.prototype,"_cache",{get:function(){var a=e.createSyntaxTree(this.valueExpression);return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:e.createFunction(a)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stops",{set:function(a){a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,
b){return a.value-b.value}));this._set("stops",a)},enumerable:!0,configurable:!0});b.prototype.getColor=function(a,b){var c="number"===typeof a,d=c?null:a,g=d&&d.attributes,f=c?a:null,k=this._cache;a=k.ipData;var l=k.hasExpression,k=k.compiledFunc,m=this.field;if(!m&&!l)return(b=this.stops)&&b[0]&&b[0].color;"number"!==typeof f&&(l?(f=e.getViewInfo(b),d=e.createExecContext(d,f),f=e.executeFunction(k,d)):g&&(f=g[m]));d=this.normalizationField;g=g?parseFloat(g[d]):void 0;if(null!=f&&(!d||c||!isNaN(g)&&
0!==g)&&(isNaN(g)||c||(f/=g),c=p.lookupData(f,a)))return g=c[0],a=c[1],b=g===a?this.stops[g].color:h.blendColors(this.stops[g].color,this.stops[a].color,c[2],b&&b.color),new h(b)};b.prototype.clone=function(){return new c({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(a){return a.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})};b.prototype._interpolateData=
function(){return this.stops&&this.stops.map(function(a){return a.value||0})};var c;f([k.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],b.prototype,"_cache",null);f([k.property({type:["color"],json:{type:["colorInfo"]}})],b.prototype,"type",void 0);f([k.property({type:String,json:{write:!0}})],b.prototype,"normalizationField",void 0);f([k.property({type:[g],json:{write:!0}})],b.prototype,"stops",null);return b=c=f([k.subclass("esri.renderers.visualVariables.ColorVariable")],b)}(k.declared(b))})},
"esri/renderers/visualVariables/VisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./support/VisualVariableLegendOptions".split(" "),function(d,a,l,f,h,k,b,g,p,e){var c=b.getLogger("esri.renderers.visualVariables.VisualVariable"),n=k({colorInfo:"color",transparencyInfo:"opacity",
rotationInfo:"rotation",sizeInfo:"size"});return function(a){function b(b){b=a.call(this,b)||this;b.index=null;b.type=null;b.field=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;return b}l(b,a);b.prototype.castField=function(a){return null==a?a:"function"===typeof a?(c.error(".field: field must be a string value"),null):p.ensureString(a)};b.prototype.clone=function(){};f([g.property()],b.prototype,"index",void 0);f([g.property({type:n.apiValues,readOnly:!0,json:{read:n.read,
write:n.write}})],b.prototype,"type",void 0);f([g.property({type:String,json:{write:!0}})],b.prototype,"field",void 0);f([g.cast("field")],b.prototype,"castField",null);f([g.property({type:String,json:{write:!0}})],b.prototype,"valueExpression",void 0);f([g.property({type:String,json:{write:!0}})],b.prototype,"valueExpressionTitle",void 0);f([g.property({type:e,json:{write:!0}})],b.prototype,"legendOptions",void 0);return b=f([g.subclass("esri.renderers.visualVariables.VisualVariable")],b)}(g.declared(h))})},
"esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../support/LegendOptions".split(" "),function(d,a,l,f,h,k){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.showLegend=null;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({title:this.title,showLegend:this.showLegend})};var d;
f([h.property({type:Boolean,json:{write:!0}})],b.prototype,"showLegend",void 0);return b=d=f([h.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],b)}(h.declared(k.default))})},"esri/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k){Object.defineProperty(a,"__esModule",{value:!0});
d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.title=null;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({title:this.title})};var d;f([k.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);return b=d=f([k.subclass("esri.renderers.support.LegendOptions")],b)}(k.declared(h));a.LegendOptions=d;a.default=d})},"esri/renderers/visualVariables/support/ColorStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this,b)||this;b.color=null;b.label=null;b.value=null;return b}l(d,a);e=d;d.prototype.writeValue=function(a,b,e){b[e]=null==a?0:a};d.prototype.clone=function(){return new e({color:this.color&&this.color.clone(),label:this.label,value:this.value})};var e;f([b.property({type:h,json:{type:[Number],write:!0}})],d.prototype,"color",void 0);f([b.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);f([b.property({type:Number,
json:{write:{allowNull:!0}}})],d.prototype,"value",void 0);f([b.writer("value")],d.prototype,"writeValue",null);return d=e=f([b.subclass("esri.renderers.visualVariables.support.ColorStop")],d)}(b.declared(k))})},"esri/renderers/visualVariables/OpacityVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./VisualVariable ./support/OpacityStop ./support/utils ../../support/arcadeUtils".split(" "),
function(d,a,l,f,h,k,b,g,p){return function(a){function c(b){b=a.call(this,b)||this;b.type="opacity";b.normalizationField=null;return b}l(c,a);e=c;Object.defineProperty(c.prototype,"_cache",{get:function(){var a=p.createSyntaxTree(this.valueExpression);return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:p.createFunction(a)}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"stops",{set:function(a){a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),
a.sort(function(a,b){return a.value-b.value}));this._set("stops",a)},enumerable:!0,configurable:!0});c.prototype.getOpacity=function(a,b){var c="number"===typeof a,e=c?null:a,d=e&&e.attributes,f=c?a:null,h=this._cache;a=h.ipData;var k=h.hasExpression,h=h.compiledFunc,l=this.field;if(!l&&!k)return(c=this.stops)&&c[0]&&c[0].opacity;"number"!==typeof f&&(k?(f=p.getViewInfo(b),e=p.createExecContext(e,f),f=p.executeFunction(h,e)):d&&(f=d[l]));e=this.normalizationField;d=d?parseFloat(d[e]):void 0;if(null!=
f&&(!e||c||!isNaN(d)&&0!==d)&&(isNaN(d)||c||(f/=d),c=g.lookupData(f,a))){a=c[0];d=c[1];if(a===d)return this.stops[a].opacity;a=this.stops[a].opacity;return a+(this.stops[d].opacity-a)*c[2]}};c.prototype.clone=function(){return new e({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(a){return a.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})};
c.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(a){return a.value||0})};var e;f([h.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],c.prototype,"_cache",null);f([h.property({type:["opacity"],json:{type:["transparencyInfo"]}})],c.prototype,"type",void 0);f([h.property({type:String,json:{write:!0}})],c.prototype,"normalizationField",void 0);f([h.property({type:[b],json:{write:!0}})],c.prototype,"stops",null);return c=e=f([h.subclass("esri.renderers.visualVariables.OpacityVariable")],
c)}(h.declared(k))})},"esri/renderers/visualVariables/support/OpacityStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ../../../webdoc/support/opacityUtils".split(" "),function(d,a,l,f,h,k,b,g){return function(a){function e(b){b=a.call(this,b)||this;b.label=null;b.opacity=null;b.value=null;return b}l(e,a);c=e;e.prototype.readOpacity=
function(a,b){return g.transparencyToOpacity(b.transparency)};e.prototype.writeOpacity=function(a,b,c){b[c]=g.opacityToTransparency(a)};e.prototype.clone=function(){return new c({label:this.label,opacity:this.opacity,value:this.value})};var c;f([k.property({type:String,json:{write:!0}})],e.prototype,"label",void 0);f([k.property({type:Number,json:{type:b.Integer,write:{target:"transparency"}}})],e.prototype,"opacity",void 0);f([k.reader("opacity",["transparency"])],e.prototype,"readOpacity",null);
f([k.writer("opacity")],e.prototype,"writeOpacity",null);f([k.property({type:Number,json:{write:!0}})],e.prototype,"value",void 0);return e=c=f([k.subclass("esri.renderers.visualVariables.support.OpacityStop")],e)}(k.declared(h))})},"esri/renderers/visualVariables/RotationVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Error ../../core/accessorSupport/decorators ./VisualVariable ../../support/arcadeUtils".split(" "),
function(d,a,l,f,h,k,b,g){return function(a){function b(b){b=a.call(this,b)||this;b.axis=null;b.type="rotation";b.rotationType="geographic";b.valueExpressionTitle=null;return b}l(b,a);c=b;Object.defineProperty(b.prototype,"_cache",{get:function(){var a=g.createSyntaxTree(this.valueExpression);return{hasExpression:!!this.valueExpression,compiledFunc:g.createFunction(a)}},enumerable:!0,configurable:!0});b.prototype.writeValueExpressionTitleWebScene=function(a,b,c,e){e&&e.messages&&e.messages.push(new h("property:unsupported",
this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"visualVariables["+this.index+"].valueExpressionTitle",context:e}))};b.prototype.getRotationAngle=function(a,b){var c=this.axis||"heading",e="heading"===c&&"arithmetic"===this.rotationType?90:0,c="heading"===c&&"arithmetic"===this.rotationType?-1:1,d=(a="number"===typeof a?null:a)&&a.attributes,f=this.field,h=this._cache,k=h.hasExpression,h=
h.compiledFunc,l=0;if(!f&&!k)return l;k?(b=g.getViewInfo(b),b=g.createExecContext(a,b),l=g.executeFunction(h,b)):d&&(l=d[f]||0);return l="number"!==typeof l||isNaN(l)?null:e+c*l};b.prototype.clone=function(){return new c({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})};var c;f([k.property({readOnly:!0,dependsOn:["valueExpression"]})],b.prototype,
"_cache",null);f([k.property({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],b.prototype,"axis",void 0);f([k.property({type:["rotation"],json:{type:["rotationInfo"]}})],b.prototype,"type",void 0);f([k.property({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],b.prototype,"rotationType",void 0);f([k.property({type:String,json:{write:!0}})],b.prototype,"valueExpressionTitle",void 0);f([k.writer("web-scene",
"valueExpressionTitle")],b.prototype,"writeValueExpressionTitleWebScene",null);return b=c=f([k.subclass("esri.renderers.visualVariables.RotationVariable")],b)}(k.declared(b))})},"esri/renderers/visualVariables/SizeVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Graphic ../../core/Error ../../core/kebabDictionary ../../core/Logger ../../core/screenUtils ../../core/accessorSupport/decorators ./VisualVariable ./support/SizeStop ./support/SizeVariableLegendOptions ./support/sizeVariableUtils ../../support/arcadeUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x){function t(a){if(null!=a){if("string"===typeof a||"number"===typeof a)return e.toPt(a);if("size"===a.type){if(y.isSizeVariable(a))return a;a=h({},a);delete a.type;return new E(a)}}}function u(a,b,c){if("object"!==typeof a)return a;b=new E;b.read(a,c);return b}var z=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,D=new k,B=p.getLogger("esri.renderers.visualVariables.SizeVariable"),w=g({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",
all:"all"}),C=g({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"}),E=function(a){function e(b){b=a.call(this,b)||this;b.axis=null;b.legendOptions=null;b.normalizationField=null;b.scaleBy=null;b.target=null;b.type="size";b.useSymbolValue=null;b.valueExpression=null;b.valueRepresentation=null;b.valueUnit=
null;return b}l(e,a);d=e;Object.defineProperty(e.prototype,"_cache",{get:function(){var a=x.createSyntaxTree(this.valueExpression);return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:x.createFunction(a),isScaleDriven:z.test(this.valueExpression)}},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"expression",{set:function(a){B.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'.");
"view.scale"===a?(this.valueExpression="$view.scale",this._set("expression",a)):this._set("expression",null)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"index",{set:function(a){y.isSizeVariable(this.maxSize)&&(this.maxSize.index="visualVariables["+a+"].maxSize");y.isSizeVariable(this.minSize)&&(this.minSize.index="visualVariables["+a+"].minSize");this._set("index",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"inputValueType",{get:function(){return y.getInputValueType(this)},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"maxDataValue",{set:function(a){a&&this.stops&&(B.warn("cannot set maxDataValue when stops is not null."),a=null);this._set("maxDataValue",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"maxSize",{set:function(a){a&&this.stops&&(B.warn("cannot set maxSize when stops is not null."),a=null);this._set("maxSize",a)},enumerable:!0,configurable:!0});e.prototype.castMaxSize=function(a){return t(a)};e.prototype.readMaxSize=
function(a,b,c){return u(a,b,c)};Object.defineProperty(e.prototype,"minDataValue",{set:function(a){a&&this.stops&&(B.warn("cannot set minDataValue when stops is not null."),a=null);this._set("minDataValue",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"minSize",{set:function(a){a&&this.stops&&(B.warn("cannot set minSize when stops is not null."),a=null);this._set("minSize",a)},enumerable:!0,configurable:!0});e.prototype.castMinSize=function(a){return t(a)};e.prototype.readMinSize=
function(a,b,c){return u(a,b,c)};Object.defineProperty(e.prototype,"stops",{set:function(a){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,b){return a.value-b.value})):a&&(B.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),a=null);this._set("stops",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"transformationType",
{get:function(){return y.getTransformationType(this,this.inputValueType)},enumerable:!0,configurable:!0});e.prototype.readValueExpression=function(a,b){return a||b.expression&&"$view.scale"};e.prototype.writeValueExpressionWebScene=function(a,c,e,d){"$view.scale"===a?d&&d.messages&&(a=this.index,d.messages.push(new b("property:unsupported",this.type+"VisualVariable.valueExpression \x3d '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,
propertyName:("string"===typeof a?a:"visualVariables["+a+"]")+".valueExpression",context:d}))):c[e]=a};e.prototype.readValueUnit=function(a,b,c){return a?C.read(a):null};e.prototype.getSize=function(a,b){var c=this._getInputValue(a,b);a=y.getSizeForValue(c,this,a,b,this._cache.ipData);return null===a||void 0===a||isNaN(a)?0:a};e.prototype.getSizeRangeAtScale=function(a,b){var c=b&&"3d"===b.type;if(!(this._cache.isScaleDriven&&c||a))return null;b={scale:a,view:b};a=y.getSizeFromNumberOrVariable(this.minSize,
D,b);b=y.getSizeFromNumberOrVariable(this.maxSize,D,b);if(null!=a||null!=b)return a>b&&(c=b,b=a,a=c),{minSize:a,maxSize:b}};e.prototype.clone=function(){return new d({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:y.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:y.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,
stops:this.stops&&this.stops.map(function(a){return a.clone()}),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})};e.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(a){return a.value||0})};e.prototype._getInputValue=function(a,b){var c="number"===typeof a,e=c?null:a,d=e&&e.attributes,g=c?a:null,f=this._cache;a=f.compiledFunc;if(f.isScaleDriven)e=
b&&b.scale,b=b&&b.view,g=null==e||b&&"3d"===b.type?this._getAverageSizeValue():e;else if(!c)switch(this.inputValueType){case "expression":b=x.getViewInfo(b);b=x.createExecContext(e,b);g=x.executeFunction(a,b);break;case "field":d&&(g=d[this.field]);break;case "unknown":g=null}if(!y.isValidNumber(g))return null;if(c||!this.normalizationField)return g;c=d?parseFloat(d[this.normalizationField]):null;return y.isValidNumber(c)&&0!==c?g/c:null};e.prototype._getAverageSizeValue=function(){var a=null,b=null;
(b=this.stops)?(a=b[0].value,b=b[b.length-1].value):(a=this.minDataValue||0,b=this.maxDataValue||0);return(a+b)/2};var d;f([c.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],e.prototype,"_cache",null);f([c.property({type:w.apiValues,json:{type:w.jsonValues,origins:{"web-map":{read:!1}},read:w.read,write:w.write}})],e.prototype,"axis",void 0);f([c.property({type:String,value:null,json:{read:!1}})],e.prototype,"expression",null);f([c.property()],e.prototype,"index",null);f([c.property({type:String,
readOnly:!0,dependsOn:["field","valueExpression"]})],e.prototype,"inputValueType",null);f([c.property({type:q,json:{write:!0}})],e.prototype,"legendOptions",void 0);f([c.property({type:Number,value:null,json:{write:!0}})],e.prototype,"maxDataValue",null);f([c.property({type:Number,value:null,json:{write:!0}})],e.prototype,"maxSize",null);f([c.cast("maxSize")],e.prototype,"castMaxSize",null);f([c.reader("maxSize")],e.prototype,"readMaxSize",null);f([c.property({type:Number,value:null,json:{write:!0}})],
e.prototype,"minDataValue",null);f([c.property({type:Number,value:null,json:{write:!0}})],e.prototype,"minSize",null);f([c.cast("minSize")],e.prototype,"castMinSize",null);f([c.reader("minSize")],e.prototype,"readMinSize",null);f([c.property({type:String,json:{write:!0}})],e.prototype,"normalizationField",void 0);f([c.property({type:String})],e.prototype,"scaleBy",void 0);f([c.property({type:[m],value:null,json:{write:!0}})],e.prototype,"stops",null);f([c.property({type:["outline"],json:{write:!0}})],
e.prototype,"target",void 0);f([c.property({type:String,readOnly:!0,dependsOn:"minDataValue maxDataValue minSize maxSize valueUnit inputValueType stops".split(" ")})],e.prototype,"transformationType",null);f([c.property({type:["size"],json:{type:["sizeInfo"]}})],e.prototype,"type",void 0);f([c.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],e.prototype,"useSymbolValue",void 0);f([c.property({type:String,json:{write:!0}})],e.prototype,"valueExpression",void 0);f([c.reader("valueExpression",
["valueExpression","expression"])],e.prototype,"readValueExpression",null);f([c.writer("web-scene","valueExpression")],e.prototype,"writeValueExpressionWebScene",null);f([c.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],e.prototype,"valueRepresentation",void 0);f([c.property({type:C.apiValues,json:{write:C.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],e.prototype,"valueUnit",void 0);f([c.reader("valueUnit")],e.prototype,"readValueUnit",null);return e=
d=f([c.subclass("esri.renderers.visualVariables.SizeVariable")],e)}(c.declared(n));return E})},"esri/renderers/visualVariables/support/SizeStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/screenUtils ../../../core/accessorSupport/decorators".split(" "),function(d,a,l,f,h,k,b){return function(a){function d(b){b=a.call(this,b)||this;b.label=null;b.size=null;b.value=null;return b}l(d,a);
e=d;d.prototype.clone=function(){return new e({label:this.label,size:this.size,value:this.value})};var e;f([b.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);f([b.property({type:Number,cast:k.toPt,json:{write:!0}})],d.prototype,"size",void 0);f([b.property({type:Number,json:{write:!0}})],d.prototype,"value",void 0);return d=e=f([b.subclass("esri.renderers.visualVariables.support.SizeStop")],d)}(b.declared(h))})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./VisualVariableLegendOptions".split(" "),
function(d,a,l,f,h,k){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.customValues=null;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})};var d;f([h.property({type:[Number],json:{write:!0}})],b.prototype,"customValues",void 0);return b=d=f([h.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],b)}(h.declared(k))})},"esri/renderers/visualVariables/VisualVariableFactory":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/kebabDictionary ../../core/Logger ../../core/Warning ../../core/accessorSupport/decorators ./ColorVariable ./OpacityVariable ./RotationVariable ./SizeVariable".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m){var q=b.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),y={color:e,size:m,opacity:c,rotation:n},x=k({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),t=/^\[([^\]]+)\]$/i;return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.colorVariables=null;b.opacityVariables=null;b.rotationVariables=null;b.sizeVariables=null;return b}l(b,a);Object.defineProperty(b.prototype,"visualVariables",{set:function(a){this._resetVariables();
if((a=a&&a.filter(function(a){return!!a}))&&a.length){for(var b=0,c=a;b<c.length;b++){var e=c[b];switch(e.type){case "color":this.colorVariables.push(e);break;case "opacity":this.opacityVariables.push(e);break;case "rotation":this.rotationVariables.push(e);break;case "size":this.sizeVariables.push(e)}}this.sizeVariables.length&&this.sizeVariables.some(function(a){return!!a.target})&&a.sort(function(a,b){var c=null;return c=a.target===b.target?0:a.target?1:-1});for(b=0;b<a.length;b++)e=a[b],e.index=
b}this._set("visualVariables",a)},enumerable:!0,configurable:!0});b.prototype.readVariables=function(a,b,c){var e=b.rotationExpression;b=b.rotationType;if(e=(e=e&&e.match(t))&&e[1])a||(a=[]),a.push({type:"rotationInfo",rotationType:b,field:e});if(a)return a.map(function(a){var b=x.read(a.type),e=y[b];e||(q.warn("Unknown variable type: "+b),c&&c.messages&&c.messages.push(new g("visual-variable:unsupported","visualVariable of type '"+b+"' is not supported",{definition:a,context:c})));b=new e;b.read(a,
c);return b})};b.prototype.writeVariables=function(a,b){for(var c=[],e=0;e<a.length;e++){var d=a[e].toJSON(b);d&&c.push(d)}return c};b.prototype.getVisualVariableValues=function(a,b){var c=[];this.colorVariables.forEach(function(e){var d=e.getColor(a,b);c.push({variable:e,value:d})});this.opacityVariables.forEach(function(e){var d=e.getOpacity(a,b);c.push({variable:e,value:d})});this.rotationVariables.forEach(function(e){var d=e.getRotationAngle(a,b);c.push({variable:e,value:d})});this.sizeVariables.forEach(function(e){var d=
e.getSize(a,b);c.push({variable:e,value:d})});return c.filter(function(a){return null!=a.value})};b.prototype.getColor=function(a,b){if(this.colorVariables.length)return this.colorVariables[0].getColor(a,b)};b.prototype.getOpacity=function(a,b){if(this.opacityVariables.length)return this.opacityVariables[0].getOpacity(a,b)};b.prototype.getRotationAngle=function(a,b){if(this.rotationVariables.length)return this.rotationVariables[0].getRotationAngle(a,b)};b.prototype.getSize=function(a,b){if(this.sizeVariables.length)return this.sizeVariables[0].getSize(a,
b)};b.prototype.getSizeRangeAtScale=function(a,b){if(this.sizeVariables.length)return this.sizeVariables[0].getSizeRangeAtScale(a,b)};b.prototype._resetVariables=function(){this.colorVariables=[];this.opacityVariables=[];this.rotationVariables=[];this.sizeVariables=[]};f([p.property()],b.prototype,"visualVariables",null);return b=f([p.subclass("esri.renderers.visualVariables.VisualVariableFactory")],b)}(p.declared(h))})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/compilerUtils ../../core/has ../../core/Logger ../../core/screenUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(d,a,l,f,h,k,b,g,p,e){function c(a,b){if(null==b)return a;a=a.toRgba();a[3]*=b;return new l(a)}function n(a,b,d){(a=a.symbolLayers)&&a.forEach(function(a){if(a){var g=a.material;b=b||g&&g.color||null!=d&&x;var f=c(b,d);g?a.material.color=f:a.material=new e.default({color:f});null!=d&&"outline"in a&&a.outline&&a.outline.color&&(a.outline.color=c(a.outline.color,d))}})}function m(a,b,c){(a=a.symbolLayers)&&a.forEach(function(a){if(a)switch(a.type){case "icon":case "line":case "path":case "extrude":case "text":a.size=
b;break;case "object":switch(c){case "width":a.width=b;break;case "depth":a.depth=b;break;case "height":a.height=b;break;case "width-and-depth":a.width=b;a.depth=b;break;default:a.width=b,a.depth=b,a.height=b}break;default:q.warn("symbolUtils: applySizeToSymbol","symbolLayer not supported")}})}Object.defineProperty(a,"__esModule",{value:!0});var q=b.getLogger("esri.symbols.support.utils"),y=/\/resource\/(.*?)\.svg$/,x=new l("white");a.getSymbolOutlineSize=function(a){if(!a)return 0;if(f.isSymbol3D(a)){var b=
a.symbolLayers&&a.symbolLayers.length;b?(a=a.symbolLayers.getItemAt(b-1),a="outline"in a&&a.outline&&a.outline.size):a=void 0;return a||0}return(a=p.getStroke(a))&&g.px2pt(a.width)||0};a.isVolumetricSymbol=function(a){if(!a||!a.symbolLayers)return!1;switch(a.type){case "point-3d":return a.symbolLayers.some(function(a){return"object"===a.type});case "line-3d":return a.symbolLayers.some(function(a){return"path"===a.type});case "polygon-3d":return a.symbolLayers.some(function(a){return"object"===a.type||
"extrude"===a.type});default:return!1}};a.getIconHref=function(a,b){b=b.resource.href;return!k("esri-canvas-svg-support")&&a.styleOrigin&&y.test(b)?b.replace(y,"/resource/png/$1.png"):b};a.applyOpacityToColor=c;a.applyColorToSymbol=function(a,b,e){if(a&&(b||null!=e))if(b&&(b=new l(b)),f.isSymbol3D(a))n(a,b,e);else if(f.isSymbol2D(a)){if(b=b||a.color)a.color=c(b,e);null!=e&&"outline"in a&&a.outline&&a.outline.color&&(a.outline.color=c(a.outline.color,e))}};a.applySizeToSymbol=function(a,b,c){if(a&&
null!=b)if(f.isSymbol3D(a))m(a,b,c);else if(f.isSymbol2D(a))switch(a.type){case "simple-marker":a.size=b;break;case "picture-marker":c=a.width/a.height;1<c?(a.width=b,a.height=b*c):(a.width=b*c,a.height=b);break;case "simple-line":a.width=b;break;case "text":a.font.size=b;break;case "simple-fill":case "picture-fill":break;default:h.neverReached(a)}};a.applyRotationToSymbol=function(a,b,c){a&&null!=b&&(f.isSymbol3D(a)?(a=a.symbolLayers)&&a.forEach(function(a){if(a&&"object"===a.type)switch(c){case "tilt":a.tilt=
b;break;case "roll":a.roll=b;break;default:a.heading=b}}):!f.isSymbol2D(a)||"simple-marker"!==a.type&&"picture-marker"!==a.type&&"text"!==a.type||(a.angle=b))}})},"esri/symbols/support/gfxUtils":function(){define("require exports ../../core/tsSupport/assignHelper dojox/gfx/_base ../../Color ../../request ../../core/ItemCache ../../core/promiseUtils ../../core/screenUtils".split(" "),function(d,a,l,f,h,k,b,g,p){function e(a){if(!a)return null;var b,c=p.pt2px(a.width);switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":b=
e(a.outline);break;case "simple-line":"none"!==a.style&&0!==c&&(b={color:a.color,style:y(a.style),width:c,cap:a.cap,join:"miter"===a.join?p.pt2px(a.miterLimit):a.join});break;default:b=null}return b}Object.defineProperty(a,"__esModule",{value:!0});var c=d.toUrl("../../symbols/patterns/"),n={left:"start",center:"middle",right:"end",justify:"start"},m={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},q=new b(1E3);a.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&
n[a.toLowerCase()]||"middle"};a.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&m[a.toLowerCase()]||"alphabetic"};a.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};a.getFill=function(a){var b=a.style,e=null;if(a)switch(a.type){case "simple-marker":"cross"!==b&&"x"!==b&&(e=a.color);break;case "simple-fill":"solid"===b?e=a.color:"none"!==b&&(e=l({},f.defaultPattern,{src:c+b+".png",width:8,height:8}));break;case "picture-fill":e=l({},f.defaultPattern,{src:a.url,
width:p.pt2px(a.width)*a.xscale,height:p.pt2px(a.height)*a.yscale,x:p.pt2px(a.xoffset),y:p.pt2px(a.yoffset)});break;case "text":e=a.color}return e};a.getPatternUrlWithColor=function(a,b){var c=a+"-"+b;return void 0!==q.get(c)?g.resolve(q.get(c)):k(a,{responseType:"image"}).then(function(a){a=a.data;var e=a.naturalWidth,d=a.naturalHeight,g=document.createElement("canvas");g.width=e;g.height=d;var f=g.getContext("2d");f.fillStyle=b;f.fillRect(0,0,e,d);f.globalCompositeOperation="destination-in";f.drawImage(a,
0,0);a=g.toDataURL();q.put(c,a);return a})};a.getStroke=e;a.create2DColorRamp=function(a){var b=a.colors,c=a.numClasses,e=a.size;a=a.surface.createGroup();for(var e=(e||75)/c,d=0;d<c;d++)for(var g=d*e,f=0;f<c;f++){var h=b[d][f];a.createRect({x:f*e,y:g,width:e,height:e}).setFill(h).setStroke(null)}return a};var y=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();a.defaultThematicColor=new h([128,128,128])})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(d,a,l,f,h,k,b,g,p){var e=a.getObject("dojox.gfx",!0),c=e._base={};e._hasClass=function(a,b){return(a=a.getAttribute("className"))&&0<=(" "+a+" ").indexOf(" "+b+" ")};e._addClass=function(a,b){var c=a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};e._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};c._getFontMeasurements=function(){var a=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b,c;f("ie")&&(c=h.doc.documentElement.style.fontSize||"",c||(h.doc.documentElement.style.fontSize="100%"));var e=g.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},h.body());for(b in a)e.style.fontSize=b,a[b]=16*Math.round(12*e.offsetHeight/16)/12/1E3;
f("ie")&&(h.doc.documentElement.style.fontSize=c);h.body().removeChild(e);return a};var n=null;c._getCachedFontMeasurements=function(a){if(a||!n)n=c._getFontMeasurements();return n};var m=null,q={};c._getTextBox=function(a,b,c){var e,d,f=arguments.length,k;m||(m=g.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},h.body()));e=m;e.className="";d=e.style;d.borderWidth="0";d.margin="0";d.padding="0";d.outline="0";if(1<f&&b)for(k in b)k in q||(d[k]=b[k]);2<f&&c&&(e.className=
c);e.innerHTML=a;e.getBoundingClientRect?(d=e.getBoundingClientRect(),d={l:d.left,t:d.top,w:d.width||d.right-d.left,h:d.height||d.bottom-d.top}):d=p.getMarginBox(e);e.innerHTML="";return d};c._computeTextLocation=function(a,b,c,e){var d={};switch(a.align){case "end":d.x=a.x-b;break;case "middle":d.x=a.x-b/2;break;default:d.x=a.x}d.y=a.y-c*(e?.75:1);return d};c._computeTextBoundingBox=function(a){if(!e._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var d=a.getFont()||e.defaultFont;
a=a.getTextWidth();d=e.normalizedLength(d.size);b=c._computeTextLocation(b,a,d,!0);return{x:b.x,y:b.y,width:a,height:d}};c._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var y=0;c._getUniqueId=function(){var a;do a=d._scopeName+"xUnique"+ ++y;while(b.byId(a));return a};var x=f("pointer-events")?"touchAction":null;c._fixMsTouchAction=x?function(a){a.rawNode.style[x]="none"}:function(){};a.mixin(e,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",
points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",
color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=
a[b];if(c)return new c;c=a[b]=new Function;c.prototype=e["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof l?a:new l(a)},normalizeParameters:function(a,b){var c;if(b){var e={};for(c in a)c in b&&!(c in e)&&(a[c]=b[c])}return a},makeParameters:function(b,c){var e=null;if(!c)return a.delegate(b);var d={};for(e in b)e in d||(d[e]=a.clone(e in c?c[e]:b[e]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var e=c.indexOf(".");
0<=e&&5<c.length-e&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=e.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?a[3]:a[3].substring(0,c);var d=4;0>c&&("/"==a[4]?d=6:"/"==a[4].charAt(0)&&(d=5));d<a.length&&(b.family=a.slice(d).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return e._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(a){return a*e.px_in_pt()},px2pt:function(a){return a/e.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var b=e.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*e.mm_in_pt*b;case "cm":return c*e.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b="string"==typeof a?e[a]:a;b&&(k.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),function(a){e[a]=b[a]}),"string"==typeof a?e.renderer=a:k.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return e.renderer=e[a]&&e[a].Surface===e.Surface?a:null}))}});return e})},"esri/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(d,a,l,f,h,k,b,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.minValue=null;b.maxValue=0;b.symbol=null;return b}l(e,a);c=e;e.prototype.clone=function(){return new c({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};var c;f([k.property({type:String,json:{write:!0}})],e.prototype,"description",
void 0);f([k.property({type:String,json:{write:!0}})],e.prototype,"label",void 0);f([k.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],e.prototype,"minValue",void 0);f([k.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],e.prototype,"maxValue",void 0);f([k.property({types:g.rendererTypes,json:{origins:{"web-scene":{read:b.read,write:{target:{symbol:{types:g.rendererTypes3D}},writer:b.writeTarget}}},read:b.read,
write:b.writeTarget}})],e.prototype,"symbol",void 0);return e=c=f([k.subclass("esri.renderers.support.ClassBreakInfo")],e)}(k.declared(h));a.ClassBreakInfo=d;a.default=d})},"esri/renderers/HeatmapRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/accessorSupport/decorators ./Renderer ./support/HeatmapColorStop".split(" "),function(d,a,l,f,h,k,b,g,p){return function(a){function c(b){b=a.call(this)||this;
b.blurRadius=10;b.colorStops=[new p.HeatmapColorStop({ratio:0,color:new h("rgba(255, 140, 0, 0)")}),new p.HeatmapColorStop({ratio:.75,color:new h("rgba(255, 140, 0, 1)")}),new p.HeatmapColorStop({ratio:.9,color:new h("rgba(255, 0,   0, 1)")})];b.field=null;b.fieldOffset=0;b.maxPixelIntensity=100;b.minPixelIntensity=0;b.type="heatmap";return b}l(c,a);e=c;c.prototype.clone=function(){return new e({blurRadius:this.blurRadius,colorStops:k.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,
minPixelIntensity:this.minPixelIntensity})};var e;f([b.property({type:Number,json:{write:!0}})],c.prototype,"blurRadius",void 0);f([b.property({type:[p.HeatmapColorStop],json:{write:!0}})],c.prototype,"colorStops",void 0);f([b.property({type:String,json:{write:!0}})],c.prototype,"field",void 0);f([b.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:null==c}}}}})],c.prototype,"fieldOffset",void 0);f([b.property({type:Number,json:{write:!0}})],c.prototype,"maxPixelIntensity",
void 0);f([b.property({type:Number,json:{write:!0}})],c.prototype,"minPixelIntensity",void 0);f([b.property({dependsOn:["field"],readOnly:!0})],c.prototype,"requiredFields",void 0);f([b.enumeration.serializable()({heatmap:"heatmap"})],c.prototype,"type",void 0);return c=e=f([b.subclass("esri.renderers.HeatmapRenderer")],c)}(b.declared(g))})},"esri/renderers/support/HeatmapColorStop":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,f,h,k,b){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(b){b=a.call(this)||this;b.color=null;b.ratio=null;return b}l(d,a);e=d;d.prototype.clone=function(){return new e({color:this.color,ratio:this.ratio})};var e;f([b.property({type:h,json:{write:!0}})],d.prototype,"color",void 0);f([b.property({type:Number,json:{write:!0}})],d.prototype,"ratio",void 0);return d=e=f([b.subclass("esri.renderers.support.HeatmapColorStop")],d)}(b.declared(k));a.HeatmapColorStop=
d;a.default=d})},"esri/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ./mixins/VisualVariablesRenderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),function(d,a,l,f,h,k,b,g,p,e){return function(a){function b(b){b=a.call(this)||this;b.description=null;b.label=null;b.symbol=null;b.type="simple";return b}l(b,a);c=b;b.prototype.writeSymbolWebScene=
function(a,b,c,e){p.writeTarget(a,b,c,e)};b.prototype.writeSymbol=function(a,b,c,e){p.writeTarget(a,b,c,e)};b.prototype.readSymbol=function(a,b,c){return p.read(a,b,c)};b.prototype.getSymbol=function(a,b){return this.symbol};b.prototype.getSymbols=function(){return this.symbol?[this.symbol]:[]};b.prototype.clone=function(){return new c({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:h.clone(this.visualVariables),authoringInfo:this.authoringInfo&&
this.authoringInfo.clone()})};var c;f([k.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);f([k.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);f([k.property({types:e.rendererTypes})],b.prototype,"symbol",void 0);f([k.writer("web-scene","symbol",{symbol:{types:e.rendererTypes3D}})],b.prototype,"writeSymbolWebScene",null);f([k.writer("symbol")],b.prototype,"writeSymbol",null);f([k.reader("symbol")],b.prototype,"readSymbol",null);f([k.enumeration.serializable()({simple:"simple"})],
b.prototype,"type",void 0);return b=c=f([k.subclass("esri.renderers.SimpleRenderer")],b)}(k.declared(b,g))})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./mixins/VisualVariablesRenderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D,B,w,C){var E=e.getLogger("esri.renderers.UniqueValueRenderer"),A=m.ensureType(z.default);return function(a){function e(c){c=a.call(this)||this;c._valueInfoMap={};c._isDefaultSymbolDerived=!1;c.type="unique-value";c.backgroundFillSymbol=null;c.field=null;c.field2=null;c.field3=null;c.valueExpression=null;c.valueExpressionTitle=null;c.legendOptions=null;c.defaultLabel=null;c.fieldDelimiter=null;c.portal=null;c.styleOrigin=null;c.diff={uniqueValueInfos:function(a,
c){if(a||c){if(!a||!c)return{type:"complete",oldValue:a,newValue:c};for(var e=!1,d={type:"collection",added:[],removed:[],changed:[],unchanged:[]},g=function(g){var f=b.find(a,function(a){return a.value===c[g].value});f?t.diff(f,c[g])?(d.changed.push({type:"complete",oldValue:f,newValue:c[g]}),e=!0):d.unchanged.push({oldValue:f,newValue:c[g]}):(d.added.push(c[g]),e=!0)},f=0;f<c.length;f++)g(f);g=function(g){b.find(c,function(b){return b.value===a[g].value})||(d.removed.push(a[g]),e=!0)};for(f=0;f<
a.length;f++)g(f);return e?d:void 0}}};c._set("uniqueValueInfos",[]);return c}l(e,a);d=e;e.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,e){B.writeTarget(a,b,c,e)};e.prototype.castField=function(a){return null==a?a:"function"===typeof a?a:m.ensureString(a)};e.prototype.writeField=function(a,b,c,e){"string"===typeof a?b[c]=a:e&&e.messages?e.messages.push(new g("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):E.error(".field: cannot write field to JSON since it's not a string value")};
Object.defineProperty(e.prototype,"compiledFunc",{get:function(){return D.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});e.prototype.readDefaultSymbol=function(a,b,c){return B.read(a,b,c)};e.prototype.writeDefaultSymbolWebScene=function(a,b,c,e){this._isDefaultSymbolDerived||B.writeTarget(a,b,c,e)};e.prototype.writeDefaultSymbol=
function(a,b,c,e){this._isDefaultSymbolDerived||B.writeTarget(a,b,c,e)};e.prototype.readPortal=function(a,b,c){return c.portal||q.getDefault()};e.prototype.readStyleOrigin=function(a,b,e){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=c.fromJSON(b.styleUrl,e),Object.freeze({styleUrl:a})};e.prototype.writeStyleOrigin=function(a,b,e,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&(b.styleUrl=c.toJSON(a.styleUrl,d))};Object.defineProperty(e.prototype,"uniqueValueInfos",
{set:function(a){this.styleOrigin?E.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});e.prototype.addUniqueValueInfo=function(a,b){this.styleOrigin?E.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(a="object"===typeof a?A(a):new z.default({value:a,symbol:b}),this.uniqueValueInfos.push(a),
this._valueInfoMap[a.value]=a)};e.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)E.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};e.prototype.getUniqueValueInfo=function(a,b){var c=this.field,e=a.attributes,d;this.valueExpression?d=D.executeFunction(this.compiledFunc,
D.createExecContext(a,D.getViewInfo(b))):"function"!==typeof c&&this.field2?(a=this.field2,b=this.field3,d=[],c&&d.push(e[c]),a&&d.push(e[a]),b&&d.push(e[b]),d=d.join(this.fieldDelimiter||"")):"function"===typeof c?d=c(a):c&&(d=e[c]);return this._valueInfoMap[d+""]};e.prototype.getSymbol=function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol};e.prototype.getSymbols=function(){for(var a=[],b=0,c=this.uniqueValueInfos;b<c.length;b++){var e=c[b];e.symbol&&a.push(e.symbol)}this.defaultSymbol&&
a.push(this.defaultSymbol);return a};e.prototype.clone=function(){var a=new d({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:p.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:p.clone(this.visualVariables),legendOptions:p.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:p.clone(this.backgroundFillSymbol)});
this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=p.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(p.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};e.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.field2,this.field3].forEach(function(b){b&&"string"===typeof b&&(a[b]=!0)});this.valueExpression&&D.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=
!0})};e.prototype.populateFromStyle=function(){var a=this;return w.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(e){var d=new k.WebStyleSymbol({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:e.name});a.defaultSymbol||e.name!==b.data.defaultItem||(a.defaultSymbol=d,a._isDefaultSymbolDerived=!0);d=new z.default({value:e.name,symbol:d});c.push(d);a._valueInfoMap[e.name]=
d});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};e.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};e.fromPortalStyle=function(a,b){var c=new d(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||q.getDefault());b=c.populateFromStyle();
b.catch(function(b){E.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",b)});return b};e.fromStyleUrl=function(a,b){b=new d(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.catch(function(b){E.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",b)});return b};var d;f([n.enumeration.serializable()({uniqueValue:"unique-value"})],e.prototype,"type",void 0);f([n.property({types:{base:k.BaseSymbol,
key:"type",typeMap:{"simple-fill":C.rendererTypes.typeMap["simple-fill"],"picture-fill":C.rendererTypes.typeMap["picture-fill"],"polygon-3d":C.rendererTypes.typeMap["polygon-3d"]}},json:{read:B.read,write:B.writeTarget}})],e.prototype,"backgroundFillSymbol",void 0);f([n.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:k.PolygonSymbol3D}})],e.prototype,"writeBackgroundFillSymbolWebScene",null);f([n.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],
e.prototype,"field",void 0);f([n.cast("field")],e.prototype,"castField",null);f([n.writer("field")],e.prototype,"writeField",null);f([n.property({type:String,json:{write:!0}})],e.prototype,"field2",void 0);f([n.property({type:String,json:{write:!0}})],e.prototype,"field3",void 0);f([n.property({type:String,json:{write:!0}})],e.prototype,"valueExpression",void 0);f([n.property({type:String,json:{write:!0}})],e.prototype,"valueExpressionTitle",void 0);f([n.property({dependsOn:["valueExpression"]})],
e.prototype,"compiledFunc",null);f([n.property({type:u.default,json:{write:!0}})],e.prototype,"legendOptions",void 0);f([n.property({type:String,json:{write:!0}})],e.prototype,"defaultLabel",void 0);f([n.property({types:C.rendererTypes})],e.prototype,"defaultSymbol",null);f([n.reader("defaultSymbol")],e.prototype,"readDefaultSymbol",null);f([n.writer("web-scene","defaultSymbol",{defaultSymbol:{types:C.rendererTypes3D}})],e.prototype,"writeDefaultSymbolWebScene",null);f([n.writer("defaultSymbol")],
e.prototype,"writeDefaultSymbol",null);f([n.property({type:String,json:{write:!0}})],e.prototype,"fieldDelimiter",void 0);f([n.property({type:q,readOnly:!0})],e.prototype,"portal",void 0);f([n.reader("portal",["styleName"])],e.prototype,"readPortal",null);f([n.property({readOnly:!0})],e.prototype,"styleOrigin",void 0);f([n.reader("styleOrigin",["styleName","styleUrl"])],e.prototype,"readStyleOrigin",null);f([n.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],e.prototype,"writeStyleOrigin",
null);f([n.property({type:[z.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],e.prototype,"uniqueValueInfos",null);f([n.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],e.prototype,"requiredFields",void 0);f([h(1,n.cast(C.ensureType))],e.prototype,"addUniqueValueInfo",null);return e=d=f([n.subclass("esri.renderers.UniqueValueRenderer")],e)}(n.declared(y,x))})},"esri/renderers/support/diffUtils":function(){define(["require",
"exports","../../core/Accessor","../../core/Collection","../../core/accessorSupport/utils"],function(d,a,l,f,h){function k(a){return a instanceof f?Object.keys(a.items):a instanceof l?h.getProperties(a).keys():a?Object.keys(a):[]}function b(a,b){return a instanceof f?a.items[b]:a[b]}function g(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function p(a){return a?a.declaredClass:null}function e(a,d){var f=a.diff;if(f&&"function"===typeof f)return f(a,d);var h=k(a),m=k(d);if(0!==
h.length||0!==m.length){if(!h.length||!m.length||g(a,d))return{type:"complete",oldValue:a,newValue:d};var n=m.filter(function(a){return-1===h.indexOf(a)}),u=h.filter(function(a){return-1===m.indexOf(a)}),n=h.filter(function(c){return-1<m.indexOf(c)&&b(a,c)!==b(d,c)}).concat(n,u).sort();if((u=p(a))&&-1<c.indexOf(u)&&n.length)return{type:"complete",oldValue:a,newValue:d};var z,u=a instanceof l&&d instanceof l,D;for(D in n){var B=n[D],w=b(a,B),C=b(d,B),E=void 0;(u||"function"!==typeof w&&"function"!==
typeof C)&&w!==C&&(null!=w||null!=C)&&(E=f&&f[B]&&"function"===typeof f[B]?f[B](w,C):"object"===typeof w&&"object"===typeof C&&p(w)===p(C)?e(w,C):{type:"complete",oldValue:w,newValue:C})&&(z=z||{type:"partial",diff:{}},z.diff[B]=E)}return z}}Object.defineProperty(a,"__esModule",{value:!0});var c=["esri.Color","esri.portal.Portal"];a.diff=function(a,b){if("function"!==typeof a&&"function"!==typeof b&&(a||b))return!a||!b||"object"===typeof a&&"object"===typeof b&&p(a)!==p(b)?{type:"complete",oldValue:a,
newValue:b}:e(a,b)}})},"esri/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(d,a,l,f,h,k,b,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.symbol=
null;b.value=null;return b}l(e,a);c=e;e.prototype.clone=function(){return new c({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};var c;f([k.property({type:String,json:{write:!0}})],e.prototype,"description",void 0);f([k.property({type:String,json:{write:!0}})],e.prototype,"label",void 0);f([k.property({types:g.rendererTypes,json:{origins:{"web-scene":{read:b.read,write:{target:{symbol:{types:g.rendererTypes3D}},writer:b.writeTarget}}},
read:b.read,write:b.writeTarget}})],e.prototype,"symbol",void 0);f([k.property({type:String,json:{write:!0}})],e.prototype,"value",void 0);return e=c=f([k.subclass("esri.renderers.support.UniqueValueInfo")],e)}(k.declared(h));a.UniqueValueInfo=d;a.default=d})},"esri/symbols/support/styleUtils":function(){define("require exports ../../request ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/has ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q){function y(a,b){return B(a).then(function(b){return{data:b.data,baseUrl:p.removeFile(a),styleUrl:a}})}function x(a,b){b=b.portal||e.getDefault();var c,d=b.url+" - "+(b.user&&b.user.username)+" - "+a;w[d]||(w[d]=t(a,b).then(function(a){c=a;return a.fetchData()}).then(function(b){return{data:b,baseUrl:c.itemUrl,styleName:a}}));return w[d]}function t(a,b){return b.load().then(function(){var e=new c({disableExtraQuery:!0,query:"owner:"+C+" AND type:"+E+' AND typekeywords:"'+
a+'"'});return b.queryItems(e)}).then(function(b){b=b.results;var c=null,e=a.toLowerCase();if(b&&Array.isArray(b))for(var d=0;d<b.length;d++){var g=b[d];if(g.typeKeywords.some(function(a){return a.toLowerCase()===e})&&g.type===E&&g.owner===C){c=g;break}}if(c)return c.load();throw new k("symbolstyleutils:style-not-found","The style '"+a+"' could not be found",{styleName:a});})}function u(a,b){return a.styleUrl?y(a.styleUrl,b):a.styleName?x(a.styleName,b):g.reject(new k("symbolstyleutils:style-url-and-name-missing",
"Either styleUrl or styleName is required to resolve a style"))}function z(a,b,c){for(var e=a.data,d={portal:c.portal,url:p.urlToObject(a.baseUrl),origin:"portal-item"},l=function(e){if(e.name!==b)return"continue";var g=p.fromJSON(D(e),d),k=e.thumbnail&&e.thumbnail.href,l=e.thumbnail&&e.thumbnail.imageData;h.isDevEnvironment()&&(g=h.adjustStaticAGOUrl(g),k=h.adjustStaticAGOUrl(k));var t={portal:c.portal,url:p.urlToObject(p.removeFile(g)),origin:"portal-item"};return{value:B(g).then(function(e){if((e=
n.fromJSON(e.data,t))&&e.isInstanceOf(f.BaseSymbol3D)){if(k){var g=p.fromJSON(k,d);e.thumbnail=new q.default({url:g})}else l&&(e.thumbnail=new q.default({url:"data:image/png;base64,"+l}));a.styleUrl?e.styleOrigin=new m({portal:c.portal,styleUrl:a.styleUrl,name:b}):a.styleName&&(e.styleOrigin=new m({portal:c.portal,styleName:a.styleName,name:b}))}return e})}},t=0,e=e.items;t<e.length;t++){var w=l(e[t]);if("object"===typeof w)return w.value}return g.reject(new k("symbolstyleutils:symbol-name-not-found",
"The symbol name '"+b+"' could not be found",{symbolName:b}))}function D(a){if(a.formatInfos&&!b("enable-feature:jschmid/force-wosr"))for(var c=0,e=a.formatInfos;c<e.length;c++){var d=e[c];if("gltf"===d.type)return d.href}return a.webRef}function B(a){return l(p.normalize(a),{responseType:"json",query:{f:"json"}})}Object.defineProperty(a,"__esModule",{value:!0});var w={};a.fetchStyle=u;a.resolveWebStyleSymbol=function(a,b){return a.name?u(a,b).then(function(c){return z(c,a.name,b)}):g.reject(new k("symbolstyleutils:style-symbol-reference-name-missing",
"Missing name in style symbol reference"))};a.fetchSymbolFromStyle=z;a.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c)&&"Esri Style"!==c)return c}};var C="esri_en",E="Style"})},"esri/core/devEnvironmentUtils":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.isDevEnvironment=function(a){a=a||window.location.hostname;return b.some(function(b){return null!=a.match(b)})};a.adjustStaticAGOUrl=
function(a,b){if(!a)return a;b=b||window.location.hostname;return null!=b.match(l)||null!=b.match(h)?a.replace("static.arcgis.com","staticdev.arcgis.com"):null!=b.match(f)||null!=b.match(k)?a.replace("static.arcgis.com","staticqa.arcgis.com"):a};a.isTelemetryDevEnvironment=function(a){a=a||window.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(b).some(function(b){return null!=a.match(b)})};var l=/^devext.arcgis.com$/,f=/^qaext.arcgis.com$/,h=/^[\w-]*\.mapsdevext.arcgis.com$/,k=/^[\w-]*\.mapsqa.arcgis.com$/,
b=[l,f,/^jsapps.esri.com$/,h,k]})},"esri/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),function(d,a,l,f,h,k,b,g){function p(a,b,d){if(!a)return null;var c=0,g={};a=a.clone();var h=a.visualVariables,l=null;if("simple"!==a.type){var m=a.valueExpression;if(!a.field&&m){var n="$$fake"+c++,p=k.createFunction(m);g[n]=
function(a,c){e.repurposeFromGraphicLikeObject(a.geometry,a.attributes,d);return k.executeFunction(p,{vars:{$feature:e,$view:k.getViewInfo(c)},spatialReference:b})};a.field=n;a.valueExpression=null;l=function(a,b){b.attributes[n]=g[n](b);return a.valueExpression?a.getSymbol(f.fromJSON(b)):a.getSymbol(b)}}}h&&(a.visualVariables=h.map(function(a){var f="size"===a.type&&a.valueExpression&&"$view.scale"===a.valueExpression;if(a.normalizationField){var h=a.field,l=a.normalizationField,f="$$fake"+c++;g[f]=
function(a,b){return a.attributes[h]/a.attributes[l]};a=a.clone();a.field=f;a.normalizationField=null;return a}if(a.valueExpression&&!f){var m=a.valueExpression,f="$$fake"+c++,n=k.createFunction(m);g[f]=function(a,c){e.repurposeFromGraphicLikeObject(a.geometry,a.attributes,d);return k.executeFunction(n,{vars:{$feature:e,$view:k.getViewInfo(c)},spatialReference:b})};a=a.clone();a.field=f;a.valueExpression=null}return a}));return{renderer:a,normalizingFunctions:g,getSymbolFunction:l}}Object.defineProperty(a,
"__esModule",{value:!0});var e=new h;a.createRendererInfo=function(a,b,e){var c=(b=p(a,b,e)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.normalizingFunctions),d=b&&b.getSymbolFunction;a=b&&b.renderer||a;b=g.convertVisualVariables(a.visualVariables);return{renderer:a,vvFields:b.vvFields,vvRanges:b.vvRanges,getValue:function(a,b){var e=c[b];return e?e(a):a.attributes[b]},getSymbol:function(a){return d?d(this.renderer,a):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,
a):null}}};a.getNormalizedRenderer=function(a,b,e){return(b=p(a,b,e)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.renderer)||a};a.getSymbol=function(a,b){return a.getSymbol(b)};a.isRendererWebGLCompatible=function(a){if(!a||-1===["simple","class-breaks","unique-value","heatmap"].indexOf(a.type))return!1;if("visualVariables"in a&&a.visualVariables){var c=0;for(a=a.visualVariables;c<a.length;c++){var e=a[c];switch(e.type){case "color":case "opacity":if(e.stops&&8<e.stops.length)return!1;
break;case "size":if(g.getTypeOfSizeVisualVariable(e)===b.WGLVVFlag.SIZE_FIELD_STOPS&&e.stops&&6<e.stops.length)return!1}}}return!0}})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),function(d,a,l,f,h,k,b){function g(a){return k.isNumber(a.minDataValue)&&k.isNumber(a.maxDataValue)&&null!=a.minSize&&null!=a.maxSize?h.WGLVVFlag.SIZE_MINMAX_VALUE:(a.expression&&
"view.scale"===a.expression||a.valueExpression&&"$view.scale"===a.valueExpression)&&Array.isArray(a.stops)?h.WGLVVFlag.SIZE_SCALE_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&Array.isArray(a.stops)?h.WGLVVFlag.SIZE_FIELD_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&null!=a.valueUnit?h.WGLVVFlag.SIZE_UNIT_VALUE:h.WGLVVFlag.NONE}function p(a){return{value:a.value,
size:l.toPt(a.size)}}function e(a){return a.map(function(a){return p(a)})}function c(a){return"string"===typeof a||"number"===typeof a?l.toPt(a):{type:"size",expression:a.expression,stops:e(a.stops)}}function n(a){var b={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(k.isString(a.field))if(a.stops){if(8<a.stops.length)return null;var c=a.stops;for(a=0;8>a;++a){var e=c[Math.min(a,c.length-1)];b.values[a]=e.value;b.opacities[a]=e.opacity}}else return null;else if(a.stops&&0<=a.stops.length)for(c=
a.stops&&0<=a.stops.length&&a.stops[0].opacity,a=0;8>a;a++)b.values[a]=Infinity,b.opacities[a]=c;else return null;return b}Object.defineProperty(a,"__esModule",{value:!0});a.getTypeOfSizeVisualVariable=g;a.getVisualVariableSizeValueRepresentationRatio=function(a,b){if(!a||!b)return a;switch(b){case "radius":case "distance":return 2*a;case "area":return Math.sqrt(a)}return a};a.stopToSizeStop=p;a.normalizeSizeStops=e;a.normalizeSizeElement=c;a.getVisualVariablesFields=function(a){var b=a&&0<a.length?
{}:null;b&&a.forEach(function(a){var c=a.type;a.field&&(b[c]=a.field)});return b};a.convertVisualVariables=function(a){var d=a&&0<a.length?{}:null,k=d?{}:null;if(!d)return{vvFields:d,vvRanges:k};for(var m=0;m<a.length;m++){var p=a[m],u=p.type;p.field&&(d[u]=p.field);if("size"===u){k.size||(k.size={});var z=p;switch(g(z)){case h.WGLVVFlag.SIZE_MINMAX_VALUE:k.size.minMaxValue={minDataValue:z.minDataValue,maxDataValue:z.maxDataValue,minSize:c(z.minSize),maxSize:c(z.maxSize)};break;case h.WGLVVFlag.SIZE_SCALE_STOPS:k.size.scaleStops=
{stops:e(z.stops)};break;case h.WGLVVFlag.SIZE_FIELD_STOPS:for(var p=[],u=[],z=e(z.stops),D=z.length,B=0;6>B;B++){var w=z[Math.min(B,D-1)];p.push(w.value);u.push(l.pt2px(w.size))}k.size.fieldStops={values:p,sizes:u};break;case h.WGLVVFlag.SIZE_UNIT_VALUE:k.size.unitValue={unit:z.valueUnit,valueRepresentation:z.valueRepresentation}}}else if("color"===u)for(p=b.convertVisualVariables([p],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),k.color=p.color,B=0;32>B;B+=4)f.premultiplyAlpha(k.color.colors,
B,!0);else"opacity"===u?k.opacity=n(p):"rotation"===u&&(k.rotation={type:p.rotationType})}return{vvFields:d,vvRanges:k}}})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/gl-matrix","../../../../renderers/support/utils"],function(d,a,l,f){function h(a){return null!==a&&void 0!==a}function k(a){return"number"===typeof a}function b(a,b){a&&a.push(b)}function g(a,c,e,d,g){var l=a.minSize,m=a.maxSize;if(a.expression)return b(g,
"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=d.symbolSize[e],c.minSize[e]=a,c.maxSize[e]=a,c.offset[e]=c.minSize[e],c.factor[e]=0,c.type[e]=1,!0;if(h(a.field)){if(h(a.stops)){if(2===a.stops.length&&k(a.stops[0].size)&&k(a.stops[1].size))return p(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,c,e),c.type[e]=1,!0;b(g,"Could not convert size info: stops only supported with 2 elements");return!1}if(k(l)&&k(m)&&h(a.minDataValue)&&h(a.maxDataValue))return p(l,
m,a.minDataValue,a.maxDataValue,c,e),c.type[e]=1,!0;if(null!=f.meterIn[a.valueUnit])return c.minSize[e]=-Infinity,c.maxSize[e]=Infinity,c.offset[e]=0,c.factor[e]=1/f.meterIn[a.valueUnit],c.type[e]=1,!0;"unknown"===a.valueUnit?b(g,"Could not convert size info: proportional size not supported"):b(g,"Could not convert size info: scale-dependent size not supported");return!1}if(!h(a.field)){if(a.stops&&a.stops[0]&&k(a.stops[0].size))return c.minSize[e]=a.stops[0].size,c.maxSize[e]=a.stops[0].size,c.offset[e]=
c.minSize[e],c.factor[e]=0,c.type[e]=1,!0;if(k(l))return c.minSize[e]=l,c.maxSize[e]=l,c.offset[e]=l,c.factor[e]=0,c.type[e]=1,!0}b(g,"Could not convert size info: unsupported variant of sizeInfo");return!1}function p(a,b,c,e,d,g){e=0<Math.abs(e-c)?(b-a)/(e-c):0;d.minSize[g]=0<e?a:b;d.maxSize[g]=0<e?b:a;d.offset[g]=a-c*e;d.factor[g]=e}function e(a,c,e,d){if(a.normalizationField||a.valueRepresentation)return b(d,"Could not convert size info: unsupported property"),null;var f=a.field;if(null!=f&&"string"!==
typeof f)return b(d,"Could not convert size info: field is not a string"),null;if(!c.size)c.size={field:a.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(a.field)if(!c.size.field)c.size.field=a.field;else if(a.field!==c.size.field)return b(d,"Could not convert size info: multiple fields in use"),null;switch(a.axis){case "width":return(f=g(a,c.size,0,e,d))?c:null;case "height":return(f=g(a,c.size,2,e,d))?c:null;case "depth":return(f=g(a,c.size,1,e,d))?c:null;
case "width-and-depth":return(f=g(a,c.size,0,e,d))&&g(a,c.size,1,e,d),f?c:null;case null:case void 0:case "all":return(f=(f=(f=g(a,c.size,0,e,d))&&g(a,c.size,1,e,d))&&g(a,c.size,2,e,d))?c:null;default:return b(d,'Could not convert size info: unknown axis "'+a.axis+'""'),null}}function c(a,c,e){for(var d=0;3>d;++d){var g=c.unitInMeters;1===a.type[d]&&(g*=c.modelSize[d],a.type[d]=2);a.minSize[d]/=g;a.maxSize[d]/=g;a.offset[d]/=g;a.factor[d]/=g}if(0!==a.type[0])c=0;else if(0!==a.type[1])c=1;else if(0!==
a.type[2])c=2;else return b(e,"No size axis contains a valid size or scale"),!1;for(d=0;3>d;++d)0===a.type[d]&&(a.minSize[d]=a.minSize[c],a.maxSize[d]=a.maxSize[c],a.offset[d]=a.offset[c],a.factor[d]=a.factor[c],a.type[d]=a.type[c]);return!0}function n(a,b,c){a[4*b+0]=c.r/255;a[4*b+1]=c.g/255;a[4*b+2]=c.b/255;a[4*b+3]=c.a}function m(a,c,e){if(a.normalizationField)return b(e,"Could not convert color info: unsupported property"),null;if("string"===typeof a.field)if(a.stops){if(8<a.stops.length)return b(e,
"Could not convert color info: too many color stops"),null;c.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};e=a.stops;for(a=0;8>a;++a){var d=e[Math.min(a,e.length-1)];c.color.values[a]=d.value;n(c.color.colors,a,d.color)}}else return b(e,"Could not convert color info: missing stops or colors"),null;else if(a.stops&&0<=a.stops.length)for(e=a.stops&&0<=a.stops.length&&a.stops[0].color,c.color={field:null,values:[0,0,0,0,0,0,0,
0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},a=0;8>a;a++)c.color.values[a]=Infinity,n(c.color.colors,a,e);else return b(e,"Could not convert color info: no field and no colors/stops"),null;return c}function q(a,b,c,e){a=2===c&&"arithmetic"===a.rotationType;b.offset[c]=a?90:0;b.factor[c]=a?-1:1;b.type[c]=1}function y(a,c,e){if("string"!==typeof a.field)return b(e,"Could not convert rotation info: field is not a string"),null;if(!c.rotation)c.rotation={field:a.field,
offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(a.field)if(!c.rotation.field)c.rotation.field=a.field;else if(a.field!==c.rotation.field)return b(e,"Could not convert rotation info: multiple fields in use"),null;switch(a.axis){case "tilt":return q(a,c.rotation,0,e),c;case "roll":return q(a,c.rotation,1,e),c;case null:case void 0:case "heading":return q(a,c.rotation,2,e),c;default:return b(e,'Could not convert rotation info: unknown axis "'+a.axis+'""'),null}}function x(a,d,g){if(!a)return null;
var f=!d.supportedTypes||!!d.supportedTypes.size,h=!d.supportedTypes||!!d.supportedTypes.color,k=!d.supportedTypes||!!d.supportedTypes.rotation;return(a=a.reduce(function(a,c){if(!a)return a;if(c.valueExpression)return b(g,"Could not convert visual variables: arcade expressions not supported"),null;switch(c.type){case "size":return f?e(c,a,d,g):a;case "color":return h?m(c,a,g):a;case "rotation":return k?y(c,a,g):a;default:return b(g,"Could not convert visual variables: unsupported type "+c.type),
null}},{size:null,color:null,rotation:null}))&&a.size&&!c(a.size,d,g)?null:a}function t(a,b,c){if(!!a!==!!b||a&&a.field!==b.field)return!1;if(a&&"rotation"===c)for(c=0;3>c;c++)if(a.type[c]!==b.type[c]||a.offset[c]!==b.offset[c]||a.factor[c]!==b.factor[c])return!1;return!0}function u(a,b){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvSymbolAnchor:null,vvSymbolRotation:null},
e=a&&null!=a.size;a&&a.size?(c.vvSizeEnabled=!0,c.vvSizeMinSize=a.size.minSize,c.vvSizeMaxSize=a.size.maxSize,c.vvSizeOffset=a.size.offset,c.vvSizeFactor=a.size.factor):a&&e&&(c.vvSizeValue=b.transformation.scale);a&&e&&(c.vvSymbolAnchor=b.transformation.anchor,c.vvSymbolRotation=b.transformation.rotation);a&&a.color&&(c.vvColorEnabled=!0,c.vvColorValues=a.color.values,c.vvColorColors=a.color.colors);return c}Object.defineProperty(a,"__esModule",{value:!0});a.convertVisualVariables=x;a.initFastSymbolUpdatesState=
function(a,b){return!a||a.disableFastUpdates?{enabled:!1}:(a=x(a.visualVariables,b))?{enabled:!0,visualVariables:a,materialParameters:u(a,b),requiresShaderTransformation:a&&null!=a.size}:{enabled:!1}};a.updateFastSymbolUpdatesState=function(a,b,c){if(!b||!a.enabled)return!1;var e=a.visualVariables;b=x(b.visualVariables,c);if(!(b&&t(e.size,b.size,"size")&&t(e.color,b.color,"color")&&t(e.rotation,b.rotation,"rotation")))return!1;a.visualVariables=b;a.materialParameters=u(b,c);a.requiresShaderTransformation=
b&&null!=b.size;return!0};a.getMaterialParams=u;var z;(function(a){function b(a,b,c){return a<b?b:a>c?c:a}var c=l.mat4f64.create(),e=l.vec3f64.create();a.evaluateModelTransform=function(a,d,g){if(!a.vvSizeEnabled)return g;l.mat4.copy(c,g);var f=a.vvSymbolRotation[2],h=a.vvSymbolRotation[0],k=a.vvSymbolRotation[1];g=c;void 0===g&&(g=l.mat4f64.create());f=f||0;h=h||0;k=k||0;0!==f&&l.mat4.rotateZ(g,g,-f/180*Math.PI);0!==h&&l.mat4.rotateX(g,g,h/180*Math.PI);0!==k&&l.mat4.rotateY(g,g,k/180*Math.PI);for(g=
0;3>g;++g)e[g]=b(a.vvSizeOffset[g]+d[0]*a.vvSizeFactor[g],a.vvSizeMinSize[g],a.vvSizeMaxSize[g]);l.mat4.scale(c,c,e);l.mat4.translate(c,c,a.vvSymbolAnchor);return c};a.evaluateModelTransformScaleFactor=function(a,c){if(!a.vvSizeEnabled)return 1;for(var e=-Infinity,d=0;3>d;++d)e=Math.max(e,b(a.vvSizeOffset[d]+c[0]*a.vvSizeFactor[d],a.vvSizeMinSize[d],a.vvSizeMaxSize[d]));return e}})(z||(z={}));a.evaluateModelTransform=z.evaluateModelTransform;a.evaluateModelTransformScaleFactor=z.evaluateModelTransformScaleFactor})},
"esri/views/2d/engine/webgl/collisions/CollisionGrid":function(){define(["require","exports","../definitions"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this._bucketSize=a;this._rowsLength=l.TILE_SIZE/a;this._colsLength=l.TILE_SIZE/a;this._grid=this._initGrid()}a.prototype.checkOverlap=function(a,d){a=Math.floor(a/this._bucketSize);d=Math.floor(d/this._bucketSize);if(0>a||a>=this._rowsLength||0>d||d>=this._colsLength||this._grid[d][a])return!0;this._grid[d][a]=
!0;return!1};a.prototype.reset=function(){this._grid=this._initGrid()};a.prototype._initGrid=function(){for(var a=[],d=0;d<this._rowsLength;d++)a.push(Array(this._colsLength));return a};return a}();a.default=d})},"esri/views/2d/engine/webgl/mesh/factories/matcherUtils":function(){define(["require","exports","../../../../../../core/Error","../../../../../../core/Logger","../../util/Matcher"],function(d,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});var k=f.getLogger("esri/views/2d/engine/webgl/mesh/factories/matcherUtils");
a.createMatcher=function(a,d,f,e){switch(a.type){case "simple":return h.default.fromSimpleRenderer(a,d,f);case "unique-value":case "uniqueValue":return h.MapMatcher.fromUVRenderer(a,d,f,e);case "class-breaks":case "classBreaks":return h.IntervalMatcher.fromCBRenderer(a,d,f,e);default:return k.error(new l("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null}}})},"esri/views/2d/engine/webgl/util/Matcher":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/Logger ../Utils ./vvFlagUtils".split(" "),
function(d,a,l,f,h,k){Object.defineProperty(a,"__esModule",{value:!0});var b=f.getLogger("esri/views/2d/engine/webgl/util/Matcher");d=function(){function a(){this._defaultResult=null}a.fromSimpleRenderer=function(b,e,c){var d=b.getSymbols(),g=k.getVVFlags(b.visualVariables);b=new a;d.length&&(e=c.createTemplateGroup(d[0],null,e,g),b.setDefault(e));return b};a.prototype.size=function(){return 1};a.prototype.getDefault=function(){return this._defaultResult};a.prototype.setDefault=function(a){this._defaultResult=
a};a.prototype.match=function(a,b,c){return this.getDefault()};return a}();a.default=d;f=function(a){function d(b,c,d,g,f){var e=a.call(this)||this;e._intervals=[];e._isMaxInclusive=c;g?e._getValue=h.createArcadeFunction(g,f):b&&b.length?"function"===typeof b?(e._field=null,e._getValue=b):(e._field=b,e._normalizationInfo=d,e._getValue=e._getValueFromField.bind(e)):e._field=null;return e}l(d,a);d.fromCBRenderer=function(a,b,g,f){var c=a.isMaxInclusive,e=a.valueExpression,h=a.normalizationField,l=a.normalizationTotal,
m=a.normalizationType,n=k.getVVFlags(a.visualVariables);f=new d(a.field,c,{normalizationField:h,normalizationTotal:l,normalizationType:m},e,f);c=a.backgroundFillSymbol;e=0;for(h=a.classBreakInfos;e<h.length;e++)l=h[e],m=g.createTemplateGroup(l.symbol,c,b,n),f.add({min:l.minValue,max:l.maxValue},m);if(a=a.defaultSymbol)b=g.createTemplateGroup(a,c,b,n),f.setDefault(b);return f};d.prototype.add=function(a,b){this._intervals.push({interval:a,result:b});this._intervals.sort(function(a,b){return a.interval.min-
b.interval.min})};d.prototype.size=function(){return a.prototype.size.call(this)+this._intervals.length};d.prototype.match=function(a,b,d){if(!this._getValue)return this.getDefault();a=this._getValue(a,b,d);if(!a&&(null===a||void 0===a||isNaN(a)))return this.getDefault();for(b=0;b<this._intervals.length;b++){var c=this._intervals[b];d=c.interval;var c=c.result,e=this._isMaxInclusive?a<=d.max:a<d.max;if(a>=d.min&&e)return c}return this.getDefault()};d.prototype._needsNormalization=function(){var a=
this._normalizationInfo;return a&&(a.normalizationField||a.normalizationTotal||a.normalizationType)};d.prototype._getValueFromField=function(a){var c=a.attributes[this._field];if(!this._needsNormalization())return c;var e=this._normalizationInfo,d=e.normalizationField,g=e.normalizationTotal,e=e.normalizationType;a=!!d&&a.attributes[d];if(e)switch(e){case "field":return(a||void 0)&&c/a;case "log":return Math.log(c)*Math.LOG10E;case "percent-of-total":return c/g*100;default:b.error("Found unknown normalization type: "+
e)}else b.error("Normalization is required, but no type was set!")};return d}(d);a.IntervalMatcher=f;d=function(a){function b(b,c,d,g){var e=a.call(this)||this;e._resultsMap=new Map;d?e._getValue=h.createArcadeFunction(d,g):b&&b.length?"function"===typeof b[0]?(e._fields=null,e._getValue=b[0]):(e._fields=b,e._seperator=c||"",e._getValue=e._getValueFromFields.bind(e)):e._fields=null;return e}l(b,a);b.fromUVRenderer=function(a,c,d,g){var e=a.uniqueValueInfos,f=k.getVVFlags(a.visualVariables),h=a.fieldDelimiter,
l=a.valueExpression,m=[a.field];a.field2&&m.push(a.field2);a.field3&&m.push(a.field3);var n=a.backgroundFillSymbol;g=new b(m,h,l,g);for(h=0;h<e.length;h++)l=e[h],m=d.createTemplateGroup(l.symbol,n,c,f),g.add(l.value,m);a.defaultSymbol&&(a=d.createTemplateGroup(a.defaultSymbol,n,c,f),g.setDefault(a));return g};b.prototype.add=function(a,b){this._resultsMap.set(a.toString(),b)};b.prototype.size=function(){return a.prototype.size.call(this)+this._resultsMap.size};b.prototype.match=function(a,b,d){if(!this._getValue)return this.getDefault();
a=this._getValue(a,b,d);if(!a&&(null===a||void 0===a))return this.getDefault();a=a.toString();return this._resultsMap.has(a)?this._resultsMap.get(a):this.getDefault()};b.prototype._getValueFromFields=function(a){for(var b=[],e=0,d=this._fields;e<d.length;e++)b.push(a.attributes[d[e]]);return b.join(this._seperator)};return b}(d);a.MapMatcher=d})},"esri/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["require","exports","../enums","../visualVariablesUtils"],function(d,a,l,f){function h(a,
d){void 0===d&&(d=!1);var b=l.WGLVVFlag.SIZE_FIELD_STOPS|l.WGLVVFlag.SIZE_MINMAX_VALUE|l.WGLVVFlag.SIZE_SCALE_STOPS|l.WGLVVFlag.SIZE_UNIT_VALUE;a=(a&(l.WGLVVTarget.FIELD_TARGETS_OUTLINE|l.WGLVVTarget.MINMAX_TARGETS_OUTLINE|l.WGLVVTarget.SCALE_TARGETS_OUTLINE|l.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return d?b&a:b&~a}function k(a){var b=h(a,!1);return a&(l.WGLVVFlag.COLOR|l.WGLVVFlag.OPACITY|l.WGLVVFlag.ROTATION|b)}Object.defineProperty(a,"__esModule",{value:!0});a.getVVFlags=function(a){if(!a)return l.WGLVVFlag.NONE;
for(var b=0,d=0;d<a.length;d++){var e=a[d];if("size"===e.type){var c=f.getTypeOfSizeVisualVariable(e),b=b|c;"outline"===e.target&&(b|=c<<4)}else"color"===e.type?b|=l.WGLVVFlag.COLOR:"opacity"===e.type?b|=l.WGLVVFlag.OPACITY:"rotation"===e.type&&(b|=l.WGLVVFlag.ROTATION)}return b};a.getSizeFlagsMask=h;a.getMarkerVVFlags=k;a.getFillVVFlags=function(a){return a&(l.WGLVVFlag.COLOR|l.WGLVVFlag.OPACITY)};a.getLineVVFlags=function(a,d){if(d)return d=h(a,!0),a&d;d=h(a,!1);return a&(l.WGLVVFlag.COLOR|l.WGLVVFlag.OPACITY|
d)};a.getTextVVFlags=function(a){return k(a)};a.getLabelVVFlags=function(a){var b=h(a,!1);return a&b}})},"esri/views/2d/engine/webgl/mesh/factories/MaterialStore":function(){define(["require","exports","../../MaterialInfo","../../util/serializationUtils"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._materials=[];this._materialsIndex=new Map}a.prototype.insert=function(a){var b=this._materials.length;this._materials.push(a);return b};a.prototype._hashGlyph=
function(a,b,d){return"G-"+b+"-"+d+"-"+a.page};a.prototype._hashSprite=function(a,b,d){return a?"S-"+b+"-"+d+"-"+a.page+"-"+(a.sdf?1:0):"S-"+b+"-"+d+"--1}"};a.prototype.createSpriteMaterial=function(a,b,d){var g=this._hashSprite(a,b,d);if(this._materialsIndex.has(g))return this._materialsIndex.get(g);var e=this._materials.length;a=l.default.fromSprite(a,b,d);this._materials.push(a);this._materialsIndex.set(g,e);return e};a.prototype.createGlyphMaterial=function(a,b,d){var g=this._hashGlyph(a,b,d);
if(this._materialsIndex.has(g))return this._materialsIndex.get(g);var e=this._materials.length;a=l.default.fromGlyph(a,b,d);this._materials.push(a);this._materialsIndex.set(g,e);return e};a.prototype.get=function(a){return this._materials[a]};a.prototype.hydrateObjects=function(a){for(var b=0;b<a.length;b++)for(var d=0,f=a[b].displayRecords;d<f.length;d++){var e=f[d];e.materialInfo=this.get(e.materialIndex)}return a};a.prototype.serialize=function(a){f.serializeList(a,this._materials);return a};a.deserialize=
function(d){var b=new a;b._materials=f.deserializeList(d,l.default);return b};return a}();a.default=d})},"esri/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),function(d,a,l,f,h,k,b){Object.defineProperty(a,"__esModule",{value:!0});var g=function(){function a(a,b,e){this.unit=a;this.pageId=b;this.semantic=e}a.prototype.clone=function(){return new a(this.unit,
this.pageId,this.semantic)};a.prototype.serialize=function(a){a.push(this.unit);a.push(this.pageId);return a};a.deserialize=function(b){var c=b.readInt32();b=b.readInt32();return new a(c,b,"u_texture")};return a}();a.TexBindingInfo=g;var p=function(){function a(a,b){this.name=a;this.value=b}a.prototype.clone=function(){return new a(this.name,this.value)};a.prototype.serialize=function(a){a.push(this.value);return a};a.deserialize=function(b){b=b.readInt32();return new a("u_my_param",b)};return a}();
a.MaterialParam=p;d=function(){function a(){this.texBindingInfo=[];this.materialParams=[]}a.fromSprite=function(b,e,d){var c=new a,h=new k;h.geometryType=e;b?(h.sdf=b.sdf,h.pattern=!0,h.simplePattern=b.simplePattern,c.texBindingInfo.push(new g(1,b.page,"u_texture"))):(h.sdf=!1,h.pattern=!1,h.simplePattern=!1);0===d?h.vvOpacity=h.vvSizeMinMaxValue=h.vvSizeScaleStops=h.vvSizeFieldStops=h.vvSizeUnitValue=h.vvColor=h.vvRotation=!1:(h.vvOpacity=0!==(d&l.WGLVVFlag.OPACITY),h.vvSizeMinMaxValue=0!==(d&l.WGLVVFlag.SIZE_MINMAX_VALUE),
h.vvSizeScaleStops=0!==(d&l.WGLVVFlag.SIZE_SCALE_STOPS),h.vvSizeFieldStops=0!==(d&l.WGLVVFlag.SIZE_FIELD_STOPS),h.vvSizeUnitValue=0!==(d&l.WGLVVFlag.SIZE_UNIT_VALUE),h.vvColor=0!==(d&l.WGLVVFlag.COLOR),h.vvRotation=0!==(d&l.WGLVVFlag.ROTATION));h.visibility=!1;c.materialKey=f.getMaterialKey(h);c.materialKeyInfo=h;return c};a.fromGlyph=function(b,e,d){var c=new a,h=new k;h.geometryType=e;h.sdf=!0;h.pattern=!1;h.visibility=!1;h.simplePattern=!1;c.texBindingInfo.push(new g(2,b.page,"u_texture"));0===
d?h.vvOpacity=h.vvSizeMinMaxValue=h.vvSizeScaleStops=h.vvSizeFieldStops=h.vvSizeUnitValue=h.vvColor=h.vvRotation=!1:(h.vvOpacity=0!==(d&l.WGLVVFlag.OPACITY),h.vvSizeMinMaxValue=0!==(d&l.WGLVVFlag.SIZE_MINMAX_VALUE),h.vvSizeScaleStops=0!==(d&l.WGLVVFlag.SIZE_SCALE_STOPS),h.vvSizeFieldStops=0!==(d&l.WGLVVFlag.SIZE_FIELD_STOPS),h.vvSizeUnitValue=0!==(d&l.WGLVVFlag.SIZE_UNIT_VALUE),h.vvColor=0!==(d&l.WGLVVFlag.COLOR),h.vvRotation=0!==(d&l.WGLVVFlag.ROTATION));c.materialKey=f.getMaterialKey(h);c.materialKeyInfo=
h;return c};a.prototype.copy=function(a){this.materialParams=a.materialParams.map(function(a){return a.clone()});this.texBindingInfo=a.texBindingInfo.map(function(a){return a.clone()});a.materialKeyInfo&&(this.materialKeyInfo=new k,this.materialKeyInfo.copy(a.materialKeyInfo));this.materialKey=a.materialKey};a.prototype.serialize=function(a){a.push(this.materialKey);b.serializeList(a,this.texBindingInfo);b.serializeList(a,this.materialParams);return a};a.deserialize=function(c){var e=new a;e.materialKey=
c.readInt32();e.texBindingInfo=b.deserializeList(c,g);e.materialParams=b.deserializeList(c,p);e.materialKeyInfo=new k;h(e.materialKeyInfo,e.materialKey);return e};return a}();a.default=d})},"esri/views/2d/engine/webgl/MaterialInfoUtils":function(){define("require exports ./enums ./MaterialInfo ./MaterialKeyInfo ./util/Result".split(" "),function(d,a,l,f,h,k){function b(a){var b=[];b[0]=a.sdf?!0:!1;b[1]=a.vvSizeMinMaxValue?!0:!1;b[2]=a.vvSizeScaleStops?!0:!1;b[3]=a.vvSizeFieldStops?!0:!1;b[4]=a.vvSizeUnitValue?
!0:!1;b[5]=a.vvColor?!0:!1;b[6]=a.vvRotation?!0:!1;b[7]=a.vvOpacity?!0:!1;b[8]=a.visibility?!0:!1;b[9]=a.pattern?!0:!1;b[10]=a.simplePattern?!0:!1;return b.reduce(function(a,b,e){b&&(a|=1<<e+2);return a},0)}function g(a){if(a.geometryType===l.WGLGeometryType.UNKNOWN)return-1;var e=b(a)<<3;return a.geometryType+e}Object.defineProperty(a,"__esModule",{value:!0});a.createTextMaterialInfo=function(a,b,c){var e=new f.default,d=new h;d.geometryType=c;d.sdf=!0;d.pattern=!1;d.visibility=!1;d.simplePattern=
!1;e.texBindingInfo.push(new f.TexBindingInfo(2,a.page,"u_texture"));0===b?d.vvOpacity=d.vvSizeMinMaxValue=d.vvSizeScaleStops=d.vvSizeFieldStops=d.vvSizeUnitValue=d.vvColor=d.vvRotation=!1:(d.vvOpacity=0!==(b&l.WGLVVFlag.OPACITY),d.vvSizeMinMaxValue=0!==(b&l.WGLVVFlag.SIZE_MINMAX_VALUE),d.vvSizeScaleStops=0!==(b&l.WGLVVFlag.SIZE_SCALE_STOPS),d.vvSizeFieldStops=0!==(b&l.WGLVVFlag.SIZE_FIELD_STOPS),d.vvSizeUnitValue=0!==(b&l.WGLVVFlag.SIZE_UNIT_VALUE),d.vvColor=0!==(b&l.WGLVVFlag.COLOR),d.vvRotation=
0!==(b&l.WGLVVFlag.ROTATION));e.materialKey=g(d);e.materialKeyInfo=d;return e};a.createMaterialInfo=function(a,b,c){var e=new f.default,d=new h;d.geometryType=b;a&&k.ok(a.spriteMosaicItem)?(a=a.spriteMosaicItem,d.sdf=a.sdf,d.pattern=!0,e.texBindingInfo.push(new f.TexBindingInfo(1,a.page,"u_texture"))):(d.sdf=!1,d.pattern=!1);0===c?d.vvOpacity=d.vvSizeMinMaxValue=d.vvSizeScaleStops=d.vvSizeFieldStops=d.vvSizeUnitValue=d.vvColor=d.vvRotation=!1:(d.vvOpacity=0!==(c&l.WGLVVFlag.OPACITY),d.vvSizeMinMaxValue=
0!==(c&l.WGLVVFlag.SIZE_MINMAX_VALUE),d.vvSizeScaleStops=0!==(c&l.WGLVVFlag.SIZE_SCALE_STOPS),d.vvSizeFieldStops=0!==(c&l.WGLVVFlag.SIZE_FIELD_STOPS),d.vvSizeUnitValue=0!==(c&l.WGLVVFlag.SIZE_UNIT_VALUE),d.vvColor=0!==(c&l.WGLVVFlag.COLOR),d.vvRotation=0!==(c&l.WGLVVFlag.ROTATION));d.visibility=!1;e.materialKey=g(d);e.materialKeyInfo=d;return e};a.getMaterialKey=g;a.getMaterialVariations=function(a){var b=a&7;a>>=3;return{geometryType:b,programOptions:{id:0!==(a&1),highlight:0!==(a&2),isSDF:0!==(a&
4),vvSizeMinMaxValue:0!==(a&8),vvSizeScaleStops:0!==(a&16),vvSizeFieldStops:0!==(a&32),vvSizeUnitValue:0!==(a&64),vvColor:0!==(a&128),vvRotation:0!==(a&256),vvOpacity:0!==(a&512),visibility:0!==(a&1024),pattern:0!==(a&2048),simplePattern:0!==(a&4096)}}}})},"esri/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(d,a){return function(){function a(){this.simplePattern=this.pattern=this.visibility=this.vvOpacity=this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=
this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(a){this.geometryType=a.geometryType;this.sdf=a.sdf;this.vvSizeMinMaxValue=a.vvSizeMinMaxValue;this.vvSizeScaleStops=a.vvSizeScaleStops;this.vvSizeFieldStops=a.vvSizeFieldStops;this.vvSizeUnitValue=a.vvSizeUnitValue;this.vvColor=a.vvColor;this.vvRotation=a.vvRotation;this.vvOpacity=a.vvOpacity;this.visibility=a.visibility;this.pattern=a.pattern;this.simplePattern=a.simplePattern};a.prototype.hasVV=function(){void 0===
this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=function(){return this.vvOpacity};a.prototype.isMapAligned=
function(){return this.vvRotation};return a}()})},"esri/views/2d/engine/webgl/util/Result":function(){define(["require","exports","../../../../../core/Error"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.ok=function(a,d){return a&&"name"in a?(d&&d.error(new l(a.name,a.message,a.details)),!1):!0}})},"esri/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(d,a){return function(a,d){a.geometryType=d&7;d>>=3;a.sdf=0!==
(d&4);a.vvSizeMinMaxValue=0!==(d&8);a.vvSizeScaleStops=0!==(d&16);a.vvSizeFieldStops=0!==(d&32);a.vvSizeUnitValue=0!==(d&64);a.vvColor=0!==(d&128);a.vvRotation=0!==(d&256);a.vvOpacity=0!==(d&512);a.visibility=0!==(d&1024);a.pattern=0!==(d&2048);a.simplePattern=0!==(d&4096);return a}})},"esri/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.serializeList=function(a,d){if(null===d)a.push(0);else{a.push(d.length);
for(var f=0;f<d.length;f++)d[f].serialize(a);return a}};a.deserializeList=function(a,d,h){for(var f=a.readInt32(),f=Array(f),b=0;b<f.length;b++)f[b]=d.deserialize(a,h);return f}})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../geometry/support/jsonUtils ../../../../../../symbols/SimpleLineSymbol ../../definitions ../../enums ../../WGLDisplayObject ../../collisions/LayerCollisionInfo ../MeshData ../VertexVector ./VVFactory ../templates/WGLLabelTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../../util/vvFlagUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u){Object.defineProperty(a,"__esModule",{value:!0});var z=h.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),D={esriGeometryPoint:"above-right above-center above-left center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};d=function(){function a(a,b,d,e,h,k,l,m,n,p){var t=this;this._labelsDebugVVEval=
this._labelsDebugTemplate=null;this._materials=l;this._geometryType=a;this._idField=b;this._pixelRatio=h;this._vvFlags=u.getVVFlags(d);this._vvFactory=new q.default(d,e);this._vvBuf=new ArrayBuffer(16);this._vvBufU32=new Uint32Array(this._vvBuf);this._vvBufF32=new Float32Array(this._vvBuf);this._templateStore=m;if(n)if(g.DEBUG_LABELS&&(this._labelsDebugVVEval=d&&c.createLabelVVEvaluator(d)),this._validateLabelingInfo(n)){var w=u.getLabelVVFlags(this._vvFlags);this._labelTemplates=n.map(function(a){return y.default.fromLabelClass(t._materials,
w,a,h,p)})}else z.error(new f("mapview-labeling:unsupported-geometry","LabelingInfo failed validation - unable to create labels for layer."))}Object.defineProperty(a.prototype,"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"templates",{get:function(){return this._templateStore},enumerable:!0,configurable:!0});a.prototype.createMeshData=function(a){var b=Array(5),c=!!u.getMarkerVVFlags(this._vvFlags),d=!!u.getFillVVFlags(this._vvFlags),
e=!!u.getLineVVFlags(this._vvFlags,"esriGeometryPolyline"!==this._geometryType),f=!!u.getTextVVFlags(this._vvFlags),h="esriGeometryPolyline"===this._geometryType?g.HEURISTIC_GLYPHS_PER_LINE:g.HEURISTIC_GLYPHS_PER_FEATURE;b[p.WGLGeometryType.MARKER]=new m.VertexVectors(p.WGLGeometryType.MARKER,c,a);b[p.WGLGeometryType.FILL]=new m.VertexVectors(p.WGLGeometryType.FILL,d,a);b[p.WGLGeometryType.LINE]=new m.VertexVectors(p.WGLGeometryType.LINE,e,a);b[p.WGLGeometryType.TEXT]=new m.VertexVectors(p.WGLGeometryType.TEXT,
f,a);b[p.WGLGeometryType.LABEL]=new m.VertexVectors(p.WGLGeometryType.LABEL,!1,this._labelTemplates&&0<this._labelTemplates.length?h:0);return new n.default([],b,this._materials)};a.prototype.analyze=function(a,b,c,d){for(var e=0;e<a.length;e++){var g=a[e],f=-1;null!=g.symbol?f=this._templateStore.createTemplateGroup(g.symbol,null,this._materials,0):b&&(f=b.match(g,c,d));g.groupId=f}return this._templateStore.finalize().then(function(){return a})};a.prototype.write=function(a,b,c,d,g,f,h){var l=this._templateStore.getTemplateGroup(b.groupId),
m=b.attributes[this._idField],n=new e(m),p=!!f&&!!this._labelTemplates&&f.has(m);if(l&&(b.geometry||b.centroid)){this._vvFactory.computeVV(this._vvBufF32,b,c,d);d=n.displayRecords;c=b.insertAfter;void 0!==c&&(n.insertAfter=c);(c=this._geometryType)||(c=null!=b.centroid?"esriGeometryPolygon":k.getJsonType(b.geometry));for(var q=0;q<l.length;q++){var t=l[q],u=a.get(t.geometryType);t.writeMesh(d,u,c,m,b,this._pixelRatio,this._vvBufU32)}p&&(l=this._getLabelReference(l),f=f.get(m),this._writeLabelMesh(n,
a,m,b,h,f,l,g,c));a.pushDisplayObject(n)}};a.prototype._hasBadLabelClass=function(a,b){var c=a.labelPlacement,d=D[b];if(!d)return z.error(new f("mapview-labeling:unsupported-geometry-type","Unable to create labels for WebGL Feature Layer, "+b+" is not supported")),!0;d.some(function(a){return a===c})||(d=d[0],c&&z.warn("Found invalid label placement type "+c+" for "+b+". Defaulting to "+d),a.labelPlacement=d);return!1};a.prototype._validateLabelingInfo=function(a){var b=this;return!a.some(function(a){return b._hasBadLabelClass(a,
b._geometryType)})};a.prototype._getLabelReference=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c instanceof t.default)return c}return null};a.prototype._writeLabelMesh=function(a,b,c,d,e,f,h,k,l){for(var m=a.displayRecords,n=[],p=this._pixelRatio,q=this._vvBufU32,t=0;t<f.length;t++){var u=f[t],G=u.text,w=u.rtl,u=this._labelTemplates[u.id],A=b.get(u.geometryType),F=e.get(u.symbolId).glyphMosaicItems;u.bindReferenceTemplate(h);u.bindTextInfo(F,G,w);u.writeMesh(m,A,l,c,d,p,q,k,n)}a.metrics=
n;g.DEBUG_LABELS&&this._debugLabels(a,b)};a.prototype._debugLabels=function(a,b){var c=a.displayRecords,d=a.id,e=0;for(a=a.metrics;e<a.length;e++){var g=a[e],f=g.boxes?g.boxes.concat([g.bounds]):[g.bounds];this._labelsDebugVVEval&&g.computeOffset(this._labelsDebugVVEval);for(var h=0;h<f.length;h++){var k=f[h],k={geometry:{paths:[[[g.anchor[0]+g.offsetX+k.center[0]-k.width/2,g.anchor[1]+g.offsetY+k.center[1]+k.height/2],[0,-k.height],[k.width,0],[0,k.height],[-k.width,0]]]},attributes:{}},l=this._getLabelDebugTemplate(),
m=b.get(l.geometryType);l.writeMesh(c,m,"esriGeometryPolyline",d,k,this._pixelRatio,null)}}};a.prototype._getLabelDebugTemplate=function(){this._labelsDebugTemplate||(this._labelsDebugTemplate=this._createLabelsDebugTemplate());return this._labelsDebugTemplate};a.prototype._createLabelsDebugTemplate=function(){var a=new b({style:"solid",width:1,color:[255,0,0,1]});return x.default.fromSimpleLine(this._materials,0,a,null,this._pixelRatio)};return a}();a.default=d})},"esri/views/2d/engine/webgl/WGLDisplayObject":function(){define(["require",
"exports","./WGLDisplayRecord","./collisions/Metric","./util/serializationUtils"],function(d,a,l,f,h){return function(){function a(a){this.insertAfter=null;this.id=a;this.displayRecords=[];this.metrics=[]}a.prototype.copy=function(){var b=new a(this.id);b.set(this);return b};a.prototype.set=function(a){this.id=a.id;this.displayRecords=a.displayRecords;this.metrics=a.metrics;this.insertAfter=a.insertAfter};a.prototype.serialize=function(a){a.push(this.id);h.serializeList(a,this.metrics);h.serializeList(a,
this.displayRecords);return a};a.deserialize=function(b,d){var g=d.store,e=b.readInt32();d=new a(e);g={id:e,store:g};e=h.deserializeList(b,f.default);e.length&&(d.metrics=e);d.displayRecords=h.deserializeList(b,l,g);return d};return a}()})},"esri/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require","exports","../../../../core/Logger","./MeshData","./Utils"],function(d,a,l,f,h){var k=l.getLogger("esri/views/2d/engine/webgl/WGLDisplayRecord");return function(){function a(a,b,d,c,f){void 0===
c&&(c=0);void 0===f&&(f=0);this.id=a;this.geometryType=b;this._materialInfo=d;this.minZoom=c;this.maxZoom=f;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(a.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"materialInfo",{get:function(){return"number"===typeof this._materialInfo?(k.warn("Tried to read materialInfo, but found an index! Was materialInfo deserialized correctly?"),
null):this._materialInfo},set:function(a){this._materialInfo=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"materialIndex",{get:function(){return this._materialInfo},enumerable:!0,configurable:!0});a.prototype.copy=function(){var b=new a(this.id,this.geometryType,this._materialInfo);b.vertexFrom=this.vertexFrom;b.vertexCount=this.vertexCount;b.indexFrom=this.indexFrom;b.indexCount=this.indexCount;b.zOrder=this.zOrder;b.symbolLevel=this.symbolLevel;b.meshData=this.meshData;b.minZoom=
this.minZoom;b.maxZoom=this.maxZoom;return b};a.prototype.setMeshDataFromBuffers=function(a,b,d){var c=new f,e;for(e in b){for(var g=b[e].stride,k=b[e].data,l=[],p=h.strideToPackingFactor(g),t=0;t<g*a.vertexCount/p;++t)l[t]=k[t+g*a.vertexFrom/p];c.vertexData.set(e,l)}for(t=c.indexData.length=0;t<a.indexCount;++t)c.indexData[t]=d[t+a.indexFrom]-a.vertexFrom;c.vertexCount=a.vertexCount;this.meshData=c};a.prototype.readMeshDataFromBuffers=function(a,b){this.meshData?this.meshData.clear():this.meshData=
new f;for(var d in a){for(var c=a[d].stride,g=a[d].data,k=[],l=h.strideToPackingFactor(c),p=0;p<c*this.vertexCount/l;++p)k[p]=g[p+c*this.vertexFrom/l];this.meshData.vertexData.set(d,k)}for(p=this.meshData.indexData.length=0;p<this.indexCount;++p)this.meshData.indexData[p]=b[p+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};a.prototype.writeMeshDataToBuffers=function(a,b,d,c){for(var e in b)for(var g=b[e].stride,f=this.meshData.vertexData.get(e),k=b[e].data,l=h.strideToPackingFactor(g),
p=0;p<g*this.meshData.vertexCount/l;++p)k[p+g*a/l]=f[p];for(p=0;p<this.meshData.indexData.length;++p)c[p+d]=this.meshData.indexData[p]+a;this.vertexFrom=a;this.vertexCount=this.meshData.vertexCount;this.indexFrom=d;this.indexCount=this.meshData.indexData.length};a.writeAllMeshDataToBuffers=function(a,b,d){for(var c=0,e=0,g=0;g<a.length;g++){var f=a[g];f.writeMeshDataToBuffers(c,b,e,d);c+=f.vertexCount;e+=f.indexCount}};a.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|
(this.zOrder&127)<<4|this.geometryType&7};a.prototype.serialize=function(a){a.push(this.geometryType);a.push(this._materialInfo);a.push(this.symbolLevel);a.push(this.zOrder);a.push(this.vertexFrom);a.push(this.vertexCount);a.push(this.indexFrom);a.push(this.indexCount);a.push(this.minZoom);a.push(this.maxZoom);return a};a.deserialize=function(b,d){var e=b.readInt32(),c=d.store&&d.store.get(b.readInt32())||b.readInt32();d=new a(d.id,e,c);d.symbolLevel=b.readInt32();d.zOrder=b.readInt32();d.vertexFrom=
b.readInt32();d.vertexCount=b.readInt32();d.indexFrom=b.readInt32();d.indexCount=b.readInt32();d.minZoom=b.readInt32();d.maxZoom=b.readInt32();return d};return a}()})},"esri/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(d,a){return function(){function a(){this.vertexData=new Map;this.vertexCount=0;this.indexData=[]}a.prototype.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};a.prototype.update=function(a,d,k){for(var b in a)this.vertexData.set(b,
a[b]);for(b in this.vertexData)null===a[b]&&this.vertexData.delete(b);this.vertexCount=d;this.indexData=k};return a}()})},"esri/views/2d/engine/webgl/collisions/Metric":function(){define("require exports ../../../../../core/Logger ../../../../../core/libs/gl-matrix-2/gl-matrix ../definitions ./BoundingBox ../util/serializationUtils".split(" "),function(d,a,l,f,h,k,b){Object.defineProperty(a,"__esModule",{value:!0});var g=l.getLogger("esri/views/2d/engine/webgl/collisions/Metric");d=function(){function a(a,
b,d,g,h){this.id=a;this.range=b;this.boxes=null;this.minZoom=-1;this.offsetY=this.offsetX=this.directionY=this.directionX=this.size=this.vv=0;this.anchor=f.vec2f32.fromValues(d,g);this.baseZoom=h}a.prototype.add=function(a){this.bounds?(this.boxes?this.boxes.push(a):(this.boxes=[this.bounds,a],this.bounds=this.bounds.clone()),this.bounds.extend(a)):this.bounds=a};a.prototype.computeIndex=function(){var a=this.bounds,b=this.anchor[0],d=this.anchor[1],g=Math.floor(b/h.COLLISION_BUCKET_SIZE),f=Math.floor(d/
h.COLLISION_BUCKET_SIZE),k=0;if(g>h.COLLISION_TILE_BOX_SIZE||f>h.COLLISION_TILE_BOX_SIZE)f=g=h.COLLISION_TILE_BOX_SIZE,k=1;if(0>g||0>f)f=g=0,k=1;a=2*Math.max(a.halfWidth+Math.abs(a.center[0]),a.halfHeight+Math.abs(a.center[1]));b%=h.COLLISION_BUCKET_SIZE;d%=h.COLLISION_BUCKET_SIZE;this.xBucket=g;this.yBucket=f;this.xOverflow=Math.ceil(Math.abs((a-b)/h.COLLISION_BUCKET_SIZE))+k;this.yOverflow=Math.ceil(Math.abs((a-d)/h.COLLISION_BUCKET_SIZE))+k};a.prototype.findCollisionDelta=function(a){var b=this.bounds.findCollisionDelta(a.bounds),
d=this.boxes&&this.boxes.length,e=a.boxes&&a.boxes.length;return Math.abs(b)>h.COLLISION_MAX_ZOOM_DELTA||!d&&!e?b:d&&e?this._boxesToBoxes(a):d?this._boxesToBox(a):this._boxToBoxes(a)};a.prototype.computeOffset=function(a){a||g.error("mapview-labeling","Unable to compute label offset. Expected an evaluator function but found "+a);a=a(this.vv);a=isNaN(this.vv)||isNaN(a)?this.size:a;this.offsetX=this.directionX*(a/2+h.COLLISION_PLACEMENT_PADDING);this.offsetY=this.directionY*(a/2+h.COLLISION_PLACEMENT_PADDING)};
a.prototype.setVV=function(a,b,d,g){this.vv=a;this.size=b;this.directionX=d;this.directionY=g};a.prototype._boxToBoxes=function(a){var b=-Infinity,d=0;for(a=a.boxes;d<a.length;d++)var e=this.bounds.findCollisionDelta(a[d]),b=Math.max(e,b);return b};a.prototype._boxesToBox=function(a){for(var b=this.boxes[0].findCollisionDelta(a.bounds),d=1;d<this.boxes.length;d++)var e=this.boxes[d].findCollisionDelta(a.bounds),b=Math.max(e,b);return b};a.prototype._boxesToBoxes=function(a){for(var b=-Infinity,d=
0;d<this.boxes.length;d++)for(var e=this.boxes[d],g=0,f=a.boxes;g<f.length;g++)var h=e.findCollisionDelta(f[g]),b=Math.max(h,b);return b};a.prototype.serialize=function(a){a.push(this.id);this.bounds.serialize(a);a.push(this.range.from);a.push(this.range.count);a.push(this.anchor[0]);a.push(this.anchor[1]);a.push(this.baseZoom);a.writeF32(this.vv);a.push(this.size);a.push(this.directionX);a.push(this.directionY);a.push(this.offsetX);a.push(this.offsetY);b.serializeList(a,this.boxes);return a};a.deserialize=
function(d){var c=d.readInt32(),e=k.default.deserialize(d),g=d.readInt32(),f=d.readInt32(),h={from:g,count:f},l=d.readInt32(),p=d.readInt32(),u=d.readInt32(),g=d.readF32(),f=d.readInt32(),z=d.readInt32(),D=d.readInt32(),B=d.readInt32(),w=d.readInt32();d=b.deserializeList(d,k.default);c=new a(c,h,l,p,u);c.bounds=e;c.boxes=d;c.computeIndex();c.setVV(g,f,z,D);c.offsetX=B;c.offsetY=w;return c};return a}();a.default=d})},"esri/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["require",
"exports","../../../../../core/libs/gl-matrix-2/gl-matrix","../../../../3d/support/mathUtils"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,b,d,f){this.center=l.vec2f32.fromValues(a,b);this.centerT=l.vec2f32.create();this.halfWidth=d/2;this.halfHeight=f/2;this.width=d;this.height=f}Object.defineProperty(a.prototype,"x",{get:function(){return this.center[0]},set:function(a){this.center[0]=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"y",{get:function(){return this.center[1]},set:function(a){this.center[1]=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"blX",{get:function(){return this.center[0]-this.halfWidth},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"blY",{get:function(){return this.center[1]-this.halfHeight},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"trX",{get:function(){return this.center[0]+this.halfWidth},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"trY",{get:function(){return this.center[1]+this.halfHeight},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)};a.prototype.serialize=function(a){a.writeF32(this.center[0]);a.writeF32(this.center[1]);a.push(this.width);a.push(this.height);return a};a.prototype.findCollisionDelta=function(a){return f.log2(Math.min((a.halfWidth+this.halfWidth)/Math.abs(a.centerT[0]-this.centerT[0]),(a.halfHeight+this.halfHeight)/Math.abs(a.centerT[1]-this.centerT[1])))};
a.prototype.extend=function(a){var b=Math.min(this.blX,a.blX),d=Math.min(this.blY,a.blY),f=Math.max(this.trY,a.trY);this.width=Math.max(this.trX,a.trX)-b;this.height=f-d;this.halfWidth=this.width/2;this.halfHeight=this.height/2;this.x=b+this.halfWidth;this.y=d+this.halfHeight};a.deserialize=function(d){var b=d.readF32(),g=d.readF32(),f=d.readInt32();d=d.readInt32();return new a(b,g,f,d)};return a}();a.default=d})},"esri/views/2d/engine/webgl/collisions/LayerCollisionInfo":function(){define(["require",
"exports","../../../../../core/Logger","../../../../../core/screenUtils","../../../../3d/support/mathUtils"],function(d,a,l,f,h){function k(a){return function(b){return f.pt2px(a.getSize(b))}}function b(a){if(!a)return null;for(var b=0;b<a.length;b++){var c=a[b];if("size"===c.type)return k(c)}return null}Object.defineProperty(a,"__esModule",{value:!0});var g=function(a,b){return a.order-b.order},p=function(a,b){return a.index-b.index},e=l.getLogger("esri/views/2d/engine/webgl/collisions/CollisionEngine");
a.createLabelVVEvaluator=b;d=function(){function a(a,c,d,e){var f=this;this._vvHandle=null;var g=a.geometryType,k=a.labelingInfo,l=a.renderer;this.vvEval=b("visualVariables"in l&&l.visualVariables);this._vvHandle=a.watch("visualVariables",function(a){f.vvEval=b(a)});a=k.map(function(a){var b=!!a.maxScale,c=!!a.minScale&&e.scaleToZoom(a.minScale)||0;a=b&&e.scaleToZoom(a.maxScale)||255;return{minZoom:h.clamp(Math.floor(10*c),0,255),maxZoom:h.clamp(Math.floor(10*a),0,255)}});this.geometryType=g;this.index=
c;this.order=d;this.zoomRanges=a}a.prototype.hasVV=function(){return!!this.vvEval};a.prototype.allOrNothing=function(){return"polyline"!==this.geometryType};a.prototype.destroy=function(){this._vvHandle.remove()};a.create=function(b,c,d,e){d=d.sort(g);for(var f=!1,h=-1,k=0;k<d.length;k++){var l=d[k];!f&&l.order>c&&(h=l.index,f=!0);f&&l.index++}f||(h=d.length);return new a(b,h,c,e)};a.delete=function(a,b){for(var c=b.sort(p),d=a+1;d<c.length;d++)b[d].index--;b[a].destroy();b.splice(a,1)};a.find=function(a,
b){for(var c=0;c<b.length;c++){var d=b[c];if(d.index===a)return d}e.error("Tried to get a LayerCollisionInfo for an index that doesn't exist!");return null};return a}();a.default=d})},"esri/views/2d/engine/webgl/mesh/MeshData":function(){define(["require","exports","../util/serializationUtils","../util/Writer"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,b,d){this.displayObjects=a;this.vertexVectorsMap=b;this._materials=d}Object.defineProperty(a.prototype,
"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vertexBuffersMap",{get:function(){if(!this._vertexBuffersMap){this._vertexBuffersMap={};for(var a=0;a<this.vertexVectorsMap.length;a++)this._vertexBuffersMap[a]=this.vertexVectorsMap[a].intoBuffers();this.vertexVectorsMap=null}return this._vertexBuffersMap},enumerable:!0,configurable:!0});a.prototype.get=function(a){return this.vertexVectorsMap[a]};a.prototype.pushDisplayObject=function(a){this.displayObjects.push(a)};
a.prototype.encode=function(a,b){var d=l.serializeList(new f.default(Uint32Array,this._guessSize()),this.displayObjects).buffer(),h=this._materials.serialize(new f.default(Uint32Array)).buffer(),e={};b.push(d);b.push(h);for(var c=0;c<this.vertexVectorsMap.length;c++){var k=this.vertexVectorsMap[c];e[c]={};k.transfer(e[c],b)}a.displayObjects=d;a.materialStore=h;a.vertexBuffersMap=e;this.destroy()};a.prototype.destroy=function(){this.displayObjects=this.vertexVectorsMap=null};a.prototype._guessSize=
function(){for(var a=this.displayObjects,b=Math.min(a.length,4),d=0,f=0;f<b;f++)d=Math.max(d,a[f].displayRecords.length);return 2*(12*a.length+a.length*d*40)};return a}();a.default=d})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,d){this._pos=0;d=d?this._roundToNearest(d,a.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(d);this._buffer=new a(this._array);this._ctor=a}Object.defineProperty(a.prototype,
"length",{get:function(){return this._pos},enumerable:!0,configurable:!0});a.prototype._roundToNearest=function(a,d){a=Math.round(a);return a+(d-a%d)};a.prototype._ensureSize=function(a){if(this._pos+a>=this._buffer.length){a=this._roundToNearest(1.5*(this._array.byteLength+a*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT);a=new ArrayBuffer(a);var d=new this._ctor(a);d.set(this._buffer,0);this._array=a;this._buffer=d}};a.prototype.writeF32=function(a){this._ensureSize(1);var d=this._pos;
(new Float32Array(this._array,4*this._pos,1))[0]=a;this._pos++;return d};a.prototype.push=function(a){this._ensureSize(1);var d=this._pos;this._buffer[this._pos++]=a;return d};a.prototype.writeRegion=function(a){this._ensureSize(a.length);var d=this._pos;this._buffer.set(a,this._pos);this._pos+=a.length;return d};a.prototype.buffer=function(){var a=this._array.slice(0,4*this._pos);this.destroy();return a};a.prototype.destroy=function(){this._buffer=this._array=null};return a}();a.default=d})},"esri/views/2d/engine/webgl/mesh/VertexVector":function(){define(["require",
"exports","../Utils","./VertexBuffer","../util/Writer"],function(d,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});var k=function(){function a(a,b){this.data=a;this.stride=b;this.vertexCount=0}a.prototype.transfer=function(a,b){var d=this.data.buffer();a.vertexCount=this.vertexCount;a.data=d;a.stride=this.stride;b.push(d)};return a}();a.default=k;d=function(){function a(a,b,d){this.geometryType=a;this.indexVector=new h.default(Uint32Array,d);this.namedVectors={};a=l.getStrides(a,b);for(var c in a){b=
a[c];var e=void 0;switch(b%4){case 0:case 2:e=new h.default(Uint32Array,b/4*d);break;case 1:case 3:e=new h.default(Uint8Array,b*d)}this.namedVectors[c]=new k(e,b)}}a.prototype.get=function(a){return this.namedVectors[a].data};a.prototype.transfer=function(a,b){var d=this.indexVector.buffer(),c={};b.push(d);for(var f in this.namedVectors){var g=this.namedVectors[f];c[f]={};g.transfer(c[f],b)}a.geometryType=this.geometryType;a.indexBuffer=d;a.namedBuffers=c;this.destroy()};a.prototype.intoBuffers=function(){var a=
f.VertexBuffers.fromVertexVectors(this);this.destroy();return a};a.prototype.destroy=function(){this.namedVectors=this.indexVector=null};return a}();a.VertexVectors=d})},"esri/views/2d/engine/webgl/mesh/VertexBuffer":function(){define(["require","exports","../Utils"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});var f=function(){function a(a,b,d){this.data=a;this.stride=b;this.vertexCount=d}a.decode=function(d){var b=l.allocateTypedArrayBufferwithData(d.data,d.stride);return new a(b,
d.stride,d.vertexCount)};a.fromVertexVector=function(d){var b=l.allocateTypedArrayBufferwithData(d.data.buffer(),d.stride);return new a(b,d.stride,d.vertexCount)};return a}();a.default=f;d=function(){function a(a,b,d){this.geometryType=a;this.indexBuffer=new Uint32Array(b);this.namedBuffers=d}a.decode=function(d){var b=d.geometryType,g=d.indexBuffer,h={},e;for(e in d.namedBuffers)h[e]=f.decode(d.namedBuffers[e]);return new a(b,g,h)};a.fromVertexVectors=function(d){var b=d.geometryType,g=d.indexVector.buffer(),
h={},e;for(e in d.namedVectors)h[e]=f.fromVertexVector(d.namedVectors[e]);return new a(b,g,h)};return a}();a.VertexBuffers=d})},"esri/views/2d/engine/webgl/mesh/factories/VVFactory":function(){define("require exports ../../../../../../core/Error ../../../../../../core/Logger ../../enums ../../Utils ../../visualVariablesUtils".split(" "),function(d,a,l,f,h,k,b){Object.defineProperty(a,"__esModule",{value:!0});var g=f.getLogger("esri.views.2d.engine.webgl.mesh.VVFactory"),p;(function(a){a[a.NONE=0]=
"NONE";a[a.MISSING_DATA=1]="MISSING_DATA"})(p=a.VVError||(a.VVError={}));var e=function(){function a(){this._vvMap=new Map}a.prototype.set=function(a,b){this._vvMap.set(a,b)};a.prototype.getValue=function(a,b,c,d){return this._vvMap.has(a)?this._vvMap.get(a)(b,c,d):0};return a}();d=function(){function a(a,b){this._createVVFunctionMap(a,b)}a.prototype.computeVV=function(a,b,c,d){if(!this._vvMap)return p.NONE;var e=this._vvMap.getValue(h.VVType.SIZE,b,c,d),f=this._vvMap.getValue(h.VVType.COLOR,b,c,
d),g=this._vvMap.getValue(h.VVType.OPACITY,b,c,d);b=this._vvMap.getValue(h.VVType.ROTATION,b,c,d);a[h.VVType.SIZE]=this._isErrorVV(e)?1E-30:e;a[h.VVType.COLOR]=this._isErrorVV(f)?1E-30:f;a[h.VVType.OPACITY]=this._isErrorVV(g)?1E-30:g;a[h.VVType.ROTATION]=this._isErrorVV(b)?1E-30:b;return p.NONE};a.prototype._isErrorVV=function(a){return null===a||isNaN(a)||Infinity===a};a.prototype._createVVFunctionMap=function(a,b){if(a&&a.length)for(var c=0;c<a.length;c++){var d=a[c],f=k.getVVType(d.type);if(d=
this._createGetValueFunction(d,b))this._vvMap||(this._vvMap=new e),this._vvMap.set(f,d)}};a.prototype._createGetValueFunction=function(a,c){if(k.getVVType(a.type)===h.VVType.SIZE){var d=b.getTypeOfSizeVisualVariable(a);return d===h.WGLVVFlag.SIZE_SCALE_STOPS?null:this._createNormalizedFunction(a,c,d===h.WGLVVFlag.SIZE_UNIT_VALUE&&function(c){return b.getVisualVariableSizeValueRepresentationRatio(c,a.valueRepresentation)})}return this._createNormalizedFunction(a,c)};a.prototype._createNormalizedFunction=
function(a,b,c){var d=a.field;if(d){if("string"===typeof d){var e=a.normalizationField;return e?function(a){if(a.attributes[d]&&a.attributes[e])return a=a.attributes[d]/a.attributes[e],c?c(a):a}:c?function(a){return c(a.attributes[d])}:function(a){return a.attributes[d]}}if("function"===typeof d)return g.error(new l("mapview-rendering:unsupported-feature","Function field types are not currently supported. Please use a valueExpression instead")),function(a){};g.error(new l("mapview-rendering:invalid-type",
"The field for a vv must be a string or a number, but got "+typeof d));return function(a){}}if(a.valueExpression)return k.createArcadeFunction(a.valueExpression,b,c);g.error("Unable to create a normalized function for visual variable: "+a);return function(a){}};return a}();a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/libs/gl-matrix-2/gl-matrix ../../definitions ../../enums ../../number ../../TextShaping ../../Utils ../../collisions/Metric ./GlyphGroup ./util ./WGLTextTemplate ../../util/vvFlagUtils ../../../../../3d/support/mathUtils ../../../../../vectorTiles/GeometryUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u){function z(a){switch(a){case "above-left":return[-1,-1];case "above-center":case "above-along":return[0,-1];case "above-right":return[1,-1];case "center-left":return[-1,0];case "center-center":case "center-along":return[0,0];case "center-right":return[1,0];case "below-left":return[-1,1];case "below-center":case "below-along":return[0,1];case "below-right":return[1,1];case "always-horizontal":return[0,0];default:A("Found invalid placement type "+a)}}Object.defineProperty(a,
"__esModule",{value:!0});var D=h.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),B=p.i8888to32(255,255,255,255),w=k.vec2f32.create(),C=k.mat2df32.create(),E={xOffset:0,yOffset:0,width:0,height:0},A=function(a,b){void 0===b&&(b="mapview-labeling");return D.error(new f(b,a))};d=function(a){function d(b,c,d,e,f,h){b=a.call(this,b,c,d)||this;b.geometryType=g.WGLGeometryType.LABEL;b._refTemplate=E;a:switch(e){case "above-along":case "below-along":case "center-along":c=1;break a;default:c=0}var k=
z(e);e=k[0];k=k[1];b._justify=(-1*e+1)/2;b._xAlignD=e;b._yAlignD=k;b._xPlacementD=e;b._yPlacementD=k;b._minZoom=f;b._maxZoom=h;b.vvFlags|=c*g.WGLVVFlag.ROTATION;d=d.font.decoration.toLowerCase();"underline"===d?b._decorationTop=6:"line-through"===d&&(b._decorationTop=-5);return b}l(d,a);d.fromLabelClass=function(a,b,c,e,f){e=c.symbol;var g;g=!!c.minScale&&f.scaleToZoom(c.minScale)||0;g=t.clamp(g,0,25.5);f=!!c.maxScale&&f.scaleToZoom(c.maxScale)||255;f=t.clamp(f,0,25.5);return new d(a,b,e,c.labelPlacement,
g,f)};d.prototype.bindTextInfo=function(a,b,c){a=this._computeShaping(a,this._justify).getShaping(b,c);isNaN(this._decorationTop)||e.addDecoration(a,this._decorationTop);this._shapedGlyphs=a;this._shapedBox=e.getBox(a)};d.prototype._computeShaping=function(a,c){return new e([a],b.TEXT_MAX_WIDTH,b.TEXT_LINE_HEIGHT,b.TEXT_SPACING,[0,0],.5,.5,c)};Object.defineProperty(d.prototype,"bounds",{get:function(){return this._bounds},enumerable:!0,configurable:!0});d.prototype.bindReferenceTemplate=function(a){this._refTemplate=
a||E};d.prototype._placeGlyphs=function(a,b,c,d){var e=this._size,f=this._haloSize,g=this._shapedBox,h=this._shapedGlyphs,k=this._computeGlyphTransform(g);if("esriGeometryPolyline"!==a)for(var l=0;l<c.length;l++)for(var m=c[l],n=0,p=h;n<p.length;n++){var q=p[n],u=this._materialStore.createGlyphMaterial(q.glyphMosaicItem,this.geometryType,this.vvFlags);m.place(q,a,b,k,u,e,f,g,d,this._minZoom,this._maxZoom)}else for(l=0;l<c.length;l++)for(var m=c[l],u=q=m.order,n=u-(u-1)/2-1,p=n-(n-1)/2-1,w=p-(p-1)/
2-1,q=-1===q?0:u%2?n%2?p%2?w%2?0:d-3.1:d-2.1:d-1.1:d-.1,n=Math.max(d+t.log2((this._shapedBox.width*this._scale+48)/m.pathLen),Math.max(q,this._minZoom)),p=0,w=h;p<w.length;p++)q=w[p],u=this._materialStore.createGlyphMaterial(q.glyphMosaicItem,this.geometryType,this.vvFlags),m.place(q,a,b,k,u,e,f,g,d,n,this._maxZoom)};d.prototype.writeMesh=function(a,c,d,e,f,h,k,l,m){var q=this,t=this._computeAnchors(d,f);if(t.length&&this._shapedGlyphs.length)if(this._placeGlyphs(d,f,t,l),"esriGeometryPolyline"!==
d){d=t[0];f=this._computeGlyphTransform(this._shapedBox);f=this._createBounds(this._shapedBox,f);h=d.glyphs.get(0);var u=h[0];l=u.anchorX;var w=u.anchorY,A=Math.floor(10*u.minZoom),u=Math.floor(10*u.maxZoom),G=a.length;h.forEach(function(a){a.minZoom=25.5;a.maxZoom=25.5});this._writeVertices(a,c,e,k,h,A,u);h=new n.default(e,{from:G,count:a.length-G},l,w,A);l=Math.max(this._refTemplate.height,this._refTemplate.width);w=x.getSizeFlagsMask(this.vvFlags,!1);this.vvFlags&w?h.setVV(p.toFloat32(k[g.VVType.SIZE]),
l,this._xPlacementD,this._yPlacementD):(h.offsetX=(l/2+b.COLLISION_PLACEMENT_PADDING)*this._xPlacementD,h.offsetY=(l/2+b.COLLISION_PLACEMENT_PADDING)*this._yPlacementD);h.bounds=f;m.push(h);d.clear()}else{d=function(b){var d=t[b],f=d.x,g=d.y;b=a.length;var h=new n.default(e,{from:b,count:-1},f,g,25.5);d.glyphs.forEach(function(b){for(var l=0;l<b.length;l++){var m=b[l];m.minZoom=Math.max(d.minZoom,m.minZoom);if(m.bounds){var n=m.anchorY-g;m.bounds.center[0]+=m.anchorX-f;m.bounds.center[1]+=n;h.add(m.bounds)}}h.bounds&&
q._writeHalos(a,c,e,k,b)});d.glyphs.forEach(function(b){h.bounds&&q._writeText(a,c,e,k,b)});h.range.count=a.length-b;h.bounds&&m.push(h);d.clear()};for(f=0;f<t.length;f++)d(f);this._computedGlyphs=[]}};d.prototype._outsideTile=function(a,b){return 0>a||512<=a||0>b||512<=b};d.prototype._smoothVertices=function(a,b){if(!(0>=b)){var c=a.length;if(!(3>c)){var d=[],e=0;d.push(0);for(var f=1;f<c;f++)e+=q.dist(a[f],a[f-1]),d.push(e);b=Math.min(b,.2*e);e=[];e.push(a[0][0]);e.push(a[0][1]);var g=a[c-1][0],
h=a[c-1][1],f=q.sub([0,0],a[0],a[1]);q.normalize(f);a[0][0]+=b*f[0];a[0][1]+=b*f[1];q.sub(f,a[c-1],a[c-2]);q.normalize(f);a[c-1][0]+=b*f[0];a[c-1][1]+=b*f[1];for(f=1;f<c;f++)d[f]+=b;d[c-1]+=b;for(var k=.5*b,f=1;f<c-1;f++){for(var l=0,m=0,n=0,p=f-1;0<=p&&!(d[p+1]<d[f]-k);p--){var t=k+d[p+1]-d[f],u=d[p+1]-d[p],w=d[f]-d[p]<k?1:t/u;if(1E-6>Math.abs(w))break;var A=w*w,G=w*t-.5*A*u,z=w*u/b,F=a[p+1],x=a[p][0]-F[0],B=a[p][1]-F[1],l=l+z/G*(F[0]*w*t+.5*A*(t*x-u*F[0])-A*w*u*x/3),m=m+z/G*(F[1]*w*t+.5*A*(t*B-
u*F[1])-A*w*u*B/3),n=n+z}for(p=f+1;p<c&&!(d[p-1]>d[f]+k);p++){t=k-d[p-1]+d[f];u=d[p]-d[p-1];w=d[p]-d[f]<k?1:t/u;if(1E-6>Math.abs(w))break;A=w*w;G=w*t-.5*A*u;z=w*u/b;F=a[p-1];x=a[p][0]-F[0];B=a[p][1]-F[1];l+=z/G*(F[0]*w*t+.5*A*(t*x-u*F[0])-A*w*u*x/3);m+=z/G*(F[1]*w*t+.5*A*(t*B-u*F[1])-A*w*u*B/3);n+=z}e.push(l/n);e.push(m/n)}e.push(g);e.push(h);for(p=f=0;f<c;f++)a[f][0]=e[p++],a[f][1]=e[p++]}}};d.prototype._computeLineAnchors=function(a,b,c){b=b.paths;var d=this._scale*this._shapedBox.width;c=d/2+c;
for(var d=d/2+16,e=this._shapedBox.width*this._scale,f=0;f<b.length;f++){var g=b[f],h=[];h.push(g[0]);for(var k=1;k<g.length;k++){var l=h[k-1],n=l[0],l=l[1],n=n+g[k][0],l=l+g[k][1];h.push([n,l])}this._smoothVertices(h,e);g=[];g.push(h[0]);for(k=1;k<h.length;k++){var l=h[k-1],p=h[k],n=Math.round(p[0]-l[0]),l=Math.round(p[1]-l[1]);g.push([n,l])}b[f]=g;h=this._getPathLength(g);if(!(h<2*d))for(var k=h/2,q=0,p=g[0][0],t=g[0][1],u=1;u<g.length;u++){var n=g[u][0],l=g[u][1],w=Math.sqrt(n*n+l*l),q=q+w;if(0<=
q-k){var A=q-k,z=w-A,G=z/w,F=p+n*G,x=t+l*G;this._outsideTile(F,x)||(q=new m.default(F,x,G,f,u,p,t,w,h,-1),a.push(q));for(var B=-1,x=0,x=z-c;0<=x;x-=c){var G=x/w,F=p+n*G,y=t+l*G;B++;this._outsideTile(F,y)||(q=new m.default(F,y,G,f,u,p,t,w,h,B),a.push(q))}q=x+c;x=w-A;G=p;F=t;for(y=u-1;0!==y;y--){var C=g[y][0],H=g[y][1],E=Math.sqrt(C*C+H*H);if(q+E>=c){for(var D=q=c-q;D<E;D+=c){var N=D/E,O=G-C*N,ya=F-H*N;B++;(q=D+x+d<k)&&!this._outsideTile(O,ya)&&(q=new m.default(O,ya,1-N,f,y,G-C,F-H,E,h,B),a.push(q))}q=
E-(D-c)}else q+=E;x+=E;G-=C;F-=H}B=-1;for(x=z+c;x<=w;x+=c)G=x/w,F=p+n*G,z=t+l*G,B++,this._outsideTile(F,z)||(q=new m.default(F,z,G,f,u,p,t,w,h,B),a.push(q));G=p+n;F=t+l;q=w-(x-c);x=A;for(y=u+1;y<g.length;y++){n=g[y][0];l=g[y][1];p=Math.sqrt(n*n+l*l);if(q+p>=c){for(t=q=c-q;t<p;t+=c)u=t/p,w=G+n*u,A=F+l*u,B++,(q=t+x+d<k)&&!this._outsideTile(w,A)&&(q=new m.default(w,A,u,f,y,G,F,p,h,B),a.push(q));q=p-(t-c)}else q+=p;x+=p;G+=n;F+=l}break}p+=n;t+=l}}return a};d.prototype._computeAnchors=function(a,b){var c=
[];switch(a){case "esriGeometryPoint":return b=b.geometry,a=b.x,b=b.y,a=new m.default(a,b),c.push(a),c;case "esriGeometryPolygon":if(b.centroid)return b=b.centroid,a=b.x,b=b.y,a=new m.default(a,b),c.push(a),c;A("Non-centroid polygon anchor placement not supported");break;case "esriGeometryPolyline":return this._computeLineAnchors(c,b.geometry,376);default:return A("Unable to handle geometryType: "+a),c}};d.prototype._getPathLength=function(a){for(var b=0,c=1;c<a.length;c++)var d=a[c][0],e=a[c][1],
b=b+Math.sqrt(d*d+e*e);return b};d.prototype._computeGlyphTransform=function(a){var b=this._scale,c=this._angle*u.C_DEG_TO_RAD,d=a.width/2,e=a.height/2,d=this._xAlignD*d*b+(this._xOffset+this._refTemplate.xOffset)+(a.x+d);a=this._yAlignD*e*b-(this._yOffset+this._refTemplate.yOffset)-(a.y+e);e=k.mat2d.identity(C);k.mat2d.translate(e,e,k.vec2.set(w,d,a));k.mat2d.scale(e,e,k.vec2.set(w,b,b));k.mat2d.rotate(e,e,c);return e};d.prototype._getOffset=function(a){return a.length/(c.C_LABEL_VERTEX_DEF[0].strideInBytes/
4)};d.prototype._writeVertex=function(a,b,c,d,e,f,h,k){c=b.get("geometry");h=b.get("visibility");b=b.get("visibilityRange");k=k&&k[g.VVType.SIZE]||1;this._refSymbolAndPlacementOffset=p.i8888to32(f.angle,Math.min(Math.floor(Math.max(this._refTemplate.width,this._refTemplate.height)),255),this._xPlacementD+1,this._yPlacementD+1);c.push(d);c.push(e);c.push(f.vertexOffsetUpperLeft);c.push(f.texFontSizeUpperLeft);c.push(this._refSymbolAndPlacementOffset);c.push(k);h.push(255);c.push(d);c.push(e);c.push(f.vertexOffsetUpperRight);
c.push(f.texFontSizeUpperRight);c.push(this._refSymbolAndPlacementOffset);c.push(k);h.push(255);c.push(d);c.push(e);c.push(f.vertexOffsetLowerLeft);c.push(f.texFontSizeLowerLeft);c.push(this._refSymbolAndPlacementOffset);c.push(k);h.push(255);c.push(d);c.push(e);c.push(f.vertexOffsetLowerRight);c.push(f.texFontSizeLowerRight);c.push(this._refSymbolAndPlacementOffset);c.push(k);h.push(255);b.push(B);b.push(B);a.vertexCount+=4};return d}(y.default);a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/GlyphGroup":function(){define("require exports ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/libs/gl-matrix-2/gl-matrix ../../definitions ./ComputedGlyph ./util ../../../../../3d/support/mathUtils".split(" "),
function(d,a,l,f,h,k,b,g,p){Object.defineProperty(a,"__esModule",{value:!0});var e=f.getLogger("esri.views.2d.engine.webgl.GlyphGroup");d=function(){function a(a,b,c,d,e,f,g,h,k,l){void 0===c&&(c=0);void 0===d&&(d=-1);void 0===e&&(e=-1);void 0===f&&(f=-1);void 0===g&&(g=-1);void 0===h&&(h=-1);void 0===k&&(k=0);void 0===l&&(l=-1);this.x=a;this.y=b;this.t=c;this.i=d;this.j=e;this.segmentPosX=f;this.segmentPosY=g;this.segmentLen=h;this.pathLen=k;this.order=l;this._glyphs=new Map;this.minZoom=0}Object.defineProperty(a.prototype,
"glyphs",{get:function(){return this._glyphs},enumerable:!0,configurable:!0});a.prototype.add=function(a,b){var c=this._glyphs.get(b);c?c.push(a):this._glyphs.set(b,[a])};a.prototype.clear=function(){this._glyphs.clear()};a.prototype.place=function(a,c,d,f,g,h,k,p,D,B,w){var m=a.x,n=a.y,q=a.codePoint,t=a.glyphMosaicItem;switch(c){case "esriGeometryPoint":case "esriGeometryPolygon":a=b.default.from(m,n,this.x,this.y,-1,B,w,t,q,g,f,h,k);this.add(a,0);break;case "esriGeometryPolyline":c=d.geometry;this._placeGlyphAlongLine(a,
g,c,f,p,h,k,D,B,w,-1);this._placeGlyphAlongLine(a,g,c,f,p,h,k,D,B,w,1);break;case "esriGeometryMultipoint":case "esriGeometryEnvelope":a=void 0,void 0===a&&(a="mapview-labeling"),e.error(new l(a,"Cannot place for unsupported geometryType: "+c))}};a.prototype._findLabelTheta=function(a,b,c,d){b*=d;a=Math.acos((0*b+-1*d*-a)/(1*c));0<b&&(a=2*Math.PI-a);return a};a.prototype._placeGlyphAlongLine=function(a,c,d,e,f,l,u,z,D,B,w){d=d.paths[this.i];var m=d[this.j],n=m[0],q=m[1],m=a.x,t=a.y,F=a.glyphMosaicItem,
G=a.codePoint,x=a.glyphMosaicItem.metrics,x=(a.x+x.left+x.width/2)*l/24;a=w*p.sign(x)||1;var x=Math.abs(x),y=g.len(n,q),S=this._findLabelTheta(n,q,y,w),J=(a+1)/2,y=-a*(-1*J+this.t)*y,X=h.mat2d.rotate(h.mat2df32.create(),e,-S),T=48<f.height;f=0===y?B:Math.max(Math.max(z+p.log2(Math.abs(x/y)),0),D);T&&(f=D);B=b.default.from(m,t,this.x,this.y,S,f,B,F,G,c,X,l,u,T||f<=z&&B>=z&&1===w);this.add(B,this.j);if(!T)for(B=this.segmentPosX+J*n,n=this.segmentPosY+J*q,X=f,q=this.j+a;0<q&&q<d.length;q+=a){var Z=B,
U=n,J=d[q];f=J[0];var J=J[1],M=g.len(f,J),T=this._findLabelTheta(f,J,M,w),T=h.mat2d.rotate(h.mat2df32.create(),e,-T),Z=Z+-a*f/M*y,U=U+-a*J/M*y,y=y+M,M=X-.1,X=0===y?M:Math.max(Math.max(z+p.log2(Math.abs(x/y)),0),D),T=b.default.from(m,t,Z,U,S,X,M,F,G,c,T,l,u,X<=z&&M>=z&&1===w);this.add(T,q);if(X<z-k.COLLISION_MAX_ZOOM_DELTA){this.minZoom=Math.max(X,this.minZoom);break}B+=a*f;n+=a*J}};return a}();a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/ComputedGlyph":function(){define("require exports ../../../../../../core/libs/gl-matrix-2/gl-matrix ../../definitions ../../number ../../collisions/BoundingBox".split(" "),
function(d,a,l,f,h,k){Object.defineProperty(a,"__esModule",{value:!0});var b=l.vec2f32.create();d=function(){function a(a,b,c,d,f,g,h,k,l,u,z,D,B,w,C){this.anchorX=a;this.anchorY=b;this.angle=c;this.bounds=d;this.minZoom=f;this.maxZoom=g;this.materialId=h;this.vertexOffsetUpperLeft=k;this.vertexOffsetUpperRight=l;this.vertexOffsetLowerLeft=u;this.vertexOffsetLowerRight=z;this.texFontSizeUpperLeft=D;this.texFontSizeUpperRight=B;this.texFontSizeLowerLeft=w;this.texFontSizeLowerRight=C}a.from=function(d,
e,c,g,m,q,y,x,t,u,z,D,B,w,C){void 0===w&&(w=!1);void 0===C&&(C=!1);var n=x.rect,p=x.metrics;m=-1===m?255:Math.floor(180*m/Math.PI/360*254);var H=Math.round(n.x/4),F=Math.round(n.y/4);x=H+Math.round(n.width/4);var G=F+Math.round(n.height/4),N=-24-p.top,O=p.left,S=-p.top,J=n.width,n=n.height;t||(C||(N=0),O=4,J=p.width);d+=O;t=C?e+S:e+N;J=d+J;N=t;e=d;S=t+n;n=J;C=S;var O=e+p.width,X=S-p.height,T=p.width*D/24,p=p.height*D/24;z&&(l.vec2.transformMat2d(b,l.vec2.set(b,d,t),z),d=b[0],t=b[1],l.vec2.transformMat2d(b,
l.vec2.set(b,J,N),z),J=b[0],N=b[1],l.vec2.transformMat2d(b,l.vec2.set(b,e,S),z),e=b[0],S=b[1],l.vec2.transformMat2d(b,l.vec2.set(b,n,C),z),n=b[0],C=b[1],l.vec2.transformMat2d(b,l.vec2.set(b,O,X),z),O=b[0],X=b[1]);z=w?new k.default(O,X,T+f.COLLISION_BOX_PADDING,p+f.COLLISION_BOX_PADDING):null;w=h.i1616to32(8*d,8*t);p=h.i1616to32(8*J,8*N);d=h.i1616to32(8*e,8*S);e=h.i1616to32(8*n,8*C);n=h.i8888to32(H,F,D,B);F=h.i8888to32(x,F,D,B);H=h.i8888to32(H,G,D,B);D=h.i8888to32(x,G,D,B);return new a(c|0,g|0,m,z,
q,y,u,w,p,d,e,n,F,H,D)};return a}();a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/util":function(){define(["require","exports"],function(d,a){function l(a,d){return Math.sqrt(a*a+d*d)}Object.defineProperty(a,"__esModule",{value:!0});a.sub=function(a,d,k){a[0]=d[0]-k[0];a[1]=d[1]-k[1];return a};a.len=l;a.normalize=function(a){var d=l(a[0],a[1]);a[0]/=d;a[1]/=d};a.dist=function(a,d){return l(a[0]-d[0],a[1]-d[1])}})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix-2/gl-matrix ../../color ../../definitions ../../enums ../../fontUtils ../../number ../../TextShapingNew ../../WGLDisplayRecord ../../collisions/BoundingBox ./ComputedGlyph ./WGLMeshTemplate ../../util/BidiText ../../../../layers/graphics/graphicsUtils ../../../../../vectorTiles/GeometryUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z,D){Object.defineProperty(a,"__esModule",{value:!0});var B=h.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),w=b.mat2df32.create(),C=b.vec2f32.create();d=function(a){function d(b,d,f){var h=a.call(this)||this;h.geometryType=e.WGLGeometryType.TEXT;h.vvFlags=0;h._xOffset=k.pt2px(f.xoffset);h._yOffset=k.pt2px(f.yoffset);h._decorationTop=c.getFontDecorationTop(f.font);h._color=(f.color&&g.premultiplyAlphaRGBA(f.color))|0;h._haloColor=(f.haloColor&&
g.premultiplyAlphaRGBA(f.haloColor))|0;h._haloSize=Math.min(Math.floor(5*k.pt2px(k.toPt(f.haloSize||0))),127);h._size=Math.min(Math.round(k.pt2px(f.font.size)),127);h._scale=h._size/24;h._angle=f.angle||0;h._justify=z.getJustification(f.horizontalAlignment||"center");h._xAlignD=z.getXAnchorDirection(f.horizontalAlignment||"center");h._yAlignD=-z.getYAnchorDirection(f.verticalAlignment||"baseline");h._baseline="baseline"===(f.verticalAlignment||"baseline");h._materialStore=b;h.vvFlags=d;h.symbolId=
f.id;return h}l(d,a);d.fromText=function(a,b,c,e,f){a=new d(a,b,c);c=u.bidiText(c.text);a.bindTextInfo(f,c[0],c[1]);a._computeGlyphs(a._shapedGlyphs,a._shapedBox);return a};d.prototype.bindTextInfo=function(a,b,c){a=this._computeShaping(a,this._justify).getShaping(b,c);isNaN(this._decorationTop)||m.addDecoration(a,this._decorationTop);this._shapedGlyphs=a;this._shapedBox=m.getBox(a)};d.prototype.writeMesh=function(a,b,c,d,e,g,h){g=this._computedGlyphs;switch(c){case "esriGeometryPoint":e=e.geometry;
c=e.x;e=e.y;for(var k=0;k<g.length;k++){var l=g[k];l.anchorX=c;l.anchorY=e}this._writeVertices(a,b,d,h,g,0,0);break;case "esriGeometryPolygon":if(e.centroid){e=e.centroid;c=e.x;e=e.y;for(k=0;k<g.length;k++)l=g[k],l.anchorX=c,l.anchorY=e;this._writeVertices(a,b,d,h,g,0,0);break}case "esriGeometryMultipoint":for(var k=e.geometry.points,m=e=c=0;m<k.length;m++){l=k[m];c+=l[0];e+=l[1];for(var n=0,p=g;n<p.length;n++)l=p[n],l.anchorX=c,l.anchorY=e;this._writeVertices(a,b,d,h,g,0,0)}break;default:a=void 0,
void 0===a&&(a="mapview-processing"),B.error(new f(a,"Unable to handle geometryType: "+c))}};d.prototype._computeGlyphs=function(a,b){var c=Array(a.length);b=this._computeGlyphTransform(b);for(var d=0;d<a.length;d++){var e=a[d],f=e.x,g=e.y,h=e.codePoint,e=e.glyphMosaicItem,k=this._materialStore.createGlyphMaterial(e,this.geometryType,this.vvFlags);c[d]=x.default.from(f,g,0,0,-1,0,25,e,h,k,b,this._size,this._haloSize,!1,!0)}this._computedGlyphs=c};d.prototype._createBounds=function(a,c){var d=a.width/
2,e=a.height/2,f=c[4],g=c[5],h;if(this._angle){a=b.vec2f32.fromValues(-d,-e);h=b.vec2f32.fromValues(d,-e);var k=b.vec2f32.fromValues(-d,e),l=b.vec2f32.fromValues(d,e);b.vec2.transformMat2d(a,a,c);b.vec2.transformMat2d(h,h,c);b.vec2.transformMat2d(k,k,c);b.vec2.transformMat2d(l,l,c);c=e=Infinity;var m=0,n=d=0;for(a=[a,h,k,l];n<a.length;n++)h=a[n],e=Math.min(h[0],e),m=Math.max(h[0],m),c=Math.min(h[1],c),d=Math.max(h[1],d);h=m-e;a=d-c}else h=a.width*this._scale,a=a.height*this._scale;return new y.default(f,
g,h+p.COLLISION_BOX_PADDING,a+p.COLLISION_BOX_PADDING)};d.prototype._computeShaping=function(a,b){return new m([a],p.TEXT_MAX_WIDTH,p.TEXT_LINE_HEIGHT,p.TEXT_SPACING,[0,.5*-p.TEXT_LINE_HEIGHT],.5*(1-this._xAlignD),0,b)};d.prototype._computeGlyphTransform=function(a){var c=this._scale,d=this._angle*D.C_DEG_TO_RAD,e=b.mat2d.identity(w);b.mat2d.rotate(e,e,d);b.mat2d.translate(e,e,b.vec2.set(C,this._xOffset,-this._yOffset));b.mat2d.scale(e,e,b.vec2.set(C,c,c));b.mat2d.translate(e,e,b.vec2.set(C,-4,-4-
(this._baseline?25:a.y+(1-this._yAlignD)*a.height*.5)));return e};d.prototype._getOffset=function(a){return a.length/(this.vvFlags?9:5)};d.prototype._writeVertices=function(a,b,c,d,e,f,g){this._writeHalos(a,b,c,d,e,f,g);this._writeText(a,b,c,d,e,f,g)};d.prototype._writeHalos=function(a,b,c,d,e,f,g){var h=b.indexVector,k=b.get("geometry"),k=this._getOffset(k),l=0;if(this._haloSize)for(var m=0;m<e.length;m++,l+=4){var p=e[m],t=n.i1616to32(2*p.anchorX+1,2*p.anchorY),u=e[m].materialId,w=this._materialStore.get(u),
u=new q(c,this.geometryType,u,null==f?Math.floor(10*p.minZoom):f,null==g?Math.floor(10*p.maxZoom):g);u.vertexFrom=k+l;u.indexFrom=h.length;this._writeVertex(u,b,c,t,this._haloColor,p,w,d);this._writeIndices(u,h,k+l);a.push(u)}};d.prototype._writeText=function(a,b,c,d,e,f,g){for(var h=b.indexVector,k=b.get("geometry"),k=this._getOffset(k),l=0,m=0;m<e.length;m++,l+=4){var p=e[m],t=n.i1616to32(2*p.anchorX,2*p.anchorY),u=e[m].materialId,w=this._materialStore.get(u),u=new q(c,this.geometryType,u,null==
f?Math.floor(10*p.minZoom):f,null==g?Math.floor(10*p.maxZoom):g);u.vertexFrom=k+l;u.indexFrom=h.length;this._writeVertex(u,b,c,t,this._color,p,w,d);this._writeIndices(u,h,k+l);a.push(u)}};d.prototype._writeVertex=function(a,b,c,d,e,f,g,h){var k=b.get("geometry");b=b.get("visibility");k.push(d);k.push(c);k.push(e);k.push(f.vertexOffsetUpperLeft);k.push(f.texFontSizeUpperLeft);this._writeVV(k,h,g);b.push(255);k.push(d);k.push(c);k.push(e);k.push(f.vertexOffsetUpperRight);k.push(f.texFontSizeUpperRight);
this._writeVV(k,h,g);b.push(255);k.push(d);k.push(c);k.push(e);k.push(f.vertexOffsetLowerLeft);k.push(f.texFontSizeLowerLeft);this._writeVV(k,h,g);b.push(255);k.push(d);k.push(c);k.push(e);k.push(f.vertexOffsetLowerRight);k.push(f.texFontSizeLowerRight);this._writeVV(k,h,g);b.push(255);a.vertexCount+=4};d.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[e.VVType.SIZE]),a.push(b[e.VVType.COLOR]),a.push(b[e.VVType.OPACITY]),a.push(b[e.VVType.ROTATION]))};d.prototype._writeIndices=
function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return d}(t.default);a.default=d})},"esri/views/2d/engine/webgl/fontUtils":function(){define(["require","exports"],function(d,a){function l(a){a=a.toLowerCase().split(" ").join("-");switch(a){case "serif":return"noto-serif";case "sans-serif":return"arial-unicode-ms";case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";default:return a}}Object.defineProperty(a,
"__esModule",{value:!0});a.getFullyQualifiedFontName=function(a){var d;a:{if(a.weight)switch(a.weight.toLowerCase()){case "bold":case "bolder":d="-bold";break a}d=""}var f;a:{if(a.style)switch(a.style.toLowerCase()){case "italic":case "oblic":f="-italic";break a}f=""}d+=f;return l(a.family)+(0<d.length?d:"-regular")};a.getFontDecorationTop=function(a){switch(a.decoration.toLowerCase()){case "underline":return-26;case "line-through":return-18}return NaN}})},"esri/views/2d/engine/webgl/TextShapingNew":function(){define(["require",
"exports","./Rect"],function(d,a,l){return function(){function a(a,d,b,f,l,e,c,n){this._glyphItems=a;this._maxWidth=d;this._lineHeight=b;this._letterSpacing=f;this._offset=l;this._hAnchor=e;this._vAnchor=c;this._justify=n}a.prototype.getShaping=function(a,d){for(var b=this._letterSpacing,f=this._lineHeight,h=this._justify,e=this._maxWidth,c=[],k=0,l=0,q=0,y=0,x=-1,t=0,u=-1,z=a.length,D=0;D<z;D++){var B=a.charCodeAt(D);if(10===B){if(D!==z-1){if(x>=y){var k=c[x],w=k.x+k.glyphMosaicItem.metrics.advance,
t=Math.max(w,t);h&&this._applyJustification(c,y,x);y=c.length}l=d?l-f:l+f;k=0;++q}}else{for(var w=void 0,C=0,E=this._glyphItems;C<E.length&&!(w=E[C][B]);C++);if(w){c.push({codePoint:B,x:k,y:l,glyphMosaicItem:w});k+=w.metrics.advance+b;if(0<e&&k>e&&0<=u){C=u+1;w=c[C].x;t=Math.max(w,t);for(E=C;E<c.length;E++)c[E].y=d?c[E].y-f:c[E].y+f,c[E].x-=w;h&&this._applyJustification(c,y,u);l=d?l-f:l+f;k-=w;++q;y=C;u=-1}++x;32===B&&(u=c.length-1)}}}x>=y&&(k=c[x],t=Math.max(t,k.x+k.glyphMosaicItem.metrics.advance),
h&&this._applyJustification(c,y,x));if(0<c.length)for(a=(h-this._hAnchor)*t,b=(-this._vAnchor*(q+1)+.5)*f,d&&q&&(b+=q*f),a+=this._offset[0],b+=this._offset[1],d=0;d<c.length;d++)f=c[d],f.x+=a,f.y+=b;return c};a.getBox=function(a){if(!a.length)return null;for(var d=Infinity,b=Infinity,f=-Infinity,h=-Infinity,e=0;e<a.length;e++)var c=a[e],l=c.glyphMosaicItem.metrics,m=c.x+l.left,c=c.y-l.top,q=m+l.width,l=c+l.height,d=Math.min(d,m),f=Math.max(f,q),b=Math.min(b,c),h=Math.max(h,l);return{x:d,y:b,width:f-
d,height:h-b}};a.addDecoration=function(a,d){var b=a.length;if(0!==b){for(var f=a[0].x+a[0].glyphMosaicItem.metrics.left,h=a[0].y,e=1;e<b;e++){var c=a[e];if(c.y!==h){var k=a[e-1].x+a[e-1].glyphMosaicItem.metrics.left+a[e-1].glyphMosaicItem.metrics.width;a.push({codePoint:0,x:f,y:h,glyphMosaicItem:{rect:new l(4,0,4,8),metrics:{width:k-f,height:2,left:0,top:d,advance:0},page:0}});h=c.y;f=c.x+c.glyphMosaicItem.metrics.left}}b=a[b-1].x+a[b-1].glyphMosaicItem.metrics.left+a[b-1].glyphMosaicItem.metrics.width;
a.push({codePoint:0,x:f,y:h,glyphMosaicItem:{rect:new l(4,0,4,8),metrics:{width:b-f,height:2,left:0,top:d,advance:0},page:0}})}};a.prototype._applyJustification=function(a,d,b){for(var f=a[b],f=(f.x+f.glyphMosaicItem.metrics.advance)*this._justify;d<=b;d++)a[d].x-=f};return a}()})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){return function(){}}();
a.default=d})},"esri/views/2d/engine/webgl/util/BidiText":function(){define(["require","exports","dojox/string/BidiEngine"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});var f=new l;a.bidiText=function(a){if(!f.hasBidiChar(a))return[a,!1];var d;d="rtl"===f.checkContextual(a)?"IDNNN":"ICNNN";return[f.bidiTransform(a,d,"VLYSN"),!0]}})},"esri/views/2d/layers/graphics/graphicsUtils":function(){define("require exports ../../../../core/promiseUtils ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/gl-matrix ../../../../geometry/Polygon ../../../../geometry/Polyline ../../../../geometry/SpatialReference ../../../../geometry/support/boundsUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/spatialReferenceUtils ../../engine/webgl/definitions ../../engine/webgl/fontUtils ../../engine/webgl/GeometryUtils ../../engine/webgl/TextShapingNew ../../engine/webgl/TileClipper ../../engine/webgl/util/BidiText".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t,u,z){function D(a){switch(a){case "left":return 1;case "right":return-1;case "center":case "justify":return 0}}function B(a){switch(a){case "top":return-1;case "middle":return 0;case "baseline":case "bottom":return 1}}function w(a){switch(a){case "left":return 0;case "right":return 1;case "center":case "justify":return.5}}function C(a,b,c){if(!c)return a;var d=z.bidiText(b.text),e=d[0],d=d[1],g=w(b.horizontalAlignment||"center"),h=D(b.horizontalAlignment||
"center");c=(new t([c.glyphMosaicItems],q.TEXT_MAX_WIDTH,q.TEXT_LINE_HEIGHT,q.TEXT_SPACING,[0,.5*-q.TEXT_LINE_HEIGHT],.5*(1-h),0,g)).getShaping(e,d);e=y.getFontDecorationTop(b.font);isNaN(e)||t.addDecoration(c,e);c=t.getBox(c);b=f.pt2px(b.font.size)/T;a[0]=b*c.x;a[1]=b*c.y;a[2]=b*c.width;a[3]=b*c.height;return a}function E(a,b){return Math.ceil((a-b)/(2*b))}function A(a,b){var c;c=e.isPolygon(a)?a.rings:a.paths;for(var d=0;d<c.length;d++)for(var f=0,g=c[d];f<g.length;f++)g[f][0]+=b;return a}function H(a,
b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=E(d,b);a[0]=d+-2*e*b}else d<c&&(e=E(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=E(d,b),a=a.clone().offset(-2*e*b,0)):d<c&&(e=E(d,c),a=a.clone().offset(-2*e*c,0));return a}Object.defineProperty(a,"__esModule",{value:!0});a.ensureClosedRings=function(a){if(e.isPolygon(a)){var b=0;for(a=a.rings;b<a.length;b++){var c=a[b];3>c.length||c[0][0]===c[c.length-1][0]&&c[0][1]===c[c.length-1][1]||c.push(c[0])}}};a.getBounds=function(a,b,d,g,h,k,l,n,q){if(!g)return a[0]=
a[1]=a[2]=a[3]=0,b[0]=b[1]=b[2]=b[3]=0,a;var t=d.symbol;!t&&k&&(t=k.getSymbol(d,{scale:n}));if(!t)return a;if(e.isPoint(g))switch(d=g.x,g=g.y,t.type){case "simple-marker":case "picture-marker":k=t;var u,w;h=f.pt2px(k.xoffset);b=f.pt2px(k.yoffset);t=x.C_DEG_TO_RAD*k.angle;switch(k.type){case "simple-marker":u=w=f.pt2px(k.size);break;case "picture-marker":u=f.pt2px(k.width),w=f.pt2px(k.height)}u*=.5;w*=.5;0!==t&&(k=Math.cos(t),t=Math.sin(t),n=u*t+w*k,u=u*k+w*t,w=n);u=l*(h+u);l*=b+w;l=Math.sqrt(u*u+
l*l);b=c.normalizeMapX(d-l,q);d=c.normalizeMapX(d+l,q);b>d&&(q=m.getInfo(q))&&(d=q.valid,q=d[1],b=d[0],d=q);a[0]=b;a[1]=g-l;a[2]=d;a[3]=g+l;break;case "text":0===b[2]&&0===b[3]&&C(b,t,h);k=t;h=D(k.horizontalAlignment||"center");w=B(k.verticalAlignment||"middle");t=l*f.pt2px(k.xoffset);u=l*f.pt2px(k.yoffset);n=x.C_DEG_TO_RAD*k.angle;k=l*b[2];l*=b[3];if(0!==n){b=Math.cos(n);n=Math.sin(n);var A=k*n+l*b;k=k*b+l*n;l=A}b=t+h*k+k;l=u+w*l+l;l=Math.sqrt(b*b+l*l);b=c.normalizeMapX(d-l,q);d=c.normalizeMapX(d+
l,q);b>d&&(q=m.getInfo(q))&&(d=q.valid,q=d[1],b=d[0],d=q);a[0]=b;a[1]=g-l;a[2]=d;a[3]=g+l}else{p.getBoundsXY(a,g);g=b[0];if(0===g){a:switch(g=0,t.type){case "simple-fill":case "picture-fill":g=t.outline;if(!g){g=0;break a}g=g.width;break;case "simple-line":g=t.width;break;case "simple-marker":g=t.size;break;case "picture-marker":g=Math.max(t.width,t.height);break;case "text":g=[0,0,0,0],C(g,t,h),g=Math.max(g[0],g[1])}b[0]=g}g=l*g/2;a[0]-=g;a[1]-=g;a[2]+=g;a[3]+=g}return a};a.isMarkerSymbol=function(a){return"simple-marker"===
a||"picture-marker"===a||"text"===a};a.graphicGeometryToNumber=function(a){switch(a.geometry.type){case "polyline":return 1;case "polygon":case "extent":return 2}return 0};a.getXAnchorDirection=D;a.getYAnchorDirection=B;a.getJustification=w;var F=h.vec2f32.create(),G=h.vec2f32.create(),N=h.vec2f32.create(),O=h.vec2f32.create(),S=h.vec2f32.create(),J=h.vec2f32.create(),X=h.vec2f32.create();a.isPointOnPolyline=function(a,b,c,d){h.vec2.set(N,b,c);a=a.paths;for(var e,f,g,k,l,m,n,p,q=Infinity,t=0;t<a.length;t++){var u=
a[t];if(!(2>u.length))for(var w=1;w<u.length;w++)e=u[w-1][0],g=u[w-1][1],f=u[w][0],k=u[w][1],l=Math.min(e,f)-d,m=Math.min(g,k)-d,n=Math.max(e,f)+d,p=Math.max(g,k)+d,b<l||b>n||c<m||c>p||(h.vec2.set(F,e,g),h.vec2.set(G,f,k),h.vec2.subtract(O,G,F),h.vec2.subtract(S,F,N),h.vec2.scale(J,O,h.vec2.dot(O,S)/h.vec2.dot(O,O)),h.vec2.subtract(X,S,J),e=h.vec2.dot(X,X),q>e&&(q=e))}return Math.sqrt(q)<=d};a.getMarkerSymbolBounds=function(a,b,c,d,e,g){var h,k,l=e*f.pt2px(d.xoffset),m=e*f.pt2px(d.yoffset),n=x.C_DEG_TO_RAD*
d.angle;switch(d.type){case "simple-marker":h=k=.5*e*f.pt2px(d.size);break;case "picture-marker":h=.5*e*f.pt2px(d.width),k=.5*e*f.pt2px(d.height)}e=x.C_DEG_TO_RAD*g;d=Math.cos(e);e=Math.sin(e);b+=l*d-m*e;c+=l*e+m*d;0!==n&&(l=Math.cos(n),n=Math.sin(n),m=h*n+k*l,h=h*l+k*n,k=m);a[0]=b-h;a[1]=c-k;a[2]=b+h;a[3]=c+k;return a};a.getTextSymbolBounds=function(a,b,c,d,e,g,h){var k=B(d.verticalAlignment||"baseline"),l="baseline"===(d.verticalAlignment||"baseline"),m=g*f.pt2px(d.xoffset),n=g*f.pt2px(d.yoffset);
d=f.pt2px(d.font.size)/24;var p=x.C_DEG_TO_RAD*h;h=Math.cos(p);p=Math.sin(p);b=b+(m*h-n*p)+g*e[0];c=c+(m*p+n*h)+g*((l?25*d:e[1]+(1-k)*e[3]*.5)+4*d);a[0]=b;a[1]=c-g*e[3];a[2]=b+g*e[2];a[3]=c;return a};a.normalizeCentralMeridian=function(a){var b,c,d,e,f,g=null;if(!a)return l.resolve(null);b=a.spatialReference;c=n.getInfo(b);f=b.isWebMercator?102100:4326;d=Z[f].maxX;e=Z[f].minX;b=Z[f].plus180Line;f=Z[f].minus180Line;var h;if(c)if("mesh"===a.type)h=a;else if("point"===a.type)h=H(a.clone(),d,e);else if("multipoint"===
a.type)h=a.clone(),h.points=h.points.map(function(a){return H(a,d,e)});else if("extent"===a.type){var m=a.clone();h=m._normalize(!1,!1,c);h=h.rings?new k(h):h}else a.extent?(m=a.extent,c=2*E(m.xmin,e)*d,a=0===c?a.clone():A(a.clone(),c),m.offset(c,0),m.intersects(b)&&m.xmax!==d?g=a:m.intersects(f)&&m.xmin!==e?g=a:h=a):h=a.clone();else return l.resolve(a);return null!==g?(g=(new u.CutVertical).cut(g,d),l.resolve(g)):l.resolve(h)};var T=24,Z={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,
plus180Line:new b({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:g.WebMercator}),minus180Line:new b({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:g.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new b({paths:[[[180,-180],[180,180]]],spatialReference:g.WebMercator}),minus180Line:new b({paths:[[[-180,-180],[-180,180]]],spatialReference:g.WebMercator})}}})},
"esri/geometry/support/boundsUtils":function(){define(["require","exports","./jsonUtils"],function(d,a,l){function f(a){return function(b,d){return null==b?d:null==d?b:a(b,d)}}function h(a,b,d,f){var c=d?3:2;if(!b.length||!b[0].length)return null;for(var e=b[0][0],h=e[0],e=e[1],k=b[0][0],l=k[0],k=k[1],m=void 0,n=void 0,B=void 0,w=void 0,C=0;C<b.length;C++)for(var E=b[C],A=0;A<E.length;A++){var H=E[A],F=H[0],G=H[1],h=g(h,F),e=g(e,G),l=p(l,F),k=p(k,G);d&&2<H.length&&(F=H[2],m=g(m,F),n=p(n,F));f&&H.length>
c&&(w=H[c],B=g(m,w),w=p(n,w))}if(d)return f?(a[0]=h,a[1]=e,a[2]=m,a[3]=B,a[4]=l,a[5]=k,a[6]=n,a[7]=w):(a[0]=h,a[1]=e,a[2]=m,a[3]=l,a[4]=k,a[5]=n),a;if(f)return a[0]=h,a[1]=e,a[2]=B,a[3]=l,a[4]=k,a[5]=w,a;a[0]=h;a[1]=e;a[2]=l;a[3]=k;return a}function k(a,b,d,f,g,h){d=b.xmin;f=b.xmax;var c=b.ymin,e=b.ymax,k=b.zmin,l=b.zmax,m=b.mmin;b=b.mmax;if(g)return k=k||0,l=l||0,h?(a[0]=d,a[1]=c,a[2]=k,a[3]=m||0,a[4]=f,a[5]=e,a[6]=l,a[7]=b||0):(a[0]=d,a[1]=c,a[2]=k,a[3]=f,a[4]=e,a[5]=l),a;if(h)return a[0]=d,a[1]=
c,a[2]=m||0,a[3]=f,a[4]=e,a[5]=b||0,a;a[0]=d;a[1]=c;a[2]=f;a[3]=e;return a}function b(a,b,d,f,h,k){var c=d?3:2;f=f&&k;d=d&&h;if(!b.length||!b[0].length)return null;for(var e=b[0],l=e[0],e=e[1],m=b[0],n=m[0],m=m[1],q=void 0,w=void 0,y=void 0,E=void 0,A=0;A<b.length;A++){var H=b[A],F=H[0],G=H[1],l=g(l,F),e=g(e,G),n=p(n,F),m=p(m,G);d&&2<H.length&&(F=H[2],q=g(q,F),w=p(w,F));f&&H.length>c&&(E=H[c],y=g(q,E),E=p(w,E))}if(h)return q=q||0,w=w||0,k?(a[0]=l,a[1]=e,a[2]=q,a[3]=y||0,a[4]=n,a[5]=m,a[6]=w,a[7]=
E||0):(a[0]=l,a[1]=e,a[2]=q,a[3]=n,a[4]=m,a[5]=w),a;if(k)return a[0]=l,a[1]=e,a[2]=y||0,a[3]=n,a[4]=m,a[5]=E||0,a;a[0]=l;a[1]=e;a[2]=n;a[3]=m;return a}Object.defineProperty(a,"__esModule",{value:!0});var g=f(Math.min),p=f(Math.max);a.getBoundsXY=function(a,c){if(l.isPolyline(c))return h(a,c.paths,!1,!1);if(l.isPolygon(c))return h(a,c.rings,!1,!1);if(l.isMultipoint(c))return b(a,c.points,!1,!1,!1,!1);if(l.isExtent(c))return k(a,c);l.isPoint(c)&&(a[0]=c.x,a[1]=c.y,a[2]=c.x,a[3]=c.y);return a};a.getRingsOrPathsBounds=
h;a.getExtentBounds=k;a.getPointsBounds=b})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../enums ../../enums ../../LineTess ../../number ../../TileClipper ../../Utils ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y){Object.defineProperty(a,"__esModule",{value:!0});
var x=f.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),t=e.allocTriangles(20),u=e.allocTriangles(20),z=[e.allocExtrudeVectors(),e.allocExtrudeVectors()],D=e.allocExtrudeVectors(),B=b.TILE_SIZE+8,w=new e.Tessellator({distanceAlongCorrection:!0}),C=new n.TileClipper(0,0,0,1,8);C.setExtent(b.TILE_SIZE);d=function(a){function b(b,c,d,e,f,h,k,l,m,n,p,q){var t=a.call(this)||this;t.capType=h;t.joinType=k;t.fillColor=l;t.tl=m;t.br=n;t.hasPattern=p;t.isDashed=q;t.geometryType=g.WGLGeometryType.LINE;
t.halfWidth=0<e?.5*(e+1/f):0;t._materialStore=b;t.vvFlags=c;t.materialId=t._materialStore.createSpriteMaterial(d,t.geometryType,c);return t}l(b,a);b.fromSimpleLine=function(a,d,e,f,g){var l=e.color,n="solid"!==e.style&&"none"!==e.style,p=m.getCapType(e.cap||"round",n),q=m.getJoinType(e.join||"round"),l=l&&"none"!==e.style&&k.premultiplyAlphaRGBA(l)||0;"none"===e.style&&(l=0);if(!f)return new b(a,d,f,h.pt2px(e.width),g,p,q,l,0,0,!1,n);var t=f.rect,u=t.x+1+f.width,w=t.y+1+f.height,t=c.i1616to32(t.x+
1,t.y+1),u=c.i1616to32(u,w);return new b(a,d,f,h.pt2px(e.width),g,p,q,l,t,u,!0,n)};b.fromPictureLineSymbol=function(a,b,c,d){x.error("PictureLineSymbol support does not exist!");return null};b.prototype.writeMesh=function(a,b,c,d,e,f,g){if(this.vvFlags&p.WGLVVFlag.COLOR||0!==this.fillColor){f=this._materialStore.get(this.materialId);var h=b.indexVector,k=b.get("geometry");b=b.get("visibility");var l=this.halfWidth,m=new q(d,this.geometryType,this.materialId),n=this._getOffset(k,f);m.vertexFrom=n;
m.indexFrom=h.length;switch(c){case "esriGeometryPolyline":c=this._clipLines(e.geometry.paths);if(0===c.length)break;this._write(m,h,k,b,n,d,l,c,f,g);a.push(m);break;case "esriGeometryPolygon":c=this._clipLines(e.geometry.rings);if(0===c.length)break;this._write(m,h,k,b,n,d,l,c,f,g);a.push(m);break;default:x.error("Unable to handle geometryType: "+c)}}};b.prototype._clipLines=function(a){for(var b=[],c=!1,d=0;d<a.length;){var e=[],f=a[d];C.reset(2);var g=f[0],h=g[0],g=g[1];if(c)C.moveTo(h,g);else{if(-8>
h||h>B||-8>g||g>B){c=!0;continue}e.push({x:h,y:g})}for(var k=!1,l=f.length,m=1;m<l;++m)if(h+=f[m][0],g+=f[m][1],c)C.lineTo(h,g);else{if(-8>h||h>B||-8>g||g>B){k=!0;break}e.push({x:h,y:g})}if(k)c=!0;else{if(c){if(e=C.resultWithStarts())for(c=0;c<e.length;c++)b.push(e[c])}else b.push({line:e,start:0});d++;c=!1}}return b};b.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?11:8;return a.length/b};b.prototype._write=function(a,b,c,d,f,g,h,k,l,m){for(var n=0,p=0;p<k.length;p++){var q=k[p],
u=q.line;if(!(2>u.length))for(var A=u[0],x=u[u.length-1],B=x.x-A.x,A=x.y-A.y,B=1E-6>B*B+A*A,y=q.start%65535,q=z[1],A=0;A<u.length;A++){var F=u[A],x=q===z[A%2]?z[(A+1)%2]:z[A%2],C=0===A,E=A===u.length-1;E&&B&&!this.hasPattern?e.copyExtrudeVectors(x,D):(this._computeExtrudeVectors(x,A,u,B),n+=this._writeVertices(c,d,g,h,F.x,F.y,x,y,n,l,m),null==x.capCenter||B&&E||this._writePieIndices(a,b,f,x),B&&C&&!this.hasPattern&&e.copyExtrudeVectors(D,x));C||this._writeBridgeIndices(a,b,f,q,x);if(!E){var E=u[A+
1],C=[E.x-F.x,E.y-F.y],G=e.length(C),C=[C[0]/G,C[1]/G],G=y+G;if(65535<G){var H=(65535-y)/(G-y),y=F.x+(E.x-F.x)*H,F=F.y+(E.y-F.y)*H,E=q;w.buttCap(E,C,C);n+=this._writeVertices(c,d,g,h,y,F,E,65535,n,l,m);w.bridge(t,x,E);this._writeBridgeIndices(a,b,f,x,E);w.buttCap(E,C,C);y=G-65535}else y=G,q=x}}}a.vertexCount=n};b.prototype._writeVertices=function(a,b,d,e,f,g,h,k,l,m,n){var p=0,q=c.i1616to32(f,g),t=h.vectors;h=t.items;for(t=t.count;p<t;++p){var u=h[p].vector,w=u[0],u=u[1],A=h[p].texCoords,x=A[0],z=
A[1],B=h[p].direction,A=B[0],y=B[1],B=c.i1616to32(k,31*e),w=c.i8888to32(Math.round(31*w),Math.round(31*u),Math.round(31*x),Math.round(31*z)),u=c.i8888to32(Math.round(31*A),Math.round(31*y),0,0);a.push(q);a.push(d);a.push(this.fillColor);a.push(w);a.push(B);a.push(this.tl);a.push(this.br);a.push(u);this._writeVV(a,n,m);b.push(255);h[p].base={index:l+p,point:[f,g]}}return p};b.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[g.VVType.SIZE]),a.push(b[g.VVType.COLOR]),a.push(b[g.VVType.OPACITY]))};
b.prototype._writeBridgeIndices=function(a,b,c,d,e){w.bridge(t,d,e);for(d=0;d<t.count;++d)e=t.items[d],b.push(c+e.v1.base.index),b.push(c+e.v2.base.index),b.push(c+e.v3.base.index),a.indexCount+=3};b.prototype._writePieIndices=function(a,b,c,d){w.pie(u,d);for(d=0;d<u.count;++d){var e=u.items[d];b.push(c+e.v1.base.index);b.push(c+e.v2.base.index);b.push(c+e.v3.base.index);a.indexCount+=3}};b.prototype._computeExtrudeVectors=function(a,b,c,d){var f=c[b],g=[void 0,void 0],h=[void 0,void 0];if(0<b&&b<
c.length-1){var k=c[(b+c.length-1)%c.length],l=c[(b+1)%c.length];e.normalize(g,[f.x-k.x,f.y-k.y]);e.normalize(h,[l.x-f.x,l.y-f.y])}else if(0===b)l=c[(b+1)%c.length],e.normalize(h,[l.x-f.x,l.y-f.y]),d?(k=c[c.length-2],e.normalize(g,[f.x-k.x,f.y-k.y])):g=h;else if(b===c.length-1)k=c[(b+c.length-1)%c.length],e.normalize(g,[f.x-k.x,f.y-k.y]),d?(k=c[1],e.normalize(h,[k.x-f.x,k.y-f.y])):h=g;else{console.error("Vertex index 'i' out of range.");return}d||0!==b?d||b!==c.length-1?this._computeJoinExtrudeVectors(a,
g,h):this._computeCapExtrudeVectors(a,g,h,e.CapPosition.END):this._computeCapExtrudeVectors(a,g,h,e.CapPosition.START)};b.prototype._computeCapExtrudeVectors=function(a,b,c,d){switch(this.capType){case g.CapType.BUTT:w.buttCap(a,b,c);break;case g.CapType.ROUND:var f=e.getNumberOfSlices(Math.PI);w.roundCap(a,b,c,d,f,d===e.CapPosition.START?-1:1);break;case g.CapType.SQUARE:this.isDashed?w.squareCapForDashedLines(a,b,c,d):w.squareCap(a,b,c,d);break;default:x.error("Encountered unknown cap type: "+this.capType+
", defaulting to BUTT"),w.buttCap(a,b,c)}};b.prototype._computeJoinExtrudeVectors=function(a,b,c){var d=e.getRads(b,c);if(d>Math.PI-.05)w.rectJoin(a,b,c);else if(this.joinType===g.JoinType.MITER||.1>d).05>d?w.fastMiterJoin(a,b,c):d<e.MITER_SAFE_RADS?w.miterJoin(a,b,c):w.bevelJoin(a,b,c,e.SYSTEM_MAG_LIMIT);else if(this.joinType===g.JoinType.BEVEL)w.bevelJoin(a,b,c,1);else if(this.joinType===g.JoinType.ROUND){var f=e.getNumberOfSlices(d);2.3>d?2>f||.5>d?w.bevelJoin(a,b,c,1):w.roundJoin(a,b,c,f):w.unitRoundJoin(a,
b,c,f)}};return b}(y.default);a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix-2/gl-matrix ../../color ../../definitions ../../enums ../../number ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),function(d,a,l,f,h,k,b,g,p,e,c,n){Object.defineProperty(a,"__esModule",{value:!0});var m=
f.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate");d=function(a){function d(b,c,d,f,g,h,l,m,n,q,y){var t=a.call(this)||this;t.geometryType=p.WGLGeometryType.MARKER;var u=k.vec2f32.create(),w=k.mat2df32.create();l=0===l?0:Math.max(l,2);m=0===m?0:Math.max(m,2);var A=y.sdf?.5:1;k.mat2d.translate(w,w,k.vec2f32.fromValues(A*d,A*-f));g&&k.mat2d.rotate(w,w,3.14159265359/180*g);t._materialStore=b;t.vvFlags=c;t._materialId=b.createSpriteMaterial(y,t.geometryType,c);t._fillColor=h;t._outlineColor=n;
t._sizeOutlineWidth=e.i8888to32(l,m,q,0);b=Math.round(y.rect.x/4)-128;c=Math.round(y.rect.y/4)-128;g=b+Math.round(y.rect.width/4);y=c+Math.round(y.rect.height/4);k.vec2.set(u,-.5*l,-.5*m);k.vec2.transformMat2d(u,u,w);t._offsetAndTexUpperLeft=e.i8888to32(u[0],u[1],b,c);k.vec2.set(u,.5*l,-.5*m);k.vec2.transformMat2d(u,u,w);t._offsetAndTexUpperRight=e.i8888to32(u[0],u[1],g,c);k.vec2.set(u,-.5*l,.5*m);k.vec2.transformMat2d(u,u,w);t._offsetAndTexBottomLeft=e.i8888to32(u[0],u[1],b,y);k.vec2.set(u,.5*l,
.5*m);k.vec2.transformMat2d(u,u,w);t._offsetAndTexBottomRight=e.i8888to32(u[0],u[1],g,y);t.height=m;t.width=l;t.xOffset=d;t.yOffset=f;return t}l(d,a);d.fromPictureMarker=function(a,b,c,e,f){f=Math.round(h.pt2px(c.width));var k=Math.round(h.pt2px(c.height)),l=g.PICTURE_FILL_COLOR,m=Math.round(h.pt2px(c.xoffset||0)),n=Math.round(h.pt2px(c.yoffset||0));return new d(a,b,m,n,c.angle,l,f,k,0,0,e)};d.fromSimpleMarker=function(a,c,e,f,g){g=b.premultiplyAlphaRGBA(e.color);var k=Math.round(h.pt2px(e.size)),
l=Math.round(h.pt2px(e.xoffset||0)),m=Math.round(h.pt2px(e.yoffset||0)),n=e.outline,p=(n&&n.color&&b.premultiplyAlphaRGBA(n.color))|0,n=(n&&n.width&&Math.round(h.pt2px(n.width)))|0;return new d(a,c,l,m,e.angle,g,k,k,p,n,f)};d.prototype.writeMesh=function(a,b,d,e,f,g,h){g=this._materialStore.get(this._materialId);var k=b.indexVector,l=b.get("geometry");b=b.get("visibility");var n=new c(e,this.geometryType,this._materialId),p=this._getOffset(l,g);a.push(n);n.vertexFrom=p;n.indexFrom=k.length;switch(d){case "esriGeometryPoint":d=
f.geometry;a=d.x;d=d.y;this._writeVertices(n,l,b,e,this._getPos(a,d),g,h);this._writeIndices(n,k,p);break;case "esriGeometryPolyline":this._writeMany(n,k,l,b,p,e,f.geometry.paths[0],g,h);break;case "esriGeometryPolygon":(d=f.centroid)?(a=d.x,d=d.y,this._writeVertices(n,l,b,e,this._getPos(a,d),g,h),this._writeIndices(n,k,p)):m.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(n,k,l,b,p,e,f.geometry.points,g,h);break;default:m.error("Unable to handle geometryType: "+
d)}};d.prototype._getPos=function(a,b){return e.i1616to32(a,b)};d.prototype._writeMany=function(a,b,c,d,e,f,g,h,k){for(var l=0,m=0,n=0,p=0;p<g.length;p++){var q=g[p],t=q[0],q=q[1];this._writeVertices(a,c,d,f,this._getPos(t+l,q+m),h,k);this._writeIndices(a,b,e+n);l+=t;m+=q;n+=4}};d.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?10:6;return a.length/b};d.prototype._writeVertices=function(a,b,c,d,e,f,g){b.push(e);b.push(this._offsetAndTexUpperLeft);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);
b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(255);b.push(e);b.push(this._offsetAndTexUpperRight);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(255);b.push(e);b.push(this._offsetAndTexBottomLeft);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(255);b.push(e);b.push(this._offsetAndTexBottomRight);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);
b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(255);a.vertexCount+=4};d.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[p.VVType.SIZE]),a.push(b[p.VVType.COLOR]),a.push(b[p.VVType.OPACITY]),a.push(b[p.VVType.ROTATION]))};d.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return d}(n.default);a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":function(){define("require exports ../../../../../../core/tsSupport/awaiterHelper ../../../../../../core/tsSupport/generatorHelper ../../../../../../symbols ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/promiseUtils ../../enums ./WGLFillTemplate ./WGLLineTemplate ./WGLMarkerTemplate ./WGLTextTemplate ../../util/BidiText ../../util/Lock ../../util/Result ../../util/vvFlagUtils".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t){function u(a,b){var c=a.length;a.push(null);b.then(function(b){return a[c]=b});return a}Object.defineProperty(a,"__esModule",{value:!0});var z=b.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),D=[],B=new h.SimpleFillSymbol({color:"black",outline:null}),w=new h.SimpleMarkerSymbol({size:"14px",color:"black",outline:null}),C=new h.SimpleLineSymbol({color:"black",width:"2px"});d=function(){function a(a,b){this._templateIdCounter=this._idCounter=
0;this._idToTemplateGroup=new Map;this._symbolToTemplate=new Map;this._fetchQueue=[];this._idToResolver=new Map;this._pixelRatio=1;this._lock=new y.default;this._fetchResource=a;this._pixelRatio=b}Object.defineProperty(a.prototype,"_markerError",{get:function(){return this._errorTemplates.marker[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_fillError",{get:function(){return this._errorTemplates.fill[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_lineError",
{get:function(){return this._errorTemplates.line[0]},enumerable:!0,configurable:!0});a.prototype.createTemplateGroup=function(a,b,c,d){this._initErrorTemplates(c);var e=this._hashSymbol(a);if(!this._symbolToTemplate.has(e)){var f=[];b&&this._createMeshTemplates(f,c,b,d,this._pixelRatio,!0);this._createMeshTemplates(f,c,a,d,this._pixelRatio,!1);a=this._createGroupId();this._idToTemplateGroup.set(a,f);this._symbolToTemplate.set(e,a)}return this._symbolToTemplate.get(e)};a.prototype.getTemplateGroup=
function(a){return this._idToTemplateGroup.has(a)?this._idToTemplateGroup.get(a):D};a.prototype.finalize=function(){return this._fetchQueue.length||this._lock.isHeld()?y.withLock(this._lock,this._fetchAllQueuedResources.bind(this)):g.resolve()};a.prototype._initErrorTemplates=function(a){if(!this._errorTemplates){var b=this._pixelRatio,c=this._createMeshTemplates([],a,B,0,b,!1),d=this._createMeshTemplates([],a,w,0,b,!1);a=this._createMeshTemplates([],a,C,0,b,!1);this._errorTemplates={fill:c,marker:d,
line:a}}};a.prototype._fetchAllQueuedResources=function(){var a=this;if(!this._fetchQueue.length)return g.resolve();var b=this._fetchQueue;this._fetchQueue=[];return this._fetchResource(b).then(function(b){for(var c=0;c<b.length;c++){var d=b[c],e=d.id,d=d.mosaicItem;a._idToResolver.get(e)(d);a._idToResolver.delete(e)}}).catch(function(c){"cancel"===c.dojoType?a._fetchQueue=a._fetchQueue.concat(b):z.error(new k("mapview-template-store","Unable to fetch requested texture resources",c))})};a.prototype._createGroupId=
function(){return this._idCounter++};a.prototype._createTemplateId=function(){return this._templateIdCounter++};a.prototype._getCodepoints=function(a){a=q.bidiText(a.text)[0];for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c));return b};a.prototype._getMosaicItem=function(a){var b=this,c=this._createTemplateId(),d="text"===a.type&&this._getCodepoints(a),e=g.create(function(a){return b._idToResolver.set(c,a)});this._fetchQueue.push({symbol:a.toJSON(),id:c,glyphIds:d});return e};a.prototype._hashSymbol=
function(a){return a.id?a.id:JSON.stringify(a)};a.prototype._createSMS=function(a,b,c,d){return l(this,void 0,void 0,function(){var e,g;return f(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(b)];case 1:return e=f.sent().spriteMosaicItem,g=t.getMarkerVVFlags(c),x.ok(e,z)?[2,n.default.fromSimpleMarker(a,g,b,e,d)]:[2,this._markerError]}})})};a.prototype._createPMS=function(a,b,c,d){return l(this,void 0,void 0,function(){var e,g;return f(this,function(f){switch(f.label){case 0:return[4,
this._getMosaicItem(b)];case 1:return e=f.sent().spriteMosaicItem,g=t.getMarkerVVFlags(c),x.ok(e,z)?[2,n.default.fromPictureMarker(a,g,b,e,d)]:[2,this._markerError]}})})};a.prototype._createSFS=function(a,b,c,d,g){return l(this,void 0,void 0,function(){var h,k;return f(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(b)];case 1:return h=f.sent().spriteMosaicItem,k=t.getFillVVFlags(c),x.ok(h,z)?[2,e.default.fromSimpleFill(a,k,b,h,d,g)]:[2,this._fillError]}})})};a.prototype._createPFS=
function(a,b,c,d,g){return l(this,void 0,void 0,function(){var h,k;return f(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(b)];case 1:return h=f.sent().spriteMosaicItem,k=t.getFillVVFlags(c),x.ok(h,z)?[2,e.default.fromPictureFill(a,k,b,h,d,g)]:[2,this._fillError]}})})};a.prototype._createSLS=function(a,b,d,e,g){return l(this,void 0,void 0,function(){var h,k;return f(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(b)];case 1:return h=f.sent().spriteMosaicItem,
k=t.getLineVVFlags(d,g),x.ok(h,z)?[2,c.default.fromSimpleLine(a,k,b,h,e)]:[2,this._lineError]}})})};a.prototype._createTS=function(a,b,c,d){return l(this,void 0,void 0,function(){var e,g;return f(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(b)];case 1:return e=f.sent().glyphMosaicItems,g=t.getTextVVFlags(c),[2,m.default.fromText(a,g,b,d,e)]}})})};a.prototype._createMeshTemplates=function(a,b,c,d,e,f){if(-1!==c.type.indexOf("3d"))return z.error("3D symbols are not supported with MapView"),
a;switch(c.type){case p.EsriSymbolTypeKebab.SIMPLE_MARKER:return u(a,this._createSMS(b,c,d,e));case p.EsriSymbolTypeKebab.PICTURE_MARKER:return u(a,this._createPMS(b,c,d,e));case p.EsriSymbolTypeKebab.SIMPLE_FILL:return u(a,this._createSFS(b,c,d,e,f)),c.outline&&u(a,this._createSLS(b,c.outline,d,e,!0)),a;case p.EsriSymbolTypeKebab.PICTURE_FILL:return u(a,this._createPFS(b,c,d,e,f)),c.outline&&u(a,this._createSLS(b,c.outline,d,e,!0)),a;case p.EsriSymbolTypeKebab.SIMPLE_LINE:return u(a,this._createSLS(b,
c,d,e,!1));case p.EsriSymbolTypeKebab.TEXT:return u(a,this._createTS(b,c,d,e));default:return z.error("Unable to create mesh template for unknown symbol type: "+c.type),a}};return a}();a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/earcut/earcut ../../color ../../definitions ../../enums ../../enums ../../number ../../TileClipper ../../WGLDisplayRecord ../Tesselator ./WGLMeshTemplate".split(" "),
function(d,a,l,f,h,k,b,g,p,e,c,n,m,q,y){Object.defineProperty(a,"__esModule",{value:!0});var x=f.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),t=[],u=[];d=function(a){function d(b,c,d,e,f,h,k,l,m){var t=a.call(this)||this;t.fillColor=e;t.tl=f;t.br=h;t.aux1=k;t.aux2=l;t.isBFS=m;t.geometryType=p.WGLGeometryType.FILL;t.useLibtess=!0;t._tesselator=new q.default;t.vvFlags=c;t._materialStore=b;t.materialId=t._materialStore.createSpriteMaterial(d,t.geometryType,c);t._tileClipper=
new n.TileClipper(0,0,0,1,8);t._tileClipper.setExtent(g.TILE_SIZE);return t}l(d,a);d.fromSimpleFill=function(a,e,f,g,h,k){void 0===k&&(k=!1);f=(h=f.color)&&"none"!==f.style&&b.premultiplyAlphaRGBA(h)||0;if(!g)return new d(a,e,null,f,0,0,0,0,k);h=g.rect;var l=h.x+1,m=h.y+1,n=h.x+1+g.width,p=h.y+1+g.height;h=c.i1616to32(l,m);var q=c.i1616to32(n,p),l=c.i8888to32(c.nextHighestPowerOfTwo(n-l),c.nextHighestPowerOfTwo(p-m),0,0),m=c.i1616to32(128,128);return new d(a,e,g,f,h,q,l,m,k)};d.fromPictureFill=function(a,
b,e,f,k,l){void 0===l&&(l=!1);k=g.PICTURE_FILL_COLOR;var m=f.rect,n=m.x+1,p=m.y+1,m=n+f.width,q=p+f.height,n=c.i1616to32(n,p),m=c.i1616to32(m,q),q=c.nextHighestPowerOfTwo(h.pt2px(e.width));255<q&&(q=255);p=c.nextHighestPowerOfTwo(h.pt2px(e.height));255<p&&(p=255);var t=h.pt2px(e.xoffset)+128;255<t&&(t=255);var u=h.pt2px(-e.yoffset)+128;255<u&&(u=255);q=c.i8888to32(q,p,t,u);e=c.i1616to32(128*e.xscale,128*e.yscale);return new d(a,b,f,k,n,m,q,e,l)};d.prototype.writeMesh=function(a,b,c,d,f,g,h){t.length=
0;if(this.vvFlags&e.WGLVVFlag.COLOR||0!==this.fillColor)if("esriGeometryPolygon"!==c)x.error("Unable to handle geometryType: "+c);else{var k=f.geometry,k=(f=this._isClippingRequired(k))?this._clip(k,!this.useLibtess):k.rings;return this.useLibtess?this._writeMeshLibtess(a,b,c,d,k,f,g,h):this._writeMeshEarcut(a,b,c,d,k,f,g,h)}};d.prototype._isClippingRequired=function(a){var b=g.TILE_SIZE+8,c=0;for(a=a.rings;c<a.length;c++){var d=a[c],e=d.length;if(!(3>e)){var f=d[0][0],h=d[0][1];if(-8>f||f>b||-8>
h||h>b)return!0;for(var k=1;k<e;++k)if(f+=d[k][0],h+=d[k][1],-8>f||f>b||-8>h||h>b)return!0}}return!1};d.prototype._clip=function(a,b){var c;this._tileClipper.reset(3);for(var d=0,e=a.rings;d<e.length;d++){var f=e[d],g=f.length;if(!(3>g)){a=f[0][0];c=f[0][1];this._tileClipper.moveTo(a,c);for(var h=1;h<g;++h)a+=f[h][0],c+=f[h][1],this._tileClipper.lineTo(a,c);this._tileClipper.close()}}return this._tileClipper.result(b)};d.prototype._writeMeshLibtess=function(a,b,c,d,e,f,g,h){if(e&&e.length){c=this._materialStore.get(this.materialId);
g=[];var k=b.indexVector,l=b.get("geometry");b=b.get("visibility");var n=new m(d,this.geometryType,this.materialId),p=this._getOffset(l,c);n.vertexFrom=p;n.indexFrom=k.length;this._tesselator.beginPolygon(t,g);for(var q=0;q<e.length;q++){var u=e[q];if(!(3>u.length)){this._tesselator.beginContour();var w=void 0,z=void 0;f?(w=u[0].x,z=u[0].y):(w=u[0][0],z=u[0][1]);var x=[w,z,0];this._tesselator.addVertex(x,x);for(x=1;x<u.length-1;x++){var y=void 0,B=void 0;f?(w=u[x].x,z=u[x].y):(y=u[x][0],B=u[x][1],
w+=y,z+=B);y=[w,z,0];this._tesselator.addVertex(y,y)}this._tesselator.endContour()}}this._tesselator.endPolygon();this._writeVerticesLibTess(n,l,b,d,t,c,h);this._writeIndicesLibTess(n,k,p,g);0<n.indexCount&&a.push(n)}};d.prototype._writeMeshEarcut=function(a,b,c,d,e,f,g,h){if(e&&e.length){c=this._materialStore.get(this.materialId);g=b.indexVector;var k=b.get("geometry");b=b.get("visibility");var l=new m(d,this.geometryType,this.materialId),n=this._getOffset(k,c);l.vertexFrom=n;l.indexFrom=g.length;
a.push(l);for(var p=a=0,q=0;q<e.length;q++){var w=e[q],z=p,x=void 0,y=void 0;f?(x=w[0].x,y=w[0].y):(x=w[0][0],y=w[0][1]);t[p++]=x;t[p++]=y;for(var A=0,B=1;B<w.length;++B){var C=void 0,D=void 0;f?(C=x,D=y,x=w[B].x,y=w[B].y,C=x-C,D=y-D):(C=w[B][0],D=w[B][1],x+=C,y+=D);A-=C*(y+y+D);t[p++]=x;t[p++]=y}0<A?(0<z-a&&(this._write(l,g,k,b,n,d,t,u,a,z,c,h),a=z),u.length=0):0>A?0<z-a?u.push(.5*(z-a)):p=z:p=z}0<p-a&&this._write(l,g,k,b,n,d,t,u,a,p,c,h);t.length=u.length=0}};d.prototype._write=function(a,b,c,d,
e,f,g,h,l,m,n,p){e=k(g.slice(l,m),h,2);e.length&&(l=this._getOffset(c,n),this._writeVertices(a,c,d,f,g,h,n,p),this._writeIndices(a,b,l,e))};d.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?9:7;return a.length/b};d.prototype._writeVertices=function(a,b,d,e,f,g,h,k){for(g=0;g<f.length;g+=2){var l=c.i1616to32(f[g],f[g+1]);b.push(l);b.push(e);b.push(this.fillColor);b.push(this.tl);b.push(this.br);b.push(this.aux1);b.push(this.aux2);this._writeVV(b,k,h);d.push(255);a.vertexCount++}};d.prototype._writeIndices=
function(a,b,c,d){for(var e=0;e<d.length;e+=3)b.push(c+d[e]),b.push(c+d[e+1]),b.push(c+d[e+2]),a.indexCount+=3};d.prototype._writeVerticesLibTess=function(a,b,d,e,f,g,h){for(var k=0;k<f.length;k+=2){var l=c.i1616to32(f[k],f[k+1]);b.push(l);b.push(e);b.push(this.fillColor);b.push(this.tl);b.push(this.br);b.push(this.aux1);b.push(this.aux2);this._writeVV(b,h,g);d.push(255);a.vertexCount++}};d.prototype._writeIndicesLibTess=function(a,b,c,d){for(var e=0;e<d.length;e++)b.push(c+d[e]),a.indexCount++};
d.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(this.isBFS?(a.writeF32(1E-30),a.writeF32(1E-30)):(a.push(b[p.VVType.COLOR]),a.push(b[p.VVType.OPACITY])))};return d}(y.default);a.default=d})},"esri/views/2d/engine/webgl/mesh/Tesselator":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/libs/libtess/libtess"],function(d,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});var h=l.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");
d=function(){function a(){this._indexCounter=this._currentVertexIndex=0;this._triangleIndices=[-1,-1,-1];this.glu=new f.GluTesselator;this.glu.gluTessCallback(f.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_ERROR,
this._errorcallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this));this.glu.gluTessProperty(f.gluEnum.GLU_TESS_WINDING_RULE,f.windingRule.GLU_TESS_WINDING_ODD)}a.prototype.beginPolygon=function(a,d){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(a);this._indices=d};a.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};a.prototype.beginContour=
function(){this.glu.gluTessBeginContour()};a.prototype.endContour=function(){this.glu.gluTessEndContour()};a.prototype.addVertex=function(a,d){this.glu.gluTessVertex(a,d)};a.prototype._vertexCallback=function(a,d){d[d.length]=a[0];d[d.length]=a[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(a=0;3>a;a++)-1===this._triangleIndices[a]&&(this._triangleIndices[a]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[a];this._currentVertexIndex=
0}else this._currentVertexIndex++};a.prototype._begincallback=function(a){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._currentVertexIndex=0};a.prototype._endcallback=function(){this._currentVertexIndex=0};a.prototype._errorcallback=function(a){h.error("Encountered error during tesselation: "+a)};a.prototype._combinecallback=function(a,d,f){return[a[0],a[1],a[2]]};a.prototype._edgeCallback=function(a){};return a}();a.default=d})},"esri/core/libs/libtess/libtess":function(){define([],
function(){var d={DEBUG:!1,assert:function(a,l){if(d.DEBUG&&!a)throw Error("Assertion failed"+(l?": "+l:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,
GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,
GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};d.geom.vertEq=function(a,d){return a.s===d.s&&a.t===d.t};d.geom.vertLeq=function(a,d){return a.s<d.s||a.s===d.s&&a.t<=d.t};d.geom.edgeEval=function(a,l,f){d.assert(d.geom.vertLeq(a,l)&&d.geom.vertLeq(l,f));var h=l.s-a.s,k=f.s-l.s;return 0<h+k?h<k?l.t-a.t+h/(h+k)*(a.t-f.t):l.t-f.t+k/(h+k)*(f.t-a.t):0};d.geom.edgeSign=function(a,l,f){d.assert(d.geom.vertLeq(a,l)&&d.geom.vertLeq(l,f));
var h=l.s-a.s,k=f.s-l.s;return 0<h+k?(l.t-f.t)*h+(l.t-a.t)*k:0};d.geom.transLeq=function(a,d){return a.t<d.t||a.t===d.t&&a.s<=d.s};d.geom.transEval=function(a,l,f){d.assert(d.geom.transLeq(a,l)&&d.geom.transLeq(l,f));var h=l.t-a.t,k=f.t-l.t;return 0<h+k?h<k?l.s-a.s+h/(h+k)*(a.s-f.s):l.s-f.s+k/(h+k)*(f.s-a.s):0};d.geom.transSign=function(a,l,f){d.assert(d.geom.transLeq(a,l)&&d.geom.transLeq(l,f));var h=l.t-a.t,k=f.t-l.t;return 0<h+k?(l.s-f.s)*h+(l.s-a.s)*k:0};d.geom.edgeGoesLeft=function(a){return d.geom.vertLeq(a.dst(),
a.org)};d.geom.edgeGoesRight=function(a){return d.geom.vertLeq(a.org,a.dst())};d.geom.vertL1dist=function(a,d){return Math.abs(a.s-d.s)+Math.abs(a.t-d.t)};d.geom.vertCCW=function(a,d,f){return 0<=a.s*(d.t-f.t)+d.s*(f.t-a.t)+f.s*(a.t-d.t)};d.geom.interpolate_=function(a,d,f,h){a=0>a?0:a;f=0>f?0:f;return a<=f?0===f?(d+h)/2:d+a/(a+f)*(h-d):h+f/(a+f)*(d-h)};d.geom.edgeIntersect=function(a,l,f,h,k){var b,g;d.geom.vertLeq(a,l)||(b=a,a=l,l=b);d.geom.vertLeq(f,h)||(b=f,f=h,h=b);d.geom.vertLeq(a,f)||(b=a,
a=f,f=b,b=l,l=h,h=b);d.geom.vertLeq(f,l)?d.geom.vertLeq(l,h)?(b=d.geom.edgeEval(a,f,l),g=d.geom.edgeEval(f,l,h),0>b+g&&(b=-b,g=-g),k.s=d.geom.interpolate_(b,f.s,g,l.s)):(b=d.geom.edgeSign(a,f,l),g=-d.geom.edgeSign(a,h,l),0>b+g&&(b=-b,g=-g),k.s=d.geom.interpolate_(b,f.s,g,h.s)):k.s=(f.s+l.s)/2;d.geom.transLeq(a,l)||(b=a,a=l,l=b);d.geom.transLeq(f,h)||(b=f,f=h,h=b);d.geom.transLeq(a,f)||(b=a,a=f,f=b,b=l,l=h,h=b);d.geom.transLeq(f,l)?d.geom.transLeq(l,h)?(b=d.geom.transEval(a,f,l),g=d.geom.transEval(f,
l,h),0>b+g&&(b=-b,g=-g),k.t=d.geom.interpolate_(b,f.t,g,l.t)):(b=d.geom.transSign(a,f,l),g=-d.geom.transSign(a,h,l),0>b+g&&(b=-b,g=-g),k.t=d.geom.interpolate_(b,f.t,g,h.t)):k.t=(f.t+l.t)/2};d.mesh={};d.mesh.makeEdge=function(a){var l=d.mesh.makeEdgePair_(a.eHead);d.mesh.makeVertex_(l,a.vHead);d.mesh.makeVertex_(l.sym,a.vHead);d.mesh.makeFace_(l,a.fHead);return l};d.mesh.meshSplice=function(a,l){var f=!1,h=!1;a!==l&&(l.org!==a.org&&(h=!0,d.mesh.killVertex_(l.org,a.org)),l.lFace!==a.lFace&&(f=!0,d.mesh.killFace_(l.lFace,
a.lFace)),d.mesh.splice_(l,a),h||(d.mesh.makeVertex_(l,a.org),a.org.anEdge=a),f||(d.mesh.makeFace_(l,a.lFace),a.lFace.anEdge=a))};d.mesh.deleteEdge=function(a){var l=a.sym,f=!1;a.lFace!==a.rFace()&&(f=!0,d.mesh.killFace_(a.lFace,a.rFace()));a.oNext===a?d.mesh.killVertex_(a.org,null):(a.rFace().anEdge=a.oPrev(),a.org.anEdge=a.oNext,d.mesh.splice_(a,a.oPrev()),f||d.mesh.makeFace_(a,a.lFace));l.oNext===l?(d.mesh.killVertex_(l.org,null),d.mesh.killFace_(l.lFace,null)):(a.lFace.anEdge=l.oPrev(),l.org.anEdge=
l.oNext,d.mesh.splice_(l,l.oPrev()));d.mesh.killEdge_(a)};d.mesh.addEdgeVertex=function(a){var l=d.mesh.makeEdgePair_(a),f=l.sym;d.mesh.splice_(l,a.lNext);l.org=a.dst();d.mesh.makeVertex_(f,l.org);l.lFace=f.lFace=a.lFace;return l};d.mesh.splitEdge=function(a){var l=d.mesh.addEdgeVertex(a).sym;d.mesh.splice_(a.sym,a.sym.oPrev());d.mesh.splice_(a.sym,l);a.sym.org=l.org;l.dst().anEdge=l.sym;l.sym.lFace=a.rFace();l.winding=a.winding;l.sym.winding=a.sym.winding;return l};d.mesh.connect=function(a,l){var f=
!1,h=d.mesh.makeEdgePair_(a),k=h.sym;l.lFace!==a.lFace&&(f=!0,d.mesh.killFace_(l.lFace,a.lFace));d.mesh.splice_(h,a.lNext);d.mesh.splice_(k,l);h.org=a.dst();k.org=l.org;h.lFace=k.lFace=a.lFace;a.lFace.anEdge=k;f||d.mesh.makeFace_(h,a.lFace);return h};d.mesh.zapFace=function(a){var l=a.anEdge,f=l.lNext,h;do if(h=f,f=h.lNext,h.lFace=null,null===h.rFace()){h.oNext===h?d.mesh.killVertex_(h.org,null):(h.org.anEdge=h.oNext,d.mesh.splice_(h,h.oPrev()));var k=h.sym;k.oNext===k?d.mesh.killVertex_(k.org,null):
(k.org.anEdge=k.oNext,d.mesh.splice_(k,k.oPrev()));d.mesh.killEdge_(h)}while(h!==l);l=a.prev;a=a.next;a.prev=l;l.next=a};d.mesh.meshUnion=function(a,d){var f=a.fHead,h=a.vHead,k=a.eHead,b=d.fHead,g=d.vHead;d=d.eHead;b.next!==b&&(f.prev.next=b.next,b.next.prev=f.prev,b.prev.next=f,f.prev=b.prev);g.next!==g&&(h.prev.next=g.next,g.next.prev=h.prev,g.prev.next=h,h.prev=g.prev);d.next!==d&&(k.sym.next.sym.next=d.next,d.next.sym.next=k.sym.next,d.sym.next.sym.next=k,k.sym.next=d.sym.next);return a};d.mesh.deleteMesh=
function(a){};d.mesh.makeEdgePair_=function(a){var l=new d.GluHalfEdge,f=new d.GluHalfEdge,h=a.sym.next;f.next=h;h.sym.next=l;l.next=a;a.sym.next=f;l.sym=f;l.oNext=l;l.lNext=f;f.sym=l;f.oNext=f;return f.lNext=l};d.mesh.splice_=function(a,d){var f=a.oNext,h=d.oNext;f.sym.lNext=d;h.sym.lNext=a;a.oNext=h;d.oNext=f};d.mesh.makeVertex_=function(a,l){var f=l.prev,h=new d.GluVertex(l,f);f.next=h;l.prev=h;l=h.anEdge=a;do l.org=h,l=l.oNext;while(l!==a)};d.mesh.makeFace_=function(a,l){var f=l.prev,h=new d.GluFace(l,
f);f.next=h;l.prev=h;h.anEdge=a;h.inside=l.inside;l=a;do l.lFace=h,l=l.lNext;while(l!==a)};d.mesh.killEdge_=function(a){var d=a.next;a=a.sym.next;d.sym.next=a;a.sym.next=d};d.mesh.killVertex_=function(a,d){var f=a.anEdge,h=f;do h.org=d,h=h.oNext;while(h!==f);d=a.prev;a=a.next;a.prev=d;d.next=a};d.mesh.killFace_=function(a,d){var f=a.anEdge,h=f;do h.lFace=d,h=h.lNext;while(h!==f);d=a.prev;a=a.next;a.prev=d;d.next=a};d.normal={};d.normal.S_UNIT_X_=1;d.normal.S_UNIT_Y_=0;d.normal.projectPolygon=function(a,
l,f,h){var k=!1,b=[l,f,h];0===l&&0===f&&0===h&&(d.normal.computeNormal_(a,b),k=!0);f=d.normal.longAxis_(b);l=a.mesh.vHead;if(d.TRUE_PROJECT){d.normal.normalize_(b);h=[0,0,0];var g=[0,0,0];h[f]=0;h[(f+1)%3]=d.normal.S_UNIT_X_;h[(f+2)%3]=d.normal.S_UNIT_Y_;f=d.normal.dot_(h,b);h[0]-=f*b[0];h[1]-=f*b[1];h[2]-=f*b[2];d.normal.normalize_(h);g[0]=b[1]*h[2]-b[2]*h[1];g[1]=b[2]*h[0]-b[0]*h[2];g[2]=b[0]*h[1]-b[1]*h[0];d.normal.normalize_(g);for(b=l.next;b!==l;b=b.next)b.s=d.normal.dot_(b.coords,h),b.t=d.normal.dot_(b.coords,
g)}else for(h=(f+1)%3,g=(f+2)%3,f=0<b[f]?1:-1,b=l.next;b!==l;b=b.next)b.s=b.coords[h],b.t=f*b.coords[g];k&&d.normal.checkOrientation_(a)};d.normal.dot_=function(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]};d.normal.normalize_=function(a){var l=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];d.assert(0<l);l=Math.sqrt(l);a[0]/=l;a[1]/=l;a[2]/=l};d.normal.longAxis_=function(a){var d=0;Math.abs(a[1])>Math.abs(a[0])&&(d=1);Math.abs(a[2])>Math.abs(a[d])&&(d=2);return d};d.normal.computeNormal_=function(a,l){var f=[-2*d.GLU_TESS_MAX_COORD,
-2*d.GLU_TESS_MAX_COORD,-2*d.GLU_TESS_MAX_COORD],h=[2*d.GLU_TESS_MAX_COORD,2*d.GLU_TESS_MAX_COORD,2*d.GLU_TESS_MAX_COORD],k=[],b=[],g;a=a.mesh.vHead;for(g=a.next;g!==a;g=g.next)for(var p=0;3>p;++p){var e=g.coords[p];e<h[p]&&(h[p]=e,b[p]=g);e>f[p]&&(f[p]=e,k[p]=g)}g=0;f[1]-h[1]>f[0]-h[0]&&(g=1);f[2]-h[2]>f[g]-h[g]&&(g=2);if(h[g]>=f[g])l[0]=0,l[1]=0,l[2]=1;else{f=0;h=b[g];k=k[g];b=[0,0,0];h=[h.coords[0]-k.coords[0],h.coords[1]-k.coords[1],h.coords[2]-k.coords[2]];p=[0,0,0];for(g=a.next;g!==a;g=g.next)p[0]=
g.coords[0]-k.coords[0],p[1]=g.coords[1]-k.coords[1],p[2]=g.coords[2]-k.coords[2],b[0]=h[1]*p[2]-h[2]*p[1],b[1]=h[2]*p[0]-h[0]*p[2],b[2]=h[0]*p[1]-h[1]*p[0],e=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],e>f&&(f=e,l[0]=b[0],l[1]=b[1],l[2]=b[2]);0>=f&&(l[0]=l[1]=l[2]=0,l[d.normal.longAxis_(h)]=1)}};d.normal.checkOrientation_=function(a){for(var d=0,f=a.mesh.fHead,h=f.next;h!==f;h=h.next){var k=h.anEdge;if(!(0>=k.winding)){do d+=(k.org.s-k.dst().s)*(k.org.t+k.dst().t),k=k.lNext;while(k!==h.anEdge)}}if(0>d)for(a=a.mesh.vHead,
d=a.next;d!==a;d=d.next)d.t=-d.t};d.render={};d.render.renderMesh=function(a,l,f){for(var h=!1,k=-1,b=l.fHead.prev;b!==l.fHead;b=b.prev)if(b.inside){h||(a.callBeginCallback(d.primitiveType.GL_TRIANGLES),h=!0);var g=b.anEdge;d.assert(g.lNext.lNext.lNext===g,"renderMesh called with non-triangulated mesh");do{if(f){var p=g.rFace().inside?0:1;k!==p&&(k=p,a.callEdgeFlagCallback(!!k))}a.callVertexCallback(g.org.data);g=g.lNext}while(g!==b.anEdge)}h&&a.callEndCallback()};d.render.renderBoundary=function(a,
l){for(var f=l.fHead.next;f!==l.fHead;f=f.next)if(f.inside){a.callBeginCallback(d.primitiveType.GL_LINE_LOOP);var h=f.anEdge;do a.callVertexCallback(h.org.data),h=h.lNext;while(h!==f.anEdge);a.callEndCallback()}};d.sweep={};d.sweep.SENTINEL_COORD_=4*d.GLU_TESS_MAX_COORD;d.sweep.TOLERANCE_NONZERO_=!1;d.sweep.computeInterior=function(a){a.fatalError=!1;d.sweep.removeDegenerateEdges_(a);d.sweep.initPriorityQ_(a);d.sweep.initEdgeDict_(a);for(var l;null!==(l=a.pq.extractMin());){for(;;){var f=a.pq.minimum();
if(null===f||!d.geom.vertEq(f,l))break;f=a.pq.extractMin();d.sweep.spliceMergeVertices_(a,l.anEdge,f.anEdge)}d.sweep.sweepEvent_(a,l)}l=a.dict.getMin().getKey();a.event=l.eUp.org;d.sweep.doneEdgeDict_(a);d.sweep.donePriorityQ_(a);d.sweep.removeDegenerateFaces_(a.mesh);a.mesh.checkMesh()};d.sweep.addWinding_=function(a,d){a.winding+=d.winding;a.sym.winding+=d.sym.winding};d.sweep.edgeLeq_=function(a,l,f){a=a.event;l=l.eUp;f=f.eUp;if(l.dst()===a)return f.dst()===a?d.geom.vertLeq(l.org,f.org)?0>=d.geom.edgeSign(f.dst(),
l.org,f.org):0<=d.geom.edgeSign(l.dst(),f.org,l.org):0>=d.geom.edgeSign(f.dst(),a,f.org);if(f.dst()===a)return 0<=d.geom.edgeSign(l.dst(),a,l.org);l=d.geom.edgeEval(l.dst(),a,l.org);a=d.geom.edgeEval(f.dst(),a,f.org);return l>=a};d.sweep.deleteRegion_=function(a,l){l.fixUpperEdge&&d.assert(0===l.eUp.winding);l.eUp.activeRegion=null;a.dict.deleteNode(l.nodeUp);l.nodeUp=null};d.sweep.fixUpperEdge_=function(a,l){d.assert(a.fixUpperEdge);d.mesh.deleteEdge(a.eUp);a.fixUpperEdge=!1;a.eUp=l;l.activeRegion=
a};d.sweep.topLeftRegion_=function(a){var l=a.eUp.org;do a=a.regionAbove();while(a.eUp.org===l);a.fixUpperEdge&&(l=d.mesh.connect(a.regionBelow().eUp.sym,a.eUp.lNext),d.sweep.fixUpperEdge_(a,l),a=a.regionAbove());return a};d.sweep.topRightRegion_=function(a){var d=a.eUp.dst();do a=a.regionAbove();while(a.eUp.dst()===d);return a};d.sweep.addRegionBelow_=function(a,l,f){var h=new d.ActiveRegion;h.eUp=f;h.nodeUp=a.dict.insertBefore(l.nodeUp,h);return f.activeRegion=h};d.sweep.isWindingInside_=function(a,
l){switch(a.windingRule){case d.windingRule.GLU_TESS_WINDING_ODD:return 0!==(l&1);case d.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==l;case d.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<l;case d.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>l;case d.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=l||-2>=l}d.assert(!1);return!1};d.sweep.computeWinding_=function(a,l){l.windingNumber=l.regionAbove().windingNumber+l.eUp.winding;l.inside=d.sweep.isWindingInside_(a,l.windingNumber)};d.sweep.finishRegion_=
function(a,l){var f=l.eUp,h=f.lFace;h.inside=l.inside;h.anEdge=f;d.sweep.deleteRegion_(a,l)};d.sweep.finishLeftRegions_=function(a,l,f){var h=l;for(l=l.eUp;h!==f;){h.fixUpperEdge=!1;var k=h.regionBelow(),b=k.eUp;if(b.org!==l.org){if(!k.fixUpperEdge){d.sweep.finishRegion_(a,h);break}b=d.mesh.connect(l.lPrev(),b.sym);d.sweep.fixUpperEdge_(k,b)}l.oNext!==b&&(d.mesh.meshSplice(b.oPrev(),b),d.mesh.meshSplice(l,b));d.sweep.finishRegion_(a,h);l=k.eUp;h=k}return l};d.sweep.addRightEdges_=function(a,l,f,h,
k,b){var g=!0;do d.assert(d.geom.vertLeq(f.org,f.dst())),d.sweep.addRegionBelow_(a,l,f.sym),f=f.oNext;while(f!==h);for(null===k&&(k=l.regionBelow().eUp.rPrev());;){h=l.regionBelow();f=h.eUp.sym;if(f.org!==k.org)break;f.oNext!==k&&(d.mesh.meshSplice(f.oPrev(),f),d.mesh.meshSplice(k.oPrev(),f));h.windingNumber=l.windingNumber-f.winding;h.inside=d.sweep.isWindingInside_(a,h.windingNumber);l.dirty=!0;!g&&d.sweep.checkForRightSplice_(a,l)&&(d.sweep.addWinding_(f,k),d.sweep.deleteRegion_(a,l),d.mesh.deleteEdge(k));
g=!1;l=h;k=f}l.dirty=!0;d.assert(l.windingNumber-f.winding===h.windingNumber);b&&d.sweep.walkDirtyRegions_(a,l)};d.sweep.callCombine_=function(a,l,f,h,k){var b=[l.coords[0],l.coords[1],l.coords[2]];l.data=null;l.data=a.callCombineCallback(b,f,h);null===l.data&&(k?a.fatalError||(a.callErrorCallback(d.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),a.fatalError=!0):l.data=f[0])};d.sweep.spliceMergeVertices_=function(a,l,f){var h=[null,null,null,null];h[0]=l.org.data;h[1]=f.org.data;d.sweep.callCombine_(a,
l.org,h,[.5,.5,0,0],!1);d.mesh.meshSplice(l,f)};d.sweep.vertexWeights_=function(a,l,f,h,k){var b=d.geom.vertL1dist(l,a),g=d.geom.vertL1dist(f,a),p=k+1;h[k]=.5*g/(b+g);h[p]=.5*b/(b+g);a.coords[0]+=h[k]*l.coords[0]+h[p]*f.coords[0];a.coords[1]+=h[k]*l.coords[1]+h[p]*f.coords[1];a.coords[2]+=h[k]*l.coords[2]+h[p]*f.coords[2]};d.sweep.getIntersectData_=function(a,l,f,h,k,b){var g=[0,0,0,0],p=[f.data,h.data,k.data,b.data];l.coords[0]=l.coords[1]=l.coords[2]=0;d.sweep.vertexWeights_(l,f,h,g,0);d.sweep.vertexWeights_(l,
k,b,g,2);d.sweep.callCombine_(a,l,p,g,!0)};d.sweep.checkForRightSplice_=function(a,l){var f=l.regionBelow(),h=l.eUp,k=f.eUp;if(d.geom.vertLeq(h.org,k.org)){if(0<d.geom.edgeSign(k.dst(),h.org,k.org))return!1;d.geom.vertEq(h.org,k.org)?h.org!==k.org&&(a.pq.remove(h.org.pqHandle),d.sweep.spliceMergeVertices_(a,k.oPrev(),h)):(d.mesh.splitEdge(k.sym),d.mesh.meshSplice(h,k.oPrev()),l.dirty=f.dirty=!0)}else{if(0>d.geom.edgeSign(h.dst(),k.org,h.org))return!1;l.regionAbove().dirty=l.dirty=!0;d.mesh.splitEdge(h.sym);
d.mesh.meshSplice(k.oPrev(),h)}return!0};d.sweep.checkForLeftSplice_=function(a,l){var f=l.regionBelow();a=l.eUp;var h=f.eUp;d.assert(!d.geom.vertEq(a.dst(),h.dst()));if(d.geom.vertLeq(a.dst(),h.dst())){if(0>d.geom.edgeSign(a.dst(),h.dst(),a.org))return!1;l.regionAbove().dirty=l.dirty=!0;f=d.mesh.splitEdge(a);d.mesh.meshSplice(h.sym,f);f.lFace.inside=l.inside}else{if(0<d.geom.edgeSign(h.dst(),a.dst(),h.org))return!1;l.dirty=f.dirty=!0;f=d.mesh.splitEdge(h);d.mesh.meshSplice(a.lNext,h.sym);f.rFace().inside=
l.inside}return!0};d.sweep.checkForIntersect_=function(a,l){var f=l.regionBelow(),h=l.eUp,k=f.eUp,b=h.org,g=k.org,p=h.dst(),e=k.dst(),c=new d.GluVertex;d.assert(!d.geom.vertEq(e,p));d.assert(0>=d.geom.edgeSign(p,a.event,b));d.assert(0<=d.geom.edgeSign(e,a.event,g));d.assert(b!==a.event&&g!==a.event);d.assert(!l.fixUpperEdge&&!f.fixUpperEdge);if(b===g||Math.min(b.t,p.t)>Math.max(g.t,e.t))return!1;if(d.geom.vertLeq(b,g)){if(0<d.geom.edgeSign(e,b,g))return!1}else if(0>d.geom.edgeSign(p,g,b))return!1;
d.geom.edgeIntersect(p,b,e,g,c);d.assert(Math.min(b.t,p.t)<=c.t);d.assert(c.t<=Math.max(g.t,e.t));d.assert(Math.min(e.s,p.s)<=c.s);d.assert(c.s<=Math.max(g.s,b.s));d.geom.vertLeq(c,a.event)&&(c.s=a.event.s,c.t=a.event.t);var n=d.geom.vertLeq(b,g)?b:g;d.geom.vertLeq(n,c)&&(c.s=n.s,c.t=n.t);if(d.geom.vertEq(c,b)||d.geom.vertEq(c,g))return d.sweep.checkForRightSplice_(a,l),!1;if(!d.geom.vertEq(p,a.event)&&0<=d.geom.edgeSign(p,a.event,c)||!d.geom.vertEq(e,a.event)&&0>=d.geom.edgeSign(e,a.event,c)){if(e===
a.event)return d.mesh.splitEdge(h.sym),d.mesh.meshSplice(k.sym,h),l=d.sweep.topLeftRegion_(l),h=l.regionBelow().eUp,d.sweep.finishLeftRegions_(a,l.regionBelow(),f),d.sweep.addRightEdges_(a,l,h.oPrev(),h,h,!0),!0;if(p===a.event)return d.mesh.splitEdge(k.sym),d.mesh.meshSplice(h.lNext,k.oPrev()),f=l,l=d.sweep.topRightRegion_(l),b=l.regionBelow().eUp.rPrev(),f.eUp=k.oPrev(),k=d.sweep.finishLeftRegions_(a,f,null),d.sweep.addRightEdges_(a,l,k.oNext,h.rPrev(),b,!0),!0;0<=d.geom.edgeSign(p,a.event,c)&&(l.regionAbove().dirty=
l.dirty=!0,d.mesh.splitEdge(h.sym),h.org.s=a.event.s,h.org.t=a.event.t);0>=d.geom.edgeSign(e,a.event,c)&&(l.dirty=f.dirty=!0,d.mesh.splitEdge(k.sym),k.org.s=a.event.s,k.org.t=a.event.t);return!1}d.mesh.splitEdge(h.sym);d.mesh.splitEdge(k.sym);d.mesh.meshSplice(k.oPrev(),h);h.org.s=c.s;h.org.t=c.t;h.org.pqHandle=a.pq.insert(h.org);d.sweep.getIntersectData_(a,h.org,b,p,g,e);l.regionAbove().dirty=l.dirty=f.dirty=!0;return!1};d.sweep.walkDirtyRegions_=function(a,l){for(var f=l.regionBelow();;){for(;f.dirty;)l=
f,f=f.regionBelow();if(!l.dirty&&(f=l,l=l.regionAbove(),null===l||!l.dirty))break;l.dirty=!1;var h=l.eUp,k=f.eUp;h.dst()!==k.dst()&&d.sweep.checkForLeftSplice_(a,l)&&(f.fixUpperEdge?(d.sweep.deleteRegion_(a,f),d.mesh.deleteEdge(k),f=l.regionBelow(),k=f.eUp):l.fixUpperEdge&&(d.sweep.deleteRegion_(a,l),d.mesh.deleteEdge(h),l=f.regionAbove(),h=l.eUp));if(h.org!==k.org)if(h.dst()===k.dst()||l.fixUpperEdge||f.fixUpperEdge||h.dst()!==a.event&&k.dst()!==a.event)d.sweep.checkForRightSplice_(a,l);else if(d.sweep.checkForIntersect_(a,
l))break;h.org===k.org&&h.dst()===k.dst()&&(d.sweep.addWinding_(k,h),d.sweep.deleteRegion_(a,l),d.mesh.deleteEdge(h),l=f.regionAbove())}};d.sweep.connectRightVertex_=function(a,l,f){var h=f.oNext,k=l.regionBelow(),b=l.eUp,g=k.eUp,p=!1;b.dst()!==g.dst()&&d.sweep.checkForIntersect_(a,l);d.geom.vertEq(b.org,a.event)&&(d.mesh.meshSplice(h.oPrev(),b),l=d.sweep.topLeftRegion_(l),h=l.regionBelow().eUp,d.sweep.finishLeftRegions_(a,l.regionBelow(),k),p=!0);d.geom.vertEq(g.org,a.event)&&(d.mesh.meshSplice(f,
g.oPrev()),f=d.sweep.finishLeftRegions_(a,k,null),p=!0);p?d.sweep.addRightEdges_(a,l,f.oNext,h,h,!0):(h=d.geom.vertLeq(g.org,b.org)?g.oPrev():b,h=d.mesh.connect(f.lPrev(),h),d.sweep.addRightEdges_(a,l,h,h.oNext,h.oNext,!1),h.sym.activeRegion.fixUpperEdge=!0,d.sweep.walkDirtyRegions_(a,l))};d.sweep.connectLeftDegenerate_=function(a,l,f){var h=l.eUp;if(d.geom.vertEq(h.org,f))d.assert(d.sweep.TOLERANCE_NONZERO_),d.sweep.TOLERANCE_NONZERO_&&d.sweep.spliceMergeVertices_(a,h,f.anEdge);else if(d.geom.vertEq(h.dst(),
f)){if(d.assert(d.sweep.TOLERANCE_NONZERO_),d.sweep.TOLERANCE_NONZERO_){l=d.sweep.topRightRegion_(l);var h=l.regionBelow(),k=h.eUp.sym,b=k.oNext,g=b;h.fixUpperEdge&&(d.assert(b!==k),d.sweep.deleteRegion_(a,h),d.mesh.deleteEdge(k),k=b.oPrev());d.mesh.meshSplice(f.anEdge,k);d.geom.edgeGoesLeft(b)||(b=null);d.sweep.addRightEdges_(a,l,k.oNext,g,b,!0)}}else d.mesh.splitEdge(h.sym),l.fixUpperEdge&&(d.mesh.deleteEdge(h.oNext),l.fixUpperEdge=!1),d.mesh.meshSplice(f.anEdge,h),d.sweep.sweepEvent_(a,f)};d.sweep.connectLeftVertex_=
function(a,l){var f=new d.ActiveRegion;f.eUp=l.anEdge.sym;var f=a.dict.search(f).getKey(),h=f.regionBelow(),k=f.eUp,b=h.eUp;0===d.geom.edgeSign(k.dst(),l,k.org)?d.sweep.connectLeftDegenerate_(a,f,l):(h=d.geom.vertLeq(b.dst(),k.dst())?f:h,f.inside||h.fixUpperEdge?(k=h===f?d.mesh.connect(l.anEdge.sym,k.lNext):d.mesh.connect(b.dNext(),l.anEdge).sym,h.fixUpperEdge?d.sweep.fixUpperEdge_(h,k):d.sweep.computeWinding_(a,d.sweep.addRegionBelow_(a,f,k)),d.sweep.sweepEvent_(a,l)):d.sweep.addRightEdges_(a,f,
l.anEdge,l.anEdge,null,!0))};d.sweep.sweepEvent_=function(a,l){a.event=l;for(var f=l.anEdge;null===f.activeRegion;)if(f=f.oNext,f===l.anEdge){d.sweep.connectLeftVertex_(a,l);return}l=d.sweep.topLeftRegion_(f.activeRegion);var h=l.regionBelow(),f=h.eUp,h=d.sweep.finishLeftRegions_(a,h,null);h.oNext===f?d.sweep.connectRightVertex_(a,l,h):d.sweep.addRightEdges_(a,l,h.oNext,f,f,!0)};d.sweep.addSentinel_=function(a,l){var f=new d.ActiveRegion,h=d.mesh.makeEdge(a.mesh);h.org.s=d.sweep.SENTINEL_COORD_;h.org.t=
l;h.dst().s=-d.sweep.SENTINEL_COORD_;h.dst().t=l;a.event=h.dst();f.eUp=h;f.windingNumber=0;f.inside=!1;f.fixUpperEdge=!1;f.sentinel=!0;f.dirty=!1;f.nodeUp=a.dict.insert(f)};d.sweep.initEdgeDict_=function(a){a.dict=new d.Dict(a,d.sweep.edgeLeq_);d.sweep.addSentinel_(a,-d.sweep.SENTINEL_COORD_);d.sweep.addSentinel_(a,d.sweep.SENTINEL_COORD_)};d.sweep.doneEdgeDict_=function(a){for(var l=0,f;null!==(f=a.dict.getMin().getKey());)f.sentinel||(d.assert(f.fixUpperEdge),d.assert(1===++l)),d.assert(0===f.windingNumber),
d.sweep.deleteRegion_(a,f);a.dict=null};d.sweep.removeDegenerateEdges_=function(a){for(var l=a.mesh.eHead,f,h=l.next;h!==l;h=f){f=h.next;var k=h.lNext;d.geom.vertEq(h.org,h.dst())&&h.lNext.lNext!==h&&(d.sweep.spliceMergeVertices_(a,k,h),d.mesh.deleteEdge(h),h=k,k=h.lNext);if(k.lNext===h){if(k!==h){if(k===f||k===f.sym)f=f.next;d.mesh.deleteEdge(k)}if(h===f||h===f.sym)f=f.next;d.mesh.deleteEdge(h)}}};d.sweep.initPriorityQ_=function(a){var l=new d.PriorityQ;a.pq=l;a=a.mesh.vHead;var f;for(f=a.next;f!==
a;f=f.next)f.pqHandle=l.insert(f);l.init()};d.sweep.donePriorityQ_=function(a){a.pq.deleteQ();a.pq=null};d.sweep.removeDegenerateFaces_=function(a){for(var l,f=a.fHead.next;f!==a.fHead;f=l)l=f.next,f=f.anEdge,d.assert(f.lNext!==f),f.lNext.lNext===f&&(d.sweep.addWinding_(f.oNext,f),d.mesh.deleteEdge(f))};d.tessmono={};d.tessmono.tessellateMonoRegion_=function(a){a=a.anEdge;for(d.assert(a.lNext!==a&&a.lNext.lNext!==a);d.geom.vertLeq(a.dst(),a.org);a=a.lPrev());for(;d.geom.vertLeq(a.org,a.dst());a=a.lNext);
for(var l=a.lPrev(),f;a.lNext!==l;)if(d.geom.vertLeq(a.dst(),l.org)){for(;l.lNext!==a&&(d.geom.edgeGoesLeft(l.lNext)||0>=d.geom.edgeSign(l.org,l.dst(),l.lNext.dst()));)f=d.mesh.connect(l.lNext,l),l=f.sym;l=l.lPrev()}else{for(;l.lNext!==a&&(d.geom.edgeGoesRight(a.lPrev())||0<=d.geom.edgeSign(a.dst(),a.org,a.lPrev().org));)f=d.mesh.connect(a,a.lPrev()),a=f.sym;a=a.lNext}for(d.assert(l.lNext!==a);l.lNext.lNext!==a;)f=d.mesh.connect(l.lNext,l),l=f.sym};d.tessmono.tessellateInterior=function(a){for(var l,
f=a.fHead.next;f!==a.fHead;f=l)l=f.next,f.inside&&d.tessmono.tessellateMonoRegion_(f)};d.tessmono.discardExterior=function(a){for(var l,f=a.fHead.next;f!==a.fHead;f=l)l=f.next,f.inside||d.mesh.zapFace(f)};d.tessmono.setWindingNumber=function(a,l,f){for(var h,k=a.eHead.next;k!==a.eHead;k=h)h=k.next,k.rFace().inside!==k.lFace.inside?k.winding=k.lFace.inside?l:-l:f?d.mesh.deleteEdge(k):k.winding=0};d.Dict=function(a,l){this.head_=new d.DictNode;this.frame_=a;this.leq_=l};d.Dict.prototype.deleteDict_=
function(){};d.Dict.prototype.insertBefore=function(a,l){do a=a.prev;while(null!==a.key&&!this.leq_(this.frame_,a.key,l));l=new d.DictNode(l,a.next,a);a.next.prev=l;return a.next=l};d.Dict.prototype.insert=function(a){return this.insertBefore(this.head_,a)};d.Dict.prototype.deleteNode=function(a){a.next.prev=a.prev;a.prev.next=a.next};d.Dict.prototype.search=function(a){var d=this.head_;do d=d.next;while(null!==d.key&&!this.leq_(this.frame_,a,d.key));return d};d.Dict.prototype.getMin=function(){return this.head_.next};
d.Dict.prototype.getMax=function(){return this.head_.prev};d.DictNode=function(a,d,f){this.key=a||null;this.next=d||this;this.prev=f||this};d.DictNode.prototype.getKey=function(){return this.key};d.DictNode.prototype.getSuccessor=function(){return this.next};d.DictNode.prototype.getPredecessor=function(){return this.prev};d.GluTesselator=function(){this.state_=d.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=d.windingRule.GLU_TESS_WINDING_ODD;
this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};d.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};d.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(d.GluTesselator.tessState_.T_DORMANT)};d.GluTesselator.prototype.gluTessProperty=function(a,l){switch(a){case d.gluEnum.GLU_TESS_TOLERANCE:return;
case d.gluEnum.GLU_TESS_WINDING_RULE:switch(l){case d.windingRule.GLU_TESS_WINDING_ODD:case d.windingRule.GLU_TESS_WINDING_NONZERO:case d.windingRule.GLU_TESS_WINDING_POSITIVE:case d.windingRule.GLU_TESS_WINDING_NEGATIVE:case d.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=l;return}break;case d.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=!!l;return;default:this.callErrorCallback(d.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(d.gluEnum.GLU_INVALID_VALUE)};d.GluTesselator.prototype.gluGetTessProperty=
function(a){switch(a){case d.gluEnum.GLU_TESS_TOLERANCE:return 0;case d.gluEnum.GLU_TESS_WINDING_RULE:return a=this.windingRule,d.assert(a===d.windingRule.GLU_TESS_WINDING_ODD||a===d.windingRule.GLU_TESS_WINDING_NONZERO||a===d.windingRule.GLU_TESS_WINDING_POSITIVE||a===d.windingRule.GLU_TESS_WINDING_NEGATIVE||a===d.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),a;case d.gluEnum.GLU_TESS_BOUNDARY_ONLY:return d.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(d.gluEnum.GLU_INVALID_ENUM)}return!1};
d.GluTesselator.prototype.gluTessNormal=function(a,d,f){this.normal_[0]=a;this.normal_[1]=d;this.normal_[2]=f};d.GluTesselator.prototype.gluTessCallback=function(a,l){l=l?l:null;switch(a){case d.gluEnum.GLU_TESS_BEGIN:case d.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=l;break;case d.gluEnum.GLU_TESS_EDGE_FLAG:case d.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=l;break;case d.gluEnum.GLU_TESS_VERTEX:case d.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=l;break;case d.gluEnum.GLU_TESS_END:case d.gluEnum.GLU_TESS_END_DATA:this.endCallback_=
l;break;case d.gluEnum.GLU_TESS_ERROR:case d.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=l;break;case d.gluEnum.GLU_TESS_COMBINE:case d.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=l;break;case d.gluEnum.GLU_TESS_MESH:this.meshCallback_=l;break;default:this.callErrorCallback(d.gluEnum.GLU_INVALID_ENUM)}};d.GluTesselator.prototype.gluTessVertex=function(a,l){var f=!1,h=[0,0,0];this.requireState_(d.GluTesselator.tessState_.T_IN_CONTOUR);for(var k=0;3>k;++k){var b=a[k];b<-d.GLU_TESS_MAX_COORD&&
(b=-d.GLU_TESS_MAX_COORD,f=!0);b>d.GLU_TESS_MAX_COORD&&(b=d.GLU_TESS_MAX_COORD,f=!0);h[k]=b}f&&this.callErrorCallback(d.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(h,l)};d.GluTesselator.prototype.gluTessBeginPolygon=function(a){this.requireState_(d.GluTesselator.tessState_.T_DORMANT);this.state_=d.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=new d.GluMesh;this.polygonData_=a};d.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(d.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=d.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};d.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(d.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=d.GluTesselator.tessState_.T_IN_POLYGON};d.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(d.GluTesselator.tessState_.T_IN_POLYGON);this.state_=d.GluTesselator.tessState_.T_DORMANT;d.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);d.sweep.computeInterior(this);
if(!this.fatalError){var a=this.mesh;this.boundaryOnly_?d.tessmono.setWindingNumber(a,1,!0):d.tessmono.tessellateInterior(a);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?d.render.renderBoundary(this,this.mesh):d.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);if(this.meshCallback_){d.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}d.mesh.deleteMesh(this.mesh);
this.mesh=this.polygonData_=null};d.GluTesselator.prototype.requireState_=function(a){this.state_!==a&&this.gotoState_(a)};d.GluTesselator.prototype.gotoState_=function(a){for(;this.state_!==a;)if(this.state_<a)switch(this.state_){case d.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(d.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);this.gluTessBeginPolygon(null);break;case d.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(d.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case d.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(d.errorType.GLU_TESS_MISSING_END_CONTOUR);
this.gluTessEndContour();break;case d.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(d.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};d.GluTesselator.prototype.addVertex_=function(a,l){var f=this.lastEdge_;null===f?(f=d.mesh.makeEdge(this.mesh),d.mesh.meshSplice(f,f.sym)):(d.mesh.splitEdge(f),f=f.lNext);f.org.data=l;f.org.coords[0]=a[0];f.org.coords[1]=a[1];f.org.coords[2]=a[2];f.winding=1;f.sym.winding=-1;this.lastEdge_=f};d.GluTesselator.prototype.callBeginCallback=
function(a){this.beginCallback_&&this.beginCallback_(a,this.polygonData_)};d.GluTesselator.prototype.callVertexCallback=function(a){this.vertexCallback_&&this.vertexCallback_(a,this.polygonData_)};d.GluTesselator.prototype.callEdgeFlagCallback=function(a){this.edgeFlagCallback_&&this.edgeFlagCallback_(a,this.polygonData_)};d.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};d.GluTesselator.prototype.callCombineCallback=function(a,d,f){return this.combineCallback_?
this.combineCallback_(a,d,f,this.polygonData_)||null:null};d.GluTesselator.prototype.callErrorCallback=function(a){this.errorCallback_&&this.errorCallback_(a,this.polygonData_)};d.GluFace=function(a,d){this.next=a||this;this.prev=d||this;this.anEdge=null;this.inside=!1};d.GluHalfEdge=function(a){this.next=a||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};d.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};d.GluHalfEdge.prototype.dst=function(){return this.sym.org};
d.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};d.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};d.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};d.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};d.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};d.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};d.GluMesh=function(){this.vHead=new d.GluVertex;this.fHead=new d.GluFace;this.eHead=new d.GluHalfEdge;this.eHeadSym=
new d.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};d.GluMesh.prototype.checkMesh=function(){if(d.DEBUG){var a=this.fHead,l=this.vHead,f=this.eHead,h,k;for(h=h=a;(k=h.next)!==a;h=k){d.assert(k.prev===h);h=k.anEdge;do d.assert(h.sym!==h),d.assert(h.sym.sym===h),d.assert(h.lNext.oNext.sym===h),d.assert(h.oNext.sym.lNext===h),d.assert(h.lFace===k),h=h.lNext;while(h!==k.anEdge)}d.assert(k.prev===h&&null===k.anEdge);for(h=h=l;(a=h.next)!==l;h=a){d.assert(a.prev===h);h=a.anEdge;
do d.assert(h.sym!==h),d.assert(h.sym.sym===h),d.assert(h.lNext.oNext.sym===h),d.assert(h.oNext.sym.lNext===h),d.assert(h.org===a),h=h.oNext;while(h!==a.anEdge)}d.assert(a.prev===h&&null===a.anEdge&&null===a.data);for(l=l=f;(h=l.next)!==f;l=h)d.assert(h.sym.next===l.sym),d.assert(h.sym!==h),d.assert(h.sym.sym===h),d.assert(null!==h.org),d.assert(null!==h.dst()),d.assert(h.lNext.oNext.sym===h),d.assert(h.oNext.sym.lNext===h);d.assert(h.sym.next===l.sym&&h.sym===this.eHeadSym&&h.sym.sym===h&&null===
h.org&&null===h.dst()&&null===h.lFace&&null===h.rFace())}};d.GluVertex=function(a,d){this.next=a||this;this.prev=d||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=this.s=0};d.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new d.PriorityQHeap};d.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};d.PriorityQ.prototype.init=function(){this.order_=[];for(var a=0;a<this.size_;a++)this.order_[a]=a;
a=function(a){return function(f,k){return d.geom.vertLeq(a[f],a[k])?1:-1}}(this.verts_);this.order_.sort(a);this.initialized_=!0;this.heap_.init();if(d.DEBUG)for(var l=0+this.size_-1,a=0;a<l;++a)d.assert(d.geom.vertLeq(this.verts_[this.order_[a+1]],this.verts_[this.order_[a]]))};d.PriorityQ.prototype.insert=function(a){if(this.initialized_)return this.heap_.insert(a);var d=this.size_++;this.verts_[d]=a;return-(d+1)};d.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();
var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var l=this.heap_.minimum();if(d.geom.vertLeq(l,a))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&null===this.verts_[this.order_[this.size_-1]]);return a};d.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var l=this.heap_.minimum();if(d.geom.vertLeq(l,a))return l}return a};d.PriorityQ.prototype.remove=function(a){if(0<=
a)this.heap_.remove(a);else for(a=-(a+1),d.assert(a<this.verts_.length&&null!==this.verts_[a]),this.verts_[a]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-1]];)--this.size_};d.PriorityQHeap=function(){this.heap_=d.PriorityQHeap.reallocNumeric_([0],d.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=d.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};d.PriorityQHeap.INIT_SIZE_=32;d.PriorityQHeap.reallocNumeric_=
function(a,d){for(var f=Array(d),h=0;h<a.length;h++)f[h]=a[h];for(;h<d;h++)f[h]=0;return f};d.PriorityQHeap.prototype.init=function(){for(var a=this.size_;1<=a;--a)this.floatDown_(a);this.initialized_=!0};d.PriorityQHeap.prototype.insert=function(a){var l=++this.size_;2*l>this.max_&&(this.max_*=2,this.handles_=d.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));var f;0===this.freeList_?f=l:(f=this.freeList_,this.freeList_=this.handles_[this.freeList_]);this.verts_[f]=a;this.handles_[f]=l;
this.heap_[l]=f;this.initialized_&&this.floatUp_(l);return f};d.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};d.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};d.PriorityQHeap.prototype.extractMin=function(){var a=this.heap_,d=this.verts_,f=this.handles_,h=a[1],k=d[h];0<this.size_&&(a[1]=a[this.size_],f[a[1]]=1,d[h]=null,f[h]=this.freeList_,this.freeList_=h,0<--this.size_&&this.floatDown_(1));return k};d.PriorityQHeap.prototype.remove=function(a){var l=
this.heap_,f=this.verts_,h=this.handles_;d.assert(1<=a&&a<=this.max_&&null!==f[a]);var k=h[a];l[k]=l[this.size_];h[l[k]]=k;k<=--this.size_&&(1>=k?this.floatDown_(k):d.geom.vertLeq(f[l[k>>1]],f[l[k]])?this.floatDown_(k):this.floatUp_(k));f[a]=null;h[a]=this.freeList_;this.freeList_=a};d.PriorityQHeap.prototype.floatDown_=function(a){for(var l=this.heap_,f=this.verts_,h=this.handles_,k=l[a];;){var b=a<<1;b<this.size_&&d.geom.vertLeq(f[l[b+1]],f[l[b]])&&(b+=1);d.assert(b<=this.max_);var g=l[b];if(b>
this.size_||d.geom.vertLeq(f[k],f[g])){l[a]=k;h[k]=a;break}l[a]=g;h[g]=a;a=b}};d.PriorityQHeap.prototype.floatUp_=function(a){for(var l=this.heap_,f=this.verts_,h=this.handles_,k=l[a];;){var b=a>>1,g=l[b];if(0===b||d.geom.vertLeq(f[g],f[k])){l[a]=k;h[k]=a;break}l[a]=g;h[g]=a;a=b}};d.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};d.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};
d.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return d})},"esri/views/2d/engine/webgl/util/Lock":function(){define(["require","exports","../../../../../core/promiseUtils"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._resolver=null}a.prototype.isHeld=function(){return!!this._resolver};a.prototype.acquire=function(){var a=this;if(this._resolver)return this._resolver.promise.then(function(){return a.acquire()});
this._resolver=l.createResolver();return l.resolve()};a.prototype.release=function(){var a=this._resolver;this._resolver=null;a.resolve()};return a}();a.default=d;a.withLock=function(a,d){return a.acquire().then(function(){return d()}).then(function(){return a.release()}).catch(function(d){a.release();throw d;})}})},"esri/views/2d/layers/features/processors/BaseProcessor":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators ../../../support/Evented".split(" "),
function(d,a,l,f,h,k,b,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}l(d,a);d.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])};d.prototype.destroy=function(){};Object.defineProperty(d.prototype,"supportsTileUpdates",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"spatialReference",{get:function(){var a=this.get("tileStore.tileScheme.spatialReference");
return a&&a.toJSON()||null},enumerable:!0,configurable:!0});f([b.property({readOnly:!0})],d.prototype,"supportsTileUpdates",null);f([b.property({constructOnly:!0})],d.prototype,"remoteClient",void 0);f([b.property({constructOnly:!0})],d.prototype,"service",void 0);f([b.property({dependsOn:["tileStore.tileScheme.spatialReference"]})],d.prototype,"spatialReference",null);f([b.property({constructOnly:!0})],d.prototype,"tileInfo",void 0);f([b.property({constructOnly:!0})],d.prototype,"tileStore",void 0);
return d=f([b.subclass()],d)}(b.declared(h,k,g.default));a.default=d})},"*noref":1}});
define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/generatorHelper ../../../../core/Accessor ../../../../core/asyncUtils ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../layers/support/TileInfo ../../../../support/arcadeUtils ../../ViewState ./controllers ./processors ./support/TileStore ../../tiling/TileInfoView".split(" "),function(d,
a,l,f,h,k,b,g,p,e,c,n,m,q,y,x,t){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.controller=null;b.processor=null;b.remoteClient=null;b.serviceAndViewInfo=null;b.tileStore=null;b.viewState=null;return b}l(b,a);b.prototype.initialize=function(){var a=this;this.watch("updating",function(b){a.remoteClient.invoke("setUpdating",b)})};b.prototype.destroy=function(){this.controller&&this.controller.destroy();this.processor&&this.processor.destroy()};
Object.defineProperty(b.prototype,"updating",{get:function(){var a=this.controller,b=this.processor;return!a||!b||a.updating||b.updating||!1},enumerable:!0,configurable:!0});b.prototype.startup=function(a){var b=new t(c.fromJSON(a.tileInfo));this.serviceAndViewInfo=a;this.tileStore=new x.default(b)};b.prototype.configure=function(a){return g.safeCast(this._configure(a))};b.prototype.setViewState=function(a){a=m.fromJSON(a);this._set("viewState",a);this.tileStore.setViewState(a);this.controller&&this.controller.setViewState(a)};
b.prototype._configure=function(a){return h(this,void 0,void 0,function(){var b,c,d;return k(this,function(e){switch(e.label){case 0:return[4,p.all([g.safeCast(this._handleControllerConfig(a.controller)),g.safeCast(this._handleProcessorConfig(a.processor))])];case 1:b=e.sent();c=b[0];d=b[1];if(c||d)this.controller.processor=this.processor;return[2]}})})};b.prototype._handleControllerConfig=function(a){return h(this,void 0,void 0,function(){return k(this,function(b){return a?[2,this._createController(a)]:
[2,null]})})};b.prototype._handleProcessorConfig=function(a){return h(this,void 0,void 0,function(){var b,c;return k(this,function(d){if(!a)return[2,null];b=this._createProcessor(a);c="symbol"===a.type&&a.hasGeometryExpr;return[2,c?n.enableGeometryOperations().then(function(){return b}):b]})})};b.prototype._createController=function(a){return h(this,void 0,void 0,function(){var b,c,d,e,f,g;return k(this,function(h){switch(h.label){case 0:return b=this,c=b.remoteClient,d=b.tileStore,e=b.serviceAndViewInfo,
f={remoteClient:c,tileStore:d,serviceAndViewInfo:e},[4,q.createController(a.type,f)];case 1:return g=h.sent(),this.controller&&this.controller.destroy(),g.configuration=a,g.setViewState(this.viewState),this.controller=g,[2,g]}})})};b.prototype._createProcessor=function(a){return h(this,void 0,void 0,function(){var b,c,d,e,f,g;return k(this,function(h){switch(h.label){case 0:return b=this,c=b.remoteClient,d=b.tileStore,e=b.serviceAndViewInfo,f={remoteClient:c,tileStore:d,serviceAndViewInfo:e},[4,y.createProcessor(a.type,
f)];case 1:return g=h.sent(),this.processor&&this.processor.destroy(),g.configuration=a,this.processor=g,[2,g]}})})};f([e.property()],b.prototype,"controller",void 0);f([e.property()],b.prototype,"processor",void 0);f([e.property({dependsOn:["controller.updating","processor.updating"]})],b.prototype,"updating",null);f([e.property()],b.prototype,"viewState",void 0);return b=f([e.subclass()],b)}(e.declared(b));a.default=d});