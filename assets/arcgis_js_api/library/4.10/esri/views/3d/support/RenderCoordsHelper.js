// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/extendsHelper ../../../core/compilerUtils ../../../core/libs/gl-matrix-2/gl-matrix ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/scaleUtils ../../../layers/graphics/dehydratedFeatures ./earthUtils ./geometryUtils ./projectionUtils ./stack ./geometryUtils/coordinateSystem".split(" "),function(g,h,u,m,k,n,p,q,r,t,f,d,l,e){Object.defineProperty(h,"__esModule",{value:!0});g=function(){function c(a,b,c,d){this.type=
a;this.spatialReference=b;this.unitInMeters=c;this.coordinateSystem=d;this.tmpCoordinateSystem=e.create(d)}Object.defineProperty(c.prototype,"extent",{set:function(a){a&&e.setExtent(this.coordinateSystem,a,this.coordinateSystem)},enumerable:!0,configurable:!0});c.prototype.getAltitude=function(a){return e.altitudeAt(this.coordinateSystem,a)};c.prototype.setAltitude=function(a,b){e.setAltitudeAt(this.coordinateSystem,b,a,b)};c.prototype.setAltitudeOfTransformation=function(a,b){e.setAltitudeOfTransformation(this.coordinateSystem,
b,a,b)};c.prototype.worldUpAtPosition=function(a,b){return e.normalAt(this.coordinateSystem,a,b)};c.prototype.worldBasisAtPosition=function(a,b,c){return e.axisAt(this.coordinateSystem,a,b,c)};c.prototype.intersectManifoldClosestSilhouette=function(a,b,c){e.elevate(this.coordinateSystem,b,this.tmpCoordinateSystem);e.intersectRayClosestSilhouette(this.tmpCoordinateSystem,a,c);return c};c.prototype.intersectManifold=function(a,b,c){e.elevate(this.coordinateSystem,b,this.tmpCoordinateSystem);b=l.sv3d.get();
return e.intersectRay(this.tmpCoordinateSystem,a,b)?(k.vec3.copy(c,b),!0):!1};c.prototype.intersectInfiniteManifold=function(a,b,c){if("global"===this.type)return this.intersectManifold(a,b,c);e.elevate(this.coordinateSystem,b,this.tmpCoordinateSystem);b=this.tmpCoordinateSystem.value;var d=l.sv3d.get();return f.plane.intersectRay(b.plane,a,d)?(k.vec3.copy(c,d),!0):!1};c.prototype.toRenderCoords=function(a,b,c){return r.isPoint(a)?d.pointToVector(a,b,this.spatialReference):d.vectorToVector(a,b,c,
this.spatialReference)};c.prototype.fromRenderCoords=function(a,b,c){return b instanceof n?d.vectorToPoint(a,this.spatialReference,b,c):b instanceof p?d.vectorToPoint(a,this.spatialReference,b):d.vectorToVector(a,this.spatialReference,b,c)};c.createGlobal=function(a){void 0===a&&(a=d.SphericalECEFSpatialReference);var b=e.fromValues(f.sphere,f.sphere.fromValues(t.earthRadius,[0,0,0]));return new c("global",a,1,b)};c.createLocal=function(a){var b=e.fromValues(f.boundedPlane,f.boundedPlane.fromValues([0,
0,0],[1<<60,0,0],[0,1<<60,0])),d=q.getMetersPerUnitForSR(a);return new c("local",a,d,b)};c.createMode=function(a,b){switch(a){case "local":return c.createLocal(b);case "global":return c.createGlobal();default:m.neverReached(a)}};return c}();h.RenderCoordsHelper=g});