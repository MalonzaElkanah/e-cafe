// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/ObjectStack","../../../../core/libs/gl-matrix-2/gl-matrix","../stack"],function(p,e,m,d,f){function g(a){return a?{origin:d.vec3f64.clone(a.origin),direction:d.vec3f64.clone(a.direction)}:{origin:d.vec3f64.create(),direction:d.vec3f64.create()}}function h(a,c,b){void 0===b&&(b=g());d.vec3.copy(b.origin,a);d.vec3.copy(b.direction,c);return b}function k(a,c){a=d.vec3.cross(f.sv3d.get(),d.vec3.normalize(f.sv3d.get(),a.direction),d.vec3.subtract(f.sv3d.get(),
c,a.origin));return d.vec3.dot(a,a)}function l(){return{origin:null,direction:null}}Object.defineProperty(e,"__esModule",{value:!0});e.create=g;e.wrap=function(a,c){var b=n.get();b.origin=a;b.direction=c;return b};e.copy=function(a,c){void 0===c&&(c=g());return h(a.origin,a.direction,c)};e.fromValues=h;e.fromScreen=function(a,c,b){void 0===b&&(b=g());var e=d.vec3.set(f.sv3d.get(),c[0],c[1],0);a.unprojectPoint(e,b.origin);c=d.vec3.set(f.sv3d.get(),c[0],c[1],1);a=a.unprojectPoint(c,f.sv3d.get());d.vec3.subtract(b.direction,
a,b.origin);return b};e.fromScreenAtEye=function(a,c,b){void 0===b&&(b=g());d.vec3.copy(b.origin,a.eye);c=d.vec3.set(f.sv3d.get(),c[0],c[1],1);a=a.unprojectPoint(c,f.sv3d.get());d.vec3.subtract(b.direction,a,b.origin);return b};e.distance2=k;e.distance=function(a,c){return Math.sqrt(k(a,c))};e.closestPoint=function(a,c,b){c=d.vec3.dot(a.direction,d.vec3.subtract(b,c,a.origin));d.vec3.add(b,a.origin,d.vec3.scale(b,a.direction,c));return b};e.createWrapper=l;var n=new m.ObjectStack(l)});