// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/gl-matrix ../stack ./clipRay ./plane".split(" "),function(t,d,q,b,k,h,e){function g(a){if(a){var c=a.planes;a=a.points;return{planes:[e.create(c[0]),e.create(c[1]),e.create(c[2]),e.create(c[3]),e.create(c[4]),e.create(c[5])],points:[b.vec3f64.clone(a[0]),b.vec3f64.clone(a[1]),b.vec3f64.clone(a[2]),b.vec3f64.clone(a[3]),b.vec3f64.clone(a[4]),b.vec3f64.clone(a[5]),b.vec3f64.clone(a[6]),b.vec3f64.clone(a[7])]}}return{planes:[e.create(),
e.create(),e.create(),e.create(),e.create(),e.create()],points:[b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create()]}}function l(a,c,f){void 0===f&&(f=g());for(var d=0;6>d;d++)e.copy(a[d],f.planes[d]);for(d=0;8>d;d++)b.vec3.copy(f.points[d],c[d]);return f}function m(a){var c=a.planes;a=a.points;e.fromPoints(a[4],a[0],a[3],c[0]);e.fromPoints(a[1],a[5],a[6],c[1]);e.fromPoints(a[4],a[5],a[1],c[2]);e.fromPoints(a[3],
a[2],a[6],c[3]);e.fromPoints(a[0],a[1],a[2],c[4]);e.fromPoints(a[5],a[4],a[7],c[5])}function n(a,c){a=a.planes;for(var b=0;6>b;b++)if(!e.clip(a[b],c))return!1;return!0}Object.defineProperty(d,"__esModule",{value:!0});d.create=g;d.copy=function(a,c){void 0===c&&(c=g());return l(a.planes,a.points,c)};d.fromValues=l;d.fromMatrix=function(a,c,f){void 0===f&&(f=g());var e=f.points;a=b.mat4.multiply(k.sm4d.get(),c,a);b.mat4.invert(a,a);for(c=0;8>c;++c){var d=b.vec4.transformMat4(k.sv4d.get(),r[c],a);b.vec3.set(e[c],
d[0]/d[3],d[1]/d[3],d[2]/d[3])}m(f);return f};d.recomputePlanes=m;d.intersectsSphere=function(a,c){a=a.planes;for(var b=0;6>b;b++)if(e.isSphereFullyInside(a[b],c))return!1;return!0};d.intersectsRay=function(a,c){return n(a,h.fromRay(c,p.get()))};d.intersectsLineSegment=function(a,c,b){return n(a,h.fromLineSegmentAndDirection(c,b,p.get()))};d.intersectsPoint=function(a,b){a=a.planes;for(var c=0;6>c;c++)if(0<e.signedDistance(a[c],b))return!1;return!0};d.intersectsAABB=function(a,b){a=a.planes;for(var c=
0;6>c;c++)if(e.isAABBFullyInside(a[c],b))return!1;return!0};d.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};var r=[b.vec4f64.fromValues(-1,-1,-1,1),b.vec4f64.fromValues(1,-1,-1,1),b.vec4f64.fromValues(1,1,-1,1),b.vec4f64.fromValues(-1,1,-1,1),b.vec4f64.fromValues(-1,-1,1,1),b.vec4f64.fromValues(1,-1,1,1),b.vec4f64.fromValues(1,1,1,1),b.vec4f64.fromValues(-1,1,1,1)],p=new q.ObjectStack(h.create)});