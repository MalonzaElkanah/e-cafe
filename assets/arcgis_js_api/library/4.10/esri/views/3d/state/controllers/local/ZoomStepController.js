// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/gl-matrix ../../../camera/constraintUtils ../PointToPointAnimationController ../../../webgl-engine/lib/Camera ../../../../animation/easing".split(" "),function(g,h,l,e,m,n,k,p){Object.defineProperty(h,"__esModule",{value:!0});g=function(g){function c(b,d){var a=g.call(this,b.state,b.sceneIntersectionHelper,"interaction"===d?null:void 0)||this;a.view=b;a.mode=d;a.zoomLocation=e.vec3f64.create();
a.tmpCamera=new k;a.tmpRayDir=e.vec3f64.create();a.tmpCenter=e.vec3f64.create();a.constraintOptions={selection:15,interactionType:1,interactionFactor:null,interactionStartCamera:new k,interactionDirection:null,tiltMode:0};return a}l(c,g);Object.defineProperty(c.prototype,"isInteractive",{get:function(){return"interaction"===this.mode},enumerable:!0,configurable:!0});c.prototype.zoomStep=function(b,d){if(this.active){var a=this.view.state,f=this.constraintOptions.interactionStartCamera;this.animation.finished?
f.copyFrom(a.camera):this.animation.cameraAt(1,f);this.tmpCamera.copyFrom(a.camera);0<b?(this.intersectionHelper.intersectScreenFreePointFallback(d,this.zoomLocation),this.intersectionHelper.intersectRay(this.tmpCamera.ray,this.tmpCenter)&&(this.tmpCamera.center=this.tmpCenter)):this.intersectionHelper.intersectRay(this.tmpCamera.ray,this.zoomLocation)?this.tmpCamera.center=this.zoomLocation:e.vec3.copy(this.zoomLocation,this.tmpCamera.center);this.updateCamera(this.tmpCamera,Math.pow(.6,b),this.zoomLocation,
d);this.begin(this.tmpCamera)}};c.prototype.animationSettings=function(){return{apex:null,duration:.6,easing:p.outExpo}};c.prototype.updateCamera=function(b,d,a,f){e.vec3.subtract(this.tmpRayDir,a,b.eye);f=e.vec3.length(this.tmpRayDir);var c=f*d;1>=d&&4>c&&(c=4,d=c/f);1E-6>Math.abs(f-c)||(e.vec3.scale(this.tmpRayDir,this.tmpRayDir,d),e.vec3.subtract(b.eye,a,this.tmpRayDir),e.vec3.lerp(b.center,b.center,a,1-d),m.applyAll(this.view,b,this.constraintOptions))};return c}(n.PointToPointAnimationController);
h.ZoomStepController=g});