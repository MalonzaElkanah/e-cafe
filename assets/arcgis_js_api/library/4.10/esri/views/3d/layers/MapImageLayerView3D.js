// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../layers/support/ExportImageParameters ./DynamicLayerView3D ./support/popupUtils3D ../../layers/MapImageLayerView".split(" "),function(m,n,e,f,d,g,h,k,l){return function(c){function a(){var b=null!==c&&c.apply(this,arguments)||this;b._exportImageParameters=null;b._imageVersion=null;return b}e(a,c);a.prototype.initialize=function(){var b=this;this._exportImageParameters=
new g.ExportImageParameters({layer:this.layer});this.handles.add(this._exportImageParameters.watch("version",function(a){b._imageVersion!==a&&(b._imageVersion=a,b.refetch())}))};a.prototype.destroy=function(){this._exportImageParameters&&(this._exportImageParameters.layer=null,this._exportImageParameters.destroy(),this._exportImageParameters=null)};a.prototype.createFetchPopupFeaturesQueryGeometry=function(a,c){return k.createQueryGeometry(a,c,this.view)};a.prototype.beforeFetch=function(){this._exportImageParameters.scale!==
this.view.scale&&(this._exportImageParameters.scale=this.view.scale);this._imageVersion=this._exportImageParameters.version};return a=f([d.subclass("esri.views.3d.layers.MapImageLayerView3D")],a)}(d.declared(h,l))});