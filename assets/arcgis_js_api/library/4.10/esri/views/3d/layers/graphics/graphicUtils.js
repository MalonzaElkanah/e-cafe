// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../../../geometry ../../../../core/libs/gl-matrix-2/gl-matrix ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../geometry/support/webMercatorUtils ../../../../layers/graphics/dehydratedFeatures ./Graphics3DSymbol ./Graphics3DWebStyleSymbol ../../support/mathUtils".split(" "),function(D,e,p,n,r,x,y,t,u,k,z,A,B){function v(a){var b=a.paths[0];if(!b||
0===b.length)return null;b=t.getPointOnPath(b,t.getPathLength(b)/2);return k.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference)}function g(a,b,c){if(!b||!a)return a;var d=a.spatialReference;d.isWebMercator&&b.isWGS84?(u.xyToLngLat(a.x,a.y,m),c||(a=k.clonePoint(a)),a.x=m[0],a.y=m[1],a.spatialReference=p.SpatialReference.WGS84):b.isWebMercator&&d.isWGS84&&(u.lngLatToXY(a.x,a.y,m),c||(a=k.clonePoint(a)),a.x=m[0],a.y=m[1],a.spatialReference=p.SpatialReference.WebMercator);return a}function w(a){if(Array.isArray(a)){for(var b=
0;b<a.length;b++)if(!w(a[b]))return!1;return!0}return null==a||0<=a}Object.defineProperty(e,"__esModule",{value:!0});var C=n.vec3f64.fromValues(1,1,1);e.computeCentroid=function(a,b){if("point"===a.type)return g(a,b,!1);if(k.isHydratedGeometry(a))switch(a.type){case "extent":return g(a.center,b,!1);case "polygon":return g(a.centroid,b,!1);case "polyline":return g(v(a),b,!0);case "mesh":return g(a.extent.center,b,!1)}else switch(a.type){case "extent":var c=B.isFinite(a.zmin);a=k.makeDehydratedPoint(.5*
(a.xmax+a.xmin),.5*(a.ymax+a.ymin),c?.5*(a.zmax+a.zmin):void 0,a.spatialReference);return g(a,b,!0);case "polygon":return(c=a.rings[0])&&0!==c.length?(c=y.ringsCentroid(a.rings,a.hasZ),a=k.makeDehydratedPoint(c[0],c[1],c[2],a.spatialReference)):a=null,g(a,b,!0);case "polyline":return g(v(a),b,!0)}};e.convertPointSR=g;e.enlargeExtent=function(a,b,c){if(a){b||(b=x.create());var d=.5*a.width*(c-1);c=.5*a.height*(c-1);a.width<1E-7*a.height?d+=c/20:a.height<1E-7*a.width&&(c+=d/20);n.vec4.set(b,a.xmin-
d,a.ymin-c,a.xmax+d,a.ymax+c);return b}return null};e.updateVertexAttributeAuxpos1w=function(a,b){for(var c=0;c<a.geometries.length;++c){var d=a.geometries[c].data.vertexAttributes.auxpos1;d&&d.data[3]!==b&&(d.data[3]=b,a.geometryVertexAttrsUpdated(c))}};e.mixinColorAndOpacity=function(a,b){var c=[1,1,1,1];null!=a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);null!==b&&void 0!==b?c[3]=b:null!=a&&3<a.length&&(c[3]=a[3]);return c};e.overrideColor=function(a,b,c,d,h,e){void 0===e&&(e=[0,0,0,0]);for(var l=0;3>l;++l)e[l]=
a&&null!=a[l]?a[l]:c&&null!=c[l]?c[l]:h[l];e[3]=null!=b?b:null!=d?d:h[3];return e};e.computeObjectScale=function(a,b,c,d){void 0===a&&(a=C);void 0===d&&(d=1);var h=Array(3);if(null==b||null==c)h[0]=1,h[1]=1,h[2]=1;else{for(var e=void 0,l=0,f=2;0<=f;f--){var g=a[f],k=void 0,m=null!=g,p=0===f&&!e&&!m,q=c[f];"symbolValue"===g||p?k=0!==q?b[f]/q:1:m&&"proportional"!==g&&isFinite(g)&&(k=0!==q?g/q:1);null!=k&&(e=h[f]=k,l=Math.max(l,Math.abs(k)))}for(f=2;0<=f;f--)null==h[f]?h[f]=e:0===h[f]&&(h[f]=.001*l)}for(f=
2;0<=f;f--)h[f]/=d;return n.vec3f64.fromArray(h)};e.computeSizeWithResourceSize=function(a,b){var c=b.width,d=b.depth,e=b.height;b=b.isPrimitive?10:1;if(null==c&&null==e&&null==d)return[b*a[0],b*a[1],b*a[2]];for(var c=n.vec3f64.fromValues(c,d,e),g,d=0;3>d;d++)if(e=c[d],null!=e){g=e/a[d];break}for(d=0;3>d;d++)null==c[d]&&(c[d]=a[d]*g);return c};e.validateSymbolLayerSize=function(a){null!=a.isPrimitive&&(a=[a.width,a.depth,a.height]);return w(a)?null:"Symbol sizes may not be negative values"};e.computeObjectRotation=
function(a,b,c,d){void 0===d&&(d=n.mat4f64.create());a=a||0;b=b||0;c=c||0;0!==a&&n.mat4.rotateZ(d,d,-a/180*Math.PI);0!==b&&n.mat4.rotateX(d,d,b/180*Math.PI);0!==c&&n.mat4.rotateY(d,d,c/180*Math.PI);return d};e.demResolutionForBoundingBox=function(a,b){return null!=b.minDemResolution?b.minDemResolution:r.isPoint(a)?b.minDemResolutionForPoints:.01*r.maximumDimension(a)};e.getGraphics3DSymbol=function(a){return a instanceof A?a.graphics3DSymbol:a instanceof z?a:null};var m=[0,0]});