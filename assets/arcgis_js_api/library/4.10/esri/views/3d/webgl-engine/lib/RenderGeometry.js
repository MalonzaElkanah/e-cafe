// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/libs/gl-matrix-2/gl-matrix","../../support/mathUtils"],function(q,r,c,d){return function(){function a(e,b,a,f,d,h,k,l,m,n,p){this.shaderTransformationDirty=!0;this.data=e.toRenderData();this.componentOffsets=e.componentOffsets;this.boundingInfo=b;this.material=a;this.origin=null;this.center=c.vec3f64.create();this.bsRadius=0;this.transformation=null;this.calculateShaderTransformation=d;f&&this.updateTransformation(f,h);this.castShadow=k;this.singleUse=
l;this.name=m;this.uniqueName=n;this.idx=p;this.canBeMerged=!0;this.instanceParameters={}}a.prototype.updateTransformation=function(a,b){this.transformation=a;this.shaderTransformationDirty=!0;this.bsRadius=this.getBoundingSphere(a,b,this.center)};a.prototype.shaderTransformationChanged=function(){this.shaderTransformationDirty=!0};a.prototype.getBoundingSphere=function(a,b,g){b=b||d.maxScale(a);c.vec3.transformMat4(g,this.boundingInfo.getCenter(),a);return this.boundingInfo.getBSRadius()*b};Object.defineProperty(a.prototype,
"hasShaderTransformation",{get:function(){return!!this.calculateShaderTransformation},enumerable:!0,configurable:!0});a.prototype.getShaderTransformation=function(){return this.calculateShaderTransformation?(this.shaderTransformationDirty&&(this.shaderTransformation||(this.shaderTransformation=c.mat4f64.create()),c.mat4.copy(this.shaderTransformation,this.calculateShaderTransformation(this.transformation)),this.shaderTransformationDirty=!1),this.shaderTransformation):this.transformation};return a}()});