// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Graphic ../../core/Accessor ../../core/HandleOwner ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../symbols/support/symbolPreview".split(" "),function(g,r,k,d,l,m,n,e,p,c,q){return function(h){function b(a){a=h.call(this)||this;a.description=null;a.label=null;a.layer=null;a.template=null;a.thumbnail=null;return a}k(b,h);b.prototype.initialize=function(){var a=
this;this.handles.add(p.init(this,["layer.renderer","template"],function(){return a._set("thumbnail",null)}))};b.prototype.fetchThumbnail=function(){var a=this;return this._get("thumbnail")?e.resolve():this._getPreviewSymbol().then(function(a){return q.renderPreviewHTML(a,{maxSize:36})}).then(function(f){a._set("thumbnail",f)})};b.prototype._getPreviewSymbol=function(){var a=this.layer,f=this.template,b=this.layer.renderer;return b&&(f=new l({attributes:f.prototype.attributes}),b=b.getSymbol(f))?
e.resolve(b):this._getFallbackSymbolFromGeometry(a)};b.prototype._getFallbackSymbolFromGeometry=function(a){a=a.geometryType;if("point"===a||"multipoint"===a)return e.create(function(a){return g(["../../symbols/SimpleMarkerSymbol"],a)}).then(function(a){return new a});if("polyline"===a)return e.create(function(a){return g(["../../symbols/SimpleLineSymbol"],a)}).then(function(a){return new a});if("polygon"===a||"mesh"===a||"multipatch"===a)return e.create(function(a){return g(["../../symbols/SimpleFillSymbol"],
a)}).then(function(a){return new a})};d([c.property({aliasOf:"template.description"})],b.prototype,"description",void 0);d([c.property({aliasOf:"template.name"})],b.prototype,"label",void 0);d([c.property()],b.prototype,"layer",void 0);d([c.property()],b.prototype,"template",void 0);d([c.property({readOnly:!0})],b.prototype,"thumbnail",void 0);return b=d([c.subclass("esri.widgets.FeatureTemplates.TemplateItem")],b)}(c.declared(m,n))});