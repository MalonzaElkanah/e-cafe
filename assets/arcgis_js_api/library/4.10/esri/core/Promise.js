// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./Error ./promiseUtils ./scheduling ./accessorSupport/decorators".split(" "),function(u,v,l,m,n,p,g,q,k){function f(c){var a=c._promiseProps;if(!a.isFulfilled()){var b=a.resolvingPromises,e,h;a.allPromise&&a.allPromise.cancel();var d,f=g.create(function(b,a){d={resolve:b,reject:a}});for(e=b.length-1;0<=e;e--)h=b[e],h.isCanceled&&h.isCanceled()&&b.splice(e,1);h=null;(a.allPromise=g.all(b.concat([f]))).then(function(){a.resolver.resolve(c);
c=a=d=a.allPromise=a.resolvingPromises=null},function(b){a.allPromise=null;if(!b||"cancel"!==b.dojoType){var e=Array.prototype.slice.call(arguments,0);a.resolver.reject(e[0]);c=a=d=a.allPromise=a.resolvingPromises=null}});d&&q.schedule(function(){d&&d.resolve()})}}var r=function(c){c=new p("AbortError");c.target=this.instance;c.dojoType="cancel";return c},t=function(){function c(a){var b=this;this.canceler=r.bind(this);this.status=void 0;this.initialized=!1;this.resolvingPromises=[];this.instance=
a;this.promise=g.create(function(a,c){b.resolver={resolve:a,reject:c}});this.promise.then(function(){b.status=1},function(){b.status=2})}c.prototype.cancel=function(){if(!this.isFulfilled()){this.allPromise.cancel();for(var a=this.resolvingPromises.concat(),b=a.length-1;0<=b;b--)a[b].cancel();this.resolver.cancel()}};c.prototype.isResolved=function(){return 1===this.status};c.prototype.isRejected=function(){return 2===this.status};c.prototype.isFulfilled=function(){return!!this.status};return c}();
return function(c){function a(){var b=c.call(this)||this;b._promiseProps=new t(b);var a=b.postscript;a?b.postscript=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];a.apply(b,c);b.postscript=a;f(b)}:f(b);return b}l(a,c);a.prototype.isResolved=function(){return this._promiseProps.isResolved()};a.prototype.isRejected=function(){return this._promiseProps.isRejected()};a.prototype.isFulfilled=function(){return this._promiseProps.isFulfilled()};a.prototype.when=function(a,c){var b=
this;return g.create(function(a,c){b._promiseProps.promise.then(a,c)},this._promiseProps.canceler).then(a,c)};a.prototype.catch=function(a){return this.when(null,a)};a.prototype.addResolvingPromise=function(a){a&&!this._promiseProps.isFulfilled()&&("_promiseProps"in a?this._promiseProps.resolvingPromises.push(a.when()):this._promiseProps.resolvingPromises.push(a),f(this))};return a=m([k.subclass()],a)}(k.declared(n))});