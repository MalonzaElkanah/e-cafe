// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),function(y,m,p,g,n,h,q,r){Object.defineProperty(m,"__esModule",{value:!0});var t=Object.prototype.hasOwnProperty,u=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,v={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},w=/^_(set|get)([a-zA-Z0-9]+)Attr$/;m.processPrototype=function(d){for(var x=d.declaredClass,f=d.properties||{},e=0,k=Object.getOwnPropertyNames(f);e<
k.length;e++){var a=k[e],b=f[a],c=typeof b;null==b?h.setPropertyMetadata(d,a,{value:b}):Array.isArray(b)?h.setPropertyMetadata(d,a,{type:[b[0]],value:null}):"object"===c?q.getProperties(b)||b instanceof Date?h.setPropertyMetadata(d,a,{type:b.constructor,value:b}):h.setPropertyMetadata(d,a,b):"boolean"===c?h.setPropertyMetadata(d,a,{type:Boolean,value:b}):"string"===c?h.setPropertyMetadata(d,a,{type:String,value:b}):"number"===c?h.setPropertyMetadata(d,a,{type:Number,value:b}):"function"===c&&h.setPropertyMetadata(d,
a,{type:b,value:null})}e=0;for(k=Object.getOwnPropertyNames(d);e<k.length;e++){var c=k[e],b=d[c],f=a=void 0,l=u.exec(c);if(l)a=l[1],f=v[l[2]];else if(l=w.exec(c))a=l[2][0].toLowerCase()+l[2].substr(1),f=l[1].toLowerCase();a&&f&&(a=h.getPropertyMetadata(d,a),p.setDeepValue(f,b,a))}e=0;for(k=Object.getOwnPropertyNames(h.getPropertiesMetadata(d));e<k.length;e++)if(a=k[e],b=h.getPropertyMetadata(d,a),f=b.type,c=b.types,void 0===b.value&&t.call(d,a)&&(b.value=d[a]),!b.cast&&f){a=b;b=0;for(c=f;Array.isArray(c)&&
1===c.length&&"string"!==typeof c[0]&&"number"!==typeof c[0];)c=c[0],b++;f=g.isOneOf(c)?0===b?g.ensureOneOf(c):g.ensureNArrayTyped(g.ensureOneOf(c),b):1===b?g.ensureArray(c):1<b?g.ensureNArray(c,b):g.ensureType(f);a.cast=f}else!b.cast&&c&&(Array.isArray(c)?b.cast=g.ensureArrayTyped(g.ensureOneOfType(c[0])):b.cast=g.ensureOneOfType(c));n.processPrototypeMetadatas(h.getPropertiesMetadata(d),x);return h.getPropertiesMetadata(d)};m.processClass=function(d){for(var g=d.prototype,f=g.declaredClass,e=d._meta.bases,
k={},a=e.length-1;0<=a;a--)h.merge(k,h.getMetadata(e[a].prototype));var b=k.properties;n.processClassMetadatas(b,f);Object.defineProperty(d,"__accessorMetadata__",{value:{properties:b,autoDestroy:!!k.autoDestroy}});for(var c={},f=function(a){var d=b[a];c[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):d.value},set:function(b){var c=this.__accessor__;if(!c)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b});else if(!Object.isFrozen(this)){if(c.initialized&&
d.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===c.lifecycle&&d.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+a+"' of "+this.declaredClass);c.set(a,b)}}}},e=0,a=Object.getOwnPropertyNames(b);e<a.length;e++)f(a[e]);Object.defineProperties(d.prototype,c);if(k.parameters)for(d=0,f=Object.getOwnPropertyNames(k.parameters);d<f.length;d++)e=f[d],a=Object.getOwnPropertyDescriptor(g,e)||{value:g[e]},
(a=r.autocastMethod(g,e,a))&&Object.defineProperty(g,e,a);return k}});