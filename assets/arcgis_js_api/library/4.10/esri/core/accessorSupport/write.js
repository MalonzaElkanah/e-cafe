// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports ../arrayUtils ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(v,h,q,r,t,m,l,n){function p(c,f,d,g,e,a){if(!g||!g.write)return!1;var b=c.get(d);if(!e&&g.write.overridePolicy){var h=g.write.overridePolicy.call(c,b,d,a);void 0!==h&&(e=h)}e||(e=g.write);if(!e||!1===e.enabled)return!1;if((null===b&&!e.allowNull||void 0===b)&&e.isRequired)return(b=new r("web-document-write:property-required","Missing value for required property '"+
d+"' on '"+c.declaredClass+"'",{propertyName:d,target:c}),a)&&a.messages?a.messages.push(b):b&&!a&&u.error(b.name,b.message),!1;if(void 0===b||null===b&&!e.allowNull||!e.ignoreOrigin&&a&&a.origin&&f.store.originOf(d)<m.nameToId(a.origin))return!1;f=g.default;void 0===f?a=!1:"function"===typeof f?Array.isArray(b)?(a=f.call(c,d,a),a=q.equals(a,b)):a=!1:a=f===b;return a?!1:!0}function k(c,f,d){if(c&&"function"===typeof c.toJSON&&(!c.toJSON.isDefaultToJSON||!c.write))return l.merge(f,c.toJSON());var g=
l.getProperties(c),e=g.metadatas,a;for(a in e){var b=n.originSpecificWritePropertyDefinition(e[a],d);if(p(c,g,a,b,null,d)){var h=c.get(a),k={};b.write.writer.call(c,h,k,"string"===typeof b.write.target?b.write.target:a,d);b=k;0<Object.keys(b).length&&(f=l.merge(f,b),d&&d.writtenProperties&&d.writtenProperties.push({target:c,propName:a,oldOrigin:m.idToReadableName(g.store.originOf(a)),newOrigin:d.origin}))}}return f}Object.defineProperty(h,"__esModule",{value:!0});var u=t.getLogger("esri.core.accessorSupport.write");
h.willPropertyWrite=function(c,f,d,g){var e=l.getProperties(c),a=n.originSpecificWritePropertyDefinition(e.metadatas[f],g);return a?p(c,e,f,a,d,g):!1};h.write=k;h.default=k});