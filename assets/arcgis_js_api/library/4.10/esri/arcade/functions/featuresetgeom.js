// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.10/esri/copyright.txt for details.
//>>built
define("require exports dojo/Deferred ../kernel ../languageUtils ../featureset/actions/SpatialFilter ../featureset/sources/Empty ../../geometry/Geometry ../../geometry/geometryEngineAsync".split(" "),function(r,m,k,n,f,q,p,h,l){function g(c,d,e,g,m){return m(c,d,function(a,c,b){if(2>b.length)return g(Error("Missing Parameters"));b=f.autoCastFeatureToGeometry(b);if(null===b[0]&&null===b[1])return b=new k,b.resolve(!1),b.promise;if(f.isFeatureSet(b[0]))return b[1]instanceof h?(a=new k,a.resolve(new q({parentfeatureset:b[0],
relation:e,relationGeom:b[1]})),a.promise):null===b[1]?(a=new k,a.resolve(new p({parentfeatureset:b[0]})),a.promise):g("Spatial Relation cannot accept this parameter type");if(b[0]instanceof h){if(b[1]instanceof h){var d=new k;a=null;switch(e){case "esriSpatialRelEnvelopeIntersects":a=l.intersects(n.shapeExtent(b[0]),n.shapeExtent(b[1]));break;case "esriSpatialRelIntersects":a=l.intersects(b[0],b[1]);break;case "esriSpatialRelContains":a=l.contains(b[0],b[1]);break;case "esriSpatialRelOverlaps":a=
l.overlaps(b[0],b[1]);break;case "esriSpatialRelWithin":a=l.within(b[0],b[1]);break;case "esriSpatialRelTouches":a=l.touches(b[0],b[1]);break;case "esriSpatialRelCrosses":a=l.crosses(b[0],b[1])}null!==a?a.then(n.callback(function(a){d.resolve(a)},d),n.errback(d)):d.reject(Error("Unrecognised Relationship"));return d.promise}return f.isFeatureSet(b[1])?(a=new k,a.resolve(new q({parentfeatureset:b[1],relation:e,relationGeom:b[0]})),a.promise):null===b[1]?(a=new k,a.resolve(!1),a.promise):g("Spatial Relation cannot accept this parameter type")}if(null===
b[0]){if(f.isFeatureSet(b[1]))return a=new k,a.resolve(new p({parentfeatureset:b[1]})),a.promise;if(b[1]instanceof h||null===b[1])return a=new k,a.resolve(!1),a.promise}else return g("Spatial Relation cannot accept this parameter type")})}Object.defineProperty(m,"__esModule",{value:!0});m.registerFunctions=function(c){"async"===c.mode&&(c.functions.intersects=function(d,e){return g(d,e,"esriSpatialRelIntersects",c.failDefferred,c.standardFunctionAsync)},c.functions.envelopeintersects=function(d,e){return g(d,
e,"esriSpatialRelEnvelopeIntersects",c.failDefferred,c.standardFunctionAsync)},c.signatures.push({name:"envelopeintersects",min:"2",max:"2"}),c.functions.contains=function(d,e){return g(d,e,"esriSpatialRelContains",c.failDefferred,c.standardFunctionAsync)},c.functions.overlaps=function(d,e){return g(d,e,"esriSpatialRelOverlaps",c.failDefferred,c.standardFunctionAsync)},c.functions.within=function(d,e){return g(d,e,"esriSpatialRelWithin",c.failDefferred,c.standardFunctionAsync)},c.functions.touches=
function(d,e){return g(d,e,"esriSpatialRelTouches",c.failDefferred,c.standardFunctionAsync)},c.functions.crosses=function(d,e){return g(d,e,"esriSpatialRelCrosses",c.failDefferred,c.standardFunctionAsync)},c.functions.relate=function(d,e){return c.standardFunctionAsync(d,e,function(c,d,a){a=f.autoCastFeatureToGeometry(a);f.pcCheck(a,3,3);if(a[0]instanceof h&&a[1]instanceof h)return l.relate(a[0],a[1],f.toString(a[2]));if(a[0]instanceof h&&null===a[1]||a[1]instanceof h&&null===a[0])return!1;if(f.isFeatureSet(a[0])&&
null===a[1])return new p({parentfeatureset:a[0]});if(f.isFeatureSet(a[1])&&null===a[0])return new p({parentfeatureset:a[1]});if(f.isFeatureSet(a[0])&&a[1]instanceof h)return a[0].relate(a[1],f.toString(a[2]));if(f.isFeatureSet(a[1])&&a[0]instanceof h)return a[1].relate(a[0],f.toString(a[2]));if(null===a[0]&&null===a[1])return!1;throw Error("Illegal Argument");})})}});